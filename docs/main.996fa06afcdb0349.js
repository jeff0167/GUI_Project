(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{2011:(Wt,nt,B)=>{"use strict";B.d(nt,{Dh:()=>Me,GT:()=>Ce,cc:()=>Pe,hO:()=>De,on:()=>fe,pX:()=>be,xv:()=>we});var y=B(4650),f=B(9260),W=B(2122);Wt=B.hmd(Wt);const oe=["ngOnDestroy"],be=(ye,Oe,rt,Ye={})=>new Proxy(ye,{get:(Xe,Je)=>rt.runOutsideAngular(()=>{var ht;if(ye[Je])return!(null===(ht=null==Ye?void 0:Ye.spy)||void 0===ht)&&ht.get&&Ye.spy.get(Je,ye[Je]),ye[Je];if(oe.indexOf(Je)>-1)return()=>{};const Te=Oe.toPromise().then(re=>{const xe=re&&re[Je];return"function"==typeof xe?xe.bind(re):xe&&xe.then?xe.then(Ie=>rt.run(()=>Ie)):rt.run(()=>xe)});return new Proxy(()=>{},{get:(re,xe)=>Te[xe],apply:(re,xe,Ie)=>Te.then(He=>{var ze;const ut=He&&He(...Ie);return!(null===(ze=null==Ye?void 0:Ye.spy)||void 0===ze)&&ze.apply&&Ye.spy.apply(Je,Ie,ut),ut})})})}),Ce=(ye,Oe)=>{Oe.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ye=>{Object.defineProperty(ye.prototype,Ye,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ye))})})};class he{constructor(Oe){return Oe}}const Me=new y.OlP("angularfire2.app.options"),we=new y.OlP("angularfire2.app.name");function fe(ye,Oe,rt){const Xe="object"==typeof rt&&rt||{};Xe.name=Xe.name||"string"==typeof rt&&rt||"[DEFAULT]";const ht=f.Z.apps.filter(Te=>Te&&Te.name===Xe.name)[0]||Oe.runOutsideAngular(()=>f.Z.initializeApp(ye,Xe));try{JSON.stringify(ye)!==JSON.stringify(ht.options)&&ae("error",`${ht.name} Firebase App already initialized with different options${Wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(ht)}const ae=(ye,...Oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[ye](...Oe)},ue={provide:he,useFactory:fe,deps:[Me,y.R0b,[new y.FiY,we]]};let De=(()=>{class ye{constructor(rt){f.Z.registerVersion("angularfire",W.q4.full,"core"),f.Z.registerVersion("angularfire",W.q4.full,"app-compat"),f.Z.registerVersion("angular",y.q4F.full,rt.toString())}static initializeApp(rt,Ye){return{ngModule:ye,providers:[{provide:Me,useValue:rt},{provide:we,useValue:Ye}]}}}return ye.\u0275fac=function(rt){return new(rt||ye)(y.LFG(y.Lbi))},ye.\u0275mod=y.oAB({type:ye}),ye.\u0275inj=y.cJS({providers:[ue]}),ye})();function Pe(ye,Oe,rt,Ye,Xe){const[,Je,ht]=globalThis.\u0275AngularfireInstanceCache.find(Te=>Te[0]===ye)||[];if(Je)return function Ke(ye,Oe){try{return ye.toString()===Oe.toString()}catch{return ye===Oe}}(Xe,ht)||(_e("error",`${Oe} was already initialized on the ${rt} Firebase App with different settings.${pt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Xe,was:ht})),Je;{const Te=Ye();return globalThis.\u0275AngularfireInstanceCache.push([ye,Te,Xe]),Te}}const pt=!!Wt.hot,_e=(ye,...Oe)=>{(0,y.X6Q)()&&typeof console<"u"&&console[ye](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(Wt,nt,B)=>{"use strict";B.d(nt,{q4:()=>Oa,iC:()=>rn,fc:()=>Ht,HU:()=>K,vb:()=>T,JM:()=>C});var y=B(4650),f=B(259),W=B(5861),oe=B(9681),be=B(2090),Ce=B(4859),he=B(1877),Me=B(8766);const we="@firebase/installations",fe="0.6.4",ae=1e4,ue=`w:${fe}`,De="FIS_v2",Pe="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,Oe=new be.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(N){return N instanceof be.ZR&&N.code.includes("request-failed")}function Ye({projectId:N}){return`${Pe}/projects/${N}/installations`}function Xe(N){return{token:N.token,requestStatus:2,expiresIn:He(N.expiresIn),creationTime:Date.now()}}function Je(N,$){return ht.apply(this,arguments)}function ht(){return(ht=(0,W.Z)(function*(N,$){const ve=(yield $.json()).error;return Oe.create("request-failed",{requestName:N,serverCode:ve.code,serverMessage:ve.message,serverStatus:ve.status})})).apply(this,arguments)}function Te({apiKey:N}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N})}function xe(N){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,W.Z)(function*(N){const $=yield N();return $.status>=500&&$.status<600?N():$})).apply(this,arguments)}function He(N){return Number(N.replace("s","000"))}function Ze(){return(Ze=(0,W.Z)(function*({appConfig:N,heartbeatServiceProvider:$},{fid:Q}){const ve=Ye(N),tt=Te(N),dt=$.getImmediate({optional:!0});if(dt){const wn=yield dt.getHeartbeatsHeader();wn&&tt.append("x-firebase-client",wn)}const Cn={method:"POST",headers:tt,body:JSON.stringify({fid:Q,authVersion:De,appId:N.appId,sdkVersion:ue})},Dn=yield xe(()=>fetch(ve,Cn));if(Dn.ok){const wn=yield Dn.json();return{fid:wn.fid||Q,registrationStatus:2,refreshToken:wn.refreshToken,authToken:Xe(wn.authToken)}}throw yield Je("Create Installation",Dn)})).apply(this,arguments)}function lt(N){return new Promise($=>{setTimeout($,N)})}const Re=/^[cdef][\w-]{21}$/,Se="";function Be(){try{const N=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(N),N[0]=112+N[0]%16;const Q=function Qe(N){return function ot(N){return btoa(String.fromCharCode(...N)).replace(/\+/g,"-").replace(/\//g,"_")}(N).substr(0,22)}(N);return Re.test(Q)?Q:Se}catch{return Se}}function gt(N){return`${N.appName}!${N.appId}`}const Zt=new Map;function Ft(N,$){const Q=gt(N);de(Q,$),function It(N,$){const Q=function Ge(){return!Bt&&"BroadcastChannel"in self&&(Bt=new BroadcastChannel("[Firebase] FID Change"),Bt.onmessage=N=>{de(N.data.key,N.data.fid)}),Bt}();Q&&Q.postMessage({key:N,fid:$}),function Jt(){0===Zt.size&&Bt&&(Bt.close(),Bt=null)}()}(Q,$)}function de(N,$){const Q=Zt.get(N);if(Q)for(const ve of Q)ve($)}let Bt=null;const tn="firebase-installations-database",Y=1,on="firebase-installations-store";let Rn=null;function nr(){return Rn||(Rn=(0,Me.X3)(tn,Y,{upgrade:(N,$)=>{0===$&&N.createObjectStore(on)}})),Rn}function Wn(N,$){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,W.Z)(function*(N,$){const Q=gt(N),tt=(yield nr()).transaction(on,"readwrite"),dt=tt.objectStore(on),Ut=yield dt.get(Q);return yield dt.put($,Q),yield tt.done,(!Ut||Ut.fid!==$.fid)&&Ft(N,$.fid),$})).apply(this,arguments)}function Vt(N){return _r.apply(this,arguments)}function _r(){return(_r=(0,W.Z)(function*(N){const $=gt(N),ve=(yield nr()).transaction(on,"readwrite");yield ve.objectStore(on).delete($),yield ve.done})).apply(this,arguments)}function ar(N,$){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,W.Z)(function*(N,$){const Q=gt(N),tt=(yield nr()).transaction(on,"readwrite"),dt=tt.objectStore(on),Ut=yield dt.get(Q),Cn=$(Ut);return void 0===Cn?yield dt.delete(Q):yield dt.put(Cn,Q),yield tt.done,Cn&&(!Ut||Ut.fid!==Cn.fid)&&Ft(N,Cn.fid),Cn})).apply(this,arguments)}function qr(N){return mr.apply(this,arguments)}function mr(){return mr=(0,W.Z)(function*(N){let $;const Q=yield ar(N.appConfig,ve=>{const tt=function pn(N){return Yr(N||{fid:Be(),registrationStatus:0})}(ve),dt=function Lt(N,$){if(0===$.registrationStatus){if(!navigator.onLine)return{installationEntry:$,registrationPromise:Promise.reject(Oe.create("app-offline"))};const Q={fid:$.fid,registrationStatus:1,registrationTime:Date.now()},ve=function hn(N,$){return Nt.apply(this,arguments)}(N,Q);return{installationEntry:Q,registrationPromise:ve}}return 1===$.registrationStatus?{installationEntry:$,registrationPromise:lr(N)}:{installationEntry:$}}(N,tt);return $=dt.registrationPromise,dt.installationEntry});return Q.fid===Se?{installationEntry:yield $}:{installationEntry:Q,registrationPromise:$}}),mr.apply(this,arguments)}function Nt(){return Nt=(0,W.Z)(function*(N,$){try{const Q=yield function ut(N,$){return Ze.apply(this,arguments)}(N,$);return Wn(N.appConfig,Q)}catch(Q){throw rt(Q)&&409===Q.customData.serverCode?yield Vt(N.appConfig):yield Wn(N.appConfig,{fid:$.fid,registrationStatus:0}),Q}}),Nt.apply(this,arguments)}function lr(N){return An.apply(this,arguments)}function An(){return(An=(0,W.Z)(function*(N){let $=yield Tr(N.appConfig);for(;1===$.registrationStatus;)yield lt(100),$=yield Tr(N.appConfig);if(0===$.registrationStatus){const{installationEntry:Q,registrationPromise:ve}=yield qr(N);return ve||Q}return $})).apply(this,arguments)}function Tr(N){return ar(N,$=>{if(!$)throw Oe.create("installation-not-found");return Yr($)})}function Yr(N){return function Di(N){return 1===N.registrationStatus&&N.registrationTime+ae<Date.now()}(N)?{fid:N.fid,registrationStatus:0}:N}function jr(){return(jr=(0,W.Z)(function*({appConfig:N,heartbeatServiceProvider:$},Q){const ve=function kn(N,{fid:$}){return`${Ye(N)}/${$}/authTokens:generate`}(N,Q),tt=function re(N,{refreshToken:$}){const Q=Te(N);return Q.append("Authorization",function ze(N){return`${De} ${N}`}($)),Q}(N,Q),dt=$.getImmediate({optional:!0});if(dt){const wn=yield dt.getHeartbeatsHeader();wn&&tt.append("x-firebase-client",wn)}const Cn={method:"POST",headers:tt,body:JSON.stringify({installation:{sdkVersion:ue,appId:N.appId}})},Dn=yield xe(()=>fetch(ve,Cn));if(Dn.ok)return Xe(yield Dn.json());throw yield Je("Generate Auth Token",Dn)})).apply(this,arguments)}function In(N){return ti.apply(this,arguments)}function ti(){return ti=(0,W.Z)(function*(N,$=!1){let Q;const ve=yield ar(N.appConfig,dt=>{if(!vn(dt))throw Oe.create("not-registered");const Ut=dt.authToken;if(!$&&function dr(N){return 2===N.requestStatus&&!function Ae(N){const $=Date.now();return $<N.creationTime||N.creationTime+N.expiresIn<$+Ke}(N)}(Ut))return dt;if(1===Ut.requestStatus)return Q=function zt(N,$){return St.apply(this,arguments)}(N,$),dt;{if(!navigator.onLine)throw Oe.create("app-offline");const Cn=function Ee(N){const $={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},N),{authToken:$})}(dt);return Q=function cn(N,$){return mn.apply(this,arguments)}(N,Cn),Cn}});return Q?yield Q:ve.authToken}),ti.apply(this,arguments)}function St(){return(St=(0,W.Z)(function*(N,$){let Q=yield nn(N.appConfig);for(;1===Q.authToken.requestStatus;)yield lt(100),Q=yield nn(N.appConfig);const ve=Q.authToken;return 0===ve.requestStatus?In(N,$):ve})).apply(this,arguments)}function nn(N){return ar(N,$=>{if(!vn($))throw Oe.create("not-registered");return function $e(N){return 1===N.requestStatus&&N.requestTime+ae<Date.now()}($.authToken)?Object.assign(Object.assign({},$),{authToken:{requestStatus:0}}):$})}function mn(){return mn=(0,W.Z)(function*(N,$){try{const Q=yield function er(N,$){return jr.apply(this,arguments)}(N,$),ve=Object.assign(Object.assign({},$),{authToken:Q});return yield Wn(N.appConfig,ve),Q}catch(Q){if(!rt(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const ve=Object.assign(Object.assign({},$),{authToken:{requestStatus:0}});yield Wn(N.appConfig,ve)}else yield Vt(N.appConfig);throw Q}}),mn.apply(this,arguments)}function vn(N){return void 0!==N&&2===N.registrationStatus}function at(){return(at=(0,W.Z)(function*(N){const $=N,{installationEntry:Q,registrationPromise:ve}=yield qr($);return ve?ve.catch(console.error):In($).catch(console.error),Q.fid})).apply(this,arguments)}function ke(){return ke=(0,W.Z)(function*(N,$=!1){const Q=N;return yield function Ne(N){return ge.apply(this,arguments)}(Q),(yield In(Q,$)).token}),ke.apply(this,arguments)}function ge(){return(ge=(0,W.Z)(function*(N){const{registrationPromise:$}=yield qr(N);$&&(yield $)})).apply(this,arguments)}function yi(N){return Oe.create("missing-app-config-values",{valueName:N})}const Hr="installations",rr=N=>{const $=N.getProvider("app").getImmediate(),Q=function Ti(N){if(!N||!N.options)throw yi("App Configuration");if(!N.name)throw yi("App Name");const $=["projectId","apiKey","appId"];for(const Q of $)if(!N.options[Q])throw yi(Q);return{appName:N.name,projectId:N.options.projectId,apiKey:N.options.apiKey,appId:N.options.appId}}($);return{app:$,appConfig:Q,heartbeatServiceProvider:(0,oe._getProvider)($,"heartbeat"),_delete:()=>Promise.resolve()}},$i=N=>{const $=N.getProvider("app").getImmediate(),Q=(0,oe._getProvider)($,Hr).getImmediate();return{getId:()=>function Ct(N){return at.apply(this,arguments)}(Q),getToken:tt=>function Xt(N){return ke.apply(this,arguments)}(Q,tt)}};(function di(){(0,oe._registerComponent)(new Ce.wA(Hr,rr,"PUBLIC")),(0,oe._registerComponent)(new Ce.wA("installations-internal",$i,"PRIVATE"))})(),(0,oe.registerVersion)(we,fe),(0,oe.registerVersion)(we,fe,"esm2017");const zn="@firebase/remote-config",vr=new be.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xt{constructor($,Q,ve,tt){this.client=$,this.storage=Q,this.storageCache=ve,this.logger=tt}isCachedDataFresh($,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ve=Date.now()-Q,tt=ve<=$;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ve}. Cache max age millis (minimumFetchIntervalMillis setting): ${$}. Is cache hit: ${tt}.`),tt}fetch($){var Q=this;return(0,W.Z)(function*(){const[ve,tt]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(tt&&Q.isCachedDataFresh($.cacheMaxAgeMillis,ve))return tt;$.eTag=tt&&tt.eTag;const dt=yield Q.client.fetch($),Ut=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===dt.status&&Ut.push(Q.storage.setLastSuccessfulFetchResponse(dt)),yield Promise.all(Ut),dt})()}}function en(N=navigator){return N.languages&&N.languages[0]||N.language}class ln{constructor($,Q,ve,tt,dt,Ut){this.firebaseInstallations=$,this.sdkVersion=Q,this.namespace=ve,this.projectId=tt,this.apiKey=dt,this.appId=Ut}fetch($){var Q=this;return(0,W.Z)(function*(){const[ve,tt]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),Ut=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,Cn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":$.eTag||"*"},Dn={sdk_version:Q.sdkVersion,app_instance_id:ve,app_instance_id_token:tt,app_id:Q.appId,language_code:en()},wn={method:"POST",headers:Cn,body:JSON.stringify(Dn)},Gt=fetch(Ut,wn),Kn=new Promise((vo,zo)=>{$.signal.addEventListener(()=>{const td=new Error("The operation was aborted.");td.name="AbortError",zo(td)})});let On;try{yield Promise.race([Gt,Kn]),On=yield Gt}catch(vo){let zo="fetch-client-network";throw"AbortError"===(null==vo?void 0:vo.name)&&(zo="fetch-timeout"),vr.create(zo,{originalErrorMessage:null==vo?void 0:vo.message})}let zi=On.status;const el=On.headers.get("ETag")||void 0;let bl,Hl;if(200===On.status){let vo;try{vo=yield On.json()}catch(zo){throw vr.create("fetch-client-parse",{originalErrorMessage:null==zo?void 0:zo.message})}bl=vo.entries,Hl=vo.state}if("INSTANCE_STATE_UNSPECIFIED"===Hl?zi=500:"NO_CHANGE"===Hl?zi=304:("NO_TEMPLATE"===Hl||"EMPTY_CONFIG"===Hl)&&(bl={}),304!==zi&&200!==zi)throw vr.create("fetch-status",{httpStatus:zi});return{status:zi,eTag:el,config:bl}})()}}class jn{constructor($,Q){this.client=$,this.storage=Q}fetch($){var Q=this;return(0,W.Z)(function*(){const ve=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch($,ve)})()}attemptFetch($,{throttleEndTimeMillis:Q,backoffCount:ve}){var tt=this;return(0,W.Z)(function*(){yield function Tn(N,$){return new Promise((Q,ve)=>{const tt=Math.max($-Date.now(),0),dt=setTimeout(Q,tt);N.addEventListener(()=>{clearTimeout(dt),ve(vr.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}($.signal,Q);try{const dt=yield tt.client.fetch($);return yield tt.storage.deleteThrottleMetadata(),dt}catch(dt){if(!function Nr(N){if(!(N instanceof be.ZR&&N.customData))return!1;const $=Number(N.customData.httpStatus);return 429===$||500===$||503===$||504===$}(dt))throw dt;const Ut={throttleEndTimeMillis:Date.now()+(0,be.$s)(ve),backoffCount:ve+1};return yield tt.storage.setThrottleMetadata(Ut),tt.attemptFetch($,Ut)}})()}}class Oi{constructor($,Q,ve,tt,dt){this.app=$,this._client=Q,this._storageCache=ve,this._storage=tt,this._logger=dt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ui(N,$){const Q=N.target.error||void 0;return vr.create($,{originalErrorMessage:Q&&(null==Q?void 0:Q.message)})}const li="app_namespace_store";class ii{constructor($,Q,ve,tt=function bo(){return new Promise((N,$)=>{try{const Q=indexedDB.open("firebase_remote_config",1);Q.onerror=ve=>{$(Ui(ve,"storage-open"))},Q.onsuccess=ve=>{N(ve.target.result)},Q.onupgradeneeded=ve=>{0===ve.oldVersion&&ve.target.result.createObjectStore(li,{keyPath:"compositeKey"})}}catch(Q){$(vr.create("storage-open",{originalErrorMessage:null==Q?void 0:Q.message}))}})}()){this.appId=$,this.appName=Q,this.namespace=ve,this.openDbPromise=tt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus($){return this.set("last_fetch_status",$)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis($){return this.set("last_successful_fetch_timestamp_millis",$)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse($){return this.set("last_successful_fetch_response",$)}getActiveConfig(){return this.get("active_config")}setActiveConfig($){return this.set("active_config",$)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag($){return this.set("active_config_etag",$)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata($){return this.set("throttle_metadata",$)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get($){var Q=this;return(0,W.Z)(function*(){const ve=yield Q.openDbPromise;return new Promise((tt,dt)=>{const Cn=ve.transaction([li],"readonly").objectStore(li),Dn=Q.createCompositeKey($);try{const wn=Cn.get(Dn);wn.onerror=Gt=>{dt(Ui(Gt,"storage-get"))},wn.onsuccess=Gt=>{const Kn=Gt.target.result;tt(Kn?Kn.value:void 0)}}catch(wn){dt(vr.create("storage-get",{originalErrorMessage:null==wn?void 0:wn.message}))}})})()}set($,Q){var ve=this;return(0,W.Z)(function*(){const tt=yield ve.openDbPromise;return new Promise((dt,Ut)=>{const Dn=tt.transaction([li],"readwrite").objectStore(li),wn=ve.createCompositeKey($);try{const Gt=Dn.put({compositeKey:wn,value:Q});Gt.onerror=Kn=>{Ut(Ui(Kn,"storage-set"))},Gt.onsuccess=()=>{dt()}}catch(Gt){Ut(vr.create("storage-set",{originalErrorMessage:null==Gt?void 0:Gt.message}))}})})()}delete($){var Q=this;return(0,W.Z)(function*(){const ve=yield Q.openDbPromise;return new Promise((tt,dt)=>{const Cn=ve.transaction([li],"readwrite").objectStore(li),Dn=Q.createCompositeKey($);try{const wn=Cn.delete(Dn);wn.onerror=Gt=>{dt(Ui(Gt,"storage-delete"))},wn.onsuccess=()=>{tt()}}catch(wn){dt(vr.create("storage-delete",{originalErrorMessage:null==wn?void 0:wn.message}))}})})()}createCompositeKey($){return[this.appId,this.appName,this.namespace,$].join()}}class Ki{constructor($){this.storage=$}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var $=this;return(0,W.Z)(function*(){const Q=$.storage.getLastFetchStatus(),ve=$.storage.getLastSuccessfulFetchTimestampMillis(),tt=$.storage.getActiveConfig(),dt=yield Q;dt&&($.lastFetchStatus=dt);const Ut=yield ve;Ut&&($.lastSuccessfulFetchTimestampMillis=Ut);const Cn=yield tt;Cn&&($.activeConfig=Cn)})()}setLastFetchStatus($){return this.lastFetchStatus=$,this.storage.setLastFetchStatus($)}setLastSuccessfulFetchTimestampMillis($){return this.lastSuccessfulFetchTimestampMillis=$,this.storage.setLastSuccessfulFetchTimestampMillis($)}setActiveConfig($){return this.activeConfig=$,this.storage.setActiveConfig($)}}function si(){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,W.Z)(function*(){if(!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}!function ki(){(0,oe._registerComponent)(new Ce.wA("remote-config",function N($,{instanceIdentifier:Q}){const ve=$.getProvider("app").getImmediate(),tt=$.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,be.hl)())throw vr.create("indexed-db-unavailable");const{projectId:dt,apiKey:Ut,appId:Cn}=ve.options;if(!dt)throw vr.create("registration-project-id");if(!Ut)throw vr.create("registration-api-key");if(!Cn)throw vr.create("registration-app-id");const Dn=new ii(Cn,ve.name,Q=Q||"firebase"),wn=new Ki(Dn),Gt=new he.Yd(zn);Gt.logLevel=he.in.ERROR;const Kn=new ln(tt,oe.SDK_VERSION,Q,dt,Ut,Cn),On=new jn(Kn,Dn),zi=new xt(On,Dn,wn,Gt),el=new Oi(ve,zi,wn,Dn,Gt);return function ri(N){const $=(0,be.m9)(N);$._initializePromise||($._initializePromise=$._storageCache.loadFromStorage().then(()=>{$._isInitializationComplete=!0}))}(el),el},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(zn,"0.4.4"),(0,oe.registerVersion)(zn,"0.4.4","esm2017")}();const go="/firebase-messaging-sw.js",fs="/firebase-cloud-messaging-push-scope",vi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ps="https://fcmregistrations.googleapis.com/v1",As="google.c.a.c_id",Ca="google.c.a.c_l",da="google.c.a.ts",Co="google.c.a.e";var Zi=(()=>{return(N=Zi||(Zi={})).PUSH_RECEIVED="push-received",N.NOTIFICATION_CLICKED="notification-clicked",Zi;var N})();function Vi(N){const $=new Uint8Array(N);return btoa(String.fromCharCode(...$)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Do(N){const Q=(N+"=".repeat((4-N.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ve=atob(Q),tt=new Uint8Array(ve.length);for(let dt=0;dt<ve.length;++dt)tt[dt]=ve.charCodeAt(dt);return tt}const oo="fcm_token_details_db",zs=5,Ei="fcm_token_object_Store";function Gs(){return Gs=(0,W.Z)(function*(N){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(dt=>dt.name).includes(oo))return null;let $=null;return(yield(0,Me.X3)(oo,zs,{upgrade:(ve=(0,W.Z)(function*(tt,dt,Ut,Cn){var Dn;if(dt<2||!tt.objectStoreNames.contains(Ei))return;const wn=Cn.objectStore(Ei),Gt=yield wn.index("fcmSenderId").get(N);if(yield wn.clear(),Gt)if(2===dt){const Kn=Gt;if(!Kn.auth||!Kn.p256dh||!Kn.endpoint)return;$={token:Kn.fcmToken,createTime:null!==(Dn=Kn.createTime)&&void 0!==Dn?Dn:Date.now(),subscriptionOptions:{auth:Kn.auth,p256dh:Kn.p256dh,endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:"string"==typeof Kn.vapidKey?Kn.vapidKey:Vi(Kn.vapidKey)}}}else if(3===dt){const Kn=Gt;$={token:Kn.fcmToken,createTime:Kn.createTime,subscriptionOptions:{auth:Vi(Kn.auth),p256dh:Vi(Kn.p256dh),endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:Vi(Kn.vapidKey)}}}else if(4===dt){const Kn=Gt;$={token:Kn.fcmToken,createTime:Kn.createTime,subscriptionOptions:{auth:Vi(Kn.auth),p256dh:Vi(Kn.p256dh),endpoint:Kn.endpoint,swScope:Kn.swScope,vapidKey:Vi(Kn.vapidKey)}}}}),function(dt,Ut,Cn,Dn){return ve.apply(this,arguments)})})).close(),yield(0,Me.Lj)(oo),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),function ao(N){if(!N||!N.subscriptionOptions)return!1;const{subscriptionOptions:$}=N;return"number"==typeof N.createTime&&N.createTime>0&&"string"==typeof N.token&&N.token.length>0&&"string"==typeof $.auth&&$.auth.length>0&&"string"==typeof $.p256dh&&$.p256dh.length>0&&"string"==typeof $.endpoint&&$.endpoint.length>0&&"string"==typeof $.swScope&&$.swScope.length>0&&"string"==typeof $.vapidKey&&$.vapidKey.length>0}($)?$:null;var ve}),Gs.apply(this,arguments)}const lo="firebase-messaging-database",Da=1,hi="firebase-messaging-store";let Ws=null;function Xi(){return Ws||(Ws=(0,Me.X3)(lo,Da,{upgrade:(N,$)=>{0===$&&N.createObjectStore(hi)}})),Ws}function qs(N){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,W.Z)(function*(N){const $=vs(N),ve=yield(yield Xi()).transaction(hi).objectStore(hi).get($);if(ve)return ve;{const tt=yield function Ms(N){return Gs.apply(this,arguments)}(N.appConfig.senderId);if(tt)return yield ji(N,tt),tt}}),Ni.apply(this,arguments)}function ji(N,$){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,W.Z)(function*(N,$){const Q=vs(N),tt=(yield Xi()).transaction(hi,"readwrite");return yield tt.objectStore(hi).put($,Q),yield tt.done,$})).apply(this,arguments)}function To(){return(To=(0,W.Z)(function*(N){const $=vs(N),ve=(yield Xi()).transaction(hi,"readwrite");yield ve.objectStore(hi).delete($),yield ve.done})).apply(this,arguments)}function vs({appConfig:N}){return N.appId}const En=new be.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Es(N,$){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,W.Z)(function*(N,$){const Q=yield So(N),ve=Jr($),tt={method:"POST",headers:Q,body:JSON.stringify(ve)};let dt;try{dt=yield(yield fetch(Lo(N.appConfig),tt)).json()}catch(Ut){throw En.create("token-subscribe-failed",{errorInfo:null==Ut?void 0:Ut.toString()})}if(dt.error)throw En.create("token-subscribe-failed",{errorInfo:dt.error.message});if(!dt.token)throw En.create("token-subscribe-no-token");return dt.token})).apply(this,arguments)}function Jo(){return(Jo=(0,W.Z)(function*(N,$){const Q=yield So(N),ve=Jr($.subscriptionOptions),tt={method:"PATCH",headers:Q,body:JSON.stringify(ve)};let dt;try{dt=yield(yield fetch(`${Lo(N.appConfig)}/${$.token}`,tt)).json()}catch(Ut){throw En.create("token-update-failed",{errorInfo:null==Ut?void 0:Ut.toString()})}if(dt.error)throw En.create("token-update-failed",{errorInfo:dt.error.message});if(!dt.token)throw En.create("token-update-no-token");return dt.token})).apply(this,arguments)}function Zs(N,$){return fi.apply(this,arguments)}function fi(){return(fi=(0,W.Z)(function*(N,$){const ve={method:"DELETE",headers:yield So(N)};try{const dt=yield(yield fetch(`${Lo(N.appConfig)}/${$}`,ve)).json();if(dt.error)throw En.create("token-unsubscribe-failed",{errorInfo:dt.error.message})}catch(tt){throw En.create("token-unsubscribe-failed",{errorInfo:null==tt?void 0:tt.toString()})}})).apply(this,arguments)}function Lo({projectId:N}){return`${ps}/projects/${N}/registrations`}function So(N){return gs.apply(this,arguments)}function gs(){return(gs=(0,W.Z)(function*({appConfig:N,installations:$}){const Q=yield $.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":N.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function Jr({p256dh:N,auth:$,endpoint:Q,vapidKey:ve}){const tt={web:{endpoint:Q,auth:$,p256dh:N}};return ve!==vi&&(tt.web.applicationPubKey=ve),tt}const Ji=6048e5;function Xs(){return Xs=(0,W.Z)(function*(N){const $=yield function I(N,$){return j.apply(this,arguments)}(N.swRegistration,N.vapidKey),Q={vapidKey:N.vapidKey,swScope:N.swRegistration.scope,endpoint:$.endpoint,auth:Vi($.getKey("auth")),p256dh:Vi($.getKey("p256dh"))},ve=yield qs(N.firebaseDependencies);if(ve){if(function b(N,$){return $.vapidKey===N.vapidKey&&$.endpoint===N.endpoint&&$.auth===N.auth&&$.p256dh===N.p256dh}(ve.subscriptionOptions,Q))return Date.now()>=ve.createTime+Ji?function ea(N,$){return Sn.apply(this,arguments)}(N,{token:ve.token,createTime:Date.now(),subscriptionOptions:Q}):ve.token;try{yield Zs(N.firebaseDependencies,ve.token)}catch(tt){console.warn(tt)}return ta(N.firebaseDependencies,Q)}return ta(N.firebaseDependencies,Q)}),Xs.apply(this,arguments)}function uo(){return uo=(0,W.Z)(function*(N){const $=yield qs(N.firebaseDependencies);$&&(yield Zs(N.firebaseDependencies,$.token),yield function Ys(N){return To.apply(this,arguments)}(N.firebaseDependencies));const Q=yield N.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()}),uo.apply(this,arguments)}function Sn(){return Sn=(0,W.Z)(function*(N,$){try{const Q=yield function Qr(N,$){return Jo.apply(this,arguments)}(N.firebaseDependencies,$),ve=Object.assign(Object.assign({},$),{token:Q,createTime:Date.now()});return yield ji(N.firebaseDependencies,ve),Q}catch(Q){throw yield function Rs(N){return uo.apply(this,arguments)}(N),Q}}),Sn.apply(this,arguments)}function ta(N,$){return xo.apply(this,arguments)}function xo(){return(xo=(0,W.Z)(function*(N,$){const ve={token:yield Es(N,$),createTime:Date.now(),subscriptionOptions:$};return yield ji(N,ve),ve.token})).apply(this,arguments)}function j(){return(j=(0,W.Z)(function*(N,$){return(yield N.pushManager.getSubscription())||N.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Do($)})})).apply(this,arguments)}function U(N){const $={from:N.from,collapseKey:N.collapse_key,messageId:N.fcmMessageId};return function se(N,$){if(!$.notification)return;N.notification={};const Q=$.notification.title;Q&&(N.notification.title=Q);const ve=$.notification.body;ve&&(N.notification.body=ve);const tt=$.notification.image;tt&&(N.notification.image=tt);const dt=$.notification.icon;dt&&(N.notification.icon=dt)}($,N),function O(N,$){$.data&&(N.data=$.data)}($,N),function S(N,$){var Q,ve,tt,dt,Ut;if(!($.fcmOptions||null!==(Q=$.notification)&&void 0!==Q&&Q.click_action))return;N.fcmOptions={};const Cn=null!==(tt=null===(ve=$.fcmOptions)||void 0===ve?void 0:ve.link)&&void 0!==tt?tt:null===(dt=$.notification)||void 0===dt?void 0:dt.click_action;Cn&&(N.fcmOptions.link=Cn);const Dn=null===(Ut=$.fcmOptions)||void 0===Ut?void 0:Ut.analytics_label;Dn&&(N.fcmOptions.analyticsLabel=Dn)}($,N),$}function q(N,$){const Q=[];for(let ve=0;ve<N.length;ve++)Q.push(N.charAt(ve)),ve<$.length&&Q.push($.charAt(ve));return Q.join("")}function kt(N){return En.create("missing-app-config-values",{valueName:N})}q("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),q("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Xn{constructor($,Q,ve){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const tt=function et(N){if(!N||!N.options)throw kt("App Configuration Object");if(!N.name)throw kt("App Name");const $=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=N;for(const ve of $)if(!Q[ve])throw kt(ve);return{appName:N.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}($);this.firebaseDependencies={app:$,appConfig:tt,installations:Q,analyticsProvider:ve}}_delete(){return Promise.resolve()}}function Pr(N){return tr.apply(this,arguments)}function tr(){return(tr=(0,W.Z)(function*(N){try{N.swRegistration=yield navigator.serviceWorker.register(go,{scope:fs}),N.swRegistration.update().catch(()=>{})}catch($){throw En.create("failed-service-worker-registration",{browserErrorMessage:null==$?void 0:$.message})}})).apply(this,arguments)}function Kr(){return(Kr=(0,W.Z)(function*(N,$){if(!$&&!N.swRegistration&&(yield Pr(N)),$||!N.swRegistration){if(!($ instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");N.swRegistration=$}})).apply(this,arguments)}function ha(){return(ha=(0,W.Z)(function*(N,$){$?N.vapidKey=$:N.vapidKey||(N.vapidKey=vi)})).apply(this,arguments)}function pi(){return pi=(0,W.Z)(function*(N,$){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield function ms(N,$){return ha.apply(this,arguments)}(N,null==$?void 0:$.vapidKey),yield function es(N,$){return Kr.apply(this,arguments)}(N,null==$?void 0:$.serviceWorkerRegistration),function Ao(N){return Xs.apply(this,arguments)}(N)}),pi.apply(this,arguments)}function Ta(){return(Ta=(0,W.Z)(function*(N,$,Q){const ve=function Sa(N){switch(N){case Zi.NOTIFICATION_CLICKED:return"notification_open";case Zi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}($);(yield N.firebaseDependencies.analyticsProvider.get()).logEvent(ve,{message_id:Q[As],message_name:Q[Ca],message_time:Q[da],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Va(){return Va=(0,W.Z)(function*(N,$){const Q=$.data;if(!Q.isFirebaseMessaging)return;N.onMessageHandler&&Q.messageType===Zi.PUSH_RECEIVED&&("function"==typeof N.onMessageHandler?N.onMessageHandler(U(Q)):N.onMessageHandler.next(U(Q)));const ve=Q.data;(function x(N){return"object"==typeof N&&!!N&&As in N})(ve)&&"1"===ve[Co]&&(yield function Ps(N,$,Q){return Ta.apply(this,arguments)}(N,Q.messageType,ve))}),Va.apply(this,arguments)}const Ll="@firebase/messaging",fl=N=>{const $=new Xn(N.getProvider("app").getImmediate(),N.getProvider("installations-internal").getImmediate(),N.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function Qs(N,$){return Va.apply(this,arguments)}($,Q)),$},Fi=N=>{const $=N.getProvider("messaging").getImmediate();return{getToken:ve=>function fa(N,$){return pi.apply(this,arguments)}($,ve)}};function na(){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,W.Z)(function*(){try{yield(0,be.eu)()}catch{return!1}return typeof window<"u"&&(0,be.hl)()&&(0,be.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function mo(){(0,oe._registerComponent)(new Ce.wA("messaging",fl,"PUBLIC")),(0,oe._registerComponent)(new Ce.wA("messaging-internal",Fi,"PRIVATE")),(0,oe.registerVersion)(Ll,"0.12.4"),(0,oe.registerVersion)(Ll,"0.12.4","esm2017")}();const Aa="analytics",hu="firebase_id",Ai="origin",ga=6e4,cr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",co="https://www.googletagmanager.com/gtag/js",xi=new he.Yd("@firebase/analytics"),Os=new be.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function fu(N){if(!N.startsWith(co)){const $=Os.create("invalid-gtag-resource",{gtagURL:N});return xi.warn($.message),""}return N}function pu(N){return Promise.all(N.map($=>$.catch(Q=>Q)))}function F(){return(F=(0,W.Z)(function*(N,$,Q,ve,tt,dt){const Ut=ve[tt];try{if(Ut)yield $[Ut];else{const Dn=(yield pu(Q)).find(wn=>wn.measurementId===tt);Dn&&(yield $[Dn.appId])}}catch(Cn){xi.error(Cn)}N("config",tt,dt)})).apply(this,arguments)}function me(){return(me=(0,W.Z)(function*(N,$,Q,ve,tt){try{let dt=[];if(tt&&tt.send_to){let Ut=tt.send_to;Array.isArray(Ut)||(Ut=[Ut]);const Cn=yield pu(Q);for(const Dn of Ut){const wn=Cn.find(Kn=>Kn.measurementId===Dn),Gt=wn&&$[wn.appId];if(!Gt){dt=[];break}dt.push(Gt)}}0===dt.length&&(dt=Object.values($)),yield Promise.all(dt),N("event",ve,tt||{})}catch(dt){xi.error(dt)}})).apply(this,arguments)}const yr=30,qn=new class fr{constructor($={},Q=1e3){this.throttleMetadata=$,this.intervalMillis=Q}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,Q){this.throttleMetadata[$]=Q}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function Ii(N){return new Headers({Accept:"application/json","x-goog-api-key":N})}function Zr(){return(Zr=(0,W.Z)(function*(N){var $;const{appId:Q,apiKey:ve}=N,tt={method:"GET",headers:Ii(ve)},dt=cr.replace("{app-id}",Q),Ut=yield fetch(dt,tt);if(200!==Ut.status&&304!==Ut.status){let Cn="";try{const Dn=yield Ut.json();null!==($=Dn.error)&&void 0!==$&&$.message&&(Cn=Dn.error.message)}catch{}throw Os.create("config-fetch-failed",{httpStatus:Ut.status,responseMessage:Cn})}return Ut.json()})).apply(this,arguments)}function Ar(){return(Ar=(0,W.Z)(function*(N,$=qn,Q){const{appId:ve,apiKey:tt,measurementId:dt}=N.options;if(!ve)throw Os.create("no-app-id");if(!tt){if(dt)return{measurementId:dt,appId:ve};throw Os.create("no-api-key")}const Ut=$.getThrottleMetadata(ve)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Cn=new ma;return setTimeout((0,W.Z)(function*(){Cn.abort()}),void 0!==Q?Q:ga),ks({appId:ve,apiKey:tt,measurementId:dt},Ut,Cn,$)})).apply(this,arguments)}function ks(N,$,Q){return ts.apply(this,arguments)}function ts(){return ts=(0,W.Z)(function*(N,{throttleEndTimeMillis:$,backoffCount:Q},ve,tt=qn){var dt;const{appId:Ut,measurementId:Cn}=N;try{yield function ra(N,$){return new Promise((Q,ve)=>{const tt=Math.max($-Date.now(),0),dt=setTimeout(Q,tt);N.addEventListener(()=>{clearTimeout(dt),ve(Os.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}(ve,$)}catch(Dn){if(Cn)return xi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Cn} provided in the "measurementId" field in the local Firebase config. [${null==Dn?void 0:Dn.message}]`),{appId:Ut,measurementId:Cn};throw Dn}try{const Dn=yield function Wr(N){return Zr.apply(this,arguments)}(N);return tt.deleteThrottleMetadata(Ut),Dn}catch(Dn){const wn=Dn;if(!function ns(N){if(!(N instanceof be.ZR&&N.customData))return!1;const $=Number(N.customData.httpStatus);return 429===$||500===$||503===$||504===$}(wn)){if(tt.deleteThrottleMetadata(Ut),Cn)return xi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Cn} provided in the "measurementId" field in the local Firebase config. [${null==wn?void 0:wn.message}]`),{appId:Ut,measurementId:Cn};throw Dn}const Gt=503===Number(null===(dt=null==wn?void 0:wn.customData)||void 0===dt?void 0:dt.httpStatus)?(0,be.$s)(Q,tt.intervalMillis,yr):(0,be.$s)(Q,tt.intervalMillis),Kn={throttleEndTimeMillis:Date.now()+Gt,backoffCount:Q+1};return tt.setThrottleMetadata(Ut,Kn),xi.debug(`Calling attemptFetch again in ${Gt} millis`),ks(N,Kn,ve,tt)}}),ts.apply(this,arguments)}class ma{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let Ga,Ra;function Uo(){return(Uo=(0,W.Z)(function*(N,$,Q,ve,tt){if(tt&&tt.global)N("event",Q,ve);else{const dt=yield $;N("event",Q,Object.assign(Object.assign({},ve),{send_to:dt}))}})).apply(this,arguments)}function $l(){return($l=(0,W.Z)(function*(){if(!(0,be.hl)())return xi.warn(Os.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,be.eu)()}catch(N){return xi.warn(Os.create("indexeddb-unavailable",{errorInfo:null==N?void 0:N.toString()}).message),!1}return!0})).apply(this,arguments)}function jo(){return jo=(0,W.Z)(function*(N,$,Q,ve,tt,dt,Ut){var Cn;const Dn=function $o(N){return Ar.apply(this,arguments)}(N);Dn.then(zi=>{Q[zi.measurementId]=zi.appId,N.options.measurementId&&zi.measurementId!==N.options.measurementId&&xi.warn(`The measurement ID in the local Firebase config (${N.options.measurementId}) does not match the measurement ID fetched from the server (${zi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zi=>xi.error(zi)),$.push(Dn);const wn=function gu(){return $l.apply(this,arguments)}().then(zi=>{if(zi)return ve.getId()}),[Gt,Kn]=yield Promise.all([Dn,wn]);(function yn(N){const $=window.document.getElementsByTagName("script");for(const Q of Object.values($))if(Q.src&&Q.src.includes(co)&&Q.src.includes(N))return Q;return null})(dt)||function xa(N,$){const Q=function gl(N,$){let Q;return window.trustedTypes&&(Q=window.trustedTypes.createPolicy(N,$)),Q}("firebase-js-sdk-policy",{createScriptURL:fu}),ve=document.createElement("script"),tt=`${co}?l=${N}&id=${$}`;ve.src=Q?null==Q?void 0:Q.createScriptURL(tt):tt,ve.async=!0,document.head.appendChild(ve)}(dt,Gt.measurementId),Ra&&(tt("consent","default",Ra),function Is(N){Ra=N}(void 0)),tt("js",new Date);const On=null!==(Cn=null==Ut?void 0:Ut.config)&&void 0!==Cn?Cn:{};return On[Ai]="firebase",On.update=!0,null!=Kn&&(On[hu]=Kn),tt("config",Gt.measurementId,On),Ga&&(tt("set",Ga),function yl(N){Ga=N}(void 0)),Gt.measurementId}),jo.apply(this,arguments)}class _a{constructor($){this.app=$}_delete(){return delete wi[this.app.options.appId],Promise.resolve()}}let wi={},_l=[];const _o={};let vl,ws,Ka="dataLayer",mu="gtag",Ul=!1;function nc(N,$,Q){!function va(){const N=[];if((0,be.ru)()&&N.push("This is a browser extension environment."),(0,be.zI)()||N.push("Cookies are not available."),N.length>0){const $=N.map((ve,tt)=>`(${tt+1}) ${ve}`).join(" "),Q=Os.create("invalid-analytics-context",{errorInfo:$});xi.warn(Q.message)}}();const ve=N.options.appId;if(!ve)throw Os.create("no-app-id");if(!N.options.apiKey){if(!N.options.measurementId)throw Os.create("no-api-key");xi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${N.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=wi[ve])throw Os.create("already-exists",{id:ve});if(!Ul){!function P(N){let $=[];Array.isArray(window[N])?$=window[N]:window[N]=$}(Ka);const{wrappedGtag:dt,gtagCore:Ut}=function At(N,$,Q,ve,tt){let dt=function(...Ut){window[ve].push(arguments)};return window[tt]&&"function"==typeof window[tt]&&(dt=window[tt]),window[tt]=function mt(N,$,Q,ve){function dt(){return dt=(0,W.Z)(function*(Ut,Cn,Dn){try{"event"===Ut?yield function J(N,$,Q,ve,tt){return me.apply(this,arguments)}(N,$,Q,Cn,Dn):"config"===Ut?yield function G(N,$,Q,ve,tt,dt){return F.apply(this,arguments)}(N,$,Q,ve,Cn,Dn):"consent"===Ut?N("consent","update",Dn):N("set",Cn)}catch(wn){xi.error(wn)}}),dt.apply(this,arguments)}return function tt(Ut,Cn,Dn){return dt.apply(this,arguments)}}(dt,N,$,Q),{gtagCore:dt,wrappedGtag:window[tt]}}(wi,_l,_o,Ka,mu);ws=dt,vl=Ut,Ul=!0}return wi[ve]=function Xc(N,$,Q,ve,tt,dt,Ut){return jo.apply(this,arguments)}(N,_l,_o,$,vl,Ka,Q),new _a(N)}function Js(){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,W.Z)(function*(){if((0,be.ru)()||!(0,be.zI)()||!(0,be.hl)())return!1;try{return yield(0,be.eu)()}catch{return!1}})).apply(this,arguments)}const _u="@firebase/analytics";!function kf(){(0,oe._registerComponent)(new Ce.wA(Aa,($,{options:Q})=>nc($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,oe._registerComponent)(new Ce.wA("analytics-internal",function N($){try{const Q=$.getProvider(Aa).getImmediate();return{logEvent:(ve,tt,dt)=>function rc(N,$,Q,ve){N=(0,be.m9)(N),function ml(N,$,Q,ve,tt){return Uo.apply(this,arguments)}(ws,wi[N.app.options.appId],$,Q,ve).catch(tt=>xi.error(tt))}(Q,ve,tt,dt)}}catch(Q){throw Os.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,oe.registerVersion)(_u,"0.9.5"),(0,oe.registerVersion)(_u,"0.9.5","esm2017")}();var Qc=B(4408),vu=B(7565);const Ja=new class oh extends vu.v{}(class Nf extends Qc.o{constructor($,Q){super($,Q),this.scheduler=$,this.work=Q}schedule($,Q=0){return Q>0?super.schedule($,Q):(this.delay=Q,this.state=$,this.scheduler.flush(this),this)}execute($,Q){return Q>0||this.closed?super.execute($,Q):this._execute($,Q)}requestAsyncId($,Q,ve=0){return null!=ve&&ve>0||null==ve&&this.delay>0?super.requestAsyncId($,Q,ve):($.flush(this),0)}});var ed=B(4986),gi=B(8505),El=B(5363),Ro=B(9468);const Oa=new y.GfV("7.5.0"),Ns="__angularfire_symbol__analyticsIsSupportedValue",Ho="__angularfire_symbol__analyticsIsSupported",Eu="__angularfire_symbol__remoteConfigIsSupportedValue",Il="__angularfire_symbol__remoteConfigIsSupported",sa="__angularfire_symbol__messagingIsSupportedValue",jl="__angularfire_symbol__messagingIsSupported";function C(N,$,Q){if($){if(1===$.length)return $[0];const dt=$.filter(Ut=>Ut.app===Q);if(1===dt.length)return dt[0]}return Q.container.getProvider(N).getImmediate({optional:!0})}globalThis[Ho]||(globalThis[Ho]=Js().then(N=>globalThis[Ns]=N).catch(()=>globalThis[Ns]=!1)),globalThis[jl]||(globalThis[jl]=na().then(N=>globalThis[sa]=N).catch(()=>globalThis[sa]=!1)),globalThis[Il]||(globalThis[Il]=si().then(N=>globalThis[Eu]=N).catch(()=>globalThis[Eu]=!1));const T=(N,$)=>{const Q=$?[$]:(0,f.C6)(),ve=[];return Q.forEach(tt=>{tt.container.getProvider(N).instances.forEach(Ut=>{ve.includes(Ut)||ve.push(Ut)})}),ve};function _(){}class M{constructor($,Q=Ja){this.zone=$,this.delegate=Q}now(){return this.delegate.now()}schedule($,Q,ve){const tt=this.zone;return this.delegate.schedule(function(Ut){tt.runGuarded(()=>{$.apply(this,[Ut])})},Q,ve)}}class L{constructor($){this.zone=$,this.task=null}call($,Q){const ve=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_,{},_,_)),Q.pipe((0,gi.b)({next:ve,complete:ve,error:ve})).subscribe($).add(ve)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let K=(()=>{class N{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new M(Zone.current)),this.insideAngular=Q.run(()=>new M(Zone.current,ed.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return N.\u0275fac=function(Q){return new(Q||N)(y.LFG(y.R0b))},N.\u0275prov=y.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})();function ne(){const N=globalThis.\u0275AngularFireScheduler;if(!N)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return N}function Ht(N){return N.pipe((0,El.Q)(ne().outsideAngular))}function rn(N){return ne(),function xr(N){return function(Q){return(Q=Q.lift(new L(N.ngZone))).pipe((0,Ro.R)(N.outsideAngular),(0,El.Q)(N.insideAngular))}}(ne())(N)}},2090:(Wt,nt,B)=>{"use strict";B.d(nt,{$s:()=>cn,BH:()=>Je,DV:()=>Rn,Dv:()=>An,G6:()=>Re,GJ:()=>Y,L:()=>we,LL:()=>Ft,Pz:()=>Xe,Sg:()=>ht,UG:()=>xe,UI:()=>Wn,US:()=>Ce,Wj:()=>Di,Wl:()=>It,Yr:()=>ot,ZB:()=>ue,ZR:()=>Zt,aH:()=>Ye,b$:()=>ze,cI:()=>de,dS:()=>jr,eu:()=>Be,g5:()=>W,gK:()=>Tr,gQ:()=>mr,h$:()=>Me,hl:()=>Se,hu:()=>f,jU:()=>Ie,lb:()=>er,m9:()=>dr,ne:()=>pn,p$:()=>ae,pd:()=>qr,r3:()=>on,ru:()=>He,tV:()=>fe,uI:()=>re,ug:()=>kn,vZ:()=>Qn,w1:()=>Ze,w9:()=>tn,xO:()=>ar,xb:()=>nr,z$:()=>Te,zI:()=>Qe,zd:()=>Ir});const y={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},f=function(Ae,Ee){if(!Ae)throw W(Ee)},W=function(Ae){return new Error("Firebase Database ("+y.SDK_VERSION+") INTERNAL ASSERT FAILED: "+Ae)},oe=function(Ae){const Ee=[];let $e=0;for(let Ct=0;Ct<Ae.length;Ct++){let at=Ae.charCodeAt(Ct);at<128?Ee[$e++]=at:at<2048?(Ee[$e++]=at>>6|192,Ee[$e++]=63&at|128):55296==(64512&at)&&Ct+1<Ae.length&&56320==(64512&Ae.charCodeAt(Ct+1))?(at=65536+((1023&at)<<10)+(1023&Ae.charCodeAt(++Ct)),Ee[$e++]=at>>18|240,Ee[$e++]=at>>12&63|128,Ee[$e++]=at>>6&63|128,Ee[$e++]=63&at|128):(Ee[$e++]=at>>12|224,Ee[$e++]=at>>6&63|128,Ee[$e++]=63&at|128)}return Ee},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ae,Ee){if(!Array.isArray(Ae))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $e=Ee?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ct=[];for(let at=0;at<Ae.length;at+=3){const Xt=Ae[at],ke=at+1<Ae.length,Ne=ke?Ae[at+1]:0,ge=at+2<Ae.length,st=ge?Ae[at+2]:0;let gn=(15&Ne)<<2|st>>6,ur=63&st;ge||(ur=64,ke||(gn=64)),Ct.push($e[Xt>>2],$e[(3&Xt)<<4|Ne>>4],$e[gn],$e[ur])}return Ct.join("")},encodeString(Ae,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?btoa(Ae):this.encodeByteArray(oe(Ae),Ee)},decodeString(Ae,Ee){return this.HAS_NATIVE_SUPPORT&&!Ee?atob(Ae):function(Ae){const Ee=[];let $e=0,Ct=0;for(;$e<Ae.length;){const at=Ae[$e++];if(at<128)Ee[Ct++]=String.fromCharCode(at);else if(at>191&&at<224){const Xt=Ae[$e++];Ee[Ct++]=String.fromCharCode((31&at)<<6|63&Xt)}else if(at>239&&at<365){const ge=((7&at)<<18|(63&Ae[$e++])<<12|(63&Ae[$e++])<<6|63&Ae[$e++])-65536;Ee[Ct++]=String.fromCharCode(55296+(ge>>10)),Ee[Ct++]=String.fromCharCode(56320+(1023&ge))}else{const Xt=Ae[$e++],ke=Ae[$e++];Ee[Ct++]=String.fromCharCode((15&at)<<12|(63&Xt)<<6|63&ke)}}return Ee.join("")}(this.decodeStringToByteArray(Ae,Ee))},decodeStringToByteArray(Ae,Ee){this.init_();const $e=Ee?this.charToByteMapWebSafe_:this.charToByteMap_,Ct=[];for(let at=0;at<Ae.length;){const Xt=$e[Ae.charAt(at++)],Ne=at<Ae.length?$e[Ae.charAt(at)]:0;++at;const st=at<Ae.length?$e[Ae.charAt(at)]:64;++at;const Mt=at<Ae.length?$e[Ae.charAt(at)]:64;if(++at,null==Xt||null==Ne||null==st||null==Mt)throw new he;Ct.push(Xt<<2|Ne>>4),64!==st&&(Ct.push(Ne<<4&240|st>>2),64!==Mt&&Ct.push(st<<6&192|Mt))}return Ct},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ae=0;Ae<this.ENCODED_VALS.length;Ae++)this.byteToCharMap_[Ae]=this.ENCODED_VALS.charAt(Ae),this.charToByteMap_[this.byteToCharMap_[Ae]]=Ae,this.byteToCharMapWebSafe_[Ae]=this.ENCODED_VALS_WEBSAFE.charAt(Ae),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ae]]=Ae,Ae>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ae)]=Ae,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ae)]=Ae)}}};class he extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Me=function(Ae){const Ee=oe(Ae);return Ce.encodeByteArray(Ee,!0)},we=function(Ae){return Me(Ae).replace(/\./g,"")},fe=function(Ae){try{return Ce.decodeString(Ae,!0)}catch(Ee){console.error("base64Decode failed: ",Ee)}return null};function ae(Ae){return ue(void 0,Ae)}function ue(Ae,Ee){if(!(Ee instanceof Object))return Ee;switch(Ee.constructor){case Date:return new Date(Ee.getTime());case Object:void 0===Ae&&(Ae={});break;case Array:Ae=[];break;default:return Ee}for(const $e in Ee)!Ee.hasOwnProperty($e)||!De($e)||(Ae[$e]=ue(Ae[$e],Ee[$e]));return Ae}function De(Ae){return"__proto__"!==Ae}const ye=()=>{try{return function Pe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Ae=process.env.__FIREBASE_DEFAULTS__;return Ae?JSON.parse(Ae):void 0})()||(()=>{if(typeof document>"u")return;let Ae;try{Ae=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Ee=Ae&&fe(Ae[1]);return Ee&&JSON.parse(Ee)})()}catch(Ae){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Ae}`)}},Ye=()=>{var Ae;return null===(Ae=ye())||void 0===Ae?void 0:Ae.config},Xe=Ae=>{var Ee;return null===(Ee=ye())||void 0===Ee?void 0:Ee[`_${Ae}`]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ee,$e)=>{this.resolve=Ee,this.reject=$e})}wrapCallback(Ee){return($e,Ct)=>{$e?this.reject($e):this.resolve(Ct),"function"==typeof Ee&&(this.promise.catch(()=>{}),1===Ee.length?Ee($e):Ee($e,Ct))}}}function ht(Ae,Ee){if(Ae.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ct=Ee||"demo-project",at=Ae.iat||0,Xt=Ae.sub||Ae.user_id;if(!Xt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ke=Object.assign({iss:`https://securetoken.google.com/${Ct}`,aud:Ct,iat:at,exp:at+3600,auth_time:at,sub:Xt,user_id:Xt,firebase:{sign_in_provider:"custom",identities:{}}},Ae);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(ke)),""].join(".")}function Te(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Te())}function xe(){var Ae;const Ee=null===(Ae=ye())||void 0===Ae?void 0:Ae.forceEnvironment;if("node"===Ee)return!0;if("browser"===Ee)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ie(){return"object"==typeof self&&self.self===self}function He(){const Ae="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ae&&void 0!==Ae.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const Ae=Te();return Ae.indexOf("MSIE ")>=0||Ae.indexOf("Trident/")>=0}function ot(){return!0===y.NODE_CLIENT||!0===y.NODE_ADMIN}function Re(){return!xe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((Ae,Ee)=>{try{let $e=!0;const Ct="validate-browser-context-for-indexeddb-analytics-module",at=self.indexedDB.open(Ct);at.onsuccess=()=>{at.result.close(),$e||self.indexedDB.deleteDatabase(Ct),Ae(!0)},at.onupgradeneeded=()=>{$e=!1},at.onerror=()=>{var Xt;Ee((null===(Xt=at.error)||void 0===Xt?void 0:Xt.message)||"")}}catch($e){Ee($e)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Zt extends Error{constructor(Ee,$e,Ct){super($e),this.code=Ee,this.customData=Ct,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ft.prototype.create)}}class Ft{constructor(Ee,$e,Ct){this.service=Ee,this.serviceName=$e,this.errors=Ct}create(Ee,...$e){const Ct=$e[0]||{},at=`${this.service}/${Ee}`,Xt=this.errors[Ee],ke=Xt?function _n(Ae,Ee){return Ae.replace(it,($e,Ct)=>{const at=Ee[Ct];return null!=at?String(at):`<${Ct}?>`})}(Xt,Ct):"Error";return new Zt(at,`${this.serviceName}: ${ke} (${at}).`,Ct)}}const it=/\{\$([^}]+)}/g;function de(Ae){return JSON.parse(Ae)}function It(Ae){return JSON.stringify(Ae)}const Bt=function(Ae){let Ee={},$e={},Ct={},at="";try{const Xt=Ae.split(".");Ee=de(fe(Xt[0])||""),$e=de(fe(Xt[1])||""),at=Xt[2],Ct=$e.d||{},delete $e.d}catch{}return{header:Ee,claims:$e,data:Ct,signature:at}},tn=function(Ae){const $e=Bt(Ae).claims;return!!$e&&"object"==typeof $e&&$e.hasOwnProperty("iat")},Y=function(Ae){const Ee=Bt(Ae).claims;return"object"==typeof Ee&&!0===Ee.admin};function on(Ae,Ee){return Object.prototype.hasOwnProperty.call(Ae,Ee)}function Rn(Ae,Ee){if(Object.prototype.hasOwnProperty.call(Ae,Ee))return Ae[Ee]}function nr(Ae){for(const Ee in Ae)if(Object.prototype.hasOwnProperty.call(Ae,Ee))return!1;return!0}function Wn(Ae,Ee,$e){const Ct={};for(const at in Ae)Object.prototype.hasOwnProperty.call(Ae,at)&&(Ct[at]=Ee.call($e,Ae[at],at,Ae));return Ct}function Qn(Ae,Ee){if(Ae===Ee)return!0;const $e=Object.keys(Ae),Ct=Object.keys(Ee);for(const at of $e){if(!Ct.includes(at))return!1;const Xt=Ae[at],ke=Ee[at];if(Vt(Xt)&&Vt(ke)){if(!Qn(Xt,ke))return!1}else if(Xt!==ke)return!1}for(const at of Ct)if(!$e.includes(at))return!1;return!0}function Vt(Ae){return null!==Ae&&"object"==typeof Ae}function ar(Ae){const Ee=[];for(const[$e,Ct]of Object.entries(Ae))Array.isArray(Ct)?Ct.forEach(at=>{Ee.push(encodeURIComponent($e)+"="+encodeURIComponent(at))}):Ee.push(encodeURIComponent($e)+"="+encodeURIComponent(Ct));return Ee.length?"&"+Ee.join("&"):""}function Ir(Ae){const Ee={};return Ae.replace(/^\?/,"").split("&").forEach(Ct=>{if(Ct){const[at,Xt]=Ct.split("=");Ee[decodeURIComponent(at)]=decodeURIComponent(Xt)}}),Ee}function qr(Ae){const Ee=Ae.indexOf("?");if(!Ee)return"";const $e=Ae.indexOf("#",Ee);return Ae.substring(Ee,$e>0?$e:void 0)}class mr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ee=1;Ee<this.blockSize;++Ee)this.pad_[Ee]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ee,$e){$e||($e=0);const Ct=this.W_;if("string"==typeof Ee)for(let Mt=0;Mt<16;Mt++)Ct[Mt]=Ee.charCodeAt($e)<<24|Ee.charCodeAt($e+1)<<16|Ee.charCodeAt($e+2)<<8|Ee.charCodeAt($e+3),$e+=4;else for(let Mt=0;Mt<16;Mt++)Ct[Mt]=Ee[$e]<<24|Ee[$e+1]<<16|Ee[$e+2]<<8|Ee[$e+3],$e+=4;for(let Mt=16;Mt<80;Mt++){const gn=Ct[Mt-3]^Ct[Mt-8]^Ct[Mt-14]^Ct[Mt-16];Ct[Mt]=4294967295&(gn<<1|gn>>>31)}let st,Dt,at=this.chain_[0],Xt=this.chain_[1],ke=this.chain_[2],Ne=this.chain_[3],ge=this.chain_[4];for(let Mt=0;Mt<80;Mt++){Mt<40?Mt<20?(st=Ne^Xt&(ke^Ne),Dt=1518500249):(st=Xt^ke^Ne,Dt=1859775393):Mt<60?(st=Xt&ke|Ne&(Xt|ke),Dt=2400959708):(st=Xt^ke^Ne,Dt=3395469782);const gn=(at<<5|at>>>27)+st+ge+Dt+Ct[Mt]&4294967295;ge=Ne,Ne=ke,ke=4294967295&(Xt<<30|Xt>>>2),Xt=at,at=gn}this.chain_[0]=this.chain_[0]+at&4294967295,this.chain_[1]=this.chain_[1]+Xt&4294967295,this.chain_[2]=this.chain_[2]+ke&4294967295,this.chain_[3]=this.chain_[3]+Ne&4294967295,this.chain_[4]=this.chain_[4]+ge&4294967295}update(Ee,$e){if(null==Ee)return;void 0===$e&&($e=Ee.length);const Ct=$e-this.blockSize;let at=0;const Xt=this.buf_;let ke=this.inbuf_;for(;at<$e;){if(0===ke)for(;at<=Ct;)this.compress_(Ee,at),at+=this.blockSize;if("string"==typeof Ee){for(;at<$e;)if(Xt[ke]=Ee.charCodeAt(at),++ke,++at,ke===this.blockSize){this.compress_(Xt),ke=0;break}}else for(;at<$e;)if(Xt[ke]=Ee[at],++ke,++at,ke===this.blockSize){this.compress_(Xt),ke=0;break}}this.inbuf_=ke,this.total_+=$e}digest(){const Ee=[];let $e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let at=this.blockSize-1;at>=56;at--)this.buf_[at]=255&$e,$e/=256;this.compress_(this.buf_);let Ct=0;for(let at=0;at<5;at++)for(let Xt=24;Xt>=0;Xt-=8)Ee[Ct]=this.chain_[at]>>Xt&255,++Ct;return Ee}}function pn(Ae,Ee){const $e=new Lt(Ae,Ee);return $e.subscribe.bind($e)}class Lt{constructor(Ee,$e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$e,this.task.then(()=>{Ee(this)}).catch(Ct=>{this.error(Ct)})}next(Ee){this.forEachObserver($e=>{$e.next(Ee)})}error(Ee){this.forEachObserver($e=>{$e.error(Ee)}),this.close(Ee)}complete(){this.forEachObserver(Ee=>{Ee.complete()}),this.close()}subscribe(Ee,$e,Ct){let at;if(void 0===Ee&&void 0===$e&&void 0===Ct)throw new Error("Missing Observer.");at=function Nt(Ae,Ee){if("object"!=typeof Ae||null===Ae)return!1;for(const $e of Ee)if($e in Ae&&"function"==typeof Ae[$e])return!0;return!1}(Ee,["next","error","complete"])?Ee:{next:Ee,error:$e,complete:Ct},void 0===at.next&&(at.next=lr),void 0===at.error&&(at.error=lr),void 0===at.complete&&(at.complete=lr);const Xt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?at.error(this.finalError):at.complete()}catch{}}),this.observers.push(at),Xt}unsubscribeOne(Ee){void 0===this.observers||void 0===this.observers[Ee]||(delete this.observers[Ee],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ee){if(!this.finalized)for(let $e=0;$e<this.observers.length;$e++)this.sendOne($e,Ee)}sendOne(Ee,$e){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ee])try{$e(this.observers[Ee])}catch(Ct){typeof console<"u"&&console.error&&console.error(Ct)}})}close(Ee){this.finalized||(this.finalized=!0,void 0!==Ee&&(this.finalError=Ee),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lr(){}const An=function(Ae,Ee,$e,Ct){let at;if(Ct<Ee?at="at least "+Ee:Ct>$e&&(at=0===$e?"none":"no more than "+$e),at)throw new Error(Ae+" failed: Was called with "+Ct+(1===Ct?" argument.":" arguments.")+" Expects "+at+".")};function Tr(Ae,Ee){return`${Ae} failed: ${Ee} argument `}function Di(Ae,Ee,$e,Ct){if((!Ct||$e)&&"function"!=typeof $e)throw new Error(Tr(Ae,Ee)+"must be a valid function.")}function er(Ae,Ee,$e,Ct){if((!Ct||$e)&&("object"!=typeof $e||null===$e))throw new Error(Tr(Ae,Ee)+"must be a valid context object.")}const jr=function(Ae){const Ee=[];let $e=0;for(let Ct=0;Ct<Ae.length;Ct++){let at=Ae.charCodeAt(Ct);if(at>=55296&&at<=56319){const Xt=at-55296;Ct++,f(Ct<Ae.length,"Surrogate pair missing trail surrogate."),at=65536+(Xt<<10)+(Ae.charCodeAt(Ct)-56320)}at<128?Ee[$e++]=at:at<2048?(Ee[$e++]=at>>6|192,Ee[$e++]=63&at|128):at<65536?(Ee[$e++]=at>>12|224,Ee[$e++]=at>>6&63|128,Ee[$e++]=63&at|128):(Ee[$e++]=at>>18|240,Ee[$e++]=at>>12&63|128,Ee[$e++]=at>>6&63|128,Ee[$e++]=63&at|128)}return Ee},kn=function(Ae){let Ee=0;for(let $e=0;$e<Ae.length;$e++){const Ct=Ae.charCodeAt($e);Ct<128?Ee++:Ct<2048?Ee+=2:Ct>=55296&&Ct<=56319?(Ee+=4,$e++):Ee+=3}return Ee},ti=1e3,zt=2,St=144e5,nn=.5;function cn(Ae,Ee=ti,$e=zt){const Ct=Ee*Math.pow($e,Ae),at=Math.round(nn*Ct*(Math.random()-.5)*2);return Math.min(St,Ct+at)}function dr(Ae){return Ae&&Ae._delegate?Ae._delegate:Ae}},2200:(Wt,nt,B)=>{"use strict";B.d(nt,{c:()=>pt});var y=B(9397),f=B(3457);let W;const be=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ce=_e=>(void 0===W&&(W=void 0===_e.style.animationName&&void 0!==_e.style.webkitAnimationName?"-webkit-":""),W),he=(_e,ye,Oe)=>{const rt=ye.startsWith("animation")?Ce(_e):"";_e.style.setProperty(rt+ye,Oe)},Me=(_e,ye)=>{const Oe=ye.startsWith("animation")?Ce(_e):"";_e.style.removeProperty(Oe+ye)},ae=[],Ke=(_e=[],ye)=>{if(void 0!==ye){const Oe=Array.isArray(ye)?ye:[ye];return[..._e,...Oe]}return _e},pt=_e=>{let ye,Oe,rt,Ye,Xe,Je,Ie,Se,Be,Qe,gt,it,de,ht=[],Te=[],re=[],xe=!1,He={},ze=[],ut=[],Ze={},lt=0,ot=!1,Re=!1,Zt=!0,Ft=!1,_n=!0,It=!1;const Bt=_e,Ge=[],Jt=[],tn=[],Y=[],on=[],Rn=[],nr=[],Wn=[],Qn=[],Vt=[],_r="function"==typeof AnimationEffect||void 0!==f.w&&"function"==typeof f.w.AnimationEffect,ar="function"==typeof Element&&"function"==typeof Element.prototype.animate&&_r,qr=()=>Vt,Nt=(ee,Le)=>((null!=Le&&Le.oneTimeCallback?Jt:Ge).push({c:ee,o:Le}),de),An=()=>{if(ar)Vt.forEach(ee=>{ee.cancel()}),Vt.length=0;else{const ee=tn.slice();(0,y.r)(()=>{ee.forEach(Le=>{Me(Le,"animation-name"),Me(Le,"animation-duration"),Me(Le,"animation-timing-function"),Me(Le,"animation-iteration-count"),Me(Le,"animation-delay"),Me(Le,"animation-play-state"),Me(Le,"animation-fill-mode"),Me(Le,"animation-direction")})})}},Tr=()=>{on.forEach(ee=>{null!=ee&&ee.parentNode&&ee.parentNode.removeChild(ee)}),on.length=0},vn=()=>void 0!==Xe?Xe:Ie?Ie.getFill():"both",dr=()=>void 0!==Be?Be:void 0!==Je?Je:Ie?Ie.getDirection():"normal",Ae=()=>ot?"linear":void 0!==rt?rt:Ie?Ie.getEasing():"linear",Ee=()=>Re?0:void 0!==Qe?Qe:void 0!==Oe?Oe:Ie?Ie.getDuration():0,$e=()=>void 0!==Ye?Ye:Ie?Ie.getIterations():1,Ct=()=>void 0!==gt?gt:void 0!==ye?ye:Ie?Ie.getDelay():0,Hr=()=>{0!==lt&&(lt--,0===lt&&((()=>{Kt(),Wn.forEach(bt=>bt()),Qn.forEach(bt=>bt());const ee=Zt?1:0,Le=ze,Fe=ut,yt=Ze;tn.forEach(bt=>{const vt=bt.classList;Le.forEach(xt=>vt.add(xt)),Fe.forEach(xt=>vt.remove(xt));for(const xt in yt)yt.hasOwnProperty(xt)&&he(bt,xt,yt[xt])}),Ge.forEach(bt=>bt.c(ee,de)),Jt.forEach(bt=>bt.c(ee,de)),Jt.length=0,_n=!0,Zt&&(Ft=!0),Zt=!0})(),Ie&&Ie.animationFinish()))},Si=(ee=!0)=>{Tr();const Le=(_e=>(_e.forEach(ye=>{for(const Oe in ye)if(ye.hasOwnProperty(Oe)){const rt=ye[Oe];if("easing"===Oe)ye["animation-timing-function"]=rt,delete ye[Oe];else{const Ye=be(Oe);Ye!==Oe&&(ye[Ye]=rt,delete ye[Oe])}}}),_e))(ht);tn.forEach(Fe=>{if(Le.length>0){const yt=((_e=[])=>_e.map(ye=>{const Oe=ye.offset,rt=[];for(const Ye in ye)ye.hasOwnProperty(Ye)&&"offset"!==Ye&&rt.push(`${Ye}: ${ye[Ye]};`);return`${100*Oe}% { ${rt.join(" ")} }`}).join(" "))(Le);it=void 0!==_e?_e:(_e=>{let ye=ae.indexOf(_e);return ye<0&&(ye=ae.push(_e)-1),`ion-animation-${ye}`})(yt);const bt=((_e,ye,Oe)=>{var rt;const Ye=(_e=>{const ye=void 0!==_e.getRootNode?_e.getRootNode():_e;return ye.head||ye})(Oe),Xe=Ce(Oe),Je=Ye.querySelector("#"+_e);if(Je)return Je;const ht=(null!==(rt=Oe.ownerDocument)&&void 0!==rt?rt:document).createElement("style");return ht.id=_e,ht.textContent=`@${Xe}keyframes ${_e} { ${ye} } @${Xe}keyframes ${_e}-alt { ${ye} }`,Ye.appendChild(ht),ht})(it,yt,Fe);on.push(bt),he(Fe,"animation-duration",`${Ee()}ms`),he(Fe,"animation-timing-function",Ae()),he(Fe,"animation-delay",`${Ct()}ms`),he(Fe,"animation-fill-mode",vn()),he(Fe,"animation-direction",dr());const vt=$e()===1/0?"infinite":$e().toString();he(Fe,"animation-iteration-count",vt),he(Fe,"animation-play-state","paused"),ee&&he(Fe,"animation-name",`${bt.id}-alt`),(0,y.r)(()=>{he(Fe,"animation-name",bt.id||null)})}})},$i=(ee=!0)=>{(()=>{Rn.forEach(yt=>yt()),nr.forEach(yt=>yt());const ee=Te,Le=re,Fe=He;tn.forEach(yt=>{const bt=yt.classList;ee.forEach(vt=>bt.add(vt)),Le.forEach(vt=>bt.remove(vt));for(const vt in Fe)Fe.hasOwnProperty(vt)&&he(yt,vt,Fe[vt])})})(),ht.length>0&&(ar?(tn.forEach(ee=>{const Le=ee.animate(ht,{id:Bt,delay:Ct(),duration:Ee(),easing:Ae(),iterations:$e(),fill:vn(),direction:dr()});Le.pause(),Vt.push(Le)}),Vt.length>0&&(Vt[0].onfinish=()=>{Hr()})):Si(ee)),xe=!0},di=ee=>{if(ee=Math.min(Math.max(ee,0),.9999),ar)Vt.forEach(Le=>{Le.currentTime=Le.effect.getComputedTiming().delay+Ee()*ee,Le.pause()});else{const Le=`-${Ee()*ee}ms`;tn.forEach(Fe=>{ht.length>0&&(he(Fe,"animation-delay",Le),he(Fe,"animation-play-state","paused"))})}},zn=ee=>{Vt.forEach(Le=>{Le.effect.updateTiming({delay:Ct(),duration:Ee(),easing:Ae(),iterations:$e(),fill:vn(),direction:dr()})}),void 0!==ee&&di(ee)},hr=(ee=!0,Le)=>{(0,y.r)(()=>{tn.forEach(Fe=>{he(Fe,"animation-name",it||null),he(Fe,"animation-duration",`${Ee()}ms`),he(Fe,"animation-timing-function",Ae()),he(Fe,"animation-delay",void 0!==Le?`-${Le*Ee()}ms`:`${Ct()}ms`),he(Fe,"animation-fill-mode",vn()||null),he(Fe,"animation-direction",dr()||null);const yt=$e()===1/0?"infinite":$e().toString();he(Fe,"animation-iteration-count",yt),ee&&he(Fe,"animation-name",`${it}-alt`),(0,y.r)(()=>{he(Fe,"animation-name",it||null)})})})},Pn=(ee=!1,Le=!0,Fe)=>(ee&&Y.forEach(yt=>{yt.update(ee,Le,Fe)}),ar?zn(Fe):hr(Le,Fe),de),qi=()=>{xe&&(ar?Vt.forEach(ee=>{ee.pause()}):tn.forEach(ee=>{he(ee,"animation-play-state","paused")}),It=!0)},ni=()=>{Se=void 0,Hr()},Kt=()=>{Se&&clearTimeout(Se)},br=ee=>new Promise(Le=>{null!=ee&&ee.sync&&(Re=!0,Nt(()=>Re=!1,{oneTimeCallback:!0})),xe||$i(),Ft&&(ar?(di(0),zn()):hr(),Ft=!1),_n&&(lt=Y.length+1,_n=!1),Nt(()=>Le(),{oneTimeCallback:!0}),Y.forEach(Fe=>{Fe.play()}),ar?(Vt.forEach(ee=>{ee.play()}),(0===ht.length||0===tn.length)&&Hr()):(()=>{if(Kt(),(0,y.r)(()=>{tn.forEach(ee=>{ht.length>0&&he(ee,"animation-play-state","running")})}),0===ht.length||0===tn.length)Hr();else{const ee=Ct()||0,Le=Ee()||0,Fe=$e()||1;isFinite(Fe)&&(Se=setTimeout(ni,ee+Le*Fe+100)),((_e,ye)=>{let Oe;const rt={passive:!0},Xe=Je=>{_e===Je.target&&(Oe&&Oe(),Kt(),(0,y.r)(()=>{tn.forEach(ee=>{Me(ee,"animation-duration"),Me(ee,"animation-delay"),Me(ee,"animation-play-state")}),(0,y.r)(Hr)}))};_e&&(_e.addEventListener("webkitAnimationEnd",Xe,rt),_e.addEventListener("animationend",Xe,rt),Oe=()=>{_e.removeEventListener("webkitAnimationEnd",Xe,rt),_e.removeEventListener("animationend",Xe,rt)})})(tn[0])}})(),It=!1}),X=(ee,Le)=>{const Fe=ht[0];return void 0===Fe||void 0!==Fe.offset&&0!==Fe.offset?ht=[{offset:0,[ee]:Le},...ht]:Fe[ee]=Le,de};return de={parentAnimation:Ie,elements:tn,childAnimations:Y,id:Bt,animationFinish:Hr,from:X,to:(ee,Le)=>{const Fe=ht[ht.length-1];return void 0===Fe||void 0!==Fe.offset&&1!==Fe.offset?ht=[...ht,{offset:1,[ee]:Le}]:Fe[ee]=Le,de},fromTo:(ee,Le,Fe)=>X(ee,Le).to(ee,Fe),parent:ee=>(Ie=ee,de),play:br,pause:()=>(Y.forEach(ee=>{ee.pause()}),qi(),de),stop:()=>{Y.forEach(ee=>{ee.stop()}),xe&&(An(),xe=!1),ot=!1,Re=!1,_n=!0,Be=void 0,Qe=void 0,gt=void 0,lt=0,Ft=!1,Zt=!0,It=!1},destroy:ee=>(Y.forEach(Le=>{Le.destroy(ee)}),(ee=>{An(),ee&&Tr()})(ee),tn.length=0,Y.length=0,ht.length=0,Ge.length=0,Jt.length=0,xe=!1,_n=!0,de),keyframes:ee=>{const Le=ht!==ee;return ht=ee,Le&&(ee=>{ar?qr().forEach(Le=>{if(Le.effect.setKeyframes)Le.effect.setKeyframes(ee);else{const Fe=new KeyframeEffect(Le.effect.target,ee,Le.effect.getTiming());Le.effect=Fe}}):Si()})(ht),de},addAnimation:ee=>{if(null!=ee)if(Array.isArray(ee))for(const Le of ee)Le.parent(de),Y.push(Le);else ee.parent(de),Y.push(ee);return de},addElement:ee=>{if(null!=ee)if(1===ee.nodeType)tn.push(ee);else if(ee.length>=0)for(let Le=0;Le<ee.length;Le++)tn.push(ee[Le]);else console.error("Invalid addElement value");return de},update:Pn,fill:ee=>(Xe=ee,Pn(!0),de),direction:ee=>(Je=ee,Pn(!0),de),iterations:ee=>(Ye=ee,Pn(!0),de),duration:ee=>(!ar&&0===ee&&(ee=1),Oe=ee,Pn(!0),de),easing:ee=>(rt=ee,Pn(!0),de),delay:ee=>(ye=ee,Pn(!0),de),getWebAnimations:qr,getKeyframes:()=>ht,getFill:vn,getDirection:dr,getDelay:Ct,getIterations:$e,getEasing:Ae,getDuration:Ee,afterAddRead:ee=>(Wn.push(ee),de),afterAddWrite:ee=>(Qn.push(ee),de),afterClearStyles:(ee=[])=>{for(const Le of ee)Ze[Le]="";return de},afterStyles:(ee={})=>(Ze=ee,de),afterRemoveClass:ee=>(ut=Ke(ut,ee),de),afterAddClass:ee=>(ze=Ke(ze,ee),de),beforeAddRead:ee=>(Rn.push(ee),de),beforeAddWrite:ee=>(nr.push(ee),de),beforeClearStyles:(ee=[])=>{for(const Le of ee)He[Le]="";return de},beforeStyles:(ee={})=>(He=ee,de),beforeRemoveClass:ee=>(re=Ke(re,ee),de),beforeAddClass:ee=>(Te=Ke(Te,ee),de),onFinish:Nt,isRunning:()=>0!==lt&&!It,progressStart:(ee=!1,Le)=>(Y.forEach(Fe=>{Fe.progressStart(ee,Le)}),qi(),ot=ee,xe||$i(),Pn(!1,!0,Le),de),progressStep:ee=>(Y.forEach(Le=>{Le.progressStep(ee)}),di(ee),de),progressEnd:(ee,Le,Fe)=>(ot=!1,Y.forEach(yt=>{yt.progressEnd(ee,Le,Fe)}),void 0!==Fe&&(Qe=Fe),Ft=!1,Zt=!0,0===ee?(Be="reverse"===dr()?"normal":"reverse","reverse"===Be&&(Zt=!1),ar?(Pn(),di(1-Le)):(gt=(1-Le)*Ee()*-1,Pn(!1,!1))):1===ee&&(ar?(Pn(),di(Le)):(gt=Le*Ee()*-1,Pn(!1,!1))),void 0!==ee&&(Nt(()=>{Qe=void 0,Be=void 0,gt=void 0},{oneTimeCallback:!0}),Ie||br()),de)}}},3982:(Wt,nt,B)=>{"use strict";B.d(nt,{E:()=>fe,a:()=>y,s:()=>Me});const y=ae=>{try{if(ae instanceof he)return ae.value;if(!oe()||"string"!=typeof ae||""===ae)return ae;if(ae.includes("onload="))return"";const ue=document.createDocumentFragment(),De=document.createElement("div");ue.appendChild(De),De.innerHTML=ae,Ce.forEach(_e=>{const ye=ue.querySelectorAll(_e);for(let Oe=ye.length-1;Oe>=0;Oe--){const rt=ye[Oe];rt.parentNode?rt.parentNode.removeChild(rt):ue.removeChild(rt);const Ye=W(rt);for(let Xe=0;Xe<Ye.length;Xe++)f(Ye[Xe])}});const Pe=W(ue);for(let _e=0;_e<Pe.length;_e++)f(Pe[_e]);const Ke=document.createElement("div");Ke.appendChild(ue);const pt=Ke.querySelector("div");return null!==pt?pt.innerHTML:Ke.innerHTML}catch(ue){return console.error(ue),""}},f=ae=>{if(ae.nodeType&&1!==ae.nodeType)return;if(typeof NamedNodeMap<"u"&&!(ae.attributes instanceof NamedNodeMap))return void ae.remove();for(let De=ae.attributes.length-1;De>=0;De--){const Pe=ae.attributes.item(De),Ke=Pe.name;if(!be.includes(Ke.toLowerCase())){ae.removeAttribute(Ke);continue}const pt=Pe.value,_e=ae[Ke];(null!=pt&&pt.toLowerCase().includes("javascript:")||null!=_e&&_e.toLowerCase().includes("javascript:"))&&ae.removeAttribute(Ke)}const ue=W(ae);for(let De=0;De<ue.length;De++)f(ue[De])},W=ae=>null!=ae.children?ae.children:ae.childNodes,oe=()=>{var ae;const ue=window,De=null===(ae=null==ue?void 0:ue.Ionic)||void 0===ae?void 0:ae.config;return!De||(De.get?De.get("sanitizerEnabled",!0):!0===De.sanitizerEnabled||void 0===De.sanitizerEnabled)},be=["class","id","href","src","name","slot"],Ce=["script","style","iframe","meta","link","object","embed"];class he{constructor(ue){this.value=ue}}const Me=ae=>{const ue=window,De=ue.Ionic;if(!De||!De.config||"Object"===De.config.constructor.name)return ue.Ionic=ue.Ionic||{},ue.Ionic.config=Object.assign(Object.assign({},ue.Ionic.config),ae),ue.Ionic.config},fe=!1},5375:(Wt,nt,B)=>{"use strict";B.d(nt,{C:()=>be,a:()=>W,d:()=>oe});var y=B(5861),f=B(9397);const W=function(){var Ce=(0,y.Z)(function*(he,Me,we,fe,ae,ue){var De;if(he)return he.attachViewToDom(Me,we,ae,fe);if(!(ue||"string"==typeof we||we instanceof HTMLElement))throw new Error("framework delegate is missing");const Pe="string"==typeof we?null===(De=Me.ownerDocument)||void 0===De?void 0:De.createElement(we):we;return fe&&fe.forEach(Ke=>Pe.classList.add(Ke)),ae&&Object.assign(Pe,ae),Me.appendChild(Pe),yield new Promise(Ke=>(0,f.c)(Pe,Ke)),Pe});return function(Me,we,fe,ae,ue,De){return Ce.apply(this,arguments)}}(),oe=(Ce,he)=>{if(he){if(Ce)return Ce.removeViewFromDom(he.parentElement,he);he.remove()}return Promise.resolve()},be=()=>{let Ce,he;return{attachViewToDom:function(){var fe=(0,y.Z)(function*(ae,ue,De={},Pe=[]){var Ke,pt;if(Ce=ae,ue){const ye="string"==typeof ue?null===(Ke=Ce.ownerDocument)||void 0===Ke?void 0:Ke.createElement(ue):ue;Pe.forEach(Oe=>ye.classList.add(Oe)),Object.assign(ye,De),Ce.appendChild(ye),yield new Promise(Oe=>(0,f.c)(ye,Oe))}else if(Ce.children.length>0&&("ION-MODAL"===Ce.tagName||"ION-POPOVER"===Ce.tagName)&&!Ce.children[0].classList.contains("ion-delegate-host")){const Oe=null===(pt=Ce.ownerDocument)||void 0===pt?void 0:pt.createElement("div");Oe.classList.add("ion-delegate-host"),Pe.forEach(rt=>Oe.classList.add(rt)),Oe.append(...Ce.children),Ce.appendChild(Oe)}const _e=document.querySelector("ion-app")||document.body;return he=document.createComment("ionic teleport"),Ce.parentNode.insertBefore(he,Ce),_e.appendChild(Ce),Ce});return function(ue,De){return fe.apply(this,arguments)}}(),removeViewFromDom:()=>(Ce&&he&&(he.parentNode.insertBefore(Ce,he),he.remove()),Promise.resolve())}}},4349:(Wt,nt,B)=>{"use strict";B.d(nt,{G:()=>be});class f{constructor(he,Me,we,fe,ae){this.id=Me,this.name=we,this.disableScroll=ae,this.priority=1e6*fe+Me,this.ctrl=he}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const he=this.ctrl.capture(this.name,this.id,this.priority);return he&&this.disableScroll&&this.ctrl.disableScroll(this.id),he}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class W{constructor(he,Me,we,fe){this.id=Me,this.disable=we,this.disableScroll=fe,this.ctrl=he}block(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.disableGesture(he,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const he of this.disable)this.ctrl.enableGesture(he,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const oe="backdrop-no-scroll",be=new class y{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(he){var Me;return new f(this,this.newID(),he.name,null!==(Me=he.priority)&&void 0!==Me?Me:0,!!he.disableScroll)}createBlocker(he={}){return new W(this,this.newID(),he.disable,!!he.disableScroll)}start(he,Me,we){return this.canStart(he)?(this.requestedStart.set(Me,we),!0):(this.requestedStart.delete(Me),!1)}capture(he,Me,we){if(!this.start(he,Me,we))return!1;const fe=this.requestedStart;let ae=-1e4;if(fe.forEach(ue=>{ae=Math.max(ae,ue)}),ae===we){this.capturedId=Me,fe.clear();const ue=new CustomEvent("ionGestureCaptured",{detail:{gestureName:he}});return document.dispatchEvent(ue),!0}return fe.delete(Me),!1}release(he){this.requestedStart.delete(he),this.capturedId===he&&(this.capturedId=void 0)}disableGesture(he,Me){let we=this.disabledGestures.get(he);void 0===we&&(we=new Set,this.disabledGestures.set(he,we)),we.add(Me)}enableGesture(he,Me){const we=this.disabledGestures.get(he);void 0!==we&&we.delete(Me)}disableScroll(he){this.disabledScroll.add(he),1===this.disabledScroll.size&&document.body.classList.add(oe)}enableScroll(he){this.disabledScroll.delete(he),0===this.disabledScroll.size&&document.body.classList.remove(oe)}canStart(he){return!(void 0!==this.capturedId||this.isDisabled(he))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(he){const Me=this.disabledGestures.get(he);return!!(Me&&Me.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(Wt,nt,B)=>{"use strict";B.r(nt),B.d(nt,{MENU_BACK_BUTTON_PRIORITY:()=>be,OVERLAY_BACK_BUTTON_PRIORITY:()=>oe,blockHardwareBackButton:()=>f,startHardwareBackButton:()=>W});var y=B(5861);const f=()=>{document.addEventListener("backbutton",()=>{})},W=()=>{const Ce=document;let he=!1;Ce.addEventListener("backbutton",()=>{if(he)return;let Me=0,we=[];const fe=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(De,Pe){we.push({priority:De,handler:Pe,id:Me++})}}});Ce.dispatchEvent(fe);const ae=function(){var De=(0,y.Z)(function*(Pe){try{if(null!=Pe&&Pe.handler){const Ke=Pe.handler(ue);null!=Ke&&(yield Ke)}}catch(Ke){console.error(Ke)}});return function(Ke){return De.apply(this,arguments)}}(),ue=()=>{if(we.length>0){let De={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};we.forEach(Pe=>{Pe.priority>=De.priority&&(De=Pe)}),he=!0,we=we.filter(Pe=>Pe.id!==De.id),ae(De).then(()=>he=!1)}};ue()})},oe=100,be=99},9397:(Wt,nt,B)=>{"use strict";B.d(nt,{a:()=>Me,b:()=>we,c:()=>W,d:()=>pt,e:()=>Ke,f:()=>Pe,g:()=>fe,h:()=>Xe,i:()=>he,j:()=>be,k:()=>De,l:()=>_e,m:()=>oe,n:()=>ue,o:()=>ye,p:()=>rt,q:()=>Ye,r:()=>ae,s:()=>ht,t:()=>y,u:()=>Je,v:()=>Oe});const y=(Te,re=0)=>new Promise(xe=>{f(Te,re,xe)}),f=(Te,re=0,xe)=>{let Ie,He;const ze={passive:!0},Ze=()=>{Ie&&Ie()},lt=ot=>{(void 0===ot||Te===ot.target)&&(Ze(),xe(ot))};return Te&&(Te.addEventListener("webkitTransitionEnd",lt,ze),Te.addEventListener("transitionend",lt,ze),He=setTimeout(lt,re+500),Ie=()=>{He&&(clearTimeout(He),He=void 0),Te.removeEventListener("webkitTransitionEnd",lt,ze),Te.removeEventListener("transitionend",lt,ze)}),Ze},W=(Te,re)=>{Te.componentOnReady?Te.componentOnReady().then(xe=>re(xe)):ae(()=>re(Te))},oe=Te=>void 0!==Te.componentOnReady,be=(Te,re=[])=>{const xe={};return re.forEach(Ie=>{Te.hasAttribute(Ie)&&(null!==Te.getAttribute(Ie)&&(xe[Ie]=Te.getAttribute(Ie)),Te.removeAttribute(Ie))}),xe},Ce=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],he=(Te,re)=>{let xe=Ce;return re&&re.length>0&&(xe=xe.filter(Ie=>!re.includes(Ie))),be(Te,xe)},Me=(Te,re,xe,Ie)=>{var He;if(typeof window<"u"){const ze=window,ut=null===(He=null==ze?void 0:ze.Ionic)||void 0===He?void 0:He.config;if(ut){const Ze=ut.get("_ael");if(Ze)return Ze(Te,re,xe,Ie);if(ut._ael)return ut._ael(Te,re,xe,Ie)}}return Te.addEventListener(re,xe,Ie)},we=(Te,re,xe,Ie)=>{var He;if(typeof window<"u"){const ze=window,ut=null===(He=null==ze?void 0:ze.Ionic)||void 0===He?void 0:He.config;if(ut){const Ze=ut.get("_rel");if(Ze)return Ze(Te,re,xe,Ie);if(ut._rel)return ut._rel(Te,re,xe,Ie)}}return Te.removeEventListener(re,xe,Ie)},fe=(Te,re=Te)=>Te.shadowRoot||re,ae=Te=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Te):"function"==typeof requestAnimationFrame?requestAnimationFrame(Te):setTimeout(Te),ue=Te=>!!Te.shadowRoot&&!!Te.attachShadow,De=Te=>{const re=Te.closest("ion-item");return re?re.querySelector("ion-label"):null},Pe=Te=>{if(Te.focus(),Te.classList.contains("ion-focusable")){const re=Te.closest("ion-app");re&&re.setFocus([Te])}},Ke=(Te,re)=>{let xe;const Ie=Te.getAttribute("aria-labelledby"),He=Te.id;let ze=null!==Ie&&""!==Ie.trim()?Ie:re+"-lbl",ut=null!==Ie&&""!==Ie.trim()?document.getElementById(Ie):De(Te);return ut?(null===Ie&&(ut.id=ze),xe=ut.textContent,ut.setAttribute("aria-hidden","true")):""!==He.trim()&&(ut=document.querySelector(`label[for="${He}"]`),ut&&(""!==ut.id?ze=ut.id:ut.id=ze=`${He}-lbl`,xe=ut.textContent)),{label:ut,labelId:ze,labelText:xe}},pt=(Te,re,xe,Ie,He)=>{if(Te||ue(re)){let ze=re.querySelector("input.aux-input");ze||(ze=re.ownerDocument.createElement("input"),ze.type="hidden",ze.classList.add("aux-input"),re.appendChild(ze)),ze.disabled=He,ze.name=xe,ze.value=Ie||""}},_e=(Te,re,xe)=>Math.max(Te,Math.min(re,xe)),ye=(Te,re)=>{if(!Te){const xe="ASSERT: "+re;throw console.error(xe),new Error(xe)}},Oe=Te=>Te.timeStamp||Date.now(),rt=Te=>{if(Te){const re=Te.changedTouches;if(re&&re.length>0){const xe=re[0];return{x:xe.clientX,y:xe.clientY}}if(void 0!==Te.pageX)return{x:Te.pageX,y:Te.pageY}}return{x:0,y:0}},Ye=Te=>{const re="rtl"===document.dir;switch(Te){case"start":return re;case"end":return!re;default:throw new Error(`"${Te}" is not a valid value for [side]. Use "start" or "end" instead.`)}},Xe=(Te,re)=>{const xe=Te._original||Te;return{_original:Te,emit:Je(xe.emit.bind(xe),re)}},Je=(Te,re=0)=>{let xe;return(...Ie)=>{clearTimeout(xe),xe=setTimeout(Te,re,...Ie)}},ht=(Te,re)=>{if(null!=Te||(Te={}),null!=re||(re={}),Te===re)return!0;const xe=Object.keys(Te);if(xe.length!==Object.keys(re).length)return!1;for(const Ie of xe)if(!(Ie in re)||Te[Ie]!==re[Ie])return!1;return!0}},3457:(Wt,nt,B)=>{"use strict";B.d(nt,{w:()=>y});const y=typeof window<"u"?window:void 0},1557:(Wt,nt,B)=>{"use strict";B.d(nt,{m:()=>ae});var y=B(5861),f=B(7593),W=B(9397),oe=B(6406),be=B(2200);const Ce=ue=>(0,be.c)().duration(ue?400:300),he=ue=>{let De,Pe;const Ke=ue.width+8,pt=(0,be.c)(),_e=(0,be.c)();ue.isEndSide?(De=Ke+"px",Pe="0px"):(De=-Ke+"px",Pe="0px"),pt.addElement(ue.menuInnerEl).fromTo("transform",`translateX(${De})`,`translateX(${Pe})`);const Oe="ios"===(0,oe.b)(ue),rt=Oe?.2:.25;return _e.addElement(ue.backdropEl).fromTo("opacity",.01,rt),Ce(Oe).addAnimation([pt,_e])},Me=ue=>{let De,Pe;const Ke=(0,oe.b)(ue),pt=ue.width;ue.isEndSide?(De=-pt+"px",Pe=pt+"px"):(De=pt+"px",Pe=-pt+"px");const _e=(0,be.c)().addElement(ue.menuInnerEl).fromTo("transform",`translateX(${Pe})`,"translateX(0px)"),ye=(0,be.c)().addElement(ue.contentEl).fromTo("transform","translateX(0px)",`translateX(${De})`),Oe=(0,be.c)().addElement(ue.backdropEl).fromTo("opacity",.01,.32);return Ce("ios"===Ke).addAnimation([_e,ye,Oe])},we=ue=>{const De=(0,oe.b)(ue),Pe=ue.width*(ue.isEndSide?-1:1)+"px",Ke=(0,be.c)().addElement(ue.contentEl).fromTo("transform","translateX(0px)",`translateX(${Pe})`);return Ce("ios"===De).addAnimation(Ke)},ae=(()=>{const ue=new Map,De=[],Pe=function(){var Se=(0,y.Z)(function*(Be){const Qe=yield Ye(Be);return!!Qe&&Qe.open()});return function(Qe){return Se.apply(this,arguments)}}(),Ke=function(){var Se=(0,y.Z)(function*(Be){const Qe=yield void 0!==Be?Ye(Be):Xe();return void 0!==Qe&&Qe.close()});return function(Qe){return Se.apply(this,arguments)}}(),pt=function(){var Se=(0,y.Z)(function*(Be){const Qe=yield Ye(Be);return!!Qe&&Qe.toggle()});return function(Qe){return Se.apply(this,arguments)}}(),_e=function(){var Se=(0,y.Z)(function*(Be,Qe){const gt=yield Ye(Qe);return gt&&(gt.disabled=!Be),gt});return function(Qe,gt){return Se.apply(this,arguments)}}(),ye=function(){var Se=(0,y.Z)(function*(Be,Qe){const gt=yield Ye(Qe);return gt&&(gt.swipeGesture=Be),gt});return function(Qe,gt){return Se.apply(this,arguments)}}(),Oe=function(){var Se=(0,y.Z)(function*(Be){if(null!=Be){const Qe=yield Ye(Be);return void 0!==Qe&&Qe.isOpen()}return void 0!==(yield Xe())});return function(Qe){return Se.apply(this,arguments)}}(),rt=function(){var Se=(0,y.Z)(function*(Be){const Qe=yield Ye(Be);return!!Qe&&!Qe.disabled});return function(Qe){return Se.apply(this,arguments)}}(),Ye=function(){var Se=(0,y.Z)(function*(Be){return yield Re(),"start"===Be||"end"===Be?ot(Zt=>Zt.side===Be&&!Zt.disabled)||ot(Zt=>Zt.side===Be):null!=Be?ot(gt=>gt.menuId===Be):ot(gt=>!gt.disabled)||(De.length>0?De[0].el:void 0)});return function(Qe){return Se.apply(this,arguments)}}(),Xe=function(){var Se=(0,y.Z)(function*(){return yield Re(),ut()});return function(){return Se.apply(this,arguments)}}(),Je=function(){var Se=(0,y.Z)(function*(){return yield Re(),Ze()});return function(){return Se.apply(this,arguments)}}(),ht=function(){var Se=(0,y.Z)(function*(){return yield Re(),lt()});return function(){return Se.apply(this,arguments)}}(),Te=(Se,Be)=>{ue.set(Se,Be)},Ie=Se=>{const Be=Se.side;De.filter(Qe=>Qe.side===Be&&Qe!==Se).forEach(Qe=>Qe.disabled=!0)},He=function(){var Se=(0,y.Z)(function*(Be,Qe,gt){if(lt())return!1;if(Qe){const Zt=yield Xe();Zt&&Be.el!==Zt&&(yield Zt.setOpen(!1,!1))}return Be._setOpen(Qe,gt)});return function(Qe,gt,Zt){return Se.apply(this,arguments)}}(),ut=()=>ot(Se=>Se._isOpen),Ze=()=>De.map(Se=>Se.el),lt=()=>De.some(Se=>Se.isAnimating),ot=Se=>{const Be=De.find(Se);if(void 0!==Be)return Be.el},Re=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Se=>new Promise(Be=>(0,W.c)(Se,Be))));return Te("reveal",we),Te("push",Me),Te("overlay",he),typeof document<"u"&&document.addEventListener("ionBackButton",Se=>{const Be=ut();Be&&Se.detail.register(f.MENU_BACK_BUTTON_PRIORITY,()=>Be.close())}),{registerAnimation:Te,get:Ye,getMenus:Je,getOpen:Xe,isEnabled:rt,swipeGesture:ye,isAnimating:ht,isOpen:Oe,enable:_e,toggle:pt,close:Ke,open:Pe,_getOpenSync:ut,_createAnimation:(Se,Be)=>{const Qe=ue.get(Se);if(!Qe)throw new Error("animation not registered");return Qe(Be)},_register:Se=>{De.indexOf(Se)<0&&(Se.disabled||Ie(Se),De.push(Se))},_unregister:Se=>{const Be=De.indexOf(Se);Be>-1&&De.splice(Be,1)},_setOpen:He,_setActiveMenu:Ie}})()},1898:(Wt,nt,B)=>{"use strict";B.r(nt),B.d(nt,{GESTURE_CONTROLLER:()=>y.G,createGesture:()=>we});var y=B(4349);const f=(De,Pe,Ke,pt)=>{const _e=W(De)?{capture:!!pt.capture,passive:!!pt.passive}:!!pt.capture;let ye,Oe;return De.__zone_symbol__addEventListener?(ye="__zone_symbol__addEventListener",Oe="__zone_symbol__removeEventListener"):(ye="addEventListener",Oe="removeEventListener"),De[ye](Pe,Ke,_e),()=>{De[Oe](Pe,Ke,_e)}},W=De=>{if(void 0===oe)try{const Pe=Object.defineProperty({},"passive",{get:()=>{oe=!0}});De.addEventListener("optsTest",()=>{},Pe)}catch{oe=!1}return!!oe};let oe;const he=De=>De instanceof Document?De:De.ownerDocument,we=De=>{let Pe=!1,Ke=!1,pt=!0,_e=!1;const ye=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},De),Oe=ye.canStart,rt=ye.onWillStart,Ye=ye.onStart,Xe=ye.onEnd,Je=ye.notCaptured,ht=ye.onMove,Te=ye.threshold,re=ye.passive,xe=ye.blurOnStart,Ie={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},He=((De,Pe,Ke)=>{const pt=Ke*(Math.PI/180),_e="x"===De,ye=Math.cos(pt),Oe=Pe*Pe;let rt=0,Ye=0,Xe=!1,Je=0;return{start(ht,Te){rt=ht,Ye=Te,Je=0,Xe=!0},detect(ht,Te){if(!Xe)return!1;const re=ht-rt,xe=Te-Ye,Ie=re*re+xe*xe;if(Ie<Oe)return!1;const He=Math.sqrt(Ie),ze=(_e?re:xe)/He;return Je=ze>ye?1:ze<-ye?-1:0,Xe=!1,!0},isGesture:()=>0!==Je,getDirection:()=>Je}})(ye.direction,ye.threshold,ye.maxAngle),ze=y.G.createGesture({name:De.gestureName,priority:De.gesturePriority,disableScroll:De.disableScroll}),lt=()=>{Pe&&(_e=!1,ht&&ht(Ie))},ot=()=>!!ze.capture()&&(Pe=!0,pt=!1,Ie.startX=Ie.currentX,Ie.startY=Ie.currentY,Ie.startTime=Ie.currentTime,rt?rt(Ie).then(Se):Se(),!0),Se=()=>{xe&&(()=>{if(typeof document<"u"){const Ft=document.activeElement;null!=Ft&&Ft.blur&&Ft.blur()}})(),Ye&&Ye(Ie),pt=!0},Be=()=>{Pe=!1,Ke=!1,_e=!1,pt=!0,ze.release()},Qe=Ft=>{const _n=Pe,it=pt;if(Be(),it){if(fe(Ie,Ft),_n)return void(Xe&&Xe(Ie));Je&&Je(Ie)}},gt=((De,Pe,Ke,pt,_e)=>{let ye,Oe,rt,Ye,Xe,Je,ht,Te=0;const re=Re=>{Te=Date.now()+2e3,Pe(Re)&&(!Oe&&Ke&&(Oe=f(De,"touchmove",Ke,_e)),rt||(rt=f(Re.target,"touchend",Ie,_e)),Ye||(Ye=f(Re.target,"touchcancel",Ie,_e)))},xe=Re=>{Te>Date.now()||Pe(Re)&&(!Je&&Ke&&(Je=f(he(De),"mousemove",Ke,_e)),ht||(ht=f(he(De),"mouseup",He,_e)))},Ie=Re=>{ze(),pt&&pt(Re)},He=Re=>{ut(),pt&&pt(Re)},ze=()=>{Oe&&Oe(),rt&&rt(),Ye&&Ye(),Oe=rt=Ye=void 0},ut=()=>{Je&&Je(),ht&&ht(),Je=ht=void 0},Ze=()=>{ze(),ut()},lt=(Re=!0)=>{Re?(ye||(ye=f(De,"touchstart",re,_e)),Xe||(Xe=f(De,"mousedown",xe,_e))):(ye&&ye(),Xe&&Xe(),ye=Xe=void 0,Ze())};return{enable:lt,stop:Ze,destroy:()=>{lt(!1),pt=Ke=Pe=void 0}}})(ye.el,Ft=>{const _n=ue(Ft);return!(Ke||!pt||(ae(Ft,Ie),Ie.startX=Ie.currentX,Ie.startY=Ie.currentY,Ie.startTime=Ie.currentTime=_n,Ie.velocityX=Ie.velocityY=Ie.deltaX=Ie.deltaY=0,Ie.event=Ft,Oe&&!1===Oe(Ie))||(ze.release(),!ze.start()))&&(Ke=!0,0===Te?ot():(He.start(Ie.startX,Ie.startY),!0))},Ft=>{Pe?!_e&&pt&&(_e=!0,fe(Ie,Ft),requestAnimationFrame(lt)):(fe(Ie,Ft),He.detect(Ie.currentX,Ie.currentY)&&(!He.isGesture()||!ot())&&Zt())},Qe,{capture:!1,passive:re}),Zt=()=>{Be(),gt.stop(),Je&&Je(Ie)};return{enable(Ft=!0){Ft||(Pe&&Qe(void 0),Be()),gt.enable(Ft)},destroy(){ze.destroy(),gt.destroy()}}},fe=(De,Pe)=>{if(!Pe)return;const Ke=De.currentX,pt=De.currentY,_e=De.currentTime;ae(Pe,De);const ye=De.currentX,Oe=De.currentY,Ye=(De.currentTime=ue(Pe))-_e;if(Ye>0&&Ye<100){const Je=(Oe-pt)/Ye;De.velocityX=(ye-Ke)/Ye*.7+.3*De.velocityX,De.velocityY=.7*Je+.3*De.velocityY}De.deltaX=ye-De.startX,De.deltaY=Oe-De.startY,De.event=Pe},ae=(De,Pe)=>{let Ke=0,pt=0;if(De){const _e=De.changedTouches;if(_e&&_e.length>0){const ye=_e[0];Ke=ye.clientX,pt=ye.clientY}else void 0!==De.pageX&&(Ke=De.pageX,pt=De.pageY)}Pe.currentX=Ke,Pe.currentY=pt},ue=De=>De.timeStamp||Date.now()},9459:(Wt,nt,B)=>{"use strict";B.d(nt,{L:()=>oe,a:()=>be,b:()=>Ce,c:()=>he,d:()=>Me,e:()=>ht,g:()=>xe,l:()=>Je,s:()=>Te,t:()=>ae});var y=B(5861),f=B(9816),W=B(9397);const oe="ionViewWillEnter",be="ionViewDidEnter",Ce="ionViewWillLeave",he="ionViewDidLeave",Me="ionViewWillUnload",ae=Ie=>new Promise((He,ze)=>{(0,f.w)(()=>{ue(Ie),De(Ie).then(ut=>{ut.animation&&ut.animation.destroy(),Pe(Ie),He(ut)},ut=>{Pe(Ie),ze(ut)})})}),ue=Ie=>{const He=Ie.enteringEl,ze=Ie.leavingEl;re(He,ze,Ie.direction),Ie.showGoBack?He.classList.add("can-go-back"):He.classList.remove("can-go-back"),Te(He,!1),He.style.setProperty("pointer-events","none"),ze&&(Te(ze,!1),ze.style.setProperty("pointer-events","none"))},De=function(){var Ie=(0,y.Z)(function*(He){const ze=yield Ke(He);return ze&&f.B.isBrowser?pt(ze,He):_e(He)});return function(ze){return Ie.apply(this,arguments)}}(),Pe=Ie=>{const He=Ie.enteringEl,ze=Ie.leavingEl;He.classList.remove("ion-page-invisible"),He.style.removeProperty("pointer-events"),void 0!==ze&&(ze.classList.remove("ion-page-invisible"),ze.style.removeProperty("pointer-events"))},Ke=function(){var Ie=(0,y.Z)(function*(He){return He.leavingEl&&He.animated&&0!==He.duration?He.animationBuilder?He.animationBuilder:"ios"===He.mode?(yield Promise.resolve().then(B.bind(B,500))).iosTransitionAnimation:(yield Promise.resolve().then(B.bind(B,9892))).mdTransitionAnimation:void 0});return function(ze){return Ie.apply(this,arguments)}}(),pt=function(){var Ie=(0,y.Z)(function*(He,ze){yield ye(ze,!0);const ut=He(ze.baseEl,ze);Ye(ze.enteringEl,ze.leavingEl);const Ze=yield rt(ut,ze);return ze.progressCallback&&ze.progressCallback(void 0),Ze&&Xe(ze.enteringEl,ze.leavingEl),{hasCompleted:Ze,animation:ut}});return function(ze,ut){return Ie.apply(this,arguments)}}(),_e=function(){var Ie=(0,y.Z)(function*(He){const ze=He.enteringEl,ut=He.leavingEl;return yield ye(He,!1),Ye(ze,ut),Xe(ze,ut),{hasCompleted:!0}});return function(ze){return Ie.apply(this,arguments)}}(),ye=function(){var Ie=(0,y.Z)(function*(He,ze){(void 0!==He.deepWait?He.deepWait:ze)&&(yield Promise.all([ht(He.enteringEl),ht(He.leavingEl)])),yield Oe(He.viewIsReady,He.enteringEl)});return function(ze,ut){return Ie.apply(this,arguments)}}(),Oe=function(){var Ie=(0,y.Z)(function*(He,ze){He&&(yield He(ze))});return function(ze,ut){return Ie.apply(this,arguments)}}(),rt=(Ie,He)=>{const ze=He.progressCallback,ut=new Promise(Ze=>{Ie.onFinish(lt=>Ze(1===lt))});return ze?(Ie.progressStart(!0),ze(Ie)):Ie.play(),ut},Ye=(Ie,He)=>{Je(He,Ce),Je(Ie,oe)},Xe=(Ie,He)=>{Je(Ie,be),Je(He,he)},Je=(Ie,He)=>{if(Ie){const ze=new CustomEvent(He,{bubbles:!1,cancelable:!1});Ie.dispatchEvent(ze)}},ht=function(){var Ie=(0,y.Z)(function*(He){const ze=He;if(ze){if(null!=ze.componentOnReady){if(null!=(yield ze.componentOnReady()))return}else if(null!=ze.__registerHost)return void(yield new Promise(Ze=>(0,W.r)(Ze)));yield Promise.all(Array.from(ze.children).map(ht))}});return function(ze){return Ie.apply(this,arguments)}}(),Te=(Ie,He)=>{He?(Ie.setAttribute("aria-hidden","true"),Ie.classList.add("ion-page-hidden")):(Ie.hidden=!1,Ie.removeAttribute("aria-hidden"),Ie.classList.remove("ion-page-hidden"))},re=(Ie,He,ze)=>{void 0!==Ie&&(Ie.style.zIndex="back"===ze?"99":"101"),void 0!==He&&(He.style.zIndex="100")},xe=Ie=>Ie.classList.contains("ion-page")?Ie:Ie.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||Ie},9816:(Wt,nt,B)=>{"use strict";B.d(nt,{B:()=>ae,H:()=>Ze,a:()=>Sr,b:()=>ge,c:()=>Ft,d:()=>It,e:()=>br,f:()=>de,g:()=>_n,h:()=>ze,i:()=>nn,j:()=>ue,p:()=>qi,r:()=>Ti,w:()=>ri});var y=B(5861);let W,oe,be,Ce=!1,he=!1,Me=!1,we=!1,fe=!1;const ae={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ue=X=>{const ce=new URL(X,Vn.$resourcesUrl$);return ce.origin!==hr.location.origin?ce.href:ce.pathname},Oe="s-id",rt="sty-id",Je="http://www.w3.org/1999/xlink",ht={},Ie=X=>"object"==(X=typeof X)||"function"===X;function He(X){var ce,We,ee;return null!==(ee=null===(We=null===(ce=X.head)||void 0===ce?void 0:ce.querySelector('meta[name="csp-nonce"]'))||void 0===We?void 0:We.getAttribute("content"))&&void 0!==ee?ee:void 0}const ze=(X,ce,...We)=>{let ee=null,Le=null,Fe=null,yt=!1,bt=!1;const vt=[],xt=ln=>{for(let Tn=0;Tn<ln.length;Tn++)ee=ln[Tn],Array.isArray(ee)?xt(ee):null!=ee&&"boolean"!=typeof ee&&((yt="function"!=typeof X&&!Ie(ee))&&(ee=String(ee)),yt&&bt?vt[vt.length-1].$text$+=ee:vt.push(yt?ut(null,ee):ee),bt=yt)};if(xt(We),ce){ce.key&&(Le=ce.key),ce.name&&(Fe=ce.name);{const ln=ce.className||ce.class;ln&&(ce.class="object"!=typeof ln?ln:Object.keys(ln).filter(Tn=>ln[Tn]).join(" "))}}if("function"==typeof X)return X(null===ce?{}:ce,vt,ot);const en=ut(X,null);return en.$attrs$=ce,vt.length>0&&(en.$children$=vt),en.$key$=Le,en.$name$=Fe,en},ut=(X,ce)=>({$flags$:0,$tag$:X,$text$:ce,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Ze={},ot={forEach:(X,ce)=>X.map(Re).forEach(ce),map:(X,ce)=>X.map(Re).map(ce).map(Se)},Re=X=>({vattrs:X.$attrs$,vchildren:X.$children$,vkey:X.$key$,vname:X.$name$,vtag:X.$tag$,vtext:X.$text$}),Se=X=>{if("function"==typeof X.vtag){const We=Object.assign({},X.vattrs);return X.vkey&&(We.key=X.vkey),X.vname&&(We.name=X.vname),ze(X.vtag,We,...X.vchildren||[])}const ce=ut(X.vtag,X.vtext);return ce.$attrs$=X.vattrs,ce.$children$=X.vchildren,ce.$key$=X.vkey,ce.$name$=X.vname,ce},Qe=(X,ce,We,ee,Le,Fe,yt)=>{let bt,vt,xt,en;if(1===Fe.nodeType){for(bt=Fe.getAttribute("c-id"),bt&&(vt=bt.split("."),(vt[0]===yt||"0"===vt[0])&&(xt={$flags$:0,$hostId$:vt[0],$nodeId$:vt[1],$depth$:vt[2],$index$:vt[3],$tag$:Fe.tagName.toLowerCase(),$elm$:Fe,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},ce.push(xt),Fe.removeAttribute("c-id"),X.$children$||(X.$children$=[]),X.$children$[xt.$index$]=xt,X=xt,ee&&"0"===xt.$depth$&&(ee[xt.$index$]=xt.$elm$))),en=Fe.childNodes.length-1;en>=0;en--)Qe(X,ce,We,ee,Le,Fe.childNodes[en],yt);if(Fe.shadowRoot)for(en=Fe.shadowRoot.childNodes.length-1;en>=0;en--)Qe(X,ce,We,ee,Le,Fe.shadowRoot.childNodes[en],yt)}else if(8===Fe.nodeType)vt=Fe.nodeValue.split("."),(vt[1]===yt||"0"===vt[1])&&(bt=vt[0],xt={$flags$:0,$hostId$:vt[1],$nodeId$:vt[2],$depth$:vt[3],$index$:vt[4],$elm$:Fe,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===bt?(xt.$elm$=Fe.nextSibling,xt.$elm$&&3===xt.$elm$.nodeType&&(xt.$text$=xt.$elm$.textContent,ce.push(xt),Fe.remove(),X.$children$||(X.$children$=[]),X.$children$[xt.$index$]=xt,ee&&"0"===xt.$depth$&&(ee[xt.$index$]=xt.$elm$))):xt.$hostId$===yt&&("s"===bt?(xt.$tag$="slot",Fe["s-sn"]=vt[5]?xt.$name$=vt[5]:"",Fe["s-sr"]=!0,ee&&(xt.$elm$=Pn.createElement(xt.$tag$),xt.$name$&&xt.$elm$.setAttribute("name",xt.$name$),Fe.parentNode.insertBefore(xt.$elm$,Fe),Fe.remove(),"0"===xt.$depth$&&(ee[xt.$index$]=xt.$elm$)),We.push(xt),X.$children$||(X.$children$=[]),X.$children$[xt.$index$]=xt):"r"===bt&&(ee?Fe.remove():(Le["s-cr"]=Fe,Fe["s-cn"]=!0))));else if(X&&"style"===X.$tag$){const ln=ut(null,Fe.textContent);ln.$elm$=Fe,ln.$index$="0",X.$children$=[ln]}},gt=(X,ce)=>{if(1===X.nodeType){let We=0;for(;We<X.childNodes.length;We++)gt(X.childNodes[We],ce);if(X.shadowRoot)for(We=0;We<X.shadowRoot.childNodes.length;We++)gt(X.shadowRoot.childNodes[We],ce)}else if(8===X.nodeType){const We=X.nodeValue.split(".");"o"===We[0]&&(ce.set(We[1]+"."+We[2],X),X.nodeValue="",X["s-en"]=We[3])}},Ft=X=>zn.push(X),_n=X=>Br(X).$modeName$,de=X=>Br(X).$hostElement$,It=(X,ce,We)=>{const ee=de(X);return{emit:Le=>Bt(ee,ce,{bubbles:!!(4&We),composed:!!(2&We),cancelable:!!(1&We),detail:Le})}},Bt=(X,ce,We)=>{const ee=Vn.ce(ce,We);return X.dispatchEvent(ee),ee},Ge=new WeakMap,Jt=(X,ce,We)=>{let ee=di.get(X);hs&&We?(ee=ee||new CSSStyleSheet,"string"==typeof ee?ee=ce:ee.replaceSync(ce)):ee=ce,di.set(X,ee)},tn=(X,ce,We,ee)=>{var Le;let Fe=on(ce,We);const yt=di.get(Fe);if(X=11===X.nodeType?X:Pn,yt)if("string"==typeof yt){let vt,bt=Ge.get(X=X.head||X);if(bt||Ge.set(X,bt=new Set),!bt.has(Fe)){if(X.host&&(vt=X.querySelector(`[${rt}="${Fe}"]`)))vt.innerHTML=yt;else{vt=Pn.createElement("style"),vt.innerHTML=yt;const xt=null!==(Le=Vn.$nonce$)&&void 0!==Le?Le:He(Pn);null!=xt&&vt.setAttribute("nonce",xt),X.insertBefore(vt,X.querySelector("link"))}bt&&bt.add(Fe)}}else X.adoptedStyleSheets.includes(yt)||(X.adoptedStyleSheets=[...X.adoptedStyleSheets,yt]);return Fe},on=(X,ce)=>"sc-"+(ce&&32&X.$flags$?X.$tagName$+"-"+ce:X.$tagName$),Rn=X=>X.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),nr=(X,ce,We,ee,Le,Fe)=>{if(We!==ee){let yt=Hr(X,ce),bt=ce.toLowerCase();if("class"===ce){const vt=X.classList,xt=Qn(We),en=Qn(ee);vt.remove(...xt.filter(ln=>ln&&!en.includes(ln))),vt.add(...en.filter(ln=>ln&&!xt.includes(ln)))}else if("style"===ce){for(const vt in We)(!ee||null==ee[vt])&&(vt.includes("-")?X.style.removeProperty(vt):X.style[vt]="");for(const vt in ee)(!We||ee[vt]!==We[vt])&&(vt.includes("-")?X.style.setProperty(vt,ee[vt]):X.style[vt]=ee[vt])}else if("key"!==ce)if("ref"===ce)ee&&ee(X);else if(yt||"o"!==ce[0]||"n"!==ce[1]){const vt=Ie(ee);if((yt||vt&&null!==ee)&&!Le)try{if(X.tagName.includes("-"))X[ce]=ee;else{const en=null==ee?"":ee;"list"===ce?yt=!1:(null==We||X[ce]!=en)&&(X[ce]=en)}}catch{}let xt=!1;bt!==(bt=bt.replace(/^xlink\:?/,""))&&(ce=bt,xt=!0),null==ee||!1===ee?(!1!==ee||""===X.getAttribute(ce))&&(xt?X.removeAttributeNS(Je,ce):X.removeAttribute(ce)):(!yt||4&Fe||Le)&&!vt&&(ee=!0===ee?"":ee,xt?X.setAttributeNS(Je,ce,ee):X.setAttribute(ce,ee))}else ce="-"===ce[2]?ce.slice(3):Hr(hr,bt)?bt.slice(2):bt[2]+ce.slice(3),We&&Vn.rel(X,ce,We,!1),ee&&Vn.ael(X,ce,ee,!1)}},Wn=/\s/,Qn=X=>X?X.split(Wn):[],Vt=(X,ce,We,ee)=>{const Le=11===ce.$elm$.nodeType&&ce.$elm$.host?ce.$elm$.host:ce.$elm$,Fe=X&&X.$attrs$||ht,yt=ce.$attrs$||ht;for(ee in Fe)ee in yt||nr(Le,ee,Fe[ee],void 0,We,ce.$flags$);for(ee in yt)nr(Le,ee,Fe[ee],yt[ee],We,ce.$flags$)},_r=(X,ce,We,ee)=>{const Le=ce.$children$[We];let yt,bt,vt,Fe=0;if(Ce||(Me=!0,"slot"===Le.$tag$&&(W&&ee.classList.add(W+"-s"),Le.$flags$|=Le.$children$?2:1)),null!==Le.$text$)yt=Le.$elm$=Pn.createTextNode(Le.$text$);else if(1&Le.$flags$)yt=Le.$elm$=Pn.createTextNode("");else{if(we||(we="svg"===Le.$tag$),yt=Le.$elm$=Pn.createElementNS(we?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Le.$flags$?"slot-fb":Le.$tag$),we&&"foreignObject"===Le.$tag$&&(we=!1),Vt(null,Le,we),(X=>null!=X)(W)&&yt["s-si"]!==W&&yt.classList.add(yt["s-si"]=W),Le.$children$)for(Fe=0;Fe<Le.$children$.length;++Fe)bt=_r(X,Le,Fe,yt),bt&&yt.appendChild(bt);"svg"===Le.$tag$?we=!1:"foreignObject"===yt.tagName&&(we=!0)}return yt["s-hn"]=be,3&Le.$flags$&&(yt["s-sr"]=!0,yt["s-cr"]=oe,yt["s-sn"]=Le.$name$||"",vt=X&&X.$children$&&X.$children$[We],vt&&vt.$tag$===Le.$tag$&&X.$elm$&&ar(X.$elm$,!1)),yt},ar=(X,ce)=>{Vn.$flags$|=1;const We=X.childNodes;for(let ee=We.length-1;ee>=0;ee--){const Le=We[ee];Le["s-hn"]!==be&&Le["s-ol"]&&(hn(Le).insertBefore(Le,Lt(Le)),Le["s-ol"].remove(),Le["s-ol"]=void 0,Me=!0),ce&&ar(Le,ce)}Vn.$flags$&=-2},Ir=(X,ce,We,ee,Le,Fe)=>{let bt,yt=X["s-cr"]&&X["s-cr"].parentNode||X;for(yt.shadowRoot&&yt.tagName===be&&(yt=yt.shadowRoot);Le<=Fe;++Le)ee[Le]&&(bt=_r(null,We,Le,X),bt&&(ee[Le].$elm$=bt,yt.insertBefore(bt,Lt(ce))))},qr=(X,ce,We,ee,Le)=>{for(;ce<=We;++ce)(ee=X[ce])&&(Le=ee.$elm$,Di(ee),he=!0,Le["s-ol"]?Le["s-ol"].remove():ar(Le,!0),Le.remove())},pn=(X,ce)=>X.$tag$===ce.$tag$&&("slot"===X.$tag$?X.$name$===ce.$name$:X.$key$===ce.$key$),Lt=X=>X&&X["s-ol"]||X,hn=X=>(X["s-ol"]?X["s-ol"]:X).parentNode,Nt=(X,ce)=>{const We=ce.$elm$=X.$elm$,ee=X.$children$,Le=ce.$children$,Fe=ce.$tag$,yt=ce.$text$;let bt;null===yt?(we="svg"===Fe||"foreignObject"!==Fe&&we,"slot"===Fe||Vt(X,ce,we),null!==ee&&null!==Le?((X,ce,We,ee)=>{let jn,Gr,Le=0,Fe=0,yt=0,bt=0,vt=ce.length-1,xt=ce[0],en=ce[vt],ln=ee.length-1,Tn=ee[0],Nr=ee[ln];for(;Le<=vt&&Fe<=ln;)if(null==xt)xt=ce[++Le];else if(null==en)en=ce[--vt];else if(null==Tn)Tn=ee[++Fe];else if(null==Nr)Nr=ee[--ln];else if(pn(xt,Tn))Nt(xt,Tn),xt=ce[++Le],Tn=ee[++Fe];else if(pn(en,Nr))Nt(en,Nr),en=ce[--vt],Nr=ee[--ln];else if(pn(xt,Nr))("slot"===xt.$tag$||"slot"===Nr.$tag$)&&ar(xt.$elm$.parentNode,!1),Nt(xt,Nr),X.insertBefore(xt.$elm$,en.$elm$.nextSibling),xt=ce[++Le],Nr=ee[--ln];else if(pn(en,Tn))("slot"===xt.$tag$||"slot"===Nr.$tag$)&&ar(en.$elm$.parentNode,!1),Nt(en,Tn),X.insertBefore(en.$elm$,xt.$elm$),en=ce[--vt],Tn=ee[++Fe];else{for(yt=-1,bt=Le;bt<=vt;++bt)if(ce[bt]&&null!==ce[bt].$key$&&ce[bt].$key$===Tn.$key$){yt=bt;break}yt>=0?(Gr=ce[yt],Gr.$tag$!==Tn.$tag$?jn=_r(ce&&ce[Fe],We,yt,X):(Nt(Gr,Tn),ce[yt]=void 0,jn=Gr.$elm$),Tn=ee[++Fe]):(jn=_r(ce&&ce[Fe],We,Fe,X),Tn=ee[++Fe]),jn&&hn(xt.$elm$).insertBefore(jn,Lt(xt.$elm$))}Le>vt?Ir(X,null==ee[ln+1]?null:ee[ln+1].$elm$,We,ee,Fe,ln):Fe>ln&&qr(ce,Le,vt)})(We,ee,ce,Le):null!==Le?(null!==X.$text$&&(We.textContent=""),Ir(We,null,ce,Le,0,Le.length-1)):null!==ee&&qr(ee,0,ee.length-1),we&&"svg"===Fe&&(we=!1)):(bt=We["s-cr"])?bt.parentNode.textContent=yt:X.$text$!==yt&&(We.data=yt)},lr=X=>{const ce=X.childNodes;let We,ee,Le,Fe,yt,bt;for(ee=0,Le=ce.length;ee<Le;ee++)if(We=ce[ee],1===We.nodeType){if(We["s-sr"])for(yt=We["s-sn"],We.hidden=!1,Fe=0;Fe<Le;Fe++)if(bt=ce[Fe].nodeType,ce[Fe]["s-hn"]!==We["s-hn"]||""!==yt){if(1===bt&&yt===ce[Fe].getAttribute("slot")){We.hidden=!0;break}}else if(1===bt||3===bt&&""!==ce[Fe].textContent.trim()){We.hidden=!0;break}lr(We)}},An=[],Tr=X=>{let ce,We,ee,Le,Fe,yt,bt=0;const vt=X.childNodes,xt=vt.length;for(;bt<xt;bt++){if(ce=vt[bt],ce["s-sr"]&&(We=ce["s-cr"])&&We.parentNode)for(ee=We.parentNode.childNodes,Le=ce["s-sn"],yt=ee.length-1;yt>=0;yt--)We=ee[yt],!We["s-cn"]&&!We["s-nr"]&&We["s-hn"]!==ce["s-hn"]&&(Yr(We,Le)?(Fe=An.find(en=>en.$nodeToRelocate$===We),he=!0,We["s-sn"]=We["s-sn"]||Le,Fe?Fe.$slotRefNode$=ce:An.push({$slotRefNode$:ce,$nodeToRelocate$:We}),We["s-sr"]&&An.map(en=>{Yr(en.$nodeToRelocate$,We["s-sn"])&&(Fe=An.find(ln=>ln.$nodeToRelocate$===We),Fe&&!en.$slotRefNode$&&(en.$slotRefNode$=Fe.$slotRefNode$))})):An.some(en=>en.$nodeToRelocate$===We)||An.push({$nodeToRelocate$:We}));1===ce.nodeType&&Tr(ce)}},Yr=(X,ce)=>1===X.nodeType?null===X.getAttribute("slot")&&""===ce||X.getAttribute("slot")===ce:X["s-sn"]===ce||""===ce,Di=X=>{X.$attrs$&&X.$attrs$.ref&&X.$attrs$.ref(null),X.$children$&&X.$children$.map(Di)},jr=(X,ce)=>{ce&&!X.$onRenderResolve$&&ce["s-p"]&&ce["s-p"].push(new Promise(We=>X.$onRenderResolve$=We))},kn=(X,ce)=>{if(X.$flags$|=16,!(4&X.$flags$))return jr(X,X.$ancestorComponent$),ri(()=>In(X,ce));X.$flags$|=512},In=(X,ce)=>{const ee=X.$lazyInstance$;let Le;return ce&&(X.$flags$|=256,X.$queuedListeners$&&(X.$queuedListeners$.map(([Fe,yt])=>mn(ee,Fe,yt)),X.$queuedListeners$=null),Le=mn(ee,"componentWillLoad")),Le=vn(Le,()=>mn(ee,"componentWillRender")),vn(Le,()=>ti(X,ee,ce))},ti=function(){var X=(0,y.Z)(function*(ce,We,ee){const Le=ce.$hostElement$,yt=Le["s-rc"];ee&&(X=>{const ce=X.$cmpMeta$,We=X.$hostElement$,ee=ce.$flags$,Fe=tn(We.shadowRoot?We.shadowRoot:We.getRootNode(),ce,X.$modeName$);10&ee&&(We["s-sc"]=Fe,We.classList.add(Fe+"-h"),2&ee&&We.classList.add(Fe+"-s"))})(ce);zt(ce,We),yt&&(yt.map(vt=>vt()),Le["s-rc"]=void 0);{const vt=Le["s-p"],xt=()=>St(ce);0===vt.length?xt():(Promise.all(vt).then(xt),ce.$flags$|=4,vt.length=0)}});return function(We,ee,Le){return X.apply(this,arguments)}}(),zt=(X,ce,We)=>{try{ce=ce.render&&ce.render(),X.$flags$&=-17,X.$flags$|=2,((X,ce)=>{const We=X.$hostElement$,ee=X.$cmpMeta$,Le=X.$vnode$||ut(null,null),Fe=(X=>X&&X.$tag$===Ze)(ce)?ce:ze(null,null,ce);if(be=We.tagName,ee.$attrsToReflect$&&(Fe.$attrs$=Fe.$attrs$||{},ee.$attrsToReflect$.map(([yt,bt])=>Fe.$attrs$[bt]=We[yt])),Fe.$tag$=null,Fe.$flags$|=4,X.$vnode$=Fe,Fe.$elm$=Le.$elm$=We.shadowRoot||We,W=We["s-sc"],oe=We["s-cr"],Ce=0!=(1&ee.$flags$),he=!1,Nt(Le,Fe),Vn.$flags$|=1,Me){Tr(Fe.$elm$);let yt,bt,vt,xt,en,ln,Tn=0;for(;Tn<An.length;Tn++)yt=An[Tn],bt=yt.$nodeToRelocate$,bt["s-ol"]||(vt=Pn.createTextNode(""),vt["s-nr"]=bt,bt.parentNode.insertBefore(bt["s-ol"]=vt,bt));for(Tn=0;Tn<An.length;Tn++)if(yt=An[Tn],bt=yt.$nodeToRelocate$,yt.$slotRefNode$){for(xt=yt.$slotRefNode$.parentNode,en=yt.$slotRefNode$.nextSibling,vt=bt["s-ol"];vt=vt.previousSibling;)if(ln=vt["s-nr"],ln&&ln["s-sn"]===bt["s-sn"]&&xt===ln.parentNode&&(ln=ln.nextSibling,!ln||!ln["s-nr"])){en=ln;break}(!en&&xt!==bt.parentNode||bt.nextSibling!==en)&&bt!==en&&(!bt["s-hn"]&&bt["s-ol"]&&(bt["s-hn"]=bt["s-ol"].parentNode.nodeName),xt.insertBefore(bt,en))}else 1===bt.nodeType&&(bt.hidden=!0)}he&&lr(Fe.$elm$),Vn.$flags$&=-2,An.length=0})(X,ce)}catch(ee){Si(ee,X.$hostElement$)}return null},St=X=>{const We=X.$hostElement$,Le=X.$lazyInstance$,Fe=X.$ancestorComponent$;mn(Le,"componentDidRender"),64&X.$flags$?mn(Le,"componentDidUpdate"):(X.$flags$|=64,dr(We),mn(Le,"componentDidLoad"),X.$onReadyResolve$(We),Fe||cn()),X.$onInstanceResolve$(We),X.$onRenderResolve$&&(X.$onRenderResolve$(),X.$onRenderResolve$=void 0),512&X.$flags$&&_i(()=>kn(X,!1)),X.$flags$&=-517},nn=X=>{{const ce=Br(X),We=ce.$hostElement$.isConnected;return We&&2==(18&ce.$flags$)&&kn(ce,!1),We}},cn=X=>{dr(Pn.documentElement),_i(()=>Bt(hr,"appload",{detail:{namespace:"ionic"}}))},mn=(X,ce,We)=>{if(X&&X[ce])try{return X[ce](We)}catch(ee){Si(ee)}},vn=(X,ce)=>X&&X.then?X.then(ce):ce(),dr=X=>X.classList.add("hydrated"),$e=(X,ce,We)=>{if(ce.$members$){X.watchers&&(ce.$watchers$=X.watchers);const ee=Object.entries(ce.$members$),Le=X.prototype;if(ee.map(([Fe,[yt]])=>{31&yt||2&We&&32&yt?Object.defineProperty(Le,Fe,{get(){return((X,ce)=>Br(this).$instanceValues$.get(ce))(0,Fe)},set(bt){((X,ce,We,ee)=>{const Le=Br(X),Fe=Le.$hostElement$,yt=Le.$instanceValues$.get(ce),bt=Le.$flags$,vt=Le.$lazyInstance$;We=((X,ce)=>null==X||Ie(X)?X:4&ce?"false"!==X&&(""===X||!!X):2&ce?parseFloat(X):1&ce?String(X):X)(We,ee.$members$[ce][0]);const xt=Number.isNaN(yt)&&Number.isNaN(We);if((!(8&bt)||void 0===yt)&&We!==yt&&!xt&&(Le.$instanceValues$.set(ce,We),vt)){if(ee.$watchers$&&128&bt){const ln=ee.$watchers$[ce];ln&&ln.map(Tn=>{try{vt[Tn](We,yt,ce)}catch(Nr){Si(Nr,Fe)}})}2==(18&bt)&&kn(Le,!1)}})(this,Fe,bt,ce)},configurable:!0,enumerable:!0}):1&We&&64&yt&&Object.defineProperty(Le,Fe,{value(...bt){const vt=Br(this);return vt.$onInstancePromise$.then(()=>vt.$lazyInstance$[Fe](...bt))}})}),1&We){const Fe=new Map;Le.attributeChangedCallback=function(yt,bt,vt){Vn.jmp(()=>{const xt=Fe.get(yt);if(this.hasOwnProperty(xt))vt=this[xt],delete this[xt];else if(Le.hasOwnProperty(xt)&&"number"==typeof this[xt]&&this[xt]==vt)return;this[xt]=(null!==vt||"boolean"!=typeof this[xt])&&vt})},X.observedAttributes=ee.filter(([yt,bt])=>15&bt[0]).map(([yt,bt])=>{const vt=bt[1]||yt;return Fe.set(vt,yt),512&bt[0]&&ce.$attrsToReflect$.push([yt,vt]),vt})}}return X},Ct=function(){var X=(0,y.Z)(function*(ce,We,ee,Le,Fe){if(!(32&We.$flags$)){{if(We.$flags$|=32,(Fe=$i(ee)).then){const xt=()=>{};Fe=yield Fe,xt()}Fe.isProxied||(ee.$watchers$=Fe.watchers,$e(Fe,ee,2),Fe.isProxied=!0);const vt=()=>{};We.$flags$|=8;try{new Fe(We)}catch(xt){Si(xt)}We.$flags$&=-9,We.$flags$|=128,vt(),at(We.$lazyInstance$)}if(Fe.style){let vt=Fe.style;"string"!=typeof vt&&(vt=vt[We.$modeName$=(X=>zn.map(ce=>ce(X)).find(ce=>!!ce))(ce)]);const xt=on(ee,We.$modeName$);if(!di.has(xt)){const en=()=>{};Jt(xt,vt,!!(1&ee.$flags$)),en()}}}const yt=We.$ancestorComponent$,bt=()=>kn(We,!0);yt&&yt["s-rc"]?yt["s-rc"].push(bt):bt()});return function(We,ee,Le,Fe,yt){return X.apply(this,arguments)}}(),at=X=>{mn(X,"connectedCallback")},ke=X=>{const ce=X["s-cr"]=Pn.createComment("");ce["s-cn"]=!0,X.insertBefore(ce,X.firstChild)},ge=(X,ce={})=>{var We;const Le=[],Fe=ce.exclude||[],yt=hr.customElements,bt=Pn.head,vt=bt.querySelector("meta[charset]"),xt=Pn.createElement("style"),en=[],ln=Pn.querySelectorAll(`[${rt}]`);let Tn,Nr=!0,jn=0;for(Object.assign(Vn,ce),Vn.$resourcesUrl$=new URL(ce.resourcesUrl||"./",Pn.baseURI).href,Vn.$flags$|=2;jn<ln.length;jn++)Jt(ln[jn].getAttribute(rt),Rn(ln[jn].innerHTML),!0);X.map(Gr=>{Gr[1].map(Pi=>{const Oi={$flags$:Pi[0],$tagName$:Pi[1],$members$:Pi[2],$listeners$:Pi[3]};Oi.$members$=Pi[2],Oi.$listeners$=Pi[3],Oi.$attrsToReflect$=[],Oi.$watchers$={};const Ui=Oi.$tagName$,li=class extends HTMLElement{constructor(Yi){super(Yi),yi(Yi=this,Oi),1&Oi.$flags$&&Yi.attachShadow({mode:"open",delegatesFocus:!!(16&Oi.$flags$)})}connectedCallback(){Tn&&(clearTimeout(Tn),Tn=null),Nr?en.push(this):Vn.jmp(()=>(X=>{if(!(1&Vn.$flags$)){const ce=Br(X),We=ce.$cmpMeta$,ee=()=>{};if(1&ce.$flags$)st(X,ce,We.$listeners$),at(ce.$lazyInstance$);else{let Le;if(ce.$flags$|=1,Le=X.getAttribute(Oe),Le){if(1&We.$flags$){const Fe=tn(X.shadowRoot,We,X.getAttribute("s-mode"));X.classList.remove(Fe+"-h",Fe+"-s")}((X,ce,We,ee)=>{const Fe=X.shadowRoot,yt=[],vt=Fe?[]:null,xt=ee.$vnode$=ut(ce,null);Vn.$orgLocNodes$||gt(Pn.body,Vn.$orgLocNodes$=new Map),X[Oe]=We,X.removeAttribute(Oe),Qe(xt,yt,[],vt,X,X,We),yt.map(en=>{const ln=en.$hostId$+"."+en.$nodeId$,Tn=Vn.$orgLocNodes$.get(ln),Nr=en.$elm$;Tn&&vr&&""===Tn["s-en"]&&Tn.parentNode.insertBefore(Nr,Tn.nextSibling),Fe||(Nr["s-hn"]=ce,Tn&&(Nr["s-ol"]=Tn,Nr["s-ol"]["s-nr"]=Nr)),Vn.$orgLocNodes$.delete(ln)}),Fe&&vt.map(en=>{en&&Fe.appendChild(en)})})(X,We.$tagName$,Le,ce)}Le||12&We.$flags$&&ke(X);{let Fe=X;for(;Fe=Fe.parentNode||Fe.host;)if(1===Fe.nodeType&&Fe.hasAttribute("s-id")&&Fe["s-p"]||Fe["s-p"]){jr(ce,ce.$ancestorComponent$=Fe);break}}We.$members$&&Object.entries(We.$members$).map(([Fe,[yt]])=>{if(31&yt&&X.hasOwnProperty(Fe)){const bt=X[Fe];delete X[Fe],X[Fe]=bt}}),Ct(X,ce,We)}ee()}})(this))}disconnectedCallback(){Vn.jmp(()=>(X=>{if(!(1&Vn.$flags$)){const ce=Br(this),We=ce.$lazyInstance$;ce.$rmListeners$&&(ce.$rmListeners$.map(ee=>ee()),ce.$rmListeners$=void 0),mn(We,"disconnectedCallback")}})())}componentOnReady(){return Br(this).$onReadyPromise$}};Oi.$lazyBundleId$=Gr[0],!Fe.includes(Ui)&&!yt.get(Ui)&&(Le.push(Ui),yt.define(Ui,$e(li,Oi,1)))})});{xt.innerHTML=Le+"{visibility:hidden}.hydrated{visibility:inherit}",xt.setAttribute("data-styles","");const Gr=null!==(We=Vn.$nonce$)&&void 0!==We?We:He(Pn);null!=Gr&&xt.setAttribute("nonce",Gr),bt.insertBefore(xt,vt?vt.nextSibling:bt.firstChild)}Nr=!1,en.length?en.map(Gr=>Gr.connectedCallback()):Vn.jmp(()=>Tn=setTimeout(cn,30))},st=(X,ce,We,ee)=>{We&&We.map(([Le,Fe,yt])=>{const bt=Mt(X,Le),vt=Dt(ce,yt),xt=gn(Le);Vn.ael(bt,Fe,vt,xt),(ce.$rmListeners$=ce.$rmListeners$||[]).push(()=>Vn.rel(bt,Fe,vt,xt))})},Dt=(X,ce)=>We=>{try{256&X.$flags$?X.$lazyInstance$[ce](We):(X.$queuedListeners$=X.$queuedListeners$||[]).push([ce,We])}catch(ee){Si(ee)}},Mt=(X,ce)=>4&ce?Pn:8&ce?hr:16&ce?Pn.body:X,gn=X=>0!=(2&X),Dr=new WeakMap,Br=X=>Dr.get(X),Ti=(X,ce)=>Dr.set(ce.$lazyInstance$=X,ce),yi=(X,ce)=>{const We={$flags$:0,$hostElement$:X,$cmpMeta$:ce,$instanceValues$:new Map};return We.$onInstancePromise$=new Promise(ee=>We.$onInstanceResolve$=ee),We.$onReadyPromise$=new Promise(ee=>We.$onReadyResolve$=ee),X["s-p"]=[],X["s-rc"]=[],st(X,We,ce.$listeners$),Dr.set(X,We)},Hr=(X,ce)=>ce in X,Si=(X,ce)=>(0,console.error)(X,ce),rr=new Map,$i=(X,ce,We)=>{const ee=X.$tagName$.replace(/-/g,"_"),Le=X.$lazyBundleId$,Fe=rr.get(Le);return Fe?Fe[ee]:B(863)(`./${Le}.entry.js`).then(yt=>(rr.set(Le,yt),yt[ee]),Si)},di=new Map,zn=[],hr=typeof window<"u"?window:{},Pn=hr.document||{head:{}},Vn={$flags$:0,$resourcesUrl$:"",jmp:X=>X(),raf:X=>requestAnimationFrame(X),ael:(X,ce,We,ee)=>X.addEventListener(ce,We,ee),rel:(X,ce,We,ee)=>X.removeEventListener(ce,We,ee),ce:(X,ce)=>new CustomEvent(X,ce)},Sr=X=>{Object.assign(Vn,X)},vr=!0,qi=X=>Promise.resolve(X),hs=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ni=[],Kt=[],Bn=(X,ce)=>We=>{X.push(We),fe||(fe=!0,ce&&4&Vn.$flags$?_i(zr):Vn.raf(zr))},wr=X=>{for(let ce=0;ce<X.length;ce++)try{X[ce](performance.now())}catch(We){Si(We)}X.length=0},zr=()=>{wr(ni),wr(Kt),(fe=ni.length>0)&&Vn.raf(zr)},_i=X=>qi().then(X),br=Bn(ni,!1),ri=Bn(Kt,!0)},1178:(Wt,nt,B)=>{"use strict";B.d(nt,{a:()=>f,b:()=>W,p:()=>y});const y=(oe,...be)=>console.warn(`[Ionic Warning]: ${oe}`,...be),f=(oe,...be)=>console.error(`[Ionic Error]: ${oe}`,...be),W=(oe,...be)=>console.error(`<${oe.tagName.toLowerCase()}> must be used inside ${be.join(" or ")}.`)},6406:(Wt,nt,B)=>{"use strict";B.d(nt,{a:()=>ae,b:()=>lt,c:()=>W,g:()=>fe,i:()=>ot});var y=B(9816);class f{constructor(){this.m=new Map}reset(Se){this.m=new Map(Object.entries(Se))}get(Se,Be){const Qe=this.m.get(Se);return void 0!==Qe?Qe:Be}getBoolean(Se,Be=!1){const Qe=this.m.get(Se);return void 0===Qe?Be:"string"==typeof Qe?"true"===Qe:!!Qe}getNumber(Se,Be){const Qe=parseFloat(this.m.get(Se));return isNaN(Qe)?void 0!==Be?Be:NaN:Qe}set(Se,Be){this.m.set(Se,Be)}}const W=new f,we="ionic-persist-config",fe=Re=>ue(Re),ae=(Re,Se)=>("string"==typeof Re&&(Se=Re,Re=void 0),fe(Re).includes(Se)),ue=(Re=window)=>{if(typeof Re>"u")return[];Re.Ionic=Re.Ionic||{};let Se=Re.Ionic.platforms;return null==Se&&(Se=Re.Ionic.platforms=De(Re),Se.forEach(Be=>Re.document.documentElement.classList.add(`plt-${Be}`))),Se},De=Re=>{const Se=W.get("platform");return Object.keys(ut).filter(Be=>{const Qe=null==Se?void 0:Se[Be];return"function"==typeof Qe?Qe(Re):ut[Be](Re)})},Ke=Re=>!!(He(Re,/iPad/i)||He(Re,/Macintosh/i)&&Xe(Re)),ye=Re=>He(Re,/android|sink/i),Xe=Re=>ze(Re,"(any-pointer:coarse)"),ht=Re=>Te(Re)||re(Re),Te=Re=>!!(Re.cordova||Re.phonegap||Re.PhoneGap),re=Re=>{const Se=Re.Capacitor;return!(null==Se||!Se.isNative)},He=(Re,Se)=>Se.test(Re.navigator.userAgent),ze=(Re,Se)=>{var Be;return null===(Be=Re.matchMedia)||void 0===Be?void 0:Be.call(Re,Se).matches},ut={ipad:Ke,iphone:Re=>He(Re,/iPhone/i),ios:Re=>He(Re,/iPhone|iPod/i)||Ke(Re),android:ye,phablet:Re=>{const Se=Re.innerWidth,Be=Re.innerHeight,Qe=Math.min(Se,Be),gt=Math.max(Se,Be);return Qe>390&&Qe<520&&gt>620&&gt<800},tablet:Re=>{const Se=Re.innerWidth,Be=Re.innerHeight,Qe=Math.min(Se,Be),gt=Math.max(Se,Be);return Ke(Re)||(Re=>ye(Re)&&!He(Re,/mobile/i))(Re)||Qe>460&&Qe<820&&gt>780&&gt<1400},cordova:Te,capacitor:re,electron:Re=>He(Re,/electron/i),pwa:Re=>{var Se;return!!(null!==(Se=Re.matchMedia)&&void 0!==Se&&Se.call(Re,"(display-mode: standalone)").matches||Re.navigator.standalone)},mobile:Xe,mobileweb:Re=>Xe(Re)&&!ht(Re),desktop:Re=>!Xe(Re),hybrid:ht};let Ze;const lt=Re=>Re&&(0,y.g)(Re)||Ze,ot=(Re={})=>{if(typeof window>"u")return;const Se=window.document,Be=window,Qe=Be.Ionic=Be.Ionic||{},gt={};Re._ael&&(gt.ael=Re._ael),Re._rel&&(gt.rel=Re._rel),Re._ce&&(gt.ce=Re._ce),(0,y.a)(gt);const Zt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(Re=>{try{const Se=Re.sessionStorage.getItem(we);return null!==Se?JSON.parse(Se):{}}catch{return{}}})(Be)),{persistConfig:!1}),Qe.config),(Re=>{const Se={};return Re.location.search.slice(1).split("&").map(Be=>Be.split("=")).map(([Be,Qe])=>[decodeURIComponent(Be),decodeURIComponent(Qe)]).filter(([Be])=>((Re,Se)=>Re.substr(0,Se.length)===Se)(Be,"ionic:")).map(([Be,Qe])=>[Be.slice("ionic:".length),Qe]).forEach(([Be,Qe])=>{Se[Be]=Qe}),Se})(Be)),Re);W.reset(Zt),W.getBoolean("persistConfig")&&((Re,Se)=>{try{Re.sessionStorage.setItem(we,JSON.stringify(Se))}catch{return}})(Be,Zt),ue(Be),Qe.config=W,Qe.mode=Ze=W.get("mode",Se.documentElement.getAttribute("mode")||(ae(Be,"ios")?"ios":"md")),W.set("mode",Ze),Se.documentElement.setAttribute("mode",Ze),Se.documentElement.classList.add(Ze),W.getBoolean("_testing")&&W.set("animated",!1);const Ft=it=>{var de;return null===(de=it.tagName)||void 0===de?void 0:de.startsWith("ION-")},_n=it=>["ios","md"].includes(it);(0,y.c)(it=>{for(;it;){const de=it.mode||it.getAttribute("mode");if(de){if(_n(de))return de;Ft(it)&&console.warn('Invalid ionic mode: "'+de+'", expected: "ios" or "md"')}it=it.parentElement}return Ze})}},500:(Wt,nt,B)=>{"use strict";B.r(nt),B.d(nt,{iosTransitionAnimation:()=>De,shadow:()=>he});var y=B(2200),f=B(9459);B(3457),B(9816);const Ce=Pe=>document.querySelector(`${Pe}.ion-cloned-element`),he=Pe=>Pe.shadowRoot||Pe,Me=Pe=>{const Ke="ION-TABS"===Pe.tagName?Pe:Pe.querySelector("ion-tabs"),pt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=Ke){const _e=Ke.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=_e?_e.querySelector(pt):null}return Pe.querySelector(pt)},we=(Pe,Ke)=>{const pt="ION-TABS"===Pe.tagName?Pe:Pe.querySelector("ion-tabs");let _e=[];if(null!=pt){const ye=pt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=ye&&(_e=ye.querySelectorAll("ion-buttons"))}else _e=Pe.querySelectorAll("ion-buttons");for(const ye of _e){const Oe=ye.closest("ion-header"),rt=Oe&&!Oe.classList.contains("header-collapse-condense-inactive"),Ye=ye.querySelector("ion-back-button"),Xe=ye.classList.contains("buttons-collapse");if(null!==Ye&&("start"===ye.slot||""===ye.slot)&&(Xe&&rt&&Ke||!Xe))return Ye}return null},ae=(Pe,Ke,pt,_e,ye,Oe)=>{const rt=Ke?`calc(100% - ${Oe.right+4}px)`:Oe.left-4+"px",Ye=Ke?"7px":"-7px",Xe=Ke?"-4px":"4px",Je=Ke?"-4px":"4px",ht=Ke?"right":"left",Te=Ke?"left":"right",Ie=pt?[{offset:0,opacity:1,transform:`translate3d(${Xe}, ${Oe.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ye}, ${ye.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Ye}, ${ye.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${Xe}, ${Oe.top-46}px, 0) scale(1)`}],ut=pt?[{offset:0,opacity:1,transform:`translate3d(${Je}, ${Oe.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Je}, ${Oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Je}, ${Oe.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Je}, ${Oe.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Je}, ${Oe.top-46}px, 0) scale(1)`}],Ze=(0,y.c)(),lt=(0,y.c)(),ot=Ce("ion-back-button"),Re=he(ot).querySelector(".button-text"),Se=he(ot).querySelector("ion-icon");ot.text=_e.text,ot.mode=_e.mode,ot.icon=_e.icon,ot.color=_e.color,ot.disabled=_e.disabled,ot.style.setProperty("display","block"),ot.style.setProperty("position","fixed"),lt.addElement(Se),Ze.addElement(Re),Ze.beforeStyles({"transform-origin":`${ht} center`}).beforeAddWrite(()=>{_e.style.setProperty("display","none"),ot.style.setProperty(ht,rt)}).afterAddWrite(()=>{_e.style.setProperty("display",""),ot.style.setProperty("display","none"),ot.style.removeProperty(ht)}).keyframes(Ie),lt.beforeStyles({"transform-origin":`${Te} center`}).keyframes(ut),Pe.addAnimation([Ze,lt])},ue=(Pe,Ke,pt,_e,ye,Oe)=>{const rt=Ke?`calc(100% - ${ye.right}px)`:`${ye.left}px`,Ye=Ke?"-18px":"18px",Xe=Ke?"right":"left",Te=pt?[{offset:0,opacity:0,transform:`translate3d(${Ye}, ${Oe.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${ye.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Ye}, ${Oe.top-4}px, 0) scale(0.5)`}],re=Ce("ion-title"),xe=(0,y.c)();re.innerText=_e.innerText,re.size=_e.size,re.color=_e.color,xe.addElement(re),xe.beforeStyles({"transform-origin":`${Xe} center`,height:"46px",display:"",position:"relative",[Xe]:rt}).beforeAddWrite(()=>{_e.style.setProperty("display","none")}).afterAddWrite(()=>{_e.style.setProperty("display",""),re.style.setProperty("display","none")}).keyframes(Te),Pe.addAnimation(xe)},De=(Pe,Ke)=>{var pt;try{const _e="cubic-bezier(0.32,0.72,0,1)",ye="opacity",Oe="transform",rt="0%",Xe="rtl"===Pe.ownerDocument.dir,Je=Xe?"-99.5%":"99.5%",ht=Xe?"33%":"-33%",Te=Ke.enteringEl,re=Ke.leavingEl,xe="back"===Ke.direction,Ie=Te.querySelector(":scope > ion-content"),He=Te.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),ze=Te.querySelectorAll(":scope > ion-header > ion-toolbar"),ut=(0,y.c)(),Ze=(0,y.c)();if(ut.addElement(Te).duration((null!==(pt=Ke.duration)&&void 0!==pt?pt:0)||540).easing(Ke.easing||_e).fill("both").beforeRemoveClass("ion-page-invisible"),re&&null!=Pe){const Se=(0,y.c)();Se.addElement(Pe),ut.addAnimation(Se)}if(Ie||0!==ze.length||0!==He.length?(Ze.addElement(Ie),Ze.addElement(He)):Ze.addElement(Te.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ut.addAnimation(Ze),xe?Ze.beforeClearStyles([ye]).fromTo("transform",`translateX(${ht})`,`translateX(${rt})`).fromTo(ye,.8,1):Ze.beforeClearStyles([ye]).fromTo("transform",`translateX(${Je})`,`translateX(${rt})`),Ie){const Se=he(Ie).querySelector(".transition-effect");if(Se){const Be=Se.querySelector(".transition-cover"),Qe=Se.querySelector(".transition-shadow"),gt=(0,y.c)(),Zt=(0,y.c)(),Ft=(0,y.c)();gt.addElement(Se).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Zt.addElement(Be).beforeClearStyles([ye]).fromTo(ye,0,.1),Ft.addElement(Qe).beforeClearStyles([ye]).fromTo(ye,.03,.7),gt.addAnimation([Zt,Ft]),Ze.addAnimation([gt])}}const lt=Te.querySelector("ion-header.header-collapse-condense"),{forward:ot,backward:Re}=((Pe,Ke,pt,_e,ye)=>{const Oe=we(_e,pt),rt=Me(ye),Ye=Me(_e),Xe=we(ye,pt),Je=null!==Oe&&null!==rt&&!pt,ht=null!==Ye&&null!==Xe&&pt;if(Je){const Te=rt.getBoundingClientRect(),re=Oe.getBoundingClientRect();ue(Pe,Ke,pt,rt,Te,re),ae(Pe,Ke,pt,Oe,Te,re)}else if(ht){const Te=Ye.getBoundingClientRect(),re=Xe.getBoundingClientRect();ue(Pe,Ke,pt,Ye,Te,re),ae(Pe,Ke,pt,Xe,Te,re)}return{forward:Je,backward:ht}})(ut,Xe,xe,Te,re);if(ze.forEach(Se=>{const Be=(0,y.c)();Be.addElement(Se),ut.addAnimation(Be);const Qe=(0,y.c)();Qe.addElement(Se.querySelector("ion-title"));const gt=(0,y.c)(),Zt=Array.from(Se.querySelectorAll("ion-buttons,[menuToggle]")),Ft=Se.closest("ion-header"),_n=null==Ft?void 0:Ft.classList.contains("header-collapse-condense-inactive");let it;it=Zt.filter(xe?Jt=>{const tn=Jt.classList.contains("buttons-collapse");return tn&&!_n||!tn}:Jt=>!Jt.classList.contains("buttons-collapse")),gt.addElement(it);const de=(0,y.c)();de.addElement(Se.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const It=(0,y.c)();It.addElement(he(Se).querySelector(".toolbar-background"));const Bt=(0,y.c)(),Ge=Se.querySelector("ion-back-button");if(Ge&&Bt.addElement(Ge),Be.addAnimation([Qe,gt,de,It,Bt]),gt.fromTo(ye,.01,1),de.fromTo(ye,.01,1),xe)_n||Qe.fromTo("transform",`translateX(${ht})`,`translateX(${rt})`).fromTo(ye,.01,1),de.fromTo("transform",`translateX(${ht})`,`translateX(${rt})`),Bt.fromTo(ye,.01,1);else if(lt||Qe.fromTo("transform",`translateX(${Je})`,`translateX(${rt})`).fromTo(ye,.01,1),de.fromTo("transform",`translateX(${Je})`,`translateX(${rt})`),It.beforeClearStyles([ye,"transform"]),(null==Ft?void 0:Ft.translucent)?It.fromTo("transform",Xe?"translateX(-100%)":"translateX(100%)","translateX(0px)"):It.fromTo(ye,.01,"var(--opacity)"),ot||Bt.fromTo(ye,.01,1),Ge&&!ot){const tn=(0,y.c)();tn.addElement(he(Ge).querySelector(".button-text")).fromTo("transform",Xe?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Be.addAnimation(tn)}}),re){const Se=(0,y.c)(),Be=re.querySelector(":scope > ion-content"),Qe=re.querySelectorAll(":scope > ion-header > ion-toolbar"),gt=re.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Be||0!==Qe.length||0!==gt.length?(Se.addElement(Be),Se.addElement(gt)):Se.addElement(re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ut.addAnimation(Se),xe){Se.beforeClearStyles([ye]).fromTo("transform",`translateX(${rt})`,Xe?"translateX(-100%)":"translateX(100%)");const Zt=(0,f.g)(re);ut.afterAddWrite(()=>{"normal"===ut.getDirection()&&Zt.style.setProperty("display","none")})}else Se.fromTo("transform",`translateX(${rt})`,`translateX(${ht})`).fromTo(ye,1,.8);if(Be){const Zt=he(Be).querySelector(".transition-effect");if(Zt){const Ft=Zt.querySelector(".transition-cover"),_n=Zt.querySelector(".transition-shadow"),it=(0,y.c)(),de=(0,y.c)(),It=(0,y.c)();it.addElement(Zt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),de.addElement(Ft).beforeClearStyles([ye]).fromTo(ye,.1,0),It.addElement(_n).beforeClearStyles([ye]).fromTo(ye,.7,.03),it.addAnimation([de,It]),Se.addAnimation([it])}}Qe.forEach(Zt=>{const Ft=(0,y.c)();Ft.addElement(Zt);const _n=(0,y.c)();_n.addElement(Zt.querySelector("ion-title"));const it=(0,y.c)(),de=Zt.querySelectorAll("ion-buttons,[menuToggle]"),It=Zt.closest("ion-header"),Bt=null==It?void 0:It.classList.contains("header-collapse-condense-inactive"),Ge=Array.from(de).filter(nr=>{const Wn=nr.classList.contains("buttons-collapse");return Wn&&!Bt||!Wn});it.addElement(Ge);const Jt=(0,y.c)(),tn=Zt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");tn.length>0&&Jt.addElement(tn);const Y=(0,y.c)();Y.addElement(he(Zt).querySelector(".toolbar-background"));const on=(0,y.c)(),Rn=Zt.querySelector("ion-back-button");if(Rn&&on.addElement(Rn),Ft.addAnimation([_n,it,Jt,on,Y]),ut.addAnimation(Ft),on.fromTo(ye,.99,0),it.fromTo(ye,.99,0),Jt.fromTo(ye,.99,0),xe){if(Bt||_n.fromTo("transform",`translateX(${rt})`,Xe?"translateX(-100%)":"translateX(100%)").fromTo(ye,.99,0),Jt.fromTo("transform",`translateX(${rt})`,Xe?"translateX(-100%)":"translateX(100%)"),Y.beforeClearStyles([ye,"transform"]),(null==It?void 0:It.translucent)?Y.fromTo("transform","translateX(0px)",Xe?"translateX(-100%)":"translateX(100%)"):Y.fromTo(ye,"var(--opacity)",0),Rn&&!Re){const Wn=(0,y.c)();Wn.addElement(he(Rn).querySelector(".button-text")).fromTo("transform",`translateX(${rt})`,`translateX(${(Xe?-124:124)+"px"})`),Ft.addAnimation(Wn)}}else Bt||_n.fromTo("transform",`translateX(${rt})`,`translateX(${ht})`).fromTo(ye,.99,0).afterClearStyles([Oe,ye]),Jt.fromTo("transform",`translateX(${rt})`,`translateX(${ht})`).afterClearStyles([Oe,ye]),on.afterClearStyles([ye]),_n.afterClearStyles([ye]),it.afterClearStyles([ye])})}return ut}catch(_e){throw _e}}},9892:(Wt,nt,B)=>{"use strict";B.r(nt),B.d(nt,{mdTransitionAnimation:()=>be});var y=B(2200),f=B(9459);B(3457),B(9816);const be=(Ce,he)=>{var Me,we,fe;const De="back"===he.direction,Ke=he.leavingEl,pt=(0,f.g)(he.enteringEl),_e=pt.querySelector("ion-toolbar"),ye=(0,y.c)();if(ye.addElement(pt).fill("both").beforeRemoveClass("ion-page-invisible"),De?ye.duration((null!==(Me=he.duration)&&void 0!==Me?Me:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):ye.duration((null!==(we=he.duration)&&void 0!==we?we:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),_e){const Oe=(0,y.c)();Oe.addElement(_e),ye.addAnimation(Oe)}if(Ke&&De){ye.duration((null!==(fe=he.duration)&&void 0!==fe?fe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const Oe=(0,y.c)();Oe.addElement((0,f.g)(Ke)).onFinish(rt=>{1===rt&&Oe.elements.length>0&&Oe.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),ye.addAnimation(Oe)}return ye}},6280:(Wt,nt,B)=>{"use strict";B.d(nt,{B:()=>gt,G:()=>Zt,a:()=>fe,b:()=>ae,c:()=>Ke,d:()=>Ft,e:()=>_n,f:()=>He,g:()=>ut,h:()=>ot,i:()=>Se,j:()=>_e,k:()=>Me,m:()=>De,n:()=>rt,o:()=>xe,s:()=>Qe});var y=B(5861),f=B(6406),W=B(5375),oe=B(7593),be=B(9397),Ce=B(1178);let he=0;const Me=new WeakMap,we=it=>({create:de=>ye(it,de),dismiss:(de,It,Bt)=>Te(document,de,It,it,Bt),getTop:()=>(0,y.Z)(function*(){return xe(document,it)})()}),fe=we("ion-alert"),ae=we("ion-action-sheet"),De=we("ion-modal"),Ke=we("ion-popover"),_e=it=>{typeof document<"u"&&ht(document);const de=he++;it.overlayIndex=de,it.hasAttribute("id")||(it.id=`ion-overlay-${de}`)},ye=(it,de)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(it).then(()=>{const It=document.createElement(it);return It.classList.add("overlay-hidden"),Object.assign(It,Object.assign(Object.assign({},de),{hasController:!0})),Ze(document).appendChild(It),new Promise(Bt=>(0,be.c)(It,Bt))}):Promise.resolve(),Oe='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',rt=(it,de)=>{let It=it.querySelector(Oe);const Bt=null==It?void 0:It.shadowRoot;Bt&&(It=Bt.querySelector(Oe)||It),It?(0,be.f)(It):de.focus()},Xe=(it,de)=>{const It=Array.from(it.querySelectorAll(Oe));let Bt=It.length>0?It[It.length-1]:null;const Ge=null==Bt?void 0:Bt.shadowRoot;Ge&&(Bt=Ge.querySelector(Oe)||Bt),Bt?Bt.focus():de.focus()},ht=it=>{0===he&&(he=1,it.addEventListener("focus",de=>{((it,de)=>{const It=xe(de,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),Bt=it.target;It&&Bt&&!It.classList.contains("ion-disable-focus-trap")&&(It.shadowRoot?(()=>{if(It.contains(Bt))It.lastFocus=Bt;else{const tn=It.lastFocus;rt(It,It),tn===de.activeElement&&Xe(It,It),It.lastFocus=de.activeElement}})():(()=>{if(It===Bt)It.lastFocus=void 0;else{const tn=(0,be.g)(It);if(!tn.contains(Bt))return;const Y=tn.querySelector(".ion-overlay-wrapper");if(!Y)return;if(Y.contains(Bt))It.lastFocus=Bt;else{const on=It.lastFocus;rt(Y,It),on===de.activeElement&&Xe(Y,It),It.lastFocus=de.activeElement}}})())})(de,it)},!0),it.addEventListener("ionBackButton",de=>{const It=xe(it);null!=It&&It.backdropDismiss&&de.detail.register(oe.OVERLAY_BACK_BUTTON_PRIORITY,()=>It.dismiss(void 0,gt))}),it.addEventListener("keydown",de=>{if("Escape"===de.key){const It=xe(it);null!=It&&It.backdropDismiss&&It.dismiss(void 0,gt)}}))},Te=(it,de,It,Bt,Ge)=>{const Jt=xe(it,Bt,Ge);return Jt?Jt.dismiss(de,It):Promise.reject("overlay does not exist")},xe=(it,de,It)=>{const Bt=((it,de)=>(void 0===de&&(de="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(it.querySelectorAll(de)).filter(It=>It.overlayIndex>0)))(it,de).filter(Ge=>!(it=>it.classList.contains("overlay-hidden"))(Ge));return void 0===It?Bt[Bt.length-1]:Bt.find(Ge=>Ge.id===It)},Ie=(it=!1)=>{const It=Ze(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");It&&(it?It.setAttribute("aria-hidden","true"):It.removeAttribute("aria-hidden"))},He=function(){var it=(0,y.Z)(function*(de,It,Bt,Ge,Jt){var tn,Y;if(de.presented)return;Ie(!0),de.presented=!0,de.willPresent.emit(),null===(tn=de.willPresentShorthand)||void 0===tn||tn.emit();const on=(0,f.b)(de),Rn=de.enterAnimation?de.enterAnimation:f.c.get(It,"ios"===on?Bt:Ge);(yield lt(de,Rn,de.el,Jt))&&(de.didPresent.emit(),null===(Y=de.didPresentShorthand)||void 0===Y||Y.emit()),"ION-TOAST"!==de.el.tagName&&ze(de.el),de.keyboardClose&&(null===document.activeElement||!de.el.contains(document.activeElement))&&de.el.focus()});return function(It,Bt,Ge,Jt,tn){return it.apply(this,arguments)}}(),ze=function(){var it=(0,y.Z)(function*(de){let It=document.activeElement;if(!It)return;const Bt=null==It?void 0:It.shadowRoot;Bt&&(It=Bt.querySelector(Oe)||It),yield de.onDidDismiss(),It.focus()});return function(It){return it.apply(this,arguments)}}(),ut=function(){var it=(0,y.Z)(function*(de,It,Bt,Ge,Jt,tn,Y){var on,Rn;if(!de.presented)return!1;Ie(!1),de.presented=!1;try{de.el.style.setProperty("pointer-events","none"),de.willDismiss.emit({data:It,role:Bt}),null===(on=de.willDismissShorthand)||void 0===on||on.emit({data:It,role:Bt});const nr=(0,f.b)(de),Wn=de.leaveAnimation?de.leaveAnimation:f.c.get(Ge,"ios"===nr?Jt:tn);Bt!==Zt&&(yield lt(de,Wn,de.el,Y)),de.didDismiss.emit({data:It,role:Bt}),null===(Rn=de.didDismissShorthand)||void 0===Rn||Rn.emit({data:It,role:Bt}),Me.delete(de),de.el.classList.add("overlay-hidden"),de.el.style.removeProperty("pointer-events"),void 0!==de.el.lastFocus&&(de.el.lastFocus=void 0)}catch(nr){console.error(nr)}return de.el.remove(),!0});return function(It,Bt,Ge,Jt,tn,Y,on){return it.apply(this,arguments)}}(),Ze=it=>it.querySelector("ion-app")||it.body,lt=function(){var it=(0,y.Z)(function*(de,It,Bt,Ge){Bt.classList.remove("overlay-hidden");const tn=It(de.el,Ge);(!de.animated||!f.c.getBoolean("animated",!0))&&tn.duration(0),de.keyboardClose&&tn.beforeAddWrite(()=>{const on=Bt.ownerDocument.activeElement;null!=on&&on.matches("input,ion-input, ion-textarea")&&on.blur()});const Y=Me.get(de)||[];return Me.set(de,[...Y,tn]),yield tn.play(),!0});return function(It,Bt,Ge,Jt){return it.apply(this,arguments)}}(),ot=(it,de)=>{let It;const Bt=new Promise(Ge=>It=Ge);return Re(it,de,Ge=>{It(Ge.detail)}),Bt},Re=(it,de,It)=>{const Bt=Ge=>{(0,be.b)(it,de,Bt),It(Ge)};(0,be.a)(it,de,Bt)},Se=it=>"cancel"===it||it===gt,Be=it=>it(),Qe=(it,de)=>{if("function"==typeof it)return f.c.get("_zoneGate",Be)(()=>{try{return it(de)}catch(Bt){throw Bt}})},gt="backdrop",Zt="gesture",Ft=it=>{let It,de=!1;const Bt=(0,W.C)(),Ge=(Y=!1)=>{if(It&&!Y)return{delegate:It,inline:de};const{el:on,hasController:Rn,delegate:nr}=it;return de=null!==on.parentNode&&!Rn,It=de?nr||Bt:nr,{inline:de,delegate:It}};return{attachViewToDom:function(){var Y=(0,y.Z)(function*(on){const{delegate:Rn}=Ge(!0);if(Rn)return yield Rn.attachViewToDom(it.el,on);const{hasController:nr}=it;if(nr&&void 0!==on)throw new Error("framework delegate is missing");return null});return function(Rn){return Y.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Y}=Ge();Y&&void 0!==it.el&&Y.removeViewFromDom(it.el.parentElement,it.el)}}},_n=()=>{let it;const de=()=>{it&&(it(),it=void 0)};return{addClickListener:(Bt,Ge)=>{de();const Jt=void 0!==Ge?document.getElementById(Ge):null;Jt?it=((Y,on)=>{const Rn=()=>{on.present()};return Y.addEventListener("click",Rn),()=>{Y.removeEventListener("click",Rn)}})(Jt,Bt):(0,Ce.p)(`A trigger element with the ID "${Ge}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,Bt)},removeClickListener:de}}},5093:(Wt,nt,B)=>{"use strict";var y=B(1481),f=B(4650),W=B(2435),oe=B(4709);let be=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"ion-app"),f._UZ(1,"ion-router-outlet"),f.qZA())},dependencies:[oe.dr,oe.jP]}),n})();const Ce=[{path:"",loadChildren:()=>B.e(174).then(B.bind(B,5652)).then(n=>n.TabsPageModule)},{path:"home",loadChildren:()=>B.e(2080).then(B.bind(B,2080)).then(n=>n.HomePageModule)},{path:"live-session/:selectedId",loadChildren:()=>B.e(685).then(B.bind(B,685)).then(n=>n.LiveSessionPageModule)},{path:"contacts",loadChildren:()=>Promise.all([B.e(8592),B.e(9803)]).then(B.bind(B,9803)).then(n=>n.ContactsPageModule)},{path:"sign-up",loadChildren:()=>B.e(6252).then(B.bind(B,6252)).then(n=>n.SignUpPageModule)}];let he=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[W.Bz.forRoot(Ce,{preloadingStrategy:W.wm}),W.Bz]}),n})();const Me_firebaseConfig={apiKey:"AIzaSyDHihjHGIy7ft2ZLy5sPxLWuFoUSO8f91o",authDomain:"studentapp-289c8.firebaseapp.com",databaseURL:"https://studentapp-289c8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"studentapp-289c8",storageBucket:"studentapp-289c8.appspot.com",messagingSenderId:"168959365364",appId:"1:168959365364:web:4f3ac4c945d1c8bb3c0ea1",measurementId:"G-C4PML4WLYN"};var we=B(2011),fe=B(7579),ae=B(9646),ue=B(9751),De=B(8996),Pe=B(6451),Ke=B(5363),pt=B(3900),_e=B(4004),ye=B(6063);class Oe extends fe.x{constructor(e=1/0,t=1/0,r=ye.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:l,_windowTime:c}=this;t||(r.push(e),!o&&r.push(l.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,l=o.slice();for(let c=0;c<l.length&&!e.closed;c+=r?1:2)e.next(l[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,l=(o?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!o){const c=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=c;E+=2)m=E;m&&r.splice(0,m+1)}}}var rt=B(3099);function Ye(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,rt.B)({connector:()=>new Oe(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var Xe=B(590),Je=B(576);function ht(n,e){return(0,Je.m)(e)?(0,pt.w)(()=>n,e):(0,pt.w)(()=>n)}var Te=B(9468),re=B(9300),xe=B(2122),Ie=B(6895);B(259);var Ge=B(5861),Jt=B(9681),tn=B(4859),Y=B(2090),on=B(1877);const Rn=new Map,nr={activated:!1,tokenObservers:[]},Wn={initialized:!1,enabled:!1};function Qn(n){return Rn.get(n)||Object.assign({},nr)}function _r(){return Wn}const ar="https://content-firebaseappcheck.googleapis.com/v1",mr="exchangeDebugToken",pn={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class hn{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ge.Z)(function*(){t.stop();try{t.pending=new Y.BH,yield function Nt(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Y.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const An=new Y.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jr(n,e){return kn.apply(this,arguments)}function kn(){return(kn=(0,Ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const Z=yield o.getHeartbeatsHeader();Z&&(r["X-Firebase-Client"]=Z)}const l={method:"POST",body:JSON.stringify(e),headers:r};let c,m;try{c=yield fetch(n,l)}catch(Z){throw An.create("fetch-network-error",{originalErrorMessage:null==Z?void 0:Z.message})}if(200!==c.status)throw An.create("fetch-status-error",{httpStatus:c.status});try{m=yield c.json()}catch(Z){throw An.create("fetch-parse-error",{originalErrorMessage:null==Z?void 0:Z.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw An.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const A=1e3*Number(E[1]),V=Date.now();return{token:m.token,expireTimeMillis:V+A,issuedAtTimeMillis:V}})).apply(this,arguments)}const St="firebase-app-check-database",nn=1,cn="firebase-app-check-store";let vn=null;function at(n,e){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,Ge.Z)(function*(n,e){const r=(yield function dr(){return vn||(vn=new Promise((n,e)=>{try{const t=indexedDB.open(St,nn);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(An.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(cn,{keyPath:"compositeKey"})}}catch(t){e(An.create("storage-open",{originalErrorMessage:null==t?void 0:t.message}))}}),vn)}()).transaction(cn,"readwrite"),l=r.objectStore(cn).put({compositeKey:n,value:e});return new Promise((c,m)=>{l.onsuccess=E=>{c()},r.onerror=E=>{var A;m(An.create("storage-set",{originalErrorMessage:null===(A=E.target.error)||void 0===A?void 0:A.message}))}})})).apply(this,arguments)}const st=new on.Yd("@firebase/app-check");function gn(n,e){return(0,Y.hl)()?function Ee(n,e){return at(function ge(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{st.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ti(){return yi.apply(this,arguments)}function yi(){return(yi=(0,Ge.Z)(function*(){const n=_r();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Si={error:"UNKNOWN_ERROR"};function rr(n){return Y.US.encodeString(JSON.stringify(n),!1)}function $i(n){return di.apply(this,arguments)}function di(){return(di=(0,Ge.Z)(function*(n,e=!1){const t=n.app;!function Yr(n){if(!Qn(n).activated)throw An.create("use-before-activation",{appName:n.name})}(t);const r=Qn(t);let l,o=r.token;if(o&&!vr(o)&&(r.token=void 0,o=void 0),!o){const E=yield r.cachedTokenPromise;E&&(vr(E)?o=E:yield gn(t,void 0))}if(!e&&o&&vr(o))return{token:o.token};let m,c=!1;if(function Br(){return _r().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jr(function zt(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${ar}/projects/${t}/apps/${r}:${mr}?key=${o}`,body:{debug_token:e}}}(t,yield Ti()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const E=yield r.exchangeTokenPromise;return yield gn(t,E),r.token=E,{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=yield Qn(t).exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?st.warn(E.message):st.error(E),l=E}return o?l?m=vr(o)?{token:o.token,internalError:l}:qi(l):(m={token:o.token},r.token=o,yield gn(t,o)):m=qi(l),c&&function Sr(n,e){const t=Qn(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function hr(n,e){const t=Qn(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Pn(n){const{app:e}=n,t=Qn(e);let r=t.tokenRefresher;r||(r=function Vn(n){const{app:e}=n;return new hn((0,Ge.Z)(function*(){let r;if(r=Qn(e).token?yield $i(n,!0):yield $i(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qn(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},pn.RETRIAL_MIN_WAIT,pn.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function vr(n){return n.expireTimeMillis-Date.now()>0}function qi(n){return{token:rr(Si),error:n}}class hs{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qn(this.app);for(const t of e)hr(this.app,t.next);return Promise.resolve()}}const li="app-check-internal";!function Yi(){(0,Jt._registerComponent)(new tn.wA("app-check",n=>function ni(n,e){return new hs(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(li).initialize()})),(0,Jt._registerComponent)(new tn.wA(li,n=>function Kt(n){return{getToken:e=>$i(n,e),addTokenListener:e=>function zn(n,e,t,r){const{app:o}=n,l=Qn(o);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:r,type:e}],l.token&&vr(l.token)){const m=l.token;Promise.resolve().then(()=>{t({token:m.token}),Pn(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Pn(n))}(n,"INTERNAL",e),removeTokenListener:e=>hr(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jt.registerVersion)("@firebase/app-check","0.6.4")}();class ii{constructor(){return(0,xe.vb)("app-check")}}typeof window<"u"&&window;var Zi=B(9260);const Do=new f.OlP("angularfire2.auth.use-emulator"),oo=new f.OlP("angularfire2.auth.settings"),zs=new f.OlP("angularfire2.auth.tenant-id"),Ei=new f.OlP("angularfire2.auth.langugage-code"),Ms=new f.OlP("angularfire2.auth.use-device-language"),Gs=new f.OlP("angularfire.auth.persistence"),ao=(n,e,t,r,o,l,c,m)=>(0,we.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,l&&E.useDeviceLanguage(),c)for(const[A,V]of Object.entries(c))E.settings[A]=V;return m&&E.setPersistence(m),E},[t,r,o,l,c,m]);let lo=(()=>{class n{constructor(t,r,o,l,c,m,E,A,V,Z,le,Ue){const ct=new fe.x,Pt=(0,ae.of)(void 0).pipe((0,Ke.Q)(c.outsideAngular),(0,pt.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9800)))),(0,_e.U)(()=>(0,we.on)(t,l,r)),(0,_e.U)(jt=>ao(jt,l,m,A,V,Z,E,le)),Ye({bufferSize:1,refCount:!1}));if((0,Ie.PM)(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ae.of)(null);else{Pt.pipe((0,Xe.P)()).subscribe();const Hn=Pt.pipe((0,pt.w)(Yn=>Yn.getRedirectResult().then(Er=>Er,()=>null)),xe.iC,Ye({bufferSize:1,refCount:!1})),or=Pt.pipe((0,pt.w)(Yn=>new ue.y(Er=>({unsubscribe:l.runOutsideAngular(()=>Yn.onAuthStateChanged(Rr=>Er.next(Rr),Rr=>Er.error(Rr),()=>Er.complete()))})))),Mn=Pt.pipe((0,pt.w)(Yn=>new ue.y(Er=>({unsubscribe:l.runOutsideAngular(()=>Yn.onIdTokenChanged(Rr=>Er.next(Rr),Rr=>Er.error(Rr),()=>Er.complete()))}))));this.authState=Hn.pipe(ht(or),(0,Te.R)(c.outsideAngular),(0,Ke.Q)(c.insideAngular)),this.user=Hn.pipe(ht(Mn),(0,Te.R)(c.outsideAngular),(0,Ke.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,pt.w)(Yn=>Yn?(0,De.D)(Yn.getIdToken()):(0,ae.of)(null))),this.idTokenResult=this.user.pipe((0,pt.w)(Yn=>Yn?(0,De.D)(Yn.getIdTokenResult()):(0,ae.of)(null))),this.credential=(0,Pe.T)(Hn,ct,this.authState.pipe((0,re.h)(Yn=>!Yn))).pipe((0,_e.U)(Yn=>null!=Yn&&Yn.user?Yn:null),(0,Te.R)(c.outsideAngular),(0,Ke.Q)(c.insideAngular))}return(0,we.pX)(this,Pt,l,{spy:{apply:(jt,Hn,or)=>{(jt.startsWith("signIn")||jt.startsWith("createUser"))&&or.then(Mn=>ct.next(Mn))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we.Dh),f.LFG(we.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xe.HU),f.LFG(Do,8),f.LFG(oo,8),f.LFG(zs,8),f.LFG(Ei,8),f.LFG(Ms,8),f.LFG(Gs,8),f.LFG(ii,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Da=(()=>{class n{constructor(){Zi.Z.registerVersion("angularfire",xe.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[lo]}),n})();var hi=B(4986),Ws=B(4482),Xi=B(5403),Ni=B(3942);const ji="firebasestorage.googleapis.com",Qi="storageBucket";class Fr extends Y.ZR{constructor(e,t,r=0){super(Es(e),`Firebase Storage: ${t} (${Es(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Es(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var En=(()=>{return(n=En||(En={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",En;var n})();function Es(n){return"storage/"+n}function Ks(){return new Fr(En.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function So(){return new Fr(En.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gs(){return new Fr(En.CANCELED,"User canceled the upload/download.")}function Xs(){return new Fr(En.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Sn(n){return new Fr(En.INVALID_ARGUMENT,n)}function ta(){return new Fr(En.APP_DELETED,"The Firebase app was deleted.")}function xo(n){return new Fr(En.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function I(n,e){return new Fr(En.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function j(n){throw new Fr(En.INTERNAL_ERROR,"Internal error: "+n)}class b{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=b.makeFromUrl(e,t)}catch{return new b(e,"")}if(""===r.path)return r;throw function Ji(n){return new Fr(En.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)",m=new RegExp("^gs://"+o+"(/(.*))?$","i");function A(Yn){Yn.path_=decodeURIComponent(Yn.path)}const Z=t.replace(/[.]/g,"\\."),Mn=[{regex:m,indices:{bucket:1,path:3},postModify:function l(Yn){"/"===Yn.path.charAt(Yn.path.length-1)&&(Yn.path_=Yn.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Z}/v[A-Za-z0-9_]+/b/${o}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:A},{regex:new RegExp(`^https?://${t===ji?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${o}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:A}];for(let Yn=0;Yn<Mn.length;Yn++){const Er=Mn[Yn],Rr=Er.regex.exec(e);if(Rr){let dl=Rr[Er.indices.path];dl||(dl=""),r=new b(Rr[Er.indices.bucket],dl),Er.postModify(r);break}}if(null==r)throw function Jr(n){return new Fr(En.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class U{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function et(n){return"string"==typeof n||n instanceof String}function kt(n){return Xn()&&n instanceof Blob}function Xn(){return typeof Blob<"u"&&!(0,Y.UG)()}function Pr(n,e,t,r){if(r<e)throw Sn(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Sn(`Invalid value for '${n}'. Expected ${t} or less.`)}function tr(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function es(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Kr=(()=>{return(n=Kr||(Kr={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",Kr;var n})();function ms(n,e){const t=n>=500&&n<600,o=-1!==[408,429].indexOf(n),l=-1!==e.indexOf(n);return t||o||l}class ha{constructor(e,t,r,o,l,c,m,E,A,V,Z,le=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=m,this.errorCallback_=E,this.timeout_=A,this.progressCallback_=V,this.connectionFactory_=Z,this.retry=le,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ue,ct)=>{this.resolve_=Ue,this.reject_=ct,this.start_()})}start_(){const t=(r,o)=>{const l=this.resolve_,c=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const E=this.callback_(m,m.getResponse());!function S(n){return void 0!==n}(E)?l():l(E)}catch(E){c(E)}else if(null!==m){const E=Ks();E.serverResponse=m.getErrorText(),c(this.errorCallback_?this.errorCallback_(m,E):E)}else c(o.canceled?this.appDelete_?ta():gs():So())};this.canceled_?t(0,new fa(!1,null,!0)):this.backoffId_=function se(n,e,t){let r=1,o=null,l=null,c=!1,m=0;function E(){return 2===m}let A=!1;function V(...jt){A||(A=!0,e.apply(null,jt))}function Z(jt){o=setTimeout(()=>{o=null,n(Ue,E())},jt)}function le(){l&&clearTimeout(l)}function Ue(jt,...Hn){if(A)return void le();if(jt)return le(),void V.call(null,jt,...Hn);if(E()||c)return le(),void V.call(null,jt,...Hn);let Mn;r<64&&(r*=2),1===m?(m=2,Mn=0):Mn=1e3*(r+Math.random()),Z(Mn)}let ct=!1;function Pt(jt){ct||(ct=!0,le(),!A&&(null!==o?(jt||(m=2),clearTimeout(o),Z(0)):jt||(m=1)))}return Z(0),l=setTimeout(()=>{c=!0,Pt(!0)},t),Pt}((r,o)=>{if(o)return void r(!1,new fa(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const c=m=>{null!==this.progressCallback_&&this.progressCallback_(m.loaded,m.lengthComputable?m.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const m=l.getErrorCode()===Kr.NO_ERROR,E=l.getStatus();if(!m||ms(E,this.additionalRetryCodes_)&&this.retry){const V=l.getErrorCode()===Kr.ABORT;return void r(!1,new fa(!1,null,V))}const A=-1!==this.successCodes_.indexOf(E);r(!0,new fa(A,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function O(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class fa{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Ll(...n){const e=function Va(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Xn())return new Blob(n);throw new Fr(En.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class mo{constructor(e,t){this.data=e,this.contentType=t||null}}function na(n,e){switch(n){case Fi.RAW:return new mo(Bo(e));case Fi.BASE64:case Fi.BASE64URL:return new mo(ja(n,e));case Fi.DATA_URL:return new mo(function ec(n){const e=new pl(n);return e.base64?ja(Fi.BASE64,e.rest):function Ju(n){let e;try{e=decodeURIComponent(n)}catch{throw I(Fi.DATA_URL,"Malformed data URL.")}return Bo(e)}(e.rest)}(e),function Bl(n){return new pl(n).contentType}(e))}throw Ks()}function Bo(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ja(n,e){switch(n){case Fi.BASE64:{const o=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(o||l)throw I(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Fi.BASE64URL:{const o=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(o||l)throw I(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function fl(n){if(typeof atob>"u")throw function ea(n){return new Fr(En.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(o){throw o.message.includes("polyfill")?o:I(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class pl{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw I(Fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Ha(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class yo{constructor(e,t){let r=0,o="";kt(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(kt(this.data_)){const o=function hl(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===o?null:new yo(o)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new yo(r,!0)}}static getBlob(...e){if(Xn()){const t=e.map(r=>r instanceof yo?r.data_:r);return new yo(Ll.apply(null,t))}{const t=e.map(c=>et(c)?na(Fi.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const o=new Uint8Array(r);let l=0;return t.forEach(c=>{for(let m=0;m<c.length;m++)o[l++]=c[m]}),new yo(o,!0)}}uploadData(){return this.data_}}function pa(n){let e;try{e=JSON.parse(n)}catch{return null}return function q(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Ai(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ga(n,e){return e}class cr{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||ga}}let co=null;function za(){if(co)return co;const n=[];n.push(new cr("bucket")),n.push(new cr("generation")),n.push(new cr("metageneration")),n.push(new cr("name","fullPath",!0));const t=new cr("name");t.xform=function e(l,c){return function xi(n){return!et(n)||n.length<2?n:Ai(n)}(c)},n.push(t);const o=new cr("size");return o.xform=function r(l,c){return void 0!==c?Number(c):c},n.push(o),n.push(new cr("timeCreated")),n.push(new cr("updated")),n.push(new cr("md5Hash",null,!0)),n.push(new cr("cacheControl",null,!0)),n.push(new cr("contentDisposition",null,!0)),n.push(new cr("contentEncoding",null,!0)),n.push(new cr("contentLanguage",null,!0)),n.push(new cr("contentType",null,!0)),n.push(new cr("metadata","customMetadata",!0)),co=n,co}function pu(n,e,t){const r=pa(e);return null===r?null:function fu(n,e,t){const r={type:"file"},o=t.length;for(let l=0;l<o;l++){const c=t[l];r[c.local]=c.xform(r,e[c.server])}return function Os(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new b(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function xa(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const P="prefixes",G="items";class me{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mt(n){if(!n)throw Ks()}function At(n,e){return function t(r,o){const l=pu(n,o,e);return mt(null!==l),l}}function Jn(n){return function e(t,r){let o;return o=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function fi(){return new Fr(En.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Zs(){return new Fr(En.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Jo(n){return new Fr(En.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Lo(n){return new Fr(En.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}}function fr(n){const e=Jn(n);return function t(r,o){let l=e(r,o);return 404===r.getStatus()&&(l=function Qr(n){return new Fr(En.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=o.serverResponse,l}}function qn(n,e,t){const o=tr(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new me(o,"GET",At(n,t),c);return m.errorHandler=fr(e),m}function Ii(n,e,t,r,o){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),o&&(l.maxResults=o);const m=tr(e.bucketOnlyServerUrl(),n.host,n._protocol),A=n.maxOperationRetryTime,V=new me(m,"GET",function yn(n,e){return function t(r,o){const l=function J(n,e,t){const r=pa(t);return null===r?null:function F(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[P])for(const o of t[P]){const l=o.replace(/\/$/,""),c=n._makeStorageReference(new b(e,l));r.prefixes.push(c)}if(t[G])for(const o of t[G]){const l=n._makeStorageReference(new b(e,o.name));r.items.push(l)}return r}(n,e,r)}(n,e,o);return mt(null!==l),l}}(n,e.bucket),A);return V.urlParams=l,V.errorHandler=Jn(e),V}function ts(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ks(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class ns{constructor(e,t,r,o){this.current=e,this.total=t,this.finalized=!!r,this.metadata=o||null}}function ma(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{mt(!1)}return mt(!!t&&-1!==(e||["active"]).indexOf(t)),t}const qa={STATE_CHANGED:"state_changed"},Mi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ya(n){switch(n){case"running":case"pausing":case"canceling":return Mi.RUNNING;case"paused":return Mi.PAUSED;case"success":return Mi.SUCCESS;case"canceled":return Mi.CANCELED;default:return Mi.ERROR}}class Mo{constructor(e,t,r){if(function x(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Vo(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Ya=null;class Ma{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Kr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Kr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o){if(this.sent_)throw j("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==o)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw j("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw j("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw j("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw j("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ra extends Ma{initXhr(){this.xhr_.responseType="text"}}function Is(){return Ya?Ya():new Ra}class jo{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=za(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=o=>{if(this._request=void 0,this._chunkMultiplier=1,o._codeEquals(En.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(ms(o.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();o=So()}this._error=o,this._transition("error")}},this._metadataErrorHandler=o=>{this._request=void 0,o._codeEquals(En.CANCELED)?this.completeTransitions_():(this._error=o,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((o,l)=>{this._resolve=o,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Ga(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),c=ts(e,r,o),m={name:c.fullPath},E=tr(l,n.host,n._protocol),V={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},Z=xa(c,t),ct=new me(E,"POST",function Ue(Pt){let jt;ma(Pt);try{jt=Pt.getResponseHeader("X-Goog-Upload-URL")}catch{mt(!1)}return mt(et(jt)),jt},n.maxUploadRetryTime);return ct.urlParams=m,ct.headers=V,ct.body=Z,ct.errorHandler=Jn(e),ct}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Is,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const o=function ml(n,e,t,r){const E=new me(t,"POST",function l(A){const V=ma(A,["active","final"]);let Z=null;try{Z=A.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mt(!1)}Z||mt(!1);const le=Number(Z);return mt(!isNaN(le)),new ns(le,r.size(),"final"===V)},n.maxUploadRetryTime);return E.headers={"X-Goog-Upload-Command":"query"},E.errorHandler=Jn(e),E}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(o,Is,t,r);this._request=l,l.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new ns(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((o,l)=>{let c;try{c=function Wa(n,e,t,r,o,l,c,m){const E=new ns(0,0);if(c?(E.current=c.current,E.total=c.total):(E.current=0,E.total=r.size()),r.size()!==E.total)throw function Rs(){return new Fr(En.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const A=E.total-E.current;let V=A;o>0&&(V=Math.min(V,o));const Z=E.current;let Ue="";Ue=0===V?"finalize":A===V?"upload, finalize":"upload";const ct={"X-Goog-Upload-Command":Ue,"X-Goog-Upload-Offset":`${E.current}`},Pt=r.slice(Z,Z+V);if(null===Pt)throw Xs();const Mn=new me(t,"POST",function jt(Yn,Er){const Rr=ma(Yn,["active","final"]),Fo=E.current+V,dl=r.size();let rS;return rS="final"===Rr?At(e,l)(Yn,Er):null,new ns(Fo,dl,"final"===Rr,rS)},e.maxUploadRetryTime);return Mn.headers=ct,Mn.body=Pt.uploadData(),Mn.progressCallback=m||null,Mn.errorHandler=Jn(n),Mn}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(E){return this._error=E,void this._transition("error")}const m=this._ref.storage._makeRequest(c,Is,o,l,!1);this._request=m,m.getPromise().then(E=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(E.current),E.finalized?(this._metadata=E.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=qn(this._ref.storage,this._ref._location,this._mappings),o=this._ref.storage._makeRequest(r,Is,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function ra(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},E=function m(){let Mn="";for(let Yn=0;Yn<2;Yn++)Mn+=Math.random().toString().slice(2);return Mn}();c["Content-Type"]="multipart/related; boundary="+E;const A=ts(e,r,o),V=xa(A,t),Ue=yo.getBlob("--"+E+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+V+"\r\n--"+E+"\r\nContent-Type: "+A.contentType+"\r\n\r\n",r,"\r\n--"+E+"--");if(null===Ue)throw Xs();const ct={name:A.fullPath},Pt=tr(l,n.host,n._protocol),Hn=n.maxUploadRetryTime,or=new me(Pt,"POST",At(n,t),Hn);return or.urlParams=ct,or.headers=c,or.body=Ue.uploadData(),or.errorHandler=Jn(e),or}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),o=this._ref.storage._makeRequest(r,Is,e,t);this._request=o,o.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gs(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ya(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,o){const l=new Mo(t||void 0,r||void 0,o||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ya(this._state)){case Mi.SUCCESS:Vo(this._resolve.bind(null,this.snapshot))();break;case Mi.CANCELED:case Mi.ERROR:Vo(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ya(this._state)){case Mi.RUNNING:case Mi.PAUSED:e.next&&Vo(e.next.bind(e,this.snapshot))();break;case Mi.SUCCESS:e.complete&&Vo(e.complete.bind(e))();break;default:e.error&&Vo(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class _a{constructor(e,t){this._service=e,this._location=t instanceof b?t:b.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _a(e,t)}get root(){const e=new b(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ai(this._location.path)}get storage(){return this._service}get parent(){const e=function Aa(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new b(this._location.bucket,e);return new _a(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw xo(e)}}function ws(n,e,t){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,Ge.Z)(function*(n,e,t){const o=yield tc(n,{pageToken:t});e.prefixes.push(...o.prefixes),e.items.push(...o.items),null!=o.nextPageToken&&(yield ws(n,e,o.nextPageToken))})).apply(this,arguments)}function tc(n,e){null!=e&&"number"==typeof e.maxResults&&Pr("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Ii(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Is)}function ho(n){n._throwIfRoot("getDownloadURL");const e=function Zr(n,e,t){const o=tr(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,m=new me(o,"GET",function yr(n,e){return function t(r,o){const l=pu(n,o,e);return mt(null!==l),function gl(n,e,t,r){const o=pa(e);if(null===o||!et(o.downloadTokens))return null;const l=o.downloadTokens;if(0===l.length)return null;const c=encodeURIComponent;return l.split(",").map(A=>{const Z=n.fullPath;return tr("/b/"+c(n.bucket)+"/o/"+c(Z),t,r)+es({alt:"media",token:A})})[0]}(l,o,n.host,n._protocol)}}(n,t),c);return m.errorHandler=fr(e),m}(n.storage,n._location,za());return n.storage.makeRequestWithTokens(e,Is).then(t=>{if(null===t)throw function uo(){return new Fr(En.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Js(n,e){const t=function hu(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new b(n._location.bucket,t);return new _a(n.storage,r)}function ia(n,e){if(n instanceof rc){const t=n;if(null==t._bucket)throw function Ao(){return new Fr(En.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qi+"' property when initializing the app?")}();const r=new _a(t,t._bucket);return null!=e?ia(r,e):r}return void 0!==e?Js(n,e):n}function Vl(n,e){if(e&&function Pa(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof rc)return function Za(n,e){return new _a(n,e)}(n,e);throw Sn("To use ref(service, url), the first argument must be a Storage instance.")}return ia(n,e)}function Xa(n,e){const t=null==e?void 0:e[Qi];return null==t?null:b.makeFromBucketSpec(t,n)}class rc{constructor(e,t,r,o,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._bucket=null,this._host=ji,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=o?b.makeFromBucketSpec(o,this._host):Xa(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?b.makeFromBucketSpec(this._url,e):Xa(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pr("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pr("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ge.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ge.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _a(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new U(ta());{const c=function Qs(n,e,t,r,o,l,c=!0){const m=es(n.urlParams),E=n.url+m,A=Object.assign({},n.headers);return function Ta(n,e){e&&(n["X-Firebase-GMPID"]=e)}(A,e),function pi(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(A,t),function Ps(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(A,l),function Sa(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(A,r),new ha(E,n.method,A,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,c)}(e,this._appId,r,o,t,this._firebaseVersion,l);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,Ge.Z)(function*(){const[o,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,o,l).getPromise()})()}}const Xr="@firebase/storage";function Ro(n,e){return Vl(n=(0,Y.m9)(n),e)}function sa(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new rc(t,r,o,e,Jt.SDK_VERSION)}!function jl(){(0,Jt._registerComponent)(new tn.wA("storage",sa,"PUBLIC").setMultipleInstances(!0)),(0,Jt.registerVersion)(Xr,"0.11.2",""),(0,Jt.registerVersion)(Xr,"0.11.2","esm2017")}();class wl{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ic{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wl(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wl(r,this,this._ref))},t)}on(e,t,r,o){let l;return t&&(l="function"==typeof t?c=>t(new wl(c,this,this._ref)):{next:t.next?c=>t.next(new wl(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,o||void 0)}}class sc{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Hi(e,this._service))}get items(){return this._delegate.items.map(e=>new Hi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hi{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Oa(n,e){return Js(n,e)}(this._delegate,e);return new Hi(t,this.storage)}get root(){return new Hi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Hi(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ic(function vu(n,e,t){return function Ka(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new jo(n,new yo(e),t)}(n=(0,Y.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fi.RAW,r){this._throwIfRoot("putString");const o=na(t,e),l=Object.assign({},r);return null==l.contentType&&null!=o.contentType&&(l.contentType=o.contentType),new ic(new jo(this._delegate,new yo(o.data,!0),l),this)}listAll(){return function ed(n){return function vl(n){const e={prefixes:[],items:[]};return ws(n,e).then(()=>e)}(n=(0,Y.m9)(n))}(this._delegate).then(e=>new sc(e,this.storage))}list(e){return function Jc(n,e){return tc(n=(0,Y.m9)(n),e)}(this._delegate,e||void 0).then(t=>new sc(t,this.storage))}getMetadata(){return function oh(n){return function va(n){n._throwIfRoot("getMetadata");const e=qn(n.storage,n._location,za());return n.storage.makeRequestWithTokens(e,Is)}(n=(0,Y.m9)(n))}(this._delegate)}updateMetadata(e){return function Ja(n,e){return function nc(n,e){n._throwIfRoot("updateMetadata");const t=function $o(n,e,t,r){const l=tr(e.fullServerUrl(),n.host,n._protocol),m=xa(t,r),A=n.maxOperationRetryTime,V=new me(l,"PATCH",At(n,r),A);return V.headers={"Content-Type":"application/json; charset=utf-8"},V.body=m,V.errorHandler=fr(e),V}(n.storage,n._location,e,za());return n.storage.makeRequestWithTokens(t,Is)}(n=(0,Y.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function gi(n){return ho(n=(0,Y.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function El(n){return function yu(n){n._throwIfRoot("deleteObject");const e=function Ar(n,e){const r=tr(e.fullServerUrl(),n.host,n._protocol),m=new me(r,"DELETE",function c(E,A){},n.maxOperationRetryTime);return m.successCodes=[200,204],m.errorHandler=fr(e),m}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Is)}(n=(0,Y.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw xo(e)}}class C{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(T(e))throw Sn("ref() expected a child path but got a URL, use refFromURL instead.");return new Hi(Ro(this._delegate,e),this)}refFromURL(e){if(!T(e))throw Sn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{b.makeFromUrl(e,this._delegate.host)}catch{throw Sn("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hi(Ro(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Ho(n,e,t,r={}){!function Of(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken="string"==typeof o?o:(0,Y.Sg)(o,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function T(n){return/^[A-Za-z]+:\/\//.test(n)}function K(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new C(t,r)}function _t(n){const e=function qe(n){return new ue.y(e=>{const t=c=>e.next(c);t(n.snapshot);const l=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){l()}}).pipe(function qs(n,e=hi.z){return(0,Ws.e)((t,r)=>{let o=null,l=null,c=null;const m=()=>{if(o){o.unsubscribe(),o=null;const A=l;l=null,r.next(A)}};function E(){const A=c+n,V=e.now();if(V<A)return o=this.schedule(void 0,A-V),void r.add(o);m()}t.subscribe((0,Xi.x)(r,A=>{l=A,c=e.now(),o||(o=e.schedule(E,n),r.add(o))},()=>{m(),r.complete()},void 0,()=>{l=o=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,_e.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Ht(n){return{getDownloadURL:()=>(0,ae.of)(void 0).pipe(xe.fc,(0,pt.w)(()=>n.getDownloadURL()),xe.iC),getMetadata:()=>(0,ae.of)(void 0).pipe(xe.fc,(0,pt.w)(()=>n.getMetadata()),xe.iC),delete:()=>(0,De.D)(n.delete()),child:e=>Ht(n.child(e)),updateMetadata:e=>(0,De.D)(n.updateMetadata(e)),put:(e,t)=>_t(n.put(e,t)),putString:(e,t,r)=>_t(n.putString(e,t,r)),list:e=>(0,De.D)(n.list(e)),listAll:()=>(0,De.D)(n.listAll())}}!function ne(n){const e={TaskState:Mi,TaskEvent:qa,StringFormat:Fi,Storage:C,Reference:Hi};n.INTERNAL.registerComponent(new tn.wA("storage-compat",K,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(Ni.Z);const dn=new f.OlP("angularfire2.storageBucket"),rn=new f.OlP("angularfire2.storage.maxUploadRetryTime"),xr=new f.OlP("angularfire2.storage.maxOperationRetryTime"),oi=new f.OlP("angularfire2.storage.use-emulator");let ys=(()=>{class n{constructor(t,r,o,l,c,m,E,A,V,Z){const le=(0,we.on)(t,c,r);this.storage=(0,we.cc)(`${le.name}.storage.${o}`,"AngularFireStorage",le.name,()=>{const Ue=c.runOutsideAngular(()=>le.storage(o||void 0)),ct=V;return ct&&Ue.useEmulator(...ct),E&&Ue.setMaxUploadRetryTime(E),A&&Ue.setMaxOperationRetryTime(A),Ue},[E,A])}ref(t){return Ht(this.storage.ref(t))}refFromURL(t){return Ht(this.storage.refFromURL(t))}upload(t,r,o){return Ht(this.storage.ref(t)).put(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we.Dh),f.LFG(we.xv,8),f.LFG(dn,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xe.HU),f.LFG(rn,8),f.LFG(xr,8),f.LFG(oi,8),f.LFG(ii,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),Q=(()=>{class n{constructor(){Zi.Z.registerVersion("angularfire",xe.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[ys],imports:[$]}),n})();var ve=B(8675);function tt(){return(0,Ws.e)((n,e)=>{let t,r=!1;n.subscribe((0,Xi.x)(e,o=>{const l=t;t=o,r&&e.next([l,o]),r=!0}))})}var Gt,dt=B(5026),Ut=B(1884),Dn=(B(9800),typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}),wn={},Kn=Kn||{},On=Dn||self;function zi(){}function el(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function bl(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var vo="closure_uid_"+(1e9*Math.random()>>>0),zo=0;function td(n,e,t){return n.call.apply(n.bind,arguments)}function kg(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Fs(n,e,t){return(Fs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?td:kg).apply(null,arguments)}function Ff(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function eo(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,l){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[o].apply(r,c)}}function Iu(){this.s=this.s,this.o=this.o}Iu.prototype.s=!1,Iu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Hl(n){Object.prototype.hasOwnProperty.call(n,vo)&&n[vo]||(n[vo]=++zo)}(this)},Iu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ng=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function nd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Fg(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(el(r)){const o=n.length||0,l=r.length||0;n.length=o+l;for(let c=0;c<l;c++)n[o+c]=r[c]}else n.push(r)}}function Po(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Po.prototype.h=function(){this.defaultPrevented=!0};var oc=function(){if(!On.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{On.addEventListener("test",zi,e),On.removeEventListener("test",zi,e)}catch{}return n}();function Bf(n){return/^[\s\xa0]*$/.test(n)}var n_=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Lg(n,e){return n<e?-1:n>e?1:0}function $f(){var n=On.navigator;return n&&(n=n.userAgent)?n:""}function Cl(n){return-1!=$f().indexOf(n)}function Uf(n){return Uf[" "](n),n}Uf[" "]=zi;var rd,n,Vf=Cl("Opera"),Dl=Cl("Trident")||Cl("MSIE"),jf=Cl("Edge"),ah=jf||Dl,ka=Cl("Gecko")&&!(-1!=$f().toLowerCase().indexOf("webkit")&&!Cl("Edge"))&&!(Cl("Trident")||Cl("MSIE"))&&!Cl("Edge"),r_=-1!=$f().toLowerCase().indexOf("webkit")&&!Cl("Edge");function $g(){var n=On.document;return n?n.documentMode:void 0}e:{var lh="",id=(n=$f(),ka?/rv:([^\);]+)(\)|;)/.exec(n):jf?/Edge\/([\d\.]+)/.exec(n):Dl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):r_?/WebKit\/(\S+)/.exec(n):Vf?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(id&&(lh=id?id[1]:""),Dl){var Hf=$g();if(null!=Hf&&Hf>parseFloat(lh)){rd=String(Hf);break e}}rd=lh}var i_={};var s_=On.document&&Dl&&($g()||parseInt(rd,10))||void 0;function Ls(n,e){if(Po.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(ka){e:{try{Uf(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Gf[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ls.X.h.call(this)}}eo(Ls,Po);var Gf={2:"touch",3:"pen",4:"mouse"};Ls.prototype.h=function(){Ls.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zl="closure_listenable_"+(1e6*Math.random()|0),Wf=0;function Oo(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++Wf,this.ba=this.ea=!1}function tl(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function sd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ac(n){const e={};for(const t in n)e[t]=n[t];return e}const qf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dh(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<qf.length;l++)t=qf[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function hh(n){this.src=n,this.g={},this.h=0}function fh(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=Ng(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(tl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Yf(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ba&&l.listener==e&&l.capture==!!t&&l.ha==r)return o}return-1}hh.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var c=Yf(n,e,r,o);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Oo(e,this.src,l,!!r,o)).ea=t,n.push(e)),e};var ph="closure_lm_"+(1e6*Math.random()|0),Kf={};function Zf(n,e,t,r,o){if(r&&r.once)return Gl(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)Zf(n,e[l],t,r,o);return null}return t=Wl(t),n&&n[zl]?n.N(e,t,bl(r)?!!r.capture:!!r,o):gh(n,e,t,!1,r,o)}function gh(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var c=bl(o)?!!o.capture:!!o,m=wu(n);if(m||(n[ph]=m=new hh(n)),(t=m.add(e,t,r,c,l)).proxy)return t;if(r=function Ug(){const e=Qf;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)oc||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(mh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Gl(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Gl(n,e[l],t,r,o);return null}return t=Wl(t),n&&n[zl]?n.O(e,t,bl(r)?!!r.capture:!!r,o):gh(n,e,t,!0,r,o)}function lc(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)lc(n,e[l],t,r,o);else r=bl(r)?!!r.capture:!!r,t=Wl(t),n&&n[zl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Yf(l=n.g[e],t,r,o))&&(tl(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=wu(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Yf(e,t,r,o)),(t=-1<n?e[n]:null)&&Xf(t))}function Xf(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[zl])fh(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(mh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wu(e))?(fh(t,n),0==t.h&&(t.src=null,e[ph]=null)):tl(n)}}}function mh(n){return n in Kf?Kf[n]:Kf[n]="on"+n}function Qf(n,e){if(n.ba)n=!0;else{e=new Ls(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Xf(n),n=t.call(r,e)}return n}function wu(n){return(n=n[ph])instanceof hh?n:null}var yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(n){return"function"==typeof n?n:(n[yh]||(n[yh]=function(e){return n.handleEvent(e)}),n[yh])}function rs(){Iu.call(this),this.i=new hh(this),this.P=this,this.I=null}function to(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Po(e,n);else if(e instanceof Po)e.target=e.target||n;else{var o=e;dh(e=new Po(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var c=e.g=t[l];o=_h(c,r,!0,e)&&o}if(o=_h(c=e.g=n,r,!0,e)&&o,o=_h(c,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=_h(c=e.g=t[l],r,!1,e)&&o}function _h(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var c=e[l];if(c&&!c.ba&&c.capture==t){var m=c.listener,E=c.ha||c.src;c.ea&&fh(n.i,c),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}eo(rs,Iu),rs.prototype[zl]=!0,rs.prototype.removeEventListener=function(n,e,t,r){lc(this,n,e,t,r)},rs.prototype.M=function(){if(rs.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)tl(t[r]);delete n.g[e],n.h--}}this.I=null},rs.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},rs.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var bu=On.JSON.stringify;function o_(){var n=cc;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var uc,Vg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new l_,n=>n.reset());class l_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function u_(n){On.setTimeout(()=>{throw n},0)}function Jf(n,e){uc||function ep(){var n=On.Promise.resolve(void 0);uc=function(){n.then(tp)}}(),vh||(uc(),vh=!0),cc.add(n,e)}var vh=!1,cc=new class a_{constructor(){this.h=this.g=null}add(e,t){const r=Vg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function tp(){for(var n;n=o_();){try{n.h.call(n.g)}catch(t){u_(t)}var e=Vg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vh=!1}function Eh(n,e){rs.call(this),this.h=n||1,this.g=e||On,this.j=Fs(this.lb,this),this.l=Date.now()}function Ih(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Cu(n,e,t){if("function"==typeof n)t&&(n=Fs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Fs(n.handleEvent,n)}return 2147483647<Number(e)?-1:On.setTimeout(n,e||0)}function ql(n){n.g=Cu(()=>{n.g=null,n.i&&(n.i=!1,ql(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}eo(Eh,rs),(Gt=Eh.prototype).ca=!1,Gt.R=null,Gt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),to(this,"tick"),this.ca&&(Ih(this),this.start()))}},Gt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Gt.M=function(){Eh.X.M.call(this),Ih(this),delete this.g};class jg extends Iu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ql(this)}M(){super.M(),this.g&&(On.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dc(n){Iu.call(this),this.h=n,this.g={}}eo(dc,Iu);var np=[];function c_(n,e,t,r){Array.isArray(t)||(t&&(np[0]=t.toString()),t=np);for(var o=0;o<t.length;o++){var l=Zf(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function od(n){sd(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xf(e)},n),n.g={}}function wh(){this.g=!0}function Du(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function zg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var c=1;c<o.length;c++)o[c]=""}}}return bu(t)}catch{return e}}(n,t)+(r?" "+r:"")})}dc.prototype.M=function(){dc.X.M.call(this),od(this)},dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wh.prototype.Aa=function(){this.g=!1},wh.prototype.info=function(){};var nl={},ad=null;function ld(){return ad=ad||new rs}function ud(n){Po.call(this,nl.Pa,n)}function Tl(n){const e=ld();to(e,new ud(e))}function fc(n,e){Po.call(this,nl.STAT_EVENT,n),this.stat=e}function bs(n){const e=ld();to(e,new fc(e,n))}function Gg(n,e){Po.call(this,nl.Qa,n),this.size=e}function Yl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return On.setTimeout(function(){n()},e)}nl.Pa="serverreachability",eo(ud,Po),nl.STAT_EVENT="statevent",eo(fc,Po),nl.Qa="timingevent",eo(Gg,Po);var Ch={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Go={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Tu(){}function rp(){}Tu.prototype.h=null;var Th,rl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Su(){Po.call(this,"d")}function Kl(){Po.call(this,"c")}function Sh(){}function Na(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new dc(this),this.O=sp,this.T=new Eh(n=ah?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ip}function ip(){this.i=null,this.g="",this.h=!1}eo(Su,Po),eo(Kl,Po),eo(Sh,Tu),Sh.prototype.g=function(){return new XMLHttpRequest},Sh.prototype.i=function(){return{}},Th=new Sh;var sp=45e3,op={},cd={};function Au(n,e,t){n.K=1,n.v=Tt(p(e)),n.s=t,n.P=!0,fo(n,null)}function fo(n,e){n.F=Date.now(),Wo(n),n.A=p(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Yg(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ip,n.g=wE(n.l,t?e:null,!n.s),0<n.N&&(n.L=new jg(Fs(n.La,n,n.g),n.N)),c_(n.S,n.g,"readystatechange",n.ib),e=n.H?ac(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Tl(),function Hg(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var c="",m=l.split("&"),E=0;E<m.length;E++){var A=m[E].split("=");if(1<A.length){var V=A[0];A=A[1];var Z=V.split("_");c=2<=Z.length&&"type"==Z[1]?c+(V+"=")+A+"&":c+(V+"=redacted&")}}else c=null;else c=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function dd(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function hd(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Wg(n,t),o==cd){4==e&&(n.o=4,bs(14),r=!1),Du(n.j,n.m,null,"[Incomplete Response]");break}if(o==op){n.o=4,bs(15),Du(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Du(n.j,n.m,o,null),pd(n,o)}dd(n)&&o!=cd&&o!=op&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),v_(e),e.K=!0,bs(11))):(Du(n.j,n.m,t,"[Invalid Chunked Response]"),xu(n),gc(n))}function Wg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?cd:(t=Number(e.substring(t,r)),isNaN(t)?op:(r+=1)+t>e.length?cd:(e=e.substr(r,t),n.C=r+t,e))}function Wo(n){n.V=Date.now()+n.O,pc(n,n.O)}function pc(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yl(Fs(n.gb,n),e)}function fd(n){n.B&&(On.clearTimeout(n.B),n.B=null)}function gc(n){0==n.l.G||n.I||vd(n.l,n)}function xu(n){fd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ih(n.T),od(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function pd(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||xh(t.h,n)))if(!n.J&&xh(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;fp(t),im(t)}hp(t),bs(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Yl(Fs(t.cb,t),6e3));if(1>=f_(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Ed(t,11)}else if((n.J||t.g==n)&&fp(t),!Bf(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let A=o[e];if(t.T=A[0],A=A[1],2==t.G)if("c"==A[0]){t.I=A[1],t.ka=A[2];const V=A[3];null!=V&&(t.ma=V,t.j.info("VER="+t.ma));const Z=A[4];null!=Z&&(t.Ca=Z,t.j.info("SVER="+t.Ca));const le=A[5];null!=le&&"number"==typeof le&&0<le&&(t.J=r=1.5*le,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Ue=n.g;if(Ue){const ct=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ct){var l=r.h;l.g||-1==ct.indexOf("spdy")&&-1==ct.indexOf("quic")&&-1==ct.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(p_(l,l.h),l.h=null))}if(r.D){const Pt=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Pt&&(r.za=Pt,Ve(r.F,r.D,Pt))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=am(r,r.H?r.ka:null,r.V),c.J){Qg(r.h,c);var m=c,E=r.J;E&&m.setTimeout(E),m.B&&(fd(m),Wo(m)),r.g=c}else __(r);0<t.i.length&&_d(t)}else"stop"!=A[0]&&"close"!=A[0]||Ed(t,7);else 3==t.G&&("stop"==A[0]||"close"==A[0]?"stop"==A[0]?Ed(t,7):Mu(t):"noop"!=A[0]&&t.l&&t.l.wa(A),t.A=0)}Tl()}catch{}}function qg(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(el(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function gd(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(el(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Zl(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(el(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}(Gt=Na.prototype).setTimeout=function(n){this.O=n},Gt.ib=function(n){n=n.target;const e=this.L;e&&3==vc(n)?e.l():this.La(n)},Gt.La=function(n){try{if(n==this.g)e:{const V=vc(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>V)&&(3!=V||ah||this.g&&(this.h.h||this.g.fa()||rm(this.g)))){this.I||4!=V||7==e||Tl(),fd(this);var t=this.g.aa();this.Y=t;t:if(dd(this)){var r=rm(this.g);n="";var o=r.length,l=4==vc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){xu(this),gc(this);var c="";break t}this.h.i=new On.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function hc(n,e,t,r,o,l,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+c})}(this.j,this.u,this.A,this.m,this.U,V,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bf(m)){var A=m;break t}}A=null}if(!(t=A)){this.i=!1,this.o=3,bs(12),xu(this),gc(this);break e}Du(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pd(this,t)}this.P?(hd(this,V,c),ah&&this.i&&3==V&&(c_(this.S,this.T,"tick",this.hb),this.T.start())):(Du(this.j,this.m,c,null),pd(this,c)),4==V&&xu(this),this.i&&!this.I&&(4==V?vd(this.l,this):(this.i=!1,Wo(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,bs(12)):(this.o=0,bs(13)),xu(this),gc(this)}}}catch{}},Gt.hb=function(){if(this.g){var n=vc(this.g),e=this.g.fa();this.C<e.length&&(fd(this),hd(this,n,e),this.i&&4!=n&&Wo(this))}},Gt.cancel=function(){this.I=!0,xu(this)},Gt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function bh(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Tl(),bs(17)),xu(this),this.o=2,gc(this)):pc(this,this.V-n)};var d_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function h(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof h){this.h=void 0!==e?e:n.h,D(this,n.j),this.s=n.s,this.g=n.g,z(this,n.m),this.l=n.l,e=n.i;var t=new mc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),ie(this,t),this.o=n.o}else n&&(t=String(n).match(d_))?(this.h=!!e,D(this,t[1]||"",!0),this.s=Qt(t[2]||""),this.g=Qt(t[3]||"",!0),z(this,t[4]),this.l=Qt(t[5]||"",!0),ie(this,t[6]||"",!0),this.o=Qt(t[7]||"")):(this.h=!!e,this.i=new mc(null,this.h))}function p(n){return new h(n)}function D(n,e,t){n.j=t?Qt(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function z(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ie(n,e,t){e instanceof mc?(n.i=e,function Ah(n,e){e&&!n.j&&(Xl(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(yd(this,r),Yg(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=fn(e,md)),n.i=new mc(e,n.h))}function Ve(n,e,t){n.i.set(e,t)}function Tt(n){return Ve(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qt(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function fn(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Fn),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Fn(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}h.prototype.toString=function(){var n=[],e=this.j;e&&n.push(fn(e,Nn,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(fn(e,Nn,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(fn(t,"/"==t.charAt(0)?Ea:Cs,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",fn(t,h_)),n.join("")};var Nn=/[#\/\?@]/g,Cs=/[#\?:]/g,Ea=/[#\?]/g,md=/[#\?@]/g,h_=/#/g;function mc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xl(n){n.g||(n.g=new Map,n.h=0,n.i&&function v(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function yd(n,e){Xl(n),e=_c(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function yc(n,e){return Xl(n),e=_c(n,e),n.g.has(e)}function Yg(n,e,t){yd(n,e),0<t.length&&(n.i=null,n.g.set(_c(n,e),nd(t)),n.h+=t.length)}function _c(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Zg(n){this.l=n||ap,n=On.PerformanceNavigationTiming?0<(n=On.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(On.g&&On.g.Ga&&On.g.Ga()&&On.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Gt=mc.prototype).add=function(n,e){Xl(this),this.i=null,n=_c(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Gt.forEach=function(n,e){Xl(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Gt.oa=function(){Xl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let l=0;l<o.length;l++)t.push(e[r])}return t},Gt.W=function(n){Xl(this);let e=[];if("string"==typeof n)yc(this,n)&&(e=e.concat(this.g.get(_c(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Gt.set=function(n,e){return Xl(this),this.i=null,yc(this,n=_c(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Gt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Gt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var o=l;""!==c[r]&&(o+="="+encodeURIComponent(String(c[r]))),n.push(o)}}return this.i=n.join("&")};var ap=10;function Xg(n){return!!n.h||!!n.g&&n.g.size>=n.j}function f_(n){return n.h?1:n.g?n.g.size:0}function xh(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function p_(n,e){n.g?n.g.add(e):n.h=e}function Qg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nd(n.i)}function Ds(){}function xb(){this.g=new Ds}function Mb(n,e,t){const r=t||"";try{qg(n,function(o,l){let c=o;bl(o)&&(c=bu(o)),e.push(r+l+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function lp(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function up(n){this.l=n.ac||null,this.j=n.jb||!1}function Jg(n,e){rs.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=g_,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zg.prototype.cancel=function(){if(this.i=dE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ds.prototype.stringify=function(n){return On.JSON.stringify(n,void 0)},Ds.prototype.parse=function(n){return On.JSON.parse(n,void 0)},eo(up,Tu),up.prototype.g=function(){return new Jg(this.l,this.j)},up.prototype.i=function(n){return function(){return n}}({}),eo(Jg,rs);var g_=0;function fE(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Mh(n){n.readyState=4,n.l=null,n.j=null,n.A=null,em(n)}function em(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Gt=Jg.prototype).open=function(n,e){if(this.readyState!=g_)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,em(this)},Gt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||On).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Gt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mh(this)),this.readyState=g_},Gt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,em(this)),this.g&&(this.readyState=3,em(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof On.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fE(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Gt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Mh(this):em(this),3==this.readyState&&fE(this)}},Gt.Va=function(n){this.g&&(this.response=this.responseText=n,Mh(this))},Gt.Ua=function(n){this.g&&(this.response=n,Mh(this))},Gt.ga=function(){this.g&&Mh(this)},Gt.setRequestHeader=function(n,e){this.v.append(n,e)},Gt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Gt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iS=On.JSON.parse;function Li(n){rs.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tm,this.K=this.L=!1}eo(Li,rs);var tm="",pE=/^https?$/i,gE=["POST","PUT"];function Rb(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,yE(n),cp(n)}function yE(n){n.D||(n.D=!0,to(n,"complete"),to(n,"error"))}function m_(n){if(n.h&&typeof Kn<"u"&&(!n.C[1]||4!=vc(n)||2!=n.aa()))if(n.v&&4==vc(n))Cu(n.Ha,0,n);else if(to(n,"readystatechange"),4==vc(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(d_)[1]||null;if(!o&&On.self&&On.self.location){var l=On.self.location.protocol;o=l.substr(0,l.length-1)}r=!pE.test(o?o.toLowerCase():"")}t=r}if(t)to(n,"complete"),to(n,"success");else{n.m=6;try{var c=2<vc(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.aa()+"]",yE(n)}}finally{cp(n)}}}function cp(n,e){if(n.g){nm(n);const t=n.g,r=n.C[0]?zi:null;n.g=null,n.C=null,e||to(n,"ready");try{t.onreadystatechange=r}catch{}}}function nm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(On.clearTimeout(n.A),n.A=null)}function vc(n){return n.g?n.g.readyState:0}function rm(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function _E(n){let e="";return sd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function dp(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=_E(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Ve(n,e,t))}function Rh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function y_(n){this.Ca=0,this.i=[],this.j=new wh,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Rh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Rh("baseRetryDelayMs",5e3,n),this.bb=Rh("retryDelaySeedMs",1e4,n),this.$a=Rh("forwardChannelMaxRetries",2,n),this.ta=Rh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Zg(n&&n.concurrentRequestLimit),this.Fa=new xb,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mu(n){if(sm(n),3==n.G){var e=n.U++,t=p(n.F);Ve(t,"SID",n.I),Ve(t,"RID",e),Ve(t,"TYPE","terminate"),Ec(n,t),(e=new Na(n,n.j,e,void 0)).K=2,e.v=Tt(p(t)),t=!1,On.navigator&&On.navigator.sendBeacon&&(t=On.navigator.sendBeacon(e.v.toString(),"")),!t&&On.Image&&((new Image).src=e.v,t=!0),t||(e.g=wE(e.l,null),e.g.da(e.v)),e.F=Date.now(),Wo(e)}IE(n)}function im(n){n.g&&(v_(n),n.g.cancel(),n.g=null)}function sm(n){im(n),n.u&&(On.clearTimeout(n.u),n.u=null),fp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&On.clearTimeout(n.m),n.m=null)}function _d(n){Xg(n.h)||n.m||(n.m=!0,Jf(n.Ja,n),n.C=0)}function om(n,e){var t;t=e?e.m:n.U++;const r=p(n.F);Ve(r,"SID",n.I),Ve(r,"RID",t),Ve(r,"AID",n.T),Ec(n,r),n.o&&n.s&&dp(r,n.o,n.s),t=new Na(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Ic(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),p_(n.h,t),Au(t,r,e)}function Ec(n,e){n.ia&&sd(n.ia,function(t,r){Ve(e,r,t)}),n.l&&qg({},function(t,r){Ve(e,r,t)})}function Ic(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Fs(n.l.Ra,n.l,n):null;e:{var o=n.i;let l=-1;for(;;){const c=["count="+t];-1==l?0<t?(l=o[0].h,c.push("ofs="+l)):l=0:c.push("ofs="+l);let m=!0;for(let E=0;E<t;E++){let A=o[E].h;const V=o[E].g;if(A-=l,0>A)l=Math.max(0,o[E].h-100),m=!1;else try{Mb(V,c,"req"+A+"_")}catch{r&&r(V)}}if(m){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function __(n){n.g||n.u||(n.Z=1,Jf(n.Ia,n),n.A=0)}function hp(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Yl(Fs(n.Ia,n),EE(n,n.A)),n.A++,0))}function v_(n){null!=n.B&&(On.clearTimeout(n.B),n.B=null)}function vE(n){n.g=new Na(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=p(n.sa);Ve(e,"RID","rpc"),Ve(e,"SID",n.I),Ve(e,"CI",n.L?"0":"1"),Ve(e,"AID",n.T),Ve(e,"TYPE","xmlhttp"),Ec(n,e),n.o&&n.s&&dp(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Tt(p(e)),t.s=null,t.P=!0,fo(t,n)}function fp(n){null!=n.v&&(On.clearTimeout(n.v),n.v=null)}function vd(n,e){var t=null;if(n.g==e){fp(n),v_(n),n.g=null;var r=2}else{if(!xh(n.h,e))return;t=e.D,Qg(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;to(r=ld(),new Gg(r,t)),_d(n)}else __(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Pb(n,e){return!(f_(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Yl(Fs(n.Ja,n,e),EE(n,n.C)),n.C++,0)))}(n,e)||2==r&&hp(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Ed(n,5);break;case 4:Ed(n,10);break;case 3:Ed(n,6);break;default:Ed(n,2)}}function EE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Ed(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Fs(n.kb,n);t||(t=new h("//www.google.com/images/cleardot.gif"),On.location&&"http"==On.location.protocol||D(t,"https"),Tt(t)),function hE(n,e){const t=new wh;if(On.Image){const r=new Image;r.onload=Ff(lp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ff(lp,t,r,"TestLoadImage: error",!1,e),r.onabort=Ff(lp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ff(lp,t,r,"TestLoadImage: timeout",!1,e),On.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bs(2);n.G=0,n.l&&n.l.va(e),IE(n),sm(n)}function IE(n){if(n.G=0,n.la=[],n.l){const e=dE(n.h);(0!=e.length||0!=n.i.length)&&(Fg(n.la,e),Fg(n.la,n.i),n.h.i.length=0,nd(n.i),n.i.length=0),n.l.ua()}}function am(n,e,t){var r=t instanceof h?p(t):new h(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),z(r,r.m);else{var o=On.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var l=new h(null,void 0);r&&D(l,r),e&&(l.g=e),o&&z(l,o),t&&(l.l=t),r=l}return e=n.za,(t=n.D)&&e&&Ve(r,t,e),Ve(r,"VER",n.ma),Ec(n,r),r}function wE(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Li(t&&n.Da&&!n.ra?new up({jb:!0}):n.ra)).Ka(n.H),e}function E_(){}function lm(){if(Dl&&!(10<=Number(s_)))throw Error("Environmental error: no available transport.")}function Ia(n,e){rs.call(this),this.g=new y_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Bf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ql(this)}function Ob(n){Su.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bE(){Kl.call(this),this.status=1}function Ql(n){this.g=n}(Gt=Li.prototype).Ka=function(n){this.L=n},Gt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Th.g(),this.C=function Dh(n){return n.h||(n.h=n.i())}(this.u?this.u:Th),this.g.onreadystatechange=Fs(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Rb(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),o=On.FormData&&n instanceof On.FormData,!(0<=Ng(gE,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,c]of t)this.g.setRequestHeader(l,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nm(this),0<this.B&&((this.K=function mE(n){return Dl&&function zf(){return function Bg(n){var e=i_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=n_(String(rd)).split("."),t=n_("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",l=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Lg(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Lg(0==o[2].length,0==l[2].length)||Lg(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fs(this.qa,this)):this.A=Cu(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Rb(this,l)}},Gt.qa=function(){typeof Kn<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,to(this,"timeout"),this.abort(8))},Gt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,to(this,"complete"),to(this,"abort"),cp(this))},Gt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cp(this,!0)),Li.X.M.call(this)},Gt.Ha=function(){this.s||(this.F||this.v||this.l?m_(this):this.fb())},Gt.fb=function(){m_(this)},Gt.aa=function(){try{return 2<vc(this)?this.g.status:-1}catch{return-1}},Gt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Gt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iS(e)}},Gt.Ea=function(){return this.m},Gt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Gt=y_.prototype).ma=8,Gt.G=1,Gt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Na(this,this.j,n,void 0);let l=this.s;if(this.S&&(l?(l=ac(l),dh(l,this.S)):l=this.S),null!==this.o||this.N||(o.H=l,l=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ic(this,o,e),Ve(t=p(this.F),"RID",n),Ve(t,"CVER",22),this.D&&Ve(t,"X-HTTP-Session-Id",this.D),Ec(this,t),l&&(this.N?e="headers="+encodeURIComponent(String(_E(l)))+"&"+e:this.o&&dp(t,this.o,l)),p_(this.h,o),this.Ya&&Ve(t,"TYPE","init"),this.O?(Ve(t,"$req",e),Ve(t,"SID","null"),o.Z=!0,Au(o,t,null)):Au(o,t,e),this.G=2}}else 3==this.G&&(n?om(this,n):0==this.i.length||Xg(this.h)||om(this))},Gt.Ia=function(){if(this.u=null,vE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Yl(Fs(this.eb,this),n)}},Gt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bs(10),im(this),vE(this))},Gt.cb=function(){null!=this.v&&(this.v=null,im(this),hp(this),bs(19))},Gt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bs(2)):(this.j.info("Failed to ping google.com"),bs(1))},(Gt=E_.prototype).xa=function(){},Gt.wa=function(){},Gt.va=function(){},Gt.ua=function(){},Gt.Ra=function(){},lm.prototype.g=function(n,e){return new Ia(n,e)},eo(Ia,rs),Ia.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bs(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=am(n,null,n.V),_d(n)},Ia.prototype.close=function(){Mu(this.g)},Ia.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=bu(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&_d(e)},Ia.prototype.M=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,Ia.X.M.call(this)},eo(Ob,Su),eo(bE,Kl),eo(Ql,E_),Ql.prototype.xa=function(){to(this.g,"a")},Ql.prototype.wa=function(n){to(this.g,new Ob(n))},Ql.prototype.va=function(n){to(this.g,new bE)},Ql.prototype.ua=function(){to(this.g,"b")},lm.prototype.createWebChannel=lm.prototype.g,Ia.prototype.send=Ia.prototype.u,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,Ch.NO_ERROR=0,Ch.TIMEOUT=8,Ch.HTTP_ERROR=6,Go.COMPLETE="complete",rp.EventType=rl,rl.OPEN="a",rl.CLOSE="b",rl.ERROR="c",rl.MESSAGE="d",rs.prototype.listen=rs.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.Oa,Li.prototype.getLastErrorCode=Li.prototype.Ea,Li.prototype.getStatus=Li.prototype.aa,Li.prototype.getResponseJson=Li.prototype.Sa,Li.prototype.getResponseText=Li.prototype.fa,Li.prototype.send=Li.prototype.da,Li.prototype.setWithCredentials=Li.prototype.Ka;var kb=wn.createWebChannelTransport=function(){return new lm},Ph=wn.getStatEventTarget=function(){return ld()},Id=wn.ErrorCode=Ch,Nb=wn.EventType=Go,CE=wn.Event=nl,DE=wn.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Fb=wn.FetchXmlHttpFactory=up,um=wn.WebChannel=rp,TE=wn.XhrIo=Li;const I_="@firebase/firestore";class no{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}no.UNAUTHENTICATED=new no(null),no.GOOGLE_CREDENTIALS=new no("google-credentials-uid"),no.FIRST_PARTY=new no("first-party-uid"),no.MOCK_USER=new no("mock-user");let wc="9.19.0";const bc=new on.Yd("@firebase/firestore");function pp(){return bc.logLevel}function qt(n,...e){if(bc.logLevel<=on.in.DEBUG){const t=e.map(w_);bc.debug(`Firestore (${wc}): ${n}`,...t)}}function Bs(n,...e){if(bc.logLevel<=on.in.ERROR){const t=e.map(w_);bc.error(`Firestore (${wc}): ${n}`,...t)}}function Jl(n,...e){if(bc.logLevel<=on.in.WARN){const t=e.map(w_);bc.warn(`Firestore (${wc}): ${n}`,...t)}}function w_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function bn(n="Unexpected state"){const e=`FIRESTORE (${wc}) INTERNAL ASSERTION FAILED: `+n;throw Bs(e),new Error(e)}function $n(n,e){n||bn()}function sn(n,e){return n}const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $t extends Y.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class po{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Bb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(no.UNAUTHENTICATED))}shutdown(){}}class SE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class oS{constructor(e){this.t=e,this.currentUser=no.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=A=>this.i!==o?(o=this.i,t(A)):Promise.resolve();let c=new po;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new po,e.enqueueRetryable(()=>l(this.currentUser))};const m=()=>{const A=c;e.enqueueRetryable((0,Ge.Z)(function*(){yield A.promise,yield l(r.currentUser)}))},E=A=>{qt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=A,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(A=>E(A)),setTimeout(()=>{if(!this.auth){const A=this.t.getImmediate({optional:!0});A?E(A):(qt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new po)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(qt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($n("string"==typeof r.accessToken),new Bb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $n(null===e||"string"==typeof e),new no(e)}}class AE{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=no.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class xE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new AE(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(no.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ME{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RE{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=l=>{null!=l.error&&qt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.T;return this.T=l.token,qt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{qt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?o(l):qt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($n("string"==typeof t.token),this.T=t.token,new ME(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function $b(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class il{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=$b(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function pr(n,e){return n<e?-1:n>e?1:0}function wd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function PE(n){return n+"\0"}class is{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $t(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $t(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $t(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $t(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return is.fromMillis(Date.now())}static fromDate(e){return is.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new is(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gn(e)}static min(){return new Gn(new is(0,0))}static max(){return new Gn(new is(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class mp{constructor(e,t,r){void 0===t?t=0:t>e.length&&bn(),void 0===r?r=e.length-t:r>e.length-t&&bn(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),c=t.get(o);if(l<c)return-1;if(l>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $r extends mp{construct(e,t,r){return new $r(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new $t(Et.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new $r(t)}static emptyPath(){return new $r([])}}const Ub=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ts extends mp{construct(e,t,r){return new Ts(e,t,r)}static isValidIdentifier(e){return Ub.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ts.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ts(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new $t(Et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new $t(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new $t(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(c=!c,o++):"."!==m||c?(r+=m,o++):(l(),o++)}if(l(),c)throw new $t(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ts(t)}static emptyPath(){return new Ts([])}}class un{constructor(e){this.path=e}static fromPath(e){return new un($r.fromString(e))}static fromName(e){return new un($r.fromString(e).popFirst(5))}static empty(){return new un($r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new un(new $r(e.slice()))}}class ir{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function cm(n){return n.fields.find(e=>2===e.kind)}function Cc(n){return n.fields.filter(e=>2!==e.kind)}ir.UNKNOWN_ID=-1;class dm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Oh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Oh(0,Fa.min())}}function kE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Gn.fromTimestamp(1e9===r?new is(t+1,0):new is(t,r));return new Fa(o,un.empty(),e)}function b_(n){return new Fa(n.readTime,n.key,-1)}class Fa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fa(Gn.min(),un.empty(),-1)}static max(){return new Fa(Gn.max(),un.empty(),-1)}}function C_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=un.comparator(n.documentKey,e.documentKey),0!==t?t:pr(n.largestBatchId,e.largestBatchId))}const jb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ru(n){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,Ge.Z)(function*(n){if(n.code!==Et.FAILED_PRECONDITION||n.message!==jb)throw n;qt("LocalStore","Unexpectedly lost primary lease")}),Pu.apply(this,arguments)}class wt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&bn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wt((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof wt?t:wt.resolve(t)}catch(t){return wt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):wt.reject(t)}static resolve(e){return new wt((t,r)=>{t(e)})}static reject(e){return new wt((t,r)=>{r(e)})}static waitFor(e){return new wt((t,r)=>{let o=0,l=0,c=!1;e.forEach(m=>{++o,m.next(()=>{++l,c&&l===o&&t()},E=>r(E))}),c=!0,l===o&&t()})}static or(e){let t=wt.resolve(!1);for(const r of e)t=t.next(o=>o?wt.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new wt((r,o)=>{const l=e.length,c=new Array(l);let m=0;for(let E=0;E<l;E++){const A=E;t(e[A]).next(V=>{c[A]=V,++m,m===l&&r(c)},V=>o(V))}})}static doWhile(e,t){return new wt((r,o)=>{const l=()=>{!0===e()?t().next(()=>{l()},o):r()};l()})}}class kh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new po,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new hm(e,t.error)):this.R.resolve()},this.transaction.onerror=r=>{const o=NE(r.target.error);this.R.reject(new hm(e,o))}}static open(e,t,r,o){try{return new kh(t,e.transaction(o,r))}catch(l){throw new hm(t,l)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(qt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new lS(t)}}class La{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===La.S((0,Y.z$)())&&Bs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qt("SimpleDb","Removing database:",e),Cd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Y.hl)())return!1;if(La.C())return!0;const e=(0,Y.z$)(),t=La.S(e),r=0<t&&t<10,o=La.N(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,Ge.Z)(function*(){return t.db||(qt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=c=>{r(c.target.result)},l.onblocked=()=>{o(new hm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=c=>{const m=c.target.error;o("VersionError"===m.name?new $t(Et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new $t(Et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new hm(e,m))},l.onupgradeneeded=c=>{qt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.M(c.target.result,l.transaction,c.oldVersion,t.version).next(()=>{qt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,Ge.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{l.db=yield l.$(e);const E=kh.open(l.db,e,c?"readonly":"readwrite",r),A=o(E).next(V=>(E.P(),V)).catch(V=>(E.abort(V),wt.reject(V))).toPromise();return A.catch(()=>{}),yield E.v,A}catch(E){const A=E,V="FirebaseError"!==A.name&&m<3;if(qt("SimpleDb","Transaction failed with error:",A.message,"Retrying:",V),l.close(),!V)return Promise.reject(A)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Hb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Cd(this.L.delete())}}class hm extends $t{constructor(e,t){super(Et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function bd(n){return"IndexedDbTransactionError"===n.name}class lS{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(qt("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(qt("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cd(r)}add(e){return qt("SimpleDb","ADD",this.store.name,e,e),Cd(this.store.add(e))}get(e){return Cd(this.store.get(e)).next(t=>(void 0===t&&(t=null),qt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return qt("SimpleDb","DELETE",this.store.name,e),Cd(this.store.delete(e))}count(){return qt("SimpleDb","COUNT",this.store.name),Cd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),l=[];return this.W(o,(c,m)=>{l.push(m)}).next(()=>l)}{const o=this.store.getAll(r.range);return new wt((l,c)=>{o.onerror=m=>{c(m.target.error)},o.onsuccess=m=>{l(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new wt((o,l)=>{r.onerror=c=>{l(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}J(e,t){qt("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const o=this.cursor(r);return this.W(o,(l,c,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.W(o,t)}X(e){const t=this.cursor({});return new wt((r,o)=>{t.onerror=l=>{const c=NE(l.target.error);o(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}W(e,t){const r=[];return new wt((o,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const E=new Hb(m),A=t(m.primaryKey,m.value,E);if(A instanceof wt){const V=A.catch(Z=>(E.done(),wt.reject(Z)));r.push(V)}E.isDone?o():null===E.K?m.continue():m.continue(E.K)}}).next(()=>wt.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cd(n){return new wt((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=NE(r.target.error);t(o)}})}let T_=!1;function NE(n){const e=La.S((0,Y.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new $t("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return T_||(T_=!0,setTimeout(()=>{throw r},0)),r}}return n}class zb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;qt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ge.Z)(function*(){t.task=null;try{qt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){bd(r)?qt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ru(r)}yield t.et(6e4)}))}}class Nh{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let o=t,l=!0;return wt.doWhile(()=>!0===l&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return qt("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,o).next(m=>{o-=m,r.add(c)});l=!1})).next(()=>t-o)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(o,l)).next(m=>(qt("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((o,l)=>{const c=b_(l);C_(c,r)>0&&(r=c)}),new Fa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ba=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ot(o),this.ut=o=>r.writeSequenceNumber(o))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Fh(n){return null==n}function Dc(n){return 0===n&&1/n==-1/0}function FE(n){return"number"==typeof n&&Number.isInteger(n)&&!Dc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function qo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LE(e)),e=Gb(n.get(t),e);return LE(e)}function Gb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function LE(n){return n+"\x01\x01"}function eu(n){const e=n.length;if($n(e>=2),2===e)return $n("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),$r.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const c=n.indexOf("\x01",l);switch((c<0||c>t)&&bn(),n.charAt(c+1)){case"\x01":const m=n.substring(l,c);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(l,c),o+="\0";break;case"\x11":o+=n.substring(l,c+1);break;default:bn()}l=c+2}return new $r(r)}const BE=["userId","batchId"];function fm(n,e){return[n,qo(e)]}function S_(n,e,t){return[n,qo(e),t]}const Wb={},$E=["prefixPath","collectionGroup","readTime","documentId"],UE=["prefixPath","collectionGroup","documentId"],A_=["collectionGroup","readTime","prefixPath","documentId"],uS=["canonicalId","targetId"],x_=["targetId","path"],qb=["path","targetId"],cS=["collectionId","parent"],Lh=["indexId","uid"],VE=["uid","sequenceNumber"],Yb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jE=["indexId","uid","orderedDocumentKey"],Kb=["userId","collectionPath","documentId"],Zb=["userId","collectionPath","largestBatchId"],pm=["userId","collectionGroup","largestBatchId"],Dd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M_=[...Dd,"documentOverlays"],Bh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],gm=Bh,mm=[...gm,"indexConfiguration","indexState","indexEntries"];class ym extends D_{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function ro(n,e){const t=sn(n);return La.O(t.at,e)}function _m(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ou(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class ss{constructor(e,t){this.comparator=e,this.root=t||ko.EMPTY}insert(e,t){return new ss(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ko.BLACK,null,null))}remove(e){return new ss(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ko.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vm(this.root,e,this.comparator,!1)}getReverseIterator(){return new vm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vm(this.root,e,this.comparator,!0)}}class vm{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ko{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:ko.RED,this.left=null!=o?o:ko.EMPTY,this.right=null!=l?l:ko.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new ko(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ko.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ko.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ko.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ko.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bn();const e=this.left.check();if(e!==this.right.check())throw bn();return e+(this.isRed()?0:1)}}ko.EMPTY=null,ko.RED=!0,ko.BLACK=!1,ko.EMPTY=new class{constructor(){this.size=0}get key(){throw bn()}get value(){throw bn()}get color(){throw bn()}get left(){throw bn()}get right(){throw bn()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ko(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mi{constructor(e){this.comparator=e,this.data=new ss(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new HE(this.data.getIterator())}getIteratorFrom(e){return new HE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mi(this.comparator);return t.data=e,t}}class HE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Td(n){return n.hasNext()?n.getNext():void 0}class oa{constructor(e){this.fields=e,e.sort(Ts.comparator)}static empty(){return new oa([])}unionWith(e){let t=new mi(Ts.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new oa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ai{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Xb("Invalid base64 string: "+o):o}}(e);return new ai(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new ai(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ai.EMPTY_BYTE_STRING=new ai("");const zE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tc(n){if($n(!!n),"string"==typeof n){let e=0;const t=zE.exec(n);if($n(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$s(n.seconds),nanos:$s(n.nanos)}}function $s(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ku(n){return"string"==typeof n?ai.fromBase64String(n):ai.fromUint8Array(n)}function Em(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GE(n){const e=n.mapValue.fields.__previous_value__;return Em(e)?GE(e):e}function yp(n){const e=Tc(n.mapValue.fields.__local_write_time__.timestampValue);return new is(e.seconds,e.nanos)}class Jb{constructor(e,t,r,o,l,c,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Nu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nu&&e.projectId===this.projectId&&e.database===this.database}}const Sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Im={nullValue:"NULL_VALUE"};function Fu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Em(n)?4:bm(n)?9007199254740991:10:bn()}function tu(n,e){if(n===e)return!0;const t=Fu(n);if(t!==Fu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yp(n).isEqual(yp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=Tc(r.timestampValue),c=Tc(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ku(n.bytesValue).isEqual(ku(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return $s(r.geoPointValue.latitude)===$s(o.geoPointValue.latitude)&&$s(r.geoPointValue.longitude)===$s(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return $s(r.integerValue)===$s(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=$s(r.doubleValue),c=$s(o.doubleValue);return l===c?Dc(l)===Dc(c):isNaN(l)&&isNaN(c)}return!1}(n,e);case 9:return wd(n.arrayValue.values||[],e.arrayValue.values||[],tu);case 10:return function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(_m(l)!==_m(c))return!1;for(const m in l)if(l.hasOwnProperty(m)&&(void 0===c[m]||!tu(l[m],c[m])))return!1;return!0}(n,e);default:return bn()}var o}function _p(n,e){return void 0!==(n.values||[]).find(t=>tu(t,e))}function Ac(n,e){if(n===e)return 0;const t=Fu(n),r=Fu(e);if(t!==r)return pr(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pr(n.booleanValue,e.booleanValue);case 2:return function(o,l){const c=$s(o.integerValue||o.doubleValue),m=$s(l.integerValue||l.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return WE(n.timestampValue,e.timestampValue);case 4:return WE(yp(n),yp(e));case 5:return pr(n.stringValue,e.stringValue);case 6:return function(o,l){const c=ku(o),m=ku(l);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const c=o.split("/"),m=l.split("/");for(let E=0;E<c.length&&E<m.length;E++){const A=pr(c[E],m[E]);if(0!==A)return A}return pr(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const c=pr($s(o.latitude),$s(l.latitude));return 0!==c?c:pr($s(o.longitude),$s(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const c=o.values||[],m=l.values||[];for(let E=0;E<c.length&&E<m.length;++E){const A=Ac(c[E],m[E]);if(A)return A}return pr(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){if(o===Sc.mapValue&&l===Sc.mapValue)return 0;if(o===Sc.mapValue)return 1;if(l===Sc.mapValue)return-1;const c=o.fields||{},m=Object.keys(c),E=l.fields||{},A=Object.keys(E);m.sort(),A.sort();for(let V=0;V<m.length&&V<A.length;++V){const Z=pr(m[V],A[V]);if(0!==Z)return Z;const le=Ac(c[m[V]],E[A[V]]);if(0!==le)return le}return pr(m.length,A.length)}(n.mapValue,e.mapValue);default:throw bn()}}function WE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return pr(n,e);const t=Tc(n),r=Tc(e),o=pr(t.seconds,r.seconds);return 0!==o?o:pr(t.nanos,r.nanos)}function $h(n){return sl(n)}function sl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Tc(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ku(n.bytesValue).toBase64():"referenceValue"in n?un.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const c of r.values||[])l?l=!1:o+=",",o+=sl(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",c=!0;for(const m of o)c?c=!1:l+=",",l+=`${m}:${sl(r.fields[m])}`;return l+"}"}(n.mapValue):bn();var e}function Lu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function P_(n){return!!n&&"integerValue"in n}function vp(n){return!!n&&"arrayValue"in n}function O_(n){return!!n&&"nullValue"in n}function qE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function wm(n){return!!n&&"mapValue"in n}function Ep(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ou(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ep(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ep(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function eC(n){return"nullValue"in n?Im:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lu(Nu.empty(),un.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:bn()}function tC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lu(Nu.empty(),un.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Sc:bn()}function Ip(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cm(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Us{constructor(e){this.value=e}static empty(){return new Us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!wm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ep(t)}setAll(e){let t=Ts.emptyPath(),r={},o=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Ep(c):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());wm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return tu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];wm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ou(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new Us(Ep(this.value))}}function nC(n){const e=[];return Ou(n.fields,(t,r)=>{const o=new Ts([t]);if(wm(r)){const l=nC(r.mapValue).fields;if(0===l.length)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new oa(e)}class Ri{constructor(e,t,r,o,l,c,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=c,this.documentState=m}static newInvalidDocument(e){return new Ri(e,0,Gn.min(),Gn.min(),Gn.min(),Us.empty(),0)}static newFoundDocument(e,t,r,o){return new Ri(e,1,t,Gn.min(),r,o,0)}static newNoDocument(e,t){return new Ri(e,2,t,Gn.min(),Gn.min(),Us.empty(),0)}static newUnknownDocument(e,t){return new Ri(e,3,t,Gn.min(),Gn.min(),Us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ri&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ri(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sd{constructor(e,t){this.position=e,this.inclusive=t}}function k_(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(r=l.field.isKeyField()?un.comparator(un.fromName(c.referenceValue),t.key):Ac(c,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function N_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!tu(n.position[t],e.position[t]))return!1;return!0}class Ad{constructor(e,t="asc"){this.field=e,this.dir=t}}function YE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Dm{}class gr extends Dm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new rC(e,t,r):"array-contains"===t?new sC(e,r):"in"===t?new QE(e,r):"not-in"===t?new oC(e,r):"array-contains-any"===t?new aC(e,r):new gr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new dS(e,r):new iC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ac(t,this.value)):null!==t&&Fu(this.value)===Fu(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return bn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ei extends Dm{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new ei(e,t)}matches(e){return Bu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Bu(n){return"and"===n.op}function xd(n){return"or"===n.op}function F_(n){return L_(n)&&Bu(n)}function L_(n){for(const e of n.filters)if(e instanceof ei)return!1;return!0}function Tm(n){if(n instanceof gr)return n.field.canonicalString()+n.op.toString()+$h(n.value);if(F_(n))return n.filters.map(e=>Tm(e)).join(",");{const e=n.filters.map(t=>Tm(t)).join(",");return`${n.op}(${e})`}}function KE(n,e){return n instanceof gr?(t=n,(r=e)instanceof gr&&t.op===r.op&&t.field.isEqual(r.field)&&tu(t.value,r.value)):n instanceof ei?function(t,r){return r instanceof ei&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,l,c)=>o&&KE(l,r.filters[c]),!0)}(n,e):void bn();var t,r}function ZE(n,e){const t=n.filters.concat(e);return ei.create(t,n.op)}function Uh(n){return n instanceof gr?`${(e=n).field.canonicalString()} ${e.op} ${$h(e.value)}`:n instanceof ei?function(e){return e.op.toString()+" {"+e.getFilters().map(Uh).join(" ,")+"}"}(n):"Filter";var e}class rC extends gr{constructor(e,t,r){super(e,t,r),this.key=un.fromName(r.referenceValue)}matches(e){const t=un.comparator(e.key,this.key);return this.matchesComparison(t)}}class dS extends gr{constructor(e,t){super(e,"in",t),this.keys=XE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iC extends gr{constructor(e,t){super(e,"not-in",t),this.keys=XE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>un.fromName(r.referenceValue))}class sC extends gr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vp(t)&&_p(t.arrayValue,this.value)}}class QE extends gr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_p(this.value.arrayValue,t)}}class oC extends gr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_p(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_p(this.value.arrayValue,t)}}class aC extends gr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_p(this.value.arrayValue,r))}}class lC{constructor(e,t=null,r=[],o=[],l=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=c,this.endAt=m,this.ft=null}}function Sm(n,e=null,t=[],r=[],o=null,l=null,c=null){return new lC(n,e,t,r,o,l,c)}function $u(n){const e=sn(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Fh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),e.ft=t}return e.ft}function wp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!KE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!N_(n.startAt,e.startAt)&&N_(n.endAt,e.endAt)}function Vh(n){return un.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Am(n,e){return n.filters.filter(t=>t instanceof gr&&t.field.isEqual(e))}function JE(n,e,t){let r=Im,o=!0;for(const l of Am(n,e)){let c=Im,m=!0;switch(l.op){case"<":case"<=":c=eC(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,m=!1;break;case"!=":case"not-in":c=Im}Ip({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Ip({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function eI(n,e,t){let r=Sc,o=!0;for(const l of Am(n,e)){let c=Sc,m=!0;switch(l.op){case">=":case">":c=tC(l.value),m=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,m=!1;break;case"!=":case"not-in":c=Sc}Cm({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const c=t.position[l];Cm({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class Uu{constructor(e,t=null,r=[],o=[],l=null,c="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=c,this.startAt=m,this.endAt=E,this.dt=null,this.wt=null}}function tI(n,e,t,r,o,l,c,m){return new Uu(n,e,t,r,o,l,c,m)}function jh(n){return new Uu(n)}function nI(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function B_(n){return null!==n.collectionGroup}function Hh(n){const e=sn(n);if(null===e.dt){e.dt=[];const t=bp(e),r=xm(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Ad(t)),e.dt.push(new Ad(Ts.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.dt.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Ad(Ts.keyField(),l))}}}return e.dt}function Yo(n){const e=sn(n);if(!e.wt)if("F"===e.limitType)e.wt=Sm(e.path,e.collectionGroup,Hh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Hh(e))t.push(new Ad(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new Sd(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Sd(e.startAt.position,e.startAt.inclusive):null;e.wt=Sm(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function rI(n,e){e.getFirstInequalityField(),bp(n);const t=n.filters.concat([e]);return new Uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Md(n,e,t){return new Uu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cp(n,e){return wp(Yo(n),Yo(e))&&n.limitType===e.limitType}function iI(n){return`${$u(Yo(n))}|lt:${n.limitType}`}function Dp(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Uh(r)).join(", ")}]`),Fh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$h(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$h(r)).join(",")),`Target(${t})`}(Yo(n))}; limitType=${n.limitType})`}function Tp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):un.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Hh(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,l,c){const m=k_(o,l,c);return o.inclusive?m<=0:m<0}(t.startAt,Hh(t),r)||t.endAt&&!function(o,l,c){const m=k_(o,l,c);return o.inclusive?m>=0:m>0}(t.endAt,Hh(t),r)));var t,r}function Sl(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zh(n){return(e,t)=>{let r=!1;for(const o of Hh(n)){const l=Ko(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function Ko(n,e,t){const r=n.field.isKeyField()?un.comparator(e.key,t.key):function(o,l,c){const m=l.data.field(o),E=c.data.field(o);return null!==m&&null!==E?Ac(m,E):bn()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return bn()}}class wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ou(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return R_(this.inner)}size(){return this.innerSize}}const Mm=new ss(un.comparator);function Gi(){return Mm}const Rm=new ss(un.comparator);function nu(...n){let e=Rm;for(const t of n)e=e.insert(t.key,t);return e}function Rd(n){let e=Rm;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function aa(){return ru()}function Pd(){return ru()}function ru(){return new wa(n=>n.toString(),(n,e)=>n.isEqual(e))}const Gh=new ss(un.comparator),Wh=new mi(un.comparator);function sr(...n){let e=Wh;for(const t of n)e=e.add(t);return e}const qh=new mi(pr);function Sp(){return qh}function $_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function U_(n){return{integerValue:""+n}}function V_(n,e){return FE(e)?U_(e):$_(n,e)}class Ap{constructor(){this._=void 0}}function sI(n,e,t){return n instanceof Od?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof kd?aI(n,e):n instanceof xc?lI(n,e):function(r,o){const l=j_(r,o),c=Pm(l)+Pm(r._t);return P_(l)&&P_(r._t)?U_(c):$_(r.serializer,c)}(n,e)}function oI(n,e,t){return n instanceof kd?aI(n,e):n instanceof xc?lI(n,e):t}function j_(n,e){return n instanceof Nd?P_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Od extends Ap{}class kd extends Ap{constructor(e){super(),this.elements=e}}function aI(n,e){const t=Om(e);for(const r of n.elements)t.some(o=>tu(o,r))||t.push(r);return{arrayValue:{values:t}}}class xc extends Ap{constructor(e){super(),this.elements=e}}function lI(n,e){let t=Om(e);for(const r of n.elements)t=t.filter(o=>!tu(o,r));return{arrayValue:{values:t}}}class Nd extends Ap{constructor(e,t){super(),this.serializer=e,this._t=t}}function Pm(n){return $s(n.integerValue||n.doubleValue)}function Om(n){return vp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xp{constructor(e,t){this.field=e,this.transform=t}}class Nm{constructor(e,t){this.version=e,this.transformResults=t}}class Bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fd{}function Mp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Bd(n.key,Bi.none()):new Ld(n.key,n.data,Bi.none());{const t=n.data,r=Us.empty();let o=new mi(Ts.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);null===c&&l.length>1&&(l=l.popLast(),c=t.field(l)),null===c?r.delete(l):r.set(l,c),o=o.add(l)}return new Al(n.key,r,new oa(o.toArray()),Bi.none())}}function H_(n,e,t){n instanceof Ld?function(r,o,l){const c=r.value.clone(),m=uI(r.fieldTransforms,o,l.transformResults);c.setAll(m),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Al?function(r,o,l){if(!Fm(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=uI(r.fieldTransforms,o,l.transformResults),m=o.data;m.setAll(W_(r)),m.setAll(c),o.convertToFoundDocument(l.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yh(n,e,t,r){return n instanceof Ld?function(o,l,c,m){if(!Fm(o.precondition,l))return c;const E=o.value.clone(),A=q_(o.fieldTransforms,m,l);return E.setAll(A),l.convertToFoundDocument(l.version,E).setHasLocalMutations(),null}(n,e,t,r):n instanceof Al?function(o,l,c,m){if(!Fm(o.precondition,l))return c;const E=q_(o.fieldTransforms,m,l),A=l.data;return A.setAll(W_(o)),A.setAll(E),l.convertToFoundDocument(l.version,A).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(V=>V.field))}(n,e,t,r):(c=t,Fm(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c);var l,c}function z_(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=j_(r.transform,o||null);null!=l&&(null===t&&(t=Us.empty()),t.set(r.field,l))}return t||null}function G_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wd(t,r,(o,l)=>function km(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kd&&r instanceof kd||t instanceof xc&&r instanceof xc?wd(t.elements,r.elements,tu):t instanceof Nd&&r instanceof Nd?tu(t._t,r._t):t instanceof Od&&r instanceof Od);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ld extends Fd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Al extends Fd{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function W_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uI(n,e,t){const r=new Map;$n(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,m=e.data.field(l.field);r.set(l.field,oI(c,m,t[o]))}return r}function q_(n,e,t){const r=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);r.set(o.field,sI(l,c,e))}return r}class Bd extends Fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Lm extends Fd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bm{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&H_(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pd();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let m=this.applyToLocalView(c,l.mutatedFields);m=t.has(o.key)?null:m;const E=Mp(c,m);null!==E&&r.set(o.key,E),c.isValidDocument()||c.convertToNoDocument(Gn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),sr())}isEqual(e){return this.batchId===e.batchId&&wd(this.mutations,e.mutations,(t,r)=>G_(t,r))&&wd(this.baseMutations,e.baseMutations,(t,r)=>G_(t,r))}}class Y_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){$n(e.mutations.length===r.length);let o=Gh;const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,r[c].version);return new Y_(e,t,r,o)}}class $m{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dI{constructor(e){this.count=e}}var Vs,Ur;function Z_(n){switch(n){default:return bn();case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0}}function X_(n){if(void 0===n)return Bs("GRPC error has no .code"),Et.UNKNOWN;switch(n){case Vs.OK:return Et.OK;case Vs.CANCELLED:return Et.CANCELLED;case Vs.UNKNOWN:return Et.UNKNOWN;case Vs.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case Vs.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case Vs.INTERNAL:return Et.INTERNAL;case Vs.UNAVAILABLE:return Et.UNAVAILABLE;case Vs.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case Vs.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case Vs.NOT_FOUND:return Et.NOT_FOUND;case Vs.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case Vs.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case Vs.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case Vs.ABORTED:return Et.ABORTED;case Vs.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case Vs.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case Vs.DATA_LOSS:return Et.DATA_LOSS;default:return bn()}}(Ur=Vs||(Vs={}))[Ur.OK=0]="OK",Ur[Ur.CANCELLED=1]="CANCELLED",Ur[Ur.UNKNOWN=2]="UNKNOWN",Ur[Ur.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ur[Ur.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ur[Ur.NOT_FOUND=5]="NOT_FOUND",Ur[Ur.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ur[Ur.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ur[Ur.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ur[Ur.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ur[Ur.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ur[Ur.ABORTED=10]="ABORTED",Ur[Ur.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ur[Ur.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ur[Ur.INTERNAL=13]="INTERNAL",Ur[Ur.UNAVAILABLE=14]="UNAVAILABLE",Ur[Ur.DATA_LOSS=15]="DATA_LOSS";class Vm{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Rp}static getOrCreateInstance(){return null===Rp&&(Rp=new Vm),Rp}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Rp=null;class Kh{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kh(Gn.min(),o,Sp(),Gi(),sr())}}class Mc{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mc(r,t,sr(),sr(),sr())}}class xl{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class hI{constructor(e,t){this.targetId=e,this.Et=t}}class fI{constructor(e,t,r=ai.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jm{constructor(){this.At=0,this.Rt=pI(),this.vt=ai.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=sr(),t=sr(),r=sr();return this.Rt.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:bn()}}),new Mc(this.vt,this.bt,e,t,r)}xt(){this.Pt=!1,this.Rt=pI()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class $d{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Gi(),this.qt=Hm(),this.Ut=new mi(pr)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const r=this.jt(t);switch(e.state){case 0:this.Wt(t)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:bn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.Wt(o)&&t(o)})}Jt(e){var t;const r=e.targetId,o=e.Et.count,l=this.Yt(r);if(l){const c=l.target;if(Vh(c))if(0===o){const m=new un(c.path);this.Qt(r,m,Ri.newNoDocument(m,Gn.min()))}else $n(1===o);else{const m=this.Zt(r);m!==o&&(this.Ht(r),this.Ut=this.Ut.add(r),null===(t=Vm.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:m,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((l,c)=>{const m=this.Yt(c);if(m){if(l.current&&Vh(m.target)){const E=new un(m.target.path);null!==this.Lt.get(E)||this.te(c,E)||this.Qt(c,E,Ri.newNoDocument(E,e))}l.St&&(t.set(c,l.Ct()),l.xt())}});let r=sr();this.qt.forEach((l,c)=>{let m=!0;c.forEachWhile(E=>{const A=this.Yt(E);return!A||2===A.purpose||(m=!1,!1)}),m&&(r=r.add(l))}),this.Lt.forEach((l,c)=>c.setReadTime(e));const o=new Kh(e,t,this.Ut,this.Lt,r);return this.Lt=Gi(),this.qt=Hm(),this.Ut=new mi(pr),o}Gt(e,t){if(!this.Wt(e))return;const r=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.Wt(e))return;const o=this.jt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new jm,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new mi(pr),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||qt("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new jm),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Hm(){return new ss(un.comparator)}function pI(){return new ss(un.comparator)}const Q_={asc:"ASCENDING",desc:"DESCENDING"},hS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fS={and:"AND",or:"OR"};class uC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function cC(n,e){return Zh(n,e.toTimestamp())}function Mr(n){return $n(!!n),Gn.fromTimestamp(function(e){const t=Tc(e);return new is(t.seconds,t.nanos)}(n))}function zm(n,e){return(t=n,new $r(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function gI(n){const e=$r.fromString(n);return $n(bI(e)),e}function Pp(n,e){return zm(n.databaseId,e.path)}function Ml(n,e){const t=gI(e);if(t.get(1)!==n.databaseId.projectId)throw new $t(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $t(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new un(Ud(t))}function ev(n,e){return zm(n.databaseId,e)}function tv(n){const e=gI(n);return 4===e.length?$r.emptyPath():Ud(e)}function Xh(n){return new $r(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Ud(n){return $n(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function mI(n,e,t){return{name:Pp(n,e),fields:t.value.mapValue.fields}}function yI(n,e,t){const r=Ml(n,e.name),o=Mr(e.updateTime),l=e.createTime?Mr(e.createTime):Gn.min(),c=new Us({mapValue:{fields:e.fields}}),m=Ri.newFoundDocument(r,o,l,c);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function Qh(n,e){let t;if(e instanceof Ld)t={update:mI(n,e.key,e.value)};else if(e instanceof Bd)t={delete:Pp(n,e.key)};else if(e instanceof Al)t={update:mI(n,e.key,e.data),updateMask:fC(e.fieldMask)};else{if(!(e instanceof Lm))return bn();t={verify:Pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const c=l.transform;if(c instanceof Od)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof kd)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof xc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nd)return{fieldPath:l.field.canonicalString(),increment:c._t};throw bn()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:cC(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:bn()),t;var o}function vI(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Bi.updateTime(Mr(o.updateTime)):void 0!==o.exists?Bi.exists(o.exists):Bi.none():Bi.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,c){let m=null;"setToServerValue"in c?($n("REQUEST_TIME"===c.setToServerValue),m=new Od):"appendMissingElements"in c?m=new kd(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new xc(c.removeAllFromArray.values||[]):"increment"in c?m=new Nd(l,c.increment):bn();const E=Ts.fromServerFormat(c.fieldPath);return new xp(E,m)}(n,o)):[];var o;if(e.update){const o=Ml(n,e.update.name),l=new Us({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new oa((e.updateMask.fieldPaths||[]).map(A=>Ts.fromServerFormat(A)));return new Al(o,l,c,t,r)}return new Ld(o,l,t,r)}if(e.delete){const o=Ml(n,e.delete);return new Bd(o,t)}if(e.verify){const o=Ml(n,e.verify);return new Lm(o,t)}return bn()}function Gm(n,e){return{documents:[ev(n,e.path)]}}function ol(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ev(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ev(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0!==E.length)return wI(ei.create(E,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const l=function(E){if(0!==E.length)return E.map(A=>{return{field:Vu((V=A).field),direction:Pl(V.dir)};var V})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=(A=e.limit,n.useProto3Json||Fh(A)?A:{value:A});var A,m,E;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function EI(n){let e=tv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){$n(1===r);const V=t.from[0];V.allDescendants?o=V.collectionId:e=e.child(V.collectionId)}let l=[];t.where&&(l=function(V){const Z=Rl(V);return Z instanceof ei&&F_(Z)?Z.getFilters():[Z]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(V=>{return new Ad(Jh((Z=V).field),function(le){switch(le){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Z.direction));var Z}));let m=null;t.limit&&(m=function(V){let Z;return Z="object"==typeof V?V.value:V,Fh(Z)?null:Z}(t.limit));let E=null;var V;t.startAt&&(E=new Sd((V=t.startAt).values||[],!!V.before));let A=null;return t.endAt&&(A=function(V){return new Sd(V.values||[],!V.before)}(t.endAt)),tI(e,o,c,l,m,"F",E,A)}function Rl(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Jh(e.unaryFilter.field);return gr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Jh(e.unaryFilter.field);return gr.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jh(e.unaryFilter.field);return gr.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Jh(e.unaryFilter.field);return gr.create(l,"!=",{nullValue:"NULL_VALUE"});default:return bn()}}(n):void 0!==n.fieldFilter?gr.create(Jh((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ei.create(e.compositeFilter.filters.map(t=>Rl(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return bn()}}(e.compositeFilter.op))}(n):bn();var e}function Pl(n){return Q_[n]}function Ol(n){return hS[n]}function II(n){return fS[n]}function Vu(n){return{fieldPath:n.canonicalString()}}function Jh(n){return Ts.fromServerFormat(n.fieldPath)}function wI(n){return n instanceof gr?function(e){if("=="===e.op){if(qE(e.value))return{unaryFilter:{field:Vu(e.field),op:"IS_NAN"}};if(O_(e.value))return{unaryFilter:{field:Vu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qE(e.value))return{unaryFilter:{field:Vu(e.field),op:"IS_NOT_NAN"}};if(O_(e.value))return{unaryFilter:{field:Vu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(e.field),op:Ol(e.op),value:e.value}}}(n):n instanceof ei?function(e){const t=e.getFilters().map(r=>wI(r));return 1===t.length?t[0]:{compositeFilter:{op:II(e.op),filters:t}}}(n):bn()}function fC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class iu{constructor(e,t,r,o,l=Gn.min(),c=Gn.min(),m=ai.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m}withSequenceNumber(e){return new iu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new iu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ef{constructor(e){this.se=e}}function rv(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Pp(o=n.se,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Zh(o,l.version.toTimestamp()),createTime:Zh(o,l.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Rc(e.version)};else{if(!e.isUnknownDocument())return bn();r.unknownDocument={path:t.path.toArray(),version:Rc(e.version)}}var o,l;return r}function Wm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Rc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Pc(n){const e=new is(n.seconds,n.nanoseconds);return Gn.fromTimestamp(e)}function su(n,e){const t=(e.baseMutations||[]).map(l=>vI(n.se,l));for(let l=0;l<e.mutations.length-1;++l)l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(e.mutations[l].updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l);const r=e.mutations.map(l=>vI(n.se,l)),o=is.fromMillis(e.localWriteTimeMs);return new Bm(e.batchId,o,t,r)}function Op(n){const e=Pc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Pc(n.lastLimboFreeSnapshotVersion):Gn.min();let r;var o;return void 0!==n.query.documents?($n(1===(o=n.query).documents.length),r=Yo(jh(tv(o.documents[0])))):r=Yo(EI(n.query)),new iu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ai.fromBase64String(n.resumeToken))}function iv(n,e){const t=Rc(e.snapshotVersion),r=Rc(e.lastLimboFreeSnapshotVersion);let o;o=Vh(e.target)?Gm(n.se,e.target):ol(n.se,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:$u(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function qm(n){const e=EI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Md(e,e.limit,"L"):e}function kp(n,e){return new $m(e.largestBatchId,vI(n.se,e.overlayMutation))}function Np(n,e){const t=e.path.lastSegment();return[n,qo(e.path.popLast()),t]}function sv(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Rc(r.readTime),documentKey:qo(r.documentKey.path),largestBatchId:r.largestBatchId}}class CI{getBundleMetadata(e,t){return Ym(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Pc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return Ym(e).put({bundleId:(r=t).id,createTime:Rc(Mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ov(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:qm(o.bundledQuery),readTime:Pc(o.readTime)};var o})}saveNamedQuery(e,t){return ov(e).put({name:(r=t).name,readTime:Rc(Mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Ym(n){return ro(n,"bundles")}function ov(n){return ro(n,"namedQueries")}class Fp{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Fp(e,t.uid||"")}getOverlay(e,t){return tf(e).get(Np(this.userId,t)).next(r=>r?kp(this.serializer,r):null)}getOverlays(e,t){const r=aa();return wt.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((l,c)=>{const m=new $m(t,c);o.push(this.re(e,m))}),wt.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(qo(c.getCollectionPath())));const l=[];return o.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);l.push(tf(e).J("collectionPathOverlayIndex",m))}),wt.waitFor(l)}getOverlaysForCollection(e,t,r){const o=aa(),l=qo(t),c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return tf(e).j("collectionPathOverlayIndex",c).next(m=>{for(const E of m){const A=kp(this.serializer,E);o.set(A.getKey(),A)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const l=aa();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tf(e).Z({index:"collectionGroupOverlayIndex",range:m},(E,A,V)=>{const Z=kp(this.serializer,A);l.size()<o||Z.largestBatchId===c?(l.set(Z.getKey(),Z),c=Z.largestBatchId):V.done()}).next(()=>l)}re(e,t){return tf(e).put(function(r,o,l){const[c,m,E]=Np(o,l.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Qh(r.se,l.mutation)}}(this.serializer,this.userId,t))}}function tf(n){return ro(n,"documentOverlays")}class Oc{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he($s(e.integerValue));else if("doubleValue"in e){const r=$s(e.doubleValue);isNaN(r)?this.ae(t,13):(this.ae(t,15),Dc(r)?t.he(0):t.he(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le(`${r.seconds||""}`),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(ku(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ae(t,45),t.he(r.latitude||0),t.he(r.longitude||0)}else"mapValue"in e?bm(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):bn()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const r=e.fields||{};this.ae(t,55);for(const o of Object.keys(r))this.fe(o,t),this.ue(r[o],t)}ge(e,t){const r=e.values||[];this.ae(t,50);for(const o of r)this.ue(o,t)}_e(e,t){this.ae(t,37),un.fromName(e).path.forEach(r=>{this.ae(t,60),this.ye(r,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function DI(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function TI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const l=DI(255&t[o]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Oc.pe=new Oc;class gC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Te(r.value),r=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.ve()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Te(r);else if(r<2048)this.Te(960|r>>>6),this.Te(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Te(480|r>>>12),this.Te(128|63&r>>>6),this.Te(128|63&r);else{const o=t.codePointAt(0);this.Te(240|o>>>18),this.Te(128|63&o>>>12),this.Te(128|63&o>>>6),this.Te(128|63&o)}}this.Ee()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.ve()}Ve(e){const t=this.Se(e),r=TI(t);this.De(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ce(e){const t=this.Se(e),r=TI(t);this.De(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class mC{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class yC{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Lp{constructor(){this.Me=new gC,this.Fe=new mC(this.Me),this.Be=new yC(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Vd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vd(this.indexId,this.documentKey,this.arrayValue,r)}}function kc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=SI(n.arrayValue,e.arrayValue),0!==t?t:(t=SI(n.directionalValue,e.directionalValue),0!==t?t:un.comparator(n.documentKey,e.documentKey)))}function SI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class _C{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ge=r:this.Ke.push(r)}}Qe(e){$n(e.collectionGroup===this.collectionId);const t=cm(e);if(void 0!==t&&!this.ze(t))return!1;const r=Cc(e);let o=0,l=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Ge){const c=r[o];if(!this.je(this.Ge,c)||!this.We(this.Ue[l++],c))return!1;++o}for(;o<r.length;++o)if(l>=this.Ue.length||!this.We(this.Ue[l++],r[o]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function AI(n){var e,t;if($n(n instanceof gr||n instanceof ei),n instanceof gr){if(n instanceof QE){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>gr.create(n.field,"==",l)))||[];return ei.create(o,"or")}return n}const r=n.filters.map(o=>AI(o));return ei.create(r,n.op)}function vC(n){if(0===n.getFilters().length)return[];const e=uv(AI(n));return $n(xI(e)),av(e)||lv(e)?[e]:e.getFilters()}function av(n){return n instanceof gr}function lv(n){return n instanceof ei&&F_(n)}function xI(n){return av(n)||lv(n)||function(e){if(e instanceof ei&&xd(e)){for(const t of e.getFilters())if(!av(t)&&!lv(t))return!1;return!0}return!1}(n)}function uv(n){if($n(n instanceof gr||n instanceof ei),n instanceof gr)return n;if(1===n.filters.length)return uv(n.filters[0]);const e=n.filters.map(r=>uv(r));let t=ei.create(e,n.op);return t=Km(t),xI(t)?t:($n(t instanceof ei),$n(Bu(t)),$n(t.filters.length>1),t.filters.reduce((r,o)=>cv(r,o)))}function cv(n,e){let t;return $n(n instanceof gr||n instanceof ei),$n(e instanceof gr||e instanceof ei),t=n instanceof gr?e instanceof gr?ei.create([n,e],"and"):MI(n,e):e instanceof gr?MI(e,n):function(r,o){if($n(r.filters.length>0&&o.filters.length>0),Bu(r)&&Bu(o))return ZE(r,o.getFilters());const l=xd(r)?r:o,c=xd(r)?o:r,m=l.filters.map(E=>cv(E,c));return ei.create(m,"or")}(n,e),Km(t)}function MI(n,e){if(Bu(e))return ZE(e,n.getFilters());{const t=e.filters.map(r=>cv(n,r));return ei.create(t,"or")}}function Km(n){if($n(n instanceof gr||n instanceof ei),n instanceof gr)return n;const e=n.getFilters();if(1===e.length)return Km(e[0]);if(L_(n))return n;const t=e.map(o=>Km(o)),r=[];return t.forEach(o=>{o instanceof gr?r.push(o):o instanceof ei&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:ei.create(r,n.op)}class RI{constructor(){this.He=new Zm}addToCollectionParentIndex(e,t){return this.He.add(t),wt.resolve()}getCollectionParents(e,t){return wt.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return wt.resolve()}deleteFieldIndex(e,t){return wt.resolve()}getDocumentsMatchingTarget(e,t){return wt.resolve(null)}getIndexType(e,t){return wt.resolve(0)}getFieldIndexes(e,t){return wt.resolve([])}getNextCollectionGroupToUpdate(e){return wt.resolve(null)}getMinOffset(e,t){return wt.resolve(Fa.min())}getMinOffsetFromCollectionGroup(e,t){return wt.resolve(Fa.min())}updateCollectionGroup(e,t,r){return wt.resolve()}updateIndexEntries(e,t){return wt.resolve()}}class Zm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new mi($r.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new mi($r.comparator)).toArray()}}const Bp=new Uint8Array(0);class PI{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new Zm,this.Ye=new wa(r=>$u(r),(r,o)=>wp(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const l={collectionId:r,parent:qo(o)};return dv(e).put(l)}return wt.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[PE(t),""],!1,!0);return dv(e).j(o).next(l=>{for(const c of l){if(c.collectionId!==t)break;r.push(eu(c.parent))}return r})}addFieldIndex(e,t){const r=$p(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete o.indexId;const l=r.add(o);if(t.indexState){const c=rf(e);return l.next(m=>{c.put(sv(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=$p(e),o=rf(e),l=nf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=nf(e);let o=!0;const l=new Map;return wt.forEach(this.Ze(t),c=>this.Xe(e,c).next(m=>{o&&(o=!!m),l.set(c,m)})).next(()=>{if(o){let c=sr();const m=[];return wt.forEach(l,(E,A)=>{var V;qt("IndexedDbIndexManager",`Using index ${V=E,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Mn=>`${Mn.fieldPath}:${Mn.kind}`).join(",")}`} to execute ${$u(t)}`);const Z=function(Mn,Yn){const Er=cm(Yn);if(void 0===Er)return null;for(const Rr of Am(Mn,Er.fieldPath))switch(Rr.op){case"array-contains-any":return Rr.value.arrayValue.values||[];case"array-contains":return[Rr.value]}return null}(A,E),le=function(Mn,Yn){const Er=new Map;for(const Rr of Cc(Yn))for(const Fo of Am(Mn,Rr.fieldPath))switch(Fo.op){case"==":case"in":Er.set(Rr.fieldPath.canonicalString(),Fo.value);break;case"not-in":case"!=":return Er.set(Rr.fieldPath.canonicalString(),Fo.value),Array.from(Er.values())}return null}(A,E),Ue=function(Mn,Yn){const Er=[];let Rr=!0;for(const Fo of Cc(Yn)){const dl=0===Fo.kind?JE(Mn,Fo.fieldPath,Mn.startAt):eI(Mn,Fo.fieldPath,Mn.startAt);Er.push(dl.value),Rr&&(Rr=dl.inclusive)}return new Sd(Er,Rr)}(A,E),ct=function(Mn,Yn){const Er=[];let Rr=!0;for(const Fo of Cc(Yn)){const dl=0===Fo.kind?eI(Mn,Fo.fieldPath,Mn.endAt):JE(Mn,Fo.fieldPath,Mn.endAt);Er.push(dl.value),Rr&&(Rr=dl.inclusive)}return new Sd(Er,Rr)}(A,E),Pt=this.tn(E,A,Ue),jt=this.tn(E,A,ct),Hn=this.en(E,A,le),or=this.nn(E.indexId,Z,Pt,Ue.inclusive,jt,ct.inclusive,Hn);return wt.forEach(or,Mn=>r.H(Mn,t.limit).next(Yn=>{Yn.forEach(Er=>{const Rr=un.fromSegments(Er.documentKey);c.has(Rr)||(c=c.add(Rr),m.push(Rr))})}))}).next(()=>m)}return wt.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:vC(ei.create(e.filters,"and")).map(r=>Sm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,r,o,l,c,m){const E=(null!=t?t.length:1)*Math.max(r.length,l.length),A=E/(null!=t?t.length:1),V=[];for(let Z=0;Z<E;++Z){const le=t?this.sn(t[Z/A]):Bp,Ue=this.rn(e,le,r[Z%A],o),ct=this.on(e,le,l[Z%A],c),Pt=m.map(jt=>this.rn(e,le,jt,!0));V.push(...this.createRange(Ue,ct,Pt))}return V}rn(e,t,r,o){const l=new Vd(e,un.empty(),t,r);return o?l:l.qe()}on(e,t,r,o){const l=new Vd(e,un.empty(),t,r);return o?l.qe():l}Xe(e,t){const r=new _C(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(l=>{let c=null;for(const m of l)r.Qe(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;const o=this.Ze(t);return wt.forEach(o,l=>this.Xe(e,l).next(c=>{c?0!==r&&c.fields.length<function(m){let E=new mi(Ts.comparator),A=!1;for(const V of m.filters)for(const Z of V.getFlattenedFilters())Z.field.isKeyField()||("array-contains"===Z.op||"array-contains-any"===Z.op?A=!0:E=E.add(Z.field));for(const V of m.orderBy)V.field.isKeyField()||(E=E.add(V.field));return E.size+(A?1:0)}(l)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}un(e,t){const r=new Lp;for(const o of Cc(e)){const l=t.data.field(o.fieldPath);if(null==l)return null;const c=r.Le(o.kind);Oc.pe.oe(l,c)}return r.$e()}sn(e){const t=new Lp;return Oc.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const r=new Lp;return Oc.pe.oe(Lu(this.databaseId,t),r.Le(function(o){const l=Cc(o);return 0===l.length?0:l[l.length-1].kind}(e))),r.$e()}en(e,t,r){if(null===r)return[];let o=[];o.push(new Lp);let l=0;for(const c of Cc(e)){const m=r[l++];for(const E of o)if(this.an(t,c.fieldPath)&&vp(m))o=this.hn(o,c,m);else{const A=E.Le(c.kind);Oc.pe.oe(m,A)}}return this.ln(o)}tn(e,t,r){return this.en(e,t,r.position)}ln(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}hn(e,t,r){const o=[...e],l=[];for(const c of r.arrayValue.values||[])for(const m of o){const E=new Lp;E.seed(m.$e()),Oc.pe.oe(c,E.Le(t.kind)),l.push(E)}return l}an(e,t){return!!e.filters.find(r=>r instanceof gr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=$p(e),o=rf(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(l=>{const c=[];return wt.forEach(l,m=>o.get([m.indexId,this.uid]).next(E=>{c.push(function(A,V){const Z=V?new Oh(V.sequenceNumber,new Fa(Pc(V.readTime),new un(eu(V.documentKey)),V.largestBatchId)):Oh.empty(),le=A.fields.map(([Ue,ct])=>new dm(Ts.fromServerFormat(Ue),ct));return new ir(A.indexId,A.collectionGroup,le,Z)}(m,E))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const l=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==l?l:pr(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=$p(e),l=rf(e);return this.fn(e).next(c=>o.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>wt.forEach(m,E=>l.put(sv(E.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return wt.forEach(t,(o,l)=>{const c=r.get(o.collectionGroup);return(c?wt.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),wt.forEach(m,E=>this.dn(e,o,E).next(A=>{const V=this.wn(l,E);return A.isEqual(V)?wt.resolve():this._n(e,l,E,A,V)}))))})}mn(e,t,r,o){return nf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.cn(r,t.key),documentKey:t.key.path.toArray()})}gn(e,t,r,o){return nf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.cn(r,t.key),t.key.path.toArray()])}dn(e,t,r){const o=nf(e);let l=new mi(kc);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.cn(r,t)])},(c,m)=>{l=l.add(new Vd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>l)}wn(e,t){let r=new mi(kc);const o=this.un(t,e);if(null==o)return r;const l=cm(t);if(null!=l){const c=e.data.field(l.fieldPath);if(vp(c))for(const m of c.arrayValue.values||[])r=r.add(new Vd(t.indexId,e.key,this.sn(m),o))}else r=r.add(new Vd(t.indexId,e.key,Bp,o));return r}_n(e,t,r,o,l){qt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,E,A,V,Z){const le=m.getIterator(),Ue=E.getIterator();let ct=Td(le),Pt=Td(Ue);for(;ct||Pt;){let jt=!1,Hn=!1;if(ct&&Pt){const or=A(ct,Pt);or<0?Hn=!0:or>0&&(jt=!0)}else null!=ct?Hn=!0:jt=!0;jt?(V(Pt),Pt=Td(Ue)):Hn?(Z(ct),ct=Td(le)):(ct=Td(le),Pt=Td(Ue))}}(o,l,kc,m=>{c.push(this.mn(e,t,r,m))},m=>{c.push(this.gn(e,t,r,m))}),wt.waitFor(c)}fn(e){let t=1;return rf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,l)=>{l.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>kc(c,m)).filter((c,m,E)=>!m||0!==kc(c,E[m-1]));const o=[];o.push(e);for(const c of r){const m=kc(c,e),E=kc(c,t);if(0===m)o[0]=e.qe();else if(m>0&&E<0)o.push(c),o.push(c.qe());else if(E>0)break}o.push(t);const l=[];for(let c=0;c<o.length;c+=2){if(this.yn(o[c],o[c+1]))return[];l.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,Bp,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,Bp,[]]))}return l}yn(e,t){return kc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hv)}getMinOffset(e,t){return wt.mapArray(this.Ze(t),r=>this.Xe(e,r).next(o=>o||bn())).next(hv)}}function dv(n){return ro(n,"collectionParents")}function nf(n){return ro(n,"indexEntries")}function $p(n){return ro(n,"indexConfiguration")}function rf(n){return ro(n,"indexState")}function hv(n){$n(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;C_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Fa(e.readTime,e.documentKey,t)}const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class la{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new la(e,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Nc(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),l=[],c=IDBKeyRange.only(t.batchId);let m=0;const E=r.Z({range:c},(V,Z,le)=>(m++,le.delete()));l.push(E.next(()=>{$n(1===m)}));const A=[];for(const V of t.mutations){const Z=S_(e,V.key.path,t.batchId);l.push(o.delete(Z)),A.push(V.key)}return wt.waitFor(l).next(()=>A)}function Xm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw bn();e=n.noDocument}return JSON.stringify(e).length}la.DEFAULT_COLLECTION_PERCENTILE=10,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,la.DEFAULT=new la(41943040,la.DEFAULT_COLLECTION_PERCENTILE,la.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),la.DISABLED=new la(-1,0,0);class Qm{constructor(e,t,r,o){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=o,this.pn={}}static ie(e,t,r,o){$n(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new Qm(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).Z({index:"userMutationsIndex",range:r},(o,l,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=Fc(e),c=Hd(e);return c.add({}).next(m=>{$n("number"==typeof m);const E=new Bm(m,t,r,o),A=function(le,Ue,ct){const Pt=ct.baseMutations.map(Hn=>Qh(le.se,Hn)),jt=ct.mutations.map(Hn=>Qh(le.se,Hn));return{userId:Ue,batchId:ct.batchId,localWriteTimeMs:ct.localWriteTime.toMillis(),baseMutations:Pt,mutations:jt}}(this.serializer,this.userId,E),V=[];let Z=new mi((le,Ue)=>pr(le.canonicalString(),Ue.canonicalString()));for(const le of o){const Ue=S_(this.userId,le.key.path,m);Z=Z.add(le.key.path.popLast()),V.push(c.put(A)),V.push(l.put(Ue,Wb))}return Z.forEach(le=>{V.push(this.indexManager.addToCollectionParentIndex(e,le))}),e.addOnCommittedListener(()=>{this.pn[m]=E.keys()}),wt.waitFor(V).next(()=>E)})}lookupMutationBatch(e,t){return Hd(e).get(t).next(r=>r?($n(r.userId===this.userId),su(this.serializer,r)):null)}In(e,t){return this.pn[t]?wt.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.pn[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Hd(e).Z({index:"userMutationsIndex",range:o},(c,m,E)=>{m.userId===this.userId&&($n(m.batchId>=r),l=su(this.serializer,m)),E.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,l,c)=>{r=l.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).j("userMutationsIndex",t).next(r=>r.map(o=>su(this.serializer,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return Fc(e).Z({range:o},(c,m,E)=>{const[A,V,Z]=c,le=eu(V);if(A===this.userId&&t.path.isEqual(le))return Hd(e).get(Z).next(Ue=>{if(!Ue)throw bn();$n(Ue.userId===this.userId),l.push(su(this.serializer,Ue))});E.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mi(pr);const o=[];return t.forEach(l=>{const c=fm(this.userId,l.path),m=IDBKeyRange.lowerBound(c),E=Fc(e).Z({range:m},(A,V,Z)=>{const[le,Ue,ct]=A,Pt=eu(Ue);le===this.userId&&l.path.isEqual(Pt)?r=r.add(ct):Z.done()});o.push(E)}),wt.waitFor(o).next(()=>this.Tn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=fm(this.userId,r),c=IDBKeyRange.lowerBound(l);let m=new mi(pr);return Fc(e).Z({range:c},(E,A,V)=>{const[Z,le,Ue]=E,ct=eu(le);Z===this.userId&&r.isPrefixOf(ct)?ct.length===o&&(m=m.add(Ue)):V.done()}).next(()=>this.Tn(e,m))}Tn(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Hd(e).get(l).next(c=>{if(null===c)throw bn();$n(c.userId===this.userId),r.push(su(this.serializer,c))}))}),wt.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return Nc(e.at,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),wt.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return wt.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Fc(e).Z({range:r},(l,c,m)=>{if(l[0]===this.userId){const E=eu(l[1]);o.push(E)}else m.done()}).next(()=>{$n(0===o.length)})})}containsKey(e,t){return jd(e,this.userId,t)}An(e){return EC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jd(n,e,t){const r=fm(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let c=!1;return Fc(n).Z({range:l,Y:!0},(m,E,A)=>{const[V,Z,le]=m;V===e&&Z===o&&(c=!0),A.done()}).next(()=>c)}function Hd(n){return ro(n,"mutations")}function Fc(n){return ro(n,"documentMutations")}function EC(n){return ro(n,"mutationQueues")}class Lc{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new Lc(0)}static bn(){return new Lc(-1)}}class OI{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const r=new Lc(t.highestTargetId);return t.highestTargetId=r.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Gn.fromTimestamp(new is(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Vn(e,o)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(r=>(r.targetCount+=1,this.Dn(t,r),this.Vn(e,r))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Up(e).delete(t.targetId)).next(()=>this.Pn(e)).next(r=>($n(r.targetCount>0),r.targetCount-=1,this.Vn(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return Up(e).Z((c,m)=>{const E=Op(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,l.push(this.removeTargetData(e,E)))}).next(()=>wt.waitFor(l)).next(()=>o)}forEachTarget(e,t){return Up(e).Z((r,o)=>{const l=Op(o);t(l)})}Pn(e){return Zn(e).get("targetGlobalKey").next(t=>($n(null!==t),t))}Vn(e,t){return Zn(e).put("targetGlobalKey",t)}Sn(e,t){return Up(e).put(iv(this.serializer,t))}Dn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=$u(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Up(e).Z({range:o,index:"queryTargetsIndex"},(c,m,E)=>{const A=Op(m);wp(t,A.target)&&(l=A,E.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=Bc(e);return t.forEach(c=>{const m=qo(c.path);o.push(l.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))}),wt.waitFor(o)}removeMatchingKeys(e,t,r){const o=Bc(e);return wt.forEach(t,l=>{const c=qo(l.path);return wt.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Bc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Bc(e);let l=sr();return o.Z({range:r,Y:!0},(c,m,E)=>{const A=eu(c[1]),V=new un(A);l=l.add(V)}).next(()=>l)}containsKey(e,t){const r=qo(t.path),o=IDBKeyRange.bound([r],[PE(r)],!1,!0);let l=0;return Bc(e).Z({index:"documentTargetsIndex",Y:!0,range:o},([c,m],E,A)=>{0!==c&&(l++,A.done())}).next(()=>l>0)}ne(e,t){return Up(e).get(t).next(r=>r?Op(r):null)}}function Up(n){return ro(n,"targets")}function Zn(n){return ro(n,"targetGlobal")}function Bc(n){return ro(n,"targetDocuments")}function kI([n,e],[t,r]){const o=pr(n,t);return 0===o?pr(e,r):o}class IC{constructor(e){this.Cn=e,this.buffer=new mi(kI),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();kI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sf{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;qt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ge.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){bd(r)?qt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ru(r)}yield t.$n(3e5)}))}}class wC{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return wt.resolve(Ba.ct);const r=new IC(t);return this.Mn.forEachTarget(e,o=>r.kn(o.sequenceNumber)).next(()=>this.Mn.Bn(e,o=>r.kn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Mn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector","Garbage collection skipped; disabled"),wt.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let r,o,l,c,m,E,A;const V=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Z=>(Z>this.params.maximumSequenceNumbersToCollect?(qt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Z}`),o=this.params.maximumSequenceNumbersToCollect):o=Z,c=Date.now(),this.nthSequenceNumber(e,o))).next(Z=>(r=Z,m=Date.now(),this.removeTargets(e,r,t))).next(Z=>(l=Z,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(Z=>(A=Date.now(),pp()<=on.in.DEBUG&&qt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-V}ms\n\tDetermined least recently used ${o} in `+(m-c)+`ms\n\tRemoved ${l} targets in `+(E-m)+`ms\n\tRemoved ${Z} documents in `+(A-E)+`ms\nTotal Duration: ${A-V}ms`),wt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:Z})))}}class Jm{constructor(e,t){this.db=e,this.garbageCollector=new wC(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Bn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(r,o)=>t(o))}addReference(e,t,r){return zd(e,r)}removeReference(e,t,r){return zd(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zd(e,t)}Kn(e,t){return function(r,o){let l=!1;return EC(r).X(c=>jd(r,c,o).next(m=>(m&&(l=!0),wt.resolve(!m)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Un(e,(c,m)=>{if(m<=t){const E=this.Kn(e,c).next(A=>{if(!A)return l++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Gn.min()),Bc(e).delete([0,qo(c.path)])))});o.push(E)}}).next(()=>wt.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zd(e,t)}Un(e,t){const r=Bc(e);let o,l=Ba.ct;return r.Z({index:"documentTargetsIndex"},([c,m],{path:E,sequenceNumber:A})=>{0===c?(l!==Ba.ct&&t(new un(eu(o)),l),l=A,o=E):l=Ba.ct}).next(()=>{l!==Ba.ct&&t(new un(eu(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zd(n,e){return Bc(n).put((r=n.currentSequenceNumber,{targetId:0,path:qo(e.path),sequenceNumber:r}));var r}class _s{constructor(){this.changes=new wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ri.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?wt.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class pS{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return $c(e).put(r)}removeEntry(e,t,r){return $c(e).delete(function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Wm(l),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Gn(e,r)))}getEntry(e,t){let r=Ri.newInvalidDocument(t);return $c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(af(t))},(o,l)=>{r=this.Qn(t,l)}).next(()=>r)}zn(e,t){let r={size:0,document:Ri.newInvalidDocument(t)};return $c(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(af(t))},(o,l)=>{r={document:this.Qn(t,l),size:Xm(l)}}).next(()=>r)}getEntries(e,t){let r=Gi();return this.jn(e,t,(o,l)=>{const c=this.Qn(o,l);r=r.insert(o,c)}).next(()=>r)}Wn(e,t){let r=Gi(),o=new ss(un.comparator);return this.jn(e,t,(l,c)=>{const m=this.Qn(l,c);r=r.insert(l,m),o=o.insert(l,Xm(c))}).next(()=>({documents:r,Hn:o}))}jn(e,t,r){if(t.isEmpty())return wt.resolve();let o=new mi(mv);t.forEach(E=>o=o.add(E));const l=IDBKeyRange.bound(af(o.first()),af(o.last())),c=o.getIterator();let m=c.getNext();return $c(e).Z({index:"documentKeyIndex",range:l},(E,A,V)=>{const Z=un.fromSegments([...A.prefixPath,A.collectionGroup,A.documentId]);for(;m&&mv(m,Z)<0;)r(m,null),m=c.getNext();m&&m.isEqual(Z)&&(r(m,A),m=c.hasNext()?c.getNext():null),m?V.G(af(m)):V.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),Wm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $c(e).j(IDBKeyRange.bound(c,m,!0)).next(E=>{let A=Gi();for(const V of E){const Z=this.Qn(un.fromSegments(V.prefixPath.concat(V.collectionGroup,V.documentId)),V);Z.isFoundDocument()&&(Tp(t,Z)||o.has(Z.key))&&(A=A.insert(Z.key,Z))}return A})}getAllFromCollectionGroup(e,t,r,o){let l=Gi();const c=gv(t,r),m=gv(t,Fa.max());return $c(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(E,A,V)=>{const Z=this.Qn(un.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);l=l.insert(Z.key,Z),l.size===o&&V.done()}).next(()=>l)}newChangeBuffer(e){return new NI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FI(e).get("remoteDocumentGlobalKey").next(t=>($n(!!t),t))}Gn(e,t){return FI(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const r=function pC(n,e){let t;if(e.document)t=yI(n.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=un.fromSegments(e.noDocument.path),o=Pc(e.noDocument.readTime);t=Ri.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return bn();{const r=un.fromSegments(e.unknownDocument.path),o=Pc(e.unknownDocument.version);t=Ri.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new is(r[0],r[1]);return Gn.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Gn.min()))return r}return Ri.newInvalidDocument(e)}}function pv(n){return new pS(n)}class NI extends _s{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new wa(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new mi((l,c)=>pr(l.canonicalString(),c.canonicalString()));return this.changes.forEach((l,c)=>{const m=this.Yn.get(l);if(t.push(this.Jn.removeEntry(e,l,m.readTime)),c.isValidDocument()){const E=rv(this.Jn.serializer,c);o=o.add(l.path.popLast());const A=Xm(E);r+=A-m.size,t.push(this.Jn.addEntry(e,l,E))}else if(r-=m.size,this.trackRemovals){const E=rv(this.Jn.serializer,c.convertToNoDocument(Gn.min()));t.push(this.Jn.addEntry(e,l,E))}}),o.forEach(l=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.Jn.updateMetadata(e,r)),wt.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(r=>(this.Yn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:r,Hn:o})=>(o.forEach((l,c)=>{this.Yn.set(l,{size:c,readTime:r.get(l).readTime})}),r))}}function FI(n){return ro(n,"remoteDocumentGlobal")}function $c(n){return ro(n,"remoteDocumentsV14")}function af(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function gv(n,e){const t=e.documentKey.path.toArray();return[n,Wm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function mv(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(o=pr(t[l],r[l]),o)return o;return o=pr(t.length,r.length),o||(o=pr(t[t.length-2],r[r.length-2]),o||pr(t[t.length-1],r[r.length-1]))}class bC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class LI{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Yh(r.mutation,o,oa.empty(),is.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,sr()).next(()=>r))}getLocalViewOfDocuments(e,t,r=sr()){const o=aa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let c=nu();return l.forEach((m,E)=>{c=c.insert(m,E.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=aa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,sr()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,o){let l=Gi();const c=ru(),m=ru();return t.forEach((E,A)=>{const V=r.get(A.key);o.has(A.key)&&(void 0===V||V.mutation instanceof Al)?l=l.insert(A.key,A):void 0!==V?(c.set(A.key,V.mutation.getFieldMask()),Yh(V.mutation,A,V.mutation.getFieldMask(),is.now())):c.set(A.key,oa.empty())}),this.recalculateAndSaveOverlays(e,l).next(E=>(E.forEach((A,V)=>c.set(A,V)),t.forEach((A,V)=>{var Z;return m.set(A,new bC(V,null!==(Z=c.get(A))&&void 0!==Z?Z:null))}),m))}recalculateAndSaveOverlays(e,t){const r=ru();let o=new ss((c,m)=>c-m),l=sr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(E=>{const A=t.get(E);if(null===A)return;let V=r.get(E)||oa.empty();V=m.applyToLocalView(A,V),r.set(E,V);const Z=(o.get(m.batchId)||sr()).add(E);o=o.insert(m.batchId,Z)})}).next(()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const E=m.getNext(),A=E.key,V=E.value,Z=Pd();V.forEach(le=>{if(!l.has(le)){const Ue=Mp(t.get(le),r.get(le));null!==Ue&&Z.set(le,Ue),l=l.add(le)}}),c.push(this.documentOverlayCache.saveOverlays(e,A,Z))}return wt.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return un.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):B_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):wt.resolve(aa());let m=-1,E=l;return c.next(A=>wt.forEach(A,(V,Z)=>(m<Z.largestBatchId&&(m=Z.largestBatchId),l.get(V)?wt.resolve():this.remoteDocumentCache.getEntry(e,V).next(le=>{E=E.insert(V,le)}))).next(()=>this.populateOverlays(e,A,l)).next(()=>this.computeViews(e,E,A,sr())).next(V=>({batchId:m,changes:Rd(V)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new un(t)).next(r=>{let o=nu();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let l=nu();return this.indexManager.getCollectionParents(e,o).next(c=>wt.forEach(c,m=>{const E=(A=t,V=m.child(o),new Uu(V,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt));var A,V;return this.getDocumentsMatchingCollectionQuery(e,E,r).next(A=>{A.forEach((V,Z)=>{l=l.insert(V,Z)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(l=>{o.forEach((m,E)=>{const A=E.getKey();null===l.get(A)&&(l=l.insert(A,Ri.newInvalidDocument(A)))});let c=nu();return l.forEach((m,E)=>{const A=o.get(m);void 0!==A&&Yh(A.mutation,E,oa.empty(),is.now()),Tp(t,E)&&(c=c.insert(m,E))}),c})}}class CC{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return wt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Mr(r.createTime)}),wt.resolve()}getNamedQuery(e,t){return wt.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:qm(r.bundledQuery),readTime:Mr(r.readTime)}),wt.resolve();var r}}class Vp{constructor(){this.overlays=new ss(un.comparator),this.ts=new Map}getOverlay(e,t){return wt.resolve(this.overlays.get(t))}getOverlays(e,t){const r=aa();return wt.forEach(t,o=>this.getOverlay(e,o).next(l=>{null!==l&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.re(e,t,l)}),wt.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ts.get(r);return void 0!==o&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.ts.delete(r)),wt.resolve()}getOverlaysForCollection(e,t,r){const o=aa(),l=t.length+1,c=new un(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const E=m.getNext().value,A=E.getKey();if(!t.isPrefixOf(A.path))break;A.path.length===l&&E.largestBatchId>r&&o.set(E.getKey(),E)}return wt.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new ss((A,V)=>A-V);const c=this.overlays.getIterator();for(;c.hasNext();){const A=c.getNext().value;if(A.getKey().getCollectionGroup()===t&&A.largestBatchId>r){let V=l.get(A.largestBatchId);null===V&&(V=aa(),l=l.insert(A.largestBatchId,V)),V.set(A.getKey(),A)}}const m=aa(),E=l.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((A,V)=>m.set(A,V)),!(m.size()>=o)););return wt.resolve(m)}re(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.ts.get(o.largestBatchId).delete(r.key);this.ts.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new $m(t,r));let l=this.ts.get(t);void 0===l&&(l=sr(),this.ts.set(t,l)),this.ts.set(t,l.add(r.key))}}class yv{constructor(){this.es=new mi(Eo.ns),this.ss=new mi(Eo.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const r=new Eo(e,t);this.es=this.es.add(r),this.ss=this.ss.add(r)}os(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.us(new Eo(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}hs(e){const t=new un(new $r([])),r=new Eo(t,e),o=new Eo(t,e+1),l=[];return this.ss.forEachInRange([r,o],c=>{this.us(c),l.push(c.key)}),l}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new un(new $r([])),r=new Eo(t,e),o=new Eo(t,e+1);let l=sr();return this.ss.forEachInRange([r,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Eo(e,0),r=this.es.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Eo{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return un.comparator(e.key,t.key)||pr(e.ds,t.ds)}static rs(e,t){return pr(e.ds,t.ds)||un.comparator(e.key,t.key)}}class DC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new mi(Eo.ns)}checkEmpty(e){return wt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const l=this.ws;this.ws++;const c=new Bm(l,t,r,o);this.mutationQueue.push(c);for(const m of o)this._s=this._s.add(new Eo(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return wt.resolve(c)}lookupMutationBatch(e,t){return wt.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ys(t+1),l=o<0?0:o;return wt.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return wt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return wt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Eo(t,0),o=new Eo(t,Number.POSITIVE_INFINITY),l=[];return this._s.forEachInRange([r,o],c=>{const m=this.gs(c.ds);l.push(m)}),wt.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new mi(pr);return t.forEach(o=>{const l=new Eo(o,0),c=new Eo(o,Number.POSITIVE_INFINITY);this._s.forEachInRange([l,c],m=>{r=r.add(m.ds)})}),wt.resolve(this.ps(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;un.isDocumentKey(l)||(l=l.child(""));const c=new Eo(new un(l),0);let m=new mi(pr);return this._s.forEachWhile(E=>{const A=E.key.path;return!!r.isPrefixOf(A)&&(A.length===o&&(m=m.add(E.ds)),!0)},c),wt.resolve(this.ps(m))}ps(e){const t=[];return e.forEach(r=>{const o=this.gs(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){$n(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let r=this._s;return wt.forEach(t.mutations,o=>{const l=new Eo(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this._s=r})}En(e){}containsKey(e,t){const r=new Eo(t,0),o=this._s.firstAfterOrEqual(r);return wt.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return wt.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ey{constructor(e){this.Ts=e,this.docs=new ss(un.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,c=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return wt.resolve(r?r.document.mutableCopy():Ri.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Ri.newInvalidDocument(o))}),wt.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=Gi();const c=t.path,m=new un(c.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:A,value:{document:V}}=E.getNext();if(!c.isPrefixOf(A.path))break;A.path.length>c.length+1||C_(b_(V),r)<=0||(o.has(V.key)||Tp(t,V))&&(l=l.insert(V.key,V.mutableCopy()))}return wt.resolve(l)}getAllFromCollectionGroup(e,t,r,o){bn()}Es(e,t){return wt.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new BI(this)}getSize(e){return wt.resolve(this.size)}}class BI extends _s{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Jn.addEntry(e,o)):this.Jn.removeEntry(r)}),wt.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class $I{constructor(e){this.persistence=e,this.As=new wa(t=>$u(t),wp),this.lastRemoteSnapshotVersion=Gn.min(),this.highestTargetId=0,this.Rs=0,this.vs=new yv,this.targetCount=0,this.bs=Lc.vn()}forEachTarget(e,t){return this.As.forEach((r,o)=>t(o)),wt.resolve()}getLastRemoteSnapshotVersion(e){return wt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wt.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),wt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Rs&&(this.Rs=t),wt.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new Lc(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,wt.resolve()}updateTargetData(e,t){return this.Sn(t),wt.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,wt.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.As.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.As.delete(c),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),wt.waitFor(l).next(()=>o)}getTargetCount(e){return wt.resolve(this.targetCount)}getTargetData(e,t){const r=this.As.get(t)||null;return wt.resolve(r)}addMatchingKeys(e,t,r){return this.vs.os(t,r),wt.resolve()}removeMatchingKeys(e,t,r){this.vs.cs(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),wt.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),wt.resolve()}getMatchingKeysForTargetId(e,t){const r=this.vs.fs(t);return wt.resolve(r)}containsKey(e,t){return wt.resolve(this.vs.containsKey(t))}}class _v{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new Ba(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new $I(this),this.indexManager=new RI,this.remoteDocumentCache=new ey(r=>this.referenceDelegate.Cs(r)),this.serializer=new ef(t),this.xs=new CC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Vp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ps[e.toKey()];return r||(r=new DC(t,this.referenceDelegate),this.Ps[e.toKey()]=r),r}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,r){qt("MemoryPersistence","Starting transaction:",e);const o=new TC(this.Vs.next());return this.referenceDelegate.Ns(),r(o).next(l=>this.referenceDelegate.ks(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Os(e,t){return wt.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class TC extends D_{constructor(e){super(),this.currentSequenceNumber=e}}class Uc{constructor(e){this.persistence=e,this.$s=new yv,this.Ms=null}static Fs(e){return new Uc(e)}get Bs(){if(this.Ms)return this.Ms;throw bn()}addReference(e,t,r){return this.$s.addReference(r,t),this.Bs.delete(r.toString()),wt.resolve()}removeReference(e,t,r){return this.$s.removeReference(r,t),this.Bs.add(r.toString()),wt.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),wt.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(o=>this.Bs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.Bs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wt.forEach(this.Bs,r=>{const o=un.fromPath(r);return this.Ls(e,o).next(l=>{l||t.removeEntry(o,Gn.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(r=>{r?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return wt.or([()=>wt.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class jp{constructor(e){this.serializer=e}M(e,t,r,o){const l=new kh("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BE,{unique:!0}),m.createObjectStore("documentMutations"),UI(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=wt.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),UI(e)),c=c.next(()=>function(m){const E=m.store("targetGlobal"),A={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gn.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",A)}(l))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(m,E){return E.store("mutations").j().next(A=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BE,{unique:!0});const V=E.store("mutations"),Z=A.map(le=>V.put(le));return wt.waitFor(Z)})}(e,l))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.qs(l))),r<6&&o>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Us(l)))),r<7&&o>=7&&(c=c.next(()=>this.Ks(l))),r<8&&o>=8&&(c=c.next(()=>this.Gs(e,l))),r<9&&o>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.Qs(l))),r<11&&o>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:Kb});E.createIndex("collectionPathOverlayIndex",Zb,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",pm,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:$E});E.createIndex("documentKeyIndex",UE),E.createIndex("collectionGroupIndex",A_)}(e)).next(()=>this.zs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.js(e,l))),r<15&&o>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Lh}).createIndex("sequenceNumberIndex",VE,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Yb}).createIndex("documentKeyIndex",jE,{unique:!1})}(e))),c}Us(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Xm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(o=>wt.forEach(o,l=>{const c=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(m=>wt.forEach(m,E=>{$n(E.userId===l.userId);const A=su(this.serializer,E);return Nc(e,l.userId,A).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const l=[];return r.Z((c,m)=>{const E=new $r(c),A=[0,qo(E)];l.push(t.get(A).next(V=>V?wt.resolve():t.put({targetId:0,path:qo(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>wt.waitFor(l))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:cS});const r=t.store("collectionParents"),o=new Zm,l=c=>{if(o.add(c)){const m=c.lastSegment(),E=c.popLast();return r.put({collectionId:m,parent:qo(E)})}};return t.store("remoteDocuments").Z({Y:!0},(c,m)=>{const E=new $r(c);return l(E.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([c,m,E],A)=>{const V=eu(m);return l(V.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((r,o)=>{const l=Op(o),c=iv(this.serializer,l);return t.put(c)})}zs(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((l,c)=>{const m=t.store("remoteDocumentsV14"),E=(A=c,A.document?new un($r.fromString(A.document.name).popFirst(5)):A.noDocument?un.fromSegments(A.noDocument.path):A.unknownDocument?un.fromSegments(A.unknownDocument.path):bn()).path.toArray();var A;const V={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(V))}).next(()=>wt.waitFor(o))}js(e,t){const r=t.store("mutations"),o=pv(this.serializer),l=new _v(Uc.Fs,this.serializer.se);return r.j().next(c=>{const m=new Map;return c.forEach(E=>{var A;let V=null!==(A=m.get(E.userId))&&void 0!==A?A:sr();su(this.serializer,E).keys().forEach(Z=>V=V.add(Z)),m.set(E.userId,V)}),wt.forEach(m,(E,A)=>{const V=new no(A),Z=Fp.ie(this.serializer,V),le=l.getIndexManager(V),Ue=Qm.ie(V,this.serializer,le,l.referenceDelegate);return new LI(o,Ue,Z,le).recalculateAndSaveOverlaysForDocumentKeys(new ym(t,Ba.ct),E).next()})})}}function UI(n){n.createObjectStore("targetDocuments",{keyPath:x_}).createIndex("documentTargetsIndex",qb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uS,{unique:!0}),n.createObjectStore("targetGlobal")}const vv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ev{constructor(e,t,r,o,l,c,m,E,A,V,Z=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ws=l,this.window=c,this.document=m,this.Hs=A,this.Js=V,this.Ys=Z,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=le=>Promise.resolve(),!Ev.D())throw new $t(Et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jm(this,o),this.si=t+"main",this.serializer=new ef(E),this.ii=new La(this.si,this.Ys,new jp(this.serializer)),this.Ds=new OI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pv(this.serializer),this.xs=new CI,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===V&&Bs("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $t(Et.FAILED_PRECONDITION,vv);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new Ba(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var r=(0,Ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,Ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,Ge.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(bd(e))return qt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return lf(e).get("owner").next(t=>wt.resolve(this._i(t)))}mi(e){return Hp(e).delete(this.clientId)}gi(){var e=this;return(0,Ge.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ro(r,"clientMetadata");return o.j().next(l=>{const c=e.pi(l,18e5),m=l.filter(E=>-1===c.indexOf(E));return wt.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ri)for(const r of t)e.ri.removeItem(e.Ii(r.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?wt.resolve(!0):lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new $t(Et.FAILED_PRECONDITION,vv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hp(e).j().next(r=>void 0===this.pi(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&qt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ge.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new ym(t,Ba.ct);return e.di(r).next(()=>e.mi(r))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(r=>this.yi(r.updateTimeMs,t)&&!this.Ti(r.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Hp(e).j().next(t=>this.pi(t,18e5).map(r=>r.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Qm.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new PI(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Fp.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,r){qt("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",l=15===(c=this.Ys)?mm:14===c?gm:13===c?Bh:12===c?M_:11===c?Dd:void bn();var c;let m;return this.ii.runTransaction(e,o,l,E=>(m=new ym(E,this.Vs?this.Vs.next():Ba.ct),"readwrite-primary"===t?this.li(m).next(A=>!!A||this.fi(m)).next(A=>{if(!A)throw Bs(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new $t(Et.FAILED_PRECONDITION,jb);return r(m)}).next(A=>this.wi(m).next(()=>A)):this.Pi(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}Pi(e){return lf(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $t(Et.FAILED_PRECONDITION,vv)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lf(e).put("owner",t)}static D(){return La.D()}di(e){const t=lf(e);return t.get("owner").next(r=>this._i(r)?(qt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):wt.resolve())}yi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Bs(`Detected an update time that is in the future: ${e} > ${r}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,Y.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const r=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return qt("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Bs("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){Bs("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lf(n){return ro(n,"owner")}function Hp(n){return ro(n,"clientMetadata")}function ty(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Iv{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Vi=r,this.Si=o}static Di(e,t){let r=sr(),o=sr();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Iv(e,t.fromCache,r,o)}}class wv{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Ni(e,t).next(l=>l||this.ki(e,t,o,r)).next(l=>l||this.Oi(e,t))}Ni(e,t){if(nI(t))return wt.resolve(null);let r=Yo(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Md(t,null,"F"),r=Yo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const c=sr(...l);return this.xi.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(E=>{const A=this.$i(t,m);return this.Mi(t,A,c,E.readTime)?this.Ni(e,Md(t,null,"F")):this.Fi(e,A,t,E)}))})))}ki(e,t,r,o){return nI(t)||o.isEqual(Gn.min())?this.Oi(e,t):this.xi.getDocuments(e,r).next(l=>{const c=this.$i(t,l);return this.Mi(t,c,r,o)?this.Oi(e,t):(pp()<=on.in.DEBUG&&qt("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Dp(t)),this.Fi(e,c,t,kE(o,-1)))})}$i(e,t){let r=new mi(zh(e));return t.forEach((o,l)=>{Tp(e,l)&&(r=r.add(l))}),r}Mi(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Oi(e,t){return pp()<=on.in.DEBUG&&qt("QueryEngine","Using full collection scan to execute query:",Dp(t)),this.xi.getDocumentsMatchingQuery(e,t,Fa.min())}Fi(e,t,r,o){return this.xi.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}class SC{constructor(e,t,r,o){this.persistence=e,this.Bi=t,this.serializer=o,this.Li=new ss(pr),this.qi=new wa(l=>$u(l),wp),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(r)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LI(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function VI(n,e,t,r){return new SC(n,e,t,r)}function AC(n,e){return jI.apply(this,arguments)}function jI(){return jI=(0,Ge.Z)(function*(n,e){const t=sn(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Gi(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const c=[],m=[];let E=sr();for(const A of o){c.push(A.batchId);for(const V of A.mutations)E=E.add(V.key)}for(const A of l){m.push(A.batchId);for(const V of A.mutations)E=E.add(V.key)}return t.localDocuments.getDocuments(r,E).next(A=>({Qi:A,removedBatchIds:c,addedBatchIds:m}))})})}),jI.apply(this,arguments)}function xC(n){const e=sn(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function zp(n,e,t){let r=sr(),o=sr();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let c=Gi();return t.forEach((m,E)=>{const A=l.get(m);E.isFoundDocument()!==A.isFoundDocument()&&(o=o.add(m)),E.isNoDocument()&&E.version.isEqual(Gn.min())?(e.removeEntry(m,E.readTime),c=c.insert(m,E)):!A.isValidDocument()||E.version.compareTo(A.version)>0||0===E.version.compareTo(A.version)&&A.hasPendingWrites?(e.addEntry(E),c=c.insert(m,E)):qt("LocalStore","Ignoring outdated watch update for ",m,". Current version:",A.version," Watch version:",E.version)}),{zi:c,ji:o}})}function MC(n,e){const t=sn(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uf(n,e){const t=sn(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ds.getTargetData(r,e).next(l=>l?(o=l,wt.resolve(o)):t.Ds.allocateTargetId(r).next(c=>(o=new iu(e,c,0,r.currentSequenceNumber),t.Ds.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Li.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Li=t.Li.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Gd(n,e,t){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,Ge.Z)(function*(n,e,t){const r=sn(n),o=r.Li.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!bd(c))throw c;qt("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Li=r.Li.remove(e),r.qi.delete(o.target)}),Wd.apply(this,arguments)}function ny(n,e,t){const r=sn(n);let o=Gn.min(),l=sr();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,E,A){const V=sn(m),Z=V.qi.get(A);return void 0!==Z?wt.resolve(V.Li.get(Z)):V.Ds.getTargetData(E,A)}(r,c,Yo(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(c,m.targetId).next(E=>{l=E})}).next(()=>r.Bi.getDocumentsMatchingQuery(c,e,t?o:Gn.min(),t?l:sr())).next(m=>(WI(r,Sl(e),m),{documents:m,Wi:l})))}function zI(n,e){const t=sn(n),r=sn(t.Ds),o=t.Li.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.ne(l,e).next(c=>c?c.target:null))}function GI(n,e){const t=sn(n),r=t.Ui.get(e)||Gn.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Ki.getAllFromCollectionGroup(o,e,kE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(WI(t,e,o),o))}function WI(n,e,t){let r=n.Ui.get(e)||Gn.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Ui.set(e,r)}function bv(){return bv=(0,Ge.Z)(function*(n,e,t,r){const o=sn(n);let l=sr(),c=Gi();for(const A of t){const V=e.Hi(A.metadata.name);A.document&&(l=l.add(V));const Z=e.Ji(A);Z.setReadTime(e.Yi(A.metadata.readTime)),c=c.insert(V,Z)}const m=o.Ki.newChangeBuffer({trackRemovals:!0}),E=yield uf(o,(A=r,Yo(jh($r.fromString(`__bundle__/docs/${A}`)))));var A;return o.persistence.runTransaction("Apply bundle documents","readwrite",A=>zp(A,m,c).next(V=>(m.apply(A),V)).next(V=>o.Ds.removeMatchingKeysForTargetId(A,E.targetId).next(()=>o.Ds.addMatchingKeys(A,l,E.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(A,V.zi,V.ji)).next(()=>V.zi)))}),bv.apply(this,arguments)}function qI(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,Ge.Z)(function*(n,e,t=sr()){const r=yield uf(n,Yo(qm(e.bundledQuery))),o=sn(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const c=Mr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.xs.saveNamedQuery(l,e);const m=r.withResumeToken(ai.EMPTY_BYTE_STRING,c);return o.Li=o.Li.insert(m.targetId,m),o.Ds.updateTargetData(l,m).next(()=>o.Ds.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.Ds.addMatchingKeys(l,t,r.targetId)).next(()=>o.xs.saveNamedQuery(l,e))})}),Cv.apply(this,arguments)}function YI(n,e){return`firestore_clients_${n}_${e}`}function cf(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Dv(n,e){return`firestore_targets_${n}_${e}`}class Gp{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let l,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(l=new $t(o.error.code,o.error.message))),c?new Gp(e,t,o.state,l):(Bs("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new $t(r.error.code,r.error.message))),l?new Wp(e,r.state,o):(Bs("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=Sp();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=FE(r.activeTargetIds[c]),l=l.add(r.activeTargetIds[c]);return o?new qp(e,l):(Bs("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Tv{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tv(t.clientId,t.onlineState):(Bs("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ry{constructor(){this.activeTargetIds=Sp()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Sv{constructor(e,t,r,o,l){this.window=e,this.Ws=t,this.persistenceKey=r,this.nr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new ss(pr),this.started=!1,this.ur=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.cr=YI(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new ry),this.hr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.syncEngine.bi();for(const o of t){if(o===e.nr)continue;const l=e.getItem(YI(e.persistenceKey,o));if(l){const c=qp.Zi(o,l);c&&(e.rr=e.rr.insert(c.clientId,c))}}e.mr();const r=e.storage.getItem(e.wr);if(r){const o=e.gr(r);o&&e.yr(o)}for(const o of e.ur)e.ir(o);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,r){this.Ir(e,t,r),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Dv(this.persistenceKey,e));if(r){const o=Wp.Zi(e,r);o&&(t=o.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ar(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Tr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return qt("SharedClientState","READ",e,t),t}setItem(e,t){qt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){qt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const r=e;if(r.storageArea===this.storage){if(qt("SharedClientState","EVENT",r.key,r.newValue),r.key===this.cr)return void Bs("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,Ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.hr.test(r.key)){if(null==r.newValue){const o=t.br(r.key);return t.Pr(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.Pr(o.clientId,o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Sr(r.key,r.newValue);if(o)return t.Dr(o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.gr(r.newValue);if(o)return t.yr(o)}}else if(r.key===t.ar){const o=function(l){let c=Ba.ct;if(null!=l)try{const m=JSON.parse(l);$n("number"==typeof m),c=m}catch(m){Bs("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);o!==Ba.ct&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.kr(r.newValue);yield Promise.all(o.map(l=>t.syncEngine.Or(l)))}}else t.ur.push(r)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,r){const o=new Gp(this.currentUser,e,t,r),l=cf(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Xi())}Tr(e){const t=cf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,r){const o=Dv(this.persistenceKey,e),l=new Wp(e,t,r);this.setItem(o,l.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.br(e);return qp.Zi(r,t)}Sr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return Gp.Zi(new no(void 0!==r[2]?r[2]:null),o,t)}Cr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Wp.Zi(o,t)}gr(e){return Tv.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,Ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);qt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const r=t?this.rr.insert(e,t):this.rr.remove(e),o=this.pr(this.rr),l=this.pr(r),c=[],m=[];return l.forEach(E=>{o.has(E)||c.push(E)}),o.forEach(E=>{l.has(E)||m.push(E)}),this.syncEngine.Fr(c,m).then(()=>{this.rr=r})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Sp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class iy{constructor(){this.Br=new ry,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,r){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new ry,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class RC{qr(e){}shutdown(){}}class Av{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){qt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){qt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Yp=null;function xv(){return null===Yp?Yp=268435456+Math.round(2147483648*Math.random()):Yp++,"0x"+Yp.toString(16)}const PC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OC{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Io="WebChannelConnection";class kC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,r,o,l){const c=xv(),m=this.ao(e,t);qt("RestConnection",`Sending RPC '${e}' ${c}:`,m,r);const E={};return this.ho(E,o,l),this.lo(e,m,E,r).then(A=>(qt("RestConnection",`Received RPC '${e}' ${c}: `,A),A),A=>{throw Jl("RestConnection",`RPC '${e}' ${c} failed with error: `,A,"url: ",m,"request:",r),A})}fo(e,t,r,o,l,c){return this.co(e,t,r,o,l)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+wc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}ao(e,t){return`${this.ro}/v1/${t}:${PC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,o){const l=xv();return new Promise((c,m)=>{const E=new TE;E.setWithCredentials(!0),E.listenOnce(Nb.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case Id.NO_ERROR:const V=E.getResponseJson();qt(Io,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(V)),c(V);break;case Id.TIMEOUT:qt(Io,`RPC '${e}' ${l} timed out`),m(new $t(Et.DEADLINE_EXCEEDED,"Request time out"));break;case Id.HTTP_ERROR:const Z=E.getStatus();if(qt(Io,`RPC '${e}' ${l} failed with status:`,Z,"response text:",E.getResponseText()),Z>0){let le=E.getResponseJson();Array.isArray(le)&&(le=le[0]);const Ue=null==le?void 0:le.error;if(Ue&&Ue.status&&Ue.message){const ct=function(Pt){const jt=Pt.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(jt)>=0?jt:Et.UNKNOWN}(Ue.status);m(new $t(ct,Ue.message))}else m(new $t(Et.UNKNOWN,"Server responded with status "+E.getStatus()))}else m(new $t(Et.UNAVAILABLE,"Connection failed."));break;default:bn()}}finally{qt(Io,`RPC '${e}' ${l} completed.`)}});const A=JSON.stringify(o);qt(Io,`RPC '${e}' ${l} sending request:`,o),E.send(t,"POST",A,r,15)})}wo(e,t,r){const o=xv(),l=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=kb(),m=Ph(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(E.xmlHttpFactory=new Fb({})),this.ho(E.initMessageHeaders,t,r),E.encodeInitMessageHeaders=!0;const A=l.join("");qt(Io,`Creating RPC '${e}' stream ${o}: ${A}`,E);const V=c.createWebChannel(A,E);let Z=!1,le=!1;const Ue=new OC({Wr:Pt=>{le?qt(Io,`Not sending because RPC '${e}' stream ${o} is closed:`,Pt):(Z||(qt(Io,`Opening RPC '${e}' stream ${o} transport.`),V.open(),Z=!0),qt(Io,`RPC '${e}' stream ${o} sending:`,Pt),V.send(Pt))},Hr:()=>V.close()}),ct=(Pt,jt,Hn)=>{Pt.listen(jt,or=>{try{Hn(or)}catch(Mn){setTimeout(()=>{throw Mn},0)}})};return ct(V,um.EventType.OPEN,()=>{le||qt(Io,`RPC '${e}' stream ${o} transport opened.`)}),ct(V,um.EventType.CLOSE,()=>{le||(le=!0,qt(Io,`RPC '${e}' stream ${o} transport closed`),Ue.so())}),ct(V,um.EventType.ERROR,Pt=>{le||(le=!0,Jl(Io,`RPC '${e}' stream ${o} transport errored:`,Pt),Ue.so(new $t(Et.UNAVAILABLE,"The operation could not be completed")))}),ct(V,um.EventType.MESSAGE,Pt=>{var jt;if(!le){const Hn=Pt.data[0];$n(!!Hn);const Mn=Hn.error||(null===(jt=Hn[0])||void 0===jt?void 0:jt.error);if(Mn){qt(Io,`RPC '${e}' stream ${o} received error:`,Mn);const Yn=Mn.status;let Er=function(Fo){const dl=Vs[Fo];if(void 0!==dl)return X_(dl)}(Yn),Rr=Mn.message;void 0===Er&&(Er=Et.INTERNAL,Rr="Unknown error status: "+Yn+" with message "+Mn.message),le=!0,Ue.so(new $t(Er,Rr)),V.close()}else qt(Io,`RPC '${e}' stream ${o} received:`,Hn),Ue.io(Hn)}}),ct(m,CE.STAT_EVENT,Pt=>{Pt.stat===DE.PROXY?qt(Io,`RPC '${e}' stream ${o} detected buffering proxy`):Pt.stat===DE.NOPROXY&&qt(Io,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Ue.no()},0),Ue}}function Mv(){return typeof window<"u"?window:null}function sy(){return typeof document<"u"?document:null}function Kp(n){return new uC(n,!0)}class Rv{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Ws=e,this.timerId=t,this._o=r,this.mo=o,this.yo=l,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),o=Math.max(0,t-r);o>0&&qt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,o,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class KI{constructor(e,t,r,o,l,c,m,E){this.Ws=e,this.bo=r,this.Po=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Rv(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,Ge.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,Ge.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var r=this;return(0,Ge.Z)(function*(){r.Bo(),r.Lo(),r.Co.cancel(),r.Vo++,4!==e?r.Co.reset():t&&t.code===Et.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),r.Co.Eo()):t&&t.code===Et.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.Ko(r,o)},r=>{e(()=>{const o=new $t(Et.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Go(o)})})}Ko(e,t){const r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{r(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(o=>{r(()=>this.Go(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}ko(){var e=this;this.state=5,this.Co.Ao((0,Ge.Z)(function*(){e.state=0,e.start()}))}Go(e){return qt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(qt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class NC extends KI{constructor(e,t,r,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function dC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:bn(),o=e.targetChange.targetIds||[],l=function(E,A){return E.useProto3Json?($n(void 0===A||"string"==typeof A),ai.fromBase64String(A||"")):($n(void 0===A||A instanceof Uint8Array),ai.fromUint8Array(A||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(E){const A=void 0===E.code?Et.UNKNOWN:X_(E.code);return new $t(A,E.message||"")}(c);t=new fI(r,o,l,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ml(n,r.document.name),l=Mr(r.document.updateTime),c=r.document.createTime?Mr(r.document.createTime):Gn.min(),m=new Us({mapValue:{fields:r.document.fields}}),E=Ri.newFoundDocument(o,l,c,m);t=new xl(r.targetIds||[],r.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const r=e.documentDelete,o=Ml(n,r.document),l=r.readTime?Mr(r.readTime):Gn.min(),c=Ri.newNoDocument(o,l);t=new xl([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=Ml(n,r.document);t=new xl([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return bn();{const r=e.filter,l=new dI(r.count||0);t=new hI(r.targetId,l)}}var E;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return Gn.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Gn.min():l.readTime?Mr(l.readTime):Gn.min()}(e);return this.listener.zo(t,r)}jo(e){const t={};t.database=Xh(this.serializer),t.addTarget=function(o,l){let c;const m=l.target;return c=Vh(m)?{documents:Gm(o,m)}:{query:ol(o,m)},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?c.resumeToken=J_(o,l.resumeToken):l.snapshotVersion.compareTo(Gn.min())>0&&(c.readTime=Zh(o,l.snapshotVersion.toTimestamp())),c}(this.serializer,e);const r=function hC(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return bn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Xh(this.serializer),t.removeTarget=e,this.Fo(t)}}class FC extends KI{constructor(e,t,r,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.serializer=l,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if($n(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function nv(n,e){return n&&n.length>0?($n(void 0!==e),n.map(t=>function(r,o){let l=Mr(r.updateTime?r.updateTime:o);return l.isEqual(Gn.min())&&(l=Mr(o)),new Nm(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.Zo(r,t)}return $n(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Xh(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qh(this.serializer,r))};this.Fo(t)}}class LC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.eu=!1}nu(){if(this.eu)throw new $t(Et.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.co(e,t,r,o,l)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $t(Et.UNKNOWN,o.toString())})}fo(e,t,r,o){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.fo(e,t,r,l,c,o)).catch(l=>{throw"FirebaseError"===l.name?(l.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new $t(Et.UNKNOWN,l.toString())})}terminate(){this.eu=!0}}class ZI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(Bs(t),this.ru=!1):qt("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class $C{constructor(e,t,r,o,l){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=l,this._u.qr(m=>{r.enqueueAndForget((0,Ge.Z)(function*(){var E;ju(c)&&(qt("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,Ge.Z)(function*(A){const V=sn(A);V.du.add(4),yield df(V),V.mu.set("Unknown"),V.du.delete(4),yield Zp(V)}),function(A){return E.apply(this,arguments)})(c))}))}),this.mu=new ZI(r,o)}}function Zp(n){return ay.apply(this,arguments)}function ay(){return ay=(0,Ge.Z)(function*(n){if(ju(n))for(const e of n.wu)yield e(!0)}),ay.apply(this,arguments)}function df(n){return Pv.apply(this,arguments)}function Pv(){return Pv=(0,Ge.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Pv.apply(this,arguments)}function ly(n,e){const t=sn(n);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),kv(t)?Qp(t):ff(t).No()&&Xp(t,e))}function qd(n,e){const t=sn(n),r=ff(t);t.fu.delete(e),r.No()&&Ov(t,e),0===t.fu.size&&(r.No()?r.$o():ju(t)&&t.mu.set("Unknown"))}function Xp(n,e){n.gu.Ot(e.targetId),ff(n).jo(e)}function Ov(n,e){n.gu.Ot(e),ff(n).Wo(e)}function Qp(n){n.gu=new $d({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.fu.get(e)||null}),ff(n).start(),n.mu.ou()}function kv(n){return ju(n)&&!ff(n).xo()&&n.fu.size>0}function ju(n){return 0===sn(n).du.size}function uy(n){n.gu=void 0}function UC(n){return cy.apply(this,arguments)}function cy(){return cy=(0,Ge.Z)(function*(n){n.fu.forEach((e,t)=>{Xp(n,e)})}),cy.apply(this,arguments)}function hf(n,e){return dy.apply(this,arguments)}function dy(){return dy=(0,Ge.Z)(function*(n,e){uy(n),kv(n)?(n.mu.au(e),Qp(n)):n.mu.set("Unknown")}),dy.apply(this,arguments)}function VC(n,e,t){return XI.apply(this,arguments)}function XI(){return XI=(0,Ge.Z)(function*(n,e,t){if(n.mu.set("Online"),e instanceof fI&&2===e.state&&e.cause)try{yield(r=(0,Ge.Z)(function*(o,l){const c=l.cause;for(const m of l.targetIds)o.fu.has(m)&&(yield o.remoteSyncer.rejectListen(m,c),o.fu.delete(m),o.gu.removeTarget(m))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){qt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jp(n,r)}else if(e instanceof xl?n.gu.Kt(e):e instanceof hI?n.gu.Jt(e):n.gu.zt(e),!t.isEqual(Gn.min()))try{const r=yield xC(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const c=o.gu.Xt(l);return c.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const A=o.fu.get(E);A&&o.fu.set(E,A.withResumeToken(m.resumeToken,l))}}),c.targetMismatches.forEach(m=>{const E=o.fu.get(m);if(!E)return;o.fu.set(m,E.withResumeToken(ai.EMPTY_BYTE_STRING,E.snapshotVersion)),Ov(o,m);const A=new iu(E.target,m,1,E.sequenceNumber);Xp(o,A)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){qt("RemoteStore","Failed to raise snapshot:",r),yield Jp(n,r)}var r}),XI.apply(this,arguments)}function Jp(n,e,t){return eg.apply(this,arguments)}function eg(){return eg=(0,Ge.Z)(function*(n,e,t){if(!bd(e))throw e;n.du.add(1),yield df(n),n.mu.set("Offline"),t||(t=()=>xC(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ge.Z)(function*(){qt("RemoteStore","Retrying IndexedDB access"),yield t(),n.du.delete(1),yield Zp(n)}))}),eg.apply(this,arguments)}function QI(n,e){return e().catch(t=>Jp(n,t,e))}function Vc(n){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,Ge.Z)(function*(n){const e=sn(n),t=jc(e);let r=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;JI(e);)try{const o=yield MC(e.localStore,r);if(null===o){0===e.lu.length&&t.$o();break}r=o.batchId,Fv(e,o)}catch(o){yield Jp(e,o)}Lv(e)&&Bv(e)}),Nv.apply(this,arguments)}function JI(n){return ju(n)&&n.lu.length<10}function Fv(n,e){n.lu.push(e);const t=jc(n);t.No()&&t.Jo&&t.Yo(e.mutations)}function Lv(n){return ju(n)&&!jc(n).xo()&&n.lu.length>0}function Bv(n){jc(n).start()}function ew(n){return hy.apply(this,arguments)}function hy(){return hy=(0,Ge.Z)(function*(n){jc(n).tu()}),hy.apply(this,arguments)}function jC(n){return $v.apply(this,arguments)}function $v(){return $v=(0,Ge.Z)(function*(n){const e=jc(n);for(const t of n.lu)e.Yo(t.mutations)}),$v.apply(this,arguments)}function HC(n,e,t){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,Ge.Z)(function*(n,e,t){const r=n.lu.shift(),o=Y_.from(r,e,t);yield QI(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Vc(n)}),Uv.apply(this,arguments)}function tw(n,e){return nw.apply(this,arguments)}function nw(){return nw=(0,Ge.Z)(function*(n,e){var t;e&&jc(n).Jo&&(yield(t=(0,Ge.Z)(function*(r,o){if(Z_(l=o.code)&&l!==Et.ABORTED){const c=r.lu.shift();jc(r).Oo(),yield QI(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield Vc(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),Lv(n)&&Bv(n)}),nw.apply(this,arguments)}function Vv(n,e){return jv.apply(this,arguments)}function jv(){return jv=(0,Ge.Z)(function*(n,e){const t=sn(n);t.asyncQueue.verifyOperationInProgress(),qt("RemoteStore","RemoteStore received new credentials");const r=ju(t);t.du.add(3),yield df(t),r&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield Zp(t)}),jv.apply(this,arguments)}function Hv(n,e){return rw.apply(this,arguments)}function rw(){return rw=(0,Ge.Z)(function*(n,e){const t=sn(n);e?(t.du.delete(2),yield Zp(t)):e||(t.du.add(2),yield df(t),t.mu.set("Unknown"))}),rw.apply(this,arguments)}function ff(n){return n.yu||(n.yu=function(e,t,r){const o=sn(e);return o.nu(),new NC(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Jr:UC.bind(null,n),Zr:hf.bind(null,n),zo:VC.bind(null,n)}),n.wu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.yu.Oo(),kv(n)?Qp(n):n.mu.set("Unknown")):(yield n.yu.stop(),uy(n))});return function(t){return e.apply(this,arguments)}}())),n.yu}function jc(n){return n.pu||(n.pu=function(e,t,r){const o=sn(e);return o.nu(),new FC(t,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Jr:ew.bind(null,n),Zr:tw.bind(null,n),Xo:jC.bind(null,n),Zo:HC.bind(null,n)}),n.wu.push(function(){var e=(0,Ge.Z)(function*(t){t?(n.pu.Oo(),yield Vc(n)):(yield n.pu.stop(),n.lu.length>0&&(qt("RemoteStore",`Stopping write stream with ${n.lu.length} pending writes`),n.lu=[]))});return function(t){return e.apply(this,arguments)}}())),n.pu}class fy{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,l){const c=Date.now()+r,m=new fy(e,t,c,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new $t(Et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yd(n,e){if(Bs("AsyncQueue",`${e}: ${n}`),bd(n))return new $t(Et.UNAVAILABLE,`${e}: ${n}`);throw n}class Kd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||un.comparator(t.key,r.key):(t,r)=>un.comparator(t.key,r.key),this.keyedMap=nu(),this.sortedSet=new ss(this.comparator)}static emptySet(e){return new Kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Kd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class iw{constructor(){this.Iu=new ss(un.comparator)}track(e){const t=e.doc.key,r=this.Iu.get(t);r?0!==e.type&&3===r.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==r.type?this.Iu=this.Iu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Iu=this.Iu.remove(t):1===e.type&&2===r.type?this.Iu=this.Iu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):bn():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,r)=>{e.push(r)}),e}}class pf{constructor(e,t,r,o,l,c,m,E,A){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=E,this.hasCachedResults=A}static fromInitialDocuments(e,t,r,o,l){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new pf(e,t,Kd.emptySet(t),c,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class zC{constructor(){this.Eu=void 0,this.listeners=[]}}class GC{constructor(){this.queries=new wa(e=>iI(e),Cp),this.onlineState="Unknown",this.Au=new Set}}function zv(n,e){return Gv.apply(this,arguments)}function Gv(){return Gv=(0,Ge.Z)(function*(n,e){const t=sn(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new zC),o)try{l.Eu=yield t.onListen(r)}catch(c){const m=Yd(c,`Initialization of query '${Dp(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,l),l.listeners.push(e),e.Ru(t.onlineState),l.Eu&&e.vu(l.Eu)&&py(t)}),Gv.apply(this,arguments)}function Wv(n,e){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Ge.Z)(function*(n,e){const t=sn(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const c=l.listeners.indexOf(e);c>=0&&(l.listeners.splice(c,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Zd.apply(this,arguments)}function sw(n,e){const t=sn(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const m of c.listeners)m.vu(o)&&(r=!0);c.Eu=o}}r&&py(t)}function ow(n,e,t){const r=sn(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function py(n){n.Au.forEach(e=>{e.next()})}class gy{constructor(e,t,r){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new pf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=pf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class aw{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class qv{constructor(e){this.serializer=e}Hi(e){return Ml(this.serializer,e)}Ji(e){return e.metadata.exists?yI(this.serializer,e.document,!1):Ri.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return Mr(e)}}class WC{constructor(e,t,r){this.Ou=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=qC(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const r=$r.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new qv(this.serializer);for(const o of e)if(o.metadata.queries){const l=r.Hi(o.metadata.name);for(const c of o.metadata.queries){const m=(t.get(c)||sr()).add(l);t.set(c,m)}}return t}complete(){var e=this;return(0,Ge.Z)(function*(){const t=yield function mS(n,e,t,r){return bv.apply(this,arguments)}(e.localStore,new qv(e.serializer),e.documents,e.Ou.id),r=e.Mu(e.documents);for(const o of e.queries)yield qI(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function qC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Yv{constructor(e){this.key=e}}class lw{constructor(e){this.key=e}}class uw{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=sr(),this.mutatedKeys=sr(),this.Ku=zh(e),this.Gu=new Kd(this.Ku)}get Qu(){return this.Lu}zu(e,t){const r=t?t.ju:new iw,o=t?t.Gu:this.Gu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const E="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,A="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((V,Z)=>{const le=o.get(V),Ue=Tp(this.query,Z)?Z:null,ct=!!le&&this.mutatedKeys.has(le.key),Pt=!!Ue&&(Ue.hasLocalMutations||this.mutatedKeys.has(Ue.key)&&Ue.hasCommittedMutations);let jt=!1;le&&Ue?le.data.isEqual(Ue.data)?ct!==Pt&&(r.track({type:3,doc:Ue}),jt=!0):this.Wu(le,Ue)||(r.track({type:2,doc:Ue}),jt=!0,(E&&this.Ku(Ue,E)>0||A&&this.Ku(Ue,A)<0)&&(m=!0)):!le&&Ue?(r.track({type:0,doc:Ue}),jt=!0):le&&!Ue&&(r.track({type:1,doc:le}),jt=!0,(E||A)&&(m=!0)),jt&&(Ue?(c=c.add(Ue),l=Pt?l.add(V):l.delete(V)):(c=c.delete(V),l=l.delete(V)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const V="F"===this.query.limitType?c.last():c.first();c=c.delete(V.key),l=l.delete(V.key),r.track({type:1,doc:V})}return{Gu:c,ju:r,Mi:m,mutatedKeys:l}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const l=e.ju.Tu();l.sort((A,V)=>function(Z,le){const Ue=ct=>{switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bn()}};return Ue(Z)-Ue(le)}(A.type,V.type)||this.Ku(A.doc,V.doc)),this.Hu(r);const c=t?this.Ju():[],m=0===this.Uu.size&&this.current?1:0,E=m!==this.qu;return this.qu=m,0!==l.length||E?{snapshot:new pf(this.query,e.Gu,o,l,e.mutatedKeys,0===m,E,!1,!!r&&r.resumeToken.approximateByteSize()>0),Yu:c}:{Yu:c}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new iw,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=sr(),this.Gu.forEach(r=>{this.Zu(r.key)&&(this.Uu=this.Uu.add(r.key))});const t=[];return e.forEach(r=>{this.Uu.has(r)||t.push(new lw(r))}),this.Uu.forEach(r=>{e.has(r)||t.push(new Yv(r))}),t}Xu(e){this.Lu=e.Wi,this.Uu=sr();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return pf.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class YC{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class KC{constructor(e){this.key=e,this.ec=!1}}class tg{constructor(e,t,r,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new wa(m=>iI(m),Cp),this.ic=new Map,this.rc=new Set,this.oc=new ss(un.comparator),this.uc=new Map,this.cc=new yv,this.ac={},this.hc=new Map,this.lc=Lc.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function ZC(n,e){return ng.apply(this,arguments)}function ng(){return ng=(0,Ge.Z)(function*(n,e){const t=a0(n);let r,o;const l=t.sc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.tc();else{const c=yield uf(t.localStore,Yo(e));t.isPrimaryClient&&ly(t.remoteStore,c);const m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield al(t,e,r,"current"===m,c.resumeToken)}return o}),ng.apply(this,arguments)}function al(n,e,t,r,o){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,Ge.Z)(function*(n,e,t,r,o){n.dc=(Z,le,Ue)=>{return(ct=(0,Ge.Z)(function*(Pt,jt,Hn,or){let Mn=jt.view.zu(Hn);Mn.Mi&&(Mn=yield ny(Pt.localStore,jt.query,!1).then(({documents:Rr})=>jt.view.zu(Rr,Mn)));const Yn=or&&or.targetChanges.get(jt.targetId),Er=jt.view.applyChanges(Mn,Pt.isPrimaryClient,Yn);return t0(Pt,jt.targetId,Er.Yu),Er.snapshot}),function(Pt,jt,Hn,or){return ct.apply(this,arguments)})(n,Z,le,Ue);var ct};const l=yield ny(n.localStore,e,!0),c=new uw(e,l.Wi),m=c.zu(l.documents),E=Mc.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),A=c.applyChanges(m,n.isPrimaryClient,E);t0(n,t,A.Yu);const V=new YC(e,t,c);return n.sc.set(e,V),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),A.snapshot}),Kv.apply(this,arguments)}function Zv(n,e){return Xd.apply(this,arguments)}function Xd(){return Xd=(0,Ge.Z)(function*(n,e){const t=sn(n),r=t.sc.get(e),o=t.ic.get(r.targetId);if(o.length>1)return t.ic.set(r.targetId,o.filter(l=>!Cp(l,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),qd(t.remoteStore,r.targetId),Hc(t,r.targetId)}).catch(Ru))):(Hc(t,r.targetId),yield Gd(t.localStore,r.targetId,!0))}),Xd.apply(this,arguments)}function Xv(){return Xv=(0,Ge.Z)(function*(n,e,t){const r=ag(n);try{const o=yield function(l,c){const m=sn(l),E=is.now(),A=c.reduce((le,Ue)=>le.add(Ue.key),sr());let V,Z;return m.persistence.runTransaction("Locally write mutations","readwrite",le=>{let Ue=Gi(),ct=sr();return m.Ki.getEntries(le,A).next(Pt=>{Ue=Pt,Ue.forEach((jt,Hn)=>{Hn.isValidDocument()||(ct=ct.add(jt))})}).next(()=>m.localDocuments.getOverlayedDocuments(le,Ue)).next(Pt=>{V=Pt;const jt=[];for(const Hn of c){const or=z_(Hn,V.get(Hn.key).overlayedDocument);null!=or&&jt.push(new Al(Hn.key,or,nC(or.value.mapValue),Bi.exists(!0)))}return m.mutationQueue.addMutationBatch(le,E,jt,c)}).next(Pt=>{Z=Pt;const jt=Pt.applyToLocalDocumentSet(V,ct);return m.documentOverlayCache.saveOverlays(le,Pt.batchId,jt)})}).then(()=>({batchId:Z.batchId,changes:Rd(V)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,c,m){let E=l.ac[l.currentUser.toKey()];E||(E=new ss(pr)),E=E.insert(c,m),l.ac[l.currentUser.toKey()]=E}(r,o.batchId,t),yield ou(r,o.changes),yield Vc(r.remoteStore)}catch(o){const l=Yd(o,"Failed to persist write");t.reject(l)}}),Xv.apply(this,arguments)}function cw(n,e){return gf.apply(this,arguments)}function gf(){return gf=(0,Ge.Z)(function*(n,e){const t=sn(n);try{const r=yield function HI(n,e){const t=sn(n),r=e.snapshotVersion;let o=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Ki.newChangeBuffer({trackRemovals:!0});o=t.Li;const m=[];e.targetChanges.forEach((V,Z)=>{const le=o.get(Z);if(!le)return;m.push(t.Ds.removeMatchingKeys(l,V.removedDocuments,Z).next(()=>t.Ds.addMatchingKeys(l,V.addedDocuments,Z)));let Ue=le.withSequenceNumber(l.currentSequenceNumber);var ct,Pt,jt;e.targetMismatches.has(Z)?Ue=Ue.withResumeToken(ai.EMPTY_BYTE_STRING,Gn.min()).withLastLimboFreeSnapshotVersion(Gn.min()):V.resumeToken.approximateByteSize()>0&&(Ue=Ue.withResumeToken(V.resumeToken,r)),o=o.insert(Z,Ue),Pt=Ue,jt=V,(0===(ct=le).resumeToken.approximateByteSize()||Pt.snapshotVersion.toMicroseconds()-ct.snapshotVersion.toMicroseconds()>=3e8||jt.addedDocuments.size+jt.modifiedDocuments.size+jt.removedDocuments.size>0)&&m.push(t.Ds.updateTargetData(l,Ue))});let E=Gi(),A=sr();if(e.documentUpdates.forEach(V=>{e.resolvedLimboDocuments.has(V)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,V))}),m.push(zp(l,c,e.documentUpdates).next(V=>{E=V.zi,A=V.ji})),!r.isEqual(Gn.min())){const V=t.Ds.getLastRemoteSnapshotVersion(l).next(Z=>t.Ds.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(V)}return wt.waitFor(m).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,E,A)).next(()=>E)}).then(l=>(t.Li=o,l))}(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.uc.get(l);c&&($n(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.ec=!0:o.modifiedDocuments.size>0?$n(c.ec):o.removedDocuments.size>0&&($n(c.ec),c.ec=!1))}),yield ou(t,r,e)}catch(r){yield Ru(r)}}),gf.apply(this,arguments)}function rg(n,e,t){const r=sn(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.sc.forEach((l,c)=>{const m=c.view.Ru(e);m.snapshot&&o.push(m.snapshot)}),function(l,c){const m=sn(l);m.onlineState=c;let E=!1;m.queries.forEach((A,V)=>{for(const Z of V.listeners)Z.Ru(c)&&(E=!0)}),E&&py(m)}(r.eventManager,e),o.length&&r.nc.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function QC(n,e,t){return Qv.apply(this,arguments)}function Qv(){return Qv=(0,Ge.Z)(function*(n,e,t){const r=sn(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.uc.get(e),l=o&&o.key;if(l){let c=new ss(un.comparator);c=c.insert(l,Ri.newNoDocument(l,Gn.min()));const m=sr().add(l),E=new Kh(Gn.min(),new Map,new mi(pr),c,m);yield cw(r,E),r.oc=r.oc.remove(l),r.uc.delete(e),n0(r)}else yield Gd(r.localStore,e,!1).then(()=>Hc(r,e,t)).catch(Ru)}),Qv.apply(this,arguments)}function dw(n,e){return my.apply(this,arguments)}function my(){return my=(0,Ge.Z)(function*(n,e){const t=sn(n),r=e.batch.batchId;try{const o=yield function gS(n,e){const t=sn(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Ki.newChangeBuffer({trackRemovals:!0});return function(c,m,E,A){const V=E.batch,Z=V.keys();let le=wt.resolve();return Z.forEach(Ue=>{le=le.next(()=>A.getEntry(m,Ue)).next(ct=>{const Pt=E.docVersions.get(Ue);$n(null!==Pt),ct.version.compareTo(Pt)<0&&(V.applyToRemoteDocument(ct,E),ct.isValidDocument()&&(ct.setReadTime(E.commitVersion),A.addEntry(ct)))})}),le.next(()=>c.mutationQueue.removeMutationBatch(m,V))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=sr();for(let E=0;E<c.mutationResults.length;++E)c.mutationResults[E].transformResults.length>0&&(m=m.add(c.batch.mutations[E].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);sg(t,r,null),_y(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ou(t,o)}catch(o){yield Ru(o)}}),my.apply(this,arguments)}function Jv(n,e,t){return yy.apply(this,arguments)}function yy(){return yy=(0,Ge.Z)(function*(n,e,t){const r=sn(n);try{const o=yield function(l,c){const m=sn(l);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let A;return m.mutationQueue.lookupMutationBatch(E,c).next(V=>($n(null!==V),A=V.keys(),m.mutationQueue.removeMutationBatch(E,V))).next(()=>m.mutationQueue.performConsistencyCheck(E)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(E,A,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,A)).next(()=>m.localDocuments.getDocuments(E,A))})}(r.localStore,e);sg(r,e,t),_y(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ou(r,o)}catch(o){yield Ru(o)}}),yy.apply(this,arguments)}function ig(){return ig=(0,Ge.Z)(function*(n,e){const t=sn(n);ju(t.remoteStore)||qt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const c=sn(l);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.hc.get(r)||[];o.push(e),t.hc.set(r,o)}catch(r){const o=Yd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),ig.apply(this,arguments)}function _y(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function sg(n,e,t){const r=sn(n);let o=r.ac[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.ac[r.currentUser.toKey()]=o}}function Hc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc.wc(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.hs(e).forEach(r=>{n.cc.containsKey(r)||hw(n,r)})}function hw(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(qd(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),n0(n))}function t0(n,e,t){for(const r of t)r instanceof Yv?(n.cc.addReference(r.key,e),JC(n,r)):r instanceof lw?(qt("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||hw(n,r.key)):bn()}function JC(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(qt("SyncEngine","New document in limbo: "+t),n.rc.add(r),n0(n))}function n0(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new un($r.fromString(e)),r=n.lc.next();n.uc.set(r,new KC(t)),n.oc=n.oc.insert(t,r),ly(n.remoteStore,new iu(Yo(jh(t.path)),r,2,Ba.ct))}}function ou(n,e,t){return og.apply(this,arguments)}function og(){return og=(0,Ge.Z)(function*(n,e,t){const r=sn(n),o=[],l=[],c=[];var m;r.sc.isEmpty()||(r.sc.forEach((m,E)=>{c.push(r.dc(E,e,t).then(A=>{if((A||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,null!=A&&A.fromCache?"not-current":"current"),A){o.push(A);const V=Iv.Di(E.targetId,A);l.push(V)}}))}),yield Promise.all(c),r.nc.zo(o),yield(m=(0,Ge.Z)(function*(E,A){const V=sn(E);try{yield V.persistence.runTransaction("notifyLocalViewChanges","readwrite",Z=>wt.forEach(A,le=>wt.forEach(le.Vi,Ue=>V.persistence.referenceDelegate.addReference(Z,le.targetId,Ue)).next(()=>wt.forEach(le.Si,Ue=>V.persistence.referenceDelegate.removeReference(Z,le.targetId,Ue)))))}catch(Z){if(!bd(Z))throw Z;qt("LocalStore","Failed to update sequence numbers: "+Z)}for(const Z of A){const le=Z.targetId;if(!Z.fromCache){const Ue=V.Li.get(le),Pt=Ue.withLastLimboFreeSnapshotVersion(Ue.snapshotVersion);V.Li=V.Li.insert(le,Pt)}}}),function(E,A){return m.apply(this,arguments)})(r.localStore,l))}),og.apply(this,arguments)}function fw(n,e){return vy.apply(this,arguments)}function vy(){return vy=(0,Ge.Z)(function*(n,e){const t=sn(n);if(!t.currentUser.isEqual(e)){qt("SyncEngine","User change. New user:",e.toKey());const r=yield AC(t.localStore,e);t.currentUser=e,(o=t).hc.forEach(c=>{c.forEach(m=>{m.reject(new $t(Et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ou(t,r.Qi)}var o}),vy.apply(this,arguments)}function pw(n,e){const t=sn(n),r=t.uc.get(e);if(r&&r.ec)return sr().add(r.key);{let o=sr();const l=t.ic.get(e);if(!l)return o;for(const c of l){const m=t.sc.get(c);o=o.unionWith(m.view.Qu)}return o}}function gw(n,e){return r0.apply(this,arguments)}function r0(){return r0=(0,Ge.Z)(function*(n,e){const t=sn(n),r=yield ny(t.localStore,e.query,!0),o=e.view.Xu(r);return t.isPrimaryClient&&t0(t,e.targetId,o.Yu),o}),r0.apply(this,arguments)}function mw(n,e){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,Ge.Z)(function*(n,e){const t=sn(n);return GI(t.localStore,e).then(r=>ou(t,r))}),Ey.apply(this,arguments)}function eD(n,e,t,r){return Iy.apply(this,arguments)}function Iy(){return Iy=(0,Ge.Z)(function*(n,e,t,r){const o=sn(n),l=yield function(c,m){const E=sn(c),A=sn(E.mutationQueue);return E.persistence.runTransaction("Lookup mutation documents","readonly",V=>A.In(V,m).next(Z=>Z?E.localDocuments.getDocuments(V,Z):wt.resolve(null)))}(o.localStore,e);var m;null!==l?("pending"===t?yield Vc(o.remoteStore):"acknowledged"===t||"rejected"===t?(sg(o,e,r||null),_y(o,e),m=e,sn(sn(o.localStore).mutationQueue).En(m)):bn(),yield ou(o,l)):qt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Iy.apply(this,arguments)}function No(){return No=(0,Ge.Z)(function*(n,e){const t=sn(n);if(a0(t),ag(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield Qd(t,r.toArray());t.fc=!0,yield Hv(t.remoteStore,!0);for(const l of o)ly(t.remoteStore,l)}else if(!1===e&&!1!==t.fc){const r=[];let o=Promise.resolve();t.ic.forEach((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(Hc(t,c),Gd(t.localStore,c,!0))),qd(t.remoteStore,c)}),yield o,yield Qd(t,r),function(l){const c=sn(l);c.uc.forEach((m,E)=>{qd(c.remoteStore,E)}),c.cc.ls(),c.uc=new Map,c.oc=new ss(un.comparator)}(t),t.fc=!1,yield Hv(t.remoteStore,!1)}}),No.apply(this,arguments)}function Qd(n,e,t){return s0.apply(this,arguments)}function s0(){return s0=(0,Ge.Z)(function*(n,e,t){const r=sn(n),o=[],l=[];for(const c of e){let m;const E=r.ic.get(c);if(E&&0!==E.length){m=yield uf(r.localStore,Yo(E[0]));for(const A of E){const V=r.sc.get(A),Z=yield gw(r,V);Z.snapshot&&l.push(Z.snapshot)}}else{const A=yield zI(r.localStore,c);m=yield uf(r.localStore,A),yield al(r,_w(A),c,!1,m.resumeToken)}o.push(m)}return r.nc.zo(l),o}),s0.apply(this,arguments)}function _w(n){return tI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function yS(n){const e=sn(n);return sn(sn(e.localStore).persistence).bi()}function _S(n,e,t,r){return wy.apply(this,arguments)}function wy(){return wy=(0,Ge.Z)(function*(n,e,t,r){const o=sn(n);if(o.fc)return void qt("SyncEngine","Ignoring unexpected query state notification.");const l=o.ic.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=yield GI(o.localStore,Sl(l[0])),m=Kh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ai.EMPTY_BYTE_STRING);yield ou(o,c,m);break}case"rejected":yield Gd(o.localStore,e,!0),Hc(o,e,r);break;default:bn()}}),wy.apply(this,arguments)}function o0(n,e,t){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,Ge.Z)(function*(n,e,t){const r=a0(n);if(r.fc){for(const o of e){if(r.ic.has(o)){qt("SyncEngine","Adding an already active target "+o);continue}const l=yield zI(r.localStore,o),c=yield uf(r.localStore,l);yield al(r,_w(l),c.targetId,!1,c.resumeToken),ly(r.remoteStore,c)}for(const o of t)r.ic.has(o)&&(yield Gd(r.localStore,o,!1).then(()=>{qd(r.remoteStore,o),Hc(r,o)}).catch(Ru))}}),Jd.apply(this,arguments)}function a0(n){const e=sn(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QC.bind(null,e),e.nc.zo=sw.bind(null,e.eventManager),e.nc.wc=ow.bind(null,e.eventManager),e}function ag(n){const e=sn(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jv.bind(null,e),e}class lg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ge.Z)(function*(){t.serializer=Kp(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return VI(this.persistence,new wv,e.initialUser,this.serializer)}createPersistence(e){return new _v(Uc.Fs,this.serializer)}createSharedClientState(e){return new iy}terminate(){var e=this;return(0,Ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class l0 extends lg{constructor(e,t,r){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e),yield r.mc.initialize(r,e),yield ag(r.mc.syncEngine),yield Vc(r.mc.remoteStore),yield r.persistence.hi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return VI(this.persistence,new wv,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new sf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Nh(t,this.persistence);return new zb(e.asyncQueue,r)}createPersistence(e){const t=ty(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?la.withCacheSize(this.cacheSizeBytes):la.DEFAULT;return new Ev(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Mv(),sy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new iy}}class vw extends l0{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ge.Z)(function*(){yield t().call(r,e);const o=r.mc.syncEngine;r.sharedClientState instanceof Sv&&(r.sharedClientState.syncEngine={$r:eD.bind(null,o),Mr:_S.bind(null,o),Fr:o0.bind(null,o),bi:yS.bind(null,o),Or:mw.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.hi(function(){var l=(0,Ge.Z)(function*(c){yield function yw(n,e){return No.apply(this,arguments)}(r.mc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Mv();if(!Sv.D(t))throw new $t(Et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=ty(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Sv(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mf{initialize(e,t){var r=this;return(0,Ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>rg(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=fw.bind(null,r.syncEngine),yield Hv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new GC}createDatastore(e){const t=Kp(e.databaseInfo.databaseId),r=new kC(e.databaseInfo);return new LC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=m=>rg(this.syncEngine,m,0),c=Av.D()?new Av:new RC,new $C(t,r,o,l,c);var t,r,o,l,c}createSyncEngine(e,t){return function(r,o,l,c,m,E,A){const V=new tg(r,o,l,c,m,E);return A&&(V.fc=!0),V}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ge.Z)(function*(t){const r=sn(t);qt("RemoteStore","RemoteStore shutting down."),r.du.add(5),yield df(r),r._u.shutdown(),r.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function by(n,e=10240){let t=0;return{read:()=>(0,Ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ge.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ug{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ew{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new po,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(r=>{r&&r.ku()?this.metadata.resolve(r.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.Nu)}`))},r=>this.metadata.reject(r))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,Ge.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,Ge.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const r=e.Tc.decode(t),o=Number(r);isNaN(o)&&e.Rc(`length string (${r}) is not valid number`);const l=yield e.vc(o);return new aw(JSON.parse(l),t.length+o)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,Ge.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const r=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,Ge.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Cy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new $t(Et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ge.Z)(function*(l,c){const m=sn(l),E=Xh(m.serializer)+"/documents",A={documents:c.map(Ue=>Pp(m.serializer,Ue))},V=yield m.fo("BatchGetDocuments",E,A,c.length),Z=new Map;V.forEach(Ue=>{const ct=function _I(n,e){return"found"in e?function(t,r){$n(!!r.found);const o=Ml(t,r.found.name),l=Mr(r.found.updateTime),c=r.found.createTime?Mr(r.found.createTime):Gn.min(),m=new Us({mapValue:{fields:r.found.fields}});return Ri.newFoundDocument(o,l,c,m)}(n,e):"missing"in e?function(t,r){$n(!!r.missing),$n(!!r.readTime);const o=Ml(t,r.missing),l=Mr(r.readTime);return Ri.newNoDocument(o,l)}(n,e):bn()}(m.serializer,Ue);Z.set(ct.key.toString(),ct)});const le=[];return c.forEach(Ue=>{const ct=Z.get(Ue.toString());$n(!!ct),le.push(ct)}),le}),function(l,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=un.fromPath(o);e.mutations.push(new Lm(l,e.precondition(l)))}),yield(r=(0,Ge.Z)(function*(o,l){const c=sn(o),m=Xh(c.serializer)+"/documents",E={writes:l.map(A=>Qh(c.serializer,A))};yield c.co("Commit",m,E)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw bn();t=Gn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $t(Et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gn.min())?Bi.exists(!1):Bi.updateTime(t):Bi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gn.min()))throw new $t(Et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bi.updateTime(t)}return Bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class u0{constructor(e,t,r,o,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=l,this.Vc=r.maxAttempts,this.Co=new Rv(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,Ge.Z)(function*(){const t=new Cy(e.datastore),r=e.Dc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.Cc(l)}))}).catch(o=>{e.Cc(o)})}))}Dc(e){try{const t=this.updateFunction(e);return!Fh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Z_(t)}return!1}}class vS{constructor(e,t,r,o){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=no.UNAUTHENTICATED,this.clientId=il.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ge.Z)(function*(m){qt("FirestoreClient","Received user=",m.uid),yield l.authCredentialListener(m),l.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new $t(Et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Yd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function cg(n,e){return c0.apply(this,arguments)}function c0(){return c0=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),qt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ge.Z)(function*(l){r.isEqual(l)||(yield AC(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),c0.apply(this,arguments)}function Dy(n,e){return zc.apply(this,arguments)}function zc(){return zc=(0,Ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Ty(n);qt("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>Vv(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,l)=>Vv(e.remoteStore,l)),n._onlineComponents=e}),zc.apply(this,arguments)}function Iw(n){return"FirebaseError"===n.name?n.code===Et.FAILED_PRECONDITION||n.code===Et.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function Ty(n){return dg.apply(this,arguments)}function dg(){return dg=(0,Ge.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){qt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield cg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Iw(t))throw t;Jl("Error using user provided cache. Falling back to memory cache: "+t),yield cg(n,new lg)}}else qt("FirestoreClient","Using default OfflineComponentProvider"),yield cg(n,new lg);return n._offlineComponents}),dg.apply(this,arguments)}function d0(n){return h0.apply(this,arguments)}function h0(){return h0=(0,Ge.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(qt("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dy(n,n._uninitializedComponentsProvider._online)):(qt("FirestoreClient","Using default OnlineComponentProvider"),yield Dy(n,new mf))),n._onlineComponents}),h0.apply(this,arguments)}function nD(n){return Ty(n).then(e=>e.persistence)}function Sy(n){return Ty(n).then(e=>e.localStore)}function f0(n){return d0(n).then(e=>e.remoteStore)}function p0(n){return d0(n).then(e=>e.syncEngine)}function eh(n){return m0.apply(this,arguments)}function m0(){return m0=(0,Ge.Z)(function*(n){const e=yield d0(n),t=e.eventManager;return t.onListen=ZC.bind(null,e.syncEngine),t.onUnlisten=Zv.bind(null,e.syncEngine),t}),m0.apply(this,arguments)}function Cw(n,e,t={}){const r=new po;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(o,l,c,m,E){const A=new ug({next:Z=>{l.enqueueAndForget(()=>Wv(o,V));const le=Z.docs.has(c);!le&&Z.fromCache?E.reject(new $t(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):le&&Z.fromCache&&m&&"server"===m.source?E.reject(new $t(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(Z)},error:Z=>E.reject(Z)}),V=new gy(jh(c.path),A,{includeMetadataChanges:!0,xu:!0});return zv(o,V)}(yield eh(n),n.asyncQueue,e,t,r)})),r.promise}function Tw(n,e,t={}){const r=new po;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function(o,l,c,m,E){const A=new ug({next:Z=>{l.enqueueAndForget(()=>Wv(o,V)),Z.fromCache&&"server"===m.source?E.reject(new $t(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(Z)},error:Z=>E.reject(Z)}),V=new gy(c,A,{includeMetadataChanges:!0,xu:!0});return zv(o,V)}(yield eh(n),n.asyncQueue,e,t,r)})),r.promise}const Rw=new Map;function y0(n,e,t){if(!t)throw new $t(Et.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iD(n,e,t,r){if(!0===e&&!0===r)throw new $t(Et.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _0(n){if(!un.isDocumentKey(n))throw new $t(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sD(n){if(un.isDocumentKey(n))throw new $t(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function v0(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":bn()}function Vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $t(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=v0(n);throw new $t(Et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function oD(n,e){if(e<=0)throw new $t(Et.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class aD{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new $t(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new $t(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ay{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aD({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new $t(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new $t(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aD(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new sS;switch(t.type){case"firstParty":return new xE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new $t(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Rw.get(e);t&&(qt("ComponentProvider","Removing Datastore"),Rw.delete(e),t.terminate())}(this),Promise.resolve()}}class os{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new os(this.firestore,e,this._key)}}class io{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class Hu extends io{constructor(e,t,r){super(e,t,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new os(this.firestore,null,new un(e))}withConverter(e){return new Hu(this.firestore,e,this._path)}}function E0(n,e,...t){if(n=(0,Y.m9)(n),y0("collection","path",e),n instanceof Ay){const r=$r.fromString(e,...t);return sD(r),new Hu(n,null,r)}{if(!(n instanceof os||n instanceof Hu))throw new $t(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($r.fromString(e,...t));return sD(r),new Hu(n.firestore,null,r)}}function hg(n,e,...t){if(n=(0,Y.m9)(n),1===arguments.length&&(e=il.A()),y0("doc","path",e),n instanceof Ay){const r=$r.fromString(e,...t);return _0(r),new os(n,null,new un(r))}{if(!(n instanceof os||n instanceof Hu))throw new $t(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($r.fromString(e,...t));return _0(r),new os(n.firestore,n instanceof Hu?n.converter:null,new un(r))}}function I0(n,e){return n=(0,Y.m9)(n),e=(0,Y.m9)(e),(n instanceof os||n instanceof Hu)&&(e instanceof os||e instanceof Hu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Pw(n,e){return n=(0,Y.m9)(n),e=(0,Y.m9)(e),n instanceof io&&e instanceof io&&n.firestore===e.firestore&&Cp(n._query,e._query)&&n.converter===e.converter}class w0{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Rv(this,"async_queue_retry"),this.qc=()=>{const t=sy();t&&qt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=sy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=sy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new po;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,Ge.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!bd(t))throw t;qt("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(r=>{throw this.Mc=r,this.Fc=!1,Bs("INTERNAL UNHANDLED ERROR: ",function(l){let c=l.message||"";return l.stack&&(c=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),c}(r)),r}).then(r=>(this.Fc=!1,r))));return this.Nc=t,t}enqueueAfterDelay(e,t,r){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const o=fy.createAndSchedule(this,e,t,r,l=>this.Qc(l));return this.$c.push(o),o}Uc(){this.Mc&&bn()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ge.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function My(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class uD{constructor(){this._progressObserver={},this._taskCompletionResolver=new po,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class as extends Ay{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new w0,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ow(this),this._firestoreClient.terminate()}}function ls(n){return n._firestoreClient||Ow(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ow(n){var e,t,r;const o=n._freezeSettings(),l=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Jb(n._databaseId,m,n._persistenceKey,(A=o).host,A.ssl,A.experimentalForceLongPolling,A.experimentalAutoDetectLongPolling,A.useFetchStreams));var m,A;n._firestoreClient=new vS(n._authCredentials,n._appCheckCredentials,n._queue,l),null!==(t=o.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=o.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:o.cache.kind,_offline:o.cache._offlineComponentProvider,_online:o.cache._onlineComponentProvider})}function cD(n,e,t){const r=new po;return n.asyncQueue.enqueue((0,Ge.Z)(function*(){try{yield cg(n,t),yield Dy(n,e),r.resolve()}catch(o){const l=o;if(!Iw(l))throw l;Jl("Error enabling indexeddb cache. Falling back to memory cache: "+l),r.reject(l)}})).then(()=>r.promise)}function pD(n){if(n._initialized||n._terminated)throw new $t(Et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(ai.fromBase64String(e))}catch(t){throw new $t(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ll(ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new $t(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ts(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wo{constructor(e){this._methodName=e}}class Ry{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $t(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $t(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}}const b0=/^__.*__$/;class mD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Al(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ld(e,this.data,t,this.fieldTransforms)}}class Fw{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Al(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Py(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bn()}}class fg{constructor(e,t,r,o,l,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,void 0===l&&this.Jc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new fg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Zc({path:r,ta:!1});return o.ea(e),o}na(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Zc({path:r,ta:!1});return o.Jc(),o}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return mg(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Py(this.Yc)&&b0.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class Lw{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kp(e)}ua(e,t,r,o=!1){return new fg({Yc:e,methodName:t,oa:r,path:Ts.emptyPath(),ta:!1,ra:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function th(n){const e=n._freezeSettings(),t=Kp(n._databaseId);return new Lw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pg(n,e,t,r,o,l={}){const c=n.ua(l.merge||l.mergeFields?2:0,e,t,o);D0("Data must be an object, but it was:",c,r);const m=$w(r,c);let E,A;if(l.merge)E=new oa(c.fieldMask),A=c.fieldTransforms;else if(l.mergeFields){const V=[];for(const Z of l.mergeFields){const le=gg(e,Z,t);if(!c.contains(le))throw new $t(Et.INVALID_ARGUMENT,`Field '${le}' is specified in your field mask but missing from your input data.`);ED(V,le)||V.push(le)}E=new oa(V),A=c.fieldTransforms.filter(Z=>E.covers(Z.field))}else E=null,A=c.fieldTransforms;return new mD(new Us(m),E,A)}class yf extends wo{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function Bw(n,e,t){return new fg({Yc:3,oa:e.settings.oa,methodName:n._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Oy extends wo{_toFieldTransform(e){return new xp(e.path,new Od)}isEqual(e){return e instanceof Oy}}class yD extends wo{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Bw(this,e,!0),r=this.ca.map(l=>Gc(l,t)),o=new kd(r);return new xp(e.path,o)}isEqual(e){return this===e}}class C0 extends wo{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=Bw(this,e,!0),r=this.ca.map(l=>Gc(l,t)),o=new xc(r);return new xp(e.path,o)}isEqual(e){return this===e}}class Gu extends wo{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Nd(e.serializer,V_(e.serializer,this.aa));return new xp(e.path,t)}isEqual(e){return this===e}}function au(n,e,t,r){const o=n.ua(1,e,t);D0("Data must be an object, but it was:",o,r);const l=[],c=Us.empty();Ou(r,(E,A)=>{const V=Fy(e,E,t);A=(0,Y.m9)(A);const Z=o.na(V);if(A instanceof yf)l.push(V);else{const le=Gc(A,Z);null!=le&&(l.push(V),c.set(V,le))}});const m=new oa(l);return new Fw(c,m,o.fieldTransforms)}function ky(n,e,t,r,o,l){const c=n.ua(1,e,t),m=[gg(e,r,t)],E=[o];if(l.length%2!=0)throw new $t(Et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let le=0;le<l.length;le+=2)m.push(gg(e,l[le])),E.push(l[le+1]);const A=[],V=Us.empty();for(let le=m.length-1;le>=0;--le)if(!ED(A,m[le])){const Ue=m[le];let ct=E[le];ct=(0,Y.m9)(ct);const Pt=c.na(Ue);if(ct instanceof yf)A.push(Ue);else{const jt=Gc(ct,Pt);null!=jt&&(A.push(Ue),V.set(Ue,jt))}}const Z=new oa(A);return new Fw(V,Z,c.fieldTransforms)}function Ny(n,e,t,r=!1){return Gc(t,n.ua(r?4:3,e))}function Gc(n,e){if(_D(n=(0,Y.m9)(n)))return D0("Unsupported field value:",e,n),$w(n,e);if(n instanceof wo)return function(t,r){if(!Py(r.Yc))throw r.ia(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ia(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const c of t){let m=Gc(c,r.sa(l));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Y.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return V_(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=is.fromDate(t);return{timestampValue:Zh(r.serializer,o)}}if(t instanceof is){const o=new is(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Zh(r.serializer,o)}}if(t instanceof Ry)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ll)return{bytesValue:J_(r.serializer,t._byteString)};if(t instanceof os){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.ia(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zm(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ia(`Unsupported field value: ${v0(t)}`)}(n,e)}function $w(n,e){const t={};return R_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ou(n,(r,o)=>{const l=Gc(o,e.Xc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function _D(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof is||n instanceof Ry||n instanceof ll||n instanceof os||n instanceof wo)}function D0(n,e,t){if(!_D(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=v0(t);throw e.ia("an object"===r?n+" a custom object":n+" "+r)}var r}function gg(n,e,t){if((e=(0,Y.m9)(e))instanceof zu)return e._internalPath;if("string"==typeof e)return Fy(n,e);throw mg("Field path arguments must be of type string or ",n,!1,void 0,t)}const vD=new RegExp("[~\\*/\\[\\]]");function Fy(n,e,t){if(e.search(vD)>=0)throw mg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zu(...e.split("."))._internalPath}catch{throw mg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mg(n,e,t,r,o){const l=r&&!r.isEmpty(),c=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(l||c)&&(E+=" (found",l&&(E+=` in field ${r}`),c&&(E+=` in document ${o}`),E+=")"),new $t(Et.INVALID_ARGUMENT,m+n+E)}function ED(n,e){return n.some(t=>t.isEqual(e))}class _f{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new os(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ID(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(yg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ID extends _f{data(){return super.data()}}function yg(n,e){return"string"==typeof e?Fy(n,e):e instanceof zu?e._internalPath:e._delegate._internalPath}function wD(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new $t(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class vf extends _g{}function Wu(n,e,...t){let r=[];e instanceof _g&&r.push(e),r=r.concat(t),function(o){const l=o.filter(m=>m instanceof nh).length,c=o.filter(m=>m instanceof Ef).length;if(l>1||l>0&&c>0)throw new $t(Et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class Ef extends vf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ef(e,t,r)}_apply(e){const t=this._parse(e);return MD(e._query,t),new io(e.firestore,e.converter,rI(e._query,t))}_parse(e){const t=th(e.firestore);return function(o,l,c,m,E,A,V){let Z;if(E.isKeyField()){if("array-contains"===A||"array-contains-any"===A)throw new $t(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${A}' queries on documentId().`);if("in"===A||"not-in"===A){xD(V,A);const le=[];for(const Ue of V)le.push(AD(m,o,Ue));Z={arrayValue:{values:le}}}else Z=AD(m,o,V)}else"in"!==A&&"not-in"!==A&&"array-contains-any"!==A||xD(V,A),Z=Ny(c,"where",V,"in"===A||"not-in"===A);return gr.create(E,A,Z)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class nh extends _g{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new nh(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ei.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let l=r;const c=o.getFlattenedFilters();for(const m of c)MD(l,m),l=rI(l,m)}(e._query,t),new io(e.firestore,e.converter,rI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ly extends vf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ly(e,t)}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new $t(Et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new $t(Et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ad(o,l);return function(m,E){if(null===xm(m)){const A=bp(m);null!==A&&jw(0,A,E.field)}}(r,c),c}(e._query,this._field,this._direction);return new io(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Uu(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class By extends vf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new By(e,t,r)}_apply(e){return new io(e.firestore,e.converter,Md(e._query,this._limit,this._limitType))}}class A0 extends vf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new A0(e,t,r)}_apply(e){const t=SD(e,this.type,this._docOrFields,this._inclusive);return new io(e.firestore,e.converter,(o=t,new Uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class $y extends vf{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $y(e,t,r)}_apply(e){const t=SD(e,this.type,this._docOrFields,this._inclusive);return new io(e.firestore,e.converter,(o=t,new Uu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function SD(n,e,t,r){if(t[0]=(0,Y.m9)(t[0]),t[0]instanceof _f)return function(o,l,c,m,E){if(!m)throw new $t(Et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const A=[];for(const V of Hh(o))if(V.field.isKeyField())A.push(Lu(l,m.key));else{const Z=m.data.field(V.field);if(Em(Z))throw new $t(Et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+V.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Z){const le=V.field.canonicalString();throw new $t(Et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${le}' (used as the orderBy) does not exist.`)}A.push(Z)}return new Sd(A,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=th(n.firestore);return function(l,c,m,E,A,V){const Z=l.explicitOrderBy;if(A.length>Z.length)throw new $t(Et.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const le=[];for(let Ue=0;Ue<A.length;Ue++){const ct=A[Ue];if(Z[Ue].field.isKeyField()){if("string"!=typeof ct)throw new $t(Et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ct}`);if(!B_(l)&&-1!==ct.indexOf("/"))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ct}' contains a slash.`);const Pt=l.path.child($r.fromString(ct));if(!un.isDocumentKey(Pt))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Pt}' is not because it contains an odd number of segments.`);const jt=new un(Pt);le.push(Lu(c,jt))}else{const Pt=Ny(m,E,ct);le.push(Pt)}}return new Sd(le,V)}(n._query,n.firestore._databaseId,o,e,t,r)}}function AD(n,e,t){if("string"==typeof(t=(0,Y.m9)(t))){if(""===t)throw new $t(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!B_(e)&&-1!==t.indexOf("/"))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($r.fromString(t));if(!un.isDocumentKey(r))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lu(n,new un(r))}if(t instanceof os)return Lu(n,t._key);throw new $t(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${v0(t)}.`)}function xD(n,e){if(!Array.isArray(n)||0===n.length)throw new $t(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MD(n,e){if(e.isInequality()){const r=bp(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const l=xm(n);null!==l&&jw(0,o,l)}const t=function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new $t(Et.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function jw(n,e,t){if(!t.isEqual(e))throw new $t(Et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class x0{convertValue(e,t="none"){switch(Fu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ku(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw bn()}}convertObject(e,t){const r={};return Ou(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new Ry($s(e.latitude),$s(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=GE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yp(e));default:return null}}convertTimestamp(e){const t=Tc(e);return new is(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$r.fromString(e);$n(bI(r));const o=new Nu(r.get(1),r.get(3)),l=new un(r.popFirst(5));return o.isEqual(t)||Bs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function Uy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Hw extends x0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new os(this.firestore,null,t)}}class qu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends _f{constructor(e,t,r,o,l,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Wc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(yg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Wc extends kl{data(e={}){return super.data(e)}}class rh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new qu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wc(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $t(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Wc(r._firestore,r._userDataWriter,c.doc.key,c.doc,new qu(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const m=new Wc(r._firestore,r._userDataWriter,c.doc.key,c.doc,new qu(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,A=-1;return 0!==c.type&&(E=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),1!==c.type&&(l=l.add(c.doc),A=l.indexOf(c.doc.key)),{type:MS(c.type),doc:m,oldIndex:E,newIndex:A}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MS(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bn()}}function PD(n,e){return n instanceof kl&&e instanceof kl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof rh&&e instanceof rh&&n._firestore===e._firestore&&Pw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yu extends x0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new os(this.firestore,null,t)}}function R0(n,e,t){n=Vr(n,os);const r=Vr(n.firestore,as),o=Uy(n.converter,e,t);return Eg(r,[pg(th(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Bi.none())])}function P0(n,e,t,...r){n=Vr(n,os);const o=Vr(n.firestore,as),l=th(o);let c;return c="string"==typeof(e=(0,Y.m9)(e))||e instanceof zu?ky(l,"updateDoc",n._key,e,t,r):au(l,"updateDoc",n._key,e),Eg(o,[c.toMutation(n._key,Bi.exists(!0))])}function O0(n,...e){var t,r,o;n=(0,Y.m9)(n);let l={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||My(e[c])||(l=e[c],c++);const m={includeMetadataChanges:l.includeMetadataChanges};if(My(e[c])){const Z=e[c];e[c]=null===(t=Z.next)||void 0===t?void 0:t.bind(Z),e[c+1]=null===(r=Z.error)||void 0===r?void 0:r.bind(Z),e[c+2]=null===(o=Z.complete)||void 0===o?void 0:o.bind(Z)}let E,A,V;if(n instanceof os)A=Vr(n.firestore,as),V=jh(n._key.path),E={next:Z=>{e[c]&&e[c](Vy(A,n,Z))},error:e[c+1],complete:e[c+2]};else{const Z=Vr(n,io);A=Vr(Z.firestore,as),V=Z._query;const le=new Yu(A);E={next:Ue=>{e[c]&&e[c](new rh(A,le,Z,Ue))},error:e[c+1],complete:e[c+2]},wD(n._query)}return function(Z,le,Ue,ct){const Pt=new ug(ct),jt=new gy(le,Pt,Ue);return Z.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return zv(yield eh(Z),jt)})),()=>{Pt.yc(),Z.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return Wv(yield eh(Z),jt)}))}}(ls(A),V,m,E)}function Eg(n,e){return function(t,r){const o=new po;return t.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function XC(n,e,t){return Xv.apply(this,arguments)}(yield p0(t),r,o)})),o.promise}(ls(n),e)}function Vy(n,e,t){const r=t.docs.get(e._key),o=new Yu(n);return new kl(n,o,e._key,r,new qu(t.hasPendingWrites,t.fromCache),e.converter)}const NS={maxAttempts:5};class HD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=th(e)}set(e,t,r){this._verifyNotCommitted();const o=qc(e,this._firestore),l=Uy(o.converter,t,r),c=pg(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Bi.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=qc(e,this._firestore);let c;return c="string"==typeof(t=(0,Y.m9)(t))||t instanceof zu?ky(this._dataReader,"WriteBatch.update",l._key,t,r,o):au(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=qc(e,this._firestore);return this._mutations=this._mutations.concat(new Bd(t._key,Bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $t(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qc(n,e){if((n=(0,Y.m9)(n)).firestore!==e)throw new $t(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class FS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=th(e)}get(e){const t=qc(e,this._firestore),r=new Hw(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return bn();const l=o[0];if(l.isFoundDocument())return new _f(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new _f(this._firestore,r,t._key,null,t.converter);throw bn()})}set(e,t,r){const o=qc(e,this._firestore),l=Uy(o.converter,t,r),c=pg(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const l=qc(e,this._firestore);let c;return c="string"==typeof(t=(0,Y.m9)(t))||t instanceof zu?ky(this._dataReader,"Transaction.update",l._key,t,r,o):au(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=qc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=qc(e,this._firestore),r=new Yu(this._firestore);return super.get(e).then(o=>new kl(this._firestore,r,t._key,o._document,new qu(!1,!1),t.converter))}}!function(n,e=!0){wc=Jt.SDK_VERSION,(0,Jt._registerComponent)(new tn.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const l=t.getProvider("app").getImmediate(),c=new as(new oS(t.getProvider("auth-internal")),new RE(t.getProvider("app-check-internal")),function(m,E){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new $t(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nu(m.options.projectId,E)}(l,r),l);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,Jt.registerVersion)(I_,"3.10.0",n),(0,Jt.registerVersion)(I_,"3.10.0","esm2017")}();function w(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new $t("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function R(){if(typeof Uint8Array>"u")throw new $t("unimplemented","Uint8Arrays are not available in this environment.")}function k(){if(!function Qb(){return typeof atob<"u"}())throw new $t("unimplemented","Blobs are unavailable in Firestore in this environment.")}class H{constructor(e){this._delegate=e}static fromBase64String(e){return k(),new H(ll.fromBase64String(e))}static fromUint8Array(e){return R(),new H(ll.fromUint8Array(e))}toBase64(){return k(),this._delegate.toBase64()}toUint8Array(){return R(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function te(n){return function pe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class je{enableIndexedDbPersistence(e,t){return function bS(n,e){pD(n=Vr(n,as));const t=ls(n);if(t._uninitializedComponentsProvider)throw new $t(Et.FAILED_PRECONDITION,"SDK cache is already specified.");Jl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),o=new mf;return cD(t,o,new l0(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function CS(n){pD(n=Vr(n,as));const e=ls(n);if(e._uninitializedComponentsProvider)throw new $t(Et.FAILED_PRECONDITION,"SDK cache is already specified.");Jl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new mf;return cD(e,r,new vw(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function dD(n){if(n._initialized&&!n._terminated)throw new $t(Et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new po;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ge.Z)(function*(){try{yield(t=(0,Ge.Z)(function*(r){if(!La.D())return Promise.resolve();const o=r+"main";yield La.delete(o)}),function(r){return t.apply(this,arguments)})(ty(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class ft{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lD(n,e,t,r={}){var o;const l=(n=Vr(n,Ay))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&Jl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,m;if("string"==typeof r.mockUserToken)c=r.mockUserToken,m=no.MOCK_USER;else{c=(0,Y.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new $t(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new no(E)}n._authCredentials=new SE(new Bb(c,m))}}(this._delegate,e,t,r)}enableNetwork(){return function fD(n){return function ww(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield nD(n),t=yield f0(n);return e.setNetworkEnabled(!0),function(r){const o=sn(r);return o.du.delete(0),Zp(o)}(t)}))}(ls(n=Vr(n,as)))}(this._delegate)}disableNetwork(){return function DS(n){return function bw(n){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){const e=yield nD(n),t=yield f0(n);return e.setNetworkEnabled(!1),(r=(0,Ge.Z)(function*(o){const l=sn(o);l.du.add(0),yield df(l),l.mu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(ls(n=Vr(n,as)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,iD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hD(n){return function(e){const t=new po;return e.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return function e0(n,e){return ig.apply(this,arguments)}(yield p0(e),t)})),t.promise}(ls(n=Vr(n,as)))}(this._delegate)}onSnapshotsInSync(e){return function k0(n,e){return function Sw(n,e){const t=new ug(e);return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield eh(n),o=t,sn(r).Au.add(o),void o.next();var r,o})),()=>{t.yc(),n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return r=yield eh(n),o=t,void sn(r).Au.delete(o);var r,o}))}}(ls(n=Vr(n,as)),My(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new $t("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hy(this,E0(this._delegate,e))}catch(t){throw Ln(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ot(this,hg(this._delegate,e))}catch(t){throw Ln(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $a(this,function xy(n,e){if(n=Vr(n,Ay),y0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $t(Et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new io(n,null,(t=e,new Uu($r.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ln(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function LS(n,e,t){n=Vr(n,as);const r=Object.assign(Object.assign({},NS),t);return function(o){if(o.maxAttempts<1)throw new $t(Et.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,l,c){const m=new po;return o.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){const E=yield function g0(n){return d0(n).then(e=>e.datastore)}(o);new u0(o.asyncQueue,E,c,l,m).run()})),m.promise}(ls(n),o=>e(new FS(n,o)),r)}(this._delegate,t=>e(new an(this,t)))}batch(){return ls(this._delegate),new xn(new HD(this._delegate,e=>Eg(this._delegate,e)))}loadBundle(e){return function kw(n,e){const t=ls(n=Vr(n,as)),r=new uD;return function Aw(n,e,t,r){const o=function(l,c){let m;return m="string"==typeof l?(new TextEncoder).encode(l):l,E=function(E,A){if(E instanceof Uint8Array)return by(E,A);if(E instanceof ArrayBuffer)return by(new Uint8Array(E),A);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new Ew(E,c);var E}(t,Kp(e));n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){!function tD(n,e,t){const r=sn(n);var o;(o=(0,Ge.Z)(function*(l,c,m){try{const E=yield c.getMetadata();if(yield function(le,Ue){const ct=sn(le),Pt=Mr(Ue.createTime);return ct.persistence.runTransaction("hasNewerBundle","readonly",jt=>ct.xs.getBundleMetadata(jt,Ue.id)).then(jt=>!!jt&&jt.createTime.compareTo(Pt)>=0)}(l.localStore,E))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(le=E).totalDocuments,bytesLoaded:le.totalBytes,totalDocuments:le.totalDocuments,totalBytes:le.totalBytes}),Promise.resolve(new Set);m._updateProgress(qC(E));const A=new WC(E,l.localStore,c.serializer);let V=yield c._c();for(;V;){const le=yield A.$u(V);le&&m._updateProgress(le),V=yield c._c()}const Z=yield A.complete();return yield ou(l,Z.Bu,void 0),yield function(le,Ue){const ct=sn(le);return ct.persistence.runTransaction("Save bundle","readwrite",Pt=>ct.xs.saveBundleMetadata(Pt,Ue))}(l.localStore,E),m._completeWith(Z.progress),Promise.resolve(Z.Fu)}catch(E){return Jl("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var le}),function(l,c,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield p0(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Nw(n,e){return function xw(n,e){return n.asyncQueue.enqueue((0,Ge.Z)(function*(){return function(t,r){const o=sn(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.xs.getNamedQuery(l,r))}(yield Sy(n),e)}))}(ls(n=Vr(n,as)),e).then(t=>t?new io(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $a(this,t):null)}}class Rt extends x0{constructor(e){super(),this.firestore=e}convertBytes(e){return new H(new ll(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ot.forKey(t,this.firestore,null)}}class an{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rt(e)}get(e){const t=Ig(e);return this._delegate.get(t).then(r=>new jy(this._firestore,new kl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Ig(e);return r?(w("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Ig(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}}class xn{constructor(e){this._delegate=e}set(e,t,r){const o=Ig(e);return r?(w("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=Ig(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Un{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Wc(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Un.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new Un(e,new Rt(e),t),o.set(t,l)),l}}Un.INSTANCES=new WeakMap;class Ot{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rt(e)}static forPath(e,t,r){if(e.length%2!=0)throw new $t("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ot(t,new os(t._delegate,r,new un(e)))}static forKey(e,t,r){return new Ot(t,new os(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hy(this.firestore,E0(this._delegate,e))}catch(t){throw Ln(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Y.m9)(e))instanceof os&&I0(this._delegate,e)}set(e,t){t=w("DocumentReference.set",t);try{return t?R0(this._delegate,e,t):R0(this._delegate,e)}catch(r){throw Ln(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?P0(this._delegate,e):P0(this._delegate,e,t,...r)}catch(o){throw Ln(o,"updateDoc()","DocumentReference.update()")}}delete(){return function LD(n){return Eg(Vr(n.firestore,as),[new Bd(n._key,Bi.none())])}(this._delegate)}onSnapshot(...e){const t=bi(e),r=us(e,o=>new jy(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return O0(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function OD(n){n=Vr(n,os);const e=Vr(n.firestore,as),t=ls(e),r=new Yu(e);return function rD(n,e){const t=new po;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(o,l,c){try{const m=yield function(E,A){const V=sn(E);return V.persistence.runTransaction("read document","readonly",Z=>V.localDocuments.getDocument(Z,A))}(o,l);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new $t(Et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=Yd(m,`Failed to get document '${l} from cache`);c.reject(E)}}),function(o,l,c){return r.apply(this,arguments)})(yield Sy(n),e,t);var r})),t.promise}(t,n._key).then(o=>new kl(e,r,n._key,o,new qu(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function kD(n){n=Vr(n,os);const e=Vr(n.firestore,as);return Cw(ls(e),n._key,{source:"server"}).then(t=>Vy(e,n,t))}(this._delegate):function RS(n){n=Vr(n,os);const e=Vr(n.firestore,as);return Cw(ls(e),n._key).then(t=>Vy(e,n,t))}(this._delegate),t.then(r=>new jy(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ot(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}function Ln(n,e,t){return n.message=n.message.replace(e,t),n}function bi(n){for(const e of n)if("object"==typeof e&&!te(e))return e;return{}}function us(n,e){var t,r;let o;return o=te(n[0])?n[0]:te(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class jy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ot(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return PD(this._delegate,e._delegate)}}class N0 extends jy{data(e){const t=this._delegate.data(e);return function Lb(n,e){n||bn()}(void 0!==t),t}}class $a{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rt(e)}where(e,t,r){try{return new $a(this.firestore,Wu(this._delegate,function Uw(n,e,t){const r=e,o=yg("where",n);return Ef._create(o,r,t)}(e,t,r)))}catch(o){throw Ln(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $a(this.firestore,Wu(this._delegate,function bD(n,e="asc"){const t=e,r=yg("orderBy",n);return Ly._create(r,t)}(e,t)))}catch(r){throw Ln(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $a(this.firestore,Wu(this._delegate,function CD(n){return oD("limit",n),By._create("limit",n,"F")}(e)))}catch(t){throw Ln(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $a(this.firestore,Wu(this._delegate,function SS(n){return oD("limitToLast",n),By._create("limitToLast",n,"L")}(e)))}catch(t){throw Ln(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $a(this.firestore,Wu(this._delegate,function Vw(...n){return A0._create("startAt",n,!0)}(...e)))}catch(t){throw Ln(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $a(this.firestore,Wu(this._delegate,function DD(...n){return A0._create("startAfter",n,!1)}(...e)))}catch(t){throw Ln(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $a(this.firestore,Wu(this._delegate,function TD(...n){return $y._create("endBefore",n,!1)}(...e)))}catch(t){throw Ln(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $a(this.firestore,Wu(this._delegate,function AS(...n){return $y._create("endAt",n,!0)}(...e)))}catch(t){throw Ln(t,"endAt()","Query.endAt()")}}isEqual(e){return Pw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FD(n){n=Vr(n,io);const e=Vr(n.firestore,as),t=ls(e),r=new Yu(e);return function Dw(n,e){const t=new po;return n.asyncQueue.enqueueAndForget((0,Ge.Z)(function*(){return(r=(0,Ge.Z)(function*(o,l,c){try{const m=yield ny(o,l,!0),E=new uw(l,m.Wi),A=E.zu(m.documents),V=E.applyChanges(A,!1);c.resolve(V.snapshot)}catch(m){const E=Yd(m,`Failed to execute query '${l} against cache`);c.reject(E)}}),function(o,l,c){return r.apply(this,arguments)})(yield Sy(n),e,t);var r})),t.promise}(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function Gw(n){n=Vr(n,io);const e=Vr(n.firestore,as),t=ls(e),r=new Yu(e);return Tw(t,n._query,{source:"server"}).then(o=>new rh(e,r,n,o))}(this._delegate):function ND(n){n=Vr(n,io);const e=Vr(n.firestore,as),t=ls(e),r=new Yu(e);return wD(n._query),Tw(t,n._query).then(o=>new rh(e,r,n,o))}(this._delegate),t.then(r=>new GD(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=bi(e),r=us(e,o=>new GD(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return O0(this._delegate,t,r)}withConverter(e){return new $a(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}class mM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class GD{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $a(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mM(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N0(this._firestore,r))})}isEqual(e){return PD(this._delegate,e._delegate)}}class Hy extends $a{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ot(this.firestore,e):null}doc(e){try{return new Ot(this.firestore,void 0===e?hg(this._delegate):hg(this._delegate,e))}catch(t){throw Ln(t,"doc()","CollectionReference.doc()")}}add(e){return function BD(n,e){const t=Vr(n.firestore,as),r=hg(n),o=Uy(n.converter,e);return Eg(t,[pg(th(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Bi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ot(this.firestore,t))}isEqual(e){return I0(this._delegate,e._delegate)}withConverter(e){return new Hy(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}function Ig(n){return Vr(n,os)}class WD{constructor(...e){this._delegate=new zu(...e)}static documentId(){return new WD(Ts.keyField().canonicalString())}isEqual(e){return(e=(0,Y.m9)(e))instanceof zu&&this._delegate._internalPath.isEqual(e._internalPath)}}class wg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $S(){return new Oy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new wg(e)}static delete(){const e=function BS(){return new yf("deleteField")}();return e._methodName="FieldValue.delete",new wg(e)}static arrayUnion(...e){const t=function zD(...n){return new yD("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new wg(t)}static arrayRemove(...e){const t=function US(...n){return new C0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new wg(t)}static increment(e){const t=function i(n){return new Gu("increment",n)}(e);return t._methodName="FieldValue.increment",new wg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const yM={Firestore:ft,GeoPoint:Ry,Timestamp:is,Blob:H,Transaction:an,WriteBatch:xn,DocumentReference:Ot,DocumentSnapshot:jy,Query:$a,QueryDocumentSnapshot:N0,QuerySnapshot:GD,CollectionReference:Hy,FieldPath:WD,FieldValue:wg,setLogLevel:function Yt(n){!function gp(n){bc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function VS(n,e){return function EM(n,e=hi.z){return new ue.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function qD(n,e){return VS(n,e).pipe((0,_e.U)(t=>({payload:t,type:"query"})))}function qw(n,e){return qD(n,e).pipe((0,ve.O)(void 0),tt(),(0,_e.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const E=o.find(V=>V.doc.ref.isEqual(c.ref)),A=null==t?void 0:t.payload.docs.find(V=>V.ref.isEqual(c.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(c.metadata)||!E&&A&&JSON.stringify(A.metadata)===JSON.stringify(c.metadata)||l.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),l}))}function jS(n,e,t){return qw(n,t).pipe((0,dt.R)((r,o)=>function wM(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bM(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YD(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YD(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),(0,Ut.x)(),(0,_e.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function YD(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function HS(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vM(n){(function _M(n,e){n.INTERNAL.registerComponent(new tn.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},yM)))})(n,(e,t)=>new ft(e,t,new je)),n.registerVersion("@firebase/firestore-compat","0.3.6")}(Ni.Z);class zS{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_e.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe((0,ve.O)(void 0),tt(),(0,re.h)(([r,o])=>o.length>0||!r),(0,_e.U)(([r,o])=>o),xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,dt.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HS(e);return jS(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}add(e){return this.ref.add(e)}doc(e){return new GS(this.ref.doc(e),this.afs)}}class GS{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=YS(r,t);return new zS(o,l,this.afs)}snapshotChanges(){return function IM(n,e){return VS(n,e).pipe((0,ve.O)(void 0),tt(),(0,_e.U)(([t,r])=>r.exists?null!=t&&t.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_e.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,De.D)(this.ref.get(e)).pipe(xe.iC)}}class CM{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qw(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,re.h)(t=>t.length>0),xe.iC):qw(this.query,this.afs.schedulers.outsideAngular).pipe(xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,dt.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=HS(e);return jS(this.query,t,this.afs.schedulers.outsideAngular).pipe(xe.iC)}valueChanges(e={}){return qD(this.query,this.afs.schedulers.outsideAngular).pipe((0,_e.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),xe.iC)}get(e){return(0,De.D)(this.query.get(e)).pipe(xe.iC)}}const WS=new f.OlP("angularfire2.enableFirestorePersistence"),qS=new f.OlP("angularfire2.firestore.persistenceSettings"),DM=new f.OlP("angularfire2.firestore.settings"),TM=new f.OlP("angularfire2.firestore.use-emulator");function YS(n,e=(t=>t)){return{query:e(n),ref:n}}let SM=(()=>{class n{constructor(t,r,o,l,c,m,E,A,V,Z,le,Ue,ct,Pt,jt,Hn,or){this.schedulers=E;const Mn=(0,we.on)(t,m,r),Yn=V;Z&&ao(Mn,m,le,ct,Pt,jt,Ue,Hn),[this.firestore,this.persistenceEnabled$]=(0,we.cc)(`${Mn.name}.firestore`,"AngularFirestore",Mn.name,()=>{const Er=m.runOutsideAngular(()=>Mn.firestore());if(l&&Er.settings(l),Yn&&Er.useEmulator(...Yn),o&&!(0,Ie.PM)(c)){const Rr=()=>{try{return(0,De.D)(Er.enablePersistence(A||void 0).then(()=>!0,()=>!1))}catch(Fo){return typeof console<"u"&&console.warn(Fo),(0,ae.of)(!1)}};return[Er,m.runOutsideAngular(Rr)]}return[Er,(0,ae.of)(!1)]},[l,Yn,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:c}=YS(o,r),m=this.schedulers.ngZone.run(()=>l);return new zS(m,c,this)}collectionGroup(t,r){const o=r||(c=>c),l=this.firestore.collectionGroup(t);return new CM(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new GS(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we.Dh),f.LFG(we.xv,8),f.LFG(WS,8),f.LFG(DM,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xe.HU),f.LFG(qS,8),f.LFG(TM,8),f.LFG(lo,8),f.LFG(Do,8),f.LFG(oo,8),f.LFG(zs,8),f.LFG(Ei,8),f.LFG(Ms,8),f.LFG(Gs,8),f.LFG(ii,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AM=(()=>{class n{constructor(){Zi.Z.registerVersion("angularfire",xe.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WS,useValue:!0},{provide:qS,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[SM]}),n})();var xM=B(8421),MM=B(4671),RM=B(5032),PM=B(7669);const KS="@firebase/database";let KD="";function XS(n){KD=n}class NM{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Y.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Y.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class FM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Y.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const QS=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new NM(e)}}catch{}return new FM},bg=QS("localStorage"),ZD=QS("sessionStorage"),zy=new on.Yd("@firebase/database"),JS=function(){let n=1;return function(){return n++}}(),eA=function(n){const e=(0,Y.dS)(n),t=new Y.gQ;t.update(e);const r=t.digest();return Y.US.encodeByteArray(r)},F0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=F0.apply(null,r):e+="object"==typeof r?(0,Y.Wl)(r):r,e+=" "}return e};let Cg=null,tA=!0;const nA=function(n,e){(0,Y.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(zy.logLevel=on.in.VERBOSE,Cg=zy.log.bind(zy),e&&ZD.set("logging_enabled",!0)):"function"==typeof n?Cg=n:(Cg=null,ZD.remove("logging_enabled"))},Zo=function(...n){if(!0===tA&&(tA=!1,null===Cg&&!0===ZD.get("logging_enabled")&&nA(!0)),Cg){const e=F0.apply(null,n);Cg(e)}},L0=function(n){return function(...e){Zo(n,...e)}},XD=function(...n){const e="FIREBASE INTERNAL ERROR: "+F0(...n);zy.error(e)},Yc=function(...n){const e=`FIREBASE FATAL ERROR: ${F0(...n)}`;throw zy.error(e),new Error(e)},ba=function(...n){const e="FIREBASE WARNING: "+F0(...n);zy.warn(e)},Yw=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wf="[MIN_NAME]",ih="[MAX_NAME]",Dg=function(n,e){if(n===e)return 0;if(n===wf||e===ih)return-1;if(e===wf||n===ih)return 1;{const t=sA(n),r=sA(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},$M=function(n,e){return n===e?0:n<e?-1:1},B0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,Y.Wl)(e))},QD=function(n){if("object"!=typeof n||null===n)return(0,Y.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,Y.Wl)(e[r]),t+=":",t+=QD(n[e[r]]);return t+="}",t},rA=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Xo(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const iA=function(n){(0,Y.hu)(!Yw(n),"Invalid JSON number");const r=1023;let o,l,c,m,E;0===n?(l=0,c=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(m=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=m+r,c=Math.round(n*Math.pow(2,52-m)-Math.pow(2,52))):(l=0,c=Math.round(n/Math.pow(2,-1074))));const A=[];for(E=52;E;E-=1)A.push(c%2?1:0),c=Math.floor(c/2);for(E=11;E;E-=1)A.push(l%2?1:0),l=Math.floor(l/2);A.push(o?1:0),A.reverse();const V=A.join("");let Z="";for(E=0;E<64;E+=8){let le=parseInt(V.substr(E,8),2).toString(16);1===le.length&&(le="0"+le),Z+=le}return Z.toLowerCase()},HM=new RegExp("^-?(0*)\\d{1,10}$"),sA=function(n){if(HM.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Gy=function(n){try{n()}catch(e){setTimeout(()=>{throw ba("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},WM=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class qM{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ba(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class YM{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Zo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ba(e)}}let U0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const cA=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fA="websocket",pA="long_polling";class eT{constructor(e,t,r,o,l=!1,c="",m=!1,E=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=c,this.includeNamespaceInQueryParams=m,this.isUsingEmulator=E,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gA(n,e,t){let r;if((0,Y.hu)("string"==typeof e,"typeof type must == string"),(0,Y.hu)("object"==typeof t,"typeof params must == object"),e===fA)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==pA)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function KM(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Xo(t,(l,c)=>{o.push(l+"="+c)}),r+o.join("&")}class ZM{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Y.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Y.p$)(this.counters_)}}const tT={},nT={};function rT(n){const e=n.toString();return tT[e]||(tT[e]=new ZM),tT[e]}class QM{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Gy(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class bf{constructor(e,t,r,o,l,c,m){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=c,this.lastSessionId=m,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=L0(e),this.stats_=rT(t),this.urlFn=E=>(this.appCheckToken&&(E.ac=this.appCheckToken),gA(t,pA,E))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new QM(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,Y.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iT((...l)=>{const[c,m,E,A,V]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=m,this.password=E;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);m?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(m,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[c,m]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(c,m)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&cA.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bf.forceAllow_=!0}static forceDisallow(){bf.forceDisallow_=!0}static isAvailable(){return!((0,Y.Yr)()||!bf.forceAllow_&&(bf.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Y.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,Y.h$)(t),o=rA(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Y.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Y.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class iT{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Y.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=JS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=iT.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(m){Zo("frame writing exception"),m.stack&&Zo(m.stack),Zo(m)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Zo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+o+"="+c.seg+"&ts"+o+"="+c.ts+"&d"+o+"="+c.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,Y.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Zo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Zw=null;typeof MozWebSocket<"u"?Zw=MozWebSocket:typeof WebSocket<"u"&&(Zw=WebSocket);let Wy=(()=>{class n{constructor(t,r,o,l,c,m,E){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=L0(this.connId),this.stats_=rT(r),this.connURL=n.connectionURL_(r,m,E,l,o),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l,c){const m={v:"5"};return!(0,Y.Yr)()&&typeof location<"u"&&location.hostname&&cA.test(location.hostname)&&(m.r="f"),r&&(m.s=r),o&&(m.ls=o),l&&(m.ac=l),c&&(m.p=c),gA(t,fA,m)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bg.set("previous_websocket_failure",!0);try{let o;if((0,Y.Yr)()){o={headers:{"User-Agent":`Firebase/5/${KD}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(o.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(o.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,m=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;m&&(o.proxy={origin:m})}this.mySock=new Zw(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==Zw&&!n.forceDisallow_}static previouslyFailed(){return bg.isInMemoryStorage||!0===bg.get("previous_websocket_failure")}markConnectionHealthy(){bg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,Y.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,Y.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,Y.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=rA(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),wA=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[bf,Wy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Wy&&Wy.isAvailable();let o=r&&!Wy.previouslyFailed();if(t.webSocketOnly&&(r||ba("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Wy];else{const l=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&l.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class xA{constructor(e,t,r,o,l,c,m,E,A,V){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=c,this.onReady_=m,this.onDisconnect_=E,this.onKill_=A,this.lastSessionId=V,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=L0("c:"+this.id+":"),this.transportManager_=new wA(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=$0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=B0("t",e),r=B0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=B0("t",e),r=B0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=B0("t",e);if("d"in e){const r=e.d;if("h"===t){const o=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?XD("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XD("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ba("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),$0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class MA{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class RA{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Y.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,Y.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Xw extends RA{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,Y.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Xw}getInitialEvent(e){return(0,Y.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const PA=32,OA=768;class Ci{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ci(){return new Ci("")}function Or(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Cf(n){return n.pieces_.length-n.pieceNum_}function Wi(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ci(n.pieces_,e)}function oT(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function V0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function kA(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ci(e,0)}function Ss(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ci)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new Ci(t,0)}function kr(n){return n.pieceNum_>=n.pieces_.length}function Ua(n,e){const t=Or(n),r=Or(e);if(null===t)return e;if(t===r)return Ua(Wi(n),Wi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ER(n,e){const t=V0(n,0),r=V0(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=Dg(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function aT(n,e){if(Cf(n)!==Cf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function lu(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Cf(n)>Cf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class IR{constructor(e,t){this.errorPrefix_=t,this.parts_=V0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Y.ug)(this.parts_[r]);NA(this)}}function NA(n){if(n.byteLength_>OA)throw new Error(n.errorPrefix_+"has a key path longer than "+OA+" bytes ("+n.byteLength_+").");if(n.parts_.length>PA)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+PA+") or object contains a cycle "+Tg(n))}function Tg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class lT extends RA{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new lT}getInitialEvent(e){return(0,Y.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const j0=1e3;let Jw,Sg=(()=>{class n extends MA{constructor(t,r,o,l,c,m,E,A){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=c,this.authTokenProvider_=m,this.appCheckTokenProvider_=E,this.authOverride_=A,this.id=n.nextPersistentConnectionId_++,this.log_=L0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=j0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,A&&!(0,Y.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lT.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Xw.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,c={r:l,a:t,b:r};this.log_((0,Y.Wl)(c)),(0,Y.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new Y.BH,l={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:m=>{const E=m.d;"ok"===m.s?r.resolve(E):r.reject(E)}};return this.outstandingGets_.push(l),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,o,l){this.initConnection_();const c=t._queryIdentifier,m=t._path.toString();this.log_("Listen called for "+m+" "+c),this.listens.has(m)||this.listens.set(m,new Map),(0,Y.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Y.hu)(!this.listens.get(m).has(c),"listen() called twice for same path/queryId.");const E={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(m).set(c,E),this.connected_&&this.sendListen_(E)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const c={p:o};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,E=>{const A=E.d,V=E.s;n.warnOnListenWarnings_(A,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",E),"ok"!==V&&this.removeListen_(o,l),t.onComplete&&t.onComplete(V,A))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,Y.r3)(t,"w")){const o=(0,Y.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();ba(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,Y.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,Y.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const c=l.s,m=l.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,m))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,Y.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const c={p:t};l&&(c.q=o,c.t=l),this.sendRequest("n",c)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const c={p:r,d:o};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,m=>{l&&setTimeout(()=>{l(m.s,m.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,c){this.initConnection_();const m={p:r,d:o};void 0!==c&&(m.h=c),this.outstandingPuts_.push({action:t,request:m,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,Y.Wl)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):XD("Unrecognized action received from server: "+(0,Y.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,Y.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=j0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,m=t.lastSessionId;let E=!1,A=null;const V=function(){A?A.close():(E=!0,l())};t.realtime_={close:V,sendRequest:function(Ue){(0,Y.hu)(A,"sendRequest call when we're not connected not allowed."),A.sendRequest(Ue)}};const le=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[Ue,ct]=yield Promise.all([t.authTokenProvider_.getToken(le),t.appCheckTokenProvider_.getToken(le)]);E?Zo("getToken() completed but was canceled"):(Zo("getToken() completed. Creating connection."),t.authToken_=Ue&&Ue.accessToken,t.appCheckToken_=ct&&ct.token,A=new xA(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Pt=>{ba(Pt+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},m))}catch(Ue){t.log_("Failed to get token: "+Ue),E||(t.repoInfo_.nodeAdmin&&ba(Ue),V())}}})()}interrupt(t){Zo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Zo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,Y.xb)(this.interruptReasons_)&&(this.reconnectDelay_=j0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(c=>QD(c)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new Ci(t).toString();let l;if(this.listens.has(o)){const c=this.listens.get(o);l=c.get(r),c.delete(r),0===c.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){Zo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Zo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,Y.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+KD.replace(/\./g,"-")]=1,(0,Y.uI)()?t["framework.cordova"]=1:(0,Y.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Xw.getInstance().currentlyOnline();return(0,Y.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Lr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Lr(e,t)}}class Qw{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Lr(wf,e),o=new Lr(wf,t);return 0!==this.compare(r,o)}minPost(){return Lr.MIN}}class BA extends Qw{static get __EMPTY_NODE(){return Jw}static set __EMPTY_NODE(e){Jw=e}compare(e,t){return Dg(e.name,t.name)}isDefinedOn(e){throw(0,Y.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Lr.MIN}maxPost(){return new Lr(ih,Jw)}makePost(e,t){return(0,Y.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Lr(e,Jw)}toString(){return".key"}}const Kc=new BA;class eb{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,o&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cT,Ku=(()=>{class n{constructor(t,r,o,l,c){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:ul.EMPTY_NODE,this.right=null!=c?c:ul.EMPTY_NODE}copy(t,r,o,l,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const c=o(t,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===c?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return ul.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return ul.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ul{constructor(e,t=ul.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ul(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ku.BLACK,null,null))}remove(e){return new ul(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ku.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new eb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new eb(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new eb(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new eb(this.root_,null,this.comparator_,!0,e)}}function xR(n,e){return Dg(n.name,e.name)}function uT(n,e){return Dg(n,e)}ul.EMPTY_NODE=new class AR{copy(e,t,r,o,l){return this}insert(e,t,r){return new Ku(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $A=function(n){return"number"==typeof n?"number:"+iA(n):"string:"+n},UA=function(n){if(n.isLeafNode()){const e=n.val();(0,Y.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,Y.r3)(e,".sv"),"Priority must be a string or number.")}else(0,Y.hu)(n===cT||n.isEmpty(),"priority of unexpected type.");(0,Y.hu)(n===cT||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let VA,jA,HA,qy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,Y.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),UA(this.priorityNode_)}static set __childrenNodeConstructor(t){VA=t}static get __childrenNodeConstructor(){return VA}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return kr(t)?this:".priority"===Or(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=Or(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,Y.hu)(".priority"!==o||1===Cf(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wi(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$A(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?iA(this.value_):this.value_,this.lazyHash_=eA(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,Y.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(o);return(0,Y.hu)(l>=0,"Unknown leaf type: "+r),(0,Y.hu)(c>=0,"Unknown leaf type: "+o),l===c?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-l}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const cs=new class OR extends Qw{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?Dg(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Lr.MIN}maxPost(){return new Lr(ih,new qy("[PRIORITY-POST]",HA))}makePost(e,t){const r=jA(e);return new Lr(t,new qy("[PRIORITY-POST]",r))}toString(){return".priority"}},kR=Math.log(2);class NR{constructor(e){this.count=parseInt(Math.log(e+1)/kR,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const tb=function(n,e,t,r){n.sort(e);const o=function(E,A){const V=A-E;let Z,le;if(0===V)return null;if(1===V)return Z=n[E],le=t?t(Z):Z,new Ku(le,Z.node,Ku.BLACK,null,null);{const Ue=parseInt(V/2,10)+E,ct=o(E,Ue),Pt=o(Ue+1,A);return Z=n[Ue],le=t?t(Z):Z,new Ku(le,Z.node,Ku.BLACK,ct,Pt)}},m=function(E){let A=null,V=null,Z=n.length;const le=function(ct,Pt){const jt=Z-ct,Hn=Z;Z-=ct;const or=o(jt+1,Hn),Mn=n[jt],Yn=t?t(Mn):Mn;Ue(new Ku(Yn,Mn.node,Pt,null,or))},Ue=function(ct){A?(A.left=ct,A=ct):(V=ct,A=ct)};for(let ct=0;ct<E.count;++ct){const Pt=E.nextBitIsOne(),jt=Math.pow(2,E.count-(ct+1));Pt?le(jt,Ku.BLACK):(le(jt,Ku.BLACK),le(jt,Ku.RED))}return V}(new NR(n.length));return new ul(r||e,m)};let dT;const Yy={};class sh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Y.hu)(Yy&&cs,"ChildrenNode.ts has not been loaded"),dT=dT||new sh({".priority":Yy},{".priority":cs}),dT}get(e){const t=(0,Y.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ul?t:null}hasIndex(e){return(0,Y.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Y.hu)(e!==Kc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(Lr.Wrap);let m,c=l.getNext();for(;c;)o=o||e.isDefinedOn(c.node),r.push(c),c=l.getNext();m=o?tb(r,e.getCompare()):Yy;const E=e.toString(),A=Object.assign({},this.indexSet_);A[E]=e;const V=Object.assign({},this.indexes_);return V[E]=m,new sh(V,A)}addToIndexes(e,t){const r=(0,Y.UI)(this.indexes_,(o,l)=>{const c=(0,Y.DV)(this.indexSet_,l);if((0,Y.hu)(c,"Missing index implementation for "+l),o===Yy){if(c.isDefinedOn(e.node)){const m=[],E=t.getIterator(Lr.Wrap);let A=E.getNext();for(;A;)A.name!==e.name&&m.push(A),A=E.getNext();return m.push(e),tb(m,c.getCompare())}return Yy}{const m=t.get(e.name);let E=o;return m&&(E=E.remove(new Lr(e.name,m))),E.insert(e,e.node)}});return new sh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,Y.UI)(this.indexes_,o=>{if(o===Yy)return o;{const l=t.get(e.name);return l?o.remove(new Lr(e.name,l)):o}});return new sh(r,this.indexSet_)}}let H0,Cr=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&UA(this.priorityNode_),this.children_.isEmpty()&&(0,Y.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return H0||(H0=new n(new ul(uT),null,sh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||H0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?H0:r}}getChild(t){const r=Or(t);return null===r?this:this.getImmediateChild(r).getChild(Wi(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,Y.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Lr(t,r);let l,c;r.isEmpty()?(l=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(o,this.children_));const m=l.isEmpty()?H0:this.priorityNode_;return new n(l,m,c)}}updateChild(t,r){const o=Or(t);if(null===o)return r;{(0,Y.hu)(".priority"!==Or(t)||1===Cf(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Wi(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,c=!0;if(this.forEachChild(cs,(m,E)=>{r[m]=E.val(t),o++,c&&n.INTEGER_REGEXP_.test(m)?l=Math.max(l,Number(m)):c=!1}),!t&&c&&l<2*o){const m=[];for(const E in r)m[E]=r[E];return m}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$A(this.getPriority().val())+":"),this.forEachChild(cs,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":eA(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const c=l.getPredecessorKey(new Lr(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Lr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Lr(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Lr.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)<0;)l.getNext(),c=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Lr.Wrap);let c=l.peek();for(;null!=c&&r.compare(c,t)>0;)l.getNext(),c=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===z0?-1:0}withIndex(t){if(t===Kc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Kc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(cs),l=r.getIterator(cs);let c=o.getNext(),m=l.getNext();for(;c&&m;){if(c.name!==m.name||!c.node.equals(m.node))return!1;c=o.getNext(),m=l.getNext()}return null===c&&null===m}return!1}return!1}}resolveIndex_(t){return t===Kc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const z0=new class FR extends Cr{constructor(){super(new ul(uT),Cr.EMPTY_NODE,sh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Cr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Lr,{MIN:{value:new Lr(wf,Cr.EMPTY_NODE)},MAX:{value:new Lr(ih,z0)}}),BA.__EMPTY_NODE=Cr.EMPTY_NODE,qy.__childrenNodeConstructor=Cr,function MR(n){cT=n}(z0),function PR(n){HA=n}(z0);const LR=!0;function js(n,e=null){if(null===n)return Cr.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,Y.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new qy(n,js(e));if(n instanceof Array||!LR){let t=Cr.EMPTY_NODE;return Xo(n,(r,o)=>{if((0,Y.r3)(n,r)&&"."!==r.substring(0,1)){const l=js(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(js(e))}{const t=[];let r=!1;if(Xo(n,(c,m)=>{if("."!==c.substring(0,1)){const E=js(m);E.isEmpty()||(r=r||!E.getPriority().isEmpty(),t.push(new Lr(c,E)))}}),0===t.length)return Cr.EMPTY_NODE;const l=tb(t,xR,c=>c.name,uT);if(r){const c=tb(t,cs.getCompare());return new Cr(l,js(e),new sh({".priority":c},{".priority":cs}))}return new Cr(l,js(e),sh.Default)}}!function RR(n){jA=n}(js);class hT extends Qw{constructor(e){super(),this.indexPath_=e,(0,Y.hu)(!kr(e)&&".priority"!==Or(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?Dg(e.name,t.name):l}makePost(e,t){const r=js(e),o=Cr.EMPTY_NODE.updateChild(this.indexPath_,r);return new Lr(t,o)}maxPost(){const e=Cr.EMPTY_NODE.updateChild(this.indexPath_,z0);return new Lr(ih,e)}toString(){return V0(this.indexPath_,0).join("/")}}const fT=new class BR extends Qw{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Dg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Lr.MIN}maxPost(){return Lr.MAX}makePost(e,t){const r=js(e);return new Lr(t,r)}toString(){return".value"}};function zA(n){return{type:"value",snapshotNode:n}}function Ky(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function G0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function W0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class pT{constructor(e){this.index_=e}updateChild(e,t,r,o,l,c){(0,Y.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const m=e.getImmediateChild(t);return m.getChild(o).equals(r.getChild(o))&&m.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(G0(t,m)):(0,Y.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):m.isEmpty()?c.trackChildChange(Ky(t,r)):c.trackChildChange(W0(t,r,m))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(cs,(o,l)=>{t.hasChild(o)||r.trackChildChange(G0(o,l))}),t.isLeafNode()||t.forEachChild(cs,(o,l)=>{if(e.hasChild(o)){const c=e.getImmediateChild(o);c.equals(l)||r.trackChildChange(W0(o,l,c))}else r.trackChildChange(Ky(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Cr.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class q0{constructor(e){this.indexedFilter_=new pT(e.getIndex()),this.index_=e.getIndex(),this.startPost_=q0.getStartPost_(e),this.endPost_=q0.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,o,l,c){return this.matches(new Lr(t,r))||(r=Cr.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Cr.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Cr.EMPTY_NODE);const l=this;return t.forEachChild(cs,(c,m)=>{l.matches(new Lr(c,m))||(o=o.updateImmediateChild(c,Cr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class UR{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new q0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,o,l,c){return this.rangedFilter_.matches(new Lr(t,r))||(r=Cr.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,c):this.fullLimitUpdateChild_(e,t,r,l,c)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Cr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=Cr.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;l.hasNext()&&c<this.limit_;){const m=l.getNext();if(this.withinDirectionalStart(m)){if(!this.withinDirectionalEnd(m))break;o=o.updateImmediateChild(m.name,m.node),c++}}}else{let l;o=t.withIndex(this.index_),o=o.updatePriority(Cr.EMPTY_NODE),l=this.reverse_?o.getReverseIterator(this.index_):o.getIterator(this.index_);let c=0;for(;l.hasNext();){const m=l.getNext();c<this.limit_&&this.withinDirectionalStart(m)&&this.withinDirectionalEnd(m)?c++:o=o.updateImmediateChild(m.name,Cr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let c;if(this.reverse_){const Z=this.index_.getCompare();c=(le,Ue)=>Z(Ue,le)}else c=this.index_.getCompare();const m=e;(0,Y.hu)(m.numChildren()===this.limit_,"");const E=new Lr(t,r),A=this.reverse_?m.getFirstChild(this.index_):m.getLastChild(this.index_),V=this.rangedFilter_.matches(E);if(m.hasChild(t)){const Z=m.getImmediateChild(t);let le=o.getChildAfterChild(this.index_,A,this.reverse_);for(;null!=le&&(le.name===t||m.hasChild(le.name));)le=o.getChildAfterChild(this.index_,le,this.reverse_);const Ue=null==le?1:c(le,E);if(V&&!r.isEmpty()&&Ue>=0)return null!=l&&l.trackChildChange(W0(t,r,Z)),m.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(G0(t,Z));const Pt=m.updateImmediateChild(t,Cr.EMPTY_NODE);return null!=le&&this.rangedFilter_.matches(le)?(null!=l&&l.trackChildChange(Ky(le.name,le.node)),Pt.updateImmediateChild(le.name,le.node)):Pt}}return r.isEmpty()?e:V&&c(A,E)>=0?(null!=l&&(l.trackChildChange(G0(A.name,A.node)),l.trackChildChange(Ky(t,r))),m.updateImmediateChild(t,r).updateImmediateChild(A.name,Cr.EMPTY_NODE)):e}}class nb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cs}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Y.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wf}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Y.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ih}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Y.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cs}copy(){const e=new nb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function gT(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function mT(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function rb(n,e){const t=n.copy();return t.index_=e,t}function GA(n){const e={};if(n.isDefault())return e;let t;if(n.index_===cs?t="$priority":n.index_===fT?t="$value":n.index_===Kc?t="$key":((0,Y.hu)(n.index_ instanceof hT,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,Y.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,Y.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,Y.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,Y.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,Y.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function WA(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==cs&&(e.i=n.index_.toString()),e}class ib extends MA{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=L0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Y.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const c=ib.getListenId_(e,r),m={};this.listens_[c]=m;const E=GA(e._queryParams);this.restRequest_(l+".json",E,(A,V)=>{let Z=V;if(404===A&&(Z=null,A=null),null===A&&this.onDataUpdate_(l,Z,!1,r),(0,Y.DV)(this.listens_,c)===m){let le;le=A?401===A?"permission_denied":"rest_error:"+A:"ok",o(le,null)}})}unlisten(e,t){const r=ib.getListenId_(e,t);delete this.listens_[r]}get(e){const t=GA(e._queryParams),r=e._path.toString(),o=new Y.BH;return this.restRequest_(r+".json",t,(l,c)=>{let m=c;404===l&&(m=null,l=null),null===l?(this.onDataUpdate_(r,m,!1,null),o.resolve(m)):o.reject(new Error(m))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Y.xO)(t);this.log_("Sending REST request for "+c);const m=new XMLHttpRequest;m.onreadystatechange=()=>{if(r&&4===m.readyState){this.log_("REST Response for "+c+" received. status:",m.status,"response:",m.responseText);let E=null;if(m.status>=200&&m.status<300){try{E=(0,Y.cI)(m.responseText)}catch{ba("Failed to parse JSON response for "+c+": "+m.responseText)}r(null,E)}else 401!==m.status&&404!==m.status&&ba("Got unsuccessful REST response for "+c+" Status: "+m.status),r(m.status);r=null}},m.open("GET",c,!0),m.send()})}}class WR{constructor(){this.rootNode_=Cr.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function sb(){return{value:null,children:new Map}}function Zy(n,e,t){if(kr(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Or(e);n.children.has(r)||n.children.set(r,sb()),Zy(n.children.get(r),e=Wi(e),t)}}function yT(n,e){if(kr(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(cs,(r,o)=>{Zy(n,new Ci(r),o)}),yT(n,e)}}if(n.children.size>0){const t=Or(e);return e=Wi(e),n.children.has(t)&&yT(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function _T(n,e,t){null!==n.value?t(e,n.value):function qR(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{_T(o,new Ci(e.toString()+"/"+r),t)})}class YR{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xo(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class XR{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new YR(e);const r=1e4+2e4*Math.random();$0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xo(e,(o,l)=>{l>0&&(0,Y.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),$0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var uu=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(uu||(uu={})),uu))();function IT(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ob{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=uu.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(kr(this.path)){if(null!=this.affectedTree.value)return(0,Y.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ci(e));return new ob(ci(),t,this.revert)}}return(0,Y.hu)(Or(this.path)===e,"operationForChild called for unrelated child."),new ob(Wi(this.path),this.affectedTree,this.revert)}}class Y0{constructor(e,t){this.source=e,this.path=t,this.type=uu.LISTEN_COMPLETE}operationForChild(e){return kr(this.path)?new Y0(this.source,ci()):new Y0(this.source,Wi(this.path))}}class Ag{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=uu.OVERWRITE}operationForChild(e){return kr(this.path)?new Ag(this.source,ci(),this.snap.getImmediateChild(e)):new Ag(this.source,Wi(this.path),this.snap)}}class Xy{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=uu.MERGE}operationForChild(e){if(kr(this.path)){const t=this.children.subtree(new Ci(e));return t.isEmpty()?null:t.value?new Ag(this.source,ci(),t.value):new Xy(this.source,ci(),t)}return(0,Y.hu)(Or(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Xy(this.source,Wi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Df{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kr(e))return this.isFullyInitialized()&&!this.filtered_;const t=Or(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class QR{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function K0(n,e,t,r,o,l){const c=r.filter(m=>m.type===t);c.sort((m,E)=>function tP(n,e,t){if(null==e.childName||null==t.childName)throw(0,Y.g5)("Should only compare child_ events.");const r=new Lr(e.childName,e.snapshotNode),o=new Lr(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,m,E)),c.forEach(m=>{const E=function eP(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,m,l);o.forEach(A=>{A.respondsTo(m.type)&&e.push(A.createEvent(E,n.query_))})})}function ab(n,e){return{eventCache:n,serverCache:e}}function Z0(n,e,t,r){return ab(new Df(e,t,r),n.serverCache)}function YA(n,e,t,r){return ab(n.eventCache,new Df(e,t,r))}function lb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function xg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wT;class ds{constructor(e,t=(()=>(wT||(wT=new ul($M)),wT))()){this.value=e,this.children=t}static fromObject(e){let t=new ds(null);return Xo(e,(r,o)=>{t=t.set(new Ci(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ci(),value:this.value};if(kr(e))return null;{const r=Or(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(Wi(e),t);return null!=l?{path:Ss(new Ci(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(kr(e))return this;{const t=Or(e),r=this.children.get(t);return null!==r?r.subtree(Wi(e)):new ds(null)}}set(e,t){if(kr(e))return new ds(t,this.children);{const r=Or(e),l=(this.children.get(r)||new ds(null)).set(Wi(e),t),c=this.children.insert(r,l);return new ds(this.value,c)}}remove(e){if(kr(e))return this.children.isEmpty()?new ds(null):new ds(null,this.children);{const t=Or(e),r=this.children.get(t);if(r){const o=r.remove(Wi(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new ds(null):new ds(this.value,l)}return this}}get(e){if(kr(e))return this.value;{const t=Or(e),r=this.children.get(t);return r?r.get(Wi(e)):null}}setTree(e,t){if(kr(e))return t;{const r=Or(e),l=(this.children.get(r)||new ds(null)).setTree(Wi(e),t);let c;return c=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new ds(this.value,c)}}fold(e){return this.fold_(ci(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(Ss(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,ci(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(kr(e))return null;{const l=Or(e),c=this.children.get(l);return c?c.findOnPath_(Wi(e),Ss(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ci(),t)}foreachOnPath_(e,t,r){if(kr(e))return this;{this.value&&r(t,this.value);const o=Or(e),l=this.children.get(o);return l?l.foreachOnPath_(Wi(e),Ss(t,o),r):new ds(null)}}foreach(e){this.foreach_(ci(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Ss(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Zu{constructor(e){this.writeTree_=e}static empty(){return new Zu(new ds(null))}}function X0(n,e,t){if(kr(e))return new Zu(new ds(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const c=Ua(o,e);return l=l.updateChild(c,t),new Zu(n.writeTree_.set(o,l))}{const o=new ds(t),l=n.writeTree_.setTree(e,o);return new Zu(l)}}}function bT(n,e,t){let r=n;return Xo(t,(o,l)=>{r=X0(r,Ss(e,o),l)}),r}function KA(n,e){if(kr(e))return Zu.empty();{const t=n.writeTree_.setTree(e,new ds(null));return new Zu(t)}}function CT(n,e){return null!=Mg(n,e)}function Mg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ua(t.path,e)):null}function ZA(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(cs,(r,o)=>{e.push(new Lr(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Lr(r,o.value))}),e}function Tf(n,e){if(kr(e))return n;{const t=Mg(n,e);return new Zu(null!=t?new ds(t):n.writeTree_.subtree(e))}}function DT(n){return n.writeTree_.isEmpty()}function Qy(n,e){return XA(ci(),n.writeTree_,e)}function XA(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,Y.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=XA(Ss(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ss(n,".priority"),r)),t}}function ub(n,e){return nx(e,n)}function aP(n,e){if(n.snap)return lu(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&lu(Ss(n.path,t),e))return!0;return!1}function uP(n){return n.visible}function QA(n,e,t){let r=Zu.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const c=l.path;let m;if(l.snap)lu(t,c)?(m=Ua(t,c),r=X0(r,m,l.snap)):lu(c,t)&&(m=Ua(c,t),r=X0(r,ci(),l.snap.getChild(m)));else{if(!l.children)throw(0,Y.g5)("WriteRecord should have .snap or .children");if(lu(t,c))m=Ua(t,c),r=bT(r,m,l.children);else if(lu(c,t))if(m=Ua(c,t),kr(m))r=bT(r,ci(),l.children);else{const E=(0,Y.DV)(l.children,Or(m));if(E){const A=E.getChild(Wi(m));r=X0(r,ci(),A)}}}}}return r}function JA(n,e,t,r,o){if(r||o){const l=Tf(n.visibleWrites,e);return!o&&DT(l)?t:o||null!=t||CT(l,ci())?Qy(QA(n.allWrites,function(A){return(A.visible||o)&&(!r||!~r.indexOf(A.writeId))&&(lu(A.path,e)||lu(e,A.path))},e),t||Cr.EMPTY_NODE):null}{const l=Mg(n.visibleWrites,e);if(null!=l)return l;{const c=Tf(n.visibleWrites,e);return DT(c)?t:null!=t||CT(c,ci())?Qy(c,t||Cr.EMPTY_NODE):null}}}function cb(n,e,t,r){return JA(n.writeTree,n.treePath,e,t,r)}function TT(n,e){return function cP(n,e,t){let r=Cr.EMPTY_NODE;const o=Mg(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(cs,(l,c)=>{r=r.updateImmediateChild(l,c)}),r;if(t){const l=Tf(n.visibleWrites,e);return t.forEachChild(cs,(c,m)=>{const E=Qy(Tf(l,new Ci(c)),m);r=r.updateImmediateChild(c,E)}),ZA(l).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return ZA(Tf(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function ex(n,e,t,r){return function dP(n,e,t,r,o){(0,Y.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=Ss(e,t);if(CT(n.visibleWrites,l))return null;{const c=Tf(n.visibleWrites,l);return DT(c)?o.getChild(t):Qy(c,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function db(n,e){return function fP(n,e){return Mg(n.visibleWrites,e)}(n.writeTree,Ss(n.treePath,e))}function ST(n,e,t){return function hP(n,e,t,r){const o=Ss(e,t),l=Mg(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?Qy(Tf(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function tx(n,e){return nx(Ss(n.treePath,e),n.writeTree)}function nx(n,e){return{treePath:n,writeTree:e}}class yP{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,Y.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Y.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,W0(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,G0(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,Ky(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,Y.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,W0(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const rx=new class _P{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class AT{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Df(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ST(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xg(this.viewCache_),l=function mP(n,e,t,r,o,l){return function pP(n,e,t,r,o,l,c){let m;const E=Tf(n.visibleWrites,e),A=Mg(E,ci());if(null!=A)m=A;else{if(null==t)return[];m=Qy(E,t)}if(m=m.withIndex(c),m.isEmpty()||m.isLeafNode())return[];{const V=[],Z=c.getCompare(),le=l?m.getReverseIteratorFrom(r,c):m.getIteratorFrom(r,c);let Ue=le.getNext();for(;Ue&&V.length<o;)0!==Z(Ue,r)&&V.push(Ue),Ue=le.getNext();return V}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function ix(n,e,t,r,o,l){const c=e.eventCache;if(null!=db(r,t))return e;{let m,E;if(kr(t))if((0,Y.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const A=xg(e),Z=TT(r,A instanceof Cr?A:Cr.EMPTY_NODE);m=n.filter.updateFullNode(e.eventCache.getNode(),Z,l)}else{const A=cb(r,xg(e));m=n.filter.updateFullNode(e.eventCache.getNode(),A,l)}else{const A=Or(t);if(".priority"===A){(0,Y.hu)(1===Cf(t),"Can't have a priority with additional path components");const V=c.getNode();E=e.serverCache.getNode();const Z=ex(r,t,V,E);m=null!=Z?n.filter.updatePriority(V,Z):c.getNode()}else{const V=Wi(t);let Z;if(c.isCompleteForChild(A)){E=e.serverCache.getNode();const le=ex(r,t,c.getNode(),E);Z=null!=le?c.getNode().getImmediateChild(A).updateChild(V,le):c.getNode().getImmediateChild(A)}else Z=ST(r,A,e.serverCache);m=null!=Z?n.filter.updateChild(c.getNode(),A,Z,V,o,l):c.getNode()}}return Z0(e,m,c.isFullyInitialized()||kr(t),n.filter.filtersNodes())}}function hb(n,e,t,r,o,l,c,m){const E=e.serverCache;let A;const V=c?n.filter:n.filter.getIndexedFilter();if(kr(t))A=V.updateFullNode(E.getNode(),r,null);else if(V.filtersNodes()&&!E.isFiltered()){const Ue=E.getNode().updateChild(t,r);A=V.updateFullNode(E.getNode(),Ue,null)}else{const Ue=Or(t);if(!E.isCompleteForPath(t)&&Cf(t)>1)return e;const ct=Wi(t),jt=E.getNode().getImmediateChild(Ue).updateChild(ct,r);A=".priority"===Ue?V.updatePriority(E.getNode(),jt):V.updateChild(E.getNode(),Ue,jt,ct,rx,null)}const Z=YA(e,A,E.isFullyInitialized()||kr(t),V.filtersNodes());return ix(n,Z,t,o,new AT(o,Z,l),m)}function xT(n,e,t,r,o,l,c){const m=e.eventCache;let E,A;const V=new AT(o,e,l);if(kr(t))A=n.filter.updateFullNode(e.eventCache.getNode(),r,c),E=Z0(e,A,!0,n.filter.filtersNodes());else{const Z=Or(t);if(".priority"===Z)A=n.filter.updatePriority(e.eventCache.getNode(),r),E=Z0(e,A,m.isFullyInitialized(),m.isFiltered());else{const le=Wi(t),Ue=m.getNode().getImmediateChild(Z);let ct;if(kr(le))ct=r;else{const Pt=V.getCompleteChild(Z);ct=null!=Pt?".priority"===oT(le)&&Pt.getChild(kA(le)).isEmpty()?Pt:Pt.updateChild(le,r):Cr.EMPTY_NODE}E=Ue.equals(ct)?e:Z0(e,n.filter.updateChild(m.getNode(),Z,ct,le,V,c),m.isFullyInitialized(),n.filter.filtersNodes())}}return E}function sx(n,e){return n.eventCache.isCompleteForChild(e)}function ox(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function MT(n,e,t,r,o,l,c,m){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let A,E=e;A=kr(t)?r:new ds(null).setTree(t,r);const V=e.serverCache.getNode();return A.children.inorderTraversal((Z,le)=>{if(V.hasChild(Z)){const ct=ox(0,e.serverCache.getNode().getImmediateChild(Z),le);E=hb(n,E,new Ci(Z),ct,o,l,c,m)}}),A.children.inorderTraversal((Z,le)=>{const Ue=!e.serverCache.isCompleteForChild(Z)&&null===le.value;if(!V.hasChild(Z)&&!Ue){const Pt=ox(0,e.serverCache.getNode().getImmediateChild(Z),le);E=hb(n,E,new Ci(Z),Pt,o,l,c,m)}}),E}class SP{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new pT(r.getIndex()),l=function VR(n){return n.loadsAllData()?new pT(n.getIndex()):n.hasLimit()?new UR(n):new q0(n)}(r);this.processor_=function vP(n){return{filter:n}}(l);const c=t.serverCache,m=t.eventCache,E=o.updateFullNode(Cr.EMPTY_NODE,c.getNode(),null),A=l.updateFullNode(Cr.EMPTY_NODE,m.getNode(),null),V=new Df(E,c.isFullyInitialized(),o.filtersNodes()),Z=new Df(A,m.isFullyInitialized(),l.filtersNodes());this.viewCache_=ab(Z,V),this.eventGenerator_=new QR(this.query_)}get query(){return this.query_}}function MP(n,e){const t=xg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!kr(e)&&!t.getImmediateChild(Or(e)).isEmpty())?t.getChild(e):null}function ax(n){return 0===n.eventRegistrations_.length}function lx(n,e,t){const r=[];if(t){(0,Y.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const c=l.createCancelEvent(t,o);c&&r.push(c)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const c=n.eventRegistrations_[l];if(c.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(c)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function ux(n,e,t,r){e.type===uu.MERGE&&null!==e.source.queryId&&((0,Y.hu)(xg(n.viewCache_),"We should always have a full cache before handling merges"),(0,Y.hu)(lb(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function IP(n,e,t,r,o){const l=new yP;let c,m;if(t.type===uu.OVERWRITE){const A=t;A.source.fromUser?c=xT(n,e,A.path,A.snap,r,o,l):((0,Y.hu)(A.source.fromServer,"Unknown source."),m=A.source.tagged||e.serverCache.isFiltered()&&!kr(A.path),c=hb(n,e,A.path,A.snap,r,o,m,l))}else if(t.type===uu.MERGE){const A=t;A.source.fromUser?c=function bP(n,e,t,r,o,l,c){let m=e;return r.foreach((E,A)=>{const V=Ss(t,E);sx(e,Or(V))&&(m=xT(n,m,V,A,o,l,c))}),r.foreach((E,A)=>{const V=Ss(t,E);sx(e,Or(V))||(m=xT(n,m,V,A,o,l,c))}),m}(n,e,A.path,A.children,r,o,l):((0,Y.hu)(A.source.fromServer,"Unknown source."),m=A.source.tagged||e.serverCache.isFiltered(),c=MT(n,e,A.path,A.children,r,o,m,l))}else if(t.type===uu.ACK_USER_WRITE){const A=t;c=A.revert?function TP(n,e,t,r,o,l){let c;if(null!=db(r,t))return e;{const m=new AT(r,e,o),E=e.eventCache.getNode();let A;if(kr(t)||".priority"===Or(t)){let V;if(e.serverCache.isFullyInitialized())V=cb(r,xg(e));else{const Z=e.serverCache.getNode();(0,Y.hu)(Z instanceof Cr,"serverChildren would be complete if leaf node"),V=TT(r,Z)}A=n.filter.updateFullNode(E,V,l)}else{const V=Or(t);let Z=ST(r,V,e.serverCache);null==Z&&e.serverCache.isCompleteForChild(V)&&(Z=E.getImmediateChild(V)),A=null!=Z?n.filter.updateChild(E,V,Z,Wi(t),m,l):e.eventCache.getNode().hasChild(V)?n.filter.updateChild(E,V,Cr.EMPTY_NODE,Wi(t),m,l):E,A.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=cb(r,xg(e)),c.isLeafNode()&&(A=n.filter.updateFullNode(A,c,l)))}return c=e.serverCache.isFullyInitialized()||null!=db(r,ci()),Z0(e,A,c,n.filter.filtersNodes())}}(n,e,A.path,r,o,l):function CP(n,e,t,r,o,l,c){if(null!=db(o,t))return e;const m=e.serverCache.isFiltered(),E=e.serverCache;if(null!=r.value){if(kr(t)&&E.isFullyInitialized()||E.isCompleteForPath(t))return hb(n,e,t,E.getNode().getChild(t),o,l,m,c);if(kr(t)){let A=new ds(null);return E.getNode().forEachChild(Kc,(V,Z)=>{A=A.set(new Ci(V),Z)}),MT(n,e,t,A,o,l,m,c)}return e}{let A=new ds(null);return r.foreach((V,Z)=>{const le=Ss(t,V);E.isCompleteForPath(le)&&(A=A.set(V,E.getNode().getChild(le)))}),MT(n,e,t,A,o,l,m,c)}}(n,e,A.path,A.affectedTree,r,o,l)}else{if(t.type!==uu.LISTEN_COMPLETE)throw(0,Y.g5)("Unknown operation type: "+t.type);c=function DP(n,e,t,r,o){const l=e.serverCache;return ix(n,YA(e,l.getNode(),l.isFullyInitialized()||kr(t),l.isFiltered()),t,r,rx,o)}(n,e,t.path,r,l)}const E=l.getChanges();return function wP(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=lb(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(zA(lb(e)))}}(e,c,E),{viewCache:c,changes:E}}(n.processor_,o,e,t,r);return function EP(n,e){(0,Y.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,Y.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,Y.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,cx(n,l.changes,l.viewCache.eventCache.getNode(),null)}function cx(n,e,t,r){return function JR(n,e,t,r){const o=[],l=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&l.push(function $R(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),K0(n,o,"child_removed",e,r,t),K0(n,o,"child_added",e,r,t),K0(n,o,"child_moved",l,r,t),K0(n,o,"child_changed",e,r,t),K0(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let fb,gb;class dx{constructor(){this.views=new Map}}function RT(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,Y.hu)(null!=l,"SyncTree gave us an op for an invalid query."),ux(l,e,t,r)}{let l=[];for(const c of n.views.values())l=l.concat(ux(c,e,t,r));return l}}function hx(n,e,t,r,o){const c=n.views.get(e._queryIdentifier);if(!c){let m=cb(t,o?r:null),E=!1;m?E=!0:r instanceof Cr?(m=TT(t,r),E=!1):(m=Cr.EMPTY_NODE,E=!1);const A=ab(new Df(m,E,!1),new Df(r,o,!1));return new SP(e,A)}return c}function fx(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Sf(n,e){let t=null;for(const r of n.views.values())t=t||MP(r,e);return t}function px(n,e){return e._queryParams.loadsAllData()?pb(n):n.views.get(e._queryIdentifier)}function gx(n,e){return null!=px(n,e)}function Af(n){return null!=pb(n)}function pb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let UP=1;class mx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ds(null),this.pendingWriteTree_=function gP(){return{visibleWrites:Zu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function PT(n,e,t,r,o){return function rP(n,e,t,r,o){(0,Y.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=X0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?Jy(n,new Ag({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function xf(n,e,t=!1){const r=function sP(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function oP(n,e){const t=n.allWrites.findIndex(m=>m.writeId===e);(0,Y.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,c=n.allWrites.length-1;for(;o&&c>=0;){const m=n.allWrites[c];m.visible&&(c>=t&&aP(m,r.path)?o=!1:lu(r.path,m.path)&&(l=!0)),c--}return!!o&&(l?(function lP(n){n.visibleWrites=QA(n.allWrites,uP,ci()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=KA(n.visibleWrites,r.path):Xo(r.children,E=>{n.visibleWrites=KA(n.visibleWrites,Ss(r.path,E))}),!0))}(n.pendingWriteTree_,e)){let l=new ds(null);return null!=r.snap?l=l.set(ci(),!0):Xo(r.children,c=>{l=l.set(new Ci(c),!0)}),Jy(n,new ob(r.path,l,t))}return[]}function Q0(n,e,t){return Jy(n,new Ag({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function mb(n,e,t,r,o=!1){const l=e._path,c=n.syncPointTree_.get(l);let m=[];if(c&&("default"===e._queryIdentifier||gx(c,e))){const E=function LP(n,e,t,r){const o=e._queryIdentifier,l=[];let c=[];const m=Af(n);if("default"===o)for(const[E,A]of n.views.entries())c=c.concat(lx(A,t,r)),ax(A)&&(n.views.delete(E),A.query._queryParams.loadsAllData()||l.push(A.query));else{const E=n.views.get(o);E&&(c=c.concat(lx(E,t,r)),ax(E)&&(n.views.delete(o),E.query._queryParams.loadsAllData()||l.push(E.query)))}return m&&!Af(n)&&l.push(new(function kP(){return(0,Y.hu)(fb,"Reference.ts has not been loaded"),fb}())(e._repo,e._path)),{removed:l,events:c}}(c,e,t,r);(function NP(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(l));const A=E.removed;if(m=E.events,!o){const V=-1!==A.findIndex(le=>le._queryParams.loadsAllData()),Z=n.syncPointTree_.findOnPath(l,(le,Ue)=>Af(Ue));if(V&&!Z){const le=n.syncPointTree_.subtree(l);if(!le.isEmpty()){const Ue=function qP(n){return n.fold((e,t,r)=>{if(t&&Af(t))return[pb(t)];{let o=[];return t&&(o=fx(t)),Xo(r,(l,c)=>{o=o.concat(c)}),o}})}(le);for(let ct=0;ct<Ue.length;++ct){const Pt=Ue[ct],jt=Pt.query,Hn=Ex(n,Pt);n.listenProvider_.startListening(eE(jt),J0(n,jt),Hn.hashFn,Hn.onComplete)}}}!Z&&A.length>0&&!r&&(V?n.listenProvider_.stopListening(eE(e),null):A.forEach(le=>{const Ue=n.queryToTagMap.get(_b(le));n.listenProvider_.stopListening(eE(le),Ue)}))}!function YP(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=_b(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,A)}return m}function yx(n,e,t,r){const o=kT(n,r);if(null!=o){const l=NT(o),c=l.path,m=l.queryId,E=Ua(c,e);return FT(n,c,new Ag(IT(m),E,t))}return[]}function OT(n,e,t,r=!1){const o=e._path;let l=null,c=!1;n.syncPointTree_.foreachOnPath(o,(le,Ue)=>{const ct=Ua(le,o);l=l||Sf(Ue,ct),c=c||Af(Ue)});let E,m=n.syncPointTree_.get(o);m?(c=c||Af(m),l=l||Sf(m,ci())):(m=new dx,n.syncPointTree_=n.syncPointTree_.set(o,m)),null!=l?E=!0:(E=!1,l=Cr.EMPTY_NODE,n.syncPointTree_.subtree(o).foreachChild((Ue,ct)=>{const Pt=Sf(ct,ci());Pt&&(l=l.updateImmediateChild(Ue,Pt))}));const A=gx(m,e);if(!A&&!e._queryParams.loadsAllData()){const le=_b(e);(0,Y.hu)(!n.queryToTagMap.has(le),"View does not exist, but we have a tag");const Ue=function KP(){return UP++}();n.queryToTagMap.set(le,Ue),n.tagToQueryMap.set(Ue,le)}let Z=function FP(n,e,t,r,o,l){const c=hx(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function RP(n,e){n.eventRegistrations_.push(e)}(c,t),function PP(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(cs,(l,c)=>{r.push(Ky(l,c))}),t.isFullyInitialized()&&r.push(zA(t.getNode())),cx(n,r,t.getNode(),e)}(c,t)}(m,e,t,ub(n.pendingWriteTree_,o),l,E);if(!A&&!c&&!r){const le=px(m,e);Z=Z.concat(function ZP(n,e,t){const r=e._path,o=J0(n,e),l=Ex(n,t),c=n.listenProvider_.startListening(eE(e),o,l.hashFn,l.onComplete),m=n.syncPointTree_.subtree(r);if(o)(0,Y.hu)(!Af(m.value),"If we're adding a query, it shouldn't be shadowed");else{const E=m.fold((A,V,Z)=>{if(!kr(A)&&V&&Af(V))return[pb(V).query];{let le=[];return V&&(le=le.concat(fx(V).map(Ue=>Ue.query))),Xo(Z,(Ue,ct)=>{le=le.concat(ct)}),le}});for(let A=0;A<E.length;++A){const V=E[A];n.listenProvider_.stopListening(eE(V),J0(n,V))}}return c}(n,e,le))}return Z}function yb(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(c,m)=>{const A=Sf(m,Ua(c,e));if(A)return A});return JA(o,e,l,t,!0)}function Jy(n,e){return _x(e,n.syncPointTree_,null,ub(n.pendingWriteTree_,ci()))}function _x(n,e,t,r){if(kr(n.path))return vx(n,e,t,r);{const o=e.get(ci());null==t&&null!=o&&(t=Sf(o,ci()));let l=[];const c=Or(n.path),m=n.operationForChild(c),E=e.children.get(c);if(E&&m){const A=t?t.getImmediateChild(c):null,V=tx(r,c);l=l.concat(_x(m,E,A,V))}return o&&(l=l.concat(RT(o,n,r,t))),l}}function vx(n,e,t,r){const o=e.get(ci());null==t&&null!=o&&(t=Sf(o,ci()));let l=[];return e.children.inorderTraversal((c,m)=>{const E=t?t.getImmediateChild(c):null,A=tx(r,c),V=n.operationForChild(c);V&&(l=l.concat(vx(V,m,E,A)))}),o&&(l=l.concat(RT(o,n,r,t))),l}function Ex(n,e){const t=e.query,r=J0(n,t);return{hashFn:()=>(function AP(n){return n.viewCache_.serverCache.getNode()}(e)||Cr.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function zP(n,e,t){const r=kT(n,t);if(r){const o=NT(r),l=o.path,c=o.queryId,m=Ua(l,e);return FT(n,l,new Y0(IT(c),m))}return[]}(n,t._path,r):function HP(n,e){return Jy(n,new Y0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function jM(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return mb(n,t,null,l)}}}}function J0(n,e){const t=_b(e);return n.queryToTagMap.get(t)}function _b(n){return n._path.toString()+"$"+n._queryIdentifier}function kT(n,e){return n.tagToQueryMap.get(e)}function NT(n){const e=n.indexOf("$");return(0,Y.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ci(n.substr(0,e))}}function FT(n,e,t){const r=n.syncPointTree_.get(e);return(0,Y.hu)(r,"Missing sync point for query tag that we're tracking"),RT(r,t,ub(n.pendingWriteTree_,e),null)}function eE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function $P(){return(0,Y.hu)(gb,"Reference.ts has not been loaded"),gb}())(n._repo,n._path):n}class LT{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new LT(t)}node(){return this.node_}}class BT{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ss(this.path_,e);return new BT(this.syncTree_,t)}node(){return yb(this.syncTree_,this.path_)}}const XP=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},Ix=function(n,e,t){return n&&"object"==typeof n?((0,Y.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?QP(n[".sv"],e,t):"object"==typeof n[".sv"]?JP(n[".sv"],e):void(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},QP=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,Y.hu)(!1,"Unexpected server value: "+n)},JP=function(n,e,t){n.hasOwnProperty("increment")||(0,Y.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,Y.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,Y.hu)(null!==o&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const c=o.getValue();return"number"!=typeof c?r:c+r},wx=function(n,e,t,r){return UT(e,new BT(t,n),r)},$T=function(n,e,t){return UT(n,new LT(e),t)};function UT(n,e,t){const r=n.getPriority().val(),o=Ix(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const c=n,m=Ix(c.getValue(),e,t);return m!==c.getValue()||o!==c.getPriority().val()?new qy(m,js(o)):n}{const c=n;return l=c,o!==c.getPriority().val()&&(l=l.updatePriority(new qy(o))),c.forEachChild(cs,(m,E)=>{const A=UT(E,e.getImmediateChild(m),t);A!==E&&(l=l.updateImmediateChild(m,A))}),l}}class VT{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function vb(n,e){let t=e instanceof Ci?e:new Ci(e),r=n,o=Or(t);for(;null!==o;){const l=(0,Y.DV)(r.node.children,o)||{children:{},childCount:0};r=new VT(o,r,l),t=Wi(t),o=Or(t)}return r}function Rg(n){return n.node.value}function jT(n,e){n.node.value=e,HT(n)}function bx(n){return n.node.childCount>0}function Eb(n,e){Xo(n.node.children,(t,r)=>{e(new VT(t,n,r))})}function Cx(n,e,t,r){t&&!r&&e(n),Eb(n,o=>{Cx(o,e,!0,r)}),t&&r&&e(n)}function tE(n){return new Ci(null===n.parent?n.name:tE(n.parent)+"/"+n.name)}function HT(n){null!==n.parent&&function nO(n,e,t){const r=function eO(n){return void 0===Rg(n)&&!bx(n)}(t),o=(0,Y.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,HT(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,HT(n))}(n.parent,n.name,n)}const rO=/[\[\].#$\/\u0000-\u001F\u007F]/,iO=/[\[\].#$\u0000-\u001F\u007F]/,zT=10485760,Ib=function(n){return"string"==typeof n&&0!==n.length&&!rO.test(n)},Dx=function(n){return"string"==typeof n&&0!==n.length&&!iO.test(n)},nE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!Yw(n)||n&&"object"==typeof n&&(0,Y.r3)(n,".sv")},Zc=function(n,e,t,r){r&&void 0===e||rE((0,Y.gK)(n,"value"),e,t)},rE=function(n,e,t){const r=t instanceof Ci?new IR(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Tg(r));if("function"==typeof e)throw new Error(n+"contains a function "+Tg(r)+" with contents = "+e.toString());if(Yw(e))throw new Error(n+"contains "+e.toString()+" "+Tg(r));if("string"==typeof e&&e.length>zT/3&&(0,Y.ug)(e)>zT)throw new Error(n+"contains a string greater than "+zT+" utf8 bytes "+Tg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if(Xo(e,(c,m)=>{if(".value"===c)o=!0;else if(".priority"!==c&&".sv"!==c&&(l=!0,!Ib(c)))throw new Error(n+" contains an invalid key ("+c+") "+Tg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function wR(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,Y.ug)(e),NA(n)})(r,c),rE(n,m,r),function bR(n){const e=n.parts_.pop();n.byteLength_-=(0,Y.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+Tg(r)+" in addition to actual children.")}},Tx=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,Y.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];Xo(e,(c,m)=>{const E=new Ci(c);if(rE(o,m,Ss(t,E)),".priority"===oT(E)&&!nE(m))throw new Error(o+"contains an invalid value for '"+E.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(E)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=V0(r);for(let c=0;c<l.length;c++)if((".priority"!==l[c]||c!==l.length-1)&&!Ib(l[c]))throw new Error(n+"contains an invalid key ("+l[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(ER);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&lu(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},GT=function(n,e,t){if(!t||void 0!==e){if(Yw(e))throw new Error((0,Y.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nE(e))throw new Error((0,Y.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iE=function(n,e,t,r){if(!(r&&void 0===t||Ib(t)))throw new Error((0,Y.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sE=function(n,e,t,r){if(!(r&&void 0===t||Dx(t)))throw new Error((0,Y.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},aO=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sE(n,e,t,r)},cu=function(n,e){if(".info"===Or(e))throw new Error(n+" failed = Can't modify data under /.info/")},Sx=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ib(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Dx(n)}(t))throw new Error((0,Y.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wb(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!aT(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function Ax(n,e,t){wb(n,t),xx(n,r=>aT(r,e))}function Nl(n,e,t){wb(n,t),xx(n,r=>lu(r,e)||lu(e,r))}function xx(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(uO(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function uO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Cg&&Zo("event: "+t.toString()),Gy(r)}}}const Mx="repo_interrupt",cO=25;class dO{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sb(),this.transactionQueueTree_=new VT,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Rx(n){const t=n.infoData_.getNode(new Ci(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oE(n){return XP({timestamp:Rx(n)})}function Px(n,e,t,r,o){n.dataUpdateCount++;const l=new Ci(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(o)if(r){const E=(0,Y.UI)(t,A=>js(A));c=function GP(n,e,t,r){const o=kT(n,r);if(o){const l=NT(o),c=l.path,m=l.queryId,E=Ua(c,e),A=ds.fromObject(t);return FT(n,c,new Xy(IT(m),E,A))}return[]}(n.serverSyncTree_,l,E,o)}else{const E=js(t);c=yx(n.serverSyncTree_,l,E,o)}else if(r){const E=(0,Y.UI)(t,A=>js(A));c=function jP(n,e,t){const r=ds.fromObject(t);return Jy(n,new Xy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,E)}else{const E=js(t);c=Q0(n.serverSyncTree_,l,E)}let m=l;c.length>0&&(m=t_(n,l)),Nl(n.eventQueue_,m,c)}function Ox(n,e){WT(n,"connected",e),!1===e&&function mO(n){e_(n,"onDisconnectEvents");const e=oE(n),t=sb();_T(n.onDisconnect_,ci(),(o,l)=>{const c=wx(o,l,n.serverSyncTree_,e);Zy(t,o,c)});let r=[];_T(t,ci(),(o,l)=>{r=r.concat(Q0(n.serverSyncTree_,o,l));const c=ZT(n,o);t_(n,c)}),n.onDisconnect_=sb(),Nl(n.eventQueue_,ci(),r)}(n)}function WT(n,e,t){const r=new Ci("/.info/"+e),o=js(t);n.infoData_.updateSnapshot(r,o);const l=Q0(n.infoSyncTree_,r,o);Nl(n.eventQueue_,r,l)}function bb(n){return n.nextWriteId_++}function qT(n,e,t,r,o){e_(n,"set",{path:e.toString(),value:t,priority:r});const l=oE(n),c=js(t,r),m=yb(n.serverSyncTree_,e),E=$T(c,m,l),A=bb(n),V=PT(n.serverSyncTree_,e,E,A,!0);wb(n.eventQueue_,V),n.server_.put(e.toString(),c.val(!0),(le,Ue)=>{const ct="ok"===le;ct||ba("set at "+e+" failed: "+le);const Pt=xf(n.serverSyncTree_,A,!ct);Nl(n.eventQueue_,e,Pt),Mf(0,o,le,Ue)});const Z=ZT(n,e);t_(n,Z),Nl(n.eventQueue_,Z,[])}function yO(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&yT(n.onDisconnect_,e),Mf(0,t,r,o)})}function kx(n,e,t,r){const o=js(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,c)=>{"ok"===l&&Zy(n.onDisconnect_,e,o),Mf(0,r,l,c)})}function YT(n,e,t){let r;r=".info"===Or(e._path)?mb(n.infoSyncTree_,e,t):mb(n.serverSyncTree_,e,t),Ax(n.eventQueue_,e._path,r)}function Nx(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Mx)}function e_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Zo(t,...e)}function Mf(n,e,t,r){e&&Gy(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const c=new Error(l);c.code=o,e(c)}})}function KT(n,e,t){return yb(n.serverSyncTree_,e,t)||Cr.EMPTY_NODE}function Cb(n,e=n.transactionQueueTree_){if(e||Db(n,e),Rg(e)){const t=Lx(n,e);(0,Y.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function bO(n,e,t){const r=t.map(A=>A.currentWriteId),o=KT(n,e,r);let l=o;const c=o.hash();for(let A=0;A<t.length;A++){const V=t[A];(0,Y.hu)(0===V.status,"tryToSendTransactionQueue_: items in queue should all be run."),V.status=1,V.retryCount++;const Z=Ua(e,V.path);l=l.updateChild(Z,V.currentOutputSnapshotRaw)}const m=l.val(!0),E=e;n.server_.put(E.toString(),m,A=>{e_(n,"transaction put response",{path:E.toString(),status:A});let V=[];if("ok"===A){const Z=[];for(let le=0;le<t.length;le++)t[le].status=2,V=V.concat(xf(n.serverSyncTree_,t[le].currentWriteId)),t[le].onComplete&&Z.push(()=>t[le].onComplete(null,!0,t[le].currentOutputSnapshotResolved)),t[le].unwatcher();Db(n,vb(n.transactionQueueTree_,e)),Cb(n,n.transactionQueueTree_),Nl(n.eventQueue_,e,V);for(let le=0;le<Z.length;le++)Gy(Z[le])}else{if("datastale"===A)for(let Z=0;Z<t.length;Z++)t[Z].status=3===t[Z].status?4:0;else{ba("transaction at "+E.toString()+" failed: "+A);for(let Z=0;Z<t.length;Z++)t[Z].status=4,t[Z].abortReason=A}t_(n,e)}},c)}(n,tE(e),t)}else bx(e)&&Eb(e,t=>{Cb(n,t)})}function t_(n,e){const t=Fx(n,e),r=tE(t);return function CO(n,e,t){if(0===e.length)return;const r=[];let o=[];const c=e.filter(m=>0===m.status).map(m=>m.currentWriteId);for(let m=0;m<e.length;m++){const E=e[m],A=Ua(t,E.path);let Z,V=!1;if((0,Y.hu)(null!==A,"rerunTransactionsUnderNode_: relativePath should not be null."),4===E.status)V=!0,Z=E.abortReason,o=o.concat(xf(n.serverSyncTree_,E.currentWriteId,!0));else if(0===E.status)if(E.retryCount>=cO)V=!0,Z="maxretry",o=o.concat(xf(n.serverSyncTree_,E.currentWriteId,!0));else{const le=KT(n,E.path,c);E.currentInputSnapshot=le;const Ue=e[m].update(le.val());if(void 0!==Ue){rE("transaction failed: Data returned ",Ue,E.path);let ct=js(Ue);"object"==typeof Ue&&null!=Ue&&(0,Y.r3)(Ue,".priority")||(ct=ct.updatePriority(le.getPriority()));const jt=E.currentWriteId,Hn=oE(n),or=$T(ct,le,Hn);E.currentOutputSnapshotRaw=ct,E.currentOutputSnapshotResolved=or,E.currentWriteId=bb(n),c.splice(c.indexOf(jt),1),o=o.concat(PT(n.serverSyncTree_,E.path,or,E.currentWriteId,E.applyLocally)),o=o.concat(xf(n.serverSyncTree_,jt,!0))}else V=!0,Z="nodata",o=o.concat(xf(n.serverSyncTree_,E.currentWriteId,!0))}Nl(n.eventQueue_,t,o),o=[],V&&(e[m].status=2,setTimeout(e[m].unwatcher,Math.floor(0)),e[m].onComplete&&r.push("nodata"===Z?()=>e[m].onComplete(null,!1,e[m].currentInputSnapshot):()=>e[m].onComplete(new Error(Z),!1,null)))}Db(n,n.transactionQueueTree_);for(let m=0;m<r.length;m++)Gy(r[m]);Cb(n,n.transactionQueueTree_)}(n,Lx(n,t),r),r}function Fx(n,e){let t,r=n.transactionQueueTree_;for(t=Or(e);null!==t&&void 0===Rg(r);)r=vb(r,t),t=Or(e=Wi(e));return r}function Lx(n,e){const t=[];return Bx(n,e,t),t.sort((r,o)=>r.order-o.order),t}function Bx(n,e,t){const r=Rg(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);Eb(e,o=>{Bx(n,o,t)})}function Db(n,e){const t=Rg(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,jT(e,t.length>0?t:void 0)}Eb(e,r=>{Db(n,r)})}function ZT(n,e){const t=tE(Fx(n,e)),r=vb(n.transactionQueueTree_,e);return function tO(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{XT(n,o)}),XT(n,r),Cx(r,o=>{XT(n,o)}),t}function XT(n,e){const t=Rg(e);if(t){const r=[];let o=[],l=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,Y.hu)(l===c-1,"All SENT items should be at beginning of queue."),l=c,t[c].status=3,t[c].abortReason="set"):((0,Y.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),o=o.concat(xf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===l?jT(e,void 0):t.length=l+1,Nl(n.eventQueue_,tE(e),o);for(let c=0;c<r.length;c++)Gy(r[c])}}const QT=function(n,e){const t=SO(n),r=t.namespace;return"firebase.com"===t.domain&&Yc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Yc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ba("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new eT(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ci(t.pathString)}},SO=function(n){let e="",t="",r="",o="",l="",c=!0,m="https",E=443;if("string"==typeof n){let A=n.indexOf("//");A>=0&&(m=n.substring(0,A-1),n=n.substring(A+2));let V=n.indexOf("/");-1===V&&(V=n.length);let Z=n.indexOf("?");-1===Z&&(Z=n.length),e=n.substring(0,Math.min(V,Z)),V<Z&&(o=function DO(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}(n.substring(V,Z)));const le=function TO(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ba(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,Z)));A=e.indexOf(":"),A>=0?(c="https"===m||"wss"===m,E=parseInt(e.substring(A+1),10)):A=e.length;const Ue=e.slice(0,A);if("localhost"===Ue.toLowerCase())t="localhost";else if(Ue.split(".").length<=2)t=Ue;else{const ct=e.indexOf(".");r=e.substring(0,ct).toLowerCase(),t=e.substring(ct+1),l=r}"ns"in le&&(l=le.ns)}return{host:e,port:E,domain:t,subdomain:r,secure:c,scheme:m,pathString:o,namespace:l}},$x="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",AO=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=$x.charAt(t%64),t=Math.floor(t/64);(0,Y.hu)(0===t,"Cannot push at time == 0");let c=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)c+=$x.charAt(e[o]);return(0,Y.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class Ux{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Y.Wl)(this.snapshot.exportVal())}}class Vx{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JT{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,Y.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class jx{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Y.BH;return yO(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){cu("OnDisconnect.remove",this._path);const e=new Y.BH;return kx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){cu("OnDisconnect.set",this._path),Zc("OnDisconnect.set",e,this._path,!1);const t=new Y.BH;return kx(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){cu("OnDisconnect.setWithPriority",this._path),Zc("OnDisconnect.setWithPriority",e,this._path,!1),GT("OnDisconnect.setWithPriority",t,!1);const r=new Y.BH;return function _O(n,e,t,r,o){const l=js(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(c,m)=>{"ok"===c&&Zy(n.onDisconnect_,e,l),Mf(0,o,c,m)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){cu("OnDisconnect.update",this._path),Tx("OnDisconnect.update",e,this._path,!1);const t=new Y.BH;return function vO(n,e,t,r){if((0,Y.xb)(t))return Zo("onDisconnect().update() called with empty data.  Don't do anything."),void Mf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&Xo(t,(c,m)=>{const E=js(m);Zy(n.onDisconnect_,Ss(e,c),E)}),Mf(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class cl{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return kr(this._path)?null:oT(this._path)}get ref(){return new du(this._repo,this._path)}get _queryIdentifier(){const e=WA(this._queryParams),t=QD(e);return"{}"===t?"default":t}get _queryObject(){return WA(this._queryParams)}isEqual(e){if(!((e=(0,Y.m9)(e))instanceof cl))return!1;const t=this._repo===e._repo,r=aT(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function vR(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Tb(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Rf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Kc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wf)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==ih)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===cs){if(null!=e&&!nE(e)||null!=t&&!nE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Y.hu)(n.getIndex()instanceof hT||n.getIndex()===fT,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Sb(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class du extends cl{constructor(e,t){super(e,t,new nb,!1)}get parent(){const e=kA(this._path);return null===e?null:new du(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Pg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Ci(e),r=Og(this.ref,e);return new Pg(this._node.getChild(t),r,cs)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Pg(o,Og(this.ref,r),cs)))}hasChild(e){const t=new Ci(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Hx(n,e){return(n=(0,Y.m9)(n))._checkNotDeleted("ref"),void 0!==e?Og(n._root,e):n._root}function zx(n,e){(n=(0,Y.m9)(n))._checkNotDeleted("refFromURL");const t=QT(e,n._repo.repoInfo_.nodeAdmin);Sx("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Yc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Hx(n,t.path.toString())}function Og(n,e){return null===Or((n=(0,Y.m9)(n))._path)?aO("child","path",e,!1):sE("child","path",e,!1),new du(n._repo,Ss(n._path,e))}function eS(n,e){n=(0,Y.m9)(n),cu("set",n._path),Zc("set",e,n._path,!1);const t=new Y.BH;return qT(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function OO(n,e){Tx("update",e,n._path,!1);const t=new Y.BH;return function gO(n,e,t,r){e_(n,"update",{path:e.toString(),value:t});let o=!0;const l=oE(n),c={};if(Xo(t,(m,E)=>{o=!1,c[m]=wx(Ss(e,m),js(E),n.serverSyncTree_,l)}),o)Zo("update() called with empty data.  Don't do anything."),Mf(0,r,"ok",void 0);else{const m=bb(n),E=function VP(n,e,t,r){!function iP(n,e,t,r){(0,Y.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=bT(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=ds.fromObject(t);return Jy(n,new Xy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,c,m);wb(n.eventQueue_,E),n.server_.merge(e.toString(),t,(A,V)=>{const Z="ok"===A;Z||ba("update at "+e+" failed: "+A);const le=xf(n.serverSyncTree_,m,!Z),Ue=le.length>0?t_(n,e):e;Nl(n.eventQueue_,Ue,le),Mf(0,r,A,V)}),Xo(t,A=>{const V=ZT(n,Ss(e,A));t_(n,V)}),Nl(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kO(n){n=(0,Y.m9)(n);const e=new JT(()=>{}),t=new aE(e);return function pO(n,e,t){const r=function WP(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(A,V)=>{const Z=Ua(A,t);r=r||Sf(V,Z)});let o=n.syncPointTree_.get(t);o?r=r||Sf(o,ci()):(o=new dx,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,c=l?new Df(r,!0,!1):null;return function xP(n){return lb(n.viewCache_)}(hx(o,e,ub(n.pendingWriteTree_,e._path),l?c.getNode():Cr.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(o=>{const l=js(o).withIndex(e._queryParams.getIndex());let c;if(OT(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=Q0(n.serverSyncTree_,e._path,l);else{const m=J0(n.serverSyncTree_,e);c=yx(n.serverSyncTree_,e._path,l,m)}return Nl(n.eventQueue_,e._path,c),mb(n.serverSyncTree_,e,t,null,!0),l},o=>(e_(n,"get for query "+(0,Y.Wl)(e)+" failed: "+o),Promise.reject(new Error(o))))}(n._repo,n,t).then(r=>new Pg(r,new du(n._repo,n._path),n._queryParams.getIndex()))}class aE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Ux("value",this,new Pg(e.snapshotNode,new du(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vx(this,e,t):null}matches(e){return e instanceof aE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ab{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Vx(this,e,t):null}createEvent(e,t){(0,Y.hu)(null!=e.childName,"Child events should have a childName.");const r=Og(new du(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new Ux(e.type,this,new Pg(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ab&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function lE(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const E=t,A=(V,Z)=>{YT(n._repo,n,m),E(V,Z)};A.userCallback=t.userCallback,A.context=t.context,t=A}const c=new JT(t,l||void 0),m="value"===e?new aE(c):new Ab(e,c);return function EO(n,e,t){let r;r=".info"===Or(e._path)?OT(n.infoSyncTree_,e,t):OT(n.serverSyncTree_,e,t),Ax(n.eventQueue_,e._path,r)}(n._repo,n,m),()=>YT(n._repo,n,m)}function tS(n,e,t,r){return lE(n,"value",e,t,r)}function Gx(n,e,t,r){return lE(n,"child_added",e,t,r)}function Wx(n,e,t,r){return lE(n,"child_changed",e,t,r)}function qx(n,e,t,r){return lE(n,"child_moved",e,t,r)}function Yx(n,e,t,r){return lE(n,"child_removed",e,t,r)}function Kx(n,e,t){let r=null;const o=t?new JT(t):null;"value"===e?r=new aE(o):e&&(r=new Ab(e,o)),YT(n._repo,n,r)}class Xu{}class Zx extends Xu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("endAt",this._value,e._path,!0);const t=mT(e._queryParams,this._value,this._key);if(Sb(t),Rf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class FO extends Xu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("endBefore",this._value,e._path,!1);const t=function GR(n,e,t){let r;return r=mT(n,e,n.index_===Kc||t?t:wf),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Sb(t),Rf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class Xx extends Xu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("startAt",this._value,e._path,!0);const t=gT(e._queryParams,this._value,this._key);if(Sb(t),Rf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class $O extends Xu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Zc("startAfter",this._value,e._path,!1);const t=function zR(n,e,t){let r;return r=gT(n,e,n.index_===Kc||t?t:ih),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Sb(t),Rf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new cl(e._repo,e._path,t,e._orderByCalled)}}class VO extends Xu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new cl(e._repo,e._path,function jR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class HO extends Xu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new cl(e._repo,e._path,function HR(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class GO extends Xu{constructor(e){super(),this._path=e}_apply(e){Tb(e,"orderByChild");const t=new Ci(this._path);if(kr(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new hT(t),o=rb(e._queryParams,r);return Rf(o),new cl(e._repo,e._path,o,!0)}}class qO extends Xu{_apply(e){Tb(e,"orderByKey");const t=rb(e._queryParams,Kc);return Rf(t),new cl(e._repo,e._path,t,!0)}}class KO extends Xu{_apply(e){Tb(e,"orderByPriority");const t=rb(e._queryParams,cs);return Rf(t),new cl(e._repo,e._path,t,!0)}}class XO extends Xu{_apply(e){Tb(e,"orderByValue");const t=rb(e._queryParams,fT);return Rf(t),new cl(e._repo,e._path,t,!0)}}class JO extends Xu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Zc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Zx(this._value,this._key)._apply(new Xx(this._value,this._key)._apply(e))}}function Qu(n,...e){let t=(0,Y.m9)(n);for(const r of e)t=r._apply(t);return t}(function OP(n){(0,Y.hu)(!fb,"__referenceConstructor has already been defined"),fb=n})(du),function BP(n){(0,Y.hu)(!gb,"__referenceConstructor has already been defined"),gb=n}(du);const tk="FIREBASE_DATABASE_EMULATOR_HOST",nS={};let Qx=!1;function Jx(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||Yc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zo("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let E,A,c=QT(l,o),m=c.repoInfo;typeof process<"u"&&process.env&&(A=process.env[tk]),A?(E=!0,l=`http://${A}?ns=${m.namespace}`,c=QT(l,o),m=c.repoInfo):E=!c.repoInfo.secure;const V=o&&E?new U0(U0.OWNER):new YM(n.name,n.options,e);Sx("Invalid Firebase Database URL",c),kr(c.path)||Yc("Database URL must point to the root of a Firebase Database (not including a child path).");const Z=function ik(n,e,t,r){let o=nS[e.name];o||(o={},nS[e.name]=o);let l=o[n.toURLString()];return l&&Yc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new dO(n,Qx,t,r),o[n.toURLString()]=l,l}(m,n,V,new qM(n.name,t));return new ok(Z,n)}class ok{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hO(n,e,t){if(n.stats_=rT(n.repoInfo_),n.forceRestClient_||WM())n.server_=new ib(n.repoInfo_,(r,o,l,c)=>{Px(n,r,o,l,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ox(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Y.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Sg(n.repoInfo_,e,(r,o,l,c)=>{Px(n,r,o,l,c)},r=>{Ox(n,r)},r=>{!function fO(n,e){Xo(e,(t,r)=>{WT(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function XM(n,e){const t=n.toString();return nT[t]||(nT[t]=e()),nT[t]}(n.repoInfo_,()=>new XR(n.stats_,n.server_)),n.infoData_=new WR,n.infoSyncTree_=new mx({startListening:(r,o,l,c)=>{let m=[];const E=n.infoData_.getNode(r._path);return E.isEmpty()||(m=Q0(n.infoSyncTree_,r._path,E),setTimeout(()=>{c("ok")},0)),m},stopListening:()=>{}}),WT(n,"connected",!1),n.serverSyncTree_=new mx({startListening:(r,o,l,c)=>(n.server_.listen(r,l,o,(m,E)=>{const A=c(m,E);Nl(n.eventQueue_,r._path,A)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new du(this._repo,ci())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function rk(n,e){const t=nS[e];(!t||t[n.key]!==n)&&Yc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Nx(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Yc("Cannot call "+e+" on a deleted database.")}}function eM(){wA.IS_TRANSPORT_INITIALIZED&&ba("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function ak(){eM(),bf.forceDisallow()}function lk(){eM(),Wy.forceDisallow(),bf.forceAllow()}function dk(n,e){nA(n,e)}const fk={".sv":"timestamp"};class mk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Sg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Sg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function hk(n){XS(Jt.SDK_VERSION),(0,Jt._registerComponent)(new tn.wA("database",(e,{instanceIdentifier:t})=>Jx(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jt.registerVersion)(KS,"0.14.4",n),(0,Jt.registerVersion)(KS,"0.14.4","esm2017")}();const Ek=new on.Yd("@firebase/database-compat"),nM=function(n){Ek.warn("FIREBASE WARNING: "+n)};class bk{constructor(e){this._delegate=e}cancel(e){(0,Y.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,Y.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,Y.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,Y.Dv)("OnDisconnect.set",1,2,arguments.length),(0,Y.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,Y.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,Y.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,Y.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,nM("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,Y.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class Ck{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,Y.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Pf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,Y.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,Y.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,Y.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,Y.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,Y.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),sE("DataSnapshot.child","path",e,!1),new Pf(this._database,this._delegate.child(e))}hasChild(e){return(0,Y.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,Y.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,Y.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,Y.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Pf(this._database,t)))}hasChildren(){return(0,Y.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,Y.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,Y.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fl(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ca{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,Y.Dv)("Query.on",2,4,arguments.length),(0,Y.Wj)("Query.on","callback",t,!1);const c=ca.getCancelAndContextArgs_("Query.on",r,o),m=(A,V)=>{t.call(c.context,new Pf(this.database,A),V)};m.userCallback=t,m.context=c.context;const E=null===(l=c.cancel)||void 0===l?void 0:l.bind(c.context);switch(e){case"value":return tS(this._delegate,m,E),t;case"child_added":return Gx(this._delegate,m,E),t;case"child_removed":return Yx(this._delegate,m,E),t;case"child_changed":return Wx(this._delegate,m,E),t;case"child_moved":return qx(this._delegate,m,E),t;default:throw new Error((0,Y.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,Y.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,Y.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,Y.Wj)("Query.off","callback",t,!0),(0,Y.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,Kx(this._delegate,e,o)}else Kx(this._delegate,e)}get(){return kO(this._delegate).then(e=>new Pf(this.database,e))}once(e,t,r,o){(0,Y.Dv)("Query.once",1,4,arguments.length),(0,Y.Wj)("Query.once","callback",t,!0);const l=ca.getCancelAndContextArgs_("Query.once",r,o),c=new Y.BH,m=(A,V)=>{const Z=new Pf(this.database,A);t&&t.call(l.context,Z,V),c.resolve(Z)};m.userCallback=t,m.context=l.context;const E=A=>{l.cancel&&l.cancel.call(l.context,A),c.reject(A)};switch(e){case"value":tS(this._delegate,m,E,{onlyOnce:!0});break;case"child_added":Gx(this._delegate,m,E,{onlyOnce:!0});break;case"child_removed":Yx(this._delegate,m,E,{onlyOnce:!0});break;case"child_changed":Wx(this._delegate,m,E,{onlyOnce:!0});break;case"child_moved":qx(this._delegate,m,E,{onlyOnce:!0});break;default:throw new Error((0,Y.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,Y.Dv)("Query.limitToFirst",1,1,arguments.length),new ca(this.database,Qu(this._delegate,function jO(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new VO(n)}(e)))}limitToLast(e){return(0,Y.Dv)("Query.limitToLast",1,1,arguments.length),new ca(this.database,Qu(this._delegate,function zO(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HO(n)}(e)))}orderByChild(e){return(0,Y.Dv)("Query.orderByChild",1,1,arguments.length),new ca(this.database,Qu(this._delegate,function WO(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sE("orderByChild","path",n,!1),new GO(n)}(e)))}orderByKey(){return(0,Y.Dv)("Query.orderByKey",0,0,arguments.length),new ca(this.database,Qu(this._delegate,function YO(){return new qO}()))}orderByPriority(){return(0,Y.Dv)("Query.orderByPriority",0,0,arguments.length),new ca(this.database,Qu(this._delegate,function ZO(){return new KO}()))}orderByValue(){return(0,Y.Dv)("Query.orderByValue",0,0,arguments.length),new ca(this.database,Qu(this._delegate,function QO(){return new XO}()))}startAt(e=null,t){return(0,Y.Dv)("Query.startAt",0,2,arguments.length),new ca(this.database,Qu(this._delegate,function BO(n=null,e){return iE("startAt","key",e,!0),new Xx(n,e)}(e,t)))}startAfter(e=null,t){return(0,Y.Dv)("Query.startAfter",0,2,arguments.length),new ca(this.database,Qu(this._delegate,function UO(n,e){return iE("startAfter","key",e,!0),new $O(n,e)}(e,t)))}endAt(e=null,t){return(0,Y.Dv)("Query.endAt",0,2,arguments.length),new ca(this.database,Qu(this._delegate,function NO(n,e){return iE("endAt","key",e,!0),new Zx(n,e)}(e,t)))}endBefore(e=null,t){return(0,Y.Dv)("Query.endBefore",0,2,arguments.length),new ca(this.database,Qu(this._delegate,function LO(n,e){return iE("endBefore","key",e,!0),new FO(n,e)}(e,t)))}equalTo(e,t){return(0,Y.Dv)("Query.equalTo",1,2,arguments.length),new ca(this.database,Qu(this._delegate,function ek(n,e){return iE("equalTo","key",e,!0),new JO(n,e)}(e,t)))}toString(){return(0,Y.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,Y.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,Y.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ca))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,Y.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,Y.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,Y.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new Fl(this.database,new du(this._delegate._repo,this._delegate._path))}}class Fl extends ca{constructor(e,t){super(e,new cl(t._repo,t._path,new nb,!1)),this.database=e,this._delegate=t}getKey(){return(0,Y.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,Y.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Fl(this.database,Og(this._delegate,e))}getParent(){(0,Y.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Fl(this.database,e):null}getRoot(){return(0,Y.Dv)("Reference.root",0,0,arguments.length),new Fl(this.database,this._delegate.root)}set(e,t){(0,Y.Dv)("Reference.set",1,2,arguments.length),(0,Y.Wj)("Reference.set","onComplete",t,!0);const r=eS(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,Y.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,nM("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cu("Reference.update",this._delegate._path),(0,Y.Wj)("Reference.update","onComplete",t,!0);const r=OO(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,Y.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,Y.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function PO(n,e,t){if(cu("setWithPriority",n._path),Zc("setWithPriority",e,n._path,!1),GT("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new Y.BH;return qT(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,Y.Dv)("Reference.remove",0,1,arguments.length),(0,Y.Wj)("Reference.remove","onComplete",e,!0);const t=function MO(n){return cu("remove",n._path),eS(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,Y.Dv)("Reference.transaction",1,3,arguments.length),(0,Y.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,Y.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,Y.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function yk(n,e,t){var r;if(n=(0,Y.m9)(n),cu("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new Y.BH,m=tS(n,()=>{});return function wO(n,e,t,r,o,l){e_(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:JS(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},m=KT(n,e,void 0);c.currentInputSnapshot=m;const E=c.update(m.val());if(void 0===E)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{rE("transaction failed: Data returned ",E,c.path),c.status=0;const A=vb(n.transactionQueueTree_,e),V=Rg(A)||[];let Z;V.push(c),jT(A,V),"object"==typeof E&&null!==E&&(0,Y.r3)(E,".priority")?(Z=(0,Y.DV)(E,".priority"),(0,Y.hu)(nE(Z),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Z=(yb(n.serverSyncTree_,e)||Cr.EMPTY_NODE).getPriority().val();const le=oE(n),Ue=js(E,Z),ct=$T(Ue,m,le);c.currentOutputSnapshotRaw=Ue,c.currentOutputSnapshotResolved=ct,c.currentWriteId=bb(n);const Pt=PT(n.serverSyncTree_,e,ct,c.currentWriteId,c.applyLocally);Nl(n.eventQueue_,e,Pt),Cb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(E,A,V)=>{let Z=null;E?l.reject(E):(Z=new Pg(V,new du(n._repo,n._path),cs),l.resolve(new mk(A,Z)))},m,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new Ck(l.committed,new Pf(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,Y.Dv)("Reference.setPriority",1,2,arguments.length),(0,Y.Wj)("Reference.setPriority","onComplete",t,!0);const r=function RO(n,e){n=(0,Y.m9)(n),cu("setPriority",n._path),GT("setPriority",e,!1);const t=new Y.BH;return qT(n._repo,Ss(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,Y.Dv)("Reference.push",0,2,arguments.length),(0,Y.Wj)("Reference.push","onComplete",t,!0);const r=function xO(n,e){n=(0,Y.m9)(n),cu("push",n._path),Zc("push",e,n._path,!0);const t=Rx(n._repo),r=AO(t),o=Og(n,r),l=Og(n,r);let c;return c=null!=e?eS(l,e).then(()=>l):Promise.resolve(l),o.then=c.then.bind(c),o.catch=c.then.bind(c,void 0),o}(this._delegate,e),o=r.then(c=>new Fl(this.database,c));t&&o.then(()=>t(null),c=>t(c));const l=new Fl(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return cu("Reference.onDisconnect",this._delegate._path),new bk(new jx(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class uE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:ak,forceLongPolling:lk}}useEmulator(e,t,r={}){!function tM(n,e,t,r={}){(n=(0,Y.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Yc("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&Yc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new U0(U0.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,Y.Sg)(r.mockUserToken,n.app.options.projectId);l=new U0(c)}!function nk(n,e,t,r){n.repoInfo_=new eT(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,Y.Dv)("database.ref",0,1,arguments.length),e instanceof Fl){const t=zx(this._delegate,e.toString());return new Fl(this,t)}{const t=Hx(this._delegate,e);return new Fl(this,t)}}refFromURL(e){(0,Y.Dv)("database.refFromURL",1,1,arguments.length);const r=zx(this._delegate,e);return new Fl(this,r)}goOffline(){return(0,Y.Dv)("database.goOffline",0,0,arguments.length),function uk(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOffline"),Nx(n._repo)}(this._delegate)}goOnline(){return(0,Y.Dv)("database.goOnline",0,0,arguments.length),function ck(n){(n=(0,Y.m9)(n))._checkNotDeleted("goOnline"),function IO(n){n.persistentConnection_&&n.persistentConnection_.resume(Mx)}(n._repo)}(this._delegate)}}uE.ServerValue={TIMESTAMP:function pk(){return fk}(),increment:n=>function gk(n){return{".sv":{increment:n}}}(n)};var Tk=Object.freeze({__proto__:null,initStandalone:function Dk({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){XS(t);const c=new tn.zt("auth-internal",new tn.H0("database-standalone"));return c.setComponent(new tn.wA("auth-internal",()=>r,"PRIVATE")),{instance:new uE(Jx(n,c,void 0,e,l),n),namespace:o}}});const Sk=uE.ServerValue;function rM(n){return null==n}function iM(n){return"function"==typeof n.set}function sM(n,e){return iM(e)?e:n.ref(e)}function oM(n,e){if(function xk(n){return"string"==typeof n}(n))return e.stringCase();if(iM(n))return e.firebaseCase();if(function Mk(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function cE(n,e,t="on",r=hi.z){return new ue.y(o=>{let l=null;return l=n[t](e,(c,m)=>{r.schedule(()=>{o.next({snapshot:c,prevKey:m})}),"once"===t&&r.schedule(()=>o.complete())},c=>{r.schedule(()=>o.error(c))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,_e.U)(o=>{const{snapshot:l,prevKey:c}=o;let m=null;return l.exists()&&(m=l.key),{type:e,payload:l,prevKey:c,key:m}}),(0,rt.B)())}function aM(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Ok(n,e){const{payload:t,prevKey:r,key:o}=e,l=aM(n,o),c=function Pk(n,e){if(rM(e))return 0;{const t=aM(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let m=null;e.payload.forEach(E=>{const A={payload:E,type:"value",prevKey:m,key:E.key};return m=E.key,n=[...n,A],!1})}return n;case"child_added":if(l>-1){const m=n[l-1];(m&&m.key||null)!==r&&(n=n.filter(E=>E.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(m=>m.payload.key!==t.key);case"child_changed":return n.map(m=>m.payload.key===o?e:m);case"child_moved":if(l>-1){const m=n.splice(l,1)[0];return(n=n.slice()).splice(c,0,m),n}return n;default:return n}}function lM(n){return(rM(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function uM(n,e,t){return function Rk(n,e,t){return cE(n,"value","once",t).pipe((0,pt.w)(r=>{const o=[(0,ae.of)(r)];return e.forEach(l=>o.push(cE(n,l,"on",t))),(0,Pe.T)(...o).pipe((0,dt.R)(Ok,[]))}),(0,Ut.x)())}(n,e=lM(e),t)}function cM(n,e,t){const r=(e=lM(e)).map(o=>cE(n,o,"on",t));return(0,Pe.T)(...r)}function dM(n,e){return function(r,o){return oM(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function Lk(n){return function(t){return t?oM(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function hM(n,e){return function(){return cE(n,"value","on",e)}}!function Ak(n){n.INTERNAL.registerComponent(new tn.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new uE(o,r)},"PUBLIC").setServiceProps({Reference:Fl,Query:ca,Database:uE,DataSnapshot:Pf,enableLogging:dk,INTERNAL:Tk,ServerValue:Sk}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Ni.Z);const Uk=new f.OlP("angularfire2.realtimeDatabaseURL"),Vk=new f.OlP("angularfire2.database.use-emulator");let jk=(()=>{class n{constructor(t,r,o,l,c,m,E,A,V,Z,le,Ue,ct,Pt,jt){this.schedulers=m;const Hn=E,or=(0,we.on)(t,c,r);A&&ao(or,c,V,le,Ue,ct,Z,Pt),this.database=(0,we.cc)(`${or.name}.database.${o}`,"AngularFireDatabase",or.name,()=>{const Mn=c.runOutsideAngular(()=>or.database(o||void 0));return Hn&&Mn.useEmulator(...Hn),Mn},[Hn])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>sM(this.database,t));let l=o;return r&&(l=r(o)),function Bk(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:dM(r,"update"),set:dM(r,"set"),push:o=>r.push(o),remove:Lk(r),snapshotChanges:o=>uM(n,o,t).pipe(xe.iC),stateChanges:o=>cM(n,o,t).pipe(xe.iC),auditTrail:o=>function kk(n,e,t){return function Fk(n,e,t){return function Nk(n,e){return cE(n,"value","on",e).pipe((0,_e.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function OM(...n){const e=(0,PM.jO)(n);return(0,Ws.e)((t,r)=>{const o=n.length,l=new Array(o);let c=n.map(()=>!1),m=!1;for(let E=0;E<o;E++)(0,xM.Xf)(n[E]).subscribe((0,Xi.x)(r,A=>{l[E]=A,!m&&!c[E]&&(c[E]=!0,(m=c.every(MM.y))&&(c=null))},RM.Z));t.subscribe((0,Xi.x)(r,E=>{if(m){const A=[E,...l];r.next(e?e(...A):A)}}))})}(e),(0,_e.U)(([o,l])=>{const c=o.lastKeyToLoad,m=l.map(E=>E.key);return{actions:l,lastKeyToLoad:c,loadedKeys:m}}),function kM(n){return(0,Ws.e)((e,t)=>{let r=!1,o=0;e.subscribe((0,Xi.x)(t,l=>(r||(r=!n(l,o++)))&&t.next(l)))})}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,_e.U)(o=>o.actions))}(n,cM(n,e).pipe((0,dt.R)((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(xe.iC),valueChanges:(o,l)=>uM(n,o,t).pipe((0,_e.U)(m=>m.map(E=>l&&l.idField?Object.assign(Object.assign({},E.payload.val()),{[l.idField]:E.key}):E.payload.val())),xe.iC)}}(l,this)}object(t){return function $k(n,e){return{query:n,snapshotChanges:()=>hM(n,e.schedulers.outsideAngular)().pipe(xe.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>hM(n,e.schedulers.outsideAngular)().pipe(xe.iC,(0,_e.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>sM(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(we.Dh),f.LFG(we.xv,8),f.LFG(Uk,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(xe.HU),f.LFG(Vk,8),f.LFG(lo,8),f.LFG(Do,8),f.LFG(oo,8),f.LFG(zs,8),f.LFG(Ei,8),f.LFG(Ms,8),f.LFG(Gs,8),f.LFG(ii,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hk=(()=>{class n{constructor(){Zi.Z.registerVersion("angularfire",xe.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[jk]}),n})();var zk=B(433);let Gk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[be]}),n.\u0275inj=f.cJS({providers:[{provide:W.wN,useClass:oe.r4}],imports:[y.b2,oe.Pc.forRoot(),zk.u5,he,we.hO.initializeApp(Me_firebaseConfig),AM,Da,Q,Hk]}),n})();(0,f.G48)(),y.q6().bootstrapModule(Gk).catch(n=>console.log(n))},1135:(Wt,nt,B)=>{"use strict";B.d(nt,{X:()=>f});var y=B(7579);class f extends y.x{constructor(oe){super(),this._value=oe}get value(){return this.getValue()}_subscribe(oe){const be=super._subscribe(oe);return!be.closed&&oe.next(this._value),be}getValue(){const{hasError:oe,thrownError:be,_value:Ce}=this;if(oe)throw be;return this._throwIfClosed(),Ce}next(oe){super.next(this._value=oe)}}},9751:(Wt,nt,B)=>{"use strict";B.d(nt,{y:()=>Me});var y=B(930),f=B(727),W=B(8822),oe=B(9635),be=B(2416),Ce=B(576),he=B(2806);let Me=(()=>{class ue{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const Ke=new ue;return Ke.source=this,Ke.operator=Pe,Ke}subscribe(Pe,Ke,pt){const _e=function ae(ue){return ue&&ue instanceof y.Lv||function fe(ue){return ue&&(0,Ce.m)(ue.next)&&(0,Ce.m)(ue.error)&&(0,Ce.m)(ue.complete)}(ue)&&(0,f.Nn)(ue)}(Pe)?Pe:new y.Hp(Pe,Ke,pt);return(0,he.x)(()=>{const{operator:ye,source:Oe}=this;_e.add(ye?ye.call(_e,Oe):Oe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(Ke){Pe.error(Ke)}}forEach(Pe,Ke){return new(Ke=we(Ke))((pt,_e)=>{const ye=new y.Hp({next:Oe=>{try{Pe(Oe)}catch(rt){_e(rt),ye.unsubscribe()}},error:_e,complete:pt});this.subscribe(ye)})}_subscribe(Pe){var Ke;return null===(Ke=this.source)||void 0===Ke?void 0:Ke.subscribe(Pe)}[W.L](){return this}pipe(...Pe){return(0,oe.U)(Pe)(this)}toPromise(Pe){return new(Pe=we(Pe))((Ke,pt)=>{let _e;this.subscribe(ye=>_e=ye,ye=>pt(ye),()=>Ke(_e))})}}return ue.create=De=>new ue(De),ue})();function we(ue){var De;return null!==(De=null!=ue?ue:be.v.Promise)&&void 0!==De?De:Promise}},7579:(Wt,nt,B)=>{"use strict";B.d(nt,{x:()=>he});var y=B(9751),f=B(727);const oe=(0,B(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=B(8737),Ce=B(2806);let he=(()=>{class we extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const ue=new Me(this,this);return ue.operator=ae,ue}_throwIfClosed(){if(this.closed)throw new oe}next(ae){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ue of this.currentObservers)ue.next(ae)}})}error(ae){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:ue}=this;for(;ue.length;)ue.shift().error(ae)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:ue,isStopped:De,observers:Pe}=this;return ue||De?f.Lc:(this.currentObservers=null,Pe.push(ae),new f.w0(()=>{this.currentObservers=null,(0,be.P)(Pe,ae)}))}_checkFinalizedStatuses(ae){const{hasError:ue,thrownError:De,isStopped:Pe}=this;ue?ae.error(De):Pe&&ae.complete()}asObservable(){const ae=new y.y;return ae.source=this,ae}}return we.create=(fe,ae)=>new Me(fe,ae),we})();class Me extends he{constructor(fe,ae){super(),this.destination=fe,this.source=ae}next(fe){var ae,ue;null===(ue=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===ue||ue.call(ae,fe)}error(fe){var ae,ue;null===(ue=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===ue||ue.call(ae,fe)}complete(){var fe,ae;null===(ae=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===ae||ae.call(fe)}_subscribe(fe){var ae,ue;return null!==(ue=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(fe))&&void 0!==ue?ue:f.Lc}}},930:(Wt,nt,B)=>{"use strict";B.d(nt,{Hp:()=>pt,Lv:()=>ue});var y=B(576),f=B(727),W=B(2416),oe=B(7849),be=B(5032);const Ce=we("C",void 0,void 0);function we(Ye,Xe,Je){return{kind:Ye,value:Xe,error:Je}}var fe=B(3410),ae=B(2806);class ue extends f.w0{constructor(Xe){super(),this.isStopped=!1,Xe?(this.destination=Xe,(0,f.Nn)(Xe)&&Xe.add(this)):this.destination=rt}static create(Xe,Je,ht){return new pt(Xe,Je,ht)}next(Xe){this.isStopped?Oe(function Me(Ye){return we("N",Ye,void 0)}(Xe),this):this._next(Xe)}error(Xe){this.isStopped?Oe(function he(Ye){return we("E",void 0,Ye)}(Xe),this):(this.isStopped=!0,this._error(Xe))}complete(){this.isStopped?Oe(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Xe){this.destination.next(Xe)}_error(Xe){try{this.destination.error(Xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const De=Function.prototype.bind;function Pe(Ye,Xe){return De.call(Ye,Xe)}class Ke{constructor(Xe){this.partialObserver=Xe}next(Xe){const{partialObserver:Je}=this;if(Je.next)try{Je.next(Xe)}catch(ht){_e(ht)}}error(Xe){const{partialObserver:Je}=this;if(Je.error)try{Je.error(Xe)}catch(ht){_e(ht)}else _e(Xe)}complete(){const{partialObserver:Xe}=this;if(Xe.complete)try{Xe.complete()}catch(Je){_e(Je)}}}class pt extends ue{constructor(Xe,Je,ht){let Te;if(super(),(0,y.m)(Xe)||!Xe)Te={next:null!=Xe?Xe:void 0,error:null!=Je?Je:void 0,complete:null!=ht?ht:void 0};else{let re;this&&W.v.useDeprecatedNextContext?(re=Object.create(Xe),re.unsubscribe=()=>this.unsubscribe(),Te={next:Xe.next&&Pe(Xe.next,re),error:Xe.error&&Pe(Xe.error,re),complete:Xe.complete&&Pe(Xe.complete,re)}):Te=Xe}this.destination=new Ke(Te)}}function _e(Ye){W.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(Ye):(0,oe.h)(Ye)}function Oe(Ye,Xe){const{onStoppedNotification:Je}=W.v;Je&&fe.z.setTimeout(()=>Je(Ye,Xe))}const rt={closed:!0,next:be.Z,error:function ye(Ye){throw Ye},complete:be.Z}},727:(Wt,nt,B)=>{"use strict";B.d(nt,{Lc:()=>Ce,w0:()=>be,Nn:()=>he});var y=B(576);const W=(0,B(3888).d)(we=>function(ae){we(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((ue,De)=>`${De+1}) ${ue.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var oe=B(8737);class be{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const Pe of ae)Pe.remove(this);else ae.remove(this);const{initialTeardown:ue}=this;if((0,y.m)(ue))try{ue()}catch(Pe){fe=Pe instanceof W?Pe.errors:[Pe]}const{_finalizers:De}=this;if(De){this._finalizers=null;for(const Pe of De)try{Me(Pe)}catch(Ke){fe=null!=fe?fe:[],Ke instanceof W?fe=[...fe,...Ke.errors]:fe.push(Ke)}}if(fe)throw new W(fe)}}add(fe){var ae;if(fe&&fe!==this)if(this.closed)Me(fe);else{if(fe instanceof be){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(fe)}}_hasParent(fe){const{_parentage:ae}=this;return ae===fe||Array.isArray(ae)&&ae.includes(fe)}_addParent(fe){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(fe),ae):ae?[ae,fe]:fe}_removeParent(fe){const{_parentage:ae}=this;ae===fe?this._parentage=null:Array.isArray(ae)&&(0,oe.P)(ae,fe)}remove(fe){const{_finalizers:ae}=this;ae&&(0,oe.P)(ae,fe),fe instanceof be&&fe._removeParent(this)}}be.EMPTY=(()=>{const we=new be;return we.closed=!0,we})();const Ce=be.EMPTY;function he(we){return we instanceof be||we&&"closed"in we&&(0,y.m)(we.remove)&&(0,y.m)(we.add)&&(0,y.m)(we.unsubscribe)}function Me(we){(0,y.m)(we)?we():we.unsubscribe()}},2416:(Wt,nt,B)=>{"use strict";B.d(nt,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Wt,nt,B)=>{"use strict";B.d(nt,{z:()=>be});var y=B(8189),W=B(7669),oe=B(8996);function be(...Ce){return function f(){return(0,y.J)(1)}()((0,oe.D)(Ce,(0,W.yG)(Ce)))}},515:(Wt,nt,B)=>{"use strict";B.d(nt,{E:()=>f});const f=new(B(9751).y)(be=>be.complete())},8996:(Wt,nt,B)=>{"use strict";B.d(nt,{D:()=>Xe});var y=B(8421),f=B(5363),W=B(9468),Ce=B(9751),Me=B(2202),we=B(576),fe=B(9672);function ue(Je,ht){if(!Je)throw new Error("Iterable cannot be null");return new Ce.y(Te=>{(0,fe.f)(Te,ht,()=>{const re=Je[Symbol.asyncIterator]();(0,fe.f)(Te,ht,()=>{re.next().then(xe=>{xe.done?Te.complete():Te.next(xe.value)})},0,!0)})})}var De=B(3670),Pe=B(8239),Ke=B(1144),pt=B(6495),_e=B(2206),ye=B(4532),Oe=B(3260);function Xe(Je,ht){return ht?function Ye(Je,ht){if(null!=Je){if((0,De.c)(Je))return function oe(Je,ht){return(0,y.Xf)(Je).pipe((0,W.R)(ht),(0,f.Q)(ht))}(Je,ht);if((0,Ke.z)(Je))return function he(Je,ht){return new Ce.y(Te=>{let re=0;return ht.schedule(function(){re===Je.length?Te.complete():(Te.next(Je[re++]),Te.closed||this.schedule())})})}(Je,ht);if((0,Pe.t)(Je))return function be(Je,ht){return(0,y.Xf)(Je).pipe((0,W.R)(ht),(0,f.Q)(ht))}(Je,ht);if((0,_e.D)(Je))return ue(Je,ht);if((0,pt.T)(Je))return function ae(Je,ht){return new Ce.y(Te=>{let re;return(0,fe.f)(Te,ht,()=>{re=Je[Me.h](),(0,fe.f)(Te,ht,()=>{let xe,Ie;try{({value:xe,done:Ie}=re.next())}catch(He){return void Te.error(He)}Ie?Te.complete():Te.next(xe)},0,!0)}),()=>(0,we.m)(null==re?void 0:re.return)&&re.return()})}(Je,ht);if((0,Oe.L)(Je))return function rt(Je,ht){return ue((0,Oe.Q)(Je),ht)}(Je,ht)}throw(0,ye.z)(Je)}(Je,ht):(0,y.Xf)(Je)}},8421:(Wt,nt,B)=>{"use strict";B.d(nt,{Xf:()=>De});var y=B(655),f=B(1144),W=B(8239),oe=B(9751),be=B(3670),Ce=B(2206),he=B(4532),Me=B(6495),we=B(3260),fe=B(576),ae=B(7849),ue=B(8822);function De(Ye){if(Ye instanceof oe.y)return Ye;if(null!=Ye){if((0,be.c)(Ye))return function Pe(Ye){return new oe.y(Xe=>{const Je=Ye[ue.L]();if((0,fe.m)(Je.subscribe))return Je.subscribe(Xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ye);if((0,f.z)(Ye))return function Ke(Ye){return new oe.y(Xe=>{for(let Je=0;Je<Ye.length&&!Xe.closed;Je++)Xe.next(Ye[Je]);Xe.complete()})}(Ye);if((0,W.t)(Ye))return function pt(Ye){return new oe.y(Xe=>{Ye.then(Je=>{Xe.closed||(Xe.next(Je),Xe.complete())},Je=>Xe.error(Je)).then(null,ae.h)})}(Ye);if((0,Ce.D)(Ye))return ye(Ye);if((0,Me.T)(Ye))return function _e(Ye){return new oe.y(Xe=>{for(const Je of Ye)if(Xe.next(Je),Xe.closed)return;Xe.complete()})}(Ye);if((0,we.L)(Ye))return function Oe(Ye){return ye((0,we.Q)(Ye))}(Ye)}throw(0,he.z)(Ye)}function ye(Ye){return new oe.y(Xe=>{(function rt(Ye,Xe){var Je,ht,Te,re;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Je=(0,y.KL)(Ye);!(ht=yield Je.next()).done;)if(Xe.next(ht.value),Xe.closed)return}catch(xe){Te={error:xe}}finally{try{ht&&!ht.done&&(re=Je.return)&&(yield re.call(Je))}finally{if(Te)throw Te.error}}Xe.complete()})})(Ye,Xe).catch(Je=>Xe.error(Je))})}},6451:(Wt,nt,B)=>{"use strict";B.d(nt,{T:()=>Ce});var y=B(8189),f=B(8421),W=B(515),oe=B(7669),be=B(8996);function Ce(...he){const Me=(0,oe.yG)(he),we=(0,oe._6)(he,1/0),fe=he;return fe.length?1===fe.length?(0,f.Xf)(fe[0]):(0,y.J)(we)((0,be.D)(fe,Me)):W.E}},9646:(Wt,nt,B)=>{"use strict";B.d(nt,{of:()=>W});var y=B(7669),f=B(8996);function W(...oe){const be=(0,y.yG)(oe);return(0,f.D)(oe,be)}},5403:(Wt,nt,B)=>{"use strict";B.d(nt,{x:()=>f});var y=B(930);function f(oe,be,Ce,he,Me){return new W(oe,be,Ce,he,Me)}class W extends y.Lv{constructor(be,Ce,he,Me,we,fe){super(be),this.onFinalize=we,this.shouldUnsubscribe=fe,this._next=Ce?function(ae){try{Ce(ae)}catch(ue){be.error(ue)}}:super._next,this._error=Me?function(ae){try{Me(ae)}catch(ue){be.error(ue)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(ae){be.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var be;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ce}=this;super.unsubscribe(),!Ce&&(null===(be=this.onFinalize)||void 0===be||be.call(this))}}}},6590:(Wt,nt,B)=>{"use strict";B.d(nt,{d:()=>W});var y=B(4482),f=B(5403);function W(oe){return(0,y.e)((be,Ce)=>{let he=!1;be.subscribe((0,f.x)(Ce,Me=>{he=!0,Ce.next(Me)},()=>{he||Ce.next(oe),Ce.complete()}))})}},1884:(Wt,nt,B)=>{"use strict";B.d(nt,{x:()=>oe});var y=B(4671),f=B(4482),W=B(5403);function oe(Ce,he=y.y){return Ce=null!=Ce?Ce:be,(0,f.e)((Me,we)=>{let fe,ae=!0;Me.subscribe((0,W.x)(we,ue=>{const De=he(ue);(ae||!Ce(fe,De))&&(ae=!1,fe=De,we.next(ue))}))})}function be(Ce,he){return Ce===he}},9300:(Wt,nt,B)=>{"use strict";B.d(nt,{h:()=>W});var y=B(4482),f=B(5403);function W(oe,be){return(0,y.e)((Ce,he)=>{let Me=0;Ce.subscribe((0,f.x)(he,we=>oe.call(be,we,Me++)&&he.next(we)))})}},590:(Wt,nt,B)=>{"use strict";B.d(nt,{P:()=>he});var y=B(6805),f=B(9300),W=B(5698),oe=B(6590),be=B(8068),Ce=B(4671);function he(Me,we){const fe=arguments.length>=2;return ae=>ae.pipe(Me?(0,f.h)((ue,De)=>Me(ue,De,ae)):Ce.y,(0,W.q)(1),fe?(0,oe.d)(we):(0,be.T)(()=>new y.K))}},4004:(Wt,nt,B)=>{"use strict";B.d(nt,{U:()=>W});var y=B(4482),f=B(5403);function W(oe,be){return(0,y.e)((Ce,he)=>{let Me=0;Ce.subscribe((0,f.x)(he,we=>{he.next(oe.call(be,we,Me++))}))})}},8189:(Wt,nt,B)=>{"use strict";B.d(nt,{J:()=>W});var y=B(5577),f=B(4671);function W(oe=1/0){return(0,y.z)(f.y,oe)}},5577:(Wt,nt,B)=>{"use strict";B.d(nt,{z:()=>Me});var y=B(4004),f=B(8421),W=B(4482),oe=B(9672),be=B(5403),he=B(576);function Me(we,fe,ae=1/0){return(0,he.m)(fe)?Me((ue,De)=>(0,y.U)((Pe,Ke)=>fe(ue,Pe,De,Ke))((0,f.Xf)(we(ue,De))),ae):("number"==typeof fe&&(ae=fe),(0,W.e)((ue,De)=>function Ce(we,fe,ae,ue,De,Pe,Ke,pt){const _e=[];let ye=0,Oe=0,rt=!1;const Ye=()=>{rt&&!_e.length&&!ye&&fe.complete()},Xe=ht=>ye<ue?Je(ht):_e.push(ht),Je=ht=>{Pe&&fe.next(ht),ye++;let Te=!1;(0,f.Xf)(ae(ht,Oe++)).subscribe((0,be.x)(fe,re=>{null==De||De(re),Pe?Xe(re):fe.next(re)},()=>{Te=!0},void 0,()=>{if(Te)try{for(ye--;_e.length&&ye<ue;){const re=_e.shift();Ke?(0,oe.f)(fe,Ke,()=>Je(re)):Je(re)}Ye()}catch(re){fe.error(re)}}))};return we.subscribe((0,be.x)(fe,Xe,()=>{rt=!0,Ye()})),()=>{null==pt||pt()}}(ue,De,we,ae)))}},5363:(Wt,nt,B)=>{"use strict";B.d(nt,{Q:()=>oe});var y=B(9672),f=B(4482),W=B(5403);function oe(be,Ce=0){return(0,f.e)((he,Me)=>{he.subscribe((0,W.x)(Me,we=>(0,y.f)(Me,be,()=>Me.next(we),Ce),()=>(0,y.f)(Me,be,()=>Me.complete(),Ce),we=>(0,y.f)(Me,be,()=>Me.error(we),Ce)))})}},5026:(Wt,nt,B)=>{"use strict";B.d(nt,{R:()=>oe});var y=B(4482),f=B(5403);function oe(be,Ce){return(0,y.e)(function W(be,Ce,he,Me,we){return(fe,ae)=>{let ue=he,De=Ce,Pe=0;fe.subscribe((0,f.x)(ae,Ke=>{const pt=Pe++;De=ue?be(De,Ke,pt):(ue=!0,Ke),Me&&ae.next(De)},we&&(()=>{ue&&ae.next(De),ae.complete()})))}}(be,Ce,arguments.length>=2,!0))}},3099:(Wt,nt,B)=>{"use strict";B.d(nt,{B:()=>be});var y=B(8421),f=B(7579),W=B(930),oe=B(4482);function be(he={}){const{connector:Me=(()=>new f.x),resetOnError:we=!0,resetOnComplete:fe=!0,resetOnRefCountZero:ae=!0}=he;return ue=>{let De,Pe,Ke,pt=0,_e=!1,ye=!1;const Oe=()=>{null==Pe||Pe.unsubscribe(),Pe=void 0},rt=()=>{Oe(),De=Ke=void 0,_e=ye=!1},Ye=()=>{const Xe=De;rt(),null==Xe||Xe.unsubscribe()};return(0,oe.e)((Xe,Je)=>{pt++,!ye&&!_e&&Oe();const ht=Ke=null!=Ke?Ke:Me();Je.add(()=>{pt--,0===pt&&!ye&&!_e&&(Pe=Ce(Ye,ae))}),ht.subscribe(Je),!De&&pt>0&&(De=new W.Hp({next:Te=>ht.next(Te),error:Te=>{ye=!0,Oe(),Pe=Ce(rt,we,Te),ht.error(Te)},complete:()=>{_e=!0,Oe(),Pe=Ce(rt,fe),ht.complete()}}),(0,y.Xf)(Xe).subscribe(De))})(ue)}}function Ce(he,Me,...we){if(!0===Me)return void he();if(!1===Me)return;const fe=new W.Hp({next:()=>{fe.unsubscribe(),he()}});return Me(...we).subscribe(fe)}},8675:(Wt,nt,B)=>{"use strict";B.d(nt,{O:()=>oe});var y=B(7272),f=B(7669),W=B(4482);function oe(...be){const Ce=(0,f.yG)(be);return(0,W.e)((he,Me)=>{(Ce?(0,y.z)(be,he,Ce):(0,y.z)(be,he)).subscribe(Me)})}},9468:(Wt,nt,B)=>{"use strict";B.d(nt,{R:()=>f});var y=B(4482);function f(W,oe=0){return(0,y.e)((be,Ce)=>{Ce.add(W.schedule(()=>be.subscribe(Ce),oe))})}},3900:(Wt,nt,B)=>{"use strict";B.d(nt,{w:()=>oe});var y=B(8421),f=B(4482),W=B(5403);function oe(be,Ce){return(0,f.e)((he,Me)=>{let we=null,fe=0,ae=!1;const ue=()=>ae&&!we&&Me.complete();he.subscribe((0,W.x)(Me,De=>{null==we||we.unsubscribe();let Pe=0;const Ke=fe++;(0,y.Xf)(be(De,Ke)).subscribe(we=(0,W.x)(Me,pt=>Me.next(Ce?Ce(De,pt,Ke,Pe++):pt),()=>{we=null,ue()}))},()=>{ae=!0,ue()}))})}},5698:(Wt,nt,B)=>{"use strict";B.d(nt,{q:()=>oe});var y=B(515),f=B(4482),W=B(5403);function oe(be){return be<=0?()=>y.E:(0,f.e)((Ce,he)=>{let Me=0;Ce.subscribe((0,W.x)(he,we=>{++Me<=be&&(he.next(we),be<=Me&&he.complete())}))})}},8505:(Wt,nt,B)=>{"use strict";B.d(nt,{b:()=>be});var y=B(576),f=B(4482),W=B(5403),oe=B(4671);function be(Ce,he,Me){const we=(0,y.m)(Ce)||he||Me?{next:Ce,error:he,complete:Me}:Ce;return we?(0,f.e)((fe,ae)=>{var ue;null===(ue=we.subscribe)||void 0===ue||ue.call(we);let De=!0;fe.subscribe((0,W.x)(ae,Pe=>{var Ke;null===(Ke=we.next)||void 0===Ke||Ke.call(we,Pe),ae.next(Pe)},()=>{var Pe;De=!1,null===(Pe=we.complete)||void 0===Pe||Pe.call(we),ae.complete()},Pe=>{var Ke;De=!1,null===(Ke=we.error)||void 0===Ke||Ke.call(we,Pe),ae.error(Pe)},()=>{var Pe,Ke;De&&(null===(Pe=we.unsubscribe)||void 0===Pe||Pe.call(we)),null===(Ke=we.finalize)||void 0===Ke||Ke.call(we)}))}):oe.y}},8068:(Wt,nt,B)=>{"use strict";B.d(nt,{T:()=>oe});var y=B(6805),f=B(4482),W=B(5403);function oe(Ce=be){return(0,f.e)((he,Me)=>{let we=!1;he.subscribe((0,W.x)(Me,fe=>{we=!0,Me.next(fe)},()=>we?Me.complete():Me.error(Ce())))})}function be(){return new y.K}},4408:(Wt,nt,B)=>{"use strict";B.d(nt,{o:()=>be});var y=B(727);class f extends y.w0{constructor(he,Me){super()}schedule(he,Me=0){return this}}const W={setInterval(Ce,he,...Me){const{delegate:we}=W;return null!=we&&we.setInterval?we.setInterval(Ce,he,...Me):setInterval(Ce,he,...Me)},clearInterval(Ce){const{delegate:he}=W;return((null==he?void 0:he.clearInterval)||clearInterval)(Ce)},delegate:void 0};var oe=B(8737);class be extends f{constructor(he,Me){super(he,Me),this.scheduler=he,this.work=Me,this.pending=!1}schedule(he,Me=0){var we;if(this.closed)return this;this.state=he;const fe=this.id,ae=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(ae,fe,Me)),this.pending=!0,this.delay=Me,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(ae,this.id,Me),this}requestAsyncId(he,Me,we=0){return W.setInterval(he.flush.bind(he,this),we)}recycleAsyncId(he,Me,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return Me;null!=Me&&W.clearInterval(Me)}execute(he,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(he,Me);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,Me){let fe,we=!1;try{this.work(he)}catch(ae){we=!0,fe=ae||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:he,scheduler:Me}=this,{actions:we}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(we,this),null!=he&&(this.id=this.recycleAsyncId(Me,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wt,nt,B)=>{"use strict";B.d(nt,{v:()=>W});var y=B(6063);class f{constructor(be,Ce=f.now){this.schedulerActionCtor=be,this.now=Ce}schedule(be,Ce=0,he){return new this.schedulerActionCtor(this,be).schedule(he,Ce)}}f.now=y.l.now;class W extends f{constructor(be,Ce=f.now){super(be,Ce),this.actions=[],this._active=!1}flush(be){const{actions:Ce}=this;if(this._active)return void Ce.push(be);let he;this._active=!0;do{if(he=be.execute(be.state,be.delay))break}while(be=Ce.shift());if(this._active=!1,he){for(;be=Ce.shift();)be.unsubscribe();throw he}}}},4986:(Wt,nt,B)=>{"use strict";B.d(nt,{z:()=>W});var y=B(4408);const W=new(B(7565).v)(y.o)},6063:(Wt,nt,B)=>{"use strict";B.d(nt,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(Wt,nt,B)=>{"use strict";B.d(nt,{z:()=>y});const y={setTimeout(f,W,...oe){const{delegate:be}=y;return null!=be&&be.setTimeout?be.setTimeout(f,W,...oe):setTimeout(f,W,...oe)},clearTimeout(f){const{delegate:W}=y;return((null==W?void 0:W.clearTimeout)||clearTimeout)(f)},delegate:void 0}},2202:(Wt,nt,B)=>{"use strict";B.d(nt,{h:()=>f});const f=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wt,nt,B)=>{"use strict";B.d(nt,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Wt,nt,B)=>{"use strict";B.d(nt,{K:()=>f});const f=(0,B(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Wt,nt,B)=>{"use strict";B.d(nt,{_6:()=>Ce,jO:()=>oe,yG:()=>be});var y=B(576);function W(he){return he[he.length-1]}function oe(he){return(0,y.m)(W(he))?he.pop():void 0}function be(he){return function f(he){return he&&(0,y.m)(he.schedule)}(W(he))?he.pop():void 0}function Ce(he,Me){return"number"==typeof W(he)?he.pop():Me}},4742:(Wt,nt,B)=>{"use strict";B.d(nt,{D:()=>be});const{isArray:y}=Array,{getPrototypeOf:f,prototype:W,keys:oe}=Object;function be(he){if(1===he.length){const Me=he[0];if(y(Me))return{args:Me,keys:null};if(function Ce(he){return he&&"object"==typeof he&&f(he)===W}(Me)){const we=oe(Me);return{args:we.map(fe=>Me[fe]),keys:we}}}return{args:he,keys:null}}},8737:(Wt,nt,B)=>{"use strict";function y(f,W){if(f){const oe=f.indexOf(W);0<=oe&&f.splice(oe,1)}}B.d(nt,{P:()=>y})},3888:(Wt,nt,B)=>{"use strict";function y(f){const oe=f(be=>{Error.call(be),be.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}B.d(nt,{d:()=>y})},1810:(Wt,nt,B)=>{"use strict";function y(f,W){return f.reduce((oe,be,Ce)=>(oe[be]=W[Ce],oe),{})}B.d(nt,{n:()=>y})},2806:(Wt,nt,B)=>{"use strict";B.d(nt,{O:()=>oe,x:()=>W});var y=B(2416);let f=null;function W(be){if(y.v.useDeprecatedSynchronousErrorHandling){const Ce=!f;if(Ce&&(f={errorThrown:!1,error:null}),be(),Ce){const{errorThrown:he,error:Me}=f;if(f=null,he)throw Me}}else be()}function oe(be){y.v.useDeprecatedSynchronousErrorHandling&&f&&(f.errorThrown=!0,f.error=be)}},9672:(Wt,nt,B)=>{"use strict";function y(f,W,oe,be=0,Ce=!1){const he=W.schedule(function(){oe(),Ce?f.add(this.schedule(null,be)):this.unsubscribe()},be);if(f.add(he),!Ce)return he}B.d(nt,{f:()=>y})},4671:(Wt,nt,B)=>{"use strict";function y(f){return f}B.d(nt,{y:()=>y})},1144:(Wt,nt,B)=>{"use strict";B.d(nt,{z:()=>y});const y=f=>f&&"number"==typeof f.length&&"function"!=typeof f},2206:(Wt,nt,B)=>{"use strict";B.d(nt,{D:()=>f});var y=B(576);function f(W){return Symbol.asyncIterator&&(0,y.m)(null==W?void 0:W[Symbol.asyncIterator])}},576:(Wt,nt,B)=>{"use strict";function y(f){return"function"==typeof f}B.d(nt,{m:()=>y})},3670:(Wt,nt,B)=>{"use strict";B.d(nt,{c:()=>W});var y=B(8822),f=B(576);function W(oe){return(0,f.m)(oe[y.L])}},6495:(Wt,nt,B)=>{"use strict";B.d(nt,{T:()=>W});var y=B(2202),f=B(576);function W(oe){return(0,f.m)(null==oe?void 0:oe[y.h])}},8239:(Wt,nt,B)=>{"use strict";B.d(nt,{t:()=>f});var y=B(576);function f(W){return(0,y.m)(null==W?void 0:W.then)}},3260:(Wt,nt,B)=>{"use strict";B.d(nt,{L:()=>oe,Q:()=>W});var y=B(655),f=B(576);function W(be){return(0,y.FC)(this,arguments,function*(){const he=be.getReader();try{for(;;){const{value:Me,done:we}=yield(0,y.qq)(he.read());if(we)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Me)}}finally{he.releaseLock()}})}function oe(be){return(0,f.m)(null==be?void 0:be.getReader)}},4482:(Wt,nt,B)=>{"use strict";B.d(nt,{A:()=>f,e:()=>W});var y=B(576);function f(oe){return(0,y.m)(null==oe?void 0:oe.lift)}function W(oe){return be=>{if(f(be))return be.lift(function(Ce){try{return oe(Ce,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Wt,nt,B)=>{"use strict";B.d(nt,{Z:()=>oe});var y=B(4004);const{isArray:f}=Array;function oe(be){return(0,y.U)(Ce=>function W(be,Ce){return f(Ce)?be(...Ce):be(Ce)}(be,Ce))}},5032:(Wt,nt,B)=>{"use strict";function y(){}B.d(nt,{Z:()=>y})},9635:(Wt,nt,B)=>{"use strict";B.d(nt,{U:()=>W,z:()=>f});var y=B(4671);function f(...oe){return W(oe)}function W(oe){return 0===oe.length?y.y:1===oe.length?oe[0]:function(Ce){return oe.reduce((he,Me)=>Me(he),Ce)}}},7849:(Wt,nt,B)=>{"use strict";B.d(nt,{h:()=>W});var y=B(2416),f=B(3410);function W(oe){f.z.setTimeout(()=>{const{onUnhandledError:be}=y.v;if(!be)throw oe;be(oe)})}},4532:(Wt,nt,B)=>{"use strict";function y(f){return new TypeError(`You provided ${null!==f&&"object"==typeof f?"an invalid object":`'${f}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(nt,{z:()=>y})},863:(Wt,nt,B)=>{var y={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[8372,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,8594,9230],"./ion-datetime_3.entry.js":[4959,8594,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function f(W){if(!B.o(y,W))return Promise.resolve().then(()=>{var Ce=new Error("Cannot find module '"+W+"'");throw Ce.code="MODULE_NOT_FOUND",Ce});var oe=y[W],be=oe[0];return Promise.all(oe.slice(1).map(B.e)).then(()=>B(be))}f.keys=()=>Object.keys(y),f.id=863,Wt.exports=f},655:(Wt,nt,B)=>{"use strict";function oe(Ze,lt){var ot={};for(var Re in Ze)Object.prototype.hasOwnProperty.call(Ze,Re)&&lt.indexOf(Re)<0&&(ot[Re]=Ze[Re]);if(null!=Ze&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(Re=Object.getOwnPropertySymbols(Ze);Se<Re.length;Se++)lt.indexOf(Re[Se])<0&&Object.prototype.propertyIsEnumerable.call(Ze,Re[Se])&&(ot[Re[Se]]=Ze[Re[Se]])}return ot}function be(Ze,lt,ot,Re){var Qe,Se=arguments.length,Be=Se<3?lt:null===Re?Re=Object.getOwnPropertyDescriptor(lt,ot):Re;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Be=Reflect.decorate(Ze,lt,ot,Re);else for(var gt=Ze.length-1;gt>=0;gt--)(Qe=Ze[gt])&&(Be=(Se<3?Qe(Be):Se>3?Qe(lt,ot,Be):Qe(lt,ot))||Be);return Se>3&&Be&&Object.defineProperty(lt,ot,Be),Be}function ue(Ze,lt,ot,Re){return new(ot||(ot=Promise))(function(Be,Qe){function gt(_n){try{Ft(Re.next(_n))}catch(it){Qe(it)}}function Zt(_n){try{Ft(Re.throw(_n))}catch(it){Qe(it)}}function Ft(_n){_n.done?Be(_n.value):function Se(Be){return Be instanceof ot?Be:new ot(function(Qe){Qe(Be)})}(_n.value).then(gt,Zt)}Ft((Re=Re.apply(Ze,lt||[])).next())})}function Ye(Ze){return this instanceof Ye?(this.v=Ze,this):new Ye(Ze)}function Xe(Ze,lt,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,Re=ot.apply(Ze,lt||[]),Be=[];return Se={},Qe("next"),Qe("throw"),Qe("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function Qe(de){Re[de]&&(Se[de]=function(It){return new Promise(function(Bt,Ge){Be.push([de,It,Bt,Ge])>1||gt(de,It)})})}function gt(de,It){try{!function Zt(de){de.value instanceof Ye?Promise.resolve(de.value.v).then(Ft,_n):it(Be[0][2],de)}(Re[de](It))}catch(Bt){it(Be[0][3],Bt)}}function Ft(de){gt("next",de)}function _n(de){gt("throw",de)}function it(de,It){de(It),Be.shift(),Be.length&&gt(Be[0][0],Be[0][1])}}function ht(Ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,lt=Ze[Symbol.asyncIterator];return lt?lt.call(Ze):(Ze=function pt(Ze){var lt="function"==typeof Symbol&&Symbol.iterator,ot=lt&&Ze[lt],Re=0;if(ot)return ot.call(Ze);if(Ze&&"number"==typeof Ze.length)return{next:function(){return Ze&&Re>=Ze.length&&(Ze=void 0),{value:Ze&&Ze[Re++],done:!Ze}}};throw new TypeError(lt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ze),ot={},Re("next"),Re("throw"),Re("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function Re(Be){ot[Be]=Ze[Be]&&function(Qe){return new Promise(function(gt,Zt){!function Se(Be,Qe,gt,Zt){Promise.resolve(Zt).then(function(Ft){Be({value:Ft,done:gt})},Qe)}(gt,Zt,(Qe=Ze[Be](Qe)).done,Qe.value)})}}}B.d(nt,{FC:()=>Xe,KL:()=>ht,_T:()=>oe,gn:()=>be,mG:()=>ue,qq:()=>Ye})},6895:(Wt,nt,B)=>{"use strict";B.d(nt,{Do:()=>Oe,EM:()=>Xi,HT:()=>oe,JF:()=>Ys,K0:()=>Ce,Mx:()=>qi,O5:()=>ce,PM:()=>lo,S$:()=>pt,V_:()=>we,Ye:()=>rt,b0:()=>ye,bD:()=>zs,ez:()=>oo,mk:()=>Kt,q:()=>W,rS:()=>bo,sg:()=>br,tP:()=>Tn,w_:()=>be});var y=B(4650);let f=null;function W(){return f}function oe(P){f||(f=P)}class be{}const Ce=new y.OlP("DocumentToken");let he=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=y.Yz7({token:P,factory:function(){return function Me(){return(0,y.LFG)(fe)}()},providedIn:"platform"}),P})();const we=new y.OlP("Location Initialized");let fe=(()=>{class P extends he{constructor(F){super(),this._doc=F,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(F){const J=W().getGlobalEventTarget(this._doc,"window");return J.addEventListener("popstate",F,!1),()=>J.removeEventListener("popstate",F)}onHashChange(F){const J=W().getGlobalEventTarget(this._doc,"window");return J.addEventListener("hashchange",F,!1),()=>J.removeEventListener("hashchange",F)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(F){this._location.pathname=F}pushState(F,J,me){ae()?this._history.pushState(F,J,me):this._location.hash=me}replaceState(F,J,me){ae()?this._history.replaceState(F,J,me):this._location.hash=me}forward(){this._history.forward()}back(){this._history.back()}historyGo(F=0){this._history.go(F)}getState(){return this._history.state}}return P.\u0275fac=function(F){return new(F||P)(y.LFG(Ce))},P.\u0275prov=y.Yz7({token:P,factory:function(){return function ue(){return new fe((0,y.LFG)(Ce))}()},providedIn:"platform"}),P})();function ae(){return!!window.history.pushState}function De(P,G){if(0==P.length)return G;if(0==G.length)return P;let F=0;return P.endsWith("/")&&F++,G.startsWith("/")&&F++,2==F?P+G.substring(1):1==F?P+G:P+"/"+G}function Pe(P){const G=P.match(/#|\?|$/),F=G&&G.index||P.length;return P.slice(0,F-("/"===P[F-1]?1:0))+P.slice(F)}function Ke(P){return P&&"?"!==P[0]?"?"+P:P}let pt=(()=>{class P{historyGo(F){throw new Error("Not implemented")}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275prov=y.Yz7({token:P,factory:function(){return(0,y.f3M)(ye)},providedIn:"root"}),P})();const _e=new y.OlP("appBaseHref");let ye=(()=>{class P extends pt{constructor(F,J){var me,mt,At;super(),this._platformLocation=F,this._removeListenerFns=[],this._baseHref=null!==(me=null!==(mt=null!=J?J:this._platformLocation.getBaseHrefFromDOM())&&void 0!==mt?mt:null===(At=(0,y.f3M)(Ce).location)||void 0===At?void 0:At.origin)&&void 0!==me?me:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}prepareExternalUrl(F){return De(this._baseHref,F)}path(F=!1){const J=this._platformLocation.pathname+Ke(this._platformLocation.search),me=this._platformLocation.hash;return me&&F?`${J}${me}`:J}pushState(F,J,me,mt){const At=this.prepareExternalUrl(me+Ke(mt));this._platformLocation.pushState(F,J,At)}replaceState(F,J,me,mt){const At=this.prepareExternalUrl(me+Ke(mt));this._platformLocation.replaceState(F,J,At)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){var J,me;null===(J=(me=this._platformLocation).historyGo)||void 0===J||J.call(me,F)}}return P.\u0275fac=function(F){return new(F||P)(y.LFG(he),y.LFG(_e,8))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})(),Oe=(()=>{class P extends pt{constructor(F,J){super(),this._platformLocation=F,this._baseHref="",this._removeListenerFns=[],null!=J&&(this._baseHref=J)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(F){this._removeListenerFns.push(this._platformLocation.onPopState(F),this._platformLocation.onHashChange(F))}getBaseHref(){return this._baseHref}path(F=!1){let J=this._platformLocation.hash;return null==J&&(J="#"),J.length>0?J.substring(1):J}prepareExternalUrl(F){const J=De(this._baseHref,F);return J.length>0?"#"+J:J}pushState(F,J,me,mt){let At=this.prepareExternalUrl(me+Ke(mt));0==At.length&&(At=this._platformLocation.pathname),this._platformLocation.pushState(F,J,At)}replaceState(F,J,me,mt){let At=this.prepareExternalUrl(me+Ke(mt));0==At.length&&(At=this._platformLocation.pathname),this._platformLocation.replaceState(F,J,At)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(F=0){var J,me;null===(J=(me=this._platformLocation).historyGo)||void 0===J||J.call(me,F)}}return P.\u0275fac=function(F){return new(F||P)(y.LFG(he),y.LFG(_e,8))},P.\u0275prov=y.Yz7({token:P,factory:P.\u0275fac}),P})(),rt=(()=>{class P{constructor(F){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=F;const J=this._locationStrategy.getBaseHref();this._basePath=function ht(P){if(new RegExp("^(https?:)?//").test(P)){const[,F]=P.split(/\/\/[^\/]+/);return F}return P}(Pe(Je(J))),this._locationStrategy.onPopState(me=>{this._subject.emit({url:this.path(!0),pop:!0,state:me.state,type:me.type})})}ngOnDestroy(){var F;null===(F=this._urlChangeSubscription)||void 0===F||F.unsubscribe(),this._urlChangeListeners=[]}path(F=!1){return this.normalize(this._locationStrategy.path(F))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(F,J=""){return this.path()==this.normalize(F+Ke(J))}normalize(F){return P.stripTrailingSlash(function Xe(P,G){if(!P||!G.startsWith(P))return G;const F=G.substring(P.length);return""===F||["/",";","?","#"].includes(F[0])?F:G}(this._basePath,Je(F)))}prepareExternalUrl(F){return F&&"/"!==F[0]&&(F="/"+F),this._locationStrategy.prepareExternalUrl(F)}go(F,J="",me=null){this._locationStrategy.pushState(me,"",F,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ke(J)),me)}replaceState(F,J="",me=null){this._locationStrategy.replaceState(me,"",F,J),this._notifyUrlChangeListeners(this.prepareExternalUrl(F+Ke(J)),me)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(F=0){var J,me;null===(J=(me=this._locationStrategy).historyGo)||void 0===J||J.call(me,F)}onUrlChange(F){return this._urlChangeListeners.push(F),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(J=>{this._notifyUrlChangeListeners(J.url,J.state)})),()=>{const J=this._urlChangeListeners.indexOf(F);var me;this._urlChangeListeners.splice(J,1),0===this._urlChangeListeners.length&&(null===(me=this._urlChangeSubscription)||void 0===me||me.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(F="",J){this._urlChangeListeners.forEach(me=>me(F,J))}subscribe(F,J,me){return this._subject.subscribe({next:F,error:J,complete:me})}}return P.normalizeQueryParams=Ke,P.joinWithSlash=De,P.stripTrailingSlash=Pe,P.\u0275fac=function(F){return new(F||P)(y.LFG(pt))},P.\u0275prov=y.Yz7({token:P,factory:function(){return function Ye(){return new rt((0,y.LFG)(pt))}()},providedIn:"root"}),P})();function Je(P){return P.replace(/\/index.html$/,"")}function qi(P,G){G=encodeURIComponent(G);for(const F of P.split(";")){const J=F.indexOf("="),[me,mt]=-1==J?[F,""]:[F.slice(0,J),F.slice(J+1)];if(me.trim()===G)return decodeURIComponent(mt)}return null}const hs=/\s+/,ni=[];let Kt=(()=>{class P{constructor(F,J,me,mt){this._iterableDiffers=F,this._keyValueDiffers=J,this._ngEl=me,this._renderer=mt,this.initialClasses=ni,this.stateMap=new Map}set klass(F){this.initialClasses=null!=F?F.trim().split(hs):ni}set ngClass(F){this.rawClass="string"==typeof F?F.trim().split(hs):F}ngDoCheck(){for(const J of this.initialClasses)this._updateState(J,!0);const F=this.rawClass;if(Array.isArray(F)||F instanceof Set)for(const J of F)this._updateState(J,!0);else if(null!=F)for(const J of Object.keys(F))this._updateState(J,Boolean(F[J]));this._applyStateDiff()}_updateState(F,J){const me=this.stateMap.get(F);void 0!==me?(me.enabled!==J&&(me.changed=!0,me.enabled=J),me.touched=!0):this.stateMap.set(F,{enabled:J,changed:!0,touched:!0})}_applyStateDiff(){for(const F of this.stateMap){const J=F[0],me=F[1];me.changed?(this._toggleClass(J,me.enabled),me.changed=!1):me.touched||(me.enabled&&this._toggleClass(J,!1),this.stateMap.delete(J)),me.touched=!1}}_toggleClass(F,J){(F=F.trim()).length>0&&F.split(hs).forEach(me=>{J?this._renderer.addClass(this._ngEl.nativeElement,me):this._renderer.removeClass(this._ngEl.nativeElement,me)})}}return P.\u0275fac=function(F){return new(F||P)(y.Y36(y.ZZ4),y.Y36(y.aQg),y.Y36(y.SBq),y.Y36(y.Qsj))},P.\u0275dir=y.lG2({type:P,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),P})();class _i{constructor(G,F,J,me){this.$implicit=G,this.ngForOf=F,this.index=J,this.count=me}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let br=(()=>{class P{set ngForOf(F){this._ngForOf=F,this._ngForOfDirty=!0}set ngForTrackBy(F){this._trackByFn=F}get ngForTrackBy(){return this._trackByFn}constructor(F,J,me){this._viewContainer=F,this._template=J,this._differs=me,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(F){F&&(this._template=F)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const F=this._ngForOf;!this._differ&&F&&(this._differ=this._differs.find(F).create(this.ngForTrackBy))}if(this._differ){const F=this._differ.diff(this._ngForOf);F&&this._applyChanges(F)}}_applyChanges(F){const J=this._viewContainer;F.forEachOperation((me,mt,At)=>{if(null==me.previousIndex)J.createEmbeddedView(this._template,new _i(me.item,this._ngForOf,-1,-1),null===At?void 0:At);else if(null==At)J.remove(null===mt?void 0:mt);else if(null!==mt){const yn=J.get(mt);J.move(yn,At),ri(yn,me)}});for(let me=0,mt=J.length;me<mt;me++){const yn=J.get(me).context;yn.index=me,yn.count=mt,yn.ngForOf=this._ngForOf}F.forEachIdentityChange(me=>{ri(J.get(me.currentIndex),me)})}static ngTemplateContextGuard(F,J){return!0}}return P.\u0275fac=function(F){return new(F||P)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},P.\u0275dir=y.lG2({type:P,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),P})();function ri(P,G){P.context.$implicit=G.item}let ce=(()=>{class P{constructor(F,J){this._viewContainer=F,this._context=new We,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=J}set ngIf(F){this._context.$implicit=this._context.ngIf=F,this._updateView()}set ngIfThen(F){ee("ngIfThen",F),this._thenTemplateRef=F,this._thenViewRef=null,this._updateView()}set ngIfElse(F){ee("ngIfElse",F),this._elseTemplateRef=F,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(F,J){return!0}}return P.\u0275fac=function(F){return new(F||P)(y.Y36(y.s_b),y.Y36(y.Rgc))},P.\u0275dir=y.lG2({type:P,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),P})();class We{constructor(){this.$implicit=null,this.ngIf=null}}function ee(P,G){if(G&&!G.createEmbeddedView)throw new Error(`${P} must be a TemplateRef, but received '${(0,y.AaK)(G)}'.`)}let Tn=(()=>{class P{constructor(F){this._viewContainerRef=F,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(F){if(F.ngTemplateOutlet||F.ngTemplateOutletInjector){const J=this._viewContainerRef;if(this._viewRef&&J.remove(J.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:me,ngTemplateOutletContext:mt,ngTemplateOutletInjector:At}=this;this._viewRef=J.createEmbeddedView(me,mt,At?{injector:At}:void 0)}else this._viewRef=null}else this._viewRef&&F.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return P.\u0275fac=function(F){return new(F||P)(y.Y36(y.s_b))},P.\u0275dir=y.lG2({type:P,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[y.TTD]}),P})();const ui=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g;let bo=(()=>{class P{transform(F){if(null==F)return null;if("string"!=typeof F)throw function jn(P,G){return new y.vHH(2100,!1)}();return F.replace(ui,J=>J[0].toUpperCase()+J.slice(1).toLowerCase())}}return P.\u0275fac=function(F){return new(F||P)},P.\u0275pipe=y.Yjl({name:"titlecase",type:P,pure:!0,standalone:!0}),P})(),oo=(()=>{class P{}return P.\u0275fac=function(F){return new(F||P)},P.\u0275mod=y.oAB({type:P}),P.\u0275inj=y.cJS({}),P})();const zs="browser",Ei="server";function lo(P){return P===Ei}let Xi=(()=>{class P{}return P.\u0275prov=(0,y.Yz7)({token:P,providedIn:"root",factory:()=>new qs((0,y.LFG)(Ce),window)}),P})();class qs{constructor(G,F){this.document=G,this.window=F,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const F=function ji(P,G){const F=P.getElementById(G)||P.getElementsByName(G)[0];if(F)return F;if("function"==typeof P.createTreeWalker&&P.body&&(P.body.createShadowRoot||P.body.attachShadow)){const J=P.createTreeWalker(P.body,NodeFilter.SHOW_ELEMENT);let me=J.currentNode;for(;me;){const mt=me.shadowRoot;if(mt){const At=mt.getElementById(G)||mt.querySelector(`[name="${G}"]`);if(At)return At}me=J.nextNode()}}return null}(this.document,G);F&&(this.scrollToElement(F),F.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const F=this.window.history;F&&F.scrollRestoration&&(F.scrollRestoration=G)}}scrollToElement(G){const F=G.getBoundingClientRect(),J=F.left+this.window.pageXOffset,me=F.top+this.window.pageYOffset,mt=this.offset();this.window.scrollTo(J-mt[0],me-mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=Ni(this.window.history)||Ni(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ni(P){return Object.getOwnPropertyDescriptor(P,"scrollRestoration")}class Ys{}},4650:(Wt,nt,B)=>{"use strict";B.d(nt,{$8M:()=>yu,$WT:()=>Vn,$Z:()=>VE,AFp:()=>hg,ALo:()=>qv,AaK:()=>Me,BQk:()=>Mp,CHM:()=>q,CRH:()=>gw,CZH:()=>xy,CqO:()=>Ld,D6c:()=>jD,DdM:()=>fy,EJc:()=>Ow,EpF:()=>Yh,F$t:()=>$m,F4k:()=>G_,FYo:()=>CE,FiY:()=>oi,G48:()=>CD,Gf:()=>vy,GfV:()=>TE,GkF:()=>H_,Gpc:()=>ae,HOy:()=>Ym,Hsn:()=>cI,JOm:()=>ka,KtG:()=>et,LFG:()=>zt,LMc:()=>zD,Lbi:()=>uD,Lck:()=>VC,MAs:()=>Nd,MMx:()=>Vc,NdJ:()=>Al,OlP:()=>Xr,Oqu:()=>kp,P3R:()=>Mh,PXZ:()=>gg,Q6J:()=>Pm,QGY:()=>z_,Qsj:()=>DE,R0b:()=>wo,RDi:()=>op,Rgc:()=>Xd,SBq:()=>Id,Sil:()=>hD,Suo:()=>pw,TTD:()=>Xi,TgZ:()=>km,Udp:()=>nv,VKq:()=>Yd,W1O:()=>yw,WLB:()=>Kd,X6Q:()=>By,XFs:()=>Vt,Xpm:()=>Dr,Xts:()=>tm,Y36:()=>Lh,YKP:()=>dy,YNc:()=>xc,Yjl:()=>di,Yz7:()=>it,Z0I:()=>Ge,ZZ4:()=>k0,_Bn:()=>cy,_UZ:()=>Bi,_Vd:()=>Ql,_c5:()=>OS,_uU:()=>qm,aQg:()=>Ww,c2e:()=>IS,cJS:()=>It,cg1:()=>Fc,dDg:()=>Bw,dqk:()=>pn,eFA:()=>_f,eJc:()=>o0,ekj:()=>Gm,eoX:()=>Oy,f3M:()=>nn,g9A:()=>My,h0i:()=>hf,hGG:()=>VD,hij:()=>Np,iGM:()=>fw,ifc:()=>at,ip1:()=>E0,jDz:()=>JI,kL8:()=>Lc,lG2:()=>$i,lcZ:()=>Yv,lqb:()=>Ic,lri:()=>pg,n5z:()=>tc,oAB:()=>Hr,oxw:()=>Bm,q4F:()=>I_,qLn:()=>gp,qOj:()=>$u,qZA:()=>Nm,rWj:()=>yf,sBO:()=>DD,s_b:()=>rg,soG:()=>ls,tb:()=>Gc,tp0:()=>N,uIk:()=>Rm,vHH:()=>_e,vpe:()=>al,wAp:()=>Zn,xp6:()=>cm,ynx:()=>Fd,z2F:()=>T0,zSh:()=>sm,zs3:()=>Pu});var y=B(7579),f=B(727),W=B(9751),oe=B(6451),be=B(3099);function Ce(i){for(let s in i)if(i[s]===Ce)return s;throw Error("Could not find renamed property on target object.")}function he(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function Me(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Me).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function we(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const fe=Ce({__forward_ref__:Ce});function ae(i){return i.__forward_ref__=ae,i.toString=function(){return Me(this())},i}function ue(i){return De(i)?i():i}function De(i){return"function"==typeof i&&i.hasOwnProperty(fe)&&i.__forward_ref__===ae}function Pe(i){return i&&!!i.\u0275providers}const pt="https://g.co/ng/security#xss";class _e extends Error{constructor(s,a){super(ye(s,a)),this.code=s}}function ye(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function Oe(i){return"string"==typeof i?i:null==i?"":String(i)}function ht(i,s){throw new _e(-201,!1)}function Qe(i,s){null==i&&function gt(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function it(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function It(i){return{providers:i.providers||[],imports:i.imports||[]}}function Bt(i){return Jt(i,Rn)||Jt(i,Wn)}function Ge(i){return null!==Bt(i)}function Jt(i,s){return i.hasOwnProperty(s)?i[s]:null}function on(i){return i&&(i.hasOwnProperty(nr)||i.hasOwnProperty(Qn))?i[nr]:null}const Rn=Ce({\u0275prov:Ce}),nr=Ce({\u0275inj:Ce}),Wn=Ce({ngInjectableDef:Ce}),Qn=Ce({ngInjectorDef:Ce});var Vt=(()=>((Vt=Vt||{})[Vt.Default=0]="Default",Vt[Vt.Host=1]="Host",Vt[Vt.Self=2]="Self",Vt[Vt.SkipSelf=4]="SkipSelf",Vt[Vt.Optional=8]="Optional",Vt))();let _r;function Ir(i){const s=_r;return _r=i,s}function qr(i,s,a){const u=Bt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&Vt.Optional?null:void 0!==s?s:void ht(Me(i))}const pn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),lr={},An="__NG_DI_FLAG__",Tr="ngTempTokenPath",Yr="ngTokenPath",Di=/\n/gm,er="\u0275",jr="__source";let kn;function In(i){const s=kn;return kn=i,s}function ti(i,s=Vt.Default){if(void 0===kn)throw new _e(-203,!1);return null===kn?qr(i,void 0,s):kn.get(i,s&Vt.Optional?null:void 0,s)}function zt(i,s=Vt.Default){return(function ar(){return _r}()||ti)(ue(i),s)}function nn(i,s=Vt.Default){return zt(i,cn(s))}function cn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function mn(i){const s=[];for(let a=0;a<i.length;a++){const u=ue(i[a]);if(Array.isArray(u)){if(0===u.length)throw new _e(900,!1);let d,g=Vt.Default;for(let w=0;w<u.length;w++){const R=u[w],k=dr(R);"number"==typeof k?-1===k?d=R.token:g|=k:d=R}s.push(zt(d,g))}else s.push(zt(u))}return s}function vn(i,s){return i[An]=s,i.prototype[An]=s,i}function dr(i){return i[An]}function $e(i){return{toString:i}.toString()}var Ct=(()=>((Ct=Ct||{})[Ct.OnPush=0]="OnPush",Ct[Ct.Default=1]="Default",Ct))(),at=(()=>{return(i=at||(at={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",at;var i})();const Xt={},ke=[],Ne=Ce({\u0275cmp:Ce}),ge=Ce({\u0275dir:Ce}),st=Ce({\u0275pipe:Ce}),Dt=Ce({\u0275mod:Ce}),Mt=Ce({\u0275fac:Ce}),gn=Ce({__NG_ELEMENT_ID__:Ce});let ur=0;function Dr(i){return $e(()=>{const s=vr(i),a={...s,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||at.Emulated,id:"c"+ur++,styles:i.styles||ke,_:null,schemas:i.schemas||null,tView:null};qi(a);const u=i.dependencies;return a.directiveDefs=hs(u,!1),a.pipeDefs=hs(u,!0),a})}function Ti(i){return zn(i)||hr(i)}function yi(i){return null!==i}function Hr(i){return $e(()=>({type:i.type,bootstrap:i.bootstrap||ke,declarations:i.declarations||ke,imports:i.imports||ke,exports:i.exports||ke,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function rr(i,s){if(null==i)return Xt;const a={};for(const u in i)if(i.hasOwnProperty(u)){let d=i[u],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=u,s&&(s[d]=g)}return a}function $i(i){return $e(()=>{const s=vr(i);return qi(s),s})}function di(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zn(i){return i[Ne]||null}function hr(i){return i[ge]||null}function Pn(i){return i[st]||null}function Vn(i){const s=zn(i)||hr(i)||Pn(i);return null!==s&&s.standalone}function Sr(i,s){const a=i[Dt]||null;if(!a&&!0===s)throw new Error(`Type ${Me(i)} does not have '\u0275mod' property.`);return a}function vr(i){const s={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:s,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||ke,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:rr(i.inputs,s),outputs:rr(i.outputs)}}function qi(i){var s;null===(s=i.features)||void 0===s||s.forEach(a=>a(i))}function hs(i,s){if(!i)return null;const a=s?Pn:Ti;return()=>("function"==typeof i?i():i).map(u=>a(u)).filter(yi)}const ni=0,Kt=1,Bn=2,wr=3,zr=4,_i=5,br=6,ri=7,X=8,ce=9,We=10,ee=11,Le=12,Fe=13,yt=14,bt=15,vt=16,xt=17,en=18,ln=19,Tn=20,Nr=21,jn=22,Pi=1,Oi=2,Ui=7,li=8,Yi=9,ui=10;function ii(i){return Array.isArray(i)&&"object"==typeof i[Pi]}function Ki(i){return Array.isArray(i)&&!0===i[Pi]}function ki(i){return 0!=(4&i.flags)}function Qo(i){return i.componentOffset>-1}function so(i){return 1==(1&i.flags)}function si(i){return!!i.template}function Hs(i){return 0!=(256&i[Bn])}function hi(i,s){return i.hasOwnProperty(Mt)?i[Mt]:null}class Ws{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function Xi(){return qs}function qs(i){return i.type.prototype.ngOnChanges&&(i.setInput=ji),Ni}function Ni(){const i=Ys(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Xt)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function ji(i,s,a,u){const d=this.declaredInputs[a],g=Ys(i)||function To(i,s){return i[Qi]=s}(i,{previous:Xt,current:null}),w=g.current||(g.current={}),R=g.previous,k=R[d];w[d]=new Ws(k&&k.currentValue,s,R===Xt),i[u]=s}Xi.ngInherit=!0;const Qi="__ngSimpleChanges__";function Ys(i){return i[Qi]||null}const En=function(i,s,a){};function Qr(i){for(;Array.isArray(i);)i=i[ni];return i}function Zs(i,s){return Qr(s[i])}function fi(i,s){return Qr(s[i.index])}function So(i,s){return i.data[s]}function gs(i,s){return i[s]}function Jr(i,s){const a=s[i];return ii(a)?a:a[ni]}function Ao(i){return 64==(64&i[Bn])}function Rs(i,s){return null==s?null:i[s]}function uo(i){i[en]=0}function ea(i,s){i[_i]+=s;let a=i,u=i[wr];for(;null!==u&&(1===s&&1===a[_i]||-1===s&&0===a[_i]);)u[_i]+=s,a=u,u=u[wr]}const Sn={lFrame:Bl(null),bindingsEnabled:!0};function U(){return Sn.bindingsEnabled}function S(){return Sn.lFrame.lView}function x(){return Sn.lFrame.tView}function q(i){return Sn.lFrame.contextLView=i,i[X]}function et(i){return Sn.lFrame.contextLView=null,i}function kt(){let i=Xn();for(;null!==i&&64===i.type;)i=i.parent;return i}function Xn(){return Sn.lFrame.currentTNode}function tr(i,s){const a=Sn.lFrame;a.currentTNode=i,a.isParent=s}function es(){return Sn.lFrame.isParent}function Kr(){Sn.lFrame.isParent=!1}function pi(){const i=Sn.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function Sa(){return Sn.lFrame.bindingIndex++}function Qs(i){const s=Sn.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function hl(i,s){const a=Sn.lFrame;a.bindingIndex=a.bindingRootIndex=i,Fi(s)}function Fi(i){Sn.lFrame.currentDirectiveIndex=i}function na(){return Sn.lFrame.currentQueryIndex}function Bo(i){Sn.lFrame.currentQueryIndex=i}function Ju(i){const s=i[Kt];return 2===s.type?s.declTNode:1===s.type?i[br]:null}function ja(i,s,a){if(a&Vt.SkipSelf){let d=s,g=i;for(;!(d=d.parent,null!==d||a&Vt.Host||(d=Ju(g),null===d||(g=g[bt],10&d.type))););if(null===d)return!1;s=d,i=g}const u=Sn.lFrame=ec();return u.currentTNode=s,u.lView=i,!0}function pl(i){const s=ec(),a=i[Kt];Sn.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ec(){const i=Sn.lFrame,s=null===i?null:i.child;return null===s?Bl(i):s}function Bl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Ha(){const i=Sn.lFrame;return Sn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yo=Ha;function pa(){const i=Ha();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ai(){return Sn.lFrame.selectedIndex}function ga(i){Sn.lFrame.selectedIndex=i}function cr(){const i=Sn.lFrame;return So(i.tView,i.selectedIndex)}function gl(i,s){for(let H=s.directiveStart,te=s.directiveEnd;H<te;H++){const je=i.data[H].type.prototype,{ngAfterContentInit:ft,ngAfterContentChecked:Rt,ngAfterViewInit:Yt,ngAfterViewChecked:an,ngOnDestroy:xn}=je;var a,u,d,g,w,R,k;ft&&(null!==(a=i.contentHooks)&&void 0!==a?a:i.contentHooks=[]).push(-H,ft),Rt&&((null!==(u=i.contentHooks)&&void 0!==u?u:i.contentHooks=[]).push(H,Rt),(null!==(d=i.contentCheckHooks)&&void 0!==d?d:i.contentCheckHooks=[]).push(H,Rt)),Yt&&(null!==(g=i.viewHooks)&&void 0!==g?g:i.viewHooks=[]).push(-H,Yt),an&&((null!==(w=i.viewHooks)&&void 0!==w?w:i.viewHooks=[]).push(H,an),(null!==(R=i.viewCheckHooks)&&void 0!==R?R:i.viewCheckHooks=[]).push(H,an)),null!=xn&&(null!==(k=i.destroyHooks)&&void 0!==k?k:i.destroyHooks=[]).push(H,xn)}}function xa(i,s,a){F(i,s,3,a)}function P(i,s,a,u){(3&i[Bn])===a&&F(i,s,a,u)}function G(i,s){let a=i[Bn];(3&a)===s&&(a&=2047,a+=1,i[Bn]=a)}function F(i,s,a,u){const g=null!=u?u:-1,w=s.length-1;let R=0;for(let k=void 0!==u?65535&i[en]:0;k<w;k++)if("number"==typeof s[k+1]){if(R=s[k],null!=u&&R>=u)break}else s[k]<0&&(i[en]+=65536),(R<g||-1==g)&&(J(i,a,s,k),i[en]=(4294901760&i[en])+k+2),k++}function J(i,s,a,u){const d=a[u]<0,g=a[u+1],R=i[d?-a[u]:a[u]];if(d){if(i[Bn]>>11<i[en]>>16&&(3&i[Bn])===s){i[Bn]+=2048,En(4,R,g);try{g.call(R)}finally{En(5,R,g)}}}else{En(4,R,g);try{g.call(R)}finally{En(5,R,g)}}}const me=-1;class mt{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function Zr(i,s,a){let u=0;for(;u<a.length;){const d=a[u];if("number"==typeof d){if(0!==d)break;u++;const g=a[u++],w=a[u++],R=a[u++];i.setAttribute(s,w,R,g)}else{const g=d,w=a[++u];Ar(g)?i.setProperty(s,g,w):i.setAttribute(s,g,w),u++}}return u}function $o(i){return 3===i||4===i||6===i}function Ar(i){return 64===i.charCodeAt(0)}function ks(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const d=s[u];"number"==typeof d?a=d:0===a||ts(i,a,d,null,-1===a||2===a?s[++u]:null)}}return i}function ts(i,s,a,u,d){let g=0,w=i.length;if(-1===s)w=-1;else for(;g<i.length;){const R=i[g++];if("number"==typeof R){if(R===s){w=-1;break}if(R>s){w=g-1;break}}}for(;g<i.length;){const R=i[g];if("number"==typeof R)break;if(R===a){if(null===u)return void(null!==d&&(i[g+1]=d));if(u===i[g+1])return void(i[g+2]=d)}g++,null!==u&&g++,null!==d&&g++}-1!==w&&(i.splice(w,0,s),g=w+1),i.splice(g++,0,a),null!==u&&i.splice(g++,0,u),null!==d&&i.splice(g++,0,d)}function ra(i){return i!==me}function ns(i){return 32767&i}function Ga(i,s){let a=function ma(i){return i>>16}(i),u=s;for(;a>0;)u=u[bt],a--;return u}let ml=!0;function Uo(i){const s=ml;return ml=i,s}const qa=255,Mi=5;let ya=0;const Mo={};function Ya(i,s){const a=Ra(i,s);if(-1!==a)return a;const u=s[Kt];u.firstCreatePass&&(i.injectorIndex=s.length,Ma(u.data,i),Ma(s,null),Ma(u.blueprint,null));const d=Is(i,s),g=i.injectorIndex;if(ra(d)){const w=ns(d),R=Ga(d,s),k=R[Kt].data;for(let H=0;H<8;H++)s[g+H]=R[w+H]|k[w+H]}return s[g+8]=d,g}function Ma(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ra(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Is(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,d=s;for(;null!==d;){if(u=ho(d),null===u)return me;if(a++,d=d[bt],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return me}function yl(i,s,a){!function Vo(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(gn)&&(u=a[gn]),null==u&&(u=a[gn]=ya++);const d=u&qa;s.data[i+(d>>Mi)]|=1<<d}(i,s,a)}function $l(i,s,a){if(a&Vt.Optional||void 0!==i)return i;ht()}function Xc(i,s,a,u){if(a&Vt.Optional&&void 0===u&&(u=null),!(a&(Vt.Self|Vt.Host))){const d=i[ce],g=Ir(void 0);try{return d?d.get(s,u,a&Vt.Optional):qr(s,u,a&Vt.Optional)}finally{Ir(g)}}return $l(u,0,a)}function jo(i,s,a,u=Vt.Default,d){if(null!==i){if(1024&s[Bn]){const w=function nc(i,s,a,u,d){let g=i,w=s;for(;null!==g&&null!==w&&1024&w[Bn]&&!(256&w[Bn]);){const R=_a(g,w,a,u|Vt.Self,Mo);if(R!==Mo)return R;let k=g.parent;if(!k){const H=w[Nr];if(H){const te=H.get(a,Mo,u);if(te!==Mo)return te}k=ho(w),w=w[bt]}g=k}return d}(i,s,a,u,Mo);if(w!==Mo)return w}const g=_a(i,s,a,u,Mo);if(g!==Mo)return g}return Xc(s,a,u,d)}function _a(i,s,a,u,d){const g=function Ka(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(gn)?i[gn]:void 0;return"number"==typeof s?s>=0?s&qa:Ul:s}(a);if("function"==typeof g){if(!ja(s,i,u))return u&Vt.Host?$l(d,0,u):Xc(s,a,u,d);try{const w=g(u);if(null!=w||u&Vt.Optional)return w;ht()}finally{yo()}}else if("number"==typeof g){let w=null,R=Ra(i,s),k=me,H=u&Vt.Host?s[vt][br]:null;for((-1===R||u&Vt.SkipSelf)&&(k=-1===R?Is(i,s):s[R+8],k!==me&&vl(u,!1)?(w=s[Kt],R=ns(k),s=Ga(k,s)):R=-1);-1!==R;){const te=s[Kt];if(mu(g,R,te.data)){const pe=wi(R,s,a,w,u,H);if(pe!==Mo)return pe}k=s[R+8],k!==me&&vl(u,s[Kt].data[R+8]===H)&&mu(g,R,s)?(w=te,R=ns(k),s=Ga(k,s)):R=-1}}return d}function wi(i,s,a,u,d,g){const w=s[Kt],R=w.data[i+8],te=_l(R,w,a,null==u?Qo(R)&&ml:u!=w&&0!=(3&R.type),d&Vt.Host&&g===R);return null!==te?_o(s,w,te,R):Mo}function _l(i,s,a,u,d){const g=i.providerIndexes,w=s.data,R=1048575&g,k=i.directiveStart,te=g>>20,je=d?R+te:i.directiveEnd;for(let ft=u?R:R+te;ft<je;ft++){const Rt=w[ft];if(ft<k&&a===Rt||ft>=k&&Rt.type===a)return ft}if(d){const ft=w[k];if(ft&&si(ft)&&ft.type===a)return k}return null}function _o(i,s,a,u){let d=i[a];const g=s.data;if(function At(i){return i instanceof mt}(d)){const w=d;w.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function rt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Oe(i)}(g[a]));const R=Uo(w.canSeeViewProviders);w.resolving=!0;const k=w.injectImpl?Ir(w.injectImpl):null;ja(i,u,Vt.Default);try{d=i[a]=w.factory(void 0,g,i,u),s.firstCreatePass&&a>=u.directiveStart&&function pu(i,s,a){const{ngOnChanges:u,ngOnInit:d,ngDoCheck:g}=s.type.prototype;if(u){var w,R;const pe=qs(s);(null!==(w=a.preOrderHooks)&&void 0!==w?w:a.preOrderHooks=[]).push(i,pe),(null!==(R=a.preOrderCheckHooks)&&void 0!==R?R:a.preOrderCheckHooks=[]).push(i,pe)}var k,H,te;d&&(null!==(k=a.preOrderHooks)&&void 0!==k?k:a.preOrderHooks=[]).push(0-i,d),g&&((null!==(H=a.preOrderHooks)&&void 0!==H?H:a.preOrderHooks=[]).push(i,g),(null!==(te=a.preOrderCheckHooks)&&void 0!==te?te:a.preOrderCheckHooks=[]).push(i,g))}(a,g[a],s)}finally{null!==k&&Ir(k),Uo(R),w.resolving=!1,yo()}}return d}function mu(i,s,a){return!!(a[s+(i>>Mi)]&1<<i)}function vl(i,s){return!(i&Vt.Self||i&Vt.Host&&s)}class ws{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,u){return jo(this._tNode,this._lView,s,cn(u),a)}}function Ul(){return new ws(kt(),S())}function tc(i){return $e(()=>{const s=i.prototype.constructor,a=s[Mt]||va(s),u=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==u;){const g=d[Mt]||va(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function va(i){return De(i)?()=>{const s=va(ue(i));return s&&s()}:hi(i)}function ho(i){const s=i[Kt],a=s.type;return 2===a?s.declTNode:1===a?i[br]:null}function yu(i){return function gu(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let d=0;for(;d<u;){const g=a[d];if($o(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<u&&"string"==typeof a[d];)d++;else{if(g===s)return a[d+1];d+=2}}}return null}(kt(),i)}const Pa="__parameters__";function Xa(i,s,a){return $e(()=>{const u=function Vl(i){return function(...a){if(i){const u=i(...a);for(const d in u)this[d]=u[d]}}}(s);function d(...g){if(this instanceof d)return u.apply(this,g),this;const w=new d(...g);return R.annotation=w,R;function R(k,H,te){const pe=k.hasOwnProperty(Pa)?k[Pa]:Object.defineProperty(k,Pa,{value:[]})[Pa];for(;pe.length<=te;)pe.push(null);return(pe[te]=pe[te]||[]).push(w),k}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Xr{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=it({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ho(i,s){i.forEach(a=>Array.isArray(a)?Ho(a,s):s(a))}function Eu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Il(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function sa(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}function Hi(i,s,a){let u=T(i,s);return u>=0?i[1|u]=a:(u=~u,function ic(i,s,a,u){let d=i.length;if(d==s)i.push(a,u);else if(1===d)i.push(u,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function C(i,s){const a=T(i,s);if(a>=0)return i[1|a]}function T(i,s){return function M(i,s,a){let u=0,d=i.length>>a;for(;d!==u;){const g=u+(d-u>>1),w=i[g<<a];if(s===w)return g<<a;w>s?d=g:u=g+1}return~(d<<a)}(i,s,1)}const oi=vn(Xa("Optional"),8),N=vn(Xa("SkipSelf"),4);var ka=(()=>((ka=ka||{})[ka.Important=1]="Important",ka[ka.DashCase=2]="DashCase",ka))();const id=new Map;let Hf=0;const Wf="__ngContext__";function Oo(i,s){ii(s)?(i[Wf]=s[Tn],function zf(i){id.set(i[Tn],i)}(s)):i[Wf]=s}let gh;function Ug(i,s){return gh(i,s)}function lc(i){const s=i[wr];return Ki(s)?s[wr]:s}function Qf(i){return yh(i[Fe])}function wu(i){return yh(i[zr])}function yh(i){for(;null!==i&&!Ki(i);)i=i[zr];return i}function Wl(i,s,a,u,d){if(null!=u){let g,w=!1;Ki(u)?g=u:ii(u)&&(w=!0,u=u[ni]);const R=Qr(u);0===i&&null!==a?null==d?jg(s,a,R):ql(s,a,R,d||null,!0):1===i&&null!==a?ql(s,a,R,d||null,!0):2===i?function Tl(i,s,a){const u=od(i,s);u&&function np(i,s,a,u){i.removeChild(s,a,u)}(i,u,s,a)}(s,R,w):3===i&&s.destroyNode(R),null!=g&&function Ch(i,s,a,u,d){const g=a[Ui];g!==Qr(a)&&Wl(s,i,u,g,d);for(let R=ui;R<a.length;R++){const k=a[R];bs(k[Kt],k,i,s,u,g)}}(s,i,g,a,d)}}function bu(i,s,a){return i.createElement(s,a)}function uc(i,s){const a=i[Yi],u=a.indexOf(s),d=s[wr];512&s[Bn]&&(s[Bn]&=-513,ea(d,-1)),a.splice(u,1)}function ep(i,s){if(i.length<=ui)return;const a=ui+s,u=i[a];if(u){const d=u[xt];null!==d&&d!==i&&uc(d,u),s>0&&(i[a-1][zr]=u[zr]);const g=Il(i,ui+s);!function o_(i,s){bs(i,s,s[ee],2,null,null),s[ni]=null,s[br]=null}(u[Kt],u);const w=g[ln];null!==w&&w.detachView(g[Kt]),u[wr]=null,u[zr]=null,u[Bn]&=-65}return u}function vh(i,s){if(!(128&s[Bn])){const a=s[ee];a.destroyNode&&bs(i,s,a,3,null,null),function l_(i){let s=i[Fe];if(!s)return cc(i[Kt],i);for(;s;){let a=null;if(ii(s))a=s[Fe];else{const u=s[ui];u&&(a=u)}if(!a){for(;s&&!s[zr]&&s!==i;)ii(s)&&cc(s[Kt],s),s=s[wr];null===s&&(s=i),ii(s)&&cc(s[Kt],s),a=s&&s[zr]}s=a}}(s)}}function cc(i,s){if(!(128&s[Bn])){s[Bn]&=-65,s[Bn]|=128,function Eh(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const d=s[a[u]];if(!(d instanceof mt)){const g=a[u+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const R=d[g[w]],k=g[w+1];En(4,R,k);try{k.call(R)}finally{En(5,R,k)}}else{En(4,d,g);try{g.call(d)}finally{En(5,d,g)}}}}}(i,s),function tp(i,s){const a=i.cleanup,u=s[ri];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const w=a[g+3];w>=0?u[d=w]():u[d=-w].unsubscribe(),g+=2}else{const w=u[d=a[g+1]];a[g].call(w)}if(null!==u){for(let g=d+1;g<u.length;g++)(0,u[g])();s[ri]=null}}(i,s),1===s[Kt].type&&s[ee].destroy();const a=s[xt];if(null!==a&&Ki(s[wr])){a!==s[wr]&&uc(a,s);const u=s[ln];null!==u&&u.detachView(i)}!function ch(i){id.delete(i[Tn])}(s)}}function Ih(i,s,a){return function Cu(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[ni];{const{componentOffset:d}=u;if(d>-1){const{encapsulation:g}=i.data[u.directiveStart+d];if(g===at.None||g===at.Emulated)return null}return fi(u,a)}}(i,s.parent,a)}function ql(i,s,a,u,d){i.insertBefore(s,a,u,d)}function jg(i,s,a){i.appendChild(s,a)}function dc(i,s,a,u,d){null!==u?ql(i,s,a,u,d):jg(i,s,a)}function od(i,s){return i.parentNode(s)}function Hg(i,s,a){return Du(i,s,a)}let bh,sp,Au,Du=function hc(i,s,a){return 40&i.type?fi(i,a):null};function nl(i,s,a,u){const d=Ih(i,u,s),g=s[ee],R=Hg(u.parent||s[br],u,s);if(null!=d)if(Array.isArray(a))for(let k=0;k<a.length;k++)dc(g,d,a[k],R,!1);else dc(g,d,a,R,!1);void 0!==bh&&bh(g,u,s,a,d)}function ad(i,s){if(null!==s){const a=s.type;if(3&a)return fi(s,i);if(4&a)return ud(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return ad(i,u);{const d=i[s.index];return Ki(d)?ud(-1,d):Qr(d)}}if(32&a)return Ug(s,i)()||Qr(i[s.index]);{const u=ld(i,s);return null!==u?Array.isArray(u)?u[0]:ad(lc(i[vt]),u):ad(i,s.next)}}return null}function ld(i,s){return null!==s?i[vt][br].projection[s.projection]:null}function ud(i,s){const a=ui+i+1;if(a<s.length){const u=s[a],d=u[Kt].firstChild;if(null!==d)return ad(u,d)}return s[Ui]}function fc(i,s,a,u,d,g,w){for(;null!=a;){const R=u[a.index],k=a.type;if(w&&0===s&&(R&&Oo(Qr(R),u),a.flags|=2),32!=(32&a.flags))if(8&k)fc(i,s,a.child,u,d,g,!1),Wl(s,i,d,R,g);else if(32&k){const H=Ug(a,u);let te;for(;te=H();)Wl(s,i,d,te,g);Wl(s,i,d,R,g)}else 16&k?Yl(i,s,u,a,d,g):Wl(s,i,d,R,g);a=w?a.projectionNext:a.next}}function bs(i,s,a,u,d,g){fc(a,u,i.firstChild,s,d,g,!1)}function Yl(i,s,a,u,d,g){const w=a[vt],k=w[br].projection[u.projection];if(Array.isArray(k))for(let H=0;H<k.length;H++)Wl(s,i,d,k[H],g);else fc(i,s,k,w[wr],d,g,!0)}function Dh(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function rp(i,s,a){const{mergedAttrs:u,classes:d,styles:g}=a;null!==u&&Zr(i,s,u),null!==d&&Dh(i,s,d),null!==g&&function Tu(i,s,a){i.setAttribute(s,"style",a)}(i,s,g)}function op(i){sp=i}function Wg(i){var s;return(null===(s=function fo(){if(void 0===Au&&(Au=null,pn.trustedTypes))try{Au=pn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Au}())||void 0===s?void 0:s.createScriptURL(i))||i}class Wo{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pt})`}}function Zl(i){return i instanceof Wo?i.changingThisBreaksApplicationSecurity:i}function gd(i,s){const a=function qg(i){return i instanceof Wo&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${pt})`)}return a===s}const Qt=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ds=(()=>((Ds=Ds||{})[Ds.NONE=0]="NONE",Ds[Ds.HTML=1]="HTML",Ds[Ds.STYLE=2]="STYLE",Ds[Ds.SCRIPT=3]="SCRIPT",Ds[Ds.URL=4]="URL",Ds[Ds.RESOURCE_URL=5]="RESOURCE_URL",Ds))();function hE(i){const s=Li();return s?s.sanitize(Ds.URL,i)||"":gd(i,"URL")?Zl(i):function fn(i){return(i=String(i)).match(Qt)?i:"unsafe:"+i}(Oe(i))}function lp(i){const s=Li();if(s)return Wg(s.sanitize(Ds.RESOURCE_URL,i)||"");if(gd(i,"ResourceURL"))return Wg(Zl(i));throw new _e(904,!1)}function Mh(i,s,a){return function fE(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?lp:hE}(s,a)(i)}function Li(){const i=S();return i&&i[Le]}const tm=new Xr("ENVIRONMENT_INITIALIZER"),pE=new Xr("INJECTOR",-1),gE=new Xr("INJECTOR_DEF_TYPES");class mE{get(s,a=lr){if(a===lr){const u=new Error(`NullInjectorError: No provider for ${Me(s)}!`);throw u.name="NullInjectorError",u}return a}}function yE(...i){return{\u0275providers:m_(0,i),\u0275fromNgModule:!0}}function m_(i,...s){const a=[],u=new Set;let d;return Ho(s,g=>{const w=g;nm(w,a,[],u)&&(d||(d=[]),d.push(w))}),void 0!==d&&cp(d,a),a}function cp(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];rm(d,g=>{s.push(g)})}}function nm(i,s,a,u){if(!(i=ue(i)))return!1;let d=null,g=on(i);const w=!g&&zn(i);if(g||w){if(w&&!w.standalone)return!1;d=i}else{const k=i.ngModule;if(g=on(k),!g)return!1;d=k}const R=u.has(d);if(w){if(R)return!1;if(u.add(d),w.dependencies){const k="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const H of k)nm(H,s,a,u)}}else{if(!g)return!1;{if(null!=g.imports&&!R){let H;u.add(d);try{Ho(g.imports,te=>{nm(te,s,a,u)&&(H||(H=[]),H.push(te))})}finally{}void 0!==H&&cp(H,s)}if(!R){const H=hi(d)||(()=>new d);s.push({provide:d,useFactory:H,deps:ke},{provide:gE,useValue:d,multi:!0},{provide:tm,useValue:()=>zt(d),multi:!0})}const k=g.providers;null==k||R||rm(k,te=>{s.push(te)})}}return d!==i&&void 0!==i.providers}function rm(i,s){for(let a of i)Pe(a)&&(a=a.\u0275providers),Array.isArray(a)?rm(a,s):s(a)}const _E=Ce({provide:String,useValue:Ce});function dp(i){return null!==i&&"object"==typeof i&&_E in i}function Mu(i){return"function"==typeof i}const sm=new Xr("Set Injector scope."),_d={},Pb={};let om;function Ec(){return void 0===om&&(om=new mE),om}class Ic{}class __ extends Ic{get destroyed(){return this._destroyed}constructor(s,a,u,d){super(),this.parent=a,this.source=u,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,am(s,w=>this.processProvider(w)),this.records.set(pE,vd(void 0,this)),d.has("environment")&&this.records.set(Ic,vd(void 0,this));const g=this.records.get(sm);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(gE.multi,ke,Vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=In(this),u=Ir(void 0);try{return s()}finally{In(a),Ir(u)}}get(s,a=lr,u=Vt.Default){this.assertNotDestroyed(),u=cn(u);const d=In(this),g=Ir(void 0);try{if(!(u&Vt.SkipSelf)){let R=this.records.get(s);if(void 0===R){const k=function IE(i){return"function"==typeof i||"object"==typeof i&&i instanceof Xr}(s)&&Bt(s);R=k&&this.injectableDefInScope(k)?vd(hp(s),_d):null,this.records.set(s,R)}if(null!=R)return this.hydrate(s,R)}return(u&Vt.Self?Ec():this.parent).get(s,a=u&Vt.Optional&&a===lr?null:a)}catch(w){if("NullInjectorError"===w.name){if((w[Tr]=w[Tr]||[]).unshift(Me(s)),d)throw w;return function Ae(i,s,a,u){const d=i[Tr];throw s[jr]&&d.unshift(s[jr]),i.message=function Ee(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==er?i.slice(2):i;let d=Me(s);if(Array.isArray(s))d=s.map(Me).join(" -> ");else if("object"==typeof s){let g=[];for(let w in s)if(s.hasOwnProperty(w)){let R=s[w];g.push(w+":"+("string"==typeof R?JSON.stringify(R):Me(R)))}d=`{${g.join(", ")}}`}return`${a}${u?"("+u+")":""}[${d}]: ${i.replace(Di,"\n  ")}`}("\n"+i.message,d,a,u),i[Yr]=d,i[Tr]=null,i}(w,s,"R3InjectorError",this.source)}throw w}finally{Ir(g),In(d)}}resolveInjectorInitializers(){const s=In(this),a=Ir(void 0);try{const u=this.get(tm.multi,ke,Vt.Self);for(const d of u)d()}finally{In(s),Ir(a)}}toString(){const s=[],a=this.records;for(const u of a.keys())s.push(Me(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(s){let a=Mu(s=ue(s))?s:ue(s&&s.provide);const u=function vE(i){return dp(i)?vd(void 0,i.useValue):vd(fp(i),_d)}(s);if(Mu(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=vd(void 0,_d,!0),d.factory=()=>mn(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,u)}hydrate(s,a){return a.value===_d&&(a.value=Pb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Ed(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=ue(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function hp(i){const s=Bt(i),a=null!==s?s.factory:hi(i);if(null!==a)return a;if(i instanceof Xr)throw new _e(204,!1);if(i instanceof Function)return function v_(i){const s=i.length;if(s>0)throw sa(s,"?"),new _e(204,!1);const a=function tn(i){const s=i&&(i[Rn]||i[Wn]);return s?(function Y(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),s):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new _e(204,!1)}function fp(i,s,a){let u;if(Mu(i)){const d=ue(i);return hi(d)||hp(d)}if(dp(i))u=()=>ue(i.useValue);else if(function y_(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...mn(i.deps||[]));else if(function Rh(i){return!(!i||!i.useExisting)}(i))u=()=>zt(ue(i.useExisting));else{const d=ue(i&&(i.useClass||i.provide));if(!function EE(i){return!!i.deps}(i))return hi(d)||hp(d);u=()=>new d(...mn(i.deps))}return u}function vd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function am(i,s){for(const a of i)Array.isArray(a)?am(a,s):a&&Pe(a)?am(a.\u0275providers,s):s(a)}class wE{}class E_{}class bE{resolveComponentFactory(s){throw function lm(i){const s=Error(`No component factory found for ${Me(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Ql=(()=>{class i{}return i.NULL=new bE,i})();function kb(){return Ph(kt(),S())}function Ph(i,s){return new Id(fi(i,s))}let Id=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=kb,i})();function Nb(i){return i instanceof Id?i.nativeElement:i}class CE{}let DE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Fb(){const i=S(),a=Jr(kt().index,i);return(ii(a)?a:i)[ee]}(),i})(),um=(()=>{class i{}return i.\u0275prov=it({token:i,providedIn:"root",factory:()=>null}),i})();class TE{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const I_=new TE("15.2.6"),no={},wc="ngOriginalError";function pp(i){return i[wc]}class gp{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&pp(s);for(;a&&pp(a);)a=pp(a);return a||null}}function Et(i){return i instanceof Function?i():i}function AE(i,s,a){let u=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=s.length;if(d+g===u||i.charCodeAt(d+g)<=32)return d}a=d+1}}const xE="ng-template";function ME(i,s,a){let u=0,d=!0;for(;u<i.length;){let g=i[u++];if("string"==typeof g&&d){const w=i[u++];if(a&&"class"===g&&-1!==AE(w.toLowerCase(),s,0))return!0}else{if(1===g){for(;u<i.length&&"string"==typeof(g=i[u++]);)if(g.toLowerCase()===s)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function RE(i){return 4===i.type&&i.value!==xE}function aS(i,s,a){return s===(4!==i.type||a?i.value:xE)}function $b(i,s,a){let u=4;const d=i.attrs||[],g=function is(i){for(let s=0;s<i.length;s++)if($o(i[s]))return s;return i.length}(d);let w=!1;for(let R=0;R<s.length;R++){const k=s[R];if("number"!=typeof k){if(!w)if(4&u){if(u=2|1&u,""!==k&&!aS(i,k,a)||""===k&&1===s.length){if(il(u))return!1;w=!0}}else{const H=8&u?k:s[++R];if(8&u&&null!==i.attrs){if(!ME(i.attrs,H,a)){if(il(u))return!1;w=!0}continue}const pe=pr(8&u?"class":k,d,RE(i),a);if(-1===pe){if(il(u))return!1;w=!0;continue}if(""!==H){let je;je=pe>g?"":d[pe+1].toLowerCase();const ft=8&u?je:null;if(ft&&-1!==AE(ft,H,0)||2&u&&H!==je){if(il(u))return!1;w=!0}}}}else{if(!w&&!il(u)&&!il(k))return!1;if(w&&il(k))continue;w=!1,u=k|1&u}}return il(u)||w}function il(i){return 0==(1&i)}function pr(i,s,a,u){if(null===s)return-1;let d=0;if(u||!a){let g=!1;for(;d<s.length;){const w=s[d];if(w===i)return d;if(3===w||6===w)g=!0;else{if(1===w||2===w){let R=s[++d];for(;"string"==typeof R;)R=s[++d];continue}if(4===w)break;if(0===w){d+=4;continue}}d+=g?1:2}return-1}return function Gn(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function wd(i,s,a=!1){for(let u=0;u<s.length;u++)if($b(i,s[u],a))return!0;return!1}function mp(i,s){e:for(let a=0;a<s.length;a++){const u=s[a];if(i.length===u.length){for(let d=0;d<i.length;d++)if(i[d]!==u[d])continue e;return!0}}return!1}function $r(i,s){return i?":not("+s.trim()+")":s}function Ub(i){let s=i[0],a=1,u=2,d="",g=!1;for(;a<i.length;){let w=i[a];if("string"==typeof w)if(2&u){const R=i[++a];d+="["+w+(R.length>0?'="'+R+'"':"")+"]"}else 8&u?d+="."+w:4&u&&(d+=" "+w);else""!==d&&!il(w)&&(s+=$r(g,d),d=""),u=w,g=g||!il(u);a++}return""!==d&&(s+=$r(g,d)),s}const ir={};function cm(i){Cc(x(),S(),Ai()+i,!1)}function Cc(i,s,a,u){if(!u)if(3==(3&s[Bn])){const g=i.preOrderCheckHooks;null!==g&&xa(s,g,a)}else{const g=i.preOrderHooks;null!==g&&P(s,g,0,a)}ga(a)}function D_(i,s=null,a=null,u){const d=Ru(i,s,a,u);return d.resolveInjectorInitializers(),d}function Ru(i,s=null,a=null,u,d=new Set){const g=[a||ke,yE(i)];return u=u||("object"==typeof i?void 0:Me(i)),new __(g,s||Ec(),u||null,d)}let Pu=(()=>{class i{static create(a,u){if(Array.isArray(a))return D_({name:""},u,a,"");{var d;const g=null!==(d=a.name)&&void 0!==d?d:"";return D_({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=lr,i.NULL=new mE,i.\u0275prov=it({token:i,providedIn:"any",factory:()=>zt(pE)}),i.__NG_ELEMENT_ID__=-1,i})();function Lh(i,s=Vt.Default){const a=S();return null===a?zt(i,s):jo(kt(),a,ue(i),s)}function VE(){throw new Error("invalid")}function jE(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const g=a[u+1];if(-1!==g){const w=i.data[g];Bo(a[u]),w.contentQueries(2,s[g],g)}}}function pm(i,s,a,u,d,g,w,R,k,H,te){const pe=s.blueprint.slice();return pe[ni]=d,pe[Bn]=76|u,(null!==te||i&&1024&i[Bn])&&(pe[Bn]|=1024),uo(pe),pe[wr]=pe[bt]=i,pe[X]=a,pe[We]=w||i&&i[We],pe[ee]=R||i&&i[ee],pe[Le]=k||i&&i[Le]||null,pe[ce]=H||i&&i[ce]||null,pe[br]=g,pe[Tn]=function i_(){return Hf++}(),pe[Nr]=te,pe[vt]=2==s.type?i[vt]:pe,pe}function Dd(i,s,a,u,d){let g=i.data[s];if(null===g)g=function M_(i,s,a,u,d){const g=Xn(),w=es(),k=i.data[s]=function HE(i,s,a,u,d,g){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,a,s,u,d);return null===i.firstChild&&(i.firstChild=k),null!==g&&(w?null==g.child&&null!==k.parent&&(g.child=k):null===g.next&&(g.next=k,k.prev=g)),k}(i,s,a,u,d),function Va(){return Sn.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=u,g.attrs=d;const w=function Pr(){const i=Sn.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return tr(g,!0),g}function Bh(i,s,a,u){if(0===a)return-1;const d=s.length;for(let g=0;g<a;g++)s.push(u),i.blueprint.push(u),i.data.push(null);return d}function gm(i,s,a){pl(s);try{const u=i.viewQuery;null!==u&&Ri(1,u,a);const d=i.template;null!==d&&ym(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&jE(i,s),i.staticViewQueries&&Ri(2,i.viewQuery,a);const g=i.components;null!==g&&function Zb(i,s){for(let a=0;a<s.length;a++)eC(i,s[a])}(s,g)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[Bn]&=-5,pa()}}function mm(i,s,a,u){const d=s[Bn];if(128!=(128&d)){pl(s);try{uo(s),function Ta(i){return Sn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&ym(i,s,a,2,u);const w=3==(3&d);if(w){const H=i.preOrderCheckHooks;null!==H&&xa(s,H,null)}else{const H=i.preOrderHooks;null!==H&&P(s,H,0,null),G(s,0)}if(function wm(i){for(let s=Qf(i);null!==s;s=wu(s)){if(!s[Oi])continue;const a=s[Yi];for(let u=0;u<a.length;u++){const d=a[u];512&d[Bn]||ea(d[wr],1),d[Bn]|=512}}}(s),function qE(i){for(let s=Qf(i);null!==s;s=wu(s))for(let a=ui;a<s.length;a++){const u=s[a],d=u[Kt];Ao(u)&&mm(d,u,d.template,u[X])}}(s),null!==i.contentQueries&&jE(i,s),w){const H=i.contentCheckHooks;null!==H&&xa(s,H)}else{const H=i.contentHooks;null!==H&&P(s,H,1),G(s,1)}!function Yb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const d=a[u];if(d<0)ga(~d);else{const g=d,w=a[++u],R=a[++u];hl(w,g),R(2,s[g])}}}finally{ga(-1)}}(i,s);const R=i.components;null!==R&&function Kb(i,s){for(let a=0;a<s.length;a++)Ep(i,s[a])}(s,R);const k=i.viewQuery;if(null!==k&&Ri(2,k,u),w){const H=i.viewCheckHooks;null!==H&&xa(s,H)}else{const H=i.viewHooks;null!==H&&P(s,H,2),G(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Bn]&=-41,512&s[Bn]&&(s[Bn]&=-513,ea(s[wr],-1))}finally{pa()}}}function ym(i,s,a,u,d){const g=Ai(),w=2&u;try{ga(-1),w&&s.length>jn&&Cc(i,s,jn,!1),En(w?2:0,d),a(u,d)}finally{ga(g),En(w?3:1,d)}}function ro(i,s,a){if(ki(s)){const d=s.directiveEnd;for(let g=s.directiveStart;g<d;g++){const w=i.data[g];w.contentQueries&&w.contentQueries(1,a[g],g)}}}function _m(i,s,a){U()&&(function Jb(i,s,a,u){const d=a.directiveStart,g=a.directiveEnd;Qo(a)&&function $h(i,s,a){const u=fi(s,i),d=R_(a),g=i[We],w=Ip(i,pm(i,d,null,a.onPush?32:16,u,s,g,g.createRenderer(u,a),null,null,null));i[s.index]=w}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Ya(a,s),Oo(u,s);const w=a.initialInputs;for(let R=d;R<g;R++){const k=i.data[R],H=_o(s,i,R,a);Oo(H,s),null!==w&&P_(0,R-d,H,k,0,w),si(k)&&(Jr(a.index,s)[X]=_o(s,i,R,a))}}(i,s,a,fi(a,s)),64==(64&a.flags)&&Nu(i,s,a))}function Ou(i,s,a=fi){const u=s.localNames;if(null!==u){let d=s.index+1;for(let g=0;g<u.length;g+=2){const w=u[g+1],R=-1===w?a(s,i):i[w];i[d++]=R}}}function R_(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=ss(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function ss(i,s,a,u,d,g,w,R,k,H){const te=jn+u,pe=te+d,je=function vm(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:ir);return a}(te,pe),ft="function"==typeof H?H():H;return je[Kt]={type:i,blueprint:je,template:a,queries:null,viewQuery:R,declTNode:s,data:je.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:pe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:k,consts:ft,incompleteFirstPass:!1}}function mi(i,s,a,u){const d=k_(s);null===a?d.push(u):(d.push(a),i.firstCreatePass&&N_(i).push(u,d.length-1))}function Td(i,s,a,u){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const g=i[d];null===u?oa(a,s,d,g):u.hasOwnProperty(d)&&oa(a,s,u[d],g)}return a}function oa(i,s,a,u){i.hasOwnProperty(a)?i[a].push(s,u):i[a]=[s,u]}function zE(i,s){const a=Jr(s,i);16&a[Bn]||(a[Bn]|=32)}function ku(i,s,a,u){if(U()){const d=null===u?null:{"":-1},g=function Im(i,s){const a=i.directiveRegistry;let u=null,d=null;if(a)for(let w=0;w<a.length;w++){const R=a[w];if(wd(s,R.selectors,!1))if(u||(u=[]),si(R))if(null!==R.findHostDirectiveDefs){const k=[];d=d||new Map,R.findHostDirectiveDefs(R,k,d),u.unshift(...k,R),Fu(i,s,k.length)}else u.unshift(R),Fu(i,s,0);else{var g;d=d||new Map,null===(g=R.findHostDirectiveDefs)||void 0===g||g.call(R,R,u,d),u.push(R)}}return null===u?null:[u,d]}(i,a);let w,R;null===g?w=R=null:[w,R]=g,null!==w&&Em(i,s,a,w,d,R),d&&function tu(i,s,a){if(s){const u=i.localNames=[];for(let d=0;d<s.length;d+=2){const g=a[s[d+1]];if(null==g)throw new _e(-301,!1);u.push(s[d],g)}}}(a,u,d)}a.mergedAttrs=ks(a.mergedAttrs,a.attrs)}function Em(i,s,a,u,d,g){for(let pe=0;pe<u.length;pe++)yl(Ya(a,s),i,u[pe].type);!function Ac(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,u.length);for(let pe=0;pe<u.length;pe++){const je=u[pe];je.providersResolver&&je.providersResolver(je)}let w=!1,R=!1,k=Bh(i,s,u.length,null);for(let pe=0;pe<u.length;pe++){const je=u[pe];a.mergedAttrs=ks(a.mergedAttrs,je.hostAttrs),WE(i,a,s,k,je),_p(k,je,d),null!==je.contentQueries&&(a.flags|=4),(null!==je.hostBindings||null!==je.hostAttrs||0!==je.hostVars)&&(a.flags|=64);const ft=je.type.prototype;var H,te;!w&&(ft.ngOnChanges||ft.ngOnInit||ft.ngDoCheck)&&((null!==(H=i.preOrderHooks)&&void 0!==H?H:i.preOrderHooks=[]).push(a.index),w=!0),R||!ft.ngOnChanges&&!ft.ngDoCheck||((null!==(te=i.preOrderCheckHooks)&&void 0!==te?te:i.preOrderCheckHooks=[]).push(a.index),R=!0),k++}!function Xb(i,s,a){const d=s.directiveEnd,g=i.data,w=s.attrs,R=[];let k=null,H=null;for(let te=s.directiveStart;te<d;te++){const pe=g[te],je=a?a.get(pe):null,Rt=je?je.outputs:null;k=Td(pe.inputs,te,k,je?je.inputs:null),H=Td(pe.outputs,te,H,Rt);const Yt=null===k||null===w||RE(s)?null:vp(k,te,w);R.push(Yt)}null!==k&&(k.hasOwnProperty("class")&&(s.flags|=8),k.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=R,s.inputs=k,s.outputs=H}(i,a,g)}function Nu(i,s,a){const u=a.directiveStart,d=a.directiveEnd,g=a.index,w=function fl(){return Sn.lFrame.currentDirectiveIndex}();try{ga(g);for(let R=u;R<d;R++){const k=i.data[R],H=s[R];Fi(R),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Sc(k,H)}}finally{ga(-1),Fi(w)}}function Sc(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Fu(i,s,a){var u;s.componentOffset=a,(null!==(u=i.components)&&void 0!==u?u:i.components=[]).push(s.index)}function _p(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;si(s)&&(a[""]=i)}}function WE(i,s,a,u,d){i.data[u]=d;const g=d.factory||(d.factory=hi(d.type)),w=new mt(g,si(d),Lh);i.blueprint[u]=w,a[u]=w,function GE(i,s,a,u,d){const g=d.hostBindings;if(g){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const R=~s.index;(function yp(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=R&&w.push(R),w.push(a,u,g)}}(i,s,u,Bh(i,a,d.hostVars,ir),d)}function sl(i,s,a,u,d,g){const w=fi(i,s);!function Lu(i,s,a,u,d,g,w){if(null==g)i.removeAttribute(s,d,a);else{const R=null==w?Oe(g):w(g,u||"",d);i.setAttribute(s,d,R,a)}}(s[ee],w,g,i.value,a,u,d)}function P_(i,s,a,u,d,g){const w=g[s];if(null!==w){const R=u.setInput;for(let k=0;k<w.length;){const H=w[k++],te=w[k++],pe=w[k++];null!==R?u.setInput(a,pe,H,te):a[te]=pe}}}function vp(i,s,a){let u=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===u&&(u=[]);const w=i[g];for(let R=0;R<w.length;R+=2)if(w[R]===s){u.push(g,w[R+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return u}function O_(i,s,a,u){return[i,!0,!1,s,null,0,u,a,null,null]}function Ep(i,s){const a=Jr(s,i);if(Ao(a)){const u=a[Kt];48&a[Bn]?mm(u,a,u.template,a[X]):a[_i]>0&&bm(a)}}function bm(i){for(let u=Qf(i);null!==u;u=wu(u))for(let d=ui;d<u.length;d++){const g=u[d];if(Ao(g))if(512&g[Bn]){const w=g[Kt];mm(w,g,w.template,g[X])}else g[_i]>0&&bm(g)}const a=i[Kt].components;if(null!==a)for(let u=0;u<a.length;u++){const d=Jr(a[u],i);Ao(d)&&d[_i]>0&&bm(d)}}function eC(i,s){const a=Jr(s,i),u=a[Kt];(function tC(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),gm(u,a,a[X])}function Ip(i,s){return i[Fe]?i[yt][zr]=s:i[Fe]=s,i[yt]=s,s}function Cm(i){for(;i;){i[Bn]|=32;const s=lc(i);if(Hs(i)&&!s)return i;i=s}return null}function Us(i,s,a,u=!0){const d=s[We];d.begin&&d.begin();try{mm(i,s,i.template,a)}catch(w){throw u&&YE(s,w),w}finally{d.end&&d.end()}}function Ri(i,s,a){Bo(0),s(i,a)}function k_(i){return i[ri]||(i[ri]=[])}function N_(i){return i.cleanup||(i.cleanup=[])}function YE(i,s){const a=i[ce],u=a?a.get(gp,null):null;u&&u.handleError(s)}function Dm(i,s,a,u,d){for(let g=0;g<a.length;){const w=a[g++],R=a[g++],k=s[w],H=i.data[w];null!==H.setInput?H.setInput(k,d,u,R):k[R]=d}}function gr(i,s,a){const u=Zs(s,i);!function to(i,s,a){i.setValue(s,a)}(i[ee],u,a)}function ei(i,s,a){let u=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==s)for(let w=0;w<s.length;w++){const R=s[w];"number"==typeof R?g=R:1==g?d=we(d,R):2==g&&(u=we(u,R+": "+s[++w]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=d:i.classesWithoutHost=d}function Bu(i,s,a,u,d=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&u.push(Qr(g)),Ki(g))for(let R=ui;R<g.length;R++){const k=g[R],H=k[Kt].firstChild;null!==H&&Bu(k[Kt],k,H,u)}const w=a.type;if(8&w)Bu(i,s,a.child,u);else if(32&w){const R=Ug(a,s);let k;for(;k=R();)u.push(k)}else if(16&w){const R=ld(s,a);if(Array.isArray(R))u.push(...R);else{const k=lc(s[vt]);Bu(k[Kt],k,R,u,!0)}}a=d?a.projectionNext:a.next}return u}class xd{get rootNodes(){const s=this._lView,a=s[Kt];return Bu(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[X]}set context(s){this._lView[X]=s}get destroyed(){return 128==(128&this._lView[Bn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[wr];if(Ki(s)){const a=s[li],u=a?a.indexOf(this):-1;u>-1&&(ep(s,u),Il(a,u))}this._attachedToViewContainer=!1}vh(this._lView[Kt],this._lView)}onDestroy(s){mi(this._lView[Kt],this._lView,null,s)}markForCheck(){Cm(this._cdRefInjectingView||this._lView)}detach(){this._lView[Bn]&=-65}reattach(){this._lView[Bn]|=64}detectChanges(){Us(this._lView[Kt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vg(i,s){bs(i,s,s[ee],2,null,null)}(this._lView[Kt],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=s}}class F_ extends xd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Us(s[Kt],s,s[X],!1)}checkNoChanges(){}get context(){return null}}class L_ extends Ql{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=zn(s);return new Uh(a,this.ngModule)}}function Tm(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class ZE{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,u){u=cn(u);const d=this.injector.get(s,no,u);return d!==no||a===no?d:this.parentInjector.get(s,a,u)}}class Uh extends E_{get inputs(){return Tm(this.componentDef.inputs)}get outputs(){return Tm(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ts(i){return i.map(Ub).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,u,d){var g;let w=(d=d||this.ngModule)instanceof Ic?d:null===(g=d)||void 0===g?void 0:g.injector;w&&null!==this.componentDef.getStandaloneInjector&&(w=this.componentDef.getStandaloneInjector(w)||w);const R=w?new ZE(s,w):s,k=R.get(CE,null);if(null===k)throw new _e(407,!1);const H=R.get(um,null),te=k.createRenderer(null,this.componentDef),pe=this.componentDef.selectors[0][0]||"div",je=u?function ko(i,s,a){return i.selectRootElement(s,a===at.ShadowDom)}(te,u,this.componentDef.encapsulation):bu(te,pe,function KE(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(pe)),ft=this.componentDef.onPush?288:272,Rt=ss(0,null,null,1,0,null,null,null,null,null),Yt=pm(null,Rt,null,ft,null,null,k,te,H,R,null);let an,xn;pl(Yt);try{const Un=this.componentDef;let Ot,Ln=null;Un.findHostDirectiveDefs?(Ot=[],Ln=new Map,Un.findHostDirectiveDefs(Un,Ot,Ln),Ot.push(Un)):Ot=[Un];const bi=function iC(i,s){const a=i[Kt],u=jn;return i[u]=s,Dd(a,u,2,"#host",null)}(Yt,je),us=function XE(i,s,a,u,d,g,w,R){const k=d[Kt];!function sC(i,s,a,u){for(const d of i)s.mergedAttrs=ks(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(ei(s,s.mergedAttrs,!0),null!==a&&rp(u,a,s))}(u,i,s,w);const H=g.createRenderer(s,a),te=pm(d,R_(a),null,a.onPush?32:16,d[i.index],i,g,H,R||null,null,null);return k.firstCreatePass&&Fu(k,i,u.length-1),Ip(d,te),d[i.index]=te}(bi,je,Un,Ot,Yt,k,te);xn=So(Rt,jn),je&&function oC(i,s,a,u){if(u)Zr(i,a,["ng-version",I_.full]);else{const{attrs:d,classes:g}=function un(i){const s=[],a=[];let u=1,d=2;for(;u<i.length;){let g=i[u];if("string"==typeof g)2===d?""!==g&&s.push(g,i[++u]):8===d&&a.push(g);else{if(!il(d))break;d=g}u++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Zr(i,a,d),g&&g.length>0&&Dh(i,a,g.join(" "))}}(te,Un,je,u),void 0!==a&&function aC(i,s,a){const u=i.projection=[];for(let d=0;d<s.length;d++){const g=a[d];u.push(null!=g?Array.from(g):null)}}(xn,this.ngContentSelectors,a),an=function QE(i,s,a,u,d,g){const w=kt(),R=d[Kt],k=fi(w,d);Em(R,d,w,a,null,u);for(let te=0;te<a.length;te++)Oo(_o(d,R,w.directiveStart+te,w),d);Nu(R,d,w),k&&Oo(k,d);const H=_o(d,R,w.directiveStart+w.componentOffset,w);if(i[X]=d[X]=H,null!==g)for(const te of g)te(H,s);return ro(R,w,i),H}(us,Un,Ot,Ln,Yt,[lC]),gm(Rt,Yt,null)}finally{pa()}return new rC(this.componentType,an,Ph(xn,Yt),Yt,xn)}}class rC extends wE{constructor(s,a,u,d,g){super(),this.location=u,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new F_(d),this.componentType=s}setInput(s,a){const u=this._tNode.inputs;let d;if(null!==u&&(d=u[s])){const g=this._rootLView;Dm(g[Kt],g,d,s,a),zE(g,this._tNode.index)}}get injector(){return new ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function lC(){const i=kt();gl(S()[Kt],i)}function $u(i){let s=function Sm(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let d;if(si(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new _e(903,!1);d=s.\u0275dir}if(d){if(a){u.push(d);const w=i;w.inputs=Vh(i.inputs),w.declaredInputs=Vh(i.declaredInputs),w.outputs=Vh(i.outputs);const R=d.hostBindings;R&&eI(i,R);const k=d.viewQuery,H=d.contentQueries;if(k&&Am(i,k),H&&JE(i,H),he(i.inputs,d.inputs),he(i.declaredInputs,d.declaredInputs),he(i.outputs,d.outputs),si(d)&&d.data.animation){const te=i.data;te.animation=(te.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let w=0;w<g.length;w++){const R=g[w];R&&R.ngInherit&&R(i),R===$u&&(a=!1)}}s=Object.getPrototypeOf(s)}!function wp(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const d=i[u];d.hostVars=s+=d.hostVars,d.hostAttrs=ks(d.hostAttrs,a=ks(a,d.hostAttrs))}}(u)}function Vh(i){return i===Xt?{}:i===ke?[]:i}function Am(i,s){const a=i.viewQuery;i.viewQuery=a?(u,d)=>{s(u,d),a(u,d)}:s}function JE(i,s){const a=i.contentQueries;i.contentQueries=a?(u,d,g)=>{s(u,d,g),a(u,d,g)}:s}function eI(i,s){const a=i.hostBindings;i.hostBindings=a?(u,d)=>{s(u,d),a(u,d)}:s}function Md(i){return!!Dp(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Dp(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Sl(i,s,a){return i[s]=a}function Ko(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function wa(i,s,a,u){const d=Ko(i,s,a);return Ko(i,s+1,u)||d}function Rm(i,s,a,u){const d=S();return Ko(d,Sa(),s)&&(x(),sl(cr(),d,i,s,a,u)),Rm}function ru(i,s,a,u,d,g,w,R,k,H){const pe=function Gi(i,s,a,u,d,g){const w=wa(i,s,a,u);return wa(i,s+2,d,g)||w}(i,function Ps(){return Sn.lFrame.bindingIndex}(),a,d,w,k);return Qs(4),pe?s+Oe(a)+u+Oe(d)+g+Oe(w)+R+Oe(k)+H:ir}function xc(i,s,a,u,d,g,w,R){const k=S(),H=x(),te=i+jn,pe=H.firstCreatePass?function aI(i,s,a,u,d,g,w,R,k){const H=s.consts,te=Dd(s,i,4,w||null,Rs(H,R));ku(s,a,te,Rs(H,k)),gl(s,te);const pe=te.tView=ss(2,te,u,d,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,H);return null!==s.queries&&(s.queries.template(s,te),pe.queries=s.queries.embeddedTView(te)),te}(te,H,k,s,a,u,d,g,w):H.data[te];tr(pe,!1);const je=k[ee].createComment("");nl(H,k,je,pe),Oo(je,k),Ip(k,k[te]=O_(je,k,je,pe)),so(pe)&&_m(H,k,pe),null!=w&&Ou(k,pe,R)}function Nd(i){return gs(function ms(){return Sn.lFrame.contextLView}(),jn+i)}function Pm(i,s,a){const u=S();return Ko(u,Sa(),s)&&function ai(i,s,a,u,d,g,w,R){const k=fi(s,a);let te,H=s.inputs;!R&&null!=H&&(te=H[u])?(Dm(i,a,te,u,d),Qo(s)&&zE(a,s.index)):3&s.type&&(u=function Qb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),d=null!=w?w(d,s.value||"",u):d,g.setProperty(k,u,d))}(x(),cr(),u,i,s,u[ee],a,!1),Pm}function Om(i,s,a,u,d){const w=d?"class":"style";Dm(i,a,s.inputs[w],w,u)}function km(i,s,a,u){const d=S(),g=x(),w=jn+i,R=d[ee],k=g.firstCreatePass?function xp(i,s,a,u,d,g){const w=s.consts,k=Dd(s,i,2,u,Rs(w,d));return ku(s,a,k,Rs(w,g)),null!==k.attrs&&ei(k,k.attrs,!1),null!==k.mergedAttrs&&ei(k,k.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,k),k}(w,g,d,s,a,u):g.data[w],H=d[w]=bu(R,s,function fu(){return Sn.lFrame.currentNamespace}()),te=so(k);return tr(k,!0),rp(R,H,k),32!=(32&k.flags)&&nl(g,d,H,k),0===function I(){return Sn.lFrame.elementDepthCount}()&&Oo(H,d),function j(){Sn.lFrame.elementDepthCount++}(),te&&(_m(g,d,k),ro(g,k,d)),null!==u&&Ou(d,k),km}function Nm(){let i=kt();es()?Kr():(i=i.parent,tr(i,!1));const s=i;!function b(){Sn.lFrame.elementDepthCount--}();const a=x();return a.firstCreatePass&&(gl(a,i),ki(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function fr(i){return 0!=(8&i.flags)}(s)&&Om(a,s,S(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function qn(i){return 0!=(16&i.flags)}(s)&&Om(a,s,S(),s.stylesWithoutHost,!1),Nm}function Bi(i,s,a,u){return km(i,s,a,u),Nm(),Bi}function Fd(i,s,a){const u=S(),d=x(),g=i+jn,w=d.firstCreatePass?function Fm(i,s,a,u,d){const g=s.consts,w=Rs(g,u),R=Dd(s,i,8,"ng-container",w);return null!==w&&ei(R,w,!0),ku(s,a,R,Rs(g,d)),null!==s.queries&&s.queries.elementStart(s,R),R}(g,d,u,s,a):d.data[g];tr(w,!0);const R=u[g]=u[ee].createComment("");return nl(d,u,R,w),Oo(R,u),so(w)&&(_m(d,u,w),ro(d,w,u)),null!=a&&Ou(u,w),Fd}function Mp(){let i=kt();const s=x();return es()?Kr():(i=i.parent,tr(i,!1)),s.firstCreatePass&&(gl(s,i),ki(i)&&s.queries.elementEnd(i)),Mp}function H_(i,s,a){return Fd(i,s,a),Mp(),H_}function Yh(){return S()}function z_(i){return!!i&&"function"==typeof i.then}function G_(i){return!!i&&"function"==typeof i.subscribe}const Ld=G_;function Al(i,s,a,u){const d=S(),g=x(),w=kt();return function q_(i,s,a,u,d,g,w){const R=so(u),H=i.firstCreatePass&&N_(i),te=s[X],pe=k_(s);let je=!0;if(3&u.type||w){const Yt=fi(u,s),an=w?w(Yt):Yt,xn=pe.length,Un=w?Ln=>w(Qr(Ln[u.index])):u.index;let Ot=null;if(!w&&R&&(Ot=function uI(i,s,a,u){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const w=d[g];if(w===a&&d[g+1]===u){const R=s[ri],k=d[g+2];return R.length>k?R[k]:null}"string"==typeof w&&(g+=2)}return null}(i,s,d,u.index)),null!==Ot)(Ot.__ngLastListenerFn__||Ot).__ngNextListenerFn__=g,Ot.__ngLastListenerFn__=g,je=!1;else{g=Lm(u,s,te,g,!1);const Ln=a.listen(an,d,g);pe.push(g,Ln),H&&H.push(d,Un,xn,xn+1)}}else g=Lm(u,s,te,g,!1);const ft=u.outputs;let Rt;if(je&&null!==ft&&(Rt=ft[d])){const Yt=Rt.length;if(Yt)for(let an=0;an<Yt;an+=2){const bi=s[Rt[an]][Rt[an+1]].subscribe(g),us=pe.length;pe.push(g,bi),H&&H.push(d,u.index,us,-(us+1))}}}(g,d,d[ee],w,i,s,u),Al}function Bd(i,s,a,u){try{return En(6,s,a),!1!==a(u)}catch(d){return YE(i,d),!1}finally{En(7,s,a)}}function Lm(i,s,a,u,d){return function g(w){if(w===Function)return u;Cm(i.componentOffset>-1?Jr(i.index,s):s);let k=Bd(s,a,u,w),H=g.__ngNextListenerFn__;for(;H;)k=Bd(s,a,H,w)&&k,H=H.__ngNextListenerFn__;return d&&!1===k&&(w.preventDefault(),w.returnValue=!1),k}}function Bm(i=1){return function Aa(i){return(Sn.lFrame.contextLView=function hu(i,s){for(;i>0;)s=s[bt],i--;return s}(i,Sn.lFrame.contextLView))[X]}(i)}function Y_(i,s){let a=null;const u=function PE(i){const s=i.attrs;if(null!=s){const a=s.indexOf(5);if(!(1&a))return s[a+1]}return null}(i);for(let d=0;d<s.length;d++){const g=s[d];if("*"!==g){if(null===u?wd(i,g,!0):mp(u,g))return d}else a=d}return a}function $m(i){const s=S()[vt][br];if(!s.projection){const u=s.projection=sa(i?i.length:1,null),d=u.slice();let g=s.child;for(;null!==g;){const w=i?Y_(g,i):0;null!==w&&(d[w]?d[w].projectionNext=g:u[w]=g,d[w]=g),g=g.next}}}function cI(i,s=0,a){const u=S(),d=x(),g=Dd(d,jn+i,16,null,a||null);null===g.projection&&(g.projection=s),Kr(),32!=(32&g.flags)&&function Gg(i,s,a){Yl(s[ee],0,s,a,Ih(i,a,s),Hg(a.parent||s[br],a,s))}(d,u,g)}function Mc(i,s){return i<<17|s<<2}function xl(i){return i>>17&32767}function jm(i){return 2|i}function $d(i){return(131068&i)>>2}function Hm(i,s){return-131069&i|s<<2}function Q_(i){return 1|i}function J_(i,s,a,u,d){const g=i[a+1],w=null===s;let R=u?xl(g):$d(g),k=!1;for(;0!==R&&(!1===k||w);){const te=i[R+1];cC(i[R],s)&&(k=!0,i[R+1]=u?Q_(te):jm(te)),R=u?xl(te):$d(te)}k&&(i[a+1]=u?jm(g):Q_(g))}function cC(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&T(i,s)>=0}function nv(i,s,a){return Pl(i,s,a,!1),nv}function Gm(i,s){return Pl(i,s,null,!0),Gm}function Pl(i,s,a,u){const d=S(),g=x(),w=Qs(2);g.firstUpdatePass&&function Vu(i,s,a,u){const d=i.data;if(null===d[a+1]){const g=d[Ai()],w=function II(i,s){return s>=i.expandoStartIndex}(i,a);(function iv(i,s){return 0!=(i.flags&(s?8:16))})(g,u)&&null===s&&!w&&(s=!1),s=function Jh(i,s,a,u){const d=function mo(i){const s=Sn.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=u?s.residualClasses:s.residualStyles;if(null===d)0===(u?s.classBindings:s.styleBindings)&&(a=ef(a=iu(null,i,s,a,u),s.attrs,u),g=null);else{const w=s.directiveStylingLast;if(-1===w||i[w]!==d)if(a=iu(d,i,s,a,u),null===g){let k=function wI(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==$d(u))return i[xl(u)]}(i,s,u);void 0!==k&&Array.isArray(k)&&(k=iu(null,i,s,k[1],u),k=ef(k,s.attrs,u),function fC(i,s,a,u){i[xl(a?s.classBindings:s.styleBindings)]=u}(i,s,u,k))}else g=function bI(i,s,a){let u;const d=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<d;g++)u=ef(u,i[g].hostAttrs,a);return ef(u,s.attrs,a)}(i,s,u)}return void 0!==g&&(u?s.residualClasses=g:s.residualStyles=g),a}(d,g,s,u),function uC(i,s,a,u,d,g){let w=g?s.classBindings:s.styleBindings,R=xl(w),k=$d(w);i[u]=a;let te,H=!1;if(Array.isArray(a)?(te=a[1],(null===te||T(a,te)>0)&&(H=!0)):te=a,d)if(0!==k){const je=xl(i[R+1]);i[u+1]=Mc(je,R),0!==je&&(i[je+1]=Hm(i[je+1],u)),i[R+1]=function fI(i,s){return 131071&i|s<<17}(i[R+1],u)}else i[u+1]=Mc(R,0),0!==R&&(i[R+1]=Hm(i[R+1],u)),R=u;else i[u+1]=Mc(k,0),0===R?R=u:i[k+1]=Hm(i[k+1],u),k=u;H&&(i[u+1]=jm(i[u+1])),J_(i,te,u,!0),J_(i,te,u,!1),function Zh(i,s,a,u,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&T(g,s)>=0&&(a[u+1]=Q_(a[u+1]))}(s,te,i,u,g),w=Mc(R,k),g?s.classBindings=w:s.styleBindings=w}(d,g,s,a,w,u)}}(g,i,w,u),s!==ir&&Ko(d,w,s)&&function Rc(i,s,a,u,d,g,w,R){if(!(3&s.type))return;const k=i.data,H=k[R+1],te=function pI(i){return 1==(1&i)}(H)?Pc(k,s,a,d,$d(H),w):void 0;su(te)||(su(g)||function hI(i){return 2==(2&i)}(H)&&(g=Pc(k,null,a,d,R,w)),function Go(i,s,a,u,d){if(s)d?i.addClass(a,u):i.removeClass(a,u);else{let g=-1===u.indexOf("-")?void 0:ka.DashCase;null==d?i.removeStyle(a,u,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=ka.Important),i.setStyle(a,u,d,g))}}(u,w,Zs(Ai(),a),d,g))}(g,g.data[Ai()],d,d[ee],i,d[w+1]=function Op(i,s){return null==i||""===i||("string"==typeof s?i+=s:"object"==typeof i&&(i=Me(Zl(i)))),i}(s,a),u,w)}function iu(i,s,a,u,d){let g=null;const w=a.directiveEnd;let R=a.directiveStylingLast;for(-1===R?R=a.directiveStart:R++;R<w&&(g=s[R],u=ef(u,g.hostAttrs,d),g!==i);)R++;return null!==i&&(a.directiveStylingLast=R),u}function ef(i,s,a){const u=a?1:2;let d=-1;if(null!==s)for(let g=0;g<s.length;g++){const w=s[g];"number"==typeof w?d=w:d===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hi(i,w,!!a||s[++g]))}return void 0===i?null:i}function Pc(i,s,a,u,d,g){const w=null===s;let R;for(;d>0;){const k=i[d],H=Array.isArray(k),te=H?k[1]:k,pe=null===te;let je=a[d+1];je===ir&&(je=pe?ke:void 0);let ft=pe?C(je,u):te===u?je:void 0;if(H&&!su(ft)&&(ft=C(k,u)),su(ft)&&(R=ft,w))return R;const Rt=i[d+1];d=w?xl(Rt):$d(Rt)}if(null!==s){let k=g?s.residualClasses:s.residualStyles;null!=k&&(R=C(k,u))}return R}function su(i){return void 0!==i}function qm(i,s=""){const a=S(),u=x(),d=i+jn,g=u.firstCreatePass?Dd(u,d,1,s,null):u.data[d],w=a[d]=function rs(i,s){return i.createText(s)}(a[ee],s);nl(u,a,w,g),tr(g,!1)}function kp(i){return Np("",i,""),kp}function Np(i,s,a){const u=S(),d=function Rd(i,s,a,u){return Ko(i,Sa(),a)?s+Oe(a)+u:ir}(u,i,s,a);return d!==ir&&gr(u,Ai(),d),Np}function Ym(i,s,a,u,d,g,w,R,k){const H=S(),te=ru(H,i,s,a,u,d,g,w,R,k);return te!==ir&&gr(H,Ai(),te),Ym}const Nc=void 0;var Qm=["en",[["a","p"],["AM","PM"],Nc],[["AM","PM"],Nc,Nc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nc,"{1} 'at' {0}",Nc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Xm(i){const a=Math.floor(Math.abs(i)),u=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===u?1:5}];let jd={};function Fc(i){const s=function Bc(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=OI(s);if(a)return a;const u=s.split("-")[0];if(a=OI(u),a)return a;if("en"===u)return Qm;throw new _e(701,!1)}function Lc(i){return Fc(i)[Zn.PluralCase]}function OI(i){return i in jd||(jd[i]=pn.ng&&pn.ng.common&&pn.ng.common.locales&&pn.ng.common.locales[i]),jd[i]}var Zn=(()=>((Zn=Zn||{})[Zn.LocaleId=0]="LocaleId",Zn[Zn.DayPeriodsFormat=1]="DayPeriodsFormat",Zn[Zn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Zn[Zn.DaysFormat=3]="DaysFormat",Zn[Zn.DaysStandalone=4]="DaysStandalone",Zn[Zn.MonthsFormat=5]="MonthsFormat",Zn[Zn.MonthsStandalone=6]="MonthsStandalone",Zn[Zn.Eras=7]="Eras",Zn[Zn.FirstDayOfWeek=8]="FirstDayOfWeek",Zn[Zn.WeekendRange=9]="WeekendRange",Zn[Zn.DateFormat=10]="DateFormat",Zn[Zn.TimeFormat=11]="TimeFormat",Zn[Zn.DateTimeFormat=12]="DateTimeFormat",Zn[Zn.NumberSymbols=13]="NumberSymbols",Zn[Zn.NumberFormats=14]="NumberFormats",Zn[Zn.CurrencyCode=15]="CurrencyCode",Zn[Zn.CurrencySymbol=16]="CurrencySymbol",Zn[Zn.CurrencyName=17]="CurrencyName",Zn[Zn.Currencies=18]="Currencies",Zn[Zn.Directionality=19]="Directionality",Zn[Zn.PluralCase=20]="PluralCase",Zn[Zn.ExtraData=21]="ExtraData",Zn))();const sf="en-US";let pv=sf;function qd(i,s,a,u,d){if(i=ue(i),Array.isArray(i))for(let g=0;g<i.length;g++)qd(i[g],s,a,u,d);else{const g=x(),w=S();let R=Mu(i)?i:ue(i.provide),k=fp(i);const H=kt(),te=1048575&H.providerIndexes,pe=H.directiveStart,je=H.providerIndexes>>20;if(Mu(i)||!i.multi){const ft=new mt(k,d,Lh),Rt=Qp(R,s,d?te:te+je,pe);-1===Rt?(yl(Ya(H,w),g,R),Xp(g,i,s.length),s.push(R),H.directiveStart++,H.directiveEnd++,d&&(H.providerIndexes+=1048576),a.push(ft),w.push(ft)):(a[Rt]=ft,w[Rt]=ft)}else{const ft=Qp(R,s,te+je,pe),Rt=Qp(R,s,te,te+je),an=Rt>=0&&a[Rt];if(d&&!an||!d&&!(ft>=0&&a[ft])){yl(Ya(H,w),g,R);const xn=function UC(i,s,a,u,d){const g=new mt(i,a,Lh);return g.multi=[],g.index=s,g.componentProviders=0,Ov(g,d,u&&!a),g}(d?ju:kv,a.length,d,u,k);!d&&an&&(a[Rt].providerFactory=xn),Xp(g,i,s.length,0),s.push(R),H.directiveStart++,H.directiveEnd++,d&&(H.providerIndexes+=1048576),a.push(xn),w.push(xn)}else Xp(g,i,ft>-1?ft:Rt,Ov(a[d?Rt:ft],k,!d&&u));!d&&u&&an&&a[Rt].componentProviders++}}}function Xp(i,s,a,u){const d=Mu(s),g=function im(i){return!!i.useClass}(s);if(d||g){const k=(g?ue(s.useClass):s).prototype.ngOnDestroy;if(k){const H=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const te=H.indexOf(a);-1===te?H.push(a,[u,k]):H[te+1].push(u,k)}else H.push(a,k)}}}function Ov(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Qp(i,s,a,u){for(let d=a;d<u;d++)if(s[d]===i)return d;return-1}function kv(i,s,a,u){return uy(this.multi,[])}function ju(i,s,a,u){const d=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,R=_o(a,a[Kt],this.providerFactory.index,u);g=R.slice(0,w),uy(d,g);for(let k=w;k<R.length;k++)g.push(R[k])}else g=[],uy(d,g);return g}function uy(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function cy(i,s=[]){return a=>{a.providersResolver=(u,d)=>function ly(i,s,a){const u=x();if(u.firstCreatePass){const d=si(i);qd(a,u.data,u.blueprint,d,!0),qd(s,u.data,u.blueprint,d,!1)}}(u,d?d(i):i,s)}}class hf{}class dy{}function VC(i,s){return new Jp(i,null!=s?s:null)}class Jp extends hf{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new L_(this);const u=Sr(s);this._bootstrapComponents=Et(u.bootstrap),this._r3Injector=Ru(s,a,[{provide:hf,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver}],Me(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class eg extends dy{constructor(s){super(),this.moduleType=s}create(s){return new Jp(this.moduleType,s)}}class QI extends hf{constructor(s,a,u){super(),this.componentFactoryResolver=new L_(this),this.instance=null;const d=new __([...s,{provide:hf,useValue:this},{provide:Ql,useValue:this.componentFactoryResolver}],a||Ec(),u,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Vc(i,s,a=null){return new QI(i,s,a).injector}let Nv=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const u=m_(0,a.type),d=u.length>0?Vc([u],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=it({token:i,providedIn:"environment",factory:()=>new i(zt(Ic))}),i})();function JI(i){i.getStandaloneInjector=s=>s.get(Nv).getOrCreateStandaloneInjector(i)}function fy(i,s,a){const u=pi()+i,d=S();return d[u]===ir?Sl(d,u,a?s.call(a):s()):function zh(i,s){return i[s]}(d,u)}function Yd(i,s,a,u){return sw(S(),pi(),i,s,a,u)}function Kd(i,s,a,u,d){return function ow(i,s,a,u,d,g,w){const R=s+a;return wa(i,R,d,g)?Sl(i,R+2,w?u.call(w,d,g):u(d,g)):Zd(i,R+2)}(S(),pi(),i,s,a,u,d)}function Zd(i,s){const a=i[s];return a===ir?void 0:a}function sw(i,s,a,u,d,g){const w=s+a;return Ko(i,w,d)?Sl(i,w+1,g?u.call(g,d):u(d)):Zd(i,w+1)}function qv(i,s){const a=x();let u;const d=i+jn;var g;a.firstCreatePass?(u=function WC(i,s){if(s)for(let a=s.length-1;a>=0;a--){const u=s[a];if(i===u.name)return u}}(s,a.pipeRegistry),a.data[d]=u,u.onDestroy&&(null!==(g=a.destroyHooks)&&void 0!==g?g:a.destroyHooks=[]).push(d,u.onDestroy)):u=a.data[d];const w=u.factory||(u.factory=hi(u.type)),R=Ir(Lh);try{const k=Uo(!1),H=w();return Uo(k),function lI(i,s,a,u){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=u}(a,S(),d,H),H}finally{Ir(R)}}function Yv(i,s,a){const u=i+jn,d=S(),g=gs(d,u);return function tg(i,s){return i[Kt].data[s].pure}(d,u)?sw(d,pi(),s,g.transform,a,g):g.transform(a)}function ng(i){return s=>{setTimeout(i,void 0,s)}}const al=class ZC extends y.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){let d=s,g=a||(()=>null),w=u;if(s&&"object"==typeof s){var R,k,H;const pe=s;d=null===(R=pe.next)||void 0===R?void 0:R.bind(pe),g=null===(k=pe.error)||void 0===k?void 0:k.bind(pe),w=null===(H=pe.complete)||void 0===H?void 0:H.bind(pe)}this.__isAsync&&(g=ng(g),d&&(d=ng(d)),w&&(w=ng(w)));const te=super.subscribe({next:d,error:g,complete:w});return s instanceof f.w0&&s.add(te),te}};function Kv(){return this._results[Symbol.iterator]()}class Zv{get changes(){return this._changes||(this._changes=new al)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Zv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Kv)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const d=function Ns(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function Oa(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let d=i[u],g=s[u];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(u._results,d,a))&&(u._results=d,u.length=d.length,u.last=d[this.length-1],u.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xd=(()=>{class i{}return i.__NG_ELEMENT_ID__=cw,i})();const XC=Xd,Xv=class extends XC{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s,a){const u=this._declarationTContainer.tView,d=pm(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,a||null);d[xt]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[ln];return null!==w&&(d[ln]=w.createEmbeddedView(u)),gm(u,d,s),new xd(d)}};function cw(){return gf(kt(),S())}function gf(i,s){return 4&i.type?new Xv(s,i,Ph(i,s)):null}let rg=(()=>{class i{}return i.__NG_ELEMENT_ID__=QC,i})();function QC(){return yy(kt(),S())}const Qv=rg,dw=class extends Qv{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return Ph(this._hostTNode,this._hostLView)}get injector(){return new ws(this._hostTNode,this._hostLView)}get parentInjector(){const s=Is(this._hostTNode,this._hostLView);if(ra(s)){const a=Ga(s,this._hostLView),u=ns(s);return new ws(a[Kt].data[u+8],a)}return new ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=my(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-ui}createEmbeddedView(s,a,u){let d,g;"number"==typeof u?d=u:null!=u&&(d=u.index,g=u.injector);const w=s.createEmbeddedView(a||{},g);return this.insert(w,d),w}createComponent(s,a,u,d,g){const w=s&&!function Ro(i){return"function"==typeof i}(s);let R;if(w)R=a;else{const pe=a||{};R=pe.index,u=pe.injector,d=pe.projectableNodes,g=pe.environmentInjector||pe.ngModuleRef}const k=w?s:new Uh(zn(s)),H=u||this.parentInjector;if(!g&&null==k.ngModule){const je=(w?H:this.parentInjector).get(Ic,null);je&&(g=je)}const te=k.create(H,d,void 0,g);return this.insert(te.hostView,R),te}insert(s,a){const u=s._lView,d=u[Kt];if(function Xs(i){return Ki(i[wr])}(u)){const te=this.indexOf(s);if(-1!==te)this.detach(te);else{const pe=u[wr],je=new dw(pe,pe[br],pe[wr]);je.detach(je.indexOf(s))}}const g=this._adjustIndex(a),w=this._lContainer;!function u_(i,s,a,u){const d=ui+u,g=a.length;u>0&&(a[d-1][zr]=s),u<g-ui?(s[zr]=a[d],Eu(a,ui+u,s)):(a.push(s),s[zr]=null),s[wr]=a;const w=s[xt];null!==w&&a!==w&&function Jf(i,s){const a=i[Yi];s[vt]!==s[wr][wr][vt]&&(i[Oi]=!0),null===a?i[Yi]=[s]:a.push(s)}(w,s);const R=s[ln];null!==R&&R.insertView(i),s[Bn]|=64}(d,u,w,g);const R=ud(g,w),k=u[ee],H=od(k,w[Ui]);return null!==H&&function a_(i,s,a,u,d,g){u[ni]=d,u[br]=s,bs(i,u,a,1,d,g)}(d,w[br],k,u,H,R),s.attachToViewContainerRef(),Eu(Jv(w),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=my(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=ep(this._lContainer,a);u&&(Il(Jv(this._lContainer),a),vh(u[Kt],u))}detach(s){const a=this._adjustIndex(s,-1),u=ep(this._lContainer,a);return u&&null!=Il(Jv(this._lContainer),a)?new xd(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function my(i){return i[li]}function Jv(i){return i[li]||(i[li]=[])}function yy(i,s){let a;const u=s[i.index];if(Ki(u))a=u;else{let d;if(8&i.type)d=Qr(u);else{const g=s[ee];d=g.createComment("");const w=fi(i,s);ql(g,od(g,w),d,function wh(i,s){return i.nextSibling(s)}(g,w),!1)}s[i.index]=a=O_(u,s,d,i),Ip(s,a)}return new dw(a,i,s)}class e0{constructor(s){this.queryList=s,this.matches=null}clone(){return new e0(this.queryList)}setDirty(){this.queryList.setDirty()}}class ig{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let g=0;g<u;g++){const w=a.getByIndex(g);d.push(this.queries[w.indexInDeclarationView].clone())}return new ig(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Iy(s,a).matches&&this.queries[a].setDirty()}}class _y{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class sg{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const d=null!==a?a.length:0,g=this.getByIndex(u).embeddedTView(s,d);g&&(g.indexInDeclarationView=u,null!==a?a.push(g):a=[g])}return null!==a?new sg(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Hc{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Hc(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let d=0;d<u.length;d++){const g=u[d];this.matchTNodeWithReadOption(s,a,hw(a,g)),this.matchTNodeWithReadOption(s,a,_l(a,s,g,!1,!1))}else u===Xd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,_l(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const d=this.metadata.read;if(null!==d)if(d===Id||d===rg||d===Xd&&4&a.type)this.addMatch(a.index,-2);else{const g=_l(a,s,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function hw(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function JC(i,s,a,u){return-1===a?function t0(i,s){return 11&i.type?Ph(i,s):4&i.type?gf(i,s):null}(s,i):-2===a?function n0(i,s,a){return a===Id?Ph(s,i):a===Xd?gf(s,i):a===rg?yy(s,i):void 0}(i,s,u):_o(i,i[Kt],a,s)}function ou(i,s,a,u){const d=s[ln].queries[u];if(null===d.matches){const g=i.data,w=a.matches,R=[];for(let k=0;k<w.length;k+=2){const H=w[k];R.push(H<0?null:JC(s,g[H],w[k+1],a.metadata.read))}d.matches=R}return d.matches}function og(i,s,a,u){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const w=ou(i,s,d,a);for(let R=0;R<g.length;R+=2){const k=g[R];if(k>0)u.push(w[R/2]);else{const H=g[R+1],te=s[-k];for(let pe=ui;pe<te.length;pe++){const je=te[pe];je[xt]===je[wr]&&og(je[Kt],je,H,u)}if(null!==te[Yi]){const pe=te[Yi];for(let je=0;je<pe.length;je++){const ft=pe[je];og(ft[Kt],ft,H,u)}}}}}return u}function fw(i){const s=S(),a=x(),u=na();Bo(u+1);const d=Iy(a,u);if(i.dirty&&function Ji(i){return 4==(4&i[Bn])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?og(a,s,u,[]):ou(a,s,d,u);i.reset(g,Nb),i.notifyOnChanges()}return!0}return!1}function vy(i,s,a){const u=x();u.firstCreatePass&&(Ey(u,new _y(i,s,a),-1),2==(2&s)&&(u.staticViewQueries=!0)),mw(u,S(),s)}function pw(i,s,a,u){const d=x();if(d.firstCreatePass){const g=kt();Ey(d,new _y(s,a,u),g.index),function eD(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}mw(d,S(),a)}function gw(){return function r0(i,s){return i[ln].queries[s].queryList}(S(),na())}function mw(i,s,a){const u=new Zv(4==(4&a));mi(i,s,u,u.destroy),null===s[ln]&&(s[ln]=new ig),s[ln].queries.push(new e0(u))}function Ey(i,s,a){null===i.queries&&(i.queries=new sg),i.queries.track(new Hc(s,a))}function Iy(i,s){return i.queries.getByIndex(s)}function yw(i,s){return gf(i,s)}function o0(i){return!!Sr(i)}function io(...i){}const E0=new Xr("Application Initializer");let xy=(()=>{class i{constructor(a){this.appInits=a,this.resolve=io,this.reject=io,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,d)=>{this.resolve=u,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(z_(g))a.push(g);else if(Ld(g)){const w=new Promise((R,k)=>{g.subscribe({complete:R,error:k})});a.push(w)}}Promise.all(a).then(()=>{u()}).catch(d=>{this.reject(d)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(zt(E0,8))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hg=new Xr("AppId",{providedIn:"root",factory:function I0(){return`${w0()}${w0()}${w0()}`}});function w0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const My=new Xr("Platform Initializer"),uD=new Xr("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let IS=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const ls=new Xr("LocaleId",{providedIn:"root",factory:()=>nn(ls,Vt.Optional|Vt.SkipSelf)||function wS(){return typeof $localize<"u"&&$localize.locale||sf}()}),Ow=new Xr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class dD{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let hD=(()=>{class i{compileModuleSync(a){return new eg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const u=this.compileModuleSync(a),g=Et(Sr(a).declarations).reduce((w,R)=>{const k=zn(R);return k&&w.push(new Uh(k)),w},[]);return new dD(u,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gD=(()=>Promise.resolve(0))();function ll(i){typeof Zone>"u"?gD.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class wo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new al(!1),this.onMicrotaskEmpty=new al(!1),this.onStable=new al(!1),this.onError=new al(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!u&&a,d.shouldCoalesceRunChangeDetection=u,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function zu(){let i=pn.requestAnimationFrame,s=pn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Fw(i){const s=()=>{!function mD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(pn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Py(i),i.isCheckStableRunning=!0,b0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Py(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,d,g,w,R)=>{try{return fg(i),a.invokeTask(d,g,w,R)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),Lw(i)}},onInvoke:(a,u,d,g,w,R,k)=>{try{return fg(i),a.invoke(d,g,w,R,k)}finally{i.shouldCoalesceRunChangeDetection&&s(),Lw(i)}},onHasTask:(a,u,d,g)=>{a.hasTask(d,g),u===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,Py(i),b0(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,u,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wo.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(wo.isInAngularZone())throw new _e(909,!1)}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,d){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+d,s,Ry,io,io);try{return g.runTask(w,a,u)}finally{g.cancelTask(w)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const Ry={};function b0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Py(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function fg(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Lw(i){i._nesting--,b0(i)}class th{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new al,this.onMicrotaskEmpty=new al,this.onStable=new al,this.onError=new al}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,d){return s.apply(a,u)}}const pg=new Xr(""),yf=new Xr("");let C0,Bw=(()=>{class i{constructor(a,u,d){this._ngZone=a,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,C0||(function yD(i){C0=i}(d),d.addToWindow(u)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wo.assertNotInAngularZone(),ll(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ll(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,d){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,u,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,u,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(zt(wo),zt(Oy),zt(yf))},i.\u0275prov=it({token:i,factory:i.\u0275fac}),i})(),Oy=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){var d,g;return null!==(d=null===(g=C0)||void 0===g?void 0:g.findTestabilityInTree(this,a,u))&&void 0!==d?d:null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Gu=!1;let au=null;const ky=new Xr("AllowMultipleToken"),Ny=new Xr("PlatformDestroyListeners"),Gc=new Xr("appBootstrapListener");class gg{constructor(s,a){this.name=s,this.token=a}}function _f(i,s,a=[]){const u=`Platform: ${s}`,d=new Xr(u);return(g=[])=>{let w=_g();if(!w||w.injector.get(ky,!1)){const R=[...a,...g,{provide:d,useValue:!0}];i?i(R):function vD(i){if(au&&!au.get(ky,!1))throw new _e(400,!1);au=i;const s=i.get(vf);(function mg(i){const s=i.get(My,null);s&&s.forEach(a=>a())})(i)}(function yg(i=[],s){return Pu.create({name:s,providers:[{provide:sm,useValue:"platform"},{provide:Ny,useValue:new Set([()=>au=null])},...i]})}(R,u))}return function ID(i){const s=_g();if(!s)throw new _e(401,!1);return s}()}}function _g(){var i,s;return null!==(i=null===(s=au)||void 0===s?void 0:s.get(vf))&&void 0!==i?i:null}let vf=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const d=function Ef(i,s){let a;return a="noop"===i?new th:("zone.js"===i?void 0:i)||new wo(s),a}(null==u?void 0:u.ngZone,function Wu(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:wo,useValue:d}];return d.run(()=>{const w=Pu.create({providers:g,parent:this.injector,name:a.moduleType.name}),R=a.create(w),k=R.injector.get(gp,null);if(!k)throw new _e(402,!1);return d.runOutsideAngular(()=>{const H=d.onError.subscribe({next:te=>{k.handleError(te)}});R.onDestroy(()=>{S0(this._modules,R),H.unsubscribe()})}),function Uw(i,s,a){try{const u=a();return z_(u)?u.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(k,d,()=>{const H=R.injector.get(xy);return H.runInitializers(),H.donePromise.then(()=>(function NI(i){Qe(i,"Expected localeId to be defined"),"string"==typeof i&&(pv=i.toLowerCase().replace(/_/g,"-"))}(R.injector.get(ls,sf)||sf),this._moduleDoBootstrap(R),R))})})}bootstrapModule(a,u=[]){const d=nh({},u);return function $w(i,s,a){const u=new eg(a);return Promise.resolve(u)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const u=a.injector.get(T0);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>u.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new _e(-403,!1);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const a=this._injector.get(Ny,null);a&&(a.forEach(u=>u()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(zt(Pu))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function nh(i,s){return Array.isArray(s)?s.reduce(nh,i):{...i,...s}}let T0=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,u,d){this._zone=a,this._injector=u,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new W.y(R=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{R.next(this._stable),R.complete()})}),w=new W.y(R=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{wo.assertNotInAngularZone(),ll(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,R.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{wo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{R.next(!1)}))});return()=>{k.unsubscribe(),H.unsubscribe()}});this.isStable=(0,oe.T)(g,w.pipe((0,be.B)()))}bootstrap(a,u){const d=a instanceof E_;if(!this._injector.get(xy).done){!d&&Vn(a);throw new _e(405,Gu)}let w;w=d?a:this._injector.get(Ql).resolveComponentFactory(a),this.componentTypes.push(w.componentType);const R=function D0(i){return i.isBoundToModule}(w)?void 0:this._injector.get(hf),H=w.create(Pu.NULL,[],u||w.selector,R),te=H.location.nativeElement,pe=H.injector.get(pg,null);return null==pe||pe.registerApplication(te),H.onDestroy(()=>{this.detachView(H.hostView),S0(this.components,H),null==pe||pe.unregisterApplication(te)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;S0(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const u=this._injector.get(Gc,[]);u.push(...this._bootstrapListeners),u.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>S0(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new _e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(zt(wo),zt(Ic),zt(gp))},i.\u0275prov=it({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function S0(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function By(){return!1}function CD(){}let DD=(()=>{class i{}return i.__NG_ELEMENT_ID__=$y,i})();function $y(i){return function TD(i,s,a){if(Qo(i)&&!a){const u=Jr(i.index,s);return new xd(u,u)}return 47&i.type?new xd(s[vt],s):null}(kt(),S(),16==(16&i))}class Yu{constructor(){}supports(s){return Md(s)}create(s){return new kD(s)}}const OD=(i,s)=>s;class kD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||OD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,d=0,g=null;for(;a||u;){const w=!u||a&&a.currentIndex<R0(u,d,g)?a:u,R=R0(w,d,g),k=w.currentIndex;if(w===u)d--,u=u._nextRemoved;else if(a=a._next,null==w.previousIndex)d++;else{g||(g=[]);const H=R-d,te=k-d;if(H!=te){for(let je=0;je<H;je++){const ft=je<g.length?g[je]:g[je]=0,Rt=ft+je;te<=Rt&&Rt<H&&(g[je]=ft+1)}g[w.previousIndex]=te-H}}R!==k&&s(w,R,k)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Md(s))throw new _e(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,g,w,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let R=0;R<this.length;R++)g=s[R],w=this._trackByFn(R,g),null!==a&&Object.is(a.trackById,w)?(u&&(a=this._verifyReinsertion(a,g,w,R)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,w,R),u=!0),a=a._next}else d=0,function iI(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,R=>{w=this._trackByFn(d,R),null!==a&&Object.is(a.trackById,w)?(u&&(a=this._verifyReinsertion(a,R,w,d)),Object.is(a.item,R)||this._addIdentityChange(a,R)):(a=this._mismatch(a,R,w,d),u=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,d){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,d)):s=this._addAfter(new ND(a,u),g,d),s}_verifyReinsertion(s,a,u,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?s=this._reinsertAfter(g,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,g=s._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Gw),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Gw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ND{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class FD{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class Gw{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new FD,this.map.set(a,u)),u.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function R0(i,s,a){const u=i.previousIndex;if(null===u)return u;let d=0;return a&&u<a.length&&(d=a[u]),u+s+d}class P0{constructor(){}supports(s){return s instanceof Map||Dp(s)}create(){return new LD}}class LD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Dp(s)))throw new _e(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,u);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const g=d._prev,w=d._next;return g&&(g._next=w),w&&(w._prev=g),d._next=null,d._prev=null,d}const u=new BD(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class BD{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function O0(){return new k0([new Yu])}let k0=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const d=u.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||O0()),deps:[[i,new N,new oi]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(null!=u)return u;throw new _e(901,!1)}}return i.\u0275prov=it({token:i,providedIn:"root",factory:O0}),i})();function Vy(){return new Ww([new P0])}let Ww=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const d=u.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Vy()),deps:[[i,new N,new oi]]}}find(a){const u=this.factories.find(d=>d.supports(a));if(u)return u;throw new _e(901,!1)}}return i.\u0275prov=it({token:i,providedIn:"root",factory:Vy}),i})();const OS=_f(null,"core",[]);let VD=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(zt(T0))},i.\u0275mod=Hr({type:i}),i.\u0275inj=It({}),i})();function jD(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function zD(i,s){const a=zn(i),u=s.elementInjector||Ec();return new Uh(a).create(u,s.projectableNodes,s.hostElement,s.environmentInjector)}},433:(Wt,nt,B)=>{"use strict";B.d(nt,{qu:()=>xo,u:()=>Do,sg:()=>As,u5:()=>U,JU:()=>Ke,a5:()=>_r,JJ:()=>mr,JL:()=>pn,On:()=>li,UX:()=>se,kI:()=>Ie,_Y:()=>Yi});var y=B(4650),f=B(6895),W=B(8996),oe=B(9751),be=B(4742),Ce=B(8421),he=B(7669),Me=B(5403),we=B(3268),fe=B(1810),ue=B(4004);let De=(()=>{class O{constructor(x,q){this._renderer=x,this._elementRef=q,this.onChange=et=>{},this.onTouched=()=>{}}setProperty(x,q){this._renderer.setProperty(this._elementRef.nativeElement,x,q)}registerOnTouched(x){this.onTouched=x}registerOnChange(x){this.onChange=x}setDisabledState(x){this.setProperty("disabled",x)}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(y.Qsj),y.Y36(y.SBq))},O.\u0275dir=y.lG2({type:O}),O})(),Pe=(()=>{class O extends De{}return O.\u0275fac=function(){let S;return function(q){return(S||(S=y.n5z(O)))(q||O)}}(),O.\u0275dir=y.lG2({type:O,features:[y.qOj]}),O})();const Ke=new y.OlP("NgValueAccessor"),ye={provide:Ke,useExisting:(0,y.Gpc)(()=>Ye),multi:!0},rt=new y.OlP("CompositionEventMode");let Ye=(()=>{class O extends De{constructor(x,q,et){super(x,q),this._compositionMode=et,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const O=(0,f.q)()?(0,f.q)().getUserAgent():"";return/android (\d+)/.test(O.toLowerCase())}())}writeValue(x){this.setProperty("value",null==x?"":x)}_handleInput(x){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(x)}_compositionStart(){this._composing=!0}_compositionEnd(x){this._composing=!1,this._compositionMode&&this.onChange(x)}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(rt,8))},O.\u0275dir=y.lG2({type:O,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(x,q){1&x&&y.NdJ("input",function(kt){return q._handleInput(kt.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(kt){return q._compositionEnd(kt.target.value)})},features:[y._Bn([ye]),y.qOj]}),O})();const Xe=!1;function Je(O){return null==O||("string"==typeof O||Array.isArray(O))&&0===O.length}function ht(O){return null!=O&&"number"==typeof O.length}const Te=new y.OlP("NgValidators"),re=new y.OlP("NgAsyncValidators"),xe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ie{static min(S){return function He(O){return S=>{if(Je(S.value)||Je(O))return null;const x=parseFloat(S.value);return!isNaN(x)&&x<O?{min:{min:O,actual:S.value}}:null}}(S)}static max(S){return function ze(O){return S=>{if(Je(S.value)||Je(O))return null;const x=parseFloat(S.value);return!isNaN(x)&&x>O?{max:{max:O,actual:S.value}}:null}}(S)}static required(S){return function ut(O){return Je(O.value)?{required:!0}:null}(S)}static requiredTrue(S){return function Ze(O){return!0===O.value?null:{required:!0}}(S)}static email(S){return function lt(O){return Je(O.value)||xe.test(O.value)?null:{email:!0}}(S)}static minLength(S){return function ot(O){return S=>Je(S.value)||!ht(S.value)?null:S.value.length<O?{minlength:{requiredLength:O,actualLength:S.value.length}}:null}(S)}static maxLength(S){return function Re(O){return S=>ht(S.value)&&S.value.length>O?{maxlength:{requiredLength:O,actualLength:S.value.length}}:null}(S)}static pattern(S){return function Se(O){if(!O)return Be;let S,x;return"string"==typeof O?(x="","^"!==O.charAt(0)&&(x+="^"),x+=O,"$"!==O.charAt(O.length-1)&&(x+="$"),S=new RegExp(x)):(x=O.toString(),S=O),q=>{if(Je(q.value))return null;const et=q.value;return S.test(et)?null:{pattern:{requiredPattern:x,actualValue:et}}}}(S)}static nullValidator(S){return null}static compose(S){return de(S)}static composeAsync(S){return Bt(S)}}function Be(O){return null}function Qe(O){return null!=O}function gt(O){const S=(0,y.QGY)(O)?(0,W.D)(O):O;if(Xe&&!(0,y.CqO)(S)){let x="Expected async validator to return Promise or Observable.";throw"object"==typeof O&&(x+=" Are you using a synchronous validator where an async validator is expected?"),new y.vHH(-1101,x)}return S}function Zt(O){let S={};return O.forEach(x=>{S=null!=x?{...S,...x}:S}),0===Object.keys(S).length?null:S}function Ft(O,S){return S.map(x=>x(O))}function it(O){return O.map(S=>function _n(O){return!O.validate}(S)?S:x=>S.validate(x))}function de(O){if(!O)return null;const S=O.filter(Qe);return 0==S.length?null:function(x){return Zt(Ft(x,S))}}function It(O){return null!=O?de(it(O)):null}function Bt(O){if(!O)return null;const S=O.filter(Qe);return 0==S.length?null:function(x){return function ae(...O){const S=(0,he.jO)(O),{args:x,keys:q}=(0,be.D)(O),et=new oe.y(kt=>{const{length:Xn}=x;if(!Xn)return void kt.complete();const Pr=new Array(Xn);let tr=Xn,es=Xn;for(let Kr=0;Kr<Xn;Kr++){let ms=!1;(0,Ce.Xf)(x[Kr]).subscribe((0,Me.x)(kt,ha=>{ms||(ms=!0,es--),Pr[Kr]=ha},()=>tr--,void 0,()=>{(!tr||!ms)&&(es||kt.next(q?(0,fe.n)(q,Pr):Pr),kt.complete())}))}});return S?et.pipe((0,we.Z)(S)):et}(Ft(x,S).map(gt)).pipe((0,ue.U)(Zt))}}function Ge(O){return null!=O?Bt(it(O)):null}function Jt(O,S){return null===O?[S]:Array.isArray(O)?[...O,S]:[O,S]}function tn(O){return O._rawValidators}function Y(O){return O._rawAsyncValidators}function on(O){return O?Array.isArray(O)?O:[O]:[]}function Rn(O,S){return Array.isArray(O)?O.includes(S):O===S}function nr(O,S){const x=on(S);return on(O).forEach(et=>{Rn(x,et)||x.push(et)}),x}function Wn(O,S){return on(S).filter(x=>!Rn(O,x))}class Qn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(S){this._rawValidators=S||[],this._composedValidatorFn=It(this._rawValidators)}_setAsyncValidators(S){this._rawAsyncValidators=S||[],this._composedAsyncValidatorFn=Ge(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(S){this._onDestroyCallbacks.push(S)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(S=>S()),this._onDestroyCallbacks=[]}reset(S){this.control&&this.control.reset(S)}hasError(S,x){return!!this.control&&this.control.hasError(S,x)}getError(S,x){return this.control?this.control.getError(S,x):null}}class Vt extends Qn{get formDirective(){return null}get path(){return null}}class _r extends Qn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ar{constructor(S){this._cd=S}get isTouched(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.touched)}get isUntouched(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.untouched)}get isPristine(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.pristine)}get isDirty(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.dirty)}get isValid(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.valid)}get isInvalid(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.invalid)}get isPending(){var S,x;return!(null===(S=this._cd)||void 0===S||null===(x=S.control)||void 0===x||!x.pending)}get isSubmitted(){var S;return!(null===(S=this._cd)||void 0===S||!S.submitted)}}let mr=(()=>{class O extends ar{constructor(x){super(x)}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(_r,2))},O.\u0275dir=y.lG2({type:O,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(x,q){2&x&&y.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)},features:[y.qOj]}),O})(),pn=(()=>{class O extends ar{constructor(x){super(x)}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(Vt,10))},O.\u0275dir=y.lG2({type:O,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(x,q){2&x&&y.ekj("ng-untouched",q.isUntouched)("ng-touched",q.isTouched)("ng-pristine",q.isPristine)("ng-dirty",q.isDirty)("ng-valid",q.isValid)("ng-invalid",q.isInvalid)("ng-pending",q.isPending)("ng-submitted",q.isSubmitted)},features:[y.qOj]}),O})();function zt(O,S){return O?`with name: '${S}'`:`at index: ${S}`}const mn=!1,vn="VALID",dr="INVALID",Ae="PENDING",Ee="DISABLED";function $e(O){return(ke(O)?O.validators:O)||null}function at(O,S){return(ke(S)?S.asyncValidators:O)||null}function ke(O){return null!=O&&!Array.isArray(O)&&"object"==typeof O}function Ne(O,S,x){const q=O.controls;if(!(S?Object.keys(q):q).length)throw new y.vHH(1e3,mn?function St(O){return`\n    There are no form controls registered with this ${O?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(S):"");if(!q[x])throw new y.vHH(1001,mn?function nn(O,S){return`Cannot find form control ${zt(O,S)}`}(S,x):"")}function ge(O,S,x){O._forEachChild((q,et)=>{if(void 0===x[et])throw new y.vHH(1002,mn?function cn(O,S){return`Must supply a value for form control ${zt(O,S)}`}(S,et):"")})}class st{constructor(S,x){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(S),this._assignAsyncValidators(x)}get validator(){return this._composedValidatorFn}set validator(S){this._rawValidators=this._composedValidatorFn=S}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(S){this._rawAsyncValidators=this._composedAsyncValidatorFn=S}get parent(){return this._parent}get valid(){return this.status===vn}get invalid(){return this.status===dr}get pending(){return this.status==Ae}get disabled(){return this.status===Ee}get enabled(){return this.status!==Ee}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(S){this._assignValidators(S)}setAsyncValidators(S){this._assignAsyncValidators(S)}addValidators(S){this.setValidators(nr(S,this._rawValidators))}addAsyncValidators(S){this.setAsyncValidators(nr(S,this._rawAsyncValidators))}removeValidators(S){this.setValidators(Wn(S,this._rawValidators))}removeAsyncValidators(S){this.setAsyncValidators(Wn(S,this._rawAsyncValidators))}hasValidator(S){return Rn(this._rawValidators,S)}hasAsyncValidator(S){return Rn(this._rawAsyncValidators,S)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(S={}){this.touched=!0,this._parent&&!S.onlySelf&&this._parent.markAsTouched(S)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(S=>S.markAllAsTouched())}markAsUntouched(S={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(x=>{x.markAsUntouched({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}markAsDirty(S={}){this.pristine=!1,this._parent&&!S.onlySelf&&this._parent.markAsDirty(S)}markAsPristine(S={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(x=>{x.markAsPristine({onlySelf:!0})}),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}markAsPending(S={}){this.status=Ae,!1!==S.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!S.onlySelf&&this._parent.markAsPending(S)}disable(S={}){const x=this._parentMarkedDirty(S.onlySelf);this.status=Ee,this.errors=null,this._forEachChild(q=>{q.disable({...S,onlySelf:!0})}),this._updateValue(),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...S,skipPristineCheck:x}),this._onDisabledChange.forEach(q=>q(!0))}enable(S={}){const x=this._parentMarkedDirty(S.onlySelf);this.status=vn,this._forEachChild(q=>{q.enable({...S,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent}),this._updateAncestors({...S,skipPristineCheck:x}),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(S){this._parent&&!S.onlySelf&&(this._parent.updateValueAndValidity(S),S.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(S){this._parent=S}getRawValue(){return this.value}updateValueAndValidity(S={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vn||this.status===Ae)&&this._runAsyncValidator(S.emitEvent)),!1!==S.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!S.onlySelf&&this._parent.updateValueAndValidity(S)}_updateTreeValidity(S={emitEvent:!0}){this._forEachChild(x=>x._updateTreeValidity(S)),this.updateValueAndValidity({onlySelf:!0,emitEvent:S.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ee:vn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(S){if(this.asyncValidator){this.status=Ae,this._hasOwnPendingAsyncValidator=!0;const x=gt(this.asyncValidator(this));this._asyncValidationSubscription=x.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:S})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(S,x={}){this.errors=S,this._updateControlsErrors(!1!==x.emitEvent)}get(S){let x=S;return null==x||(Array.isArray(x)||(x=x.split(".")),0===x.length)?null:x.reduce((q,et)=>q&&q._find(et),this)}getError(S,x){const q=x?this.get(x):this;return q&&q.errors?q.errors[S]:null}hasError(S,x){return!!this.getError(S,x)}get root(){let S=this;for(;S._parent;)S=S._parent;return S}_updateControlsErrors(S){this.status=this._calculateStatus(),S&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(S)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?Ee:this.errors?dr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ae)?Ae:this._anyControlsHaveStatus(dr)?dr:vn}_anyControlsHaveStatus(S){return this._anyControls(x=>x.status===S)}_anyControlsDirty(){return this._anyControls(S=>S.dirty)}_anyControlsTouched(){return this._anyControls(S=>S.touched)}_updatePristine(S={}){this.pristine=!this._anyControlsDirty(),this._parent&&!S.onlySelf&&this._parent._updatePristine(S)}_updateTouched(S={}){this.touched=this._anyControlsTouched(),this._parent&&!S.onlySelf&&this._parent._updateTouched(S)}_registerOnCollectionChange(S){this._onCollectionChange=S}_setUpdateStrategy(S){ke(S)&&null!=S.updateOn&&(this._updateOn=S.updateOn)}_parentMarkedDirty(S){return!S&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(S){return null}_assignValidators(S){this._rawValidators=Array.isArray(S)?S.slice():S,this._composedValidatorFn=function Ct(O){return Array.isArray(O)?It(O):O||null}(this._rawValidators)}_assignAsyncValidators(S){this._rawAsyncValidators=Array.isArray(S)?S.slice():S,this._composedAsyncValidatorFn=function Xt(O){return Array.isArray(O)?Ge(O):O||null}(this._rawAsyncValidators)}}class Dt extends st{constructor(S,x,q){super($e(x),at(q,x)),this.controls=S,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(S,x){return this.controls[S]?this.controls[S]:(this.controls[S]=x,x.setParent(this),x._registerOnCollectionChange(this._onCollectionChange),x)}addControl(S,x,q={}){this.registerControl(S,x),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(S,x={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}setControl(S,x,q={}){this.controls[S]&&this.controls[S]._registerOnCollectionChange(()=>{}),delete this.controls[S],x&&this.registerControl(S,x),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(S){return this.controls.hasOwnProperty(S)&&this.controls[S].enabled}setValue(S,x={}){ge(this,!0,S),Object.keys(S).forEach(q=>{Ne(this,!0,q),this.controls[q].setValue(S[q],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(S,x={}){null!=S&&(Object.keys(S).forEach(q=>{const et=this.controls[q];et&&et.patchValue(S[q],{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(S={},x={}){this._forEachChild((q,et)=>{q.reset(S[et],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this._reduceChildren({},(S,x,q)=>(S[q]=x.getRawValue(),S))}_syncPendingControls(){let S=this._reduceChildren(!1,(x,q)=>!!q._syncPendingControls()||x);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){Object.keys(this.controls).forEach(x=>{const q=this.controls[x];q&&S(q,x)})}_setUpControls(){this._forEachChild(S=>{S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(S){for(const[x,q]of Object.entries(this.controls))if(this.contains(x)&&S(q))return!0;return!1}_reduceValue(){return this._reduceChildren({},(x,q,et)=>((q.enabled||this.disabled)&&(x[et]=q.value),x))}_reduceChildren(S,x){let q=S;return this._forEachChild((et,kt)=>{q=x(q,et,kt)}),q}_allControlsDisabled(){for(const S of Object.keys(this.controls))if(this.controls[S].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(S){return this.controls.hasOwnProperty(S)?this.controls[S]:null}}class ur extends Dt{}const Br=new y.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ti}),Ti="always";function yi(O,S){return[...S.path,O]}function Hr(O,S,x=Ti){var q,et;di(O,S),S.valueAccessor.writeValue(O.value),(O.disabled||"always"===x)&&(null===(q=(et=S.valueAccessor).setDisabledState)||void 0===q||q.call(et,O.disabled)),function hr(O,S){S.valueAccessor.registerOnChange(x=>{O._pendingValue=x,O._pendingChange=!0,O._pendingDirty=!0,"change"===O.updateOn&&Vn(O,S)})}(O,S),function Sr(O,S){const x=(q,et)=>{S.valueAccessor.writeValue(q),et&&S.viewToModelUpdate(q)};O.registerOnChange(x),S._registerOnDestroy(()=>{O._unregisterOnChange(x)})}(O,S),function Pn(O,S){S.valueAccessor.registerOnTouched(()=>{O._pendingTouched=!0,"blur"===O.updateOn&&O._pendingChange&&Vn(O,S),"submit"!==O.updateOn&&O.markAsTouched()})}(O,S),function $i(O,S){if(S.valueAccessor.setDisabledState){const x=q=>{S.valueAccessor.setDisabledState(q)};O.registerOnDisabledChange(x),S._registerOnDestroy(()=>{O._unregisterOnDisabledChange(x)})}}(O,S)}function Si(O,S,x=!0){const q=()=>{};S.valueAccessor&&(S.valueAccessor.registerOnChange(q),S.valueAccessor.registerOnTouched(q)),zn(O,S),O&&(S._invokeOnDestroyCallbacks(),O._registerOnCollectionChange(()=>{}))}function rr(O,S){O.forEach(x=>{x.registerOnValidatorChange&&x.registerOnValidatorChange(S)})}function di(O,S){const x=tn(O);null!==S.validator?O.setValidators(Jt(x,S.validator)):"function"==typeof x&&O.setValidators([x]);const q=Y(O);null!==S.asyncValidator?O.setAsyncValidators(Jt(q,S.asyncValidator)):"function"==typeof q&&O.setAsyncValidators([q]);const et=()=>O.updateValueAndValidity();rr(S._rawValidators,et),rr(S._rawAsyncValidators,et)}function zn(O,S){let x=!1;if(null!==O){if(null!==S.validator){const et=tn(O);if(Array.isArray(et)&&et.length>0){const kt=et.filter(Xn=>Xn!==S.validator);kt.length!==et.length&&(x=!0,O.setValidators(kt))}}if(null!==S.asyncValidator){const et=Y(O);if(Array.isArray(et)&&et.length>0){const kt=et.filter(Xn=>Xn!==S.asyncValidator);kt.length!==et.length&&(x=!0,O.setAsyncValidators(kt))}}}const q=()=>{};return rr(S._rawValidators,q),rr(S._rawAsyncValidators,q),x}function Vn(O,S){O._pendingDirty&&O.markAsDirty(),O.setValue(O._pendingValue,{emitModelToViewChange:!1}),S.viewToModelUpdate(O._pendingValue),O._pendingChange=!1}function zr(O,S){if(!O.hasOwnProperty("model"))return!1;const x=O.model;return!!x.isFirstChange()||!Object.is(S,x.currentValue)}function ri(O,S){if(!S)return null;let x,q,et;return Array.isArray(S),S.forEach(kt=>{kt.constructor===Ye?x=kt:function _i(O){return Object.getPrototypeOf(O.constructor)===Pe}(kt)?q=kt:et=kt}),et||q||x||null}function Fe(O,S){const x=O.indexOf(S);x>-1&&O.splice(x,1)}function yt(O){return"object"==typeof O&&null!==O&&2===Object.keys(O).length&&"value"in O&&"disabled"in O}const bt=class extends st{constructor(S=null,x,q){super($e(x),at(q,x)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(S),this._setUpdateStrategy(x),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ke(x)&&(x.nonNullable||x.initialValueIsDefault)&&(this.defaultValue=yt(S)?S.value:S)}setValue(S,x={}){this.value=this._pendingValue=S,this._onChange.length&&!1!==x.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==x.emitViewToModelChange)),this.updateValueAndValidity(x)}patchValue(S,x={}){this.setValue(S,x)}reset(S=this.defaultValue,x={}){this._applyFormState(S),this.markAsPristine(x),this.markAsUntouched(x),this.setValue(this.value,x),this._pendingChange=!1}_updateValue(){}_anyControls(S){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(S){this._onChange.push(S)}_unregisterOnChange(S){Fe(this._onChange,S)}registerOnDisabledChange(S){this._onDisabledChange.push(S)}_unregisterOnDisabledChange(S){Fe(this._onDisabledChange,S)}_forEachChild(S){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(S){yt(S)?(this.value=this._pendingValue=S.value,S.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=S}},Oi={provide:_r,useExisting:(0,y.Gpc)(()=>li)},Ui=(()=>Promise.resolve())();let li=(()=>{class O extends _r{constructor(x,q,et,kt,Xn,Pr){super(),this._changeDetectorRef=Xn,this.callSetDisabledState=Pr,this.control=new bt,this._registered=!1,this.update=new y.vpe,this._parent=x,this._setValidators(q),this._setAsyncValidators(et),this.valueAccessor=ri(0,kt)}ngOnChanges(x){if(this._checkForErrors(),!this._registered||"name"in x){if(this._registered&&(this._checkName(),this.formDirective)){const q=x.name.previousValue;this.formDirective.removeControl({name:q,path:this._getPath(q)})}this._setUpControl()}"isDisabled"in x&&this._updateDisabled(x),zr(x,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Hr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(x){Ui.then(()=>{var q;this.control.setValue(x,{emitViewToModelChange:!1}),null===(q=this._changeDetectorRef)||void 0===q||q.markForCheck()})}_updateDisabled(x){const q=x.isDisabled.currentValue,et=0!==q&&(0,y.D6c)(q);Ui.then(()=>{var kt;et&&!this.control.disabled?this.control.disable():!et&&this.control.disabled&&this.control.enable(),null===(kt=this._changeDetectorRef)||void 0===kt||kt.markForCheck()})}_getPath(x){return this._parent?yi(x,this._parent):[x]}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(Vt,9),y.Y36(Te,10),y.Y36(re,10),y.Y36(Ke,10),y.Y36(y.sBO,8),y.Y36(Br,8))},O.\u0275dir=y.lG2({type:O,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([Oi]),y.qOj,y.TTD]}),O})(),Yi=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275dir=y.lG2({type:O,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),O})(),ki=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=y.oAB({type:O}),O.\u0275inj=y.cJS({}),O})();const go=new y.OlP("NgModelWithFormControlWarning"),ps={provide:Vt,useExisting:(0,y.Gpc)(()=>As)};let As=(()=>{class O extends Vt{constructor(x,q,et){super(),this.callSetDisabledState=et,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new y.vpe,this._setValidators(x),this._setAsyncValidators(q)}ngOnChanges(x){this._checkFormPresent(),x.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(x){const q=this.form.get(x.path);return Hr(q,x,this.callSetDisabledState),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(x),q}getControl(x){return this.form.get(x.path)}removeControl(x){Si(x.control||null,x,!1),function X(O,S){const x=O.indexOf(S);x>-1&&O.splice(x,1)}(this.directives,x)}addFormGroup(x){this._setUpFormContainer(x)}removeFormGroup(x){this._cleanUpFormContainer(x)}getFormGroup(x){return this.form.get(x.path)}addFormArray(x){this._setUpFormContainer(x)}removeFormArray(x){this._cleanUpFormContainer(x)}getFormArray(x){return this.form.get(x.path)}updateModel(x,q){this.form.get(x.path).setValue(q)}onSubmit(x){var q;return this.submitted=!0,function br(O,S){O._syncPendingControls(),S.forEach(x=>{const q=x.control;"submit"===q.updateOn&&q._pendingChange&&(x.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(x),"dialog"===(null==x||null===(q=x.target)||void 0===q?void 0:q.method)}onReset(){this.resetForm()}resetForm(x){this.form.reset(x),this.submitted=!1}_updateDomValue(){this.directives.forEach(x=>{const q=x.control,et=this.form.get(x.path);q!==et&&(Si(q||null,x),(O=>O instanceof bt)(et)&&(Hr(et,x,this.callSetDisabledState),x.control=et))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(x){const q=this.form.get(x.path);(function vr(O,S){di(O,S)})(q,x),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(x){if(this.form){const q=this.form.get(x.path);q&&function qi(O,S){return zn(O,S)}(q,x)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){di(this.form,this),this._oldForm&&zn(this._oldForm,this)}_checkFormPresent(){}}return O.\u0275fac=function(x){return new(x||O)(y.Y36(Te,10),y.Y36(re,10),y.Y36(Br,8))},O.\u0275dir=y.lG2({type:O,selectors:[["","formGroup",""]],hostBindings:function(x,q){1&x&&y.NdJ("submit",function(kt){return q.onSubmit(kt)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([ps]),y.qOj,y.TTD]}),O})();const Vi={provide:_r,useExisting:(0,y.Gpc)(()=>Do)};let Do=(()=>{class O extends _r{set isDisabled(x){}constructor(x,q,et,kt,Xn){super(),this._ngModelWarningConfig=Xn,this._added=!1,this.update=new y.vpe,this._ngModelWarningSent=!1,this._parent=x,this._setValidators(q),this._setAsyncValidators(et),this.valueAccessor=ri(0,kt)}ngOnChanges(x){this._added||this._setUpControl(),zr(x,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(x){this.viewModel=x,this.update.emit(x)}get path(){return yi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return O._ngModelWarningSentOnce=!1,O.\u0275fac=function(x){return new(x||O)(y.Y36(Vt,13),y.Y36(Te,10),y.Y36(re,10),y.Y36(Ke,10),y.Y36(go,8))},O.\u0275dir=y.lG2({type:O,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[y._Bn([Vi]),y.qOj,y.TTD]}),O})(),Rs=(()=>{class O{}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=y.oAB({type:O}),O.\u0275inj=y.cJS({imports:[ki]}),O})();class uo extends st{constructor(S,x,q){super($e(x),at(q,x)),this.controls=S,this._initObservables(),this._setUpdateStrategy(x),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(S){return this.controls[this._adjustIndex(S)]}push(S,x={}){this.controls.push(S),this._registerControl(S),this.updateValueAndValidity({emitEvent:x.emitEvent}),this._onCollectionChange()}insert(S,x,q={}){this.controls.splice(S,0,x),this._registerControl(x),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(S,x={}){let q=this._adjustIndex(S);q<0&&(q=0),this.controls[q]&&this.controls[q]._registerOnCollectionChange(()=>{}),this.controls.splice(q,1),this.updateValueAndValidity({emitEvent:x.emitEvent})}setControl(S,x,q={}){let et=this._adjustIndex(S);et<0&&(et=0),this.controls[et]&&this.controls[et]._registerOnCollectionChange(()=>{}),this.controls.splice(et,1),x&&(this.controls.splice(et,0,x),this._registerControl(x)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(S,x={}){ge(this,!1,S),S.forEach((q,et)=>{Ne(this,!1,et),this.at(et).setValue(q,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x)}patchValue(S,x={}){null!=S&&(S.forEach((q,et)=>{this.at(et)&&this.at(et).patchValue(q,{onlySelf:!0,emitEvent:x.emitEvent})}),this.updateValueAndValidity(x))}reset(S=[],x={}){this._forEachChild((q,et)=>{q.reset(S[et],{onlySelf:!0,emitEvent:x.emitEvent})}),this._updatePristine(x),this._updateTouched(x),this.updateValueAndValidity(x)}getRawValue(){return this.controls.map(S=>S.getRawValue())}clear(S={}){this.controls.length<1||(this._forEachChild(x=>x._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:S.emitEvent}))}_adjustIndex(S){return S<0?S+this.length:S}_syncPendingControls(){let S=this.controls.reduce((x,q)=>!!q._syncPendingControls()||x,!1);return S&&this.updateValueAndValidity({onlySelf:!0}),S}_forEachChild(S){this.controls.forEach((x,q)=>{S(x,q)})}_updateValue(){this.value=this.controls.filter(S=>S.enabled||this.disabled).map(S=>S.value)}_anyControls(S){return this.controls.some(x=>x.enabled&&S(x))}_setUpControls(){this._forEachChild(S=>this._registerControl(S))}_allControlsDisabled(){for(const S of this.controls)if(S.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(S){S.setParent(this),S._registerOnCollectionChange(this._onCollectionChange)}_find(S){var x;return null!==(x=this.at(S))&&void 0!==x?x:null}}function ta(O){return!!O&&(void 0!==O.asyncValidators||void 0!==O.validators||void 0!==O.updateOn)}let xo=(()=>{class O{constructor(){this.useNonNullable=!1}get nonNullable(){const x=new O;return x.useNonNullable=!0,x}group(x,q=null){const et=this._reduceControls(x);let kt={};return ta(q)?kt=q:null!==q&&(kt.validators=q.validator,kt.asyncValidators=q.asyncValidator),new Dt(et,kt)}record(x,q=null){const et=this._reduceControls(x);return new ur(et,q)}control(x,q,et){let kt={};return this.useNonNullable?(ta(q)?kt=q:(kt.validators=q,kt.asyncValidators=et),new bt(x,{...kt,nonNullable:!0})):new bt(x,q,et)}array(x,q,et){const kt=x.map(Xn=>this._createControl(Xn));return new uo(kt,q,et)}_reduceControls(x){const q={};return Object.keys(x).forEach(et=>{q[et]=this._createControl(x[et])}),q}_createControl(x){return x instanceof bt||x instanceof st?x:Array.isArray(x)?this.control(x[0],x.length>1?x[1]:null,x.length>2?x[2]:null):this.control(x)}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),U=(()=>{class O{static withConfig(x){var q;return{ngModule:O,providers:[{provide:Br,useValue:null!==(q=x.callSetDisabledState)&&void 0!==q?q:Ti}]}}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=y.oAB({type:O}),O.\u0275inj=y.cJS({imports:[Rs]}),O})(),se=(()=>{class O{static withConfig(x){var q,et;return{ngModule:O,providers:[{provide:go,useValue:null!==(q=x.warnOnNgModelWithFormControl)&&void 0!==q?q:"always"},{provide:Br,useValue:null!==(et=x.callSetDisabledState)&&void 0!==et?et:Ti}]}}}return O.\u0275fac=function(x){return new(x||O)},O.\u0275mod=y.oAB({type:O}),O.\u0275inj=y.cJS({imports:[Rs]}),O})()},1481:(Wt,nt,B)=>{"use strict";B.d(nt,{Dx:()=>pn,b2:()=>_r,q6:()=>nr});var y=B(6895),f=B(4650);class W extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class oe extends W{static makeCurrent(){(0,y.HT)(new oe)}onAndCancel(Ne,ge,st){return Ne.addEventListener(ge,st,!1),()=>{Ne.removeEventListener(ge,st,!1)}}dispatchEvent(Ne,ge){Ne.dispatchEvent(ge)}remove(Ne){Ne.parentNode&&Ne.parentNode.removeChild(Ne)}createElement(Ne,ge){return(ge=ge||this.getDefaultDocument()).createElement(Ne)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ne){return Ne.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ne){return Ne instanceof DocumentFragment}getGlobalEventTarget(Ne,ge){return"window"===ge?window:"document"===ge?Ne:"body"===ge?Ne.body:null}getBaseHref(Ne){const ge=function Ce(){return be=be||document.querySelector("base"),be?be.getAttribute("href"):null}();return null==ge?null:function Me(ke){he=he||document.createElement("a"),he.setAttribute("href",ke);const Ne=he.pathname;return"/"===Ne.charAt(0)?Ne:`/${Ne}`}(ge)}resetBaseElement(){be=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ne){return(0,y.Mx)(document.cookie,Ne)}}let he,be=null;const we=new f.OlP("TRANSITION_ID"),ae=[{provide:f.ip1,useFactory:function fe(ke,Ne,ge){return()=>{ge.get(f.CZH).donePromise.then(()=>{const st=(0,y.q)(),Dt=Ne.querySelectorAll(`style[ng-transition="${ke}"]`);for(let Mt=0;Mt<Dt.length;Mt++)st.remove(Dt[Mt])})}},deps:[we,y.K0,f.zs3],multi:!0}];let De=(()=>{class ke{build(){return new XMLHttpRequest}}return ke.\u0275fac=function(ge){return new(ge||ke)},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const Pe=new f.OlP("EventManagerPlugins");let Ke=(()=>{class ke{constructor(ge,st){this._zone=st,this._eventNameToPlugin=new Map,ge.forEach(Dt=>{Dt.manager=this}),this._plugins=ge.slice().reverse()}addEventListener(ge,st,Dt){return this._findPluginFor(st).addEventListener(ge,st,Dt)}addGlobalEventListener(ge,st,Dt){return this._findPluginFor(st).addGlobalEventListener(ge,st,Dt)}getZone(){return this._zone}_findPluginFor(ge){const st=this._eventNameToPlugin.get(ge);if(st)return st;const Dt=this._plugins;for(let Mt=0;Mt<Dt.length;Mt++){const gn=Dt[Mt];if(gn.supports(ge))return this._eventNameToPlugin.set(ge,gn),gn}throw new Error(`No event manager plugin found for event ${ge}`)}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(Pe),f.LFG(f.R0b))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();class pt{constructor(Ne){this._doc=Ne}addGlobalEventListener(Ne,ge,st){const Dt=(0,y.q)().getGlobalEventTarget(this._doc,Ne);if(!Dt)throw new Error(`Unsupported event target ${Dt} for event ${ge}`);return this.addEventListener(Dt,ge,st)}}let _e=(()=>{class ke{constructor(){this.usageCount=new Map}addStyles(ge){for(const st of ge)1===this.changeUsageCount(st,1)&&this.onStyleAdded(st)}removeStyles(ge){for(const st of ge)0===this.changeUsageCount(st,-1)&&this.onStyleRemoved(st)}onStyleRemoved(ge){}onStyleAdded(ge){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(ge,st){var Dt;const Mt=this.usageCount;let gn=null!==(Dt=Mt.get(ge))&&void 0!==Dt?Dt:0;return gn+=st,gn>0?Mt.set(ge,gn):Mt.delete(ge),gn}ngOnDestroy(){for(const ge of this.getAllStyles())this.onStyleRemoved(ge);this.usageCount.clear()}}return ke.\u0275fac=function(ge){return new(ge||ke)},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),ye=(()=>{class ke extends _e{constructor(ge){super(),this.doc=ge,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(ge){for(const st of this.hostNodes)this.addStyleToHost(st,ge)}onStyleRemoved(ge){const st=this.styleRef,Dt=st.get(ge);null==Dt||Dt.forEach(Mt=>Mt.remove()),st.delete(ge)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(ge){this.hostNodes.add(ge);for(const st of this.getAllStyles())this.addStyleToHost(ge,st)}removeHost(ge){this.hostNodes.delete(ge)}addStyleToHost(ge,st){const Dt=this.doc.createElement("style");Dt.textContent=st,ge.appendChild(Dt);const Mt=this.styleRef.get(st);Mt?Mt.push(Dt):this.styleRef.set(st,[Dt])}resetHostNodes(){const ge=this.hostNodes;ge.clear(),ge.add(this.doc.head)}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(y.K0))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const Oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g,re=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function He(ke,Ne){return Ne.flat(100).map(ge=>ge.replace(rt,ke))}function ze(ke){return Ne=>{if("__ngUnwrap__"===Ne)return ke;!1===ke(Ne)&&(Ne.preventDefault(),Ne.returnValue=!1)}}let ut=(()=>{class ke{constructor(ge,st,Dt,Mt){this.eventManager=ge,this.sharedStylesHost=st,this.appId=Dt,this.removeStylesOnCompDestory=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(ge)}createRenderer(ge,st){if(!ge||!st)return this.defaultRenderer;const Dt=this.getOrCreateRenderer(ge,st);return Dt instanceof Qe?Dt.applyToHost(ge):Dt instanceof Be&&Dt.applyStyles(),Dt}getOrCreateRenderer(ge,st){const Dt=this.rendererByCompId;let Mt=Dt.get(st.id);if(!Mt){const gn=this.eventManager,ur=this.sharedStylesHost,Dr=this.removeStylesOnCompDestory;switch(st.encapsulation){case f.ifc.Emulated:Mt=new Qe(gn,ur,st,this.appId,Dr);break;case f.ifc.ShadowDom:return new Se(gn,ur,ge,st);default:Mt=new Be(gn,ur,st,Dr)}Mt.onDestroy=()=>Dt.delete(st.id),Dt.set(st.id,Mt)}return Mt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(Ke),f.LFG(ye),f.LFG(f.AFp),f.LFG(re))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();class Ze{constructor(Ne){this.eventManager=Ne,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ne,ge){return ge?document.createElementNS(Oe[ge]||ge,Ne):document.createElement(Ne)}createComment(Ne){return document.createComment(Ne)}createText(Ne){return document.createTextNode(Ne)}appendChild(Ne,ge){(Re(Ne)?Ne.content:Ne).appendChild(ge)}insertBefore(Ne,ge,st){Ne&&(Re(Ne)?Ne.content:Ne).insertBefore(ge,st)}removeChild(Ne,ge){Ne&&Ne.removeChild(ge)}selectRootElement(Ne,ge){let st="string"==typeof Ne?document.querySelector(Ne):Ne;if(!st)throw new Error(`The selector "${Ne}" did not match any elements`);return ge||(st.textContent=""),st}parentNode(Ne){return Ne.parentNode}nextSibling(Ne){return Ne.nextSibling}setAttribute(Ne,ge,st,Dt){if(Dt){ge=Dt+":"+ge;const Mt=Oe[Dt];Mt?Ne.setAttributeNS(Mt,ge,st):Ne.setAttribute(ge,st)}else Ne.setAttribute(ge,st)}removeAttribute(Ne,ge,st){if(st){const Dt=Oe[st];Dt?Ne.removeAttributeNS(Dt,ge):Ne.removeAttribute(`${st}:${ge}`)}else Ne.removeAttribute(ge)}addClass(Ne,ge){Ne.classList.add(ge)}removeClass(Ne,ge){Ne.classList.remove(ge)}setStyle(Ne,ge,st,Dt){Dt&(f.JOm.DashCase|f.JOm.Important)?Ne.style.setProperty(ge,st,Dt&f.JOm.Important?"important":""):Ne.style[ge]=st}removeStyle(Ne,ge,st){st&f.JOm.DashCase?Ne.style.removeProperty(ge):Ne.style[ge]=""}setProperty(Ne,ge,st){Ne[ge]=st}setValue(Ne,ge){Ne.nodeValue=ge}listen(Ne,ge,st){return"string"==typeof Ne?this.eventManager.addGlobalEventListener(Ne,ge,ze(st)):this.eventManager.addEventListener(Ne,ge,ze(st))}}function Re(ke){return"TEMPLATE"===ke.tagName&&void 0!==ke.content}class Se extends Ze{constructor(Ne,ge,st,Dt){super(Ne),this.sharedStylesHost=ge,this.hostEl=st,this.shadowRoot=st.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Mt=He(Dt.id,Dt.styles);for(const gn of Mt){const ur=document.createElement("style");ur.textContent=gn,this.shadowRoot.appendChild(ur)}}nodeOrShadowRoot(Ne){return Ne===this.hostEl?this.shadowRoot:Ne}appendChild(Ne,ge){return super.appendChild(this.nodeOrShadowRoot(Ne),ge)}insertBefore(Ne,ge,st){return super.insertBefore(this.nodeOrShadowRoot(Ne),ge,st)}removeChild(Ne,ge){return super.removeChild(this.nodeOrShadowRoot(Ne),ge)}parentNode(Ne){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ne)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Be extends Ze{constructor(Ne,ge,st,Dt,Mt=st.id){super(Ne),this.sharedStylesHost=ge,this.removeStylesOnCompDestory=Dt,this.rendererUsageCount=0,this.styles=He(Mt,st.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var Ne;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(Ne=this.onDestroy)||void 0===Ne||Ne.call(this))}}class Qe extends Be{constructor(Ne,ge,st,Dt,Mt){const gn=Dt+"-"+st.id;super(Ne,ge,st,Mt,gn),this.contentAttr=function xe(ke){return"_ngcontent-%COMP%".replace(rt,ke)}(gn),this.hostAttr=function Ie(ke){return"_nghost-%COMP%".replace(rt,ke)}(gn)}applyToHost(Ne){this.applyStyles(),this.setAttribute(Ne,this.hostAttr,"")}createElement(Ne,ge){const st=super.createElement(Ne,ge);return super.setAttribute(st,this.contentAttr,""),st}}let gt=(()=>{class ke extends pt{constructor(ge){super(ge)}supports(ge){return!0}addEventListener(ge,st,Dt){return ge.addEventListener(st,Dt,!1),()=>this.removeEventListener(ge,st,Dt)}removeEventListener(ge,st,Dt){return ge.removeEventListener(st,Dt)}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(y.K0))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const Zt=["alt","control","meta","shift"],Ft={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_n={alt:ke=>ke.altKey,control:ke=>ke.ctrlKey,meta:ke=>ke.metaKey,shift:ke=>ke.shiftKey};let it=(()=>{class ke extends pt{constructor(ge){super(ge)}supports(ge){return null!=ke.parseEventName(ge)}addEventListener(ge,st,Dt){const Mt=ke.parseEventName(st),gn=ke.eventCallback(Mt.fullKey,Dt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(ge,Mt.domEventName,gn))}static parseEventName(ge){const st=ge.toLowerCase().split("."),Dt=st.shift();if(0===st.length||"keydown"!==Dt&&"keyup"!==Dt)return null;const Mt=ke._normalizeKey(st.pop());let gn="",ur=st.indexOf("code");if(ur>-1&&(st.splice(ur,1),gn="code."),Zt.forEach(Br=>{const Ti=st.indexOf(Br);Ti>-1&&(st.splice(Ti,1),gn+=Br+".")}),gn+=Mt,0!=st.length||0===Mt.length)return null;const Dr={};return Dr.domEventName=Dt,Dr.fullKey=gn,Dr}static matchEventFullKeyCode(ge,st){let Dt=Ft[ge.key]||ge.key,Mt="";return st.indexOf("code.")>-1&&(Dt=ge.code,Mt="code."),!(null==Dt||!Dt)&&(Dt=Dt.toLowerCase()," "===Dt?Dt="space":"."===Dt&&(Dt="dot"),Zt.forEach(gn=>{gn!==Dt&&(0,_n[gn])(ge)&&(Mt+=gn+".")}),Mt+=Dt,Mt===st)}static eventCallback(ge,st,Dt){return Mt=>{ke.matchEventFullKeyCode(Mt,ge)&&Dt.runGuarded(()=>st(Mt))}}static _normalizeKey(ge){return"esc"===ge?"escape":ge}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(y.K0))},ke.\u0275prov=f.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const nr=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:y.bD},{provide:f.g9A,useValue:function tn(){oe.makeCurrent()},multi:!0},{provide:y.K0,useFactory:function on(){return(0,f.RDi)(document),document},deps:[]}]),Wn=new f.OlP(""),Qn=[{provide:f.rWj,useClass:class ue{addToWindow(Ne){f.dqk.getAngularTestability=(st,Dt=!0)=>{const Mt=Ne.findTestabilityInTree(st,Dt);if(null==Mt)throw new Error("Could not find testability for element.");return Mt},f.dqk.getAllAngularTestabilities=()=>Ne.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>Ne.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(st=>{const Dt=f.dqk.getAllAngularTestabilities();let Mt=Dt.length,gn=!1;const ur=function(Dr){gn=gn||Dr,Mt--,0==Mt&&st(gn)};Dt.forEach(function(Dr){Dr.whenStable(ur)})})}findTestabilityInTree(Ne,ge,st){if(null==ge)return null;const Dt=Ne.getTestability(ge);return null!=Dt?Dt:st?(0,y.q)().isShadowRoot(ge)?this.findTestabilityInTree(Ne,ge.host,!0):this.findTestabilityInTree(Ne,ge.parentElement,!0):null}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Vt=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Y(){return new f.qLn},deps:[]},{provide:Pe,useClass:gt,multi:!0,deps:[y.K0,f.R0b,f.Lbi]},{provide:Pe,useClass:it,multi:!0,deps:[y.K0]},{provide:ut,useClass:ut,deps:[Ke,ye,f.AFp,re]},{provide:f.FYo,useExisting:ut},{provide:_e,useExisting:ye},{provide:ye,useClass:ye,deps:[y.K0]},{provide:Ke,useClass:Ke,deps:[Pe,f.R0b]},{provide:y.JF,useClass:De,deps:[]},[]];let _r=(()=>{class ke{constructor(ge){}static withServerTransition(ge){return{ngModule:ke,providers:[{provide:f.AFp,useValue:ge.appId},{provide:we,useExisting:f.AFp},ae]}}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(Wn,12))},ke.\u0275mod=f.oAB({type:ke}),ke.\u0275inj=f.cJS({providers:[...Vt,...Qn],imports:[y.ez,f.hGG]}),ke})(),pn=(()=>{class ke{constructor(ge){this._doc=ge}getTitle(){return this._doc.title}setTitle(ge){this._doc.title=ge||""}}return ke.\u0275fac=function(ge){return new(ge||ke)(f.LFG(y.K0))},ke.\u0275prov=f.Yz7({token:ke,factory:function(ge){let st=null;return st=ge?new ge:function mr(){return new pn((0,f.LFG)(y.K0))}(),st},providedIn:"root"}),ke})();typeof window<"u"&&window},2435:(Wt,nt,B)=>{"use strict";B.d(nt,{gz:()=>Co,y6:()=>Qi,OD:()=>bt,eC:()=>Y,wm:()=>ws,wN:()=>Mo,F0:()=>wi,rH:()=>_o,Bz:()=>Ho,Hx:()=>cn});var y=B(4650),f=B(8996),W=B(9646),oe=B(1135),be=B(6805),Ce=B(9751),he=B(4742),Me=B(4671),we=B(3268),fe=B(7669),ae=B(1810),ue=B(5403),De=B(9672);function Pe(...C){const T=(0,fe.yG)(C),_=(0,fe.jO)(C),{args:M,keys:L}=(0,he.D)(C);if(0===M.length)return(0,f.D)([],T);const K=new Ce.y(function Ke(C,T,_=Me.y){return M=>{pt(T,()=>{const{length:L}=C,K=new Array(L);let ne=L,qe=L;for(let _t=0;_t<L;_t++)pt(T,()=>{const Ht=(0,f.D)(C[_t],T);let dn=!1;Ht.subscribe((0,ue.x)(M,rn=>{K[_t]=rn,dn||(dn=!0,qe--),qe||M.next(_(K.slice()))},()=>{--ne||M.complete()}))},M)},M)}}(M,T,L?ne=>(0,ae.n)(L,ne):Me.y));return _?K.pipe((0,we.Z)(_)):K}function pt(C,T,_){C?(0,De.f)(_,C,T):T()}var _e=B(7272),ye=B(8421);function Oe(C){return new Ce.y(T=>{(0,ye.Xf)(C()).subscribe(T)})}var rt=B(9635),Ye=B(576);function Xe(C,T){const _=(0,Ye.m)(C)?C:()=>C,M=L=>L.error(_());return new Ce.y(T?L=>T.schedule(M,0,L):M)}var Je=B(515),ht=B(727),Te=B(4482);function re(){return(0,Te.e)((C,T)=>{let _=null;C._refCount++;const M=(0,ue.x)(T,void 0,void 0,void 0,()=>{if(!C||C._refCount<=0||0<--C._refCount)return void(_=null);const L=C._connection,K=_;_=null,L&&(!K||L===K)&&L.unsubscribe(),T.unsubscribe()});C.subscribe(M),M.closed||(_=C.connect())})}class xe extends Ce.y{constructor(T,_){super(),this.source=T,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,Te.A)(T)&&(this.lift=T.lift)}_subscribe(T){return this.getSubject().subscribe(T)}getSubject(){const T=this._subject;return(!T||T.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:T}=this;this._subject=this._connection=null,null==T||T.unsubscribe()}connect(){let T=this._connection;if(!T){T=this._connection=new ht.w0;const _=this.getSubject();T.add(this.source.subscribe((0,ue.x)(_,void 0,()=>{this._teardown(),_.complete()},M=>{this._teardown(),_.error(M)},()=>this._teardown()))),T.closed&&(this._connection=null,T=ht.w0.EMPTY)}return T}refCount(){return re()(this)}}var Ie=B(7579),He=B(6895),ze=B(4004),ut=B(3900),Ze=B(5698),lt=B(8675),ot=B(9300),Re=B(5577),Se=B(590);function Be(C,T){return(0,Ye.m)(T)?(0,Re.z)(C,T,1):(0,Re.z)(C,1)}var Qe=B(8505);function gt(C){return(0,Te.e)((T,_)=>{let K,M=null,L=!1;M=T.subscribe((0,ue.x)(_,void 0,void 0,ne=>{K=(0,ye.Xf)(C(ne,gt(C)(T))),M?(M.unsubscribe(),M=null,K.subscribe(_)):L=!0})),L&&(M.unsubscribe(),M=null,K.subscribe(_))})}var Zt=B(5026);function Ft(C){return C<=0?()=>Je.E:(0,Te.e)((T,_)=>{let M=[];T.subscribe((0,ue.x)(_,L=>{M.push(L),C<M.length&&M.shift()},()=>{for(const L of M)_.next(L);_.complete()},void 0,()=>{M=null}))})}var _n=B(8068),it=B(6590);function de(C,T){const _=arguments.length>=2;return M=>M.pipe(C?(0,ot.h)((L,K)=>C(L,K,M)):Me.y,Ft(1),_?(0,it.d)(T):(0,_n.T)(()=>new be.K))}function Ge(C){return(0,Te.e)((T,_)=>{try{T.subscribe(_)}finally{_.add(C)}})}var Jt=B(8189),tn=B(1481);const Y="primary",on=Symbol("RouteTitle");class Rn{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const _=this.params[T];return Array.isArray(_)?_[0]:_}return null}getAll(T){if(this.has(T)){const _=this.params[T];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function nr(C){return new Rn(C)}function Wn(C,T,_){const M=_.path.split("/");if(M.length>C.length||"full"===_.pathMatch&&(T.hasChildren()||M.length<C.length))return null;const L={};for(let K=0;K<M.length;K++){const ne=M[K],qe=C[K];if(ne.startsWith(":"))L[ne.substring(1)]=qe;else if(ne!==qe.path)return null}return{consumed:C.slice(0,M.length),posParams:L}}function Vt(C,T){const _=C?Object.keys(C):void 0,M=T?Object.keys(T):void 0;if(!_||!M||_.length!=M.length)return!1;let L;for(let K=0;K<_.length;K++)if(L=_[K],!_r(C[L],T[L]))return!1;return!0}function _r(C,T){if(Array.isArray(C)&&Array.isArray(T)){if(C.length!==T.length)return!1;const _=[...C].sort(),M=[...T].sort();return _.every((L,K)=>M[K]===L)}return C===T}function ar(C){return Array.prototype.concat.apply([],C)}function Ir(C){return C.length>0?C[C.length-1]:null}function mr(C,T){for(const _ in C)C.hasOwnProperty(_)&&T(C[_],_)}function pn(C){return(0,y.CqO)(C)?C:(0,y.QGY)(C)?(0,f.D)(Promise.resolve(C)):(0,W.of)(C)}const Lt=!1,hn={exact:function Tr(C,T,_){if(!St(C.segments,T.segments)||!jr(C.segments,T.segments,_)||C.numberOfChildren!==T.numberOfChildren)return!1;for(const M in T.children)if(!C.children[M]||!Tr(C.children[M],T.children[M],_))return!1;return!0},subset:Di},Nt={exact:function An(C,T){return Vt(C,T)},subset:function Yr(C,T){return Object.keys(T).length<=Object.keys(C).length&&Object.keys(T).every(_=>_r(C[_],T[_]))},ignored:()=>!0};function lr(C,T,_){return hn[_.paths](C.root,T.root,_.matrixParams)&&Nt[_.queryParams](C.queryParams,T.queryParams)&&!("exact"===_.fragment&&C.fragment!==T.fragment)}function Di(C,T,_){return er(C,T,T.segments,_)}function er(C,T,_,M){if(C.segments.length>_.length){const L=C.segments.slice(0,_.length);return!(!St(L,_)||T.hasChildren()||!jr(L,_,M))}if(C.segments.length===_.length){if(!St(C.segments,_)||!jr(C.segments,_,M))return!1;for(const L in T.children)if(!C.children[L]||!Di(C.children[L],T.children[L],M))return!1;return!0}{const L=_.slice(0,C.segments.length),K=_.slice(C.segments.length);return!!(St(C.segments,L)&&jr(C.segments,L,M)&&C.children[Y])&&er(C.children[Y],T,K,M)}}function jr(C,T,_){return T.every((M,L)=>Nt[_](C[L].parameters,M.parameters))}class kn{constructor(T=new In([],{}),_={},M=null){this.root=T,this.queryParams=_,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nr(this.queryParams)),this._queryParamMap}toString(){return vn.serialize(this)}}class In{constructor(T,_){this.segments=T,this.children=_,this.parent=null,mr(_,(M,L)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dr(this)}}class ti{constructor(T,_){this.path=T,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=nr(this.parameters)),this._parameterMap}toString(){return Ne(this)}}function St(C,T){return C.length===T.length&&C.every((_,M)=>_.path===T[M].path)}let cn=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:function(){return new mn},providedIn:"root"}),C})();class mn{parse(T){const _=new Ti(T);return new kn(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(T){const _=`/${Ae(T.root,!0)}`,M=function st(C){const T=Object.keys(C).map(_=>{const M=C[_];return Array.isArray(M)?M.map(L=>`${$e(_)}=${$e(L)}`).join("&"):`${$e(_)}=${$e(M)}`}).filter(_=>!!_);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${_}${M}${"string"==typeof T.fragment?`#${function Ct(C){return encodeURI(C)}(T.fragment)}`:""}`}}const vn=new mn;function dr(C){return C.segments.map(T=>Ne(T)).join("/")}function Ae(C,T){if(!C.hasChildren())return dr(C);if(T){const _=C.children[Y]?Ae(C.children[Y],!1):"",M=[];return mr(C.children,(L,K)=>{K!==Y&&M.push(`${K}:${Ae(L,!1)}`)}),M.length>0?`${_}(${M.join("//")})`:_}{const _=function nn(C,T){let _=[];return mr(C.children,(M,L)=>{L===Y&&(_=_.concat(T(M,L)))}),mr(C.children,(M,L)=>{L!==Y&&(_=_.concat(T(M,L)))}),_}(C,(M,L)=>L===Y?[Ae(C.children[Y],!1)]:[`${L}:${Ae(M,!1)}`]);return 1===Object.keys(C.children).length&&null!=C.children[Y]?`${dr(C)}/${_[0]}`:`${dr(C)}/(${_.join("//")})`}}function Ee(C){return encodeURIComponent(C).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $e(C){return Ee(C).replace(/%3B/gi,";")}function at(C){return Ee(C).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xt(C){return decodeURIComponent(C)}function ke(C){return Xt(C.replace(/\+/g,"%20"))}function Ne(C){return`${at(C.path)}${function ge(C){return Object.keys(C).map(T=>`;${at(T)}=${at(C[T])}`).join("")}(C.parameters)}`}const Dt=/^[^\/()?;=#]+/;function Mt(C){const T=C.match(Dt);return T?T[0]:""}const gn=/^[^=?&#]+/,Dr=/^[^&#]+/;class Ti{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(T.length>0||Object.keys(_).length>0)&&(M[Y]=new In(T,_)),M}parseSegment(){const T=Mt(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new y.vHH(4009,Lt);return this.capture(T),new ti(Xt(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const _=Mt(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const L=Mt(this.remaining);L&&(M=L,this.capture(M))}T[Xt(_)]=Xt(M)}parseQueryParam(T){const _=function ur(C){const T=C.match(gn);return T?T[0]:""}(this.remaining);if(!_)return;this.capture(_);let M="";if(this.consumeOptional("=")){const ne=function Br(C){const T=C.match(Dr);return T?T[0]:""}(this.remaining);ne&&(M=ne,this.capture(M))}const L=ke(_),K=ke(M);if(T.hasOwnProperty(L)){let ne=T[L];Array.isArray(ne)||(ne=[ne],T[L]=ne),ne.push(K)}else T[L]=K}parseParens(T){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Mt(this.remaining),L=this.remaining[M.length];if("/"!==L&&")"!==L&&";"!==L)throw new y.vHH(4010,Lt);let K;M.indexOf(":")>-1?(K=M.slice(0,M.indexOf(":")),this.capture(K),this.capture(":")):T&&(K=Y);const ne=this.parseChildren();_[K]=1===Object.keys(ne).length?ne[Y]:new In([],ne),this.consumeOptional("//")}return _}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new y.vHH(4011,Lt)}}function yi(C){return C.segments.length>0?new In([],{[Y]:C}):C}function Hr(C){const T={};for(const M of Object.keys(C.children)){const K=Hr(C.children[M]);(K.segments.length>0||K.hasChildren())&&(T[M]=K)}return function Si(C){if(1===C.numberOfChildren&&C.children[Y]){const T=C.children[Y];return new In(C.segments.concat(T.segments),T.children)}return C}(new In(C.segments,T))}function rr(C){return C instanceof kn}const $i=!1;function Pn(C,T,_,M,L){var K;if(0===_.length)return vr(T.root,T.root,T.root,M,L);const ne=function ni(C){if("string"==typeof C[0]&&1===C.length&&"/"===C[0])return new hs(!0,0,C);let T=0,_=!1;const M=C.reduce((L,K,ne)=>{if("object"==typeof K&&null!=K){if(K.outlets){const qe={};return mr(K.outlets,(_t,Ht)=>{qe[Ht]="string"==typeof _t?_t.split("/"):_t}),[...L,{outlets:qe}]}if(K.segmentPath)return[...L,K.segmentPath]}return"string"!=typeof K?[...L,K]:0===ne?(K.split("/").forEach((qe,_t)=>{0==_t&&"."===qe||(0==_t&&""===qe?_=!0:".."===qe?T++:""!=qe&&L.push(qe))}),L):[...L,K]},[]);return new hs(_,T,M)}(_);return ne.toRoot()?vr(T.root,T.root,new In([],{}),M,L):function qe(Ht){var dn;const rn=function wr(C,T,_,M){if(C.isAbsolute)return new Kt(T.root,!0,0);if(-1===M)return new Kt(_,_===T.root,0);return function zr(C,T,_){let M=C,L=T,K=_;for(;K>L;){if(K-=L,M=M.parent,!M)throw new y.vHH(4005,$i&&"Invalid number of '../'");L=M.segments.length}return new Kt(M,!1,L-K)}(_,M+(Vn(C.commands[0])?0:1),C.numberOfDoubleDots)}(ne,T,null===(dn=C.snapshot)||void 0===dn?void 0:dn._urlSegment,Ht),xr=rn.processChildren?ri(rn.segmentGroup,rn.index,ne.commands):br(rn.segmentGroup,rn.index,ne.commands);return vr(T.root,rn.segmentGroup,xr,M,L)}(null===(K=C.snapshot)||void 0===K?void 0:K._lastPathIndex)}function Vn(C){return"object"==typeof C&&null!=C&&!C.outlets&&!C.segmentPath}function Sr(C){return"object"==typeof C&&null!=C&&C.outlets}function vr(C,T,_,M,L){let ne,K={};M&&mr(M,(_t,Ht)=>{K[Ht]=Array.isArray(_t)?_t.map(dn=>`${dn}`):`${_t}`}),ne=C===T?_:qi(C,T,_);const qe=yi(Hr(ne));return new kn(qe,K,L)}function qi(C,T,_){const M={};return mr(C.children,(L,K)=>{M[K]=L===T?_:qi(L,T,_)}),new In(C.segments,M)}class hs{constructor(T,_,M){if(this.isAbsolute=T,this.numberOfDoubleDots=_,this.commands=M,T&&M.length>0&&Vn(M[0]))throw new y.vHH(4003,$i&&"Root segment cannot have matrix parameters");const L=M.find(Sr);if(L&&L!==Ir(M))throw new y.vHH(4004,$i&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Kt{constructor(T,_,M){this.segmentGroup=T,this.processChildren=_,this.index=M}}function br(C,T,_){if(C||(C=new In([],{})),0===C.segments.length&&C.hasChildren())return ri(C,T,_);const M=function X(C,T,_){let M=0,L=T;const K={match:!1,pathIndex:0,commandIndex:0};for(;L<C.segments.length;){if(M>=_.length)return K;const ne=C.segments[L],qe=_[M];if(Sr(qe))break;const _t=`${qe}`,Ht=M<_.length-1?_[M+1]:null;if(L>0&&void 0===_t)break;if(_t&&Ht&&"object"==typeof Ht&&void 0===Ht.outlets){if(!Le(_t,Ht,ne))return K;M+=2}else{if(!Le(_t,{},ne))return K;M++}L++}return{match:!0,pathIndex:L,commandIndex:M}}(C,T,_),L=_.slice(M.commandIndex);if(M.match&&M.pathIndex<C.segments.length){const K=new In(C.segments.slice(0,M.pathIndex),{});return K.children[Y]=new In(C.segments.slice(M.pathIndex),C.children),ri(K,0,L)}return M.match&&0===L.length?new In(C.segments,{}):M.match&&!C.hasChildren()?ce(C,T,_):M.match?ri(C,0,L):ce(C,T,_)}function ri(C,T,_){if(0===_.length)return new In(C.segments,{});{const M=function _i(C){return Sr(C[0])?C[0].outlets:{[Y]:C}}(_),L={};if(!M[Y]&&C.children[Y]&&1===C.numberOfChildren&&0===C.children[Y].segments.length){const K=ri(C.children[Y],T,_);return new In(C.segments,K.children)}return mr(M,(K,ne)=>{"string"==typeof K&&(K=[K]),null!==K&&(L[ne]=br(C.children[ne],T,K))}),mr(C.children,(K,ne)=>{void 0===M[ne]&&(L[ne]=K)}),new In(C.segments,L)}}function ce(C,T,_){const M=C.segments.slice(0,T);let L=0;for(;L<_.length;){const K=_[L];if(Sr(K)){const _t=We(K.outlets);return new In(M,_t)}if(0===L&&Vn(_[0])){M.push(new ti(C.segments[T].path,ee(_[0]))),L++;continue}const ne=Sr(K)?K.outlets[Y]:`${K}`,qe=L<_.length-1?_[L+1]:null;ne&&qe&&Vn(qe)?(M.push(new ti(ne,ee(qe))),L+=2):(M.push(new ti(ne,{})),L++)}return new In(M,{})}function We(C){const T={};return mr(C,(_,M)=>{"string"==typeof _&&(_=[_]),null!==_&&(T[M]=ce(new In([],{}),0,_))}),T}function ee(C){const T={};return mr(C,(_,M)=>T[M]=`${_}`),T}function Le(C,T,_){return C==_.path&&Vt(T,_.parameters)}const Fe="imperative";class yt{constructor(T,_){this.id=T,this.url=_}}class bt extends yt{constructor(T,_,M="imperative",L=null){super(T,_),this.type=0,this.navigationTrigger=M,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vt extends yt{constructor(T,_,M){super(T,_),this.urlAfterRedirects=M,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class xt extends yt{constructor(T,_,M,L){super(T,_),this.reason=M,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class en extends yt{constructor(T,_,M,L){super(T,_),this.reason=M,this.code=L,this.type=16}}class ln extends yt{constructor(T,_,M,L){super(T,_),this.error=M,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tn extends yt{constructor(T,_,M,L){super(T,_),this.urlAfterRedirects=M,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nr extends yt{constructor(T,_,M,L){super(T,_),this.urlAfterRedirects=M,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jn extends yt{constructor(T,_,M,L,K){super(T,_),this.urlAfterRedirects=M,this.state=L,this.shouldActivate=K,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Gr extends yt{constructor(T,_,M,L){super(T,_),this.urlAfterRedirects=M,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pi extends yt{constructor(T,_,M,L){super(T,_),this.urlAfterRedirects=M,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oi{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ui{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class li{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yi{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ui{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bo{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ii{constructor(T,_,M){this.routerEvent=T,this.position=_,this.anchor=M,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Qo=(()=>{class C{createUrlTree(_,M,L,K,ne,qe){return Pn(_||M.root,L,K,ne,qe)}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac}),C})(),si=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:function(T){return Qo.\u0275fac(T)},providedIn:"root"}),C})();class Hs{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const _=this.pathFromRoot(T);return _.length>1?_[_.length-2]:null}children(T){const _=go(T,this._root);return _?_.children.map(M=>M.value):[]}firstChild(T){const _=go(T,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(T){const _=fs(T,this._root);return _.length<2?[]:_[_.length-2].children.map(L=>L.value).filter(L=>L!==T)}pathFromRoot(T){return fs(T,this._root).map(_=>_.value)}}function go(C,T){if(C===T.value)return T;for(const _ of T.children){const M=go(C,_);if(M)return M}return null}function fs(C,T){if(C===T.value)return[T];for(const _ of T.children){const M=fs(C,_);if(M.length)return M.unshift(T),M}return[]}class vi{constructor(T,_){this.value=T,this.children=_}toString(){return`TreeNode(${this.value})`}}function ps(C){const T={};return C&&C.children.forEach(_=>T[_.value.outlet]=_),T}class As extends Hs{constructor(T,_){super(T),this.snapshot=_,oo(this,T)}toString(){return this.snapshot.toString()}}function Ca(C,T){const _=function da(C,T){const ne=new Vi([],{},{},"",{},Y,T,null,C.root,-1,{});return new Do("",new vi(ne,[]))}(C,T),M=new oe.X([new ti("",{})]),L=new oe.X({}),K=new oe.X({}),ne=new oe.X({}),qe=new oe.X(""),_t=new Co(M,L,ne,qe,K,Y,T,_.root);return _t.snapshot=_.root,new As(new vi(_t,[]),_)}class Co{constructor(T,_,M,L,K,ne,qe,_t){var Ht,dn;this.url=T,this.params=_,this.queryParams=M,this.fragment=L,this.data=K,this.outlet=ne,this.component=qe,this.title=null!==(Ht=null===(dn=this.data)||void 0===dn?void 0:dn.pipe((0,ze.U)(rn=>rn[on])))&&void 0!==Ht?Ht:(0,W.of)(void 0),this._futureSnapshot=_t}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ze.U)(T=>nr(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ze.U)(T=>nr(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xs(C,T="emptyOnly"){const _=C.pathFromRoot;let M=0;if("always"!==T)for(M=_.length-1;M>=1;){const L=_[M],K=_[M-1];if(L.routeConfig&&""===L.routeConfig.path)M--;else{if(K.component)break;M--}}return function Zi(C){return C.reduce((T,_)=>{var M;return{params:{...T.params,..._.params},data:{...T.data,..._.data},resolve:{..._.data,...T.resolve,...null===(M=_.routeConfig)||void 0===M?void 0:M.data,..._._resolvedData}}},{params:{},data:{},resolve:{}})}(_.slice(M))}class Vi{get title(){var T;return null===(T=this.data)||void 0===T?void 0:T[on]}constructor(T,_,M,L,K,ne,qe,_t,Ht,dn,rn){this.url=T,this.params=_,this.queryParams=M,this.fragment=L,this.data=K,this.outlet=ne,this.component=qe,this.routeConfig=_t,this._urlSegment=Ht,this._lastPathIndex=dn,this._resolve=rn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Do extends Hs{constructor(T,_){super(_),this.url=T,oo(this,_)}toString(){return zs(this._root)}}function oo(C,T){T.value._routerState=C,T.children.forEach(_=>oo(C,_))}function zs(C){const T=C.children.length>0?` { ${C.children.map(zs).join(", ")} } `:"";return`${C.value}${T}`}function Ei(C){if(C.snapshot){const T=C.snapshot,_=C._futureSnapshot;C.snapshot=_,Vt(T.queryParams,_.queryParams)||C.queryParams.next(_.queryParams),T.fragment!==_.fragment&&C.fragment.next(_.fragment),Vt(T.params,_.params)||C.params.next(_.params),function Qn(C,T){if(C.length!==T.length)return!1;for(let _=0;_<C.length;++_)if(!Vt(C[_],T[_]))return!1;return!0}(T.url,_.url)||C.url.next(_.url),Vt(T.data,_.data)||C.data.next(_.data)}else C.snapshot=C._futureSnapshot,C.data.next(C._futureSnapshot.data)}function Ms(C,T){const _=Vt(C.params,T.params)&&function zt(C,T){return St(C,T)&&C.every((_,M)=>Vt(_.parameters,T[M].parameters))}(C.url,T.url);return _&&!(!C.parent!=!T.parent)&&(!C.parent||Ms(C.parent,T.parent))}function ao(C,T,_){if(_&&C.shouldReuseRoute(T.value,_.value.snapshot)){const M=_.value;M._futureSnapshot=T.value;const L=function lo(C,T,_){return T.children.map(M=>{for(const L of _.children)if(C.shouldReuseRoute(M.value,L.value.snapshot))return ao(C,M,L);return ao(C,M)})}(C,T,_);return new vi(M,L)}{if(C.shouldAttach(T.value)){const K=C.retrieve(T.value);if(null!==K){const ne=K.route;return ne.value._futureSnapshot=T.value,ne.children=T.children.map(qe=>ao(C,qe)),ne}}const M=function Da(C){return new Co(new oe.X(C.url),new oe.X(C.params),new oe.X(C.queryParams),new oe.X(C.fragment),new oe.X(C.data),C.outlet,C.component,C)}(T.value),L=T.children.map(K=>ao(C,K));return new vi(M,L)}}const hi="ngNavigationCancelingError";function Ws(C,T){const{redirectTo:_,navigationBehaviorOptions:M}=rr(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,L=Xi(!1,0,T);return L.url=_,L.navigationBehaviorOptions=M,L}function Xi(C,T,_){const M=new Error("NavigationCancelingError: "+(C||""));return M[hi]=!0,M.cancellationCode=T,_&&(M.url=_),M}function qs(C){return Ni(C)&&rr(C.url)}function Ni(C){return C&&C[hi]}class ji{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qi,this.attachRef=null}}let Qi=(()=>{class C{constructor(){this.contexts=new Map}onChildOutletCreated(_,M){const L=this.getOrCreateContext(_);L.outlet=M,this.contexts.set(_,L)}onChildOutletDestroyed(_){const M=this.getContext(_);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let M=this.getContext(_);return M||(M=new ji,this.contexts.set(_,M)),M}getContext(_){return this.contexts.get(_)||null}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Ys=!1;let To=(()=>{class C{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(Qi),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb)}ngOnChanges(_){if(_.name){const{firstChange:M,previousValue:L}=_.name;if(M)return;this.isTrackedInParentContexts(L)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(L)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(_){var M;return(null===(M=this.parentContexts.getContext(_))||void 0===M?void 0:M.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const _=this.parentContexts.getContext(this.name);null!=_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,Ys);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,Ys);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,Ys);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,M){this.activated=_,this._activatedRoute=M,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,M){if(this.isActivated)throw new y.vHH(4013,Ys);this._activatedRoute=_;const L=this.location,ne=_.snapshot.component,qe=this.parentContexts.getOrCreateContext(this.name).children,_t=new vs(_,qe,L.injector);if(M&&function Fr(C){return!!C.resolveComponentFactory}(M)){const Ht=M.resolveComponentFactory(ne);this.activated=L.createComponent(Ht,L.length,_t)}else this.activated=L.createComponent(ne,{index:L.length,injector:_t,environmentInjector:null!=M?M:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275dir=y.lG2({type:C,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),C})();class vs{constructor(T,_,M){this.route=T,this.childContexts=_,this.parent=M}get(T,_){return T===Co?this.route:T===Qi?this.childContexts:this.parent.get(T,_)}}let En=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275cmp=y.Xpm({type:C,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(_,M){1&_&&y._UZ(0,"router-outlet")},dependencies:[To],encapsulation:2}),C})();function Es(C,T){var _;return C.providers&&!C._injector&&(C._injector=(0,y.MMx)(C.providers,T,`Route: ${C.path}`)),null!==(_=C._injector)&&void 0!==_?_:T}function Jr(C){const T=C.children&&C.children.map(Jr),_=T?{...C,children:T}:{...C};return!_.component&&!_.loadComponent&&(T||_.loadChildren)&&_.outlet&&_.outlet!==Y&&(_.component=En),_}function Ji(C){return C.outlet||Y}function Ao(C,T){const _=C.filter(M=>Ji(M)===T);return _.push(...C.filter(M=>Ji(M)!==T)),_}function Xs(C){var T;if(!C)return null;if(null!==(T=C.routeConfig)&&void 0!==T&&T._injector)return C.routeConfig._injector;for(let _=C.parent;_;_=_.parent){const M=_.routeConfig;if(null!=M&&M._loadedInjector)return M._loadedInjector;if(null!=M&&M._injector)return M._injector}return null}class uo{constructor(T,_,M,L){this.routeReuseStrategy=T,this.futureState=_,this.currState=M,this.forwardEvent=L}activate(T){const _=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,M,T),Ei(this.futureState.root),this.activateChildRoutes(_,M,T)}deactivateChildRoutes(T,_,M){const L=ps(_);T.children.forEach(K=>{const ne=K.value.outlet;this.deactivateRoutes(K,L[ne],M),delete L[ne]}),mr(L,(K,ne)=>{this.deactivateRouteAndItsChildren(K,M)})}deactivateRoutes(T,_,M){const L=T.value,K=_?_.value:null;if(L===K)if(L.component){const ne=M.getContext(L.outlet);ne&&this.deactivateChildRoutes(T,_,ne.children)}else this.deactivateChildRoutes(T,_,M);else K&&this.deactivateRouteAndItsChildren(_,M)}deactivateRouteAndItsChildren(T,_){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,_):this.deactivateRouteAndOutlet(T,_)}detachAndStoreRouteSubtree(T,_){const M=_.getContext(T.value.outlet),L=M&&T.value.component?M.children:_,K=ps(T);for(const ne of Object.keys(K))this.deactivateRouteAndItsChildren(K[ne],L);if(M&&M.outlet){const ne=M.outlet.detach(),qe=M.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:ne,route:T,contexts:qe})}}deactivateRouteAndOutlet(T,_){const M=_.getContext(T.value.outlet),L=M&&T.value.component?M.children:_,K=ps(T);for(const ne of Object.keys(K))this.deactivateRouteAndItsChildren(K[ne],L);M&&(M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated()),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(T,_,M){const L=ps(_);T.children.forEach(K=>{this.activateRoutes(K,L[K.value.outlet],M),this.forwardEvent(new bo(K.value.snapshot))}),T.children.length&&this.forwardEvent(new Yi(T.value.snapshot))}activateRoutes(T,_,M){const L=T.value,K=_?_.value:null;if(Ei(L),L===K)if(L.component){const qe=M.getOrCreateContext(L.outlet);this.activateChildRoutes(T,_,qe.children)}else this.activateChildRoutes(T,_,M);else if(L.component){const qe=M.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const _t=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),qe.children.onOutletReAttached(_t.contexts),qe.attachRef=_t.componentRef,qe.route=_t.route.value,qe.outlet&&qe.outlet.attach(_t.componentRef,_t.route.value),Ei(_t.route.value),this.activateChildRoutes(T,null,qe.children)}else{var ne;const _t=Xs(L.snapshot),Ht=null!==(ne=null==_t?void 0:_t.get(y._Vd))&&void 0!==ne?ne:null;qe.attachRef=null,qe.route=L,qe.resolver=Ht,qe.injector=_t,qe.outlet&&qe.outlet.activateWith(L,qe.injector),this.activateChildRoutes(T,null,qe.children)}}else this.activateChildRoutes(T,null,M)}}class ea{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class Sn{constructor(T,_){this.component=T,this.route=_}}function ta(C,T,_){const M=C._root;return j(M,T?T._root:null,_,[M.value])}function I(C,T){const _=Symbol(),M=T.get(C,_);return M===_?"function"!=typeof C||(0,y.Z0I)(C)?T.get(C):C:M}function j(C,T,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const K=ps(T);return C.children.forEach(ne=>{(function b(C,T,_,M,L={canDeactivateChecks:[],canActivateChecks:[]}){const K=C.value,ne=T?T.value:null,qe=_?_.getContext(C.value.outlet):null;if(ne&&K.routeConfig===ne.routeConfig){const _t=function U(C,T,_){if("function"==typeof _)return _(C,T);switch(_){case"pathParamsChange":return!St(C.url,T.url);case"pathParamsOrQueryParamsChange":return!St(C.url,T.url)||!Vt(C.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ms(C,T)||!Vt(C.queryParams,T.queryParams);default:return!Ms(C,T)}}(ne,K,K.routeConfig.runGuardsAndResolvers);_t?L.canActivateChecks.push(new ea(M)):(K.data=ne.data,K._resolvedData=ne._resolvedData),j(C,T,K.component?qe?qe.children:null:_,M,L),_t&&qe&&qe.outlet&&qe.outlet.isActivated&&L.canDeactivateChecks.push(new Sn(qe.outlet.component,ne))}else ne&&se(T,qe,L),L.canActivateChecks.push(new ea(M)),j(C,null,K.component?qe?qe.children:null:_,M,L)})(ne,K[ne.value.outlet],_,M.concat([ne.value]),L),delete K[ne.value.outlet]}),mr(K,(ne,qe)=>se(ne,_.getContext(qe),L)),L}function se(C,T,_){const M=ps(C),L=C.value;mr(M,(K,ne)=>{se(K,L.component?T?T.children.getContext(ne):null:T,_)}),_.canDeactivateChecks.push(new Sn(L.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,L))}function O(C){return"function"==typeof C}function es(C){return C instanceof be.K||"EmptyError"===(null==C?void 0:C.name)}const Kr=Symbol("INITIAL_VALUE");function ms(){return(0,ut.w)(C=>Pe(C.map(T=>T.pipe((0,Ze.q)(1),(0,lt.O)(Kr)))).pipe((0,ze.U)(T=>{for(const _ of T)if(!0!==_){if(_===Kr)return Kr;if(!1===_||_ instanceof kn)return _}return!0}),(0,ot.h)(T=>T!==Kr),(0,Ze.q)(1)))}function hl(C){return(0,rt.z)((0,Qe.b)(T=>{if(rr(T))throw Ws(0,T)}),(0,ze.U)(T=>!0===T))}const Fi={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mo(C,T,_,M,L){const K=na(C,T,_);return K.matched?function fl(C,T,_,M){const L=T.canMatch;if(!L||0===L.length)return(0,W.of)(!0);const K=L.map(ne=>{const qe=I(ne,C);return pn(function Xn(C){return C&&O(C.canMatch)}(qe)?qe.canMatch(T,_):C.runInContext(()=>qe(T,_)))});return(0,W.of)(K).pipe(ms(),hl())}(M=Es(T,M),T,_).pipe((0,ze.U)(ne=>!0===ne?K:{...Fi})):(0,W.of)(K)}function na(C,T,_){var M;if(""===T.path)return"full"===T.pathMatch&&(C.hasChildren()||_.length>0)?{...Fi}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const K=(T.matcher||Wn)(_,C,T);if(!K)return{...Fi};const ne={};mr(K.posParams,(_t,Ht)=>{ne[Ht]=_t.path});const qe=K.consumed.length>0?{...ne,...K.consumed[K.consumed.length-1].parameters}:ne;return{matched:!0,consumedSegments:K.consumed,remainingSegments:_.slice(K.consumed.length),parameters:qe,positionalParamSegments:null!==(M=K.posParams)&&void 0!==M?M:{}}}function Bo(C,T,_,M){if(_.length>0&&function pl(C,T,_){return _.some(M=>Bl(C,T,M)&&Ji(M)!==Y)}(C,_,M)){const K=new In(T,function ja(C,T,_,M){const L={};L[Y]=M,M._sourceSegment=C,M._segmentIndexShift=T.length;for(const K of _)if(""===K.path&&Ji(K)!==Y){const ne=new In([],{});ne._sourceSegment=C,ne._segmentIndexShift=T.length,L[Ji(K)]=ne}return L}(C,T,M,new In(_,C.children)));return K._sourceSegment=C,K._segmentIndexShift=T.length,{segmentGroup:K,slicedSegments:[]}}if(0===_.length&&function ec(C,T,_){return _.some(M=>Bl(C,T,M))}(C,_,M)){const K=new In(C.segments,function Ju(C,T,_,M,L){const K={};for(const ne of M)if(Bl(C,_,ne)&&!L[Ji(ne)]){const qe=new In([],{});qe._sourceSegment=C,qe._segmentIndexShift=T.length,K[Ji(ne)]=qe}return{...L,...K}}(C,T,_,M,C.children));return K._sourceSegment=C,K._segmentIndexShift=T.length,{segmentGroup:K,slicedSegments:_}}const L=new In(C.segments,C.children);return L._sourceSegment=C,L._segmentIndexShift=T.length,{segmentGroup:L,slicedSegments:_}}function Bl(C,T,_){return(!(C.hasChildren()||T.length>0)||"full"!==_.pathMatch)&&""===_.path}function Ha(C,T,_,M){return!!(Ji(C)===M||M!==Y&&Bl(T,_,C))&&("**"===C.path||na(T,C,_).matched)}function yo(C,T,_){return 0===T.length&&!C.children[_]}const pa=!1;class Aa{constructor(T){this.segmentGroup=T||null}}class hu{constructor(T){this.urlTree=T}}function Ai(C){return Xe(new Aa(C))}function ga(C){return Xe(new hu(C))}class za{constructor(T,_,M,L,K){this.injector=T,this.configLoader=_,this.urlSerializer=M,this.urlTree=L,this.config=K,this.allowRedirects=!0}apply(){const T=Bo(this.urlTree.root,[],[],this.config).segmentGroup,_=new In(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,_,Y).pipe((0,ze.U)(K=>this.createUrlTree(Hr(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gt(K=>{if(K instanceof hu)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof Aa?this.noMatchError(K):K}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,Y).pipe((0,ze.U)(L=>this.createUrlTree(Hr(L),T.queryParams,T.fragment))).pipe(gt(L=>{throw L instanceof Aa?this.noMatchError(L):L}))}noMatchError(T){return new y.vHH(4002,pa)}createUrlTree(T,_,M){const L=yi(T);return new kn(L,_,M)}expandSegmentGroup(T,_,M,L){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(T,_,M).pipe((0,ze.U)(K=>new In([],K))):this.expandSegment(T,M,_,M.segments,L,!0)}expandChildren(T,_,M){const L=[];for(const K of Object.keys(M.children))"primary"===K?L.unshift(K):L.push(K);return(0,f.D)(L).pipe(Be(K=>{const ne=M.children[K],qe=Ao(_,K);return this.expandSegmentGroup(T,qe,ne,K).pipe((0,ze.U)(_t=>({segment:_t,outlet:K})))}),(0,Zt.R)((K,ne)=>(K[ne.outlet]=ne.segment,K),{}),de())}expandSegment(T,_,M,L,K,ne){return(0,f.D)(M).pipe(Be(qe=>this.expandSegmentAgainstRoute(T,_,M,qe,L,K,ne).pipe(gt(Ht=>{if(Ht instanceof Aa)return(0,W.of)(null);throw Ht}))),(0,Se.P)(qe=>!!qe),gt((qe,_t)=>{if(es(qe))return yo(_,L,K)?(0,W.of)(new In([],{})):Ai(_);throw qe}))}expandSegmentAgainstRoute(T,_,M,L,K,ne,qe){return Ha(L,_,K,ne)?void 0===L.redirectTo?this.matchSegmentAgainstRoute(T,_,L,K,ne):qe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,_,M,L,K,ne):Ai(_):Ai(_)}expandSegmentAgainstRouteUsingRedirect(T,_,M,L,K,ne){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,M,L,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(T,_,M,L,K,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,_,M,L){const K=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?ga(K):this.lineralizeSegments(M,K).pipe((0,Re.z)(ne=>{const qe=new In(ne,{});return this.expandSegment(T,qe,_,ne,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,_,M,L,K,ne){const{matched:qe,consumedSegments:_t,remainingSegments:Ht,positionalParamSegments:dn}=na(_,L,K);if(!qe)return Ai(_);const rn=this.applyRedirectCommands(_t,L.redirectTo,dn);return L.redirectTo.startsWith("/")?ga(rn):this.lineralizeSegments(L,rn).pipe((0,Re.z)(xr=>this.expandSegment(T,_,M,xr.concat(Ht),ne,!1)))}matchSegmentAgainstRoute(T,_,M,L,K){return"**"===M.path?(T=Es(M,T),M.loadChildren?(M._loadedRoutes?(0,W.of)({routes:M._loadedRoutes,injector:M._loadedInjector}):this.configLoader.loadChildren(T,M)).pipe((0,ze.U)(qe=>(M._loadedRoutes=qe.routes,M._loadedInjector=qe.injector,new In(L,{})))):(0,W.of)(new In(L,{}))):mo(_,M,L,T).pipe((0,ut.w)(({matched:ne,consumedSegments:qe,remainingSegments:_t})=>{var Ht;return ne?(T=null!==(Ht=M._injector)&&void 0!==Ht?Ht:T,this.getChildConfig(T,M,L).pipe((0,Re.z)(rn=>{var xr;const oi=null!==(xr=rn.injector)&&void 0!==xr?xr:T,ys=rn.routes,{segmentGroup:N,slicedSegments:$}=Bo(_,qe,_t,ys),Q=new In(N.segments,N.children);if(0===$.length&&Q.hasChildren())return this.expandChildren(oi,ys,Q).pipe((0,ze.U)(Ut=>new In(qe,Ut)));if(0===ys.length&&0===$.length)return(0,W.of)(new In(qe,{}));const ve=Ji(M)===K;return this.expandSegment(oi,Q,ys,$,ve?Y:K,!0).pipe((0,ze.U)(dt=>new In(qe.concat(dt.segments),dt.children)))}))):Ai(_)}))}getChildConfig(T,_,M){return _.children?(0,W.of)({routes:_.children,injector:T}):_.loadChildren?void 0!==_._loadedRoutes?(0,W.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function Ll(C,T,_,M){const L=T.canLoad;if(void 0===L||0===L.length)return(0,W.of)(!0);const K=L.map(ne=>{const qe=I(ne,C);return pn(function x(C){return C&&O(C.canLoad)}(qe)?qe.canLoad(T,_):C.runInContext(()=>qe(T,_)))});return(0,W.of)(K).pipe(ms(),hl())}(T,_,M).pipe((0,Re.z)(L=>L?this.configLoader.loadChildren(T,_).pipe((0,Qe.b)(K=>{_._loadedRoutes=K.routes,_._loadedInjector=K.injector})):function co(C){return Xe(Xi(pa,3))}())):(0,W.of)({routes:[],injector:T})}lineralizeSegments(T,_){let M=[],L=_.root;for(;;){if(M=M.concat(L.segments),0===L.numberOfChildren)return(0,W.of)(M);if(L.numberOfChildren>1||!L.children[Y])return T.redirectTo,Xe(new y.vHH(4e3,pa));L=L.children[Y]}}applyRedirectCommands(T,_,M){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),T,M)}applyRedirectCreateUrlTree(T,_,M,L){const K=this.createSegmentGroup(T,_.root,M,L);return new kn(K,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(T,_){const M={};return mr(T,(L,K)=>{if("string"==typeof L&&L.startsWith(":")){const qe=L.substring(1);M[K]=_[qe]}else M[K]=L}),M}createSegmentGroup(T,_,M,L){const K=this.createSegments(T,_.segments,M,L);let ne={};return mr(_.children,(qe,_t)=>{ne[_t]=this.createSegmentGroup(T,qe,M,L)}),new In(K,ne)}createSegments(T,_,M,L){return _.map(K=>K.path.startsWith(":")?this.findPosParam(T,K,L):this.findOrReturn(K,M))}findPosParam(T,_,M){const L=M[_.path.substring(1)];if(!L)throw new y.vHH(4001,pa);return L}findOrReturn(T,_){let M=0;for(const L of _){if(L.path===T.path)return _.splice(M),L;M++}return T}}class pu{}class P{constructor(T,_,M,L,K,ne,qe){this.injector=T,this.rootComponentType=_,this.config=M,this.urlTree=L,this.url=K,this.paramsInheritanceStrategy=ne,this.urlSerializer=qe}recognize(){const T=Bo(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,Y).pipe((0,ze.U)(_=>{if(null===_)return null;const M=new Vi([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Y,this.rootComponentType,null,this.urlTree.root,-1,{}),L=new vi(M,_),K=new Do(this.url,L);return this.inheritParamsAndData(K._root),K}))}inheritParamsAndData(T){const _=T.value,M=xs(_,this.paramsInheritanceStrategy);_.params=Object.freeze(M.params),_.data=Object.freeze(M.data),T.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(T,_,M,L){return 0===M.segments.length&&M.hasChildren()?this.processChildren(T,_,M):this.processSegment(T,_,M,M.segments,L)}processChildren(T,_,M){return(0,f.D)(Object.keys(M.children)).pipe(Be(L=>{const K=M.children[L],ne=Ao(_,L);return this.processSegmentGroup(T,ne,K,L)}),(0,Zt.R)((L,K)=>L&&K?(L.push(...K),L):null),function It(C,T=!1){return(0,Te.e)((_,M)=>{let L=0;_.subscribe((0,ue.x)(M,K=>{const ne=C(K,L++);(ne||T)&&M.next(K),!ne&&M.complete()}))})}(L=>null!==L),(0,it.d)(null),de(),(0,ze.U)(L=>{if(null===L)return null;const K=me(L);return function G(C){C.sort((T,_)=>T.value.outlet===Y?-1:_.value.outlet===Y?1:T.value.outlet.localeCompare(_.value.outlet))}(K),K}))}processSegment(T,_,M,L,K){return(0,f.D)(_).pipe(Be(ne=>{var qe;return this.processSegmentAgainstRoute(null!==(qe=ne._injector)&&void 0!==qe?qe:T,ne,M,L,K)}),(0,Se.P)(ne=>!!ne),gt(ne=>{if(es(ne))return yo(M,L,K)?(0,W.of)([]):(0,W.of)(null);throw ne}))}processSegmentAgainstRoute(T,_,M,L,K){if(_.redirectTo||!Ha(_,M,L,K))return(0,W.of)(null);let ne;if("**"===_.path){var qe,_t;const Ht=L.length>0?Ir(L).parameters:{},dn=yn(M)+L.length,rn=new Vi(L,Ht,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jn(_),Ji(_),null!==(qe=null!==(_t=_.component)&&void 0!==_t?_t:_._loadedComponent)&&void 0!==qe?qe:null,_,At(M),dn,fr(_));ne=(0,W.of)({snapshot:rn,consumedSegments:[],remainingSegments:[]})}else ne=mo(M,_,L,T).pipe((0,ze.U)(({matched:Ht,consumedSegments:dn,remainingSegments:rn,parameters:xr})=>{var oi,ys;if(!Ht)return null;const N=yn(M)+dn.length;return{snapshot:new Vi(dn,xr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Jn(_),Ji(_),null!==(oi=null!==(ys=_.component)&&void 0!==ys?ys:_._loadedComponent)&&void 0!==oi?oi:null,_,At(M),N,fr(_)),consumedSegments:dn,remainingSegments:rn}}));return ne.pipe((0,ut.w)(Ht=>{var dn,rn;if(null===Ht)return(0,W.of)(null);const{snapshot:xr,consumedSegments:oi,remainingSegments:ys}=Ht;T=null!==(dn=_._injector)&&void 0!==dn?dn:T;const N=null!==(rn=_._loadedInjector)&&void 0!==rn?rn:T,$=function F(C){return C.children?C.children:C.loadChildren?C._loadedRoutes:[]}(_),{segmentGroup:Q,slicedSegments:ve}=Bo(M,oi,ys,$.filter(dt=>void 0===dt.redirectTo));if(0===ve.length&&Q.hasChildren())return this.processChildren(N,$,Q).pipe((0,ze.U)(dt=>null===dt?null:[new vi(xr,dt)]));if(0===$.length&&0===ve.length)return(0,W.of)([new vi(xr,[])]);const tt=Ji(_)===K;return this.processSegment(N,$,Q,ve,tt?Y:K).pipe((0,ze.U)(dt=>null===dt?null:[new vi(xr,dt)]))}))}}function J(C){const T=C.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function me(C){const T=[],_=new Set;for(const M of C){if(!J(M)){T.push(M);continue}const L=T.find(K=>M.value.routeConfig===K.value.routeConfig);void 0!==L?(L.children.push(...M.children),_.add(L)):T.push(M)}for(const M of _){const L=me(M.children);T.push(new vi(M.value,L))}return T.filter(M=>!_.has(M))}function At(C){let T=C;for(;T._sourceSegment;)T=T._sourceSegment;return T}function yn(C){var T;let _=C,M=null!==(T=_._segmentIndexShift)&&void 0!==T?T:0;for(;_._sourceSegment;){var L;_=_._sourceSegment,M+=null!==(L=_._segmentIndexShift)&&void 0!==L?L:0}return M-1}function Jn(C){return C.data||{}}function fr(C){return C.resolve||{}}function ks(C){return"string"==typeof C.title||null===C.title}function ts(C){return(0,ut.w)(T=>{const _=C(T);return _?(0,f.D)(_).pipe((0,ze.U)(()=>T)):(0,W.of)(T)})}const ns=new y.OlP("ROUTES");let ma=(()=>{class C{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,W.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const M=pn(_.loadComponent()).pipe((0,ze.U)(ml),(0,Qe.b)(K=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=K}),Ge(()=>{this.componentLoaders.delete(_)})),L=new xe(M,()=>new Ie.x).pipe(re());return this.componentLoaders.set(_,L),L}loadChildren(_,M){if(this.childrenLoaders.get(M))return this.childrenLoaders.get(M);if(M._loadedRoutes)return(0,W.of)({routes:M._loadedRoutes,injector:M._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(M);const K=this.loadModuleFactoryOrRoutes(M.loadChildren).pipe((0,ze.U)(qe=>{this.onLoadEndListener&&this.onLoadEndListener(M);let _t,Ht,dn=!1;Array.isArray(qe)?Ht=qe:(_t=qe.create(_).injector,Ht=ar(_t.get(ns,[],y.XFs.Self|y.XFs.Optional)));return{routes:Ht.map(Jr),injector:_t}}),Ge(()=>{this.childrenLoaders.delete(M)})),ne=new xe(K,()=>new Ie.x).pipe(re());return this.childrenLoaders.set(M,ne),ne}loadModuleFactoryOrRoutes(_){return pn(_()).pipe((0,ze.U)(ml),(0,Re.z)(M=>M instanceof y.YKP||Array.isArray(M)?(0,W.of)(M):(0,f.D)(this.compiler.compileModuleAsync(M))))}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function ml(C){return function Ga(C){return C&&"object"==typeof C&&"default"in C}(C)?C.default:C}let Wa=(()=>{class C{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ie.x,this.configLoader=(0,y.f3M)(ma),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(cn),this.rootContexts=(0,y.f3M)(Qi),this.navigationId=0,this.afterPreactivation=()=>(0,W.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=L=>this.events.next(new Ui(L)),this.configLoader.onLoadStartListener=L=>this.events.next(new Oi(L))}complete(){var _;null===(_=this.transitions)||void 0===_||_.complete()}handleNavigationRequest(_){var M;const L=++this.navigationId;null===(M=this.transitions)||void 0===M||M.next({...this.transitions.value,..._,id:L})}setupNavigations(_){return this.transitions=new oe.X({id:0,targetPageId:0,currentUrlTree:_.currentUrlTree,currentRawUrl:_.currentUrlTree,extractedUrl:_.urlHandlingStrategy.extract(_.currentUrlTree),urlAfterRedirects:_.urlHandlingStrategy.extract(_.currentUrlTree),rawUrl:_.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Fe,restoredState:null,currentSnapshot:_.routerState.snapshot,targetSnapshot:null,currentRouterState:_.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ot.h)(M=>0!==M.id),(0,ze.U)(M=>({...M,extractedUrl:_.urlHandlingStrategy.extract(M.rawUrl)})),(0,ut.w)(M=>{let L=!1,K=!1;return(0,W.of)(M).pipe((0,Qe.b)(ne=>{this.currentNavigation={id:ne.id,initialUrl:ne.rawUrl,extractedUrl:ne.extractedUrl,trigger:ne.source,extras:ne.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ut.w)(ne=>{var qe;const _t=_.browserUrlTree.toString(),Ht=!_.navigated||ne.extractedUrl.toString()!==_t||_t!==_.currentUrlTree.toString(),dn=null!==(qe=ne.extras.onSameUrlNavigation)&&void 0!==qe?qe:_.onSameUrlNavigation;if(!Ht&&"reload"!==dn){const rn="";return this.events.next(new en(ne.id,_.serializeUrl(M.rawUrl),rn,0)),_.rawUrlTree=ne.rawUrl,ne.resolve(null),Je.E}if(_.urlHandlingStrategy.shouldProcessUrl(ne.rawUrl))return qa(ne.source)&&(_.browserUrlTree=ne.extractedUrl),(0,W.of)(ne).pipe((0,ut.w)(rn=>{var xr,oi;const ys=null===(xr=this.transitions)||void 0===xr?void 0:xr.getValue();return this.events.next(new bt(rn.id,this.urlSerializer.serialize(rn.extractedUrl),rn.source,rn.restoredState)),ys!==(null===(oi=this.transitions)||void 0===oi?void 0:oi.getValue())?Je.E:Promise.resolve(rn)}),function Os(C,T,_,M){return(0,ut.w)(L=>function xi(C,T,_,M,L){return new za(C,T,_,M,L).apply()}(C,T,_,L.extractedUrl,M).pipe((0,ze.U)(K=>({...L,urlAfterRedirects:K}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,_.config),(0,Qe.b)(rn=>{this.currentNavigation={...this.currentNavigation,finalUrl:rn.urlAfterRedirects},M.urlAfterRedirects=rn.urlAfterRedirects}),function qn(C,T,_,M,L){return(0,Re.z)(K=>function xa(C,T,_,M,L,K,ne="emptyOnly"){return new P(C,T,_,M,L,ne,K).recognize().pipe((0,ut.w)(qe=>null===qe?function gl(C){return new Ce.y(T=>T.error(C))}(new pu):(0,W.of)(qe)))}(C,T,_,K.urlAfterRedirects,M.serialize(K.urlAfterRedirects),M,L).pipe((0,ze.U)(ne=>({...K,targetSnapshot:ne}))))}(this.environmentInjector,this.rootComponentType,_.config,this.urlSerializer,_.paramsInheritanceStrategy),(0,Qe.b)(rn=>{if(M.targetSnapshot=rn.targetSnapshot,"eager"===_.urlUpdateStrategy){if(!rn.extras.skipLocationChange){const oi=_.urlHandlingStrategy.merge(rn.urlAfterRedirects,rn.rawUrl);_.setBrowserUrl(oi,rn)}_.browserUrlTree=rn.urlAfterRedirects}const xr=new Tn(rn.id,this.urlSerializer.serialize(rn.extractedUrl),this.urlSerializer.serialize(rn.urlAfterRedirects),rn.targetSnapshot);this.events.next(xr)}));if(Ht&&_.urlHandlingStrategy.shouldProcessUrl(_.rawUrlTree)){const{id:rn,extractedUrl:xr,source:oi,restoredState:ys,extras:N}=ne,$=new bt(rn,this.urlSerializer.serialize(xr),oi,ys);this.events.next($);const Q=Ca(xr,this.rootComponentType).snapshot;return M={...ne,targetSnapshot:Q,urlAfterRedirects:xr,extras:{...N,skipLocationChange:!1,replaceUrl:!1}},(0,W.of)(M)}{const rn="";return this.events.next(new en(ne.id,_.serializeUrl(M.extractedUrl),rn,1)),_.rawUrlTree=ne.rawUrl,ne.resolve(null),Je.E}}),(0,Qe.b)(ne=>{const qe=new Nr(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot);this.events.next(qe)}),(0,ze.U)(ne=>M={...ne,guards:ta(ne.targetSnapshot,ne.currentSnapshot,this.rootContexts)}),function ha(C,T){return(0,Re.z)(_=>{const{targetSnapshot:M,currentSnapshot:L,guards:{canActivateChecks:K,canDeactivateChecks:ne}}=_;return 0===ne.length&&0===K.length?(0,W.of)({..._,guardsResult:!0}):function fa(C,T,_,M){return(0,f.D)(C).pipe((0,Re.z)(L=>function Va(C,T,_,M,L){const K=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,W.of)(!0);const ne=K.map(qe=>{var _t;const Ht=null!==(_t=Xs(T))&&void 0!==_t?_t:L,dn=I(qe,Ht);return pn(function kt(C){return C&&O(C.canDeactivate)}(dn)?dn.canDeactivate(C,T,_,M):Ht.runInContext(()=>dn(C,T,_,M))).pipe((0,Se.P)())});return(0,W.of)(ne).pipe(ms())}(L.component,L.route,_,T,M)),(0,Se.P)(L=>!0!==L,!0))}(ne,M,L,C).pipe((0,Re.z)(qe=>qe&&function S(C){return"boolean"==typeof C}(qe)?function pi(C,T,_,M){return(0,f.D)(T).pipe(Be(L=>(0,_e.z)(function Ta(C,T){return null!==C&&T&&T(new li(C)),(0,W.of)(!0)}(L.route.parent,M),function Ps(C,T){return null!==C&&T&&T(new ui(C)),(0,W.of)(!0)}(L.route,M),function Qs(C,T,_){const M=T[T.length-1],K=T.slice(0,T.length-1).reverse().map(ne=>function xo(C){const T=C.routeConfig?C.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:C,guards:T}:null}(ne)).filter(ne=>null!==ne).map(ne=>Oe(()=>{const qe=ne.guards.map(_t=>{var Ht;const dn=null!==(Ht=Xs(ne.node))&&void 0!==Ht?Ht:_,rn=I(_t,dn);return pn(function et(C){return C&&O(C.canActivateChild)}(rn)?rn.canActivateChild(M,C):dn.runInContext(()=>rn(M,C))).pipe((0,Se.P)())});return(0,W.of)(qe).pipe(ms())}));return(0,W.of)(K).pipe(ms())}(C,L.path,_),function Sa(C,T,_){const M=T.routeConfig?T.routeConfig.canActivate:null;if(!M||0===M.length)return(0,W.of)(!0);const L=M.map(K=>Oe(()=>{var ne;const qe=null!==(ne=Xs(T))&&void 0!==ne?ne:_,_t=I(K,qe);return pn(function q(C){return C&&O(C.canActivate)}(_t)?_t.canActivate(T,C):qe.runInContext(()=>_t(T,C))).pipe((0,Se.P)())}));return(0,W.of)(L).pipe(ms())}(C,L.route,_))),(0,Se.P)(L=>!0!==L,!0))}(M,K,C,T):(0,W.of)(qe)),(0,ze.U)(qe=>({..._,guardsResult:qe})))})}(this.environmentInjector,ne=>this.events.next(ne)),(0,Qe.b)(ne=>{if(M.guardsResult=ne.guardsResult,rr(ne.guardsResult))throw Ws(0,ne.guardsResult);const qe=new jn(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(ne.urlAfterRedirects),ne.targetSnapshot,!!ne.guardsResult);this.events.next(qe)}),(0,ot.h)(ne=>!!ne.guardsResult||(_.restoreHistory(ne),this.cancelNavigationTransition(ne,"",3),!1)),ts(ne=>{if(ne.guards.canActivateChecks.length)return(0,W.of)(ne).pipe((0,Qe.b)(qe=>{const _t=new Gr(qe.id,this.urlSerializer.serialize(qe.extractedUrl),this.urlSerializer.serialize(qe.urlAfterRedirects),qe.targetSnapshot);this.events.next(_t)}),(0,ut.w)(qe=>{let _t=!1;return(0,W.of)(qe).pipe(function Ii(C,T){return(0,Re.z)(_=>{const{targetSnapshot:M,guards:{canActivateChecks:L}}=_;if(!L.length)return(0,W.of)(_);let K=0;return(0,f.D)(L).pipe(Be(ne=>function Wr(C,T,_,M){const L=C.routeConfig,K=C._resolve;return void 0!==(null==L?void 0:L.title)&&!ks(L)&&(K[on]=L.title),function Zr(C,T,_,M){const L=function $o(C){return[...Object.keys(C),...Object.getOwnPropertySymbols(C)]}(C);if(0===L.length)return(0,W.of)({});const K={};return(0,f.D)(L).pipe((0,Re.z)(ne=>function Ar(C,T,_,M){var L;const K=null!==(L=Xs(T))&&void 0!==L?L:M,ne=I(C,K);return pn(ne.resolve?ne.resolve(T,_):K.runInContext(()=>ne(T,_)))}(C[ne],T,_,M).pipe((0,Se.P)(),(0,Qe.b)(qe=>{K[ne]=qe}))),Ft(1),function Bt(C){return(0,ze.U)(()=>C)}(K),gt(ne=>es(ne)?Je.E:Xe(ne)))}(K,C,T,M).pipe((0,ze.U)(ne=>(C._resolvedData=ne,C.data=xs(C,_).resolve,L&&ks(L)&&(C.data[on]=L.title),null)))}(ne.route,M,C,T)),(0,Qe.b)(()=>K++),Ft(1),(0,Re.z)(ne=>K===L.length?(0,W.of)(_):Je.E))})}(_.paramsInheritanceStrategy,this.environmentInjector),(0,Qe.b)({next:()=>_t=!0,complete:()=>{_t||(_.restoreHistory(qe),this.cancelNavigationTransition(qe,"",2))}}))}),(0,Qe.b)(qe=>{const _t=new Pi(qe.id,this.urlSerializer.serialize(qe.extractedUrl),this.urlSerializer.serialize(qe.urlAfterRedirects),qe.targetSnapshot);this.events.next(_t)}))}),ts(ne=>{const qe=_t=>{var Ht;const dn=[];null!==(Ht=_t.routeConfig)&&void 0!==Ht&&Ht.loadComponent&&!_t.routeConfig._loadedComponent&&dn.push(this.configLoader.loadComponent(_t.routeConfig).pipe((0,Qe.b)(rn=>{_t.component=rn}),(0,ze.U)(()=>{})));for(const rn of _t.children)dn.push(...qe(rn));return dn};return Pe(qe(ne.targetSnapshot.root)).pipe((0,it.d)(),(0,Ze.q)(1))}),ts(()=>this.afterPreactivation()),(0,ze.U)(ne=>{const qe=function Gs(C,T,_){const M=ao(C,T._root,_?_._root:void 0);return new As(M,T)}(_.routeReuseStrategy,ne.targetSnapshot,ne.currentRouterState);return M={...ne,targetRouterState:qe}}),(0,Qe.b)(ne=>{_.currentUrlTree=ne.urlAfterRedirects,_.rawUrlTree=_.urlHandlingStrategy.merge(ne.urlAfterRedirects,ne.rawUrl),_.routerState=ne.targetRouterState,"deferred"===_.urlUpdateStrategy&&(ne.extras.skipLocationChange||_.setBrowserUrl(_.rawUrlTree,ne),_.browserUrlTree=ne.urlAfterRedirects)}),((C,T,_)=>(0,ze.U)(M=>(new uo(T,M.targetRouterState,M.currentRouterState,_).activate(C),M)))(this.rootContexts,_.routeReuseStrategy,ne=>this.events.next(ne)),(0,Ze.q)(1),(0,Qe.b)({next:ne=>{var qe;L=!0,this.lastSuccessfulNavigation=this.currentNavigation,_.navigated=!0,this.events.next(new vt(ne.id,this.urlSerializer.serialize(ne.extractedUrl),this.urlSerializer.serialize(_.currentUrlTree))),null===(qe=_.titleStrategy)||void 0===qe||qe.updateTitle(ne.targetRouterState.snapshot),ne.resolve(!0)},complete:()=>{L=!0}}),Ge(()=>{var ne;L||K||this.cancelNavigationTransition(M,"",1),(null===(ne=this.currentNavigation)||void 0===ne?void 0:ne.id)===M.id&&(this.currentNavigation=null)}),gt(ne=>{if(K=!0,Ni(ne)){qs(ne)||(_.navigated=!0,_.restoreHistory(M,!0));const _t=new xt(M.id,this.urlSerializer.serialize(M.extractedUrl),ne.message,ne.cancellationCode);if(this.events.next(_t),qs(ne)){const Ht=_.urlHandlingStrategy.merge(ne.url,_.rawUrlTree),dn={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===_.urlUpdateStrategy||qa(M.source)};_.scheduleNavigation(Ht,Fe,null,dn,{resolve:M.resolve,reject:M.reject,promise:M.promise})}else M.resolve(!1)}else{var qe;_.restoreHistory(M,!0);const _t=new ln(M.id,this.urlSerializer.serialize(M.extractedUrl),ne,null!==(qe=M.targetSnapshot)&&void 0!==qe?qe:void 0);this.events.next(_t);try{M.resolve(_.errorHandler(ne))}catch(Ht){M.reject(Ht)}}return Je.E}))}))}cancelNavigationTransition(_,M,L){const K=new xt(_.id,this.urlSerializer.serialize(_.extractedUrl),M,L);this.events.next(K),_.resolve(!1)}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function qa(C){return C!==Fe}let Mi=(()=>{class C{buildTitle(_){let M,L=_.root;for(;void 0!==L;){var K;M=null!==(K=this.getResolvedTitleForRoute(L))&&void 0!==K?K:M,L=L.children.find(ne=>ne.outlet===Y)}return M}getResolvedTitleForRoute(_){return _.data[on]}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:function(){return(0,y.f3M)(ya)},providedIn:"root"}),C})(),ya=(()=>{class C extends Mi{constructor(_){super(),this.title=_}updateTitle(_){const M=this.buildTitle(_);void 0!==M&&this.title.setTitle(M)}}return C.\u0275fac=function(_){return new(_||C)(y.LFG(tn.Dx))},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),Mo=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:function(){return(0,y.f3M)(Ya)},providedIn:"root"}),C})();class Vo{shouldDetach(T){return!1}store(T,_){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,_){return T.routeConfig===_.routeConfig}}let Ya=(()=>{class C extends Vo{}return C.\u0275fac=function(){let T;return function(M){return(T||(T=y.n5z(C)))(M||C)}}(),C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Ra=new y.OlP("",{providedIn:"root",factory:()=>({})});let Is=(()=>{class C{}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:function(){return(0,y.f3M)(yl)},providedIn:"root"}),C})(),yl=(()=>{class C{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,M){return _}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function $l(C){throw C}function Xc(C,T,_){return T.parse("/")}const jo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_a={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wi=(()=>{class C{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var _;this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(Ra,{optional:!0})||{},this.errorHandler=this.options.errorHandler||$l,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Xc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(Is),this.routeReuseStrategy=(0,y.f3M)(Mo),this.urlCreationStrategy=(0,y.f3M)(si),this.titleStrategy=(0,y.f3M)(Mi),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ar(null!==(_=(0,y.f3M)(ns,{optional:!0}))&&void 0!==_?_:[]),this.navigationTransitions=(0,y.f3M)(Wa),this.urlSerializer=(0,y.f3M)(cn),this.location=(0,y.f3M)(He.Ye),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new kn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ca(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(M=>{this.lastSuccessfulId=M.id,this.currentPageId=M.targetPageId},M=>{this.console.warn(`Unhandled Navigation Error: ${M}`)})}resetRootComponentType(_){this.routerState.root.component=_,this.navigationTransitions.rootComponentType=_}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const _=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Fe,_)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const M="popstate"===_.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{this.navigateToSyncWithBrowser(_.url,M,_.state)},0)}))}navigateToSyncWithBrowser(_,M,L){const K={replaceUrl:!0},ne=null!=L&&L.navigationId?L:null;if(L){const _t={...L};delete _t.navigationId,delete _t.\u0275routerPageId,0!==Object.keys(_t).length&&(K.state=_t)}const qe=this.parseUrl(_);this.scheduleNavigation(qe,M,ne,K)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(_){this.config=_.map(Jr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,M={}){const{relativeTo:L,queryParams:K,fragment:ne,queryParamsHandling:qe,preserveFragment:_t}=M,Ht=_t?this.currentUrlTree.fragment:ne;let dn=null;switch(qe){case"merge":dn={...this.currentUrlTree.queryParams,...K};break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=K||null}return null!==dn&&(dn=this.removeEmptyProps(dn)),this.urlCreationStrategy.createUrlTree(L,this.routerState,this.currentUrlTree,_,dn,null!=Ht?Ht:null)}navigateByUrl(_,M={skipLocationChange:!1}){const L=rr(_)?_:this.parseUrl(_),K=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(K,Fe,null,M)}navigate(_,M={skipLocationChange:!1}){return function _l(C){for(let T=0;T<C.length;T++){const _=C[T];if(null==_)throw new y.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,M),M)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let M;try{M=this.urlSerializer.parse(_)}catch(L){M=this.malformedUriErrorHandler(L,this.urlSerializer,_)}return M}isActive(_,M){let L;if(L=!0===M?{...jo}:!1===M?{..._a}:M,rr(_))return lr(this.currentUrlTree,_,L);const K=this.parseUrl(_);return lr(this.currentUrlTree,K,L)}removeEmptyProps(_){return Object.keys(_).reduce((M,L)=>{const K=_[L];return null!=K&&(M[L]=K),M},{})}scheduleNavigation(_,M,L,K,ne){if(this.disposed)return Promise.resolve(!1);let qe,_t,Ht,dn;if(ne?(qe=ne.resolve,_t=ne.reject,Ht=ne.promise):Ht=new Promise((oi,ys)=>{qe=oi,_t=ys}),"computed"===this.canceledNavigationResolution)if(L&&L.\u0275routerPageId)dn=L.\u0275routerPageId;else if(K.replaceUrl||K.skipLocationChange){var rn;dn=null!==(rn=this.browserPageId)&&void 0!==rn?rn:0}else{var xr;dn=(null!==(xr=this.browserPageId)&&void 0!==xr?xr:0)+1}else dn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:dn,source:M,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:_,extras:K,resolve:qe,reject:_t,promise:Ht,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ht.catch(oi=>Promise.reject(oi))}setBrowserUrl(_,M){const L=this.urlSerializer.serialize(_),K={...M.extras.state,...this.generateNgRouterState(M.id,M.targetPageId)};this.location.isCurrentPathEqualTo(L)||M.extras.replaceUrl?this.location.replaceState(L,"",K):this.location.go(L,"",K)}restoreHistory(_,M=!1){if("computed"===this.canceledNavigationResolution){var L,K;const ne=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(L=this.getCurrentNavigation())||void 0===L?void 0:L.finalUrl)||0===ne?this.currentUrlTree===(null===(K=this.getCurrentNavigation())||void 0===K?void 0:K.finalUrl)&&0===ne&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ne)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(_,M){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:M}:{navigationId:_}}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),_o=(()=>{class C{constructor(_,M,L,K,ne,qe){var _t;this.router=_,this.route=M,this.tabIndexAttribute=L,this.renderer=K,this.el=ne,this.locationStrategy=qe,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Ie.x;const Ht=null===(_t=ne.nativeElement.tagName)||void 0===_t?void 0:_t.toLowerCase();this.isAnchorElement="a"===Ht||"area"===Ht,this.isAnchorElement?this.subscription=_.events.subscribe(dn=>{dn instanceof vt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(_){this._preserveFragment=(0,y.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,y.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,y.D6c)(_)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(_){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",_)}ngOnChanges(_){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(_,M,L,K,ne){return!!(null===this.urlTree||this.isAnchorElement&&(0!==_||M||L||K||ne||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var _;null===(_=this.subscription)||void 0===_||_.unsubscribe()}updateHref(){var _;this.href=null!==this.urlTree&&this.locationStrategy?null===(_=this.locationStrategy)||void 0===_?void 0:_.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const M=null===this.href?null:(0,y.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",M)}applyAttributeValue(_,M){const L=this.renderer,K=this.el.nativeElement;null!==M?L.setAttribute(K,_,M):L.removeAttribute(K,_)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return C.\u0275fac=function(_){return new(_||C)(y.Y36(wi),y.Y36(Co),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(He.S$))},C.\u0275dir=y.lG2({type:C,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(_,M){1&_&&y.NdJ("click",function(K){return M.onClick(K.button,K.ctrlKey,K.shiftKey,K.altKey,K.metaKey)}),2&_&&y.uIk("target",M.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[y.TTD]}),C})();class vl{}let ws=(()=>{class C{preload(_,M){return M().pipe(gt(()=>(0,W.of)(null)))}}return C.\u0275fac=function(_){return new(_||C)},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})(),tc=(()=>{class C{constructor(_,M,L,K,ne){this.router=_,this.injector=L,this.preloadingStrategy=K,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)(_=>_ instanceof vt),Be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,M){const L=[];for(const _t of M){var K,ne;_t.providers&&!_t._injector&&(_t._injector=(0,y.MMx)(_t.providers,_,`Route: ${_t.path}`));const Ht=null!==(K=_t._injector)&&void 0!==K?K:_,dn=null!==(ne=_t._loadedInjector)&&void 0!==ne?ne:Ht;var qe;(_t.loadChildren&&!_t._loadedRoutes&&void 0===_t.canLoad||_t.loadComponent&&!_t._loadedComponent)&&L.push(this.preloadConfig(Ht,_t)),(_t.children||_t._loadedRoutes)&&L.push(this.processRoutes(dn,null!==(qe=_t.children)&&void 0!==qe?qe:_t._loadedRoutes))}return(0,f.D)(L).pipe((0,Jt.J)())}preloadConfig(_,M){return this.preloadingStrategy.preload(M,()=>{let L;L=M.loadChildren&&void 0===M.canLoad?this.loader.loadChildren(_,M):(0,W.of)(null);const K=L.pipe((0,Re.z)(ne=>{var qe;return null===ne?(0,W.of)(void 0):(M._loadedRoutes=ne.routes,M._loadedInjector=ne.injector,this.processRoutes(null!==(qe=ne.injector)&&void 0!==qe?qe:_,ne.routes))}));if(M.loadComponent&&!M._loadedComponent){const ne=this.loader.loadComponent(M);return(0,f.D)([K,ne]).pipe((0,Jt.J)())}return K})}}return C.\u0275fac=function(_){return new(_||C)(y.LFG(wi),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(vl),y.LFG(ma))},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const va=new y.OlP("");let nc=(()=>{class C{constructor(_,M,L,K,ne={}){this.urlSerializer=_,this.transitions=M,this.viewportScroller=L,this.zone=K,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof bt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof vt&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.urlSerializer.parse(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(_=>{_ instanceof ii&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,M){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ii(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))})},0)})}ngOnDestroy(){var _,M;null===(_=this.routerEventsSubscription)||void 0===_||_.unsubscribe(),null===(M=this.scrollEventsSubscription)||void 0===M||M.unsubscribe()}}return C.\u0275fac=function(_){y.$Z()},C.\u0275prov=y.Yz7({token:C,factory:C.\u0275fac}),C})();var ho=(()=>((ho=ho||{})[ho.COMPLETE=0]="COMPLETE",ho[ho.FAILED=1]="FAILED",ho[ho.REDIRECTING=2]="REDIRECTING",ho))();const Js=!1;function ia(C,T){return{\u0275kind:C,\u0275providers:T}}const Vl=new y.OlP("",{providedIn:"root",factory:()=>!1});function Xr(){const C=(0,y.f3M)(y.zs3);return T=>{var _,M;const L=C.get(y.z2F);if(T!==L.components[0])return;const K=C.get(wi),ne=C.get(_u);1===C.get(Qa)&&K.initialNavigation(),null===(_=C.get(vu,null,y.XFs.Optional))||void 0===_||_.setUpPreloading(),null===(M=C.get(va,null,y.XFs.Optional))||void 0===M||M.init(),K.resetRootComponentType(L.componentTypes[0]),ne.closed||(ne.next(),ne.complete(),ne.unsubscribe())}}const _u=new y.OlP(Js?"bootstrap done indicator":"",{factory:()=>new Ie.x}),Qa=new y.OlP(Js?"initial navigation":"",{providedIn:"root",factory:()=>1});function Nf(){let C=[];return C=Js?[{provide:y.Xts,multi:!0,useFactory:()=>{const T=(0,y.f3M)(wi);return()=>T.events.subscribe(_=>{var M,L,K,ne;null===(M=(L=console).group)||void 0===M||M.call(L,`Router Event: ${_.constructor.name}`),console.log(function Ki(C){var T,_,M,L;if(!("type"in C))return`Unknown Router Event: ${C.constructor.name}`;switch(C.type){case 14:return`ActivationEnd(path: '${(null===(T=C.snapshot.routeConfig)||void 0===T?void 0:T.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(_=C.snapshot.routeConfig)||void 0===_?void 0:_.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(M=C.snapshot.routeConfig)||void 0===M?void 0:M.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(L=C.snapshot.routeConfig)||void 0===L?void 0:L.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state}, shouldActivate: ${C.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 2:return`NavigationCancel(id: ${C.id}, url: '${C.url}')`;case 16:return`NavigationSkipped(id: ${C.id}, url: '${C.url}')`;case 1:return`NavigationEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${C.id}, url: '${C.url}', error: ${C.error})`;case 0:return`NavigationStart(id: ${C.id}, url: '${C.url}')`;case 6:return`ResolveEnd(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 5:return`ResolveStart(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 10:return`RouteConfigLoadEnd(path: ${C.route.path})`;case 9:return`RouteConfigLoadStart(path: ${C.route.path})`;case 4:return`RoutesRecognized(id: ${C.id}, url: '${C.url}', urlAfterRedirects: '${C.urlAfterRedirects}', state: ${C.state})`;case 15:return`Scroll(anchor: '${C.anchor}', position: '${C.position?`${C.position[0]}, ${C.position[1]}`:null}')`}}(_)),console.log(_),null===(K=(ne=console).groupEnd)||void 0===K||K.call(ne)})}}]:[],ia(1,C)}const vu=new y.OlP(Js?"router preloader":"");function oh(C){return ia(0,[{provide:vu,useExisting:tc},{provide:vl,useExisting:C}])}const gi=!1,Ro=new y.OlP(gi?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Oa=[He.Ye,{provide:cn,useClass:mn},wi,Qi,{provide:Co,useFactory:function Za(C){return C.routerState.root},deps:[wi]},ma,gi?{provide:Vl,useValue:!0}:[]];function Ns(){return new y.PXZ("Router",wi)}let Ho=(()=>{class C{constructor(_){}static forRoot(_,M){return{ngModule:C,providers:[Oa,gi&&null!=M&&M.enableTracing?Nf().\u0275providers:[],{provide:ns,multi:!0,useValue:_},{provide:Ro,useFactory:jl,deps:[[wi,new y.FiY,new y.tp0]]},{provide:Ra,useValue:M||{}},null!=M&&M.useHash?{provide:He.S$,useClass:He.Do}:{provide:He.S$,useClass:He.b0},{provide:va,useFactory:()=>{const C=(0,y.f3M)(He.EM),T=(0,y.f3M)(y.R0b),_=(0,y.f3M)(Ra),M=(0,y.f3M)(Wa),L=(0,y.f3M)(cn);return _.scrollOffset&&C.setOffset(_.scrollOffset),new nc(L,M,C,T,_)}},null!=M&&M.preloadingStrategy?oh(M.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Ns},null!=M&&M.initialNavigation?wl(M):[],[{provide:ic,useFactory:Xr},{provide:y.tb,multi:!0,useExisting:ic}]]}}static forChild(_){return{ngModule:C,providers:[{provide:ns,multi:!0,useValue:_}]}}}return C.\u0275fac=function(_){return new(_||C)(y.LFG(Ro,8))},C.\u0275mod=y.oAB({type:C}),C.\u0275inj=y.cJS({imports:[En]}),C})();function jl(C){if(gi&&C)throw new y.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wl(C){return["disabled"===C.initialNavigation?ia(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const T=(0,y.f3M)(wi);return()=>{T.setUpLocationChangeListener()}}},{provide:Qa,useValue:2}]).\u0275providers:[],"enabledBlocking"===C.initialNavigation?ia(2,[{provide:Qa,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:T=>{const _=T.get(He.V_,Promise.resolve());return()=>_.then(()=>new Promise(M=>{const L=T.get(wi),K=T.get(_u);(function yu(C,T){C.events.pipe((0,ot.h)(_=>_ instanceof vt||_ instanceof xt||_ instanceof ln||_ instanceof en),(0,ze.U)(_=>_ instanceof vt||_ instanceof en?ho.COMPLETE:_ instanceof xt&&(0===_.code||1===_.code)?ho.REDIRECTING:ho.FAILED),(0,ot.h)(_=>_!==ho.REDIRECTING),(0,Ze.q)(1)).subscribe(()=>{T()})})(L,()=>{M(!0)}),T.get(Wa).afterPreactivation=()=>(M(!0),K.closed?(0,W.of)(void 0):K),L.initialNavigation()}))}}]).\u0275providers:[]]}const ic=new y.OlP(gi?"Router Initializer":"")},3942:(Wt,nt,B)=>{"use strict";B.d(nt,{Z:()=>Ke});var y=B(2090),f=B(4859),W=B(9681),oe=B(1877);class be{constructor(_e,ye){this._delegate=_e,this.firebase=ye,(0,W._addComponent)(_e,new f.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(_e,ye=W._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(_e);return!rt.isInitialized()&&"EXPLICIT"===(null===(Oe=rt.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:ye})}_removeServiceInstance(_e,ye=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ye)}_addComponent(_e){(0,W._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,W._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function we(){const pt=function Me(pt){const _e={},ye={__esModule:!0,initializeApp:function Ye(Te,re={}){const xe=W.initializeApp(Te,re);if((0,y.r3)(_e,xe.name))return _e[xe.name];const Ie=new pt(xe,ye);return _e[xe.name]=Ie,Ie},app:rt,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function Je(Te){const re=Te.name,xe=re.replace("-compat","");if(W._registerComponent(Te)&&"PUBLIC"===Te.type){const Ie=(He=rt())=>{if("function"!=typeof He[xe])throw he.create("invalid-app-argument",{appName:re});return He[xe]()};void 0!==Te.serviceProps&&(0,y.ZB)(Ie,Te.serviceProps),ye[xe]=Ie,pt.prototype[xe]=function(...He){return this._getService.bind(this,re).apply(this,Te.multipleInstances?He:[])}}return"PUBLIC"===Te.type?ye[xe]:null},removeApp:function Oe(Te){delete _e[Te]},useAsService:function ht(Te,re){return"serverAuth"===re?null:re},modularAPIs:W}};function rt(Te){if(!(0,y.r3)(_e,Te=Te||W._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Te});return _e[Te]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Xe(){return Object.keys(_e).map(Te=>_e[Te])}}),rt.App=pt,ye}(be);return pt.INTERNAL=Object.assign(Object.assign({},pt.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function _e(ye){(0,y.ZB)(pt,ye)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),pt}(),ae=new oe.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const pt=self.firebase.SDK_VERSION;pt&&pt.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ke=fe;!function Pe(pt){(0,W.registerVersion)("@firebase/app-compat","0.2.7",pt)}()},9681:(Wt,nt,B)=>{"use strict";B.r(nt),B.d(nt,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>tn,_DEFAULT_ENTRY_NAME:()=>Se,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Ft,_apps:()=>Qe,_clearComponents:()=>It,_components:()=>gt,_getProvider:()=>it,_registerComponent:()=>_n,_removeServiceInstance:()=>de,deleteApp:()=>nr,getApp:()=>on,getApps:()=>Rn,initializeApp:()=>Y,onLog:()=>Vt,registerVersion:()=>Qn,setLogLevel:()=>_r});var y=B(5861),f=B(4859),W=B(1877),oe=B(2090),be=B(8766);class Ce{constructor(St){this.container=St}getPlatformInfoString(){return this.container.getProviders().map(nn=>{if(function he(zt){const St=zt.getComponent();return"VERSION"===(null==St?void 0:St.type)}(nn)){const cn=nn.getImmediate();return`${cn.library}/${cn.version}`}return null}).filter(nn=>nn).join(" ")}}const Me="@firebase/app",fe=new W.Yd("@firebase/app"),Se="[DEFAULT]",Be={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qe=new Map,gt=new Map;function Zt(zt,St){try{zt.container.addComponent(St)}catch(nn){fe.debug(`Component ${St.name} failed to register with FirebaseApp ${zt.name}`,nn)}}function Ft(zt,St){zt.container.addOrOverwriteComponent(St)}function _n(zt){const St=zt.name;if(gt.has(St))return fe.debug(`There were multiple attempts to register component ${St}.`),!1;gt.set(St,zt);for(const nn of Qe.values())Zt(nn,zt);return!0}function it(zt,St){const nn=zt.container.getProvider("heartbeat").getImmediate({optional:!0});return nn&&nn.triggerHeartbeat(),zt.container.getProvider(St)}function de(zt,St,nn=Se){it(zt,St).clearInstance(nn)}function It(){gt.clear()}const Ge=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jt{constructor(St,nn,cn){this._isDeleted=!1,this._options=Object.assign({},St),this._config=Object.assign({},nn),this._name=nn.name,this._automaticDataCollectionEnabled=nn.automaticDataCollectionEnabled,this._container=cn,this.container.addComponent(new f.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(St){this.checkDestroyed(),this._automaticDataCollectionEnabled=St}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(St){this._isDeleted=St}checkDestroyed(){if(this.isDeleted)throw Ge.create("app-deleted",{appName:this._name})}}const tn="9.19.1";function Y(zt,St={}){let nn=zt;"object"!=typeof St&&(St={name:St});const cn=Object.assign({name:Se,automaticDataCollectionEnabled:!1},St),mn=cn.name;if("string"!=typeof mn||!mn)throw Ge.create("bad-app-name",{appName:String(mn)});if(nn||(nn=(0,oe.aH)()),!nn)throw Ge.create("no-options");const vn=Qe.get(mn);if(vn){if((0,oe.vZ)(nn,vn.options)&&(0,oe.vZ)(cn,vn.config))return vn;throw Ge.create("duplicate-app",{appName:mn})}const dr=new f.H0(mn);for(const Ee of gt.values())dr.addComponent(Ee);const Ae=new Jt(nn,cn,dr);return Qe.set(mn,Ae),Ae}function on(zt=Se){const St=Qe.get(zt);if(!St&&zt===Se)return Y();if(!St)throw Ge.create("no-app",{appName:zt});return St}function Rn(){return Array.from(Qe.values())}function nr(zt){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,y.Z)(function*(zt){const St=zt.name;Qe.has(St)&&(Qe.delete(St),yield Promise.all(zt.container.getProviders().map(nn=>nn.delete())),zt.isDeleted=!0)})).apply(this,arguments)}function Qn(zt,St,nn){var cn;let mn=null!==(cn=Be[zt])&&void 0!==cn?cn:zt;nn&&(mn+=`-${nn}`);const vn=mn.match(/\s|\//),dr=St.match(/\s|\//);if(vn||dr){const Ae=[`Unable to register library "${mn}" with version "${St}":`];return vn&&Ae.push(`library name "${mn}" contains illegal characters (whitespace or "/")`),vn&&dr&&Ae.push("and"),dr&&Ae.push(`version name "${St}" contains illegal characters (whitespace or "/")`),void fe.warn(Ae.join(" "))}_n(new f.wA(`${mn}-version`,()=>({library:mn,version:St}),"VERSION"))}function Vt(zt,St){if(null!==zt&&"function"!=typeof zt)throw Ge.create("invalid-log-argument");(0,W.Am)(zt,St)}function _r(zt){(0,W.Ub)(zt)}const ar="firebase-heartbeat-database",Ir=1,qr="firebase-heartbeat-store";let mr=null;function pn(){return mr||(mr=(0,be.X3)(ar,Ir,{upgrade:(zt,St)=>{0===St&&zt.createObjectStore(qr)}}).catch(zt=>{throw Ge.create("idb-open",{originalErrorMessage:zt.message})})),mr}function hn(){return(hn=(0,y.Z)(function*(zt){try{return(yield pn()).transaction(qr).objectStore(qr).get(An(zt))}catch(St){if(St instanceof oe.ZR)fe.warn(St.message);else{const nn=Ge.create("idb-get",{originalErrorMessage:null==St?void 0:St.message});fe.warn(nn.message)}}})).apply(this,arguments)}function Nt(zt,St){return lr.apply(this,arguments)}function lr(){return(lr=(0,y.Z)(function*(zt,St){try{const cn=(yield pn()).transaction(qr,"readwrite");return yield cn.objectStore(qr).put(St,An(zt)),cn.done}catch(nn){if(nn instanceof oe.ZR)fe.warn(nn.message);else{const cn=Ge.create("idb-set",{originalErrorMessage:null==nn?void 0:nn.message});fe.warn(cn.message)}}})).apply(this,arguments)}function An(zt){return`${zt.name}!${zt.options.appId}`}class Di{constructor(St){this.container=St,this._heartbeatsCache=null;const nn=this.container.getProvider("app").getImmediate();this._storage=new kn(nn),this._heartbeatsCachePromise=this._storage.read().then(cn=>(this._heartbeatsCache=cn,cn))}triggerHeartbeat(){var St=this;return(0,y.Z)(function*(){const cn=St.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),mn=er();if(null===St._heartbeatsCache&&(St._heartbeatsCache=yield St._heartbeatsCachePromise),St._heartbeatsCache.lastSentHeartbeatDate!==mn&&!St._heartbeatsCache.heartbeats.some(vn=>vn.date===mn))return St._heartbeatsCache.heartbeats.push({date:mn,agent:cn}),St._heartbeatsCache.heartbeats=St._heartbeatsCache.heartbeats.filter(vn=>{const dr=new Date(vn.date).valueOf();return Date.now()-dr<=2592e6}),St._storage.overwrite(St._heartbeatsCache)})()}getHeartbeatsHeader(){var St=this;return(0,y.Z)(function*(){if(null===St._heartbeatsCache&&(yield St._heartbeatsCachePromise),null===St._heartbeatsCache||0===St._heartbeatsCache.heartbeats.length)return"";const nn=er(),{heartbeatsToSend:cn,unsentEntries:mn}=function jr(zt,St=1024){const nn=[];let cn=zt.slice();for(const mn of zt){const vn=nn.find(dr=>dr.agent===mn.agent);if(vn){if(vn.dates.push(mn.date),In(nn)>St){vn.dates.pop();break}}else if(nn.push({agent:mn.agent,dates:[mn.date]}),In(nn)>St){nn.pop();break}cn=cn.slice(1)}return{heartbeatsToSend:nn,unsentEntries:cn}}(St._heartbeatsCache.heartbeats),vn=(0,oe.L)(JSON.stringify({version:2,heartbeats:cn}));return St._heartbeatsCache.lastSentHeartbeatDate=nn,mn.length>0?(St._heartbeatsCache.heartbeats=mn,yield St._storage.overwrite(St._heartbeatsCache)):(St._heartbeatsCache.heartbeats=[],St._storage.overwrite(St._heartbeatsCache)),vn})()}}function er(){return(new Date).toISOString().substring(0,10)}class kn{constructor(St){this.app=St,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var St=this;return(0,y.Z)(function*(){return(yield St._canUseIndexedDBPromise)&&(yield function Lt(zt){return hn.apply(this,arguments)}(St.app))||{heartbeats:[]}})()}overwrite(St){var nn=this;return(0,y.Z)(function*(){var cn;if(yield nn._canUseIndexedDBPromise){const vn=yield nn.read();return Nt(nn.app,{lastSentHeartbeatDate:null!==(cn=St.lastSentHeartbeatDate)&&void 0!==cn?cn:vn.lastSentHeartbeatDate,heartbeats:St.heartbeats})}})()}add(St){var nn=this;return(0,y.Z)(function*(){var cn;if(yield nn._canUseIndexedDBPromise){const vn=yield nn.read();return Nt(nn.app,{lastSentHeartbeatDate:null!==(cn=St.lastSentHeartbeatDate)&&void 0!==cn?cn:vn.lastSentHeartbeatDate,heartbeats:[...vn.heartbeats,...St.heartbeats]})}})()}}function In(zt){return(0,oe.L)(JSON.stringify({version:2,heartbeats:zt})).length}!function ti(zt){_n(new f.wA("platform-logger",St=>new Ce(St),"PRIVATE")),_n(new f.wA("heartbeat",St=>new Di(St),"PRIVATE")),Qn(Me,"0.9.7",zt),Qn(Me,"0.9.7","esm2017"),Qn("fire-js","")}("")},4859:(Wt,nt,B)=>{"use strict";B.d(nt,{H0:()=>Me,wA:()=>W,zt:()=>be});var y=B(5861),f=B(2090);class W{constructor(fe,ae,ue){this.name=fe,this.instanceFactory=ae,this.type=ue,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const oe="[DEFAULT]";class be{constructor(fe,ae){this.name=fe,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const ae=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(ae)){const ue=new f.BH;if(this.instancesDeferred.set(ae,ue),this.isInitialized(ae)||this.shouldAutoInitialize())try{const De=this.getOrInitializeService({instanceIdentifier:ae});De&&ue.resolve(De)}catch{}}return this.instancesDeferred.get(ae).promise}getImmediate(fe){var ae;const ue=this.normalizeInstanceIdentifier(null==fe?void 0:fe.identifier),De=null!==(ae=null==fe?void 0:fe.optional)&&void 0!==ae&&ae;if(!this.isInitialized(ue)&&!this.shouldAutoInitialize()){if(De)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ue})}catch(Pe){if(De)return null;throw Pe}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function he(we){return"EAGER"===we.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[ae,ue]of this.instancesDeferred.entries()){const De=this.normalizeInstanceIdentifier(ae);try{const Pe=this.getOrInitializeService({instanceIdentifier:De});ue.resolve(Pe)}catch{}}}}clearInstance(fe=oe){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,y.Z)(function*(){const ae=Array.from(fe.instances.values());yield Promise.all([...ae.filter(ue=>"INTERNAL"in ue).map(ue=>ue.INTERNAL.delete()),...ae.filter(ue=>"_delete"in ue).map(ue=>ue._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=oe){return this.instances.has(fe)}getOptions(fe=oe){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:ae={}}=fe,ue=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(ue))throw Error(`${this.name}(${ue}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const De=this.getOrInitializeService({instanceIdentifier:ue,options:ae});for(const[Pe,Ke]of this.instancesDeferred.entries())ue===this.normalizeInstanceIdentifier(Pe)&&Ke.resolve(De);return De}onInit(fe,ae){var ue;const De=this.normalizeInstanceIdentifier(ae),Pe=null!==(ue=this.onInitCallbacks.get(De))&&void 0!==ue?ue:new Set;Pe.add(fe),this.onInitCallbacks.set(De,Pe);const Ke=this.instances.get(De);return Ke&&fe(Ke,De),()=>{Pe.delete(fe)}}invokeOnInitCallbacks(fe,ae){const ue=this.onInitCallbacks.get(ae);if(ue)for(const De of ue)try{De(fe,ae)}catch{}}getOrInitializeService({instanceIdentifier:fe,options:ae={}}){let ue=this.instances.get(fe);if(!ue&&this.component&&(ue=this.component.instanceFactory(this.container,{instanceIdentifier:(we=fe,we===oe?void 0:we),options:ae}),this.instances.set(fe,ue),this.instancesOptions.set(fe,ae),this.invokeOnInitCallbacks(ue,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,ue)}catch{}var we;return ue||null}normalizeInstanceIdentifier(fe=oe){return this.component?this.component.multipleInstances?fe:oe:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const ae=this.getProvider(fe.name);if(ae.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);ae.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const ae=new be(fe,this);return this.providers.set(fe,ae),ae}getProviders(){return Array.from(this.providers.values())}}},1877:(Wt,nt,B)=>{"use strict";B.d(nt,{Am:()=>we,Ub:()=>Me,Yd:()=>he,in:()=>f});const y=[];var f=(()=>{return(fe=f||(f={}))[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",f;var fe})();const W={debug:f.DEBUG,verbose:f.VERBOSE,info:f.INFO,warn:f.WARN,error:f.ERROR,silent:f.SILENT},oe=f.INFO,be={[f.DEBUG]:"log",[f.VERBOSE]:"log",[f.INFO]:"info",[f.WARN]:"warn",[f.ERROR]:"error"},Ce=(fe,ae,...ue)=>{if(ae<fe.logLevel)return;const De=(new Date).toISOString(),Pe=be[ae];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[Pe](`[${De}]  ${fe.name}:`,...ue)};class he{constructor(ae){this.name=ae,this._logLevel=oe,this._logHandler=Ce,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in f))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?W[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,f.DEBUG,...ae),this._logHandler(this,f.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,f.VERBOSE,...ae),this._logHandler(this,f.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,f.INFO,...ae),this._logHandler(this,f.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,f.WARN,...ae),this._logHandler(this,f.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,f.ERROR,...ae),this._logHandler(this,f.ERROR,...ae)}}function Me(fe){y.forEach(ae=>{ae.setLogLevel(fe)})}function we(fe,ae){for(const ue of y){let De=null;ae&&ae.level&&(De=W[ae.level]),ue.userLogHandler=null===fe?null:(Pe,Ke,...pt)=>{const _e=pt.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");Ke>=(null!=De?De:Pe.logLevel)&&fe({level:f[Ke].toLowerCase(),message:_e,args:pt,type:Pe.name})}}}},4709:(Wt,nt,B)=>{"use strict";B.d(nt,{dr:()=>Di,oU:()=>jr,cs:()=>Ys,YG:()=>St,Sm:()=>nn,PM:()=>cn,Zi:()=>vn,Dq:()=>Ae,wI:()=>Ct,W2:()=>at,fr:()=>Dt,jY:()=>Mt,Gu:()=>gn,gu:()=>ur,Xz:()=>Dr,pK:()=>yi,Ie:()=>Hr,Q$:()=>hr,q_:()=>Pn,d8:()=>Es,jP:()=>Ni,Nd:()=>Fe,yq:()=>jn,ZU:()=>Gr,UN:()=>Qi,yW:()=>Pi,wd:()=>li,sr:()=>bo,Pc:()=>xo,r4:()=>uo,as:()=>_r,YI:()=>vs,j9:()=>qr});var y=B(5861),f=B(4650),W=B(433),oe=B(655),be=B(8421),Ce=B(9751),he=B(5577),Me=B(1144),we=B(576),fe=B(3268);const ae=["addListener","removeListener"],ue=["addEventListener","removeEventListener"],De=["on","off"];function Pe(I,j,b,U){if((0,we.m)(b)&&(U=b,b=void 0),U)return Pe(I,j,b).pipe((0,fe.Z)(U));const[se,O]=function ye(I){return(0,we.m)(I.addEventListener)&&(0,we.m)(I.removeEventListener)}(I)?ue.map(S=>x=>I[S](j,x,b)):function pt(I){return(0,we.m)(I.addListener)&&(0,we.m)(I.removeListener)}(I)?ae.map(Ke(I,j)):function _e(I){return(0,we.m)(I.on)&&(0,we.m)(I.off)}(I)?De.map(Ke(I,j)):[];if(!se&&(0,Me.z)(I))return(0,he.z)(S=>Pe(S,j,b))((0,be.Xf)(I));if(!se)throw new TypeError("Invalid event target");return new Ce.y(S=>{const x=(...q)=>S.next(1<q.length?q:q[0]);return se(x),()=>O(x)})}function Ke(I,j){return b=>U=>I[b](j,U)}var Oe=B(7579),rt=B(1135),Ye=B(2435),re=(B(2200),B(500),B(9892),B(1898),B(6406)),xe=B(9397),Ie=B(3982),He=B(9459),ut=(B(1557),B(6280)),ot=(B(3457),B(4349),B(9816)),Se=B(9300),Be=B(3900),Qe=B(1884),gt=B(6895);const Ft=re.i,de=["*"],It=["outlet"],Bt=[[["","slot","top"]],"*"],Ge=["[slot=top]","*"];function tn(I,j){if(1&I&&f.GkF(0,1),2&I){const b=f.oxw();f.Q6J("ngTemplateOutlet",b.template)}}const Y=I=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(I):"function"==typeof requestAnimationFrame?requestAnimationFrame(I):setTimeout(I);let on=(()=>{class I{constructor(b,U){this.injector=b,this.el=U,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(b){this.el.nativeElement.value=this.lastValue=b,Rn(this.el)}handleValueChange(b,U){b===this.el.nativeElement&&(U!==this.lastValue&&(this.lastValue=U,this.onChange(U)),Rn(this.el))}_handleBlurEvent(b){b===this.el.nativeElement&&(this.onTouched(),Rn(this.el))}registerOnChange(b){this.onChange=b}registerOnTouched(b){this.onTouched=b}setDisabledState(b){this.el.nativeElement.disabled=b}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let b;try{b=this.injector.get(W.a5)}catch{}if(!b)return;b.statusChanges&&(this.statusChanges=b.statusChanges.subscribe(()=>Rn(this.el)));const U=b.control;U&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(O=>{if(typeof U[O]<"u"){const S=U[O].bind(U);U[O]=(...x)=>{S(...x),Rn(this.el)}}})}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.zs3),f.Y36(f.SBq))},I.\u0275dir=f.lG2({type:I,hostBindings:function(b,U){1&b&&f.NdJ("ionBlur",function(O){return U._handleBlurEvent(O.target)})}}),I})();const Rn=I=>{Y(()=>{const j=I.nativeElement,b=null!=j.value&&j.value.toString().length>0,U=nr(j);Wn(j,U);const se=j.closest("ion-item");se&&Wn(se,b?[...U,"item-has-value"]:U)})},nr=I=>{const j=I.classList,b=[];for(let U=0;U<j.length;U++){const se=j.item(U);null!==se&&Qn(se,"ng-")&&b.push(`ion-${se.substring(3)}`)}return b},Wn=(I,j)=>{const b=I.classList;b.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),b.add(...j)},Qn=(I,j)=>I.substring(0,j.length)===j;let _r=(()=>{class I extends on{constructor(b,U){super(b,U)}handleInputEvent(b){this.handleValueChange(b,b.value)}registerOnChange(b){super.registerOnChange(U=>{b(""===U?null:parseFloat(U))})}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.zs3),f.Y36(f.SBq))},I.\u0275dir=f.lG2({type:I,selectors:[["ion-input","type","number"]],hostBindings:function(b,U){1&b&&f.NdJ("ionInput",function(O){return U.handleInputEvent(O.target)})},features:[f._Bn([{provide:W.JU,useExisting:I,multi:!0}]),f.qOj]}),I})(),qr=(()=>{class I extends on{constructor(b,U){super(b,U)}_handleInputEvent(b){this.handleValueChange(b,b.value)}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.zs3),f.Y36(f.SBq))},I.\u0275dir=f.lG2({type:I,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(b,U){1&b&&f.NdJ("ionInput",function(O){return U._handleInputEvent(O.target)})},features:[f._Bn([{provide:W.JU,useExisting:I,multi:!0}]),f.qOj]}),I})();const mr=(I,j)=>{const b=I.prototype;j.forEach(U=>{Object.defineProperty(b,U,{get(){return this.el[U]},set(se){this.z.runOutsideAngular(()=>this.el[U]=se)}})})},pn=(I,j)=>{const b=I.prototype;j.forEach(U=>{b[U]=function(){const se=arguments;return this.z.runOutsideAngular(()=>this.el[U].apply(this.el,se))}})},Lt=(I,j,b)=>{b.forEach(U=>I[U]=Pe(j,U))};function Nt(I){return function(b){const{defineCustomElementFn:U,inputs:se,methods:O}=I;return void 0!==U&&U(),se&&mr(b,se),O&&pn(b,O),b}}let Di=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-app"]],ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({})],I),I})(),jr=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],I),I})(),St=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement,Lt(this,this.el,["ionFocus","ionBlur"])}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],I),I})(),nn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["collapse"]})],I),I})(),cn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],I),I})(),vn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode","translucent"]})],I),I})(),Ae=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode"]})],I),I})(),Ct=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],I),I})(),at=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement,Lt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],I),I})(),Dt=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-footer"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["collapse","mode","translucent"]})],I),I})(),Mt=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["fixed"]})],I),I})(),gn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["collapse","mode","translucent"]})],I),I})(),ur=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],I),I})(),Dr=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement,Lt(this,this.el,["ionImgWillLoad","ionImgDidLoad","ionError"])}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-img"]],inputs:{alt:"alt",src:"src"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["alt","src"]})],I),I})(),yi=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement,Lt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],I),I})(),Hr=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],I),I})(),hr=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode","position"]})],I),I})(),Pn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],I),I})(),Fe=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-row"]],ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({})],I),I})(),jn=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode","selectedTab","translucent"]})],I),I})(),Gr=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],I),I})(),Pi=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode"]})],I),I})(),li=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","size"]})],I),I})(),bo=(()=>{let I=class{constructor(b,U,se){this.z=se,b.detach(),this.el=U.nativeElement}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:de,decls:1,vars:0,template:function(b,U){1&b&&(f.F$t(),f.Hsn(0))},encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["color","mode"]})],I),I})(),ii=(()=>{class I{get(b,U){const se=ki();return se?se.get(b,U):null}getBoolean(b,U){const se=ki();return!!se&&se.getBoolean(b,U)}getNumber(b,U){const se=ki();return se?se.getNumber(b,U):0}}return I.\u0275fac=function(b){return new(b||I)},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Ki=new f.OlP("USERCONFIG"),ki=()=>{if(typeof window<"u"){const I=window.Ionic;if(null!=I&&I.config)return I.config}return null};let Qo=(()=>{class I{constructor(b,U){this.doc=b,this.backButton=new Oe.x,this.keyboardDidShow=new Oe.x,this.keyboardDidHide=new Oe.x,this.pause=new Oe.x,this.resume=new Oe.x,this.resize=new Oe.x,U.run(()=>{var se;let O;this.win=b.defaultView,this.backButton.subscribeWithPriority=function(S,x){return this.subscribe(q=>q.register(S,et=>U.run(()=>x(et))))},si(this.pause,b,"pause"),si(this.resume,b,"resume"),si(this.backButton,b,"ionBackButton"),si(this.resize,this.win,"resize"),si(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),si(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(S=>{O=S}),null!==(se=this.win)&&void 0!==se&&se.cordova?b.addEventListener("deviceready",()=>{O("cordova")},{once:!0}):O("dom")})}is(b){return(0,re.a)(this.win,b)}platforms(){return(0,re.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(b){return so(this.win.location.href,b)}isLandscape(){return!this.isPortrait()}isPortrait(){var b,U;return null===(b=(U=this.win).matchMedia)||void 0===b?void 0:b.call(U,"(orientation: portrait)").matches}testUserAgent(b){const U=this.win.navigator;return!!(null!=U&&U.userAgent&&U.userAgent.indexOf(b)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return I.\u0275fac=function(b){return new(b||I)(f.LFG(gt.K0),f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const so=(I,j)=>{j=j.replace(/[[\]\\]/g,"\\$&");const U=new RegExp("[\\?&]"+j+"=([^&#]*)").exec(I);return U?decodeURIComponent(U[1].replace(/\+/g," ")):null},si=(I,j,b)=>{j&&j.addEventListener(b,U=>{I.next(null!=U?U.detail:void 0)})};let Hs=(()=>{class I{constructor(b,U,se,O){this.location=U,this.serializer=se,this.router=O,this.direction=fs,this.animated=vi,this.guessDirection="forward",this.lastNavId=-1,O&&O.events.subscribe(S=>{if(S instanceof Ye.OD){const x=S.restoredState?S.restoredState.navigationId:S.id;this.guessDirection=x<this.lastNavId?"back":"forward",this.guessAnimation=S.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?S.id:x}}),b.backButton.subscribeWithPriority(0,S=>{this.pop(),S()})}navigateForward(b,U={}){return this.setDirection("forward",U.animated,U.animationDirection,U.animation),this.navigate(b,U)}navigateBack(b,U={}){return this.setDirection("back",U.animated,U.animationDirection,U.animation),this.navigate(b,U)}navigateRoot(b,U={}){return this.setDirection("root",U.animated,U.animationDirection,U.animation),this.navigate(b,U)}back(b={animated:!0,animationDirection:"back"}){return this.setDirection("back",b.animated,b.animationDirection,b.animation),this.location.back()}pop(){var b=this;return(0,y.Z)(function*(){let U=b.topOutlet;for(;U&&!(yield U.pop());)U=U.parentOutlet})()}setDirection(b,U,se,O){this.direction=b,this.animated=go(b,U,se),this.animationBuilder=O}setTopOutlet(b){this.topOutlet=b}consumeTransition(){let U,b="root";const se=this.animationBuilder;return"auto"===this.direction?(b=this.guessDirection,U=this.guessAnimation):(U=this.animated,b=this.direction),this.direction=fs,this.animated=vi,this.animationBuilder=void 0,{direction:b,animation:U,animationBuilder:se}}navigate(b,U){if(Array.isArray(b))return this.router.navigate(b,U);{const se=this.serializer.parse(b.toString());return void 0!==U.queryParams&&(se.queryParams={...U.queryParams}),void 0!==U.fragment&&(se.fragment=U.fragment),this.router.navigateByUrl(se,U)}}}return I.\u0275fac=function(b){return new(b||I)(f.LFG(Qo),f.LFG(gt.Ye),f.LFG(Ye.Hx),f.LFG(Ye.F0,8))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const go=(I,j,b)=>{if(!1!==j){if(void 0!==b)return b;if("forward"===I||"back"===I)return I;if("root"===I&&!0===j)return"forward"}},fs="auto",vi=void 0;class ps{constructor(j={}){this.data=j}get(j){return this.data[j]}}let As=(()=>{class I{constructor(){this.zone=(0,f.f3M)(f.R0b),this.applicationRef=(0,f.f3M)(f.z2F)}create(b,U,se){return new Ca(b,U,this.applicationRef,this.zone,se)}}return I.\u0275fac=function(b){return new(b||I)},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})();class Ca{constructor(j,b,U,se,O){this.environmentInjector=j,this.injector=b,this.applicationRef=U,this.zone=se,this.elementReferenceKey=O,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(j,b,U,se){return this.zone.run(()=>new Promise(O=>{const S={...U};void 0!==this.elementReferenceKey&&(S[this.elementReferenceKey]=j),O(da(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,j,b,S,se))}))}removeViewFromDom(j,b){return this.zone.run(()=>new Promise(U=>{const se=this.elRefMap.get(b);if(se){se.destroy(),this.elRefMap.delete(b);const O=this.elEventsMap.get(b);O&&(O(),this.elEventsMap.delete(b))}U()}))}}const da=(I,j,b,U,se,O,S,x,q,et)=>{const kt=f.zs3.create({providers:Vi(q),parent:b}),Xn=(0,f.LMc)(x,{environmentInjector:j,elementInjector:kt}),Pr=Xn.instance,tr=Xn.location.nativeElement;if(q&&Object.assign(Pr,q),et)for(const Kr of et)tr.classList.add(Kr);const es=xs(I,Pr,tr);return S.appendChild(tr),U.attachView(Xn.hostView),se.set(tr,Xn),O.set(tr,es),tr},Co=[He.L,He.a,He.b,He.c,He.d],xs=(I,j,b)=>I.run(()=>{const U=Co.filter(se=>"function"==typeof j[se]).map(se=>{const O=S=>j[se](S.detail);return b.addEventListener(se,O),()=>b.removeEventListener(se,O)});return()=>U.forEach(se=>se())}),Zi=new f.OlP("NavParamsToken"),Vi=I=>[{provide:Zi,useValue:I},{provide:ps,useFactory:Do,deps:[Zi]}],Do=I=>new ps(I),zs=(I,j)=>((I=I.filter(b=>b.stackId!==j.stackId)).push(j),I),Gs=(I,j)=>{const b=I.createUrlTree(["."],{relativeTo:j});return I.serializeUrl(b)},lo=(I,j)=>{if(!I)return;const b=Da(j);for(let U=0;U<b.length;U++){if(U>=I.length)return b[U];if(b[U]!==I[U])return}},Da=I=>I.split("/").map(j=>j.trim()).filter(j=>""!==j),hi=I=>{I&&(I.ref.destroy(),I.unlistenEvents())};class Ws{constructor(j,b,U,se,O,S){this.containerEl=b,this.router=U,this.navCtrl=se,this.zone=O,this.location=S,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==j?Da(j):void 0}createView(j,b){var U;const se=Gs(this.router,b),O=null==j||null===(U=j.location)||void 0===U?void 0:U.nativeElement,S=xs(this.zone,j.instance,O);return{id:this.nextId++,stackId:lo(this.tabsPrefix,se),unlistenEvents:S,element:O,ref:j,url:se}}getExistingView(j){const b=Gs(this.router,j),U=this.views.find(se=>se.url===b);return U&&U.ref.changeDetectorRef.reattach(),U}setActive(j){var b,U,se;const O=this.navCtrl.consumeTransition();let{direction:S,animation:x,animationBuilder:q}=O;const et=this.activeView,kt=((I,j)=>!j||I.stackId!==j.stackId)(j,et);kt&&(S="back",x=void 0);const Xn=this.views.slice();let Pr;const tr=this.router;tr.getCurrentNavigation?Pr=tr.getCurrentNavigation():null!==(b=tr.navigations)&&void 0!==b&&b.value&&(Pr=tr.navigations.value),null!==(U=Pr)&&void 0!==U&&null!==(se=U.extras)&&void 0!==se&&se.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const es=this.views.includes(j),Kr=this.insertView(j,S);es||j.ref.changeDetectorRef.detectChanges();const ms=j.animationBuilder;return void 0===q&&"back"===S&&!kt&&void 0!==ms&&(q=ms),et&&(et.animationBuilder=q),this.zone.runOutsideAngular(()=>this.wait(()=>(et&&et.ref.changeDetectorRef.detach(),j.ref.changeDetectorRef.reattach(),this.transition(j,et,x,this.canGoBack(1),!1,q).then(()=>Xi(j,Kr,Xn,this.location,this.zone)).then(()=>({enteringView:j,direction:S,animation:x,tabSwitch:kt})))))}canGoBack(j,b=this.getActiveStackId()){return this.getStack(b).length>j}pop(j,b=this.getActiveStackId()){return this.zone.run(()=>{const U=this.getStack(b);if(U.length<=j)return Promise.resolve(!1);const se=U[U.length-j-1];let O=se.url;const S=se.savedData;if(S){var x,q;const kt=S.get("primary");null!=kt&&null!==(x=kt.route)&&void 0!==x&&null!==(q=x._routerState)&&void 0!==q&&q.snapshot.url&&(O=kt.route._routerState.snapshot.url)}const{animationBuilder:et}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(O,{...se.savedExtras,animation:et}).then(()=>!0)})}startBackTransition(){const j=this.activeView;if(j){const b=this.getStack(j.stackId),U=b[b.length-2],se=U.animationBuilder;return this.wait(()=>this.transition(U,j,"back",this.canGoBack(2),!0,se))}return Promise.resolve()}endBackTransition(j){j?(this.skipTransition=!0,this.pop(1)):this.activeView&&qs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(j){const b=this.getStack(j);return b.length>0?b[b.length-1]:void 0}getRootUrl(j){const b=this.getStack(j);return b.length>0?b[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(hi),this.activeView=void 0,this.views=[]}getStack(j){return this.views.filter(b=>b.stackId===j)}insertView(j,b){return this.activeView=j,this.views=((I,j,b)=>"root"===b?zs(I,j):"forward"===b?((I,j)=>(I.indexOf(j)>=0?I=I.filter(U=>U.stackId!==j.stackId||U.id<=j.id):I.push(j),I))(I,j):((I,j)=>I.indexOf(j)>=0?I.filter(U=>U.stackId!==j.stackId||U.id<=j.id):zs(I,j))(I,j))(this.views,j,b),this.views.slice()}transition(j,b,U,se,O,S){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(b===j)return Promise.resolve(!1);const x=j?j.element:void 0,q=b?b.element:void 0,et=this.containerEl;return x&&x!==q&&(x.classList.add("ion-page"),x.classList.add("ion-page-invisible"),x.parentElement!==et&&et.appendChild(x),et.commit)?et.commit(x,q,{duration:void 0===U?0:void 0,direction:U,showGoBack:se,progressAnimation:O,animationBuilder:S}):Promise.resolve(!1)}wait(j){var b=this;return(0,y.Z)(function*(){void 0!==b.runningTask&&(yield b.runningTask,b.runningTask=void 0);const U=b.runningTask=j();return U.finally(()=>b.runningTask=void 0),U})()}}const Xi=(I,j,b,U,se)=>"function"==typeof requestAnimationFrame?new Promise(O=>{requestAnimationFrame(()=>{qs(I,j,b,U,se),O()})}):Promise.resolve(),qs=(I,j,b,U,se)=>{se.run(()=>b.filter(O=>!j.includes(O)).forEach(hi)),j.forEach(O=>{const x=U.path().split("?")[0].split("#")[0];if(O!==I&&O.url!==x){const q=O.element;q.setAttribute("aria-hidden","true"),q.classList.add("ion-page-hidden"),O.ref.changeDetectorRef.detach()}})};let Ni=(()=>{class I{constructor(b,U,se,O,S,x,q,et){this.parentOutlet=et,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new rt.X(null),this.stackEvents=new f.vpe,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.parentContexts=(0,f.f3M)(Ye.y6),this.location=(0,f.f3M)(f.s_b),this.environmentInjector=(0,f.f3M)(f.lqb),this.config=(0,f.f3M)(ii),this.navCtrl=(0,f.f3M)(Hs),this.nativeEl=O.nativeElement,this.name=b||Ye.eC,this.tabsPrefix="true"===U?Gs(S,q):void 0,this.stackCtrl=new Ws(this.tabsPrefix,this.nativeEl,S,this.navCtrl,x,se),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(b){this.nativeEl.animation=b}set animated(b){this.nativeEl.animated=b}set swipeGesture(b){this._swipeGesture=b,this.nativeEl.swipeHandler=b?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:U=>this.stackCtrl.endBackTransition(U)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const b=this.getContext();null!=b&&b.route&&this.activateWith(b.route,b.injector)}new Promise(b=>(0,xe.c)(this.nativeEl,b)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(b,U){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const U=this.getContext();this.activatedView.savedData=new Map(U.children.contexts);const se=this.activatedView.savedData.get("primary");if(se&&U.route&&(se.route={...U.route}),this.activatedView.savedExtras={},U.route){const O=U.route.snapshot;this.activatedView.savedExtras.queryParams=O.queryParams,this.activatedView.savedExtras.fragment=O.fragment}}const b=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,U){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;let se,O=this.stackCtrl.getExistingView(b);if(O){se=this.activated=O.ref;const x=O.savedData;x&&(this.getContext().children.contexts=x),this.updateActivatedRouteProxy(se.instance,b)}else{var S;const x=b._futureSnapshot,q=this.parentContexts.getOrCreateContext(this.name).children,et=new rt.X(null),kt=this.createActivatedRouteProxy(et,b),Xn=new ji(kt,q,this.location.injector),Pr=null!==(S=x.routeConfig.component)&&void 0!==S?S:x.component;se=this.activated=this.location.createComponent(Pr,{index:this.location.length,injector:Xn,environmentInjector:null!=U?U:this.environmentInjector}),et.next(se.instance),O=this.stackCtrl.createView(this.activated,b),this.proxyMap.set(se.instance,kt),this.currentActivatedRoute$.next({component:se.instance,activatedRoute:b})}this.activatedView=O,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(O).then(x=>{this.activateEvents.emit(se.instance),this.stackEvents.emit(x)})}canGoBack(b=1,U){return this.stackCtrl.canGoBack(b,U)}pop(b=1,U){return this.stackCtrl.pop(b,U)}getLastUrl(b){const U=this.stackCtrl.getLastUrl(b);return U?U.url:void 0}getLastRouteView(b){return this.stackCtrl.getLastUrl(b)}getRootView(b){return this.stackCtrl.getRootUrl(b)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(b,U){const se=new Ye.gz;return se._futureSnapshot=U._futureSnapshot,se._routerState=U._routerState,se.snapshot=U.snapshot,se.outlet=U.outlet,se.component=U.component,se._paramMap=this.proxyObservable(b,"paramMap"),se._queryParamMap=this.proxyObservable(b,"queryParamMap"),se.url=this.proxyObservable(b,"url"),se.params=this.proxyObservable(b,"params"),se.queryParams=this.proxyObservable(b,"queryParams"),se.fragment=this.proxyObservable(b,"fragment"),se.data=this.proxyObservable(b,"data"),se}proxyObservable(b,U){return b.pipe((0,Se.h)(se=>!!se),(0,Be.w)(se=>this.currentActivatedRoute$.pipe((0,Se.h)(O=>null!==O&&O.component===se),(0,Be.w)(O=>O&&O.activatedRoute[U]),(0,Qe.x)())))}updateActivatedRouteProxy(b,U){const se=this.proxyMap.get(b);if(!se)throw new Error("Could not find activated route proxy for view");se._futureSnapshot=U._futureSnapshot,se._routerState=U._routerState,se.snapshot=U.snapshot,se.outlet=U.outlet,se.component=U.component,this.currentActivatedRoute$.next({component:b,activatedRoute:U})}}return I.\u0275fac=function(b){return new(b||I)(f.$8M("name"),f.$8M("tabs"),f.Y36(gt.Ye),f.Y36(f.SBq),f.Y36(Ye.F0),f.Y36(f.R0b),f.Y36(Ye.gz),f.Y36(I,12))},I.\u0275dir=f.lG2({type:I,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),I})();class ji{constructor(j,b,U){this.route=j,this.childContexts=b,this.parent=U}get(j,b){return j===Ye.gz?this.route:j===Ye.y6?this.childContexts:this.parent.get(j,b)}}let Qi=(()=>{class I{constructor(b){this.navCtrl=b,this.ionTabsWillChange=new f.vpe,this.ionTabsDidChange=new f.vpe}onPageSelected(b){const U=b.enteringView.stackId;b.tabSwitch&&void 0!==U&&(this.ionTabsWillChange.emit({tab:U}),this.tabBar&&(this.tabBar.selectedTab=U),this.ionTabsDidChange.emit({tab:U}))}select(b){const U="string"==typeof b,se=U?b:b.detail.tab,O=this.outlet.getActiveStackId()===se,S=`${this.outlet.tabsPrefix}/${se}`;if(U||b.stopPropagation(),O){const x=this.outlet.getActiveStackId(),q=this.outlet.getLastRouteView(x);if((null==q?void 0:q.url)===S)return;const et=this.outlet.getRootView(se);return this.navCtrl.navigateRoot(S,{...et&&S===et.url&&et.savedExtras,animated:!0,animationDirection:"back"})}{const x=this.outlet.getLastRouteView(se);return this.navCtrl.navigateRoot((null==x?void 0:x.url)||S,{...null==x?void 0:x.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(Hs))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-tabs"]],contentQueries:function(b,U,se){if(1&b&&f.Suo(se,jn,5),2&b){let O;f.iGM(O=f.CRH())&&(U.tabBar=O.first)}},viewQuery:function(b,U){if(1&b&&f.Gf(It,5,Ni),2&b){let se;f.iGM(se=f.CRH())&&(U.outlet=se.first)}},hostBindings:function(b,U){1&b&&f.NdJ("ionTabButtonClick",function(O){return U.select(O)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:Ge,decls:5,vars:0,consts:[[1,"tabs-inner"],["tabs","true",3,"stackEvents"],["outlet",""]],template:function(b,U){1&b&&(f.F$t(Bt),f.Hsn(0),f.TgZ(1,"div",0)(2,"ion-router-outlet",1,2),f.NdJ("stackEvents",function(O){return U.onPageSelected(O)}),f.qZA()(),f.Hsn(4,1))},dependencies:[Ni],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:$z-index-page-container}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]}),I})(),Ys=(()=>{class I{constructor(b,U,se){this.routerOutlet=b,this.navCtrl=U,this.config=se}onClick(b){var U;const se=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(U=this.routerOutlet)&&void 0!==U&&U.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),b.preventDefault()):null!=se&&(this.navCtrl.navigateBack(se,{animation:this.routerAnimation}),b.preventDefault())}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(Ni,8),f.Y36(Hs),f.Y36(ii))},I.\u0275dir=f.lG2({type:I,selectors:[["ion-back-button"]],hostBindings:function(b,U){1&b&&f.NdJ("click",function(O){return U.onClick(O)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),I})(),vs=(()=>{class I{constructor(b,U,se,O,S){this.locationStrategy=b,this.navCtrl=U,this.elementRef=se,this.router=O,this.routerLink=S,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}updateTargetUrlAndHref(){var b;if(null!==(b=this.routerLink)&&void 0!==b&&b.urlTree){const U=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=U}}onClick(b){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),b.preventDefault()}}return I.\u0275fac=function(b){return new(b||I)(f.Y36(gt.S$),f.Y36(Hs),f.Y36(f.SBq),f.Y36(Ye.F0),f.Y36(Ye.rH,8))},I.\u0275dir=f.lG2({type:I,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,U){1&b&&f.NdJ("click",function(O){return U.onClick(O)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[f.TTD]}),I})(),Es=(()=>{let I=class{constructor(b,U,se){this.z=se,this.isCmpOpen=!1,this.el=U.nativeElement,this.el.addEventListener("ionMount",()=>{this.isCmpOpen=!0,b.detectChanges()}),this.el.addEventListener("didDismiss",()=>{this.isCmpOpen=!1,b.detectChanges()}),Lt(this,this.el,["ionPopoverDidPresent","ionPopoverWillPresent","ionPopoverWillDismiss","ionPopoverDidDismiss","didPresent","willPresent","willDismiss","didDismiss"])}};return I.\u0275fac=function(b){return new(b||I)(f.Y36(f.sBO),f.Y36(f.SBq),f.Y36(f.R0b))},I.\u0275cmp=f.Xpm({type:I,selectors:[["ion-popover"]],contentQueries:function(b,U,se){if(1&b&&f.Suo(se,f.Rgc,5),2&b){let O;f.iGM(O=f.CRH())&&(U.template=O.first)}},inputs:{alignment:"alignment",animated:"animated",arrow:"arrow",keepContentsMounted:"keepContentsMounted",backdropDismiss:"backdropDismiss",cssClass:"cssClass",dismissOnSelect:"dismissOnSelect",enterAnimation:"enterAnimation",event:"event",isOpen:"isOpen",keyboardClose:"keyboardClose",leaveAnimation:"leaveAnimation",mode:"mode",showBackdrop:"showBackdrop",translucent:"translucent",trigger:"trigger",triggerAction:"triggerAction",reference:"reference",size:"size",side:"side"},decls:1,vars:1,consts:[[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"]],template:function(b,U){1&b&&f.YNc(0,tn,1,1,"ng-container",0),2&b&&f.Q6J("ngIf",U.isCmpOpen||U.keepContentsMounted)},dependencies:[gt.O5,gt.tP],encapsulation:2,changeDetection:0}),I=(0,oe.gn)([Nt({inputs:["alignment","animated","arrow","keepContentsMounted","backdropDismiss","cssClass","dismissOnSelect","enterAnimation","event","isOpen","keyboardClose","leaveAnimation","mode","showBackdrop","translucent","trigger","triggerAction","reference","size","side"],methods:["present","dismiss","onDidDismiss","onWillDismiss"]})],I),I})();class Ks{constructor(j){this.ctrl=j}create(j){return this.ctrl.create(j||{})}dismiss(j,b,U){return this.ctrl.dismiss(j,b,U)}getTop(){return this.ctrl.getTop()}}let So=(()=>{class I extends Ks{constructor(){super(ut.m),this.angularDelegate=(0,f.f3M)(As),this.injector=(0,f.f3M)(f.zs3),this.environmentInjector=(0,f.f3M)(f.lqb)}create(b){return super.create({...b,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return I.\u0275fac=function(b){return new(b||I)},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})(),gs=(()=>{class I extends Ks{constructor(){super(ut.c),this.angularDelegate=(0,f.f3M)(As),this.injector=(0,f.f3M)(f.zs3),this.environmentInjector=(0,f.f3M)(f.lqb)}create(b){return super.create({...b,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return I.\u0275fac=function(b){return new(b||I)},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac}),I})();class uo{shouldDetach(j){return!1}shouldAttach(j){return!1}store(j,b){}retrieve(j){return null}shouldReuseRoute(j,b){if(j.routeConfig!==b.routeConfig)return!1;const U=j.params,se=b.params,O=Object.keys(U),S=Object.keys(se);if(O.length!==S.length)return!1;for(const x of O)if(se[x]!==U[x])return!1;return!0}}const ea=(I,j,b)=>()=>{if(j.defaultView&&typeof window<"u"){(0,Ie.s)({...I,_zoneGate:O=>b.run(O)});const se="__zone_symbol__addEventListener"in j.body?"__zone_symbol__addEventListener":"addEventListener";return function Zt(){var I=[];if(typeof window<"u"){var j=window;(!j.customElements||j.Element&&(!j.Element.prototype.closest||!j.Element.prototype.matches||!j.Element.prototype.remove||!j.Element.prototype.getRootNode))&&I.push(B.e(6748).then(B.t.bind(B,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||j.NodeList&&!j.NodeList.prototype.forEach||!j.fetch||!function(){try{var U=new URL("b","http://a");return U.pathname="c%20d","http://a/c%20d"===U.href&&U.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&I.push(B.e(2214).then(B.t.bind(B,4144,23)))}return Promise.all(I)}().then(()=>((I,j)=>typeof window>"u"?Promise.resolve():(0,ot.p)().then(()=>(Ft(),(0,ot.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),j))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Y,jmp:O=>b.runOutsideAngular(O),ael(O,S,x,q){O[se](S,x,q)},rel(O,S,x,q){O.removeEventListener(S,x,q)}}))}};let xo=(()=>{class I{static forRoot(b){return{ngModule:I,providers:[{provide:Ki,useValue:b},{provide:f.ip1,useFactory:ea,multi:!0,deps:[Ki,gt.K0,f.R0b]}]}}}return I.\u0275fac=function(b){return new(b||I)},I.\u0275mod=f.oAB({type:I}),I.\u0275inj=f.cJS({providers:[As,So,gs],imports:[gt.ez]}),I})()},259:(Wt,nt,B)=>{"use strict";B.d(nt,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=B(9681);(0,y.registerVersion)("firebase","9.19.1","app")},9260:(Wt,nt,B)=>{"use strict";B.d(nt,{Z:()=>y.Z});var y=B(3942);y.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(Wt,nt,B)=>{"use strict";B.r(nt);var y=B(5861),f=B(3942),W=B(2090),oe=B(9681),be=B(1877),Ce=B(655),he=B(4859);const we={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue_EMAIL_SIGNIN="EMAIL_SIGNIN",ue_PASSWORD_RESET="PASSWORD_RESET",ue_RECOVER_EMAIL="RECOVER_EMAIL",ue_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ue_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ue_VERIFY_EMAIL="VERIFY_EMAIL";const Ke=function De(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},pt=function Pe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new be.Yd("@firebase/auth");function rt(v,...h){Oe.logLevel<=be.in.ERROR&&Oe.error(`Auth (${oe.SDK_VERSION}): ${v}`,...h)}function Ye(v,...h){throw Te(v,...h)}function Xe(v,...h){return Te(v,...h)}function Je(v,h,p){const D=Object.assign(Object.assign({},pt()),{[h]:p});return new W.LL("auth","Firebase",D).create(h,{appName:v.name})}function ht(v,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ye(v,"argument-error"),Je(v,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Te(v,...h){if("string"!=typeof v){const p=h[0],D=[...h.slice(1)];return D[0]&&(D[0].appName=v.name),v._errorFactory.create(p,...D)}return _e.create(v,...h)}function re(v,h,...p){if(!v)throw Te(h,...p)}function xe(v){const h="INTERNAL ASSERTION FAILED: "+v;throw rt(h),new Error(h)}function Ie(v,h){v||xe(h)}const He=new Map;function ze(v){Ie(v instanceof Function,"Expected a class definition");let h=He.get(v);return h?(Ie(h instanceof v,"Instance stored in cache mismatched with class"),h):(h=new v,He.set(v,h),h)}function lt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ot(){return"http:"===Re()||"https:"===Re()}function Re(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Qe{constructor(h,p){this.shortDelay=h,this.longDelay=p,Ie(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Se(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function gt(v,h){Ie(v.emulator,"Emulator should always be set here");const{url:p}=v.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Zt{static initialize(h,p,D){this.fetchImpl=h,p&&(this.headersImpl=p),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void xe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void xe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void xe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_n=new Qe(3e4,6e4);function it(v,h){return v.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:v.tenantId}):h}function de(v,h,p,D){return It.apply(this,arguments)}function It(){return(It=(0,y.Z)(function*(v,h,p,D,z={}){return Bt(v,z,(0,y.Z)(function*(){let ie={},Ve={};D&&("GET"===h?Ve=D:ie={body:JSON.stringify(D)});const Tt=(0,W.xO)(Object.assign({key:v.config.apiKey},Ve)).slice(1),Qt=yield v._getAdditionalHeaders();return Qt["Content-Type"]="application/json",v.languageCode&&(Qt["X-Firebase-Locale"]=v.languageCode),Zt.fetch()(Y(v,v.config.apiHost,p,Tt),Object.assign({method:h,headers:Qt,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Bt(v,h,p){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,y.Z)(function*(v,h,p){v._canInitEmulator=!1;const D=Object.assign(Object.assign({},Ft),h);try{const z=new on(v),ie=yield Promise.race([p(),z.promise]);z.clearNetworkTimeout();const Ve=yield ie.json();if("needConfirmation"in Ve)throw Rn(v,"account-exists-with-different-credential",Ve);if(ie.ok&&!("errorMessage"in Ve))return Ve;{const Tt=ie.ok?Ve.errorMessage:Ve.error.message,[Qt,fn]=Tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Qt)throw Rn(v,"credential-already-in-use",Ve);if("EMAIL_EXISTS"===Qt)throw Rn(v,"email-already-in-use",Ve);if("USER_DISABLED"===Qt)throw Rn(v,"user-disabled",Ve);const Fn=D[Qt]||Qt.toLowerCase().replace(/[_\s]+/g,"-");if(fn)throw Je(v,Fn,fn);Ye(v,Fn)}}catch(z){if(z instanceof W.ZR)throw z;Ye(v,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function Jt(v,h,p,D){return tn.apply(this,arguments)}function tn(){return(tn=(0,y.Z)(function*(v,h,p,D,z={}){const ie=yield de(v,h,p,D,z);return"mfaPendingCredential"in ie&&Ye(v,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function Y(v,h,p,D){const z=`${h}${p}?${D}`;return v.config.emulator?gt(v.config,z):`${v.config.apiScheme}://${z}`}class on{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,D)=>{this.timer=setTimeout(()=>D(Xe(this.auth,"network-request-failed")),_n.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rn(v,h,p){const D={appName:v.name};p.email&&(D.email=p.email),p.phoneNumber&&(D.phoneNumber=p.phoneNumber);const z=Xe(v,h,D);return z.customData._tokenResponse=p,z}function Wn(){return(Wn=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ar(){return(ar=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Ir(v){if(v)try{const h=new Date(Number(v));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function pn(){return(pn=(0,y.Z)(function*(v,h=!1){const p=(0,W.m9)(v),D=yield p.getIdToken(h),z=hn(D);re(z&&z.exp&&z.auth_time&&z.iat,p.auth,"internal-error");const ie="object"==typeof z.firebase?z.firebase:void 0,Ve=null==ie?void 0:ie.sign_in_provider;return{claims:z,token:D,authTime:Ir(Lt(z.auth_time)),issuedAtTime:Ir(Lt(z.iat)),expirationTime:Ir(Lt(z.exp)),signInProvider:Ve||null,signInSecondFactor:(null==ie?void 0:ie.sign_in_second_factor)||null}})).apply(this,arguments)}function Lt(v){return 1e3*Number(v)}function hn(v){const[h,p,D]=v.split(".");if(void 0===h||void 0===p||void 0===D)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,W.tV)(p);return z?JSON.parse(z):(rt("Failed to decode base64 JWT payload"),null)}catch(z){return rt("Caught error parsing JWT payload as JSON",null==z?void 0:z.toString()),null}}function lr(v,h){return An.apply(this,arguments)}function An(){return(An=(0,y.Z)(function*(v,h,p=!1){if(p)return h;try{return yield h}catch(D){throw D instanceof W.ZR&&function Tr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(D)&&v.auth.currentUser===v&&(yield v.auth.signOut()),D}})).apply(this,arguments)}class Yr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const z=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const D=this.getInterval(h);this.timerId=setTimeout((0,y.Z)(function*(){yield p.iteration()}),D)}iteration(){var h=this;return(0,y.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===(null==p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class Di{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ir(this.lastLoginAt),this.creationTime=Ir(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function er(v){return jr.apply(this,arguments)}function jr(){return jr=(0,y.Z)(function*(v){var h;const p=v.auth,D=yield v.getIdToken(),z=yield lr(v,function _r(v,h){return ar.apply(this,arguments)}(p,{idToken:D}));re(null==z?void 0:z.users.length,p,"internal-error");const ie=z.users[0];v._notifyReloadListener(ie);const Ve=null!==(h=ie.providerUserInfo)&&void 0!==h&&h.length?function zt(v){return v.map(h=>{var{providerId:p}=h,D=(0,Ce._T)(h,["providerId"]);return{providerId:p,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}(ie.providerUserInfo):[],Tt=function ti(v,h){return[...v.filter(D=>!h.some(z=>z.providerId===D.providerId)),...h]}(v.providerData,Ve),Fn=!!v.isAnonymous&&!(v.email&&ie.passwordHash||null!=Tt&&Tt.length),Nn={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Tt,metadata:new Di(ie.createdAt,ie.lastLoginAt),isAnonymous:Fn};Object.assign(v,Nn)}),jr.apply(this,arguments)}function In(){return(In=(0,y.Z)(function*(v){const h=(0,W.m9)(v);yield er(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function nn(){return(nn=(0,y.Z)(function*(v,h){const p=yield Bt(v,{},(0,y.Z)(function*(){const D=(0,W.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:z,apiKey:ie}=v.config,Ve=Y(v,z,"/v1/token",`key=${ie}`),Tt=yield v._getAdditionalHeaders();return Tt["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(Ve,{method:"POST",headers:Tt,body:D})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class cn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){re(h.idToken,"internal-error"),re(typeof h.idToken<"u","internal-error"),re(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Nt(v){const h=hn(v);return re(h,"internal-error"),re(typeof h.exp<"u","internal-error"),re(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var D=this;return(0,y.Z)(function*(){return re(!D.accessToken||D.refreshToken,h,"user-token-expired"),p||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(h,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var D=this;return(0,y.Z)(function*(){const{accessToken:z,refreshToken:ie,expiresIn:Ve}=yield function St(v,h){return nn.apply(this,arguments)}(h,p);D.updateTokensAndExpiration(z,ie,Number(Ve))})()}updateTokensAndExpiration(h,p,D){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(h,p){const{refreshToken:D,accessToken:z,expirationTime:ie}=p,Ve=new cn;return D&&(re("string"==typeof D,"internal-error",{appName:h}),Ve.refreshToken=D),z&&(re("string"==typeof z,"internal-error",{appName:h}),Ve.accessToken=z),ie&&(re("number"==typeof ie,"internal-error",{appName:h}),Ve.expirationTime=ie),Ve}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new cn,this.toJSON())}_performRefresh(){return xe("not implemented")}}function mn(v,h){re("string"==typeof v||typeof v>"u","internal-error",{appName:h})}class vn{constructor(h){var{uid:p,auth:D,stsTokenManager:z}=h,ie=(0,Ce._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=D,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new Di(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,y.Z)(function*(){const D=yield lr(p,p.stsTokenManager.getToken(p.auth,h));return re(D,p.auth,"internal-error"),p.accessToken!==D&&(p.accessToken=D,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),D})()}getIdTokenResult(h){return function mr(v){return pn.apply(this,arguments)}(this,h)}reload(){return function kn(v){return In.apply(this,arguments)}(this)}_assign(h){this!==h&&(re(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new vn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var D=this;return(0,y.Z)(function*(){let z=!1;h.idToken&&h.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(h),z=!0),p&&(yield er(D)),yield D.auth._persistUserIfCurrent(D),z&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var h=this;return(0,y.Z)(function*(){const p=yield h.getIdToken();return yield lr(h,function nr(v,h){return Wn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var D,z,ie,Ve,Tt,Qt,fn,Fn;const Nn=null!==(D=p.displayName)&&void 0!==D?D:void 0,Cs=null!==(z=p.email)&&void 0!==z?z:void 0,Ea=null!==(ie=p.phoneNumber)&&void 0!==ie?ie:void 0,md=null!==(Ve=p.photoURL)&&void 0!==Ve?Ve:void 0,h_=null!==(Tt=p.tenantId)&&void 0!==Tt?Tt:void 0,mc=null!==(Qt=p._redirectEventId)&&void 0!==Qt?Qt:void 0,Xl=null!==(fn=p.createdAt)&&void 0!==fn?fn:void 0,yd=null!==(Fn=p.lastLoginAt)&&void 0!==Fn?Fn:void 0,{uid:yc,emailVerified:Yg,isAnonymous:_c,providerData:Ah,stsTokenManager:Kg}=p;re(yc&&Kg,h,"internal-error");const Zg=cn.fromJSON(this.name,Kg);re("string"==typeof yc,h,"internal-error"),mn(Nn,h.name),mn(Cs,h.name),re("boolean"==typeof Yg,h,"internal-error"),re("boolean"==typeof _c,h,"internal-error"),mn(Ea,h.name),mn(md,h.name),mn(h_,h.name),mn(mc,h.name),mn(Xl,h.name),mn(yd,h.name);const ap=new vn({uid:yc,auth:h,email:Cs,emailVerified:Yg,displayName:Nn,isAnonymous:_c,photoURL:md,phoneNumber:Ea,tenantId:h_,stsTokenManager:Zg,createdAt:Xl,lastLoginAt:yd});return Ah&&Array.isArray(Ah)&&(ap.providerData=Ah.map(Xg=>Object.assign({},Xg))),mc&&(ap._redirectEventId=mc),ap}static _fromIdTokenResponse(h,p,D=!1){return(0,y.Z)(function*(){const z=new cn;z.updateFromServerResponse(p);const ie=new vn({uid:p.localId,auth:h,stsTokenManager:z,isAnonymous:D});return yield er(ie),ie})()}}const Ae=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(p,D){var z=this;return(0,y.Z)(function*(){z.storage[p]=D})()}_get(p){var D=this;return(0,y.Z)(function*(){const z=D.storage[p];return void 0===z?null:z})()}_remove(p){var D=this;return(0,y.Z)(function*(){delete D.storage[p]})()}_addListener(p,D){}_removeListener(p,D){}}return v.type="NONE",v})();function Ee(v,h,p){return`firebase:${v}:${h}:${p}`}class $e{constructor(h,p,D){this.persistence=h,this.auth=p,this.userKey=D;const{config:z,name:ie}=this.auth;this.fullUserKey=Ee(this.userKey,z.apiKey,ie),this.fullPersistenceKey=Ee("persistence",z.apiKey,ie),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,y.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?vn._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,y.Z)(function*(){if(p.persistence===h)return;const D=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,D?p.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,D="authUser"){return(0,y.Z)(function*(){if(!p.length)return new $e(ze(Ae),h,D);const z=(yield Promise.all(p.map(function(){var fn=(0,y.Z)(function*(Fn){if(yield Fn._isAvailable())return Fn});return function(Fn){return fn.apply(this,arguments)}}()))).filter(fn=>fn);let ie=z[0]||ze(Ae);const Ve=Ee(D,h.config.apiKey,h.name);let Tt=null;for(const fn of p)try{const Fn=yield fn._get(Ve);if(Fn){const Nn=vn._fromJSON(h,Fn);fn!==ie&&(Tt=Nn),ie=fn;break}}catch{}const Qt=z.filter(fn=>fn._shouldAllowMigration);return ie._shouldAllowMigration&&Qt.length?(ie=Qt[0],Tt&&(yield ie._set(Ve,Tt.toJSON())),yield Promise.all(p.map(function(){var fn=(0,y.Z)(function*(Fn){if(Fn!==ie)try{yield Fn._remove(Ve)}catch{}});return function(Fn){return fn.apply(this,arguments)}}())),new $e(ie,h,D)):new $e(ie,h,D)})()}}function Ct(v){const h=v.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Ne(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(at(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(st(h))return"Blackberry";if(Dt(h))return"Webos";if(Xt(h))return"Safari";if((h.includes("chrome/")||ke(h))&&!h.includes("edge/"))return"Chrome";if(ge(h))return"Android";{const D=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function at(v=(0,W.z$)()){return/firefox\//i.test(v)}function Xt(v=(0,W.z$)()){const h=v.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ke(v=(0,W.z$)()){return/crios\//i.test(v)}function Ne(v=(0,W.z$)()){return/iemobile/i.test(v)}function ge(v=(0,W.z$)()){return/android/i.test(v)}function st(v=(0,W.z$)()){return/blackberry/i.test(v)}function Dt(v=(0,W.z$)()){return/webos/i.test(v)}function Mt(v=(0,W.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Br(v=(0,W.z$)()){return Mt(v)||ge(v)||Dt(v)||st(v)||/windows phone/i.test(v)||Ne(v)}function yi(v,h=[]){let p;switch(v){case"Browser":p=Ct((0,W.z$)());break;case"Worker":p=`${Ct((0,W.z$)())}-${v}`;break;default:p=v}const D=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${oe.SDK_VERSION}/${D}`}class Hr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const D=ie=>new Promise((Ve,Tt)=>{try{Ve(h(ie))}catch(Qt){Tt(Qt)}});D.onAbort=p,this.queue.push(D);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,y.Z)(function*(){if(p.auth.currentUser===h)return;const D=[];try{for(const z of p.queue)yield z(h),z.onAbort&&D.push(z.onAbort)}catch(z){D.reverse();for(const ie of D)try{ie()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null==z?void 0:z.message})}})()}}class Si{constructor(h,p,D){this.app=h,this.heartbeatServiceProvider=p,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.beforeStateQueue=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(h,p){var D=this;return p&&(this._popupRedirectResolver=ze(p)),this._initializationPromise=this.queue((0,y.Z)(function*(){var z,ie;if(!D._deleted&&(D.persistenceManager=yield $e.create(D,h),!D._deleted)){if(null!==(z=D._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch{}yield D.initializeCurrentUser(p),D.lastNotifiedUid=(null===(ie=D.currentUser)||void 0===ie?void 0:ie.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,y.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,y.Z)(function*(){var D;const z=yield p.assertedPersistence.getCurrentUser();let ie=z,Ve=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Tt=null===(D=p.redirectUser)||void 0===D?void 0:D._redirectEventId,Qt=null==ie?void 0:ie._redirectEventId,fn=yield p.tryRedirectSignIn(h);(!Tt||Tt===Qt)&&null!=fn&&fn.user&&(ie=fn.user,Ve=!0)}if(!ie)return p.directlySetCurrentUser(null);if(!ie._redirectEventId){if(Ve)try{yield p.beforeStateQueue.runMiddleware(ie)}catch(Tt){ie=z,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Tt))}return ie?p.reloadAndSetCurrentUserOrClear(ie):p.directlySetCurrentUser(null)}return re(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===ie._redirectEventId?p.directlySetCurrentUser(ie):p.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(h){var p=this;return(0,y.Z)(function*(){let D=null;try{D=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,y.Z)(function*(){try{yield er(h)}catch(D){if("auth/network-request-failed"!==(null==D?void 0:D.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var h=this;return(0,y.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,y.Z)(function*(){const D=h?(0,W.m9)(h):null;return D&&re(D.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(D&&D._clone(p))})()}_updateCurrentUser(h,p=!1){var D=this;return(0,y.Z)(function*(){if(!D._deleted)return h&&re(D.tenantId===h.tenantId,D,"tenant-id-mismatch"),p||(yield D.beforeStateQueue.runMiddleware(h)),D.queue((0,y.Z)(function*(){yield D.directlySetCurrentUser(h),D.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,y.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,y.Z)(function*(){yield p.assertedPersistence.setPersistence(ze(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new W.LL("auth","Firebase",h())}onAuthStateChanged(h,p,D){return this.registerStateListener(this.authStateSubscription,h,p,D)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,D){return this.registerStateListener(this.idTokenSubscription,h,p,D)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var D=this;return(0,y.Z)(function*(){const z=yield D.getOrInitRedirectPersistenceManager(p);return null===h?z.removeCurrentUser():z.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,y.Z)(function*(){if(!p.redirectPersistenceManager){const D=h&&ze(h)||p._popupRedirectResolver;re(D,p,"argument-error"),p.redirectPersistenceManager=yield $e.create(p,[ze(D._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,y.Z)(function*(){var D,z;return p._isInitialized&&(yield p.queue((0,y.Z)(function*(){}))),(null===(D=p._currentUser)||void 0===D?void 0:D._redirectEventId)===h?p._currentUser:(null===(z=p.redirectUser)||void 0===z?void 0:z._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,y.Z)(function*(){if(h===p.currentUser)return p.queue((0,y.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,D,z){if(this._deleted)return()=>{};const ie="function"==typeof p?p:p.next.bind(p),Ve=this._isInitialized?Promise.resolve():this._initializationPromise;return re(Ve,this,"internal-error"),Ve.then(()=>ie(this.currentUser)),"function"==typeof p?h.addObserver(p,D,z):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,y.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,y.Z)(function*(){var p;const D={"X-Client-Version":h.clientVersion};h.app.options.appId&&(D["X-Firebase-gmpid"]=h.app.options.appId);const z=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return z&&(D["X-Firebase-Client"]=z),D})()}}function rr(v){return(0,W.m9)(v)}class $i{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,W.ne)(p=>this.observer=p)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zn(v){const h=v.indexOf(":");return h<0?"":v.substr(0,h+1)}function Pn(v){if(!v)return null;const h=Number(v);return isNaN(h)?null:h}class Sr{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return xe("not implemented")}_getIdTokenResponse(h){return xe("not implemented")}_linkToIdToken(h,p){return xe("not implemented")}_getReauthenticationResolver(h){return xe("not implemented")}}function vr(v,h){return qi.apply(this,arguments)}function qi(){return(qi=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:resetPassword",it(v,h))})).apply(this,arguments)}function hs(v,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Bn(){return(Bn=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:update",it(v,h))})).apply(this,arguments)}function zr(){return(zr=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithPassword",it(v,h))})).apply(this,arguments)}function _i(v,h){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:sendOobCode",it(v,h))})).apply(this,arguments)}function X(){return(X=(0,y.Z)(function*(v,h){return _i(v,h)})).apply(this,arguments)}function We(){return(We=(0,y.Z)(function*(v,h){return _i(v,h)})).apply(this,arguments)}function Le(){return(Le=(0,y.Z)(function*(v,h){return _i(v,h)})).apply(this,arguments)}function yt(){return(yt=(0,y.Z)(function*(v,h){return _i(v,h)})).apply(this,arguments)}function vt(){return(vt=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",it(v,h))})).apply(this,arguments)}function en(){return(en=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithEmailLink",it(v,h))})).apply(this,arguments)}class ln extends Sr{constructor(h,p,D,z=null){super("password",D),this._email=h,this._password=p,this._tenantId=z}static _fromEmailAndPassword(h,p){return new ln(h,p,"password")}static _fromEmailAndCode(h,p,D=null){return new ln(h,p,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(null!=p&&p.email&&null!=p&&p.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,y.Z)(function*(){switch(p.signInMethod){case"password":return function wr(v,h){return zr.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function bt(v,h){return vt.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ye(h,"internal-error")}})()}_linkToIdToken(h,p){var D=this;return(0,y.Z)(function*(){switch(D.signInMethod){case"password":return hs(h,{idToken:p,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function xt(v,h){return en.apply(this,arguments)}(h,{idToken:p,email:D._email,oobCode:D._password});default:Ye(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Tn(v,h){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithIdp",it(v,h))})).apply(this,arguments)}class Gr extends Sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Gr(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ye("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:z}=p,ie=(0,Ce._T)(p,["providerId","signInMethod"]);if(!D||!z)return null;const Ve=new Gr(D,z);return Ve.idToken=ie.idToken||void 0,Ve.accessToken=ie.accessToken||void 0,Ve.secret=ie.secret,Ve.nonce=ie.nonce,Ve.pendingToken=ie.pendingToken||null,Ve}_getIdTokenResponse(h){return Tn(h,this.buildRequest())}_linkToIdToken(h,p){const D=this.buildRequest();return D.idToken=p,Tn(h,D)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Tn(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,W.xO)(p)}return h}}function Oi(){return(Oi=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:sendVerificationCode",it(v,h))})).apply(this,arguments)}function li(){return(li=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,h))})).apply(this,arguments)}function ui(){return(ui=(0,y.Z)(function*(v,h){const p=yield Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,h));if(p.temporaryProof)throw Rn(v,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const bo={USER_NOT_FOUND:"user-not-found"};function Ki(){return(Ki=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithPhoneNumber",it(v,Object.assign(Object.assign({},h),{operation:"REAUTH"})),bo)})).apply(this,arguments)}class ki extends Sr{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new ki({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new ki({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ui(v,h){return li.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Yi(v,h){return ui.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ii(v,h){return Ki.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:D,verificationCode:z}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:D,code:z}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:D,phoneNumber:z,temporaryProof:ie}=h;return D||p||z||ie?new ki({verificationId:p,verificationCode:D,phoneNumber:z,temporaryProof:ie}):null}}class si{constructor(h){var p,D,z,ie,Ve,Tt;const Qt=(0,W.zd)((0,W.pd)(h)),fn=null!==(p=Qt.apiKey)&&void 0!==p?p:null,Fn=null!==(D=Qt.oobCode)&&void 0!==D?D:null,Nn=function Qo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=Qt.mode)&&void 0!==z?z:null);re(fn&&Fn&&Nn,"argument-error"),this.apiKey=fn,this.operation=Nn,this.code=Fn,this.continueUrl=null!==(ie=Qt.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(Ve=Qt.languageCode)&&void 0!==Ve?Ve:null,this.tenantId=null!==(Tt=Qt.tenantId)&&void 0!==Tt?Tt:null}static parseLink(h){const p=function so(v){const h=(0,W.zd)((0,W.pd)(v)).link,p=h?(0,W.zd)((0,W.pd)(h)).deep_link_id:null,D=(0,W.zd)((0,W.pd)(v)).deep_link_id;return(D?(0,W.zd)((0,W.pd)(D)).link:null)||D||p||h||v}(h);try{return new si(p)}catch{return null}}}let go=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(p,D){return ln._fromEmailAndPassword(p,D)}static credentialWithLink(p,D){const z=si.parseLink(D);return re(z,"argument-error"),ln._fromEmailAndCode(p,z.code,z.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class fs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class vi extends fs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ps extends vi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return re("providerId"in p&&"signInMethod"in p,"argument-error"),Gr._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return re(h.idToken||h.accessToken,"argument-error"),Gr._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ps.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ps.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:D,oauthTokenSecret:z,pendingToken:ie,nonce:Ve,providerId:Tt}=h;if(!D&&!z&&!p&&!ie||!Tt)return null;try{return new ps(Tt)._credential({idToken:p,accessToken:D,nonce:Ve,pendingToken:ie})}catch{return null}}}let As=(()=>{class v extends vi{constructor(){super("facebook.com")}static credential(p){return Gr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Ca=(()=>{class v extends vi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,D){return Gr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:D})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:D,oauthAccessToken:z}=p;if(!D&&!z)return null;try{return v.credential(D,z)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),da=(()=>{class v extends vi{constructor(){super("github.com")}static credential(p){return Gr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return v.credential(p.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class xs extends Sr{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Tn(h,this.buildRequest())}_linkToIdToken(h,p){const D=this.buildRequest();return D.idToken=p,Tn(h,D)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Tn(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:D,signInMethod:z,pendingToken:ie}=p;return D&&z&&ie&&D===z?new xs(D,ie):null}static _create(h,p){return new xs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vi extends fs{constructor(h){re(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Vi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Vi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=xs.fromJSON(h);return re(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:D}=h;if(!p||!D)return null;try{return xs._create(D,p)}catch{return null}}}let Do=(()=>{class v extends vi{constructor(){super("twitter.com")}static credential(p,D){return Gr._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:D})}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:D,oauthTokenSecret:z}=p;if(!D||!z)return null;try{return v.credential(D,z)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function oo(v,h){return zs.apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signUp",it(v,h))})).apply(this,arguments)}class Ei{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,D,z=!1){return(0,y.Z)(function*(){const ie=yield vn._fromIdTokenResponse(h,D,z),Ve=Ms(D);return new Ei({user:ie,providerId:Ve,_tokenResponse:D,operationType:p})})()}static _forOperation(h,p,D){return(0,y.Z)(function*(){yield h._updateTokensIfNecessary(D,!0);const z=Ms(D);return new Ei({user:h,providerId:z,_tokenResponse:D,operationType:p})})()}}function Ms(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ao(){return(ao=(0,y.Z)(function*(v){var h;const p=rr(v);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Ei({user:p.currentUser,providerId:null,operationType:"signIn"});const D=yield oo(p,{returnSecureToken:!0}),z=yield Ei._fromIdTokenResponse(p,"signIn",D,!0);return yield p._updateCurrentUser(z.user),z})).apply(this,arguments)}class lo extends W.ZR{constructor(h,p,D,z){var ie;super(p.code,p.message),this.operationType=D,this.user=z,Object.setPrototypeOf(this,lo.prototype),this.customData={appName:h.name,tenantId:null!==(ie=h.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:p.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(h,p,D,z){return new lo(h,p,D,z)}}function Da(v,h,p,D){return("reauthenticate"===h?p._getReauthenticationResolver(v):p._getIdTokenResponse(v)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?lo._fromErrorAndOperation(v,ie,h,D):ie})}function hi(v){return new Set(v.map(({providerId:h})=>h).filter(h=>!!h))}function Xi(){return Xi=(0,y.Z)(function*(v,h){const p=(0,W.m9)(v);yield ji(!0,p,h);const{providerUserInfo:D}=yield function Qn(v,h){return Vt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),z=hi(D||[]);return p.providerData=p.providerData.filter(ie=>z.has(ie.providerId)),z.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Xi.apply(this,arguments)}function qs(v,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,y.Z)(function*(v,h,p=!1){const D=yield lr(v,h._linkToIdToken(v.auth,yield v.getIdToken()),p);return Ei._forOperation(v,"link",D)})).apply(this,arguments)}function ji(v,h,p){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,y.Z)(function*(v,h,p){yield er(h);const z=!1===v?"provider-already-linked":"no-such-provider";re(hi(h.providerData).has(p)===v,h.auth,z)})).apply(this,arguments)}function Ys(v,h){return To.apply(this,arguments)}function To(){return(To=(0,y.Z)(function*(v,h,p=!1){const{auth:D}=v,z="reauthenticate";try{const ie=yield lr(v,Da(D,z,h,v),p);re(ie.idToken,D,"internal-error");const Ve=hn(ie.idToken);re(Ve,D,"internal-error");const{sub:Tt}=Ve;return re(v.uid===Tt,D,"user-mismatch"),Ei._forOperation(v,z,ie)}catch(ie){throw"auth/user-not-found"===(null==ie?void 0:ie.code)&&Ye(D,"user-mismatch"),ie}})).apply(this,arguments)}function vs(v,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,y.Z)(function*(v,h,p=!1){const D="signIn",z=yield Da(v,D,h),ie=yield Ei._fromIdTokenResponse(v,D,z);return p||(yield v._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function En(v,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,y.Z)(function*(v,h){return vs(rr(v),h)})).apply(this,arguments)}function Ks(v,h){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,y.Z)(function*(v,h){const p=(0,W.m9)(v);return yield ji(!1,p,h.providerId),qs(p,h)})).apply(this,arguments)}function Jo(v,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,y.Z)(function*(v,h){return Ys((0,W.m9)(v),h)})).apply(this,arguments)}function Lo(){return(Lo=(0,y.Z)(function*(v,h){return Jt(v,"POST","/v1/accounts:signInWithCustomToken",it(v,h))})).apply(this,arguments)}function gs(){return gs=(0,y.Z)(function*(v,h){const p=rr(v),D=yield function fi(v,h){return Lo.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),z=yield Ei._fromIdTokenResponse(p,"signIn",D);return yield p._updateCurrentUser(z.user),z}),gs.apply(this,arguments)}class Jr{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ji._fromServerResponse(h,p):"totpInfo"in p?Ao._fromServerResponse(h,p):Ye(h,"internal-error")}}class Ji extends Jr{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ji(p)}}class Ao extends Jr{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new Ao(p)}}function Xs(v,h,p){var D;re((null===(D=p.url)||void 0===D?void 0:D.length)>0,v,"invalid-continue-uri"),re(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(re(p.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(re(p.android.packageName.length>0,v,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function uo(){return uo=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v),z={requestType:"PASSWORD_RESET",email:h};p&&Xs(D,z,p),yield function ce(v,h){return We.apply(this,arguments)}(D,z)}),uo.apply(this,arguments)}function Sn(){return(Sn=(0,y.Z)(function*(v,h,p){yield vr((0,W.m9)(v),{oobCode:h,newPassword:p})})).apply(this,arguments)}function xo(){return xo=(0,y.Z)(function*(v,h){yield function Kt(v,h){return Bn.apply(this,arguments)}((0,W.m9)(v),{oobCode:h})}),xo.apply(this,arguments)}function I(v,h){return j.apply(this,arguments)}function j(){return(j=(0,y.Z)(function*(v,h){const p=(0,W.m9)(v),D=yield vr(p,{oobCode:h}),z=D.requestType;switch(re(z,p,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(D.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(D.mfaInfo,p,"internal-error");default:re(D.email,p,"internal-error")}let ie=null;return D.mfaInfo&&(ie=Jr._fromServerResponse(rr(p),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:ie},operation:z}})).apply(this,arguments)}function U(){return(U=(0,y.Z)(function*(v,h){const{data:p}=yield I((0,W.m9)(v),h);return p.email})).apply(this,arguments)}function O(){return(O=(0,y.Z)(function*(v,h,p){const D=rr(v),z=yield oo(D,{returnSecureToken:!0,email:h,password:p}),ie=yield Ei._fromIdTokenResponse(D,"signIn",z);return yield D._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function q(){return q=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v),z={requestType:"EMAIL_SIGNIN",email:h};re(p.handleCodeInApp,D,"argument-error"),p&&Xs(D,z,p),yield function ee(v,h){return Le.apply(this,arguments)}(D,z)}),q.apply(this,arguments)}function Xn(){return(Xn=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v),z=go.credentialWithLink(h,p||lt());return re(z._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),En(D,z)})).apply(this,arguments)}function tr(){return(tr=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:createAuthUri",it(v,h))})).apply(this,arguments)}function Kr(){return Kr=(0,y.Z)(function*(v,h){const D={identifier:h,continueUri:ot()?lt():"http://localhost"},{signinMethods:z}=yield function Pr(v,h){return tr.apply(this,arguments)}((0,W.m9)(v),D);return z||[]}),Kr.apply(this,arguments)}function ha(){return ha=(0,y.Z)(function*(v,h){const p=(0,W.m9)(v),z={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};h&&Xs(p.auth,z,h);const{email:ie}=yield function ri(v,h){return X.apply(this,arguments)}(p.auth,z);ie!==v.email&&(yield v.reload())}),ha.apply(this,arguments)}function pi(){return pi=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:h};p&&Xs(D.auth,ie,p);const{email:Ve}=yield function Fe(v,h){return yt.apply(this,arguments)}(D.auth,ie);Ve!==v.email&&(yield v.reload())}),pi.apply(this,arguments)}function Ta(){return(Ta=(0,y.Z)(function*(v,h){return de(v,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Qs(){return Qs=(0,y.Z)(function*(v,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const D=(0,W.m9)(v),ie={idToken:yield D.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},Ve=yield lr(D,function Ps(v,h){return Ta.apply(this,arguments)}(D.auth,ie));D.displayName=Ve.displayName||null,D.photoURL=Ve.photoUrl||null;const Tt=D.providerData.find(({providerId:Qt})=>"password"===Qt);Tt&&(Tt.displayName=D.displayName,Tt.photoURL=D.photoURL),yield D._updateTokensIfNecessary(Ve)}),Qs.apply(this,arguments)}function hl(v,h,p){return fl.apply(this,arguments)}function fl(){return(fl=(0,y.Z)(function*(v,h,p){const{auth:D}=v,ie={idToken:yield v.getIdToken(),returnSecureToken:!0};h&&(ie.email=h),p&&(ie.password=p);const Ve=yield lr(v,hs(D,ie));yield v._updateTokensIfNecessary(Ve,!0)})).apply(this,arguments)}class mo{constructor(h,p,D={}){this.isNewUser=h,this.providerId=p,this.profile=D}}class na extends mo{constructor(h,p,D,z){super(h,p,D),this.username=z}}class Bo extends mo{constructor(h,p){super(h,"facebook.com",p)}}class Ju extends na{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class ja extends mo{constructor(h,p){super(h,"google.com",p)}}class pl extends na{constructor(h,p,D){super(h,"twitter.com",p,D)}}function ec(v){const{user:h,_tokenResponse:p}=v;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Fi(v){var h,p;if(!v)return null;const{providerId:D}=v,z=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},ie=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!D&&null!=v&&v.idToken){const Ve=null===(p=null===(h=hn(v.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(Ve)return new mo(ie,"anonymous"!==Ve&&"custom"!==Ve?Ve:null)}if(!D)return null;switch(D){case"facebook.com":return new Bo(ie,z);case"github.com":return new Ju(ie,z);case"google.com":return new ja(ie,z);case"twitter.com":return new pl(ie,z,v.screenName||null);case"custom":case"anonymous":return new mo(ie,null);default:return new mo(ie,D,z)}}(p)}class co{constructor(h,p,D){this.type=h,this.credential=p,this.auth=D}static _fromIdtoken(h,p){return new co("enroll",h,p)}static _fromMfaPendingCredential(h){return new co("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,D;if(null!=h&&h.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return co._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(D=h.multiFactorSession)&&void 0!==D&&D.idToken)return co._fromIdtoken(h.multiFactorSession.idToken)}return null}}class xi{constructor(h,p,D){this.session=h,this.hints=p,this.signInResolver=D}static _fromError(h,p){const D=rr(h),z=p.customData._serverResponse,ie=(z.mfaInfo||[]).map(Tt=>Jr._fromServerResponse(D,Tt));re(z.mfaPendingCredential,D,"internal-error");const Ve=co._fromMfaPendingCredential(z.mfaPendingCredential);return new xi(Ve,ie,function(){var Tt=(0,y.Z)(function*(Qt){const fn=yield Qt._process(D,Ve);delete z.mfaInfo,delete z.mfaPendingCredential;const Fn=Object.assign(Object.assign({},z),{idToken:fn.idToken,refreshToken:fn.refreshToken});switch(p.operationType){case"signIn":const Nn=yield Ei._fromIdTokenResponse(D,p.operationType,Fn);return yield D._updateCurrentUser(Nn.user),Nn;case"reauthenticate":return re(p.user,D,"internal-error"),Ei._forOperation(p.user,p.operationType,Fn);default:Ye(D,"internal-error")}});return function(Qt){return Tt.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,y.Z)(function*(){return p.signInResolver(h)})()}}class P{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(D=>Jr._fromServerResponse(h.auth,D)))})}static _fromUser(h){return new P(h)}getSession(){var h=this;return(0,y.Z)(function*(){return co._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var D=this;return(0,y.Z)(function*(){const z=h,ie=yield D.getSession(),Ve=yield lr(D.user,z._process(D.user.auth,ie,p));return yield D.user._updateTokensIfNecessary(Ve),D.user.reload()})()}unenroll(h){var p=this;return(0,y.Z)(function*(){const D="string"==typeof h?h:h.uid,z=yield p.user.getIdToken();try{const ie=yield lr(p.user,function xa(v,h){return de(v,"POST","/v2/accounts/mfaEnrollment:withdraw",it(v,h))}(p.user.auth,{idToken:z,mfaEnrollmentId:D}));p.enrolledFactors=p.enrolledFactors.filter(({uid:Ve})=>Ve!==D),yield p.user._updateTokensIfNecessary(ie),yield p.user.reload()}catch(ie){throw ie}})()}}const G=new WeakMap,J="__sak";class me{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(J,"1"),this.storage.removeItem(J),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class v extends me{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,D)=>this.onStorageEvent(p,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function mt(){const v=(0,W.z$)();return Xt(v)||Mt(v)}()&&function Ti(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Br(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const D of Object.keys(this.listeners)){const z=this.storage.getItem(D),ie=this.localCache[D];z!==ie&&p(D,ie,z)}}onStorageEvent(p,D=!1){if(!p.key)return void this.forAllChangedKeys((Tt,Qt,fn)=>{this.notifyListeners(Tt,fn)});const z=p.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Tt=this.storage.getItem(z);if(p.newValue!==Tt)null!==p.newValue?this.storage.setItem(z,p.newValue):this.storage.removeItem(z);else if(this.localCache[z]===p.newValue&&!D)return}const ie=()=>{const Tt=this.storage.getItem(z);!D&&this.localCache[z]===Tt||this.notifyListeners(z,Tt)},Ve=this.storage.getItem(z);!function Dr(){return(0,W.w1)()&&10===document.documentMode}()||Ve===p.newValue||p.newValue===p.oldValue?ie():setTimeout(ie,10)}notifyListeners(p,D){this.localCache[p]=D;const z=this.listeners[p];if(z)for(const ie of Array.from(z))ie(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,D,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:D,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(D)}_removeListener(p,D){this.listeners[p]&&(this.listeners[p].delete(D),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,D){var z=()=>super._set,ie=this;return(0,y.Z)(function*(){yield z().call(ie,p,D),ie.localCache[p]=JSON.stringify(D)})()}_get(p){var D=()=>super._get,z=this;return(0,y.Z)(function*(){const ie=yield D().call(z,p);return z.localCache[p]=JSON.stringify(ie),ie})()}_remove(p){var D=()=>super._remove,z=this;return(0,y.Z)(function*(){yield D().call(z,p),delete z.localCache[p]})()}}return v.type="LOCAL",v})(),qn=(()=>{class v extends me{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,D){}_removeListener(p,D){}}return v.type="SESSION",v})();let Wr=(()=>{class v{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const D=this.receivers.find(ie=>ie.isListeningto(p));if(D)return D;const z=new v(p);return this.receivers.push(z),z}isListeningto(p){return this.eventTarget===p}handleEvent(p){var D=this;return(0,y.Z)(function*(){const z=p,{eventId:ie,eventType:Ve,data:Tt}=z.data,Qt=D.handlersMap[Ve];if(null==Qt||!Qt.size)return;z.ports[0].postMessage({status:"ack",eventId:ie,eventType:Ve});const fn=Array.from(Qt).map(function(){var Nn=(0,y.Z)(function*(Cs){return Cs(z.origin,Tt)});return function(Cs){return Nn.apply(this,arguments)}}()),Fn=yield function Ii(v){return Promise.all(v.map(function(){var h=(0,y.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(D){return{fulfilled:!1,reason:D}}});return function(p){return h.apply(this,arguments)}}()))}(fn);z.ports[0].postMessage({status:"done",eventId:ie,eventType:Ve,response:Fn})})()}_subscribe(p,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(D)}_unsubscribe(p,D){this.handlersMap[p]&&D&&this.handlersMap[p].delete(D),(!D||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Zr(v="",h=10){let p="";for(let D=0;D<h;D++)p+=Math.floor(10*Math.random());return v+p}class $o{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,D=50){var z=this;return(0,y.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let Ve,Tt;return new Promise((Qt,fn)=>{const Fn=Zr("",20);ie.port1.start();const Nn=setTimeout(()=>{fn(new Error("unsupported_event"))},D);Tt={messageChannel:ie,onMessage(Cs){const Ea=Cs;if(Ea.data.eventId===Fn)switch(Ea.data.status){case"ack":clearTimeout(Nn),Ve=setTimeout(()=>{fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ve),Qt(Ea.data.response);break;default:clearTimeout(Nn),clearTimeout(Ve),fn(new Error("invalid_response"))}}},z.handlers.add(Tt),ie.port1.addEventListener("message",Tt.onMessage),z.target.postMessage({eventType:h,eventId:Fn,data:p},[ie.port2])}).finally(()=>{Tt&&z.removeMessageHandler(Tt)})})()}}function Ar(){return window}function ts(){return typeof Ar().WorkerGlobalScope<"u"&&"function"==typeof Ar().importScripts}function ns(){return(ns=(0,y.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ml="firebaseLocalStorageDb",Uo=1,Wa="firebaseLocalStorage",qa="fbase_key";class Mi{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ya(v,h){return v.transaction([Wa],h?"readwrite":"readonly").objectStore(Wa)}function Vo(){const v=indexedDB.open(ml,Uo);return new Promise((h,p)=>{v.addEventListener("error",()=>{p(v.error)}),v.addEventListener("upgradeneeded",()=>{const D=v.result;try{D.createObjectStore(Wa,{keyPath:qa})}catch(z){p(z)}}),v.addEventListener("success",(0,y.Z)(function*(){const D=v.result;D.objectStoreNames.contains(Wa)?h(D):(D.close(),yield function Mo(){const v=indexedDB.deleteDatabase(ml);return new Mi(v).toPromise()}(),h(yield Vo()))}))})}function Ya(v,h,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,y.Z)(function*(v,h,p){const D=ya(v,!0).put({[qa]:h,value:p});return new Mi(D).toPromise()})).apply(this,arguments)}function Is(){return(Is=(0,y.Z)(function*(v,h){const p=ya(v,!1).get(h),D=yield new Mi(p).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function yl(v,h){const p=ya(v,!0).delete(h);return new Mi(p).toPromise()}const jo=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,y.Z)(function*(){return p.db||(p.db=yield Vo()),p.db})()}_withRetries(p){var D=this;return(0,y.Z)(function*(){let z=0;for(;;)try{const ie=yield D._openDb();return yield p(ie)}catch(ie){if(z++>3)throw ie;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,y.Z)(function*(){return ts()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,y.Z)(function*(){p.receiver=Wr._getInstance(function Ga(){return ts()?self:null}()),p.receiver._subscribe("keyChanged",function(){var D=(0,y.Z)(function*(z,ie){return{keyProcessed:(yield p._poll()).includes(ie.key)}});return function(z,ie){return D.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var D=(0,y.Z)(function*(z,ie){return["keyChanged"]});return function(z,ie){return D.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,y.Z)(function*(){var D,z;if(p.activeServiceWorker=yield function ra(){return ns.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new $o(p.activeServiceWorker);const ie=yield p.sender._send("ping",{},800);ie&&null!==(D=ie[0])&&void 0!==D&&D.fulfilled&&null!==(z=ie[0])&&void 0!==z&&z.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var D=this;return(0,y.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function ma(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:p},D.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Vo();return yield Ya(p,J,"1"),yield yl(p,J),!0}catch{}return!1})()}_withPendingWrite(p){var D=this;return(0,y.Z)(function*(){D.pendingWrites++;try{yield p()}finally{D.pendingWrites--}})()}_set(p,D){var z=this;return(0,y.Z)(function*(){return z._withPendingWrite((0,y.Z)(function*(){return yield z._withRetries(ie=>Ya(ie,p,D)),z.localCache[p]=D,z.notifyServiceWorker(p)}))})()}_get(p){var D=this;return(0,y.Z)(function*(){const z=yield D._withRetries(ie=>function Ra(v,h){return Is.apply(this,arguments)}(ie,p));return D.localCache[p]=z,z})()}_remove(p){var D=this;return(0,y.Z)(function*(){return D._withPendingWrite((0,y.Z)(function*(){return yield D._withRetries(z=>yl(z,p)),delete D.localCache[p],D.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,y.Z)(function*(){const D=yield p._withRetries(Ve=>{const Tt=ya(Ve,!1).getAll();return new Mi(Tt).toPromise()});if(!D)return[];if(0!==p.pendingWrites)return[];const z=[],ie=new Set;for(const{fbase_key:Ve,value:Tt}of D)ie.add(Ve),JSON.stringify(p.localCache[Ve])!==JSON.stringify(Tt)&&(p.notifyListeners(Ve,Tt),z.push(Ve));for(const Ve of Object.keys(p.localCache))p.localCache[Ve]&&!ie.has(Ve)&&(p.notifyListeners(Ve,null),z.push(Ve));return z})()}notifyListeners(p,D){this.localCache[p]=D;const z=this.listeners[p];if(z)for(const ie of Array.from(z))ie(D)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(D)}_removeListener(p,D){this.listeners[p]&&(this.listeners[p].delete(D),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Ka(){return(Ka=(0,y.Z)(function*(v){return(yield de(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vl(v){return new Promise((h,p)=>{const D=document.createElement("script");D.setAttribute("src",v),D.onload=h,D.onerror=z=>{const ie=Xe("internal-error");ie.customData=z,p(ie)},D.type="text/javascript",D.charset="UTF-8",function mu(){var v,h;return null!==(h=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==h?h:document}().appendChild(D)})}function ws(v){return`__${v}${Math.floor(1e6*Math.random())}`}const va=1e12;class nc{constructor(h){this.auth=h,this.counter=va,this._widgets=new Map}render(h,p){const D=this.counter;return this._widgets.set(D,new ho(h,this.auth.name,p||{})),this.counter++,D}reset(h){var p;const D=h||va;null===(p=this._widgets.get(D))||void 0===p||p.delete(),this._widgets.delete(D)}getResponse(h){var p;return(null===(p=this._widgets.get(h||va))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,y.Z)(function*(){var D;return null===(D=p._widgets.get(h||va))||void 0===D||D.execute(),""})()}}class ho{constructor(h,p,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof h?document.getElementById(h):h;re(z,"argument-error",{appName:p}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function yu(v){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<v;D++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Js=ws("rcb"),Pa=new Qe(3e4,6e4);class ia{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Ar().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return re(function Vl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Ar().grecaptcha):new Promise((D,z)=>{const ie=Ar().setTimeout(()=>{z(Xe(h,"network-request-failed"))},Pa.get());Ar()[Js]=()=>{Ar().clearTimeout(ie),delete Ar()[Js];const Tt=Ar().grecaptcha;if(!Tt)return void z(Xe(h,"internal-error"));const Qt=Tt.render;Tt.render=(fn,Fn)=>{const Nn=Qt(fn,Fn);return this.counter++,Nn},this.hostLanguage=p,D(Tt)},vl(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:Js,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(ie),z(Xe(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Ar().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Xa{load(h){return(0,y.Z)(function*(){return new nc(h)})()}clearedOneInstance(){}}const Of="recaptcha",rc={theme:"light",type:"image"};class Xr{constructor(h,p=Object.assign({},rc),D){this.parameters=p,this.type=Of,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rr(D),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof h?document.getElementById(h):h;re(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Xa:new ia,this.validateStartingState()}verify(){var h=this;return(0,y.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),D=h.getAssertedRecaptcha();return D.getResponse(p)||new Promise(ie=>{const Ve=Tt=>{Tt&&(h.tokenChangeListeners.delete(Ve),ie(Tt))};h.tokenChangeListeners.add(Ve),h.isInvisible&&D.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(D=>D(p)),"function"==typeof h)h(p);else if("string"==typeof h){const D=Ar()[h];"function"==typeof D&&D(p)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,y.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const D=document.createElement("div");p.appendChild(D),p=D}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,y.Z)(function*(){re(ot()&&!ts(),h.auth,"internal-error"),yield function _u(){let v=null;return new Promise(h=>{"complete"!==document.readyState?(v=()=>h(),window.addEventListener("load",v)):h()}).catch(h=>{throw v&&window.removeEventListener("load",v),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function _o(v){return Ka.apply(this,arguments)}(h.auth);re(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Qa{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=ki._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Qc(){return(Qc=(0,y.Z)(function*(v,h,p){const D=rr(v),z=yield Jc(D,h,(0,W.m9)(p));return new Qa(z,ie=>En(D,ie))})).apply(this,arguments)}function vu(){return(vu=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v);yield ji(!1,D,"phone");const z=yield Jc(D.auth,h,(0,W.m9)(p));return new Qa(z,ie=>Ks(D,ie))})).apply(this,arguments)}function Ja(){return(Ja=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v),z=yield Jc(D.auth,h,(0,W.m9)(p));return new Qa(z,ie=>Jo(D,ie))})).apply(this,arguments)}function Jc(v,h,p){return ed.apply(this,arguments)}function ed(){return ed=(0,y.Z)(function*(v,h,p){var D;const z=yield p.verify();try{let ie;if(re("string"==typeof z,v,"argument-error"),re(p.type===Of,v,"argument-error"),ie="string"==typeof h?{phoneNumber:h}:h,"session"in ie){const Ve=ie.session;if("phoneNumber"in ie)return re("enroll"===Ve.type,v,"internal-error"),(yield function Os(v,h){return de(v,"POST","/v2/accounts/mfaEnrollment:start",it(v,h))}(v,{idToken:Ve.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{re("signin"===Ve.type,v,"internal-error");const Tt=(null===(D=ie.multiFactorHint)||void 0===D?void 0:D.uid)||ie.multiFactorUid;return re(Tt,v,"missing-multi-factor-info"),(yield function _a(v,h){return de(v,"POST","/v2/accounts/mfaSignIn:start",it(v,h))}(v,{mfaPendingCredential:Ve.credential,mfaEnrollmentId:Tt,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ve}=yield function Pi(v,h){return Oi.apply(this,arguments)}(v,{phoneNumber:ie.phoneNumber,recaptchaToken:z});return Ve}}finally{p._reset()}}),ed.apply(this,arguments)}function El(){return(El=(0,y.Z)(function*(v,h){yield qs((0,W.m9)(v),h)})).apply(this,arguments)}let Ro=(()=>{class v{constructor(p){this.providerId=v.PROVIDER_ID,this.auth=rr(p)}verifyPhoneNumber(p,D){return Jc(this.auth,p,(0,W.m9)(D))}static credential(p,D){return ki._fromVerification(p,D)}static credentialFromResult(p){return v.credentialFromTaggedObject(p)}static credentialFromError(p){return v.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:D,temporaryProof:z}=p;return D&&z?ki._fromTokenResponse(D,z):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Oa(v,h){return h?ze(h):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ns extends Sr{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Tn(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Tn(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Tn(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Ho(v){return vs(v.auth,new Ns(v),v.bypassAuthState)}function Eu(v){const{auth:h,user:p}=v;return re(p,h,"internal-error"),Ys(p,new Ns(v),v.bypassAuthState)}function Il(v){return sa.apply(this,arguments)}function sa(){return(sa=(0,y.Z)(function*(v){const{auth:h,user:p}=v;return re(p,h,"internal-error"),qs(p,new Ns(v),v.bypassAuthState)})).apply(this,arguments)}class jl{constructor(h,p,D,z,ie=!1){this.auth=h,this.resolver=D,this.user=z,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,y.Z)(function*(D,z){h.pendingPromise={resolve:D,reject:z};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(ie){h.reject(ie)}});return function(D,z){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,y.Z)(function*(){const{urlResponse:D,sessionId:z,postBody:ie,tenantId:Ve,error:Tt,type:Qt}=h;if(Tt)return void p.reject(Tt);const fn={auth:p.auth,requestUri:D,sessionId:z,tenantId:Ve||void 0,postBody:ie||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Qt)(fn))}catch(Fn){p.reject(Fn)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ho;case"linkViaPopup":case"linkViaRedirect":return Il;case"reauthViaPopup":case"reauthViaRedirect":return Eu;default:Ye(this.auth,"internal-error")}}resolve(h){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wl=new Qe(2e3,1e4);function sc(){return(sc=(0,y.Z)(function*(v,h,p){const D=rr(v);ht(v,h,fs);const z=Oa(D,p);return new M(D,"signInViaPopup",h,z).executeNotNull()})).apply(this,arguments)}function C(){return(C=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v);ht(D.auth,h,fs);const z=Oa(D.auth,p);return new M(D.auth,"reauthViaPopup",h,z,D).executeNotNull()})).apply(this,arguments)}function _(){return(_=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v);ht(D.auth,h,fs);const z=Oa(D.auth,p);return new M(D.auth,"linkViaPopup",h,z,D).executeNotNull()})).apply(this,arguments)}let M=(()=>{class v extends jl{constructor(p,D,z,ie,Ve){super(p,D,ie,Ve),this.provider=z,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var p=this;return(0,y.Z)(function*(){const D=yield p.execute();return re(D,p.auth,"internal-error"),D})()}onExecution(){var p=this;return(0,y.Z)(function*(){Ie(1===p.filter.length,"Popup operations only handle one event");const D=Zr();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],D),p.authWindow.associatedEvent=D,p.resolver._originValidation(p.auth).catch(z=>{p.reject(z)}),p.resolver._isIframeWebStorageSupported(p.auth,z=>{z||p.reject(Xe(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Xe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const p=()=>{var D,z;this.pollId=null!==(z=null===(D=this.authWindow)||void 0===D?void 0:D.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Xe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,wl.get())};p()}}return v.currentPopupAction=null,v})();const L="pendingRedirect",K=new Map;class ne extends jl{constructor(h,p,D=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,D),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,y.Z)(function*(){let D=K.get(p.auth._key());if(!D){try{const ie=(yield function qe(v,h){return _t.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;D=()=>Promise.resolve(ie)}catch(z){D=()=>Promise.reject(z)}K.set(p.auth._key(),D)}return p.bypassAuthState||K.set(p.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,D=this;return(0,y.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(D,h);if("unknown"!==h.type){if(h.eventId){const z=yield D.auth._redirectUserForId(h.eventId);if(z)return D.user=z,p().call(D,h);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function _t(){return(_t=(0,y.Z)(function*(v,h){const p=ys(h),D=oi(v);if(!(yield D._isAvailable()))return!1;const z="true"===(yield D._get(p));return yield D._remove(p),z})).apply(this,arguments)}function Ht(v,h){return dn.apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(v,h){return oi(v)._set(ys(h),"true")})).apply(this,arguments)}function xr(v,h){K.set(v._key(),h)}function oi(v){return ze(v._redirectPersistence)}function ys(v){return Ee(L,v.config.apiKey,v.name)}function N(v,h,p){return function $(v,h,p){return Q.apply(this,arguments)}(v,h,p)}function Q(){return(Q=(0,y.Z)(function*(v,h,p){const D=rr(v);ht(v,h,fs),yield D._initializationPromise;const z=Oa(D,p);return yield Ht(z,D),z._openRedirect(D,h,"signInViaRedirect")})).apply(this,arguments)}function ve(v,h,p){return function tt(v,h,p){return dt.apply(this,arguments)}(v,h,p)}function dt(){return(dt=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v);ht(D.auth,h,fs),yield D.auth._initializationPromise;const z=Oa(D.auth,p);yield Ht(z,D.auth);const ie=yield zi(D);return z._openRedirect(D.auth,h,"reauthViaRedirect",ie)})).apply(this,arguments)}function Ut(v,h,p){return function Cn(v,h,p){return Dn.apply(this,arguments)}(v,h,p)}function Dn(){return(Dn=(0,y.Z)(function*(v,h,p){const D=(0,W.m9)(v);ht(D.auth,h,fs),yield D.auth._initializationPromise;const z=Oa(D.auth,p);yield ji(!1,D,h.providerId),yield Ht(z,D.auth);const ie=yield zi(D);return z._openRedirect(D.auth,h,"linkViaRedirect",ie)})).apply(this,arguments)}function Gt(){return(Gt=(0,y.Z)(function*(v,h){return yield rr(v)._initializationPromise,Kn(v,h,!1)})).apply(this,arguments)}function Kn(v,h){return On.apply(this,arguments)}function On(){return(On=(0,y.Z)(function*(v,h,p=!1){const D=rr(v),z=Oa(D,h),Ve=yield new ne(D,z,p).execute();return Ve&&!p&&(delete Ve.user._redirectEventId,yield D._persistUserIfCurrent(Ve.user),yield D._setRedirectUser(null,h)),Ve})).apply(this,arguments)}function zi(v){return el.apply(this,arguments)}function el(){return(el=(0,y.Z)(function*(v){const h=Zr(`${v.uid}:::`);return v._redirectEventId=h,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),h})).apply(this,arguments)}class Hl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(h,D)&&(p=!0,this.sendToConsumer(h,D),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function td(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zo(v);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var D;if(h.error&&!zo(h)){const z=(null===(D=h.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";p.onError(Xe(this.auth,z))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const D=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&D}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vo(h))}saveEventToCache(h){this.cachedEventUids.add(vo(h)),this.lastProcessedEventTime=Date.now()}}function vo(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(h=>h).join("-")}function zo({type:v,error:h}){return"unknown"===v&&"auth/no-auth-event"===(null==h?void 0:h.code)}function kg(v){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)(function*(v,h={}){return de(v,"GET","/v1/projects",h)})).apply(this,arguments)}const Ff=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eo=/^https?/;function Lf(){return(Lf=(0,y.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:h}=yield kg(v);for(const p of h)try{if(Ng(p))return}catch{}Ye(v,"unauthorized-domain")})).apply(this,arguments)}function Ng(v){const h=lt(),{protocol:p,hostname:D}=new URL(h);if(v.startsWith("chrome-extension://")){const Ve=new URL(v);return""===Ve.hostname&&""===D?"chrome-extension:"===p&&v.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&Ve.hostname===D}if(!eo.test(p))return!1;if(Ff.test(v))return D===v;const z=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(D)}const nd=new Qe(3e4,6e4);function Fg(){const v=Ar().___jsl;if(null!=v&&v.H)for(const h of Object.keys(v.H))if(v.H[h].r=v.H[h].r||[],v.H[h].L=v.H[h].L||[],v.H[h].r=[...v.H[h].L],v.CP)for(let p=0;p<v.CP.length;p++)v.CP[p]=null}let oc=null;const n_=new Qe(5e3,15e3),Lg="__/auth/iframe",$f="emulator/auth/iframe",Cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bg(v){const h=v.config;re(h.authDomain,v,"auth-domain-config-required");const p=h.emulator?gt(h,$f):`https://${v.config.authDomain}/${Lg}`,D={apiKey:h.apiKey,appName:v.name,v:oe.SDK_VERSION},z=Uf.get(v.config.apiHost);z&&(D.eid=z);const ie=v._getFrameworks();return ie.length&&(D.fw=ie.join(",")),`${p}?${(0,W.xO)(D).slice(1)}`}function Dl(){return Dl=(0,y.Z)(function*(v){const h=yield function Bf(v){return oc=oc||function Po(v){return new Promise((h,p)=>{var D,z,ie;function Ve(){Fg(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Fg(),p(Xe(v,"network-request-failed"))},timeout:nd.get()})}if(null!==(z=null===(D=Ar().gapi)||void 0===D?void 0:D.iframes)&&void 0!==z&&z.Iframe)h(gapi.iframes.getContext());else{if(null===(ie=Ar().gapi)||void 0===ie||!ie.load){const Tt=ws("iframefcb");return Ar()[Tt]=()=>{gapi.load?Ve():p(Xe(v,"network-request-failed"))},vl(`https://apis.google.com/js/api.js?onload=${Tt}`).catch(Qt=>p(Qt))}Ve()}}).catch(h=>{throw oc=null,h})}(v),oc}(v),p=Ar().gapi;return re(p,v,"internal-error"),h.open({where:document.body,url:Bg(v),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cl,dontclear:!0},D=>new Promise(function(){var z=(0,y.Z)(function*(ie,Ve){yield D.restyle({setHideOnLeave:!1});const Tt=Xe(v,"network-request-failed"),Qt=Ar().setTimeout(()=>{Ve(Tt)},n_.get());function fn(){Ar().clearTimeout(Qt),ie(D)}D.ping(fn).then(fn,()=>{Ve(Tt)})});return function(ie,Ve){return z.apply(this,arguments)}}()))}),Dl.apply(this,arguments)}const jf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ah=500,ka=600,r_="_blank",$g="http://localhost";class rd{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Hf="__/auth/handler",i_="emulator/auth/handler";function zf(v,h,p,D,z,ie){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const Ve={apiKey:v.config.apiKey,appName:v.name,authType:p,redirectUrl:D,v:oe.SDK_VERSION,eventId:z};if(h instanceof fs){h.setDefaultLanguage(v.languageCode),Ve.providerId=h.providerId||"",(0,W.xb)(h.getCustomParameters())||(Ve.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Qt,fn]of Object.entries(ie||{}))Ve[Qt]=fn}if(h instanceof vi){const Qt=h.getScopes().filter(fn=>""!==fn);Qt.length>0&&(Ve.scopes=Qt.join(","))}v.tenantId&&(Ve.tid=v.tenantId);const Tt=Ve;for(const Qt of Object.keys(Tt))void 0===Tt[Qt]&&delete Tt[Qt];return`${function uh({config:v}){return v.emulator?gt(v,i_):`https://${v.authDomain}/${Hf}`}(v)}?${(0,W.xO)(Tt).slice(1)}`}const ch="webStorageSupport",Ls=class s_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qn,this._completeRedirectFn=Kn,this._overrideRedirectResult=xr}_openPopup(h,p,D,z){var ie=this;return(0,y.Z)(function*(){var Ve;Ie(null===(Ve=ie.eventManagers[h._key()])||void 0===Ve?void 0:Ve.manager,"_initialize() not called before _openPopup()");const Tt=zf(h,p,D,lt(),z);return function lh(v,h,p,D=ah,z=ka){const ie=Math.max((window.screen.availHeight-z)/2,0).toString(),Ve=Math.max((window.screen.availWidth-D)/2,0).toString();let Tt="";const Qt=Object.assign(Object.assign({},jf),{width:D.toString(),height:z.toString(),top:ie,left:Ve}),fn=(0,W.z$)().toLowerCase();p&&(Tt=ke(fn)?r_:p),at(fn)&&(h=h||$g,Qt.scrollbars="yes");const Fn=Object.entries(Qt).reduce((Cs,[Ea,md])=>`${Cs}${Ea}=${md},`,"");if(function ur(v=(0,W.z$)()){var h;return Mt(v)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(fn)&&"_self"!==Tt)return function id(v,h){const p=document.createElement("a");p.href=v,p.target=h;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(D)}(h||"",Tt),new rd(null);const Nn=window.open(h||"",Tt,Fn);re(Nn,v,"popup-blocked");try{Nn.focus()}catch{}return new rd(Nn)}(h,Tt,Zr())})()}_openRedirect(h,p,D,z){var ie=this;return(0,y.Z)(function*(){return yield ie._originValidation(h),function ks(v){Ar().location.href=v}(zf(h,p,D,lt(),z)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:z,promise:ie}=this.eventManagers[p];return z?Promise.resolve(z):(Ie(ie,"If manager is not set, promise should be"),ie)}const D=this.initAndGetManager(h);return this.eventManagers[p]={promise:D},D.catch(()=>{delete this.eventManagers[p]}),D}initAndGetManager(h){var p=this;return(0,y.Z)(function*(){const D=yield function Vf(v){return Dl.apply(this,arguments)}(h),z=new Hl(h);return D.register("authEvent",ie=>(re(null==ie?void 0:ie.authEvent,h,"invalid-auth-event"),{status:z.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:z},p.iframes[h._key()]=D,z})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(ch,{type:ch},z=>{var ie;const Ve=null===(ie=null==z?void 0:z[0])||void 0===ie?void 0:ie[ch];void 0!==Ve&&p(!!Ve),Ye(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Iu(v){return Lf.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Br()||Xt()||Mt()}};class Gf{constructor(h){this.factorId=h}_process(h,p,D){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,D);case"signin":return this._finalizeSignIn(h,p.credential);default:return xe("unexpected MultiFactorSessionType")}}}class zl extends Gf{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new zl(h)}_finalizeEnroll(h,p,D){return function fu(v,h){return de(v,"POST","/v2/accounts/mfaEnrollment:finalize",it(v,h))}(h,{idToken:p,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function wi(v,h){return de(v,"POST","/v2/accounts/mfaSignIn:finalize",it(v,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wf=(()=>{class v{constructor(){}static assertion(p){return zl._fromCredential(p)}}return v.FACTOR_ID="phone",v})();var qf="@firebase/auth";class hh{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,y.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(D=>{h((null==D?void 0:D.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Gl(){return window}(0,W.Pz)("authIdTokenMaxAge"),function Yf(v){(0,oe._registerComponent)(new he.wA("auth",(h,{options:p})=>{const D=h.getProvider("app").getImmediate(),z=h.getProvider("heartbeat"),{apiKey:ie,authDomain:Ve}=D.options;return((Tt,Qt)=>{re(ie&&!ie.includes(":"),"invalid-api-key",{appName:Tt.name}),re(!(null!=Ve&&Ve.includes(":")),"argument-error",{appName:Tt.name});const fn={apiKey:ie,authDomain:Ve,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yi(v)},Fn=new Si(Tt,Qt,fn);return function Ze(v,h){const p=(null==h?void 0:h.persistence)||[],D=(Array.isArray(p)?p:[p]).map(ze);null!=h&&h.errorMap&&v._updateErrorMap(h.errorMap),v._initializeWithPersistence(D,null==h?void 0:h.popupRedirectResolver)}(Fn,p),Fn})(D,z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,D)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new he.wA("auth-internal",h=>{const p=rr(h.getProvider("auth").getImmediate());return new hh(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(qf,"0.22.0",function fh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,oe.registerVersion)(qf,"0.22.0","esm2017")}("Browser");const lc=2e3;function mh(){return mh=(0,y.Z)(function*(v,h,p){var D;const{BuildInfo:z}=Gl();Ie(h.sessionId,"AuthEvent did not contain a session ID");const ie=yield function _h(v){return bu.apply(this,arguments)}(h.sessionId),Ve={};return Mt()?Ve.ibi=z.packageName:ge()?Ve.apn=z.packageName:Ye(v,"operation-not-supported-in-this-environment"),z.displayName&&(Ve.appDisplayName=z.displayName),Ve.sessionId=ie,zf(v,p,h.type,void 0,null!==(D=h.eventId)&&void 0!==D?D:void 0,Ve)}),mh.apply(this,arguments)}function wu(){return(wu=(0,y.Z)(function*(v){const{BuildInfo:h}=Gl(),p={};Mt()?p.iosBundleId=h.packageName:ge()?p.androidPackageName=h.packageName:Ye(v,"operation-not-supported-in-this-environment"),yield kg(v,p)})).apply(this,arguments)}function rs(){return(rs=(0,y.Z)(function*(v,h,p){const{cordova:D}=Gl();let z=()=>{};try{yield new Promise((ie,Ve)=>{let Tt=null;function Qt(){var Nn;ie();const Cs=null===(Nn=D.plugins.browsertab)||void 0===Nn?void 0:Nn.close;"function"==typeof Cs&&Cs(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function fn(){Tt||(Tt=window.setTimeout(()=>{Ve(Xe(v,"redirect-cancelled-by-user"))},lc))}function Fn(){"visible"===(null==document?void 0:document.visibilityState)&&fn()}h.addPassiveListener(Qt),document.addEventListener("resume",fn,!1),ge()&&document.addEventListener("visibilitychange",Fn,!1),z=()=>{h.removePassiveListener(Qt),document.removeEventListener("resume",fn,!1),document.removeEventListener("visibilitychange",Fn,!1),Tt&&window.clearTimeout(Tt)}})}finally{z()}})).apply(this,arguments)}function bu(){return(bu=(0,y.Z)(function*(v){const h=function o_(v){if(Ie(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const h=new ArrayBuffer(v.length),p=new Uint8Array(h);for(let D=0;D<v.length;D++)p[D]=v.charCodeAt(D);return p}(v),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(z=>z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const a_=20;class Vg extends Hl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,y.Z)(function*(){yield h.initPromise})()}}function Jf(v){return uc.apply(this,arguments)}function uc(){return(uc=(0,y.Z)(function*(v){const h=yield cc()._get(tp(v));return h&&(yield cc()._remove(tp(v))),h})).apply(this,arguments)}function vh(){const v=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<a_;p++){const D=Math.floor(Math.random()*h.length);v.push(h.charAt(D))}return v.join("")}function cc(){return ze(Jn)}function tp(v){return Ee("authEvent",v.config.apiKey,v.name)}function Cu(v){if(null==v||!v.includes("?"))return{};const[h,...p]=v.split("?");return(0,W.zd)(p.join("?"))}const dc=class jg{constructor(){this._redirectPersistence=qn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Kn,this._overrideRedirectResult=xr}_initialize(h){var p=this;return(0,y.Z)(function*(){const D=h._key();let z=p.eventManagers.get(D);return z||(z=new Vg(h),p.eventManagers.set(D,z),p.attachCallbackListeners(h,z)),z})()}_openPopup(h){Ye(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,D,z){var ie=this;return(0,y.Z)(function*(){!function to(v){var h,p,D,z,ie,Ve,Tt,Qt,fn,Fn;const Nn=Gl();re("function"==typeof(null===(h=null==Nn?void 0:Nn.universalLinks)||void 0===h?void 0:h.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(p=null==Nn?void 0:Nn.BuildInfo)||void 0===p?void 0:p.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(ie=null===(z=null===(D=null==Nn?void 0:Nn.cordova)||void 0===D?void 0:D.plugins)||void 0===z?void 0:z.browsertab)||void 0===ie?void 0:ie.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Qt=null===(Tt=null===(Ve=null==Nn?void 0:Nn.cordova)||void 0===Ve?void 0:Ve.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===Qt?void 0:Qt.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(Fn=null===(fn=null==Nn?void 0:Nn.cordova)||void 0===fn?void 0:fn.InAppBrowser)||void 0===Fn?void 0:Fn.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const Ve=yield ie._initialize(h);yield Ve.initialized(),Ve.resetRedirect(),function rn(){K.clear()}(),yield ie._originValidation(h);const Tt=function l_(v,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:vh(),postBody:null,tenantId:v.tenantId,error:Xe(v,"no-auth-event")}}(h,D,z);yield function u_(v,h){return cc()._set(tp(v),h)}(h,Tt);const Qt=yield function Xf(v,h,p){return mh.apply(this,arguments)}(h,Tt,p),fn=yield function yh(v){const{cordova:h}=Gl();return new Promise(p=>{h.plugins.browsertab.isAvailable(D=>{let z=null;D?h.plugins.browsertab.openUrl(v):z=h.InAppBrowser.open(v,function gn(v=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),p(z)})})}(Qt);return function Wl(v,h,p){return rs.apply(this,arguments)}(h,Ve,fn)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Qf(v){return wu.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:D,handleOpenURL:z,BuildInfo:ie}=Gl(),Ve=setTimeout((0,y.Z)(function*(){yield Jf(h),p.onEvent(np())}),500),Tt=function(){var Fn=(0,y.Z)(function*(Nn){clearTimeout(Ve);const Cs=yield Jf(h);let Ea=null;Cs&&null!=Nn&&Nn.url&&(Ea=function ep(v,h){var p,D;const z=function Ih(v){const h=Cu(v),p=h.link?decodeURIComponent(h.link):void 0,D=Cu(p).link,z=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Cu(z).link||z||D||p||v}(h);if(z.includes("/__/auth/callback")){const ie=Cu(z),Ve=ie.firebaseError?function Eh(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(ie.firebaseError)):null,Tt=null===(D=null===(p=null==Ve?void 0:Ve.code)||void 0===p?void 0:p.split("auth/"))||void 0===D?void 0:D[1],Qt=Tt?Xe(Tt):null;return Qt?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Qt,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:z,postBody:null}}return null}(Cs,Nn.url)),p.onEvent(Ea||np())});return function(Cs){return Fn.apply(this,arguments)}}();typeof D<"u"&&"function"==typeof D.subscribe&&D.subscribe(null,Tt);const Qt=z,fn=`${ie.packageName.toLowerCase()}://`;Gl().handleOpenURL=function(){var Fn=(0,y.Z)(function*(Nn){if(Nn.toLowerCase().startsWith(fn)&&Tt({url:Nn}),"function"==typeof Qt)try{Qt(Nn)}catch(Cs){console.error(Cs)}});return function(Nn){return Fn.apply(this,arguments)}}()}};function np(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Xe("no-auth-event")}}const Hg=1e3;function hc(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function bh(v=(0,W.z$)()){return!("file:"!==hc()&&"ionic:"!==hc()&&"capacitor:"!==hc()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function ud(){try{const v=self.localStorage,h=Zr();if(v)return v.setItem(h,"1"),v.removeItem(h),!function ld(v=(0,W.z$)()){return function nl(){return(0,W.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ad(v=(0,W.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,W.hl)()}catch{return Tl()&&(0,W.hl)()}return!1}function Tl(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fc(){return(function Du(){return"http:"===hc()||"https:"===hc()}()||(0,W.ru)()||bh())&&!function zg(){return(0,W.b$)()||(0,W.UG)()}()&&ud()&&!Tl()}function bs(){return bh()&&typeof document<"u"}function Yl(){return(Yl=(0,y.Z)(function*(){return!!bs()&&new Promise(v=>{const h=setTimeout(()=>{v(!1)},Hg);document.addEventListener("deviceready",()=>{clearTimeout(h),v(!0)})})})).apply(this,arguments)}const Go={LOCAL:"local",NONE:"none",SESSION:"session"},Tu=re,Dh="persistence";function rl(v){return Su.apply(this,arguments)}function Su(){return(Su=(0,y.Z)(function*(v){yield v._initializationPromise;const h=Th(),p=Ee(Dh,v.config.apiKey,v.name);h&&h.setItem(p,v._getPersistence())})).apply(this,arguments)}function Th(){var v;try{return(null===(v=function Ch(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Sh=re;class Na{constructor(){this.browserResolver=ze(Ls),this.cordovaResolver=ze(dc),this.underlyingResolver=null,this._redirectPersistence=qn,this._completeRedirectFn=Kn,this._overrideRedirectResult=xr}_initialize(h){var p=this;return(0,y.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,D,z){var ie=this;return(0,y.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openPopup(h,p,D,z)})()}_openRedirect(h,p,D,z){var ie=this;return(0,y.Z)(function*(){return yield ie.selectUnderlyingResolver(),ie.assertedUnderlyingResolver._openRedirect(h,p,D,z)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return bs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Sh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,y.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Gg(){return Yl.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function ip(v){return v.unwrap()}function op(v){return Au(v)}function Au(v){const{_tokenResponse:h}=v instanceof W.ZR?v.customData:v;if(!h)return null;if(!(v instanceof W.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Ro.credentialFromResult(v);const p=h.providerId;if(!p||p===we.PASSWORD)return null;let D;switch(p){case we.GOOGLE:D=Ca;break;case we.FACEBOOK:D=As;break;case we.GITHUB:D=da;break;case we.TWITTER:D=Do;break;default:const{oauthIdToken:z,oauthAccessToken:ie,oauthTokenSecret:Ve,pendingToken:Tt,nonce:Qt}=h;return ie||Ve||z||Tt?Tt?p.startsWith("saml.")?xs._create(p,Tt):Gr._fromParams({providerId:p,signInMethod:p,pendingToken:Tt,idToken:z,accessToken:ie}):new ps(p).credential({idToken:z,accessToken:ie,rawNonce:Qt}):null}return v instanceof W.ZR?D.credentialFromError(v):D.credentialFromResult(v)}function fo(v,h){return h.catch(p=>{throw p instanceof W.ZR&&function cd(v,h){var p;const D=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null==h?void 0:h.code))h.resolver=new Wg(v,function za(v,h){var p;const D=(0,W.m9)(v),z=h;return re(h.customData.operationType,D,"argument-error"),re(null===(p=z.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,D,"argument-error"),xi._fromError(D,z)}(v,h));else if(D){const z=Au(h),ie=h;z&&(ie.credential=z,ie.tenantId=D.tenantId||void 0,ie.email=D.email||void 0,ie.phoneNumber=D.phoneNumber||void 0)}}(v,p),p}).then(p=>{const z=p.user;return{operationType:p.operationType,credential:op(p),additionalUserInfo:ec(p),user:Wo.getOrCreate(z)}})}function dd(v,h){return hd.apply(this,arguments)}function hd(){return(hd=(0,y.Z)(function*(v,h){const p=yield h;return{verificationId:p.verificationId,confirm:D=>fo(v,p.confirm(D))}})).apply(this,arguments)}class Wg{constructor(h,p){this.resolver=p,this.auth=function sp(v){return v.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return fo(ip(this.auth),this.resolver.resolveSignIn(h))}}class Wo{constructor(h){this._delegate=h,this.multiFactor=function F(v){const h=(0,W.m9)(v);return G.has(h)||G.set(h,P._fromUser(h)),G.get(h)}(h)}static getOrCreate(h){return Wo.USER_MAP.has(h)||Wo.USER_MAP.set(h,new Wo(h)),Wo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,y.Z)(function*(){return fo(p.auth,Ks(p._delegate,h))})()}linkWithPhoneNumber(h,p){var D=this;return(0,y.Z)(function*(){return dd(D.auth,function Nf(v,h,p){return vu.apply(this,arguments)}(D._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,y.Z)(function*(){return fo(p.auth,function T(v,h,p){return _.apply(this,arguments)}(p._delegate,h,Na))})()}linkWithRedirect(h){var p=this;return(0,y.Z)(function*(){return yield rl(rr(p.auth)),Ut(p._delegate,h,Na)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,y.Z)(function*(){return fo(p.auth,Jo(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return dd(this.auth,function oh(v,h,p){return Ja.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return fo(this.auth,function Hi(v,h,p){return C.apply(this,arguments)}(this._delegate,h,Na))}reauthenticateWithRedirect(h){var p=this;return(0,y.Z)(function*(){return yield rl(rr(p.auth)),ve(p._delegate,h,Na)})()}sendEmailVerification(h){return function ms(v,h){return ha.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,y.Z)(function*(){return yield function Ws(v,h){return Xi.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Va(v,h){return hl((0,W.m9)(v),h,null)}(this._delegate,h)}updatePassword(h){return function Ll(v,h){return hl((0,W.m9)(v),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function gi(v,h){return El.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Sa(v,h){return Qs.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function fa(v,h,p){return pi.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Wo.USER_MAP=new WeakMap;const pc=re;let fd=(()=>{class v{constructor(p,D){if(this.app=p,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:z}=p.options;pc(z,"invalid-api-key",{appName:p.name}),pc(z,"invalid-api-key",{appName:p.name});const ie=typeof window<"u"?Na:void 0;this._delegate=D.initialize({options:{persistence:xu(z,p.name),popupRedirectResolver:ie}}),this._delegate._updateErrorMap(Ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Wo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,D){!function di(v,h,p){const D=rr(v);re(D._canInitEmulator,D,"emulator-config-failed"),re(/^https?:\/\//.test(h),D,"invalid-emulator-scheme");const z=!(null==p||!p.disableWarnings),ie=zn(h),{host:Ve,port:Tt}=function hr(v){const h=zn(v),p=/(\/\/)?([^?#/]+)/.exec(v.substr(h.length));if(!p)return{host:"",port:null};const D=p[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(D);if(z){const ie=z[1];return{host:ie,port:Pn(D.substr(ie.length+1))}}{const[ie,Ve]=D.split(":");return{host:ie,port:Pn(Ve)}}}(h);D.config.emulator={url:`${ie}//${Ve}${null===Tt?"":`:${Tt}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:Ve,port:Tt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function Vn(){function v(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,p,D)}applyActionCode(p){return function ta(v,h){return xo.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return I(this._delegate,p)}confirmPasswordReset(p,D){return function ea(v,h,p){return Sn.apply(this,arguments)}(this._delegate,p,D)}createUserWithEmailAndPassword(p,D){var z=this;return(0,y.Z)(function*(){return fo(z._delegate,function se(v,h,p){return O.apply(this,arguments)}(z._delegate,p,D))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function es(v,h){return Kr.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function et(v,h){const p=si.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,y.Z)(function*(){pc(fc(),p._delegate,"operation-not-supported-in-this-environment");const D=yield function wn(v,h){return Gt.apply(this,arguments)}(p._delegate,Na);return D?fo(p._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function c_(v,h){rr(v)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,D,z){const{next:ie,error:Ve,complete:Tt}=gc(p,D,z);return this._delegate.onAuthStateChanged(ie,Ve,Tt)}onIdTokenChanged(p,D,z){const{next:ie,error:Ve,complete:Tt}=gc(p,D,z);return this._delegate.onIdTokenChanged(ie,Ve,Tt)}sendSignInLinkToEmail(p,D){return function x(v,h,p){return q.apply(this,arguments)}(this._delegate,p,D)}sendPasswordResetEmail(p,D){return function Rs(v,h,p){return uo.apply(this,arguments)}(this._delegate,p,D||void 0)}setPersistence(p){var D=this;return(0,y.Z)(function*(){let z;switch(function rp(v,h){Tu(Object.values(Go).includes(h),v,"invalid-persistence-type"),(0,W.b$)()?Tu(h!==Go.SESSION,v,"unsupported-persistence-type"):(0,W.UG)()?Tu(h===Go.NONE,v,"unsupported-persistence-type"):Tl()?Tu(h===Go.NONE||h===Go.LOCAL&&(0,W.hl)(),v,"unsupported-persistence-type"):Tu(h===Go.NONE||ud(),v,"unsupported-persistence-type")}(D._delegate,p),p){case Go.SESSION:z=qn;break;case Go.LOCAL:z=(yield ze(jo)._isAvailable())?jo:Jn;break;case Go.NONE:z=Ae;break;default:return Ye("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(z)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return fo(this._delegate,function Gs(v){return ao.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return fo(this._delegate,En(this._delegate,p))}signInWithCustomToken(p){return fo(this._delegate,function So(v,h){return gs.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,D){return fo(this._delegate,function S(v,h,p){return En((0,W.m9)(v),go.credential(h,p))}(this._delegate,p,D))}signInWithEmailLink(p,D){return fo(this._delegate,function kt(v,h,p){return Xn.apply(this,arguments)}(this._delegate,p,D))}signInWithPhoneNumber(p,D){return dd(this._delegate,function kf(v,h,p){return Qc.apply(this,arguments)}(this._delegate,p,D))}signInWithPopup(p){var D=this;return(0,y.Z)(function*(){return pc(fc(),D._delegate,"operation-not-supported-in-this-environment"),fo(D._delegate,function ic(v,h,p){return sc.apply(this,arguments)}(D._delegate,p,Na))})()}signInWithRedirect(p){var D=this;return(0,y.Z)(function*(){return pc(fc(),D._delegate,"operation-not-supported-in-this-environment"),yield rl(D._delegate),N(D._delegate,p,Na)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function b(v,h){return U.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Go,v})();function gc(v,h,p){let D=v;"function"!=typeof v&&({next:D,error:h,complete:p}=v);const z=D;return{next:Ve=>z(Ve&&Wo.getOrCreate(Ve)),error:h,complete:p}}function xu(v,h){const p=function Kl(v,h){const p=Th();if(!p)return[];const D=Ee(Dh,v,h);switch(p.getItem(D)){case Go.NONE:return[Ae];case Go.LOCAL:return[jo,qn];case Go.SESSION:return[qn];default:return[]}}(v,h);if(typeof self<"u"&&!p.includes(jo)&&p.push(jo),typeof window<"u")for(const D of[Jn,qn])p.includes(D)||p.push(D);return p.includes(Ae)||p.push(Ae),p}class pd{constructor(){this.providerId="phone",this._delegate=new Ro(ip(f.Z.auth()))}static credential(h,p){return Ro.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}pd.PHONE_SIGN_IN_METHOD=Ro.PHONE_SIGN_IN_METHOD,pd.PROVIDER_ID=Ro.PROVIDER_ID;const Zl=re;class gd{constructor(h,p,D=f.Z.app()){var z;Zl(null===(z=D.options)||void 0===z?void 0:z.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Xr(h,p,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function d_(v){v.INTERNAL.registerComponent(new he.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),D=h.getProvider("auth");return new fd(p,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ue_EMAIL_SIGNIN,PASSWORD_RESET:ue_PASSWORD_RESET,RECOVER_EMAIL:ue_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ue_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ue_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ue_VERIFY_EMAIL}},EmailAuthProvider:go,FacebookAuthProvider:As,GithubAuthProvider:da,GoogleAuthProvider:Ca,OAuthProvider:ps,SAMLAuthProvider:Vi,PhoneAuthProvider:pd,PhoneMultiFactorGenerator:Wf,RecaptchaVerifier:gd,TwitterAuthProvider:Do,Auth:fd,AuthCredential:Sr,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.3.7")}(f.Z)},8766:(Wt,nt,B)=>{"use strict";B.d(nt,{Lj:()=>Ye,X3:()=>rt});var y=B(5861);const f=(re,xe)=>xe.some(Ie=>re instanceof Ie);let W,oe;const he=new WeakMap,Me=new WeakMap,we=new WeakMap,fe=new WeakMap,ae=new WeakMap;let Pe={get(re,xe,Ie){if(re instanceof IDBTransaction){if("done"===xe)return Me.get(re);if("objectStoreNames"===xe)return re.objectStoreNames||we.get(re);if("store"===xe)return Ie.objectStoreNames[1]?void 0:Ie.objectStore(Ie.objectStoreNames[0])}return ye(re[xe])},set:(re,xe,Ie)=>(re[xe]=Ie,!0),has:(re,xe)=>re instanceof IDBTransaction&&("done"===xe||"store"===xe)||xe in re};function _e(re){return"function"==typeof re?function pt(re){return re!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(re)?function(...xe){return re.apply(Oe(this),xe),ye(he.get(this))}:function(...xe){return ye(re.apply(Oe(this),xe))}:function(xe,...Ie){const He=re.call(Oe(this),xe,...Ie);return we.set(He,xe.sort?xe.sort():[xe]),ye(He)}}(re):(re instanceof IDBTransaction&&function De(re){if(Me.has(re))return;const xe=new Promise((Ie,He)=>{const ze=()=>{re.removeEventListener("complete",ut),re.removeEventListener("error",Ze),re.removeEventListener("abort",Ze)},ut=()=>{Ie(),ze()},Ze=()=>{He(re.error||new DOMException("AbortError","AbortError")),ze()};re.addEventListener("complete",ut),re.addEventListener("error",Ze),re.addEventListener("abort",Ze)});Me.set(re,xe)}(re),f(re,function be(){return W||(W=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(re,Pe):re)}function ye(re){if(re instanceof IDBRequest)return function ue(re){const xe=new Promise((Ie,He)=>{const ze=()=>{re.removeEventListener("success",ut),re.removeEventListener("error",Ze)},ut=()=>{Ie(ye(re.result)),ze()},Ze=()=>{He(re.error),ze()};re.addEventListener("success",ut),re.addEventListener("error",Ze)});return xe.then(Ie=>{Ie instanceof IDBCursor&&he.set(Ie,re)}).catch(()=>{}),ae.set(xe,re),xe}(re);if(fe.has(re))return fe.get(re);const xe=_e(re);return xe!==re&&(fe.set(re,xe),ae.set(xe,re)),xe}const Oe=re=>ae.get(re);function rt(re,xe,{blocked:Ie,upgrade:He,blocking:ze,terminated:ut}={}){const Ze=indexedDB.open(re,xe),lt=ye(Ze);return He&&Ze.addEventListener("upgradeneeded",ot=>{He(ye(Ze.result),ot.oldVersion,ot.newVersion,ye(Ze.transaction))}),Ie&&Ze.addEventListener("blocked",()=>Ie()),lt.then(ot=>{ut&&ot.addEventListener("close",()=>ut()),ze&&ot.addEventListener("versionchange",()=>ze())}).catch(()=>{}),lt}function Ye(re,{blocked:xe}={}){const Ie=indexedDB.deleteDatabase(re);return xe&&Ie.addEventListener("blocked",()=>xe()),ye(Ie).then(()=>{})}const Xe=["get","getKey","getAll","getAllKeys","count"],Je=["put","add","delete","clear"],ht=new Map;function Te(re,xe){if(!(re instanceof IDBDatabase)||xe in re||"string"!=typeof xe)return;if(ht.get(xe))return ht.get(xe);const Ie=xe.replace(/FromIndex$/,""),He=xe!==Ie,ze=Je.includes(Ie);if(!(Ie in(He?IDBIndex:IDBObjectStore).prototype)||!ze&&!Xe.includes(Ie))return;const ut=function(){var Ze=(0,y.Z)(function*(lt,...ot){const Re=this.transaction(lt,ze?"readwrite":"readonly");let Se=Re.store;return He&&(Se=Se.index(ot.shift())),(yield Promise.all([Se[Ie](...ot),ze&&Re.done]))[0]});return function(ot){return Ze.apply(this,arguments)}}();return ht.set(xe,ut),ut}!function Ke(re){Pe=re(Pe)}(re=>({...re,get:(xe,Ie,He)=>Te(xe,Ie)||re.get(xe,Ie,He),has:(xe,Ie)=>!!Te(xe,Ie)||re.has(xe,Ie)}))},5861:(Wt,nt,B)=>{"use strict";function y(W,oe,be,Ce,he,Me,we){try{var fe=W[Me](we),ae=fe.value}catch(ue){return void be(ue)}fe.done?oe(ae):Promise.resolve(ae).then(Ce,he)}function f(W){return function(){var oe=this,be=arguments;return new Promise(function(Ce,he){var Me=W.apply(oe,be);function we(ae){y(Me,Ce,he,we,fe,"next",ae)}function fe(ae){y(Me,Ce,he,we,fe,"throw",ae)}we(void 0)})}}B.d(nt,{Z:()=>f})}},Wt=>{Wt(Wt.s=5093)}]);