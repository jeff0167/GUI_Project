(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6217:(cn,mt,j)=>{"use strict";j.d(mt,{nm:()=>Ri});var _=j(2122);j(4650),j(259);var Je=j(5861),et=j(9681),Xe=j(4859),X=j(2090),Re=j(1877);const ne=new Map,Qe={activated:!1,tokenObservers:[]},ye={initialized:!1,enabled:!1};function qe(tt){return ne.get(tt)||Object.assign({},Qe)}function ct(){return ye}const ze="https://content-firebaseappcheck.googleapis.com/v1",xe="exchangeDebugToken",Ae={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class it{constructor(Ve,yt,Ht,Qt,Nn){if(this.operation=Ve,this.retryPolicy=yt,this.getWaitDuration=Ht,this.lowerBound=Qt,this.upperBound=Nn,this.pending=null,this.nextErrorWaitInterval=Qt,Qt>Nn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ve){var yt=this;return(0,Je.Z)(function*(){yt.stop();try{yt.pending=new X.BH,yield function ht(tt){return new Promise(Ve=>{setTimeout(Ve,tt)})}(yt.getNextRun(Ve)),yt.pending.resolve(),yield yt.pending.promise,yt.pending=new X.BH,yield yt.operation(),yt.pending.resolve(),yield yt.pending.promise,yt.process(!0).catch(()=>{})}catch(Ht){yt.retryPolicy(Ht)?yt.process(!1).catch(()=>{}):yt.stop()}})()}getNextRun(Ve){if(Ve)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const yt=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),yt}}}const Vt=new X.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(tt,Ve){return fn.apply(this,arguments)}function fn(){return(fn=(0,Je.Z)(function*({url:tt,body:Ve},yt){const Ht={"Content-Type":"application/json"},Qt=yt.getImmediate({optional:!0});if(Qt){const ai=yield Qt.getHeartbeatsHeader();ai&&(Ht["X-Firebase-Client"]=ai)}const Nn={method:"POST",body:JSON.stringify(Ve),headers:Ht};let Qn,kr;try{Qn=yield fetch(tt,Nn)}catch(ai){throw Vt.create("fetch-network-error",{originalErrorMessage:null==ai?void 0:ai.message})}if(200!==Qn.status)throw Vt.create("fetch-status-error",{httpStatus:Qn.status});try{kr=yield Qn.json()}catch(ai){throw Vt.create("fetch-parse-error",{originalErrorMessage:null==ai?void 0:ai.message})}const fr=kr.ttl.match(/^([\d.]+)(s)$/);if(!fr||!fr[2]||isNaN(Number(fr[1])))throw Vt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${kr.ttl}`});const Ss=1e3*Number(fr[1]),ei=Date.now();return{token:kr.token,expireTimeMillis:ei+Ss,issuedAtTimeMillis:ei}})).apply(this,arguments)}const Tn="firebase-app-check-database",Hn=1,or="firebase-app-check-store";let gr=null;function _r(tt,Ve){return On.apply(this,arguments)}function On(){return(On=(0,Je.Z)(function*(tt,Ve){const Ht=(yield function tn(){return gr||(gr=new Promise((tt,Ve)=>{try{const yt=indexedDB.open(Tn,Hn);yt.onsuccess=Ht=>{tt(Ht.target.result)},yt.onerror=Ht=>{var Qt;Ve(Vt.create("storage-open",{originalErrorMessage:null===(Qt=Ht.target.error)||void 0===Qt?void 0:Qt.message}))},yt.onupgradeneeded=Ht=>{0===Ht.oldVersion&&Ht.target.result.createObjectStore(or,{keyPath:"compositeKey"})}}catch(yt){Ve(Vt.create("storage-open",{originalErrorMessage:null==yt?void 0:yt.message}))}}),gr)}()).transaction(or,"readwrite"),Nn=Ht.objectStore(or).put({compositeKey:tt,value:Ve});return new Promise((Qn,kr)=>{Nn.onsuccess=fr=>{Qn()},Ht.onerror=fr=>{var Ss;kr(Vt.create("storage-set",{originalErrorMessage:null===(Ss=fr.target.error)||void 0===Ss?void 0:Ss.message}))}})})).apply(this,arguments)}const yr=new Re.Yd("@firebase/app-check");function hi(tt,Ve){return(0,X.hl)()?function Rr(tt,Ve){return _r(function Kt(tt){return`${tt.options.appId}-${tt.name}`}(tt),Ve)}(tt,Ve).catch(yt=>{yr.warn(`Failed to write token to IndexedDB. Error: ${yt}`)}):Promise.resolve()}function nr(){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,Je.Z)(function*(){const tt=ct();if(tt.enabled&&tt.token)return tt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const an={error:"UNKNOWN_ERROR"};function jt(tt){return X.US.encodeString(JSON.stringify(tt),!1)}function Cn(tt){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,Je.Z)(function*(tt,Ve=!1){const yt=tt.app;!function gt(tt){if(!qe(tt).activated)throw Vt.create("use-before-activation",{appName:tt.name})}(yt);const Ht=qe(yt);let Nn,Qt=Ht.token;if(Qt&&!Ke(Qt)&&(Ht.token=void 0,Qt=void 0),!Qt){const fr=yield Ht.cachedTokenPromise;fr&&(Ke(fr)?Qt=fr:yield hi(yt,void 0))}if(!Ve&&Qt&&Ke(Qt))return{token:Qt.token};let kr,Qn=!1;if(function si(){return ct().enabled}()){Ht.exchangeTokenPromise||(Ht.exchangeTokenPromise=nn(function Xt(tt,Ve){const{projectId:yt,appId:Ht,apiKey:Qt}=tt.options;return{url:`${ze}/projects/${yt}/apps/${Ht}:${xe}?key=${Qt}`,body:{debug_token:Ve}}}(yt,yield nr()),tt.heartbeatServiceProvider).finally(()=>{Ht.exchangeTokenPromise=void 0}),Qn=!0);const fr=yield Ht.exchangeTokenPromise;return yield hi(yt,fr),Ht.token=fr,{token:fr.token}}try{Ht.exchangeTokenPromise||(Ht.exchangeTokenPromise=Ht.provider.getToken().finally(()=>{Ht.exchangeTokenPromise=void 0}),Qn=!0),Qt=yield qe(yt).exchangeTokenPromise}catch(fr){"appCheck/throttled"===fr.code?yr.warn(fr.message):yr.error(fr),Nn=fr}return Qt?Nn?kr=Ke(Qt)?{token:Qt.token,internalError:Nn}:Nt(Nn):(kr={token:Qt.token},Ht.token=Qt,yield hi(yt,Qt)):kr=Nt(Nn),Qn&&function Pe(tt,Ve){const yt=qe(tt).tokenObservers;for(const Ht of yt)try{"EXTERNAL"===Ht.type&&null!=Ve.error?Ht.error(Ve.error):Ht.next(Ve)}catch{}}(yt,kr),kr})).apply(this,arguments)}function $n(tt,Ve){const yt=qe(tt),Ht=yt.tokenObservers.filter(Qt=>Qt.next!==Ve);0===Ht.length&&yt.tokenRefresher&&yt.tokenRefresher.isRunning()&&yt.tokenRefresher.stop(),yt.tokenObservers=Ht}function Er(tt){const{app:Ve}=tt,yt=qe(Ve);let Ht=yt.tokenRefresher;Ht||(Ht=function $e(tt){const{app:Ve}=tt;return new it((0,Je.Z)(function*(){let Ht;if(Ht=qe(Ve).token?yield Cn(tt,!0):yield Cn(tt),Ht.error)throw Ht.error;if(Ht.internalError)throw Ht.internalError}),()=>!0,()=>{const yt=qe(Ve);if(yt.token){let Ht=yt.token.issuedAtTimeMillis+.5*(yt.token.expireTimeMillis-yt.token.issuedAtTimeMillis)+3e5;return Ht=Math.min(Ht,yt.token.expireTimeMillis-3e5),Math.max(0,Ht-Date.now())}return 0},Ae.RETRIAL_MIN_WAIT,Ae.RETRIAL_MAX_WAIT)}(tt),yt.tokenRefresher=Ht),!Ht.isRunning()&&yt.isTokenAutoRefreshEnabled&&Ht.start()}function Ke(tt){return tt.expireTimeMillis-Date.now()>0}function Nt(tt){return{token:jt(an),error:tt}}class It{constructor(Ve,yt){this.app=Ve,this.heartbeatServiceProvider=yt}_delete(){const{tokenObservers:Ve}=qe(this.app);for(const yt of Ve)$n(this.app,yt.next);return Promise.resolve()}}const un="app-check-internal";!function Jn(){(0,et._registerComponent)(new Xe.wA("app-check",tt=>function wn(tt,Ve){return new It(tt,Ve)}(tt.getProvider("app").getImmediate(),tt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((tt,Ve,yt)=>{tt.getProvider(un).initialize()})),(0,et._registerComponent)(new Xe.wA(un,tt=>function We(tt){return{getToken:Ve=>Cn(tt,Ve),addTokenListener:Ve=>function In(tt,Ve,yt,Ht){const{app:Qt}=tt,Nn=qe(Qt);if(Nn.tokenObservers=[...Nn.tokenObservers,{next:yt,error:Ht,type:Ve}],Nn.token&&Ke(Nn.token)){const kr=Nn.token;Promise.resolve().then(()=>{yt({token:kr.token}),Er(tt)}).catch(()=>{})}Nn.cachedTokenPromise.then(()=>Er(tt))}(tt,"INTERNAL",Ve),removeTokenListener:Ve=>$n(tt.app,Ve)}}(tt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,et.registerVersion)("@firebase/app-check","0.6.4")}();class Ri{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},1205:(cn,mt,j)=>{"use strict";j.d(mt,{zQ:()=>ze,ww:()=>_t,rT:()=>ye,f7:()=>nt,L6:()=>ne,_Q:()=>Qe,lh:()=>qe,Qv:()=>Re,nw:()=>ct});var _=j(4650),m=j(7579),J=j(9646),fe=j(9751),Fe=j(8996),Me=j(6451),Ie=j(5363),Le=j(3900),Be=j(4004),we=j(6063);class me extends m.x{constructor(xe=1/0,Ae=1/0,Oe=we.l){super(),this._bufferSize=xe,this._windowTime=Ae,this._timestampProvider=Oe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,xe),this._windowTime=Math.max(1,Ae)}next(xe){const{isStopped:Ae,_buffer:Oe,_infiniteTimeWindow:it,_timestampProvider:ht,_windowTime:Zt}=this;Ae||(Oe.push(xe),!it&&Oe.push(ht.now()+Zt)),this._trimBuffer(),super.next(xe)}_subscribe(xe){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe(xe),{_infiniteTimeWindow:Oe,_buffer:it}=this,ht=it.slice();for(let Zt=0;Zt<ht.length&&!xe.closed;Zt+=Oe?1:2)xe.next(ht[Zt]);return this._checkFinalizedStatuses(xe),Ae}_trimBuffer(){const{_bufferSize:xe,_timestampProvider:Ae,_buffer:Oe,_infiniteTimeWindow:it}=this,ht=(it?1:2)*xe;if(xe<1/0&&ht<Oe.length&&Oe.splice(0,Oe.length-ht),!it){const Zt=Ae.now();let Vt=0;for(let vn=1;vn<Oe.length&&Oe[vn]<=Zt;vn+=2)Vt=vn;Vt&&Oe.splice(0,Vt+1)}}}var ve=j(3099);function Ue(ot,xe,Ae){let Oe,it=!1;return ot&&"object"==typeof ot?({bufferSize:Oe=1/0,windowTime:xe=1/0,refCount:it=!1,scheduler:Ae}=ot):Oe=null!=ot?ot:1/0,(0,ve.B)({connector:()=>new me(Oe,xe,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:it})}var je=j(590),rt=j(576);function Dt(ot,xe){return(0,rt.m)(xe)?(0,Le.w)(()=>ot,xe):(0,Le.w)(()=>ot)}var Ne=j(9468),Ce=j(9300),ue=j(2122),ut=j(2011),Je=j(6895),et=j(6217),Xe=j(9260);const Re=new _.OlP("angularfire2.auth.use-emulator"),ne=new _.OlP("angularfire2.auth.settings"),Qe=new _.OlP("angularfire2.auth.tenant-id"),ye=new _.OlP("angularfire2.auth.langugage-code"),qe=new _.OlP("angularfire2.auth.use-device-language"),nt=new _.OlP("angularfire.auth.persistence"),ct=(ot,xe,Ae,Oe,it,ht,Zt,Vt)=>(0,ut.cc)(`${ot.name}.auth`,"AngularFireAuth",ot.name,()=>{const vn=xe.runOutsideAngular(()=>ot.auth());if(Ae&&vn.useEmulator(...Ae),Oe&&(vn.tenantId=Oe),vn.languageCode=it,ht&&vn.useDeviceLanguage(),Zt)for(const[gt,Ee]of Object.entries(Zt))vn.settings[gt]=Ee;return Vt&&vn.setPersistence(Vt),vn},[Ae,Oe,it,ht,Zt,Vt]);let ze=(()=>{class ot{constructor(Ae,Oe,it,ht,Zt,Vt,vn,gt,Ee,bt,nn,fn){const Mn=new m.x,_n=(0,J.of)(void 0).pipe((0,Ie.Q)(Zt.outsideAngular),(0,Le.w)(()=>ht.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9800)))),(0,Be.U)(()=>(0,ut.on)(Ae,ht,Oe)),(0,Be.U)(Xt=>ct(Xt,ht,Vt,gt,Ee,bt,vn,nn)),Ue({bufferSize:1,refCount:!1}));if((0,Je.PM)(it))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,J.of)(null);else{_n.pipe((0,je.P)()).subscribe();const Tn=_n.pipe((0,Le.w)(En=>En.getRedirectResult().then(gr=>gr,()=>null)),ue.iC,Ue({bufferSize:1,refCount:!1})),Hn=_n.pipe((0,Le.w)(En=>new fe.y(gr=>({unsubscribe:ht.runOutsideAngular(()=>En.onAuthStateChanged(tn=>gr.next(tn),tn=>gr.error(tn),()=>gr.complete()))})))),or=_n.pipe((0,Le.w)(En=>new fe.y(gr=>({unsubscribe:ht.runOutsideAngular(()=>En.onIdTokenChanged(tn=>gr.next(tn),tn=>gr.error(tn),()=>gr.complete()))}))));this.authState=Tn.pipe(Dt(Hn),(0,Ne.R)(Zt.outsideAngular),(0,Ie.Q)(Zt.insideAngular)),this.user=Tn.pipe(Dt(or),(0,Ne.R)(Zt.outsideAngular),(0,Ie.Q)(Zt.insideAngular)),this.idToken=this.user.pipe((0,Le.w)(En=>En?(0,Fe.D)(En.getIdToken()):(0,J.of)(null))),this.idTokenResult=this.user.pipe((0,Le.w)(En=>En?(0,Fe.D)(En.getIdTokenResult()):(0,J.of)(null))),this.credential=(0,Me.T)(Tn,Mn,this.authState.pipe((0,Ce.h)(En=>!En))).pipe((0,Be.U)(En=>null!=En&&En.user?En:null),(0,Ne.R)(Zt.outsideAngular),(0,Ie.Q)(Zt.insideAngular))}return(0,ut.pX)(this,_n,ht,{spy:{apply:(Xt,Tn,Hn)=>{(Xt.startsWith("signIn")||Xt.startsWith("createUser"))&&Hn.then(or=>Mn.next(or))}}})}}return ot.\u0275fac=function(Ae){return new(Ae||ot)(_.LFG(ut.Dh),_.LFG(ut.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(ue.HU),_.LFG(Re,8),_.LFG(ne,8),_.LFG(Qe,8),_.LFG(ye,8),_.LFG(qe,8),_.LFG(nt,8),_.LFG(et.nm,8))},ot.\u0275prov=_.Yz7({token:ot,factory:ot.\u0275fac,providedIn:"any"}),ot})(),_t=(()=>{class ot{constructor(){Xe.Z.registerVersion("angularfire",ue.q4.full,"auth-compat")}}return ot.\u0275fac=function(Ae){return new(Ae||ot)},ot.\u0275mod=_.oAB({type:ot}),ot.\u0275inj=_.cJS({providers:[ze]}),ot})()},3101:(cn,mt,j)=>{"use strict";j.d(mt,{ST:()=>Hy,yb:()=>t0});var _=j(4650),m=j(4986),J=j(9751),fe=j(8996),Fe=j(9646),Me=j(2122),Ie=j(8675),Le=j(4482),Be=j(5403);function we(){return(0,Le.e)((i,e)=>{let t,s=!1;i.subscribe((0,Be.x)(e,d=>{const g=t;t=d,s&&e.next([g,d]),s=!0}))})}var ne,me=j(4004),ve=j(5026),Ue=j(1884),je=j(9300),rt=j(2011),Dt=j(6895),Ce=(j(9800),j(3942)),ue=j(5861),ut=j(9681),Je=j(4859),et=j(1877),Xe=j(2090),X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Re={},Qe=Qe||{},ye=X||self;function qe(){}function nt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ct(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var _t="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function xe(i,e,t){return i.call.apply(i.bind,arguments)}function Ae(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,s),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Oe(i,e,t){return(Oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xe:Ae).apply(null,arguments)}function it(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function ht(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(s,d,g){for(var w=Array(arguments.length-2),k=2;k<arguments.length;k++)w[k-2]=arguments[k];return e.prototype[d].apply(s,w)}}function Zt(){this.s=this.s,this.o=this.o}Zt.prototype.s=!1,Zt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function ze(i){Object.prototype.hasOwnProperty.call(i,_t)&&i[_t]||(i[_t]=++ot)}(this)},Zt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function gt(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Ee(i,e){for(let t=1;t<arguments.length;t++){const s=arguments[t];if(nt(s)){const d=i.length||0,g=s.length||0;i.length=d+g;for(let w=0;w<g;w++)i[d+w]=s[w]}else i.push(s)}}function bt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}bt.prototype.h=function(){this.defaultPrevented=!0};var nn=function(){if(!ye.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ye.addEventListener("test",qe,e),ye.removeEventListener("test",qe,e)}catch{}return i}();function fn(i){return/^[\s\xa0]*$/.test(i)}var Mn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function _n(i,e){return i<e?-1:i>e?1:0}function Xt(){var i=ye.navigator;return i&&(i=i.userAgent)?i:""}function Tn(i){return-1!=Xt().indexOf(i)}function Hn(i){return Hn[" "](i),i}Hn[" "]=qe;var _r,i,En=Tn("Opera"),gr=Tn("Trident")||Tn("MSIE"),tn=Tn("Edge"),Yr=tn||gr,Rr=Tn("Gecko")&&!(-1!=Xt().toLowerCase().indexOf("webkit")&&!Tn("Edge"))&&!(Tn("Trident")||Tn("MSIE"))&&!Tn("Edge"),Vr=-1!=Xt().toLowerCase().indexOf("webkit")&&!Tn("Edge");function di(){var i=ye.document;return i?i.documentMode:void 0}e:{var On="",Jt=(i=Xt(),Rr?/rv:([^\);]+)(\)|;)/.exec(i):tn?/Edge\/([\d\.]+)/.exec(i):gr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Vr?/WebKit\/(\S+)/.exec(i):En?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Jt&&(On=Jt?Jt[1]:""),gr){var An=di();if(null!=An&&An>parseFloat(On)){_r=String(An);break e}}_r=On}var Kt={};var hi=ye.document&&gr&&(di()||parseInt(_r,10))||void 0;function wi(i,e){if(bt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Rr){e:{try{Hn(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Dr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&wi.X.h.call(this)}}ht(wi,bt);var Dr={2:"touch",3:"pen",4:"mouse"};wi.prototype.h=function(){wi.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var si="closure_listenable_"+(1e6*Math.random()|0),nr=0;function Wn(i,e,t,s,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ha=d,this.key=++nr,this.ba=this.ea=!1}function fi(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function an(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function jt(i){const e={};for(const t in i)e[t]=i[t];return e}const Cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ln(i,e){let t,s;for(let d=1;d<arguments.length;d++){for(t in s=arguments[d],s)i[t]=s[t];for(let g=0;g<Cn.length;g++)t=Cn[g],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function In(i){this.src=i,this.g={},this.h=0}function $n(i,e){var t=e.type;if(t in i.g){var g,s=i.g[t],d=vn(s,e);(g=0<=d)&&Array.prototype.splice.call(s,d,1),g&&(fi(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Er(i,e,t,s){for(var d=0;d<i.length;++d){var g=i[d];if(!g.ba&&g.listener==e&&g.capture==!!t&&g.ha==s)return d}return-1}In.prototype.add=function(i,e,t,s,d){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var w=Er(i,e,s,d);return-1<w?(e=i[w],t||(e.ea=!1)):((e=new Wn(e,this.src,g,!!s,d)).ea=t,i.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),Pe={};function Ke(i,e,t,s,d){if(s&&s.once)return wn(i,e,t,s,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Ke(i,e[g],t,s,d);return null}return t=Bn(t),i&&i[si]?i.N(e,t,ct(s)?!!s.capture:!!s,d):Nt(i,e,t,!1,s,d)}function Nt(i,e,t,s,d,g){if(!e)throw Error("Invalid event type");var w=ct(d)?!!d.capture:!!d,k=Lt(i);if(k||(i[$e]=k=new In(i)),(t=k.add(e,t,s,w,g)).proxy)return t;if(s=function It(){const e=Et;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)nn||(d=w),void 0===d&&(d=!1),i.addEventListener(e.toString(),s,d);else if(i.attachEvent)i.attachEvent(De(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function wn(i,e,t,s,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)wn(i,e[g],t,s,d);return null}return t=Bn(t),i&&i[si]?i.O(e,t,ct(s)?!!s.capture:!!s,d):Nt(i,e,t,!0,s,d)}function We(i,e,t,s,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)We(i,e[g],t,s,d);else s=ct(s)?!!s.capture:!!s,t=Bn(t),i&&i[si]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Er(g=i.g[e],t,s,d))&&(fi(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=Lt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Er(e,t,s,d)),(t=-1<i?e[i]:null)&&He(t))}function He(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[si])$n(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(De(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Lt(e))?($n(t,i),0==t.h&&(t.src=null,e[$e]=null)):fi(i)}}}function De(i){return i in Pe?Pe[i]:Pe[i]="on"+i}function Et(i,e){if(i.ba)i=!0;else{e=new wi(e,this);var t=i.listener,s=i.ha||i.src;i.ea&&He(i),i=t.call(s,e)}return i}function Lt(i){return(i=i[$e])instanceof In?i:null}var qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(i){return"function"==typeof i?i:(i[qt]||(i[qt]=function(e){return i.handleEvent(e)}),i[qt])}function Rn(){Zt.call(this),this.i=new In(this),this.P=this,this.I=null}function hr(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new bt(e,i);else if(e instanceof bt)e.target=e.target||i;else{var d=e;Ln(e=new bt(s,i),d)}if(d=!0,t)for(var g=t.length-1;0<=g;g--){var w=e.g=t[g];d=Qr(w,s,!0,e)&&d}if(d=Qr(w=e.g=i,s,!0,e)&&d,d=Qr(w,s,!1,e)&&d,t)for(g=0;g<t.length;g++)d=Qr(w=e.g=t[g],s,!1,e)&&d}function Qr(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var w=e[g];if(w&&!w.ba&&w.capture==t){var k=w.listener,G=w.ha||w.src;w.ea&&$n(i.i,w),d=!1!==k.call(G,s)&&d}}return d&&!s.defaultPrevented}ht(Rn,Zt),Rn.prototype[si]=!0,Rn.prototype.removeEventListener=function(i,e,t,s){We(this,i,e,t,s)},Rn.prototype.M=function(){if(Rn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)fi(t[s]);delete i.g[e],i.h--}}this.I=null},Rn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Rn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var pi=ye.JSON.stringify;function Xi(){var i=Kn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ar,ki=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Tr,i=>i.reset());class Tr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function es(i){ye.setTimeout(()=>{throw i},0)}function Mi(i,e){ar||function Or(){var i=ye.Promise.resolve(void 0);ar=function(){i.then(xr)}}(),tr||(ar(),tr=!0),Kn.add(i,e)}var tr=!1,Kn=new class gi{constructor(){this.h=this.g=null}add(e,t){const s=ki.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function xr(){for(var i;i=Xi();){try{i.h.call(i.g)}catch(t){es(t)}var e=ki;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}tr=!1}function Br(i,e){Rn.call(this),this.h=i||1,this.g=e||ye,this.j=Oe(this.lb,this),this.l=Date.now()}function Gi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function us(i,e,t){if("function"==typeof i)t&&(i=Oe(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Oe(i.handleEvent,i)}return 2147483647<Number(e)?-1:ye.setTimeout(i,e||0)}function ti(i){i.g=us(()=>{i.g=null,i.i&&(i.i=!1,ti(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}ht(Br,Rn),(ne=Br.prototype).ca=!1,ne.R=null,ne.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),hr(this,"tick"),this.ca&&(Gi(this),this.start()))}},ne.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ne.M=function(){Br.X.M.call(this),Gi(this),delete this.g};class un extends Zt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ti(this)}M(){super.M(),this.g&&(ye.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jn(i){Zt.call(this),this.h=i,this.g={}}ht(Jn,Zt);var Fr=[];function Jr(i,e,t,s){Array.isArray(t)||(t&&(Fr[0]=t.toString()),t=Fr);for(var d=0;d<t.length;d++){var g=Ke(e,t[d],s||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function Ri(i){an(i.g,function(e,t){this.g.hasOwnProperty(t)&&He(e)},i),i.g={}}function Lr(){this.g=!0}function _e(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function le(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var d=s[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var w=1;w<d.length;w++)d[w]=""}}}return pi(t)}catch{return e}}(i,t)+(s?" "+s:"")})}Jn.prototype.M=function(){Jn.X.M.call(this),Ri(this)},Jn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lr.prototype.Aa=function(){this.g=!1},Lr.prototype.info=function(){};var Ge={},Ye=null;function Ct(){return Ye=Ye||new Rn}function kt(i){bt.call(this,Ge.Pa,i)}function xt(i){const e=Ct();hr(e,new kt(e))}function Gt(i,e){bt.call(this,Ge.STAT_EVENT,i),this.stat=e}function rn(i){const e=Ct();hr(e,new Gt(e,i))}function Pn(i,e){bt.call(this,Ge.Qa,i),this.size=e}function qn(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ye.setTimeout(function(){i()},e)}Ge.Pa="serverreachability",ht(kt,bt),Ge.STAT_EVENT="statevent",ht(Gt,bt),Ge.Qa="timingevent",ht(Pn,bt);var tt={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Ve={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function yt(){}function Qt(){}yt.prototype.h=null;var fr,Nn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Qn(){bt.call(this,"d")}function kr(){bt.call(this,"c")}function Ss(){}function ei(i,e,t,s){this.l=i,this.j=e,this.m=t,this.U=s||1,this.S=new Jn(this),this.O=As,this.T=new Br(i=Yr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}ht(Qn,bt),ht(kr,bt),ht(Ss,yt),Ss.prototype.g=function(){return new XMLHttpRequest},Ss.prototype.i=function(){return{}},fr=new Ss;var As=45e3,Eo={},Zs={};function bi(i,e,t){i.K=1,i.v=Wi(Qi(e)),i.s=t,i.P=!0,to(i,null)}function to(i,e){i.F=Date.now(),ns(i),i.A=Qi(i.v);var t=i.A,s=i.U;Array.isArray(s)||(s=[String(s)]),No(t.i,"t",s),i.C=0,t=i.l.H,i.h=new ai,i.g=da(i.l,t?e:null,!i.s),0<i.N&&(i.L=new un(Oe(i.La,i,i.g),i.N)),Jr(i.S,i.g,"readystatechange",i.ib),e=i.H?jt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),xt(),function vi(i,e,t,s,d,g){i.info(function(){if(i.g)if(g)for(var w="",k=g.split("&"),G=0;G<k.length;G++){var Q=k[G].split("=");if(1<Q.length){var pe=Q[0];Q=Q[1];var Ze=pe.split("_");w=2<=Ze.length&&"type"==Ze[1]?w+(pe+"=")+Q+"&":w+(pe+"=redacted&")}}else w=null;else w=g;return"XMLHTTP REQ ("+s+") [attempt "+d+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.U,i.s)}function co(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function ts(i,e,t){let d,s=!0;for(;!i.I&&i.C<t.length;){if(d=$i(i,t),d==Zs){4==e&&(i.o=4,rn(14),s=!1),_e(i.j,i.m,null,"[Incomplete Response]");break}if(d==Eo){i.o=4,rn(15),_e(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}_e(i.j,i.m,d,null),xs(i,d)}co(i)&&d!=Zs&&d!=Eo&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,rn(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),kl(e),e.K=!0,rn(11))):(_e(i.j,i.m,t,"[Invalid Chunked Response]"),Is(i),Io(i))}function $i(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Zs:(t=Number(e.substring(t,s)),isNaN(t)?Eo:(s+=1)+t>e.length?Zs:(e=e.substr(s,t),i.C=s+t,e))}function ns(i){i.V=Date.now()+i.O,Us(i,i.O)}function Us(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=qn(Oe(i.gb,i),e)}function Vo(i){i.B&&(ye.clearTimeout(i.B),i.B=null)}function Io(i){0==i.l.G||i.I||Ta(i.l,i)}function Is(i){Vo(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Gi(i.T),Ri(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function xs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||Ei(t.h,i)))if(!i.J&&Ei(t.h,i)&&3==t.G){try{var s=t.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&3==s.length){var d=s;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;zo(t),ks(t)}Qs(t),rn(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=qn(Oe(t.cb,t),6e3));if(1>=Ps(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else So(t,11)}else if((i.J||t.g==i)&&zo(t),!fn(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let Q=d[e];if(t.T=Q[0],Q=Q[1],2==t.G)if("c"==Q[0]){t.I=Q[1],t.ka=Q[2];const pe=Q[3];null!=pe&&(t.ma=pe,t.j.info("VER="+t.ma));const Ze=Q[4];null!=Ze&&(t.Ca=Ze,t.j.info("SVER="+t.Ca));const Tt=Q[5];null!=Tt&&"number"==typeof Tt&&0<Tt&&(t.J=s=1.5*Tt,t.j.info("backChannelRequestTimeoutMs_="+s)),s=t;const Yt=i.g;if(Yt){const gn=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gn){var g=s.h;g.g||-1==gn.indexOf("spdy")&&-1==gn.indexOf("quic")&&-1==gn.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(ds(g,g.h),g.h=null))}if(s.D){const zn=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;zn&&(s.za=zn,_i(s.F,s.D,zn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var w=i;if((s=t).sa=Go(s,s.H?s.ka:null,s.V),w.J){Fo(s.h,w);var k=w,G=s.J;G&&k.setTimeout(G),k.B&&(Vo(k),ns(k)),s.g=w}else ca(s);0<t.i.length&&Na(t)}else"stop"!=Q[0]&&"close"!=Q[0]||So(t,7);else 3==t.G&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?So(t,7):ua(t):"noop"!=Q[0]&&t.l&&t.l.wa(Q),t.A=0)}xt()}catch{}}function sa(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(nt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function cs(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(nt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const s in i)e[t++]=s;return e}}}(i),s=function no(i){if(i.W&&"function"==typeof i.W)return i.W();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(nt(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),d=s.length,g=0;g<d;g++)e.call(void 0,s[g],t&&t[g],i)}(ne=ei.prototype).setTimeout=function(i){this.O=i},ne.ib=function(i){i=i.target;const e=this.L;e&&3==Ui(i)?e.l():this.La(i)},ne.La=function(i){try{if(i==this.g)e:{const pe=Ui(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>pe)&&(3!=pe||Yr||this.g&&(this.h.h||this.g.fa()||Ca(this.g)))){this.I||4!=pe||7==e||xt(),Vo(this);var t=this.g.aa();this.Y=t;t:if(co(this)){var s=Ca(this.g);i="";var d=s.length,g=4==Ui(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Is(this),Io(this);var w="";break t}this.h.i=new ye.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:g&&e==d-1});s.splice(0,d),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.fa();if(this.i=200==t,function se(i,e,t,s,d,g,w){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+g+" "+w})}(this.j,this.u,this.A,this.m,this.U,pe,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var k,G=this.g;if((k=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fn(k)){var Q=k;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,rn(12),Is(this),Io(this);break e}_e(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xs(this,t)}this.P?(ts(this,pe,w),Yr&&this.i&&3==pe&&(Jr(this.S,this.T,"tick",this.hb),this.T.start())):(_e(this.j,this.m,w,null),xs(this,w)),4==pe&&Is(this),this.i&&!this.I&&(4==pe?Ta(this.l,this):(this.i=!1,ns(this)))}else 400==t&&0<w.indexOf("Unknown SID")?(this.o=3,rn(12)):(this.o=0,rn(13)),Is(this),Io(this)}}}catch{}},ne.hb=function(){if(this.g){var i=Ui(this.g),e=this.g.fa();this.C<e.length&&(Vo(this),ts(this,i,e),this.i&&4!=i&&ns(this))}},ne.cancel=function(){this.I=!0,Is(this)},ne.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function st(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xt(),rn(17)),Is(this),this.o=2,Io(this)):Us(this,this.V-i)};var wo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ci(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Ci){this.h=void 0!==e?e:i.h,Xs(this,i.j),this.s=i.s,this.g=i.g,ro(this,i.m),this.l=i.l,e=i.i;var t=new bs;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),oa(this,t),this.o=i.o}else i&&(t=String(i).match(wo))?(this.h=!!e,Xs(this,t[1]||"",!0),this.s=io(t[2]||""),this.g=io(t[3]||"",!0),ro(this,t[4]),this.l=io(t[5]||"",!0),oa(this,t[6]||"",!0),this.o=io(t[7]||"")):(this.h=!!e,this.i=new bs(null,this.h))}function Qi(i){return new Ci(i)}function Xs(i,e,t){i.j=t?io(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ro(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function oa(i,e,t){e instanceof bs?(i.i=e,function ba(i,e){e&&!i.j&&(fo(i),i.i=null,i.g.forEach(function(t,s){var d=s.toLowerCase();s!=d&&(Pr(this,s),No(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=Ms(e,bo)),i.i=new bs(e,i.h))}function _i(i,e,t){i.i.set(e,t)}function Wi(i){return _i(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function io(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Ms(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,ho),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function ho(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Ci.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Ms(e,ws,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Ms(e,ws,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(Ms(t,"/"==t.charAt(0)?Vs:Rs,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Ms(t,ko)),i.join("")};var ws=/[#\/\?@]/g,Rs=/[#\?:]/g,Vs=/[#\?]/g,bo=/[#\?@]/g,ko=/#/g;function bs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function fo(i){i.g||(i.g=new Map,i.h=0,i.i&&function Oo(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),d=null;if(0<=s){var g=i[t].substring(0,s);d=i[t].substring(s+1)}else g=i[t];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Pr(i,e){fo(i),e=li(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function Co(i,e){return fo(i),e=li(i,e),i.g.has(e)}function No(i,e,t){Pr(i,e),0<t.length&&(i.i=null,i.g.set(li(i,e),gt(t)),i.h+=t.length)}function li(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ni(i){this.l=i||jo,i=ye.PerformanceNavigationTiming?0<(i=ye.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ye.g&&ye.g.Ga&&ye.g.Ga()&&ye.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ne=bs.prototype).add=function(i,e){fo(this),this.i=null,i=li(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ne.forEach=function(i,e){fo(this),this.g.forEach(function(t,s){t.forEach(function(d){i.call(e,d,s,this)},this)},this)},ne.oa=function(){fo(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let s=0;s<e.length;s++){const d=i[s];for(let g=0;g<d.length;g++)t.push(e[s])}return t},ne.W=function(i){fo(this);let e=[];if("string"==typeof i)Co(this,i)&&(e=e.concat(this.g.get(li(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},ne.set=function(i,e){return fo(this),this.i=null,Co(this,i=li(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ne.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var s=e[t];const g=encodeURIComponent(String(s)),w=this.W(s);for(s=0;s<w.length;s++){var d=g;""!==w[s]&&(d+="="+encodeURIComponent(String(w[s]))),i.push(d)}}return this.i=i.join("&")};var jo=10;function Cs(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Ps(i){return i.h?1:i.g?i.g.size:0}function Ei(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ds(i,e){i.g?i.g.add(e):i.h=e}function Fo(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function po(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return gt(i.i)}function Hs(){}function Do(){this.g=new Hs}function aa(i,e,t){const s=t||"";try{sa(i,function(d,g){let w=d;ct(d)&&(w=pi(d)),e.push(s+g+"="+encodeURIComponent(w))})}catch(d){throw e.push(s+"type="+encodeURIComponent("_badmap")),d}}function Ho(i,e,t,s,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(s)}catch{}}function so(i){this.l=i.ac||null,this.j=i.jb||!1}function C(i,e){Rn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ni.prototype.cancel=function(){if(this.i=po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Hs.prototype.stringify=function(i){return ye.JSON.stringify(i,void 0)},Hs.prototype.parse=function(i){return ye.JSON.parse(i,void 0)},ht(so,yt),so.prototype.g=function(){return new C(this.l,this.j)},so.prototype.i=function(i){return function(){return i}}({}),ht(C,Rn);var q=0;function T(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function W(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ge(i)}function ge(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ne=C.prototype).open=function(i,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ge(this)},ne.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ye).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,W(this)),this.readyState=q},ne.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ge(this)),this.g&&(this.readyState=3,ge(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ye.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;T(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},ne.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?W(this):ge(this),3==this.readyState&&T(this)}},ne.Va=function(i){this.g&&(this.response=this.responseText=i,W(this))},ne.Ua=function(i){this.g&&(this.response=i,W(this))},ne.ga=function(){this.g&&W(this)},ne.setRequestHeader=function(i,e){this.v.append(i,e)},ne.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ne.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(C.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var L=ye.JSON.parse;function R(i){Rn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=O,this.K=this.L=!1}ht(R,Rn);var O="",te=/^https?$/i,vt=["POST","PUT"];function br(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,oi(i),hs(i)}function oi(i){i.D||(i.D=!0,hr(i,"complete"),hr(i,"error"))}function Zr(i){if(i.h&&typeof Qe<"u"&&(!i.C[1]||4!=Ui(i)||2!=i.aa()))if(i.v&&4==Ui(i))us(i.Ha,0,i);else if(hr(i,"readystatechange"),4==Ui(i)){i.h=!1;try{const k=i.aa();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===k){var d=String(i.H).match(wo)[1]||null;if(!d&&ye.self&&ye.self.location){var g=ye.self.location.protocol;d=g.substr(0,g.length-1)}s=!te.test(d?d.toLowerCase():"")}t=s}if(t)hr(i,"complete"),hr(i,"success");else{i.m=6;try{var w=2<Ui(i)?i.g.statusText:""}catch{w=""}i.j=w+" ["+i.aa()+"]",oi(i)}}finally{hs(i)}}}function hs(i,e){if(i.g){rs(i);const t=i.g,s=i.C[0]?qe:null;i.g=null,i.C=null,e||hr(i,"ready");try{t.onreadystatechange=s}catch{}}}function rs(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ye.clearTimeout(i.A),i.A=null)}function Ui(i){return i.g?i.g.readyState:0}function Ca(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case O:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function pl(i){let e="";return an(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}function Fi(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=pl(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):_i(i,e,t))}function Os(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function la(i){this.Ca=0,this.i=[],this.j=new Lr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Os("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Os("baseRetryDelayMs",5e3,i),this.bb=Os("retryDelaySeedMs",1e4,i),this.$a=Os("forwardChannelMaxRetries",2,i),this.ta=Os("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Ni(i&&i.concurrentRequestLimit),this.Fa=new Do,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ua(i){if(Da(i),3==i.G){var e=i.U++,t=Qi(i.F);_i(t,"SID",i.I),_i(t,"RID",e),_i(t,"TYPE","terminate"),To(i,t),(e=new ei(i,i.j,e,void 0)).K=2,e.v=Wi(Qi(t)),t=!1,ye.navigator&&ye.navigator.sendBeacon&&(t=ye.navigator.sendBeacon(e.v.toString(),"")),!t&&ye.Image&&((new Image).src=e.v,t=!0),t||(e.g=da(e.l,null),e.g.da(e.v)),e.F=Date.now(),ns(e)}is(i)}function ks(i){i.g&&(kl(i),i.g.cancel(),i.g=null)}function Da(i){ks(i),i.u&&(ye.clearTimeout(i.u),i.u=null),zo(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ye.clearTimeout(i.m),i.m=null)}function Na(i){Cs(i.h)||i.m||(i.m=!0,Mi(i.Ja,i),i.C=0)}function gl(i,e){var t;t=e?e.m:i.U++;const s=Qi(i.F);_i(s,"SID",i.I),_i(s,"RID",t),_i(s,"AID",i.T),To(i,s),i.o&&i.s&&Fi(s,i.o,i.s),t=new ei(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=zs(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),ds(i.h,t),bi(t,s,e)}function To(i,e){i.ia&&an(i.ia,function(t,s){_i(e,s,t)}),i.l&&sa({},function(t,s){_i(e,s,t)})}function zs(i,e,t){t=Math.min(i.i.length,t);var s=i.l?Oe(i.l.Ra,i.l,i):null;e:{var d=i.i;let g=-1;for(;;){const w=["count="+t];-1==g?0<t?(g=d[0].h,w.push("ofs="+g)):g=0:w.push("ofs="+g);let k=!0;for(let G=0;G<t;G++){let Q=d[G].h;const pe=d[G].g;if(Q-=g,0>Q)g=Math.max(0,d[G].h-100),k=!1;else try{aa(pe,w,"req"+Q+"_")}catch{s&&s(pe)}}if(k){s=w.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,s}function ca(i){i.g||i.u||(i.Z=1,Mi(i.Ia,i),i.A=0)}function Qs(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=qn(Oe(i.Ia,i),ml(i,i.A)),i.A++,0))}function kl(i){null!=i.B&&(ye.clearTimeout(i.B),i.B=null)}function qa(i){i.g=new ei(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=Qi(i.sa);_i(e,"RID","rpc"),_i(e,"SID",i.I),_i(e,"CI",i.L?"0":"1"),_i(e,"AID",i.T),_i(e,"TYPE","xmlhttp"),To(i,e),i.o&&i.s&&Fi(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=Wi(Qi(e)),t.s=null,t.P=!0,to(t,i)}function zo(i){null!=i.v&&(ye.clearTimeout(i.v),i.v=null)}function Ta(i,e){var t=null;if(i.g==e){zo(i),kl(i),i.g=null;var s=2}else{if(!Ei(i.h,e))return;t=e.D,Fo(i.h,e),s=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;hr(s=Ct(),new Pn(s,t)),Na(i)}else ca(i);else if(3==(d=e.o)||0==d&&0<i.pa||!(1==s&&function Ol(i,e){return!(Ps(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=qn(Oe(i.Ja,i,e),ml(i,i.C)),i.C++,0)))}(i,e)||2==s&&Qs(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),d){case 1:So(i,5);break;case 4:So(i,10);break;case 3:So(i,6);break;default:So(i,2)}}function ml(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function So(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var s=Oe(i.kb,i);t||(t=new Ci("//www.google.com/images/cleardot.gif"),ye.location&&"http"==ye.location.protocol||Xs(t,"https"),Wi(t)),function sr(i,e){const t=new Lr;if(ye.Image){const s=new Image;s.onload=it(Ho,t,s,"TestLoadImage: loaded",!0,e),s.onerror=it(Ho,t,s,"TestLoadImage: error",!1,e),s.onabort=it(Ho,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=it(Ho,t,s,"TestLoadImage: timeout",!1,e),ye.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else rn(2);i.G=0,i.l&&i.l.va(e),is(i),Da(i)}function is(i){if(i.G=0,i.la=[],i.l){const e=po(i.h);(0!=e.length||0!=i.i.length)&&(Ee(i.la,e),Ee(i.la,i.i),i.h.i.length=0,gt(i.i),i.i.length=0),i.l.ua()}}function Go(i,e,t){var s=t instanceof Ci?Qi(t):new Ci(t,void 0);if(""!=s.g)e&&(s.g=e+"."+s.g),ro(s,s.m);else{var d=ye.location;s=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var g=new Ci(null,void 0);s&&Xs(g,s),e&&(g.g=e),d&&ro(g,d),t&&(g.l=t),s=g}return e=i.za,(t=i.D)&&e&&_i(s,t,e),_i(s,"VER",i.ma),To(i,s),s}function da(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new R(t&&i.Da&&!i.ra?new so({jb:!0}):i.ra)).Ka(i.H),e}function Ao(){}function $r(){if(gr&&!(10<=Number(hi)))throw Error("Environmental error: no available transport.")}function fs(i,e){Rn.call(this),this.g=new la(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!fn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ni(this)}function mi(i){Qn.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Wo(){kr.call(this),this.status=1}function ni(i){this.g=i}(ne=R.prototype).Ka=function(i){this.L=i},ne.da=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():fr.g(),this.C=function Ht(i){return i.h||(i.h=i.i())}(this.u?this.u:fr),this.g.onreadystatechange=Oe(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void br(this,g)}if(i=t||"",t=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var d in s)t.set(d,s[d]);else{if("function"!=typeof s.keys||"function"!=typeof s.get)throw Error("Unknown input type for opt_headers: "+String(s));for(const g of s.keys())t.set(g,s.get(g))}s=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),d=ye.FormData&&i instanceof ye.FormData,!(0<=vn(vt,e))||s||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,w]of t)this.g.setRequestHeader(g,w);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rs(this),0<this.B&&((this.K=function sn(i){return gr&&function yr(){return function or(i){var e=Kt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Mn(String(_r)).split("."),t=Mn("9").split("."),s=Math.max(e.length,t.length);for(let w=0;0==i&&w<s;w++){var d=e[w]||"",g=t[w]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;i=_n(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||_n(0==d[2].length,0==g[2].length)||_n(d[2],g[2]),d=d[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oe(this.qa,this)):this.A=us(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){br(this,g)}},ne.qa=function(){typeof Qe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hr(this,"timeout"),this.abort(8))},ne.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,hr(this,"complete"),hr(this,"abort"),hs(this))},ne.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hs(this,!0)),R.X.M.call(this)},ne.Ha=function(){this.s||(this.F||this.v||this.l?Zr(this):this.fb())},ne.fb=function(){Zr(this)},ne.aa=function(){try{return 2<Ui(this)?this.g.status:-1}catch{return-1}},ne.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ne.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),L(e)}},ne.Ea=function(){return this.m},ne.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ne=la.prototype).ma=8,ne.G=1,ne.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const d=new ei(this,this.j,i,void 0);let g=this.s;if(this.S&&(g?(g=jt(g),Ln(g,this.S)):g=this.S),null!==this.o||this.N||(d.H=g,g=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var s=this.i[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zs(this,d,e),_i(t=Qi(this.F),"RID",i),_i(t,"CVER",22),this.D&&_i(t,"X-HTTP-Session-Id",this.D),To(this,t),g&&(this.N?e="headers="+encodeURIComponent(String(pl(g)))+"&"+e:this.o&&Fi(t,this.o,g)),ds(this.h,d),this.Ya&&_i(t,"TYPE","init"),this.O?(_i(t,"$req",e),_i(t,"SID","null"),d.Z=!0,bi(d,t,null)):bi(d,t,e),this.G=2}}else 3==this.G&&(i?gl(this,i):0==this.i.length||Cs(this.h)||gl(this))},ne.Ia=function(){if(this.u=null,qa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=qn(Oe(this.eb,this),i)}},ne.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,rn(10),ks(this),qa(this))},ne.cb=function(){null!=this.v&&(this.v=null,ks(this),Qs(this),rn(19))},ne.kb=function(i){i?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))},(ne=Ao.prototype).xa=function(){},ne.wa=function(){},ne.va=function(){},ne.ua=function(){},ne.Ra=function(){},$r.prototype.g=function(i,e){return new fs(i,e)},ht(fs,Rn),fs.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;rn(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=Go(i,null,i.V),Na(i)},fs.prototype.close=function(){ua(this.g)},fs.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=pi(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&Na(e)},fs.prototype.M=function(){this.g.l=null,delete this.j,ua(this.g),delete this.g,fs.X.M.call(this)},ht(mi,Qn),ht(Wo,kr),ht(ni,Ao),ni.prototype.xa=function(){hr(this.g,"a")},ni.prototype.wa=function(i){hr(this.g,new mi(i))},ni.prototype.va=function(i){hr(this.g,new Wo)},ni.prototype.ua=function(){hr(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,Ve.COMPLETE="complete",Qt.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",Rn.prototype.listen=Rn.prototype.N,R.prototype.listenOnce=R.prototype.O,R.prototype.getLastError=R.prototype.Oa,R.prototype.getLastErrorCode=R.prototype.Ea,R.prototype.getStatus=R.prototype.aa,R.prototype.getResponseJson=R.prototype.Sa,R.prototype.getResponseText=R.prototype.fa,R.prototype.send=R.prototype.da,R.prototype.setWithCredentials=R.prototype.Ka;var ha=Re.createWebChannelTransport=function(){return new $r},ss=Re.getStatEventTarget=function(){return Ct()},Nl=Re.ErrorCode=tt,yl=Re.EventType=Ve,Ya=Re.Event=Ge,Ka=Re.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},F=Re.FetchXmlHttpFactory=so,Z=Re.WebChannel=Qt,V=Re.XhrIo=R;const oe="@firebase/firestore";class be{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");let Mt="9.19.0";const zt=new et.Yd("@firebase/firestore");function Vn(){return zt.logLevel}function Ft(i,...e){if(zt.logLevel<=et.in.DEBUG){const t=e.map(Vi);zt.debug(`Firestore (${Mt}): ${i}`,...t)}}function lr(i,...e){if(zt.logLevel<=et.in.ERROR){const t=e.map(Vi);zt.error(`Firestore (${Mt}): ${i}`,...t)}}function Zn(i,...e){if(zt.logLevel<=et.in.WARN){const t=e.map(Vi);zt.warn(`Firestore (${Mt}): ${i}`,...t)}}function Vi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function hn(i="Unexpected state"){const e=`FIRESTORE (${Mt}) INTERNAL ASSERTION FAILED: `+i;throw lr(e),new Error(e)}function yn(i,e){i||hn()}function on(i,e){return i}const At={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Xe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Za{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(be.UNAUTHENTICATED))}shutdown(){}}class Xa{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qa{constructor(e){this.t=e,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let d=this.i;const g=Q=>this.i!==d?(d=this.i,t(Q)):Promise.resolve();let w=new Ti;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new Ti,e.enqueueRetryable(()=>g(this.currentUser))};const k=()=>{const Q=w;e.enqueueRetryable((0,ue.Z)(function*(){yield Q.promise,yield g(s.currentUser)}))},G=Q=>{Ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),k()};this.t.onInit(Q=>G(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?G(Q):(Ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new Ti)}},0),k()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(yn("string"==typeof s.accessToken),new Gs(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return yn(null===e||"string"==typeof e),new be(e)}}class fa{constructor(e,t,s){this.h=e,this.l=t,this.m=s,this.type="FirstParty",this.user=be.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Ja{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new fa(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class el{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const s=g=>{null!=g.error&&Ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const w=g.token!==this.T;return this.T=g.token,Ft("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const d=g=>{Ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.I.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.I.getImmediate({optional:!0});g?d(g):Ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(yn("string"==typeof t.token),this.T=t.token,new Sa(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qo(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class Fa{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const d=qo(40);for(let g=0;g<d.length;++g)s.length<20&&d[g]<t&&(s+=e.charAt(d[g]%e.length))}return s}}function pr(i,e){return i<e?-1:i>e?1:0}function go(i,e,t){return i.length===e.length&&i.every((s,d)=>t(s,e[d]))}function La(i){return i+"\0"}class Ii{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wt(At.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Wt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wt(At.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ii.fromMillis(Date.now())}static fromDate(e){return Ii.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Ii(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pr(this.nanoseconds,e.nanoseconds):pr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xn(e)}static min(){return new Xn(new Ii(0,0))}static max(){return new Xn(new Ii(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tl{constructor(e,t,s){void 0===t?t=0:t>e.length&&hn(),void 0===s?s=e.length-t:s>e.length-t&&hn(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===tl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let d=0;d<s;d++){const g=e.get(d),w=t.get(d);if(g<w)return-1;if(g>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class jr extends tl{construct(e,t,s){return new jr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new Wt(At.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(d=>d.length>0))}return new jr(t)}static emptyPath(){return new jr([])}}const Uc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ui extends tl{construct(e,t,s){return new ui(e,t,s)}static isValidIdentifier(e){return Uc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ui.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ui(["__name__"])}static fromServerFormat(e){const t=[];let s="",d=0;const g=()=>{if(0===s.length)throw new Wt(At.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let w=!1;for(;d<e.length;){const k=e[d];if("\\"===k){if(d+1===e.length)throw new Wt(At.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[d+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new Wt(At.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,d+=2}else"`"===k?(w=!w,d++):"."!==k||w?(s+=k,d++):(g(),d++)}if(g(),w)throw new Wt(At.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ui(t)}static emptyPath(){return new ui([])}}class Sn{constructor(e){this.path=e}static fromPath(e){return new Sn(jr.fromString(e))}static fromName(e){return new Sn(jr.fromString(e).popFirst(5))}static empty(){return new Sn(jr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===jr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return jr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Sn(new jr(e.slice()))}}class Pi{constructor(e,t,s,d){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=d}}function nl(i){return i.fields.find(e=>2===e.kind)}function Ws(i){return i.fields.filter(e=>2!==e.kind)}Pi.UNKNOWN_ID=-1;class El{constructor(e,t){this.fieldPath=e,this.kind=t}}class ps{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ps(0,gs.min())}}function ru(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,d=Xn.fromTimestamp(1e9===s?new Ii(t+1,0):new Ii(t,s));return new gs(d,Sn.empty(),e)}function sc(i){return new gs(i.readTime,i.key,-1)}class gs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new gs(Xn.min(),Sn.empty(),-1)}static max(){return new gs(Xn.max(),Sn.empty(),-1)}}function iu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Sn.comparator(i.documentKey,e.documentKey),0!==t?t:pr(i.largestBatchId,e.largestBatchId))}const os="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Il{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ms(i){return Aa.apply(this,arguments)}function Aa(){return Aa=(0,ue.Z)(function*(i){if(i.code!==At.FAILED_PRECONDITION||i.message!==os)throw i;Ft("LocalStore","Unexpectedly lost primary lease")}),Aa.apply(this,arguments)}class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rt((s,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,d)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rt?t:Rt.resolve(t)}catch(t){return Rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.reject(t)}static resolve(e){return new Rt((t,s)=>{t(e)})}static reject(e){return new Rt((t,s)=>{s(e)})}static waitFor(e){return new Rt((t,s)=>{let d=0,g=0,w=!1;e.forEach(k=>{++d,k.next(()=>{++g,w&&g===d&&t()},G=>s(G))}),w=!0,g===d&&t()})}static or(e){let t=Rt.resolve(!1);for(const s of e)t=t.next(d=>d?Rt.resolve(d):s());return t}static forEach(e,t){const s=[];return e.forEach((d,g)=>{s.push(t.call(this,d,g))}),this.waitFor(s)}static mapArray(e,t){return new Rt((s,d)=>{const g=e.length,w=new Array(g);let k=0;for(let G=0;G<g;G++){const Q=G;t(e[Q]).next(pe=>{w[Q]=pe,++k,k===g&&s(w)},pe=>d(pe))}})}static doWhile(e,t){return new Rt((s,d)=>{const g=()=>{!0===e()?t().next(()=>{g()},d):s()};g()})}}class Js{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.R=new Ti,this.transaction.oncomplete=()=>{this.R.resolve()},this.transaction.onabort=()=>{t.error?this.R.reject(new Au(e,t.error)):this.R.resolve()},this.transaction.onerror=s=>{const d=oc(s.target.error);this.R.reject(new Au(e,d))}}static open(e,t,s,d){try{return new Js(t,e.transaction(d,s))}catch(g){throw new Au(t,g)}}get v(){return this.R.promise}abort(e){e&&this.R.reject(e),this.aborted||(Ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Oi(t)}}class oo{constructor(e,t,s){this.name=e,this.version=t,this.V=s,12.2===oo.S((0,Xe.z$)())&&lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ft("SimpleDb","Removing database:",e),pa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Xe.hl)())return!1;if(oo.C())return!0;const e=(0,Xe.z$)(),t=oo.S(e),s=0<t&&t<10,d=oo.N(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static O(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static N(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}$(e){var t=this;return(0,ue.Z)(function*(){return t.db||(Ft("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,d)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=w=>{s(w.target.result)},g.onblocked=()=>{d(new Au(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=w=>{const k=w.target.error;d("VersionError"===k.name?new Wt(At.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===k.name?new Wt(At.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+k):new Au(e,k))},g.onupgradeneeded=w=>{Ft("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.M(w.target.result,g.transaction,w.oldVersion,t.version).next(()=>{Ft("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=s=>t.F(s)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,d){var g=this;return(0,ue.Z)(function*(){const w="readonly"===t;let k=0;for(;;){++k;try{g.db=yield g.$(e);const G=Js.open(g.db,e,w?"readonly":"readwrite",s),Q=d(G).next(pe=>(G.P(),pe)).catch(pe=>(G.abort(pe),Rt.reject(pe))).toPromise();return Q.catch(()=>{}),yield G.v,Q}catch(G){const Q=G,pe="FirebaseError"!==Q.name&&k<3;if(Ft("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",pe),g.close(),!pe)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ll{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return pa(this.L.delete())}}class Au extends Wt{constructor(e,t){super(At.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rl(i){return"IndexedDbTransactionError"===i.name}class Oi{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ft("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),pa(s)}add(e){return Ft("SimpleDb","ADD",this.store.name,e,e),pa(this.store.add(e))}get(e){return pa(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ft("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ft("SimpleDb","DELETE",this.store.name,e),pa(this.store.delete(e))}count(){return Ft("SimpleDb","COUNT",this.store.name),pa(this.store.count())}j(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const d=this.cursor(s),g=[];return this.W(d,(w,k)=>{g.push(k)}).next(()=>g)}{const d=this.store.getAll(s.range);return new Rt((g,w)=>{d.onerror=k=>{w(k.target.error)},d.onsuccess=k=>{g(k.target.result)}})}}H(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Rt((d,g)=>{s.onerror=w=>{g(w.target.error)},s.onsuccess=w=>{d(w.target.result)}})}J(e,t){Ft("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.Y=!1;const d=this.cursor(s);return this.W(d,(g,w,k)=>k.delete())}Z(e,t){let s;t?s=e:(s={},t=e);const d=this.cursor(s);return this.W(d,t)}X(e){const t=this.cursor({});return new Rt((s,d)=>{t.onerror=g=>{const w=oc(g.target.error);d(w)},t.onsuccess=g=>{const w=g.target.result;w?e(w.primaryKey,w.value).next(k=>{k?w.continue():s()}):s()}})}W(e,t){const s=[];return new Rt((d,g)=>{e.onerror=w=>{g(w.target.error)},e.onsuccess=w=>{const k=w.target.result;if(!k)return void d();const G=new Ll(k),Q=t(k.primaryKey,k.value,G);if(Q instanceof Rt){const pe=Q.catch(Ze=>(G.done(),Rt.reject(Ze)));s.push(pe)}G.isDone?d():null===G.K?k.continue():k.continue(G.K)}}).next(()=>Rt.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.Y?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pa(i){return new Rt((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const d=oc(s.target.error);t(d)}})}let il=!1;function oc(i){const e=oo.S((0,Xe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new Wt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return il||(il=!0,setTimeout(()=>{throw s},0)),s}}return i}class xu{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ue.Z)(function*(){t.task=null;try{Ft("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(s){rl(s)?Ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ms(s)}yield t.et(6e4)}))}}class Dd{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.st(s,e))})()}st(e,t){const s=new Set;let d=t,g=!0;return Rt.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!s.has(w))return Ft("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,d).next(k=>{d-=k,s.add(w)});g=!1})).next(()=>t-d)}it(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,s).next(g=>{const w=g.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(d,g)).next(k=>(Ft("IndexBackiller",`Updating offset: ${k}`),this.localStore.indexManager.updateCollectionGroup(e,t,k))).next(()=>w.size)}))}rt(e,t){let s=e;return t.changes.forEach((d,g)=>{const w=sc(g);iu(w,s)>0&&(s=w)}),new gs(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}let eo=(()=>{class i{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>s.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Bl(i){return null==i}function Yo(i){return 0===i&&1/i==-1/0}function Mu(i){return"number"==typeof i&&Number.isInteger(i)&&!Yo(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function ao(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=sl(e)),e=ji(i.get(t),e);return sl(e)}function ji(i,e){let t=e;const s=i.length;for(let d=0;d<s;d++){const g=i.charAt(d);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function sl(i){return i+"\x01\x01"}function ys(i){const e=i.length;if(yn(e>=2),2===e)return yn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),jr.emptyPath();const t=e-2,s=[];let d="";for(let g=0;g<e;){const w=i.indexOf("\x01",g);switch((w<0||w>t)&&hn(),i.charAt(w+1)){case"\x01":const k=i.substring(g,w);let G;0===d.length?G=k:(d+=k,G=d,d=""),s.push(G);break;case"\x10":d+=i.substring(g,w),d+="\0";break;case"\x11":d+=i.substring(g,w+1);break;default:hn()}g=w+2}return new jr(s)}const Ko=["userId","batchId"];function vs(i,e){return[i,ao(e)]}function Zo(i,e,t){return[i,ao(e),t]}const ri={},Hr=["prefixPath","collectionGroup","readTime","documentId"],vr=["prefixPath","collectionGroup","documentId"],Xo=["collectionGroup","readTime","prefixPath","documentId"],Di=["canonicalId","targetId"],Ru=["targetId","path"],Vc=["path","targetId"],lo=["collectionId","parent"],S=["indexId","uid"],A=["uid","sequenceNumber"],I=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P=["indexId","uid","orderedDocumentKey"],H=["userId","collectionPath","documentId"],ie=["userId","collectionPath","largestBatchId"],ae=["userId","collectionGroup","largestBatchId"],at=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pt=[...at,"documentOverlays"],dn=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fn=dn,Dn=[...Fn,"indexConfiguration","indexState","indexEntries"];class zr extends Il{constructor(e,t){super(),this.at=e,this.currentSequenceNumber=t}}function Ir(i,e){const t=on(i);return oo.O(t.at,e)}function Ns(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function $(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function z(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class re{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new re(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const d=this.comparator(e,s.key);if(0===d)return t+s.left.size;d<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ke(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ke(this.root,e,this.comparator,!1)}getReverseIterator(){return new ke(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ke(this.root,e,this.comparator,!0)}}class ke{constructor(e,t,s,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,t,s,d,g){this.key=e,this.value=t,this.color=null!=s?s:dt.RED,this.left=null!=d?d:dt.EMPTY,this.right=null!=g?g:dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,d,g){return new dt(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=d?d:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let d=this;const g=s(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,t,s),null):0===g?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,s)),d.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return dt.EMPTY;s=d.right.min(),d=d.copy(s.key,s.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw hn();const e=this.left.check();if(e!==this.right.check())throw hn();return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1,dt.EMPTY=new class{constructor(){this.size=0}get key(){throw hn()}get value(){throw hn()}get color(){throw hn()}get left(){throw hn()}get right(){throw hn()}copy(i,e,t,s,d){return this}insert(i,e,t){return new dt(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ft{constructor(e){this.comparator=e,this.data=new re(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const d=s.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $t(this.data.getIterator())}getIteratorFrom(e){return new $t(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ft(this.comparator);return t.data=e,t}}class $t{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Un(i){return i.hasNext()?i.getNext():void 0}class xn{constructor(e){this.fields=e,e.sort(ui.comparator)}static empty(){return new xn([])}unionWith(e){let t=new ft(ui.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ur extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new ur("Invalid base64 string: "+d):d}}(e);return new Yn(t)}static fromUint8Array(e){const t=function(s){let d="";for(let g=0;g<s.length;++g)d+=String.fromCharCode(s[g]);return d}(e);return new Yn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yn.EMPTY_BYTE_STRING=new Yn("");const qi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yi(i){if(yn(!!i),"string"==typeof i){let e=0;const t=qi.exec(i);if(yn(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Gr(i.seconds),nanos:Gr(i.nanos)}}function Gr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ol(i){return"string"==typeof i?Yn.fromBase64String(i):Yn.fromUint8Array(i)}function Ba(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mo(i){const e=i.mapValue.fields.__previous_value__;return Ba(e)?Mo(e):e}function mo(i){const e=Yi(i.mapValue.fields.__local_write_time__.timestampValue);return new Ii(e.seconds,e.nanos)}class ac{constructor(e,t,s,d,g,w,k,G){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=d,this.ssl=g,this.forceLongPolling=w,this.autoDetectLongPolling=k,this.useFetchStreams=G}}class wl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wl&&e.projectId===this.projectId&&e.database===this.database}}const $a={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},su={nullValue:"NULL_VALUE"};function $l(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ba(i)?4:wh(i)?9007199254740991:10:hn()}function bl(i,e){if(i===e)return!0;const t=$l(i);if(t!==$l(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return mo(i).isEqual(mo(e));case 3:return function(s,d){if("string"==typeof s.timestampValue&&"string"==typeof d.timestampValue&&s.timestampValue.length===d.timestampValue.length)return s.timestampValue===d.timestampValue;const g=Yi(s.timestampValue),w=Yi(d.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,ol(i.bytesValue).isEqual(ol(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,d){return Gr(s.geoPointValue.latitude)===Gr(d.geoPointValue.latitude)&&Gr(s.geoPointValue.longitude)===Gr(d.geoPointValue.longitude)}(i,e);case 2:return function(s,d){if("integerValue"in s&&"integerValue"in d)return Gr(s.integerValue)===Gr(d.integerValue);if("doubleValue"in s&&"doubleValue"in d){const g=Gr(s.doubleValue),w=Gr(d.doubleValue);return g===w?Yo(g)===Yo(w):isNaN(g)&&isNaN(w)}return!1}(i,e);case 9:return go(i.arrayValue.values||[],e.arrayValue.values||[],bl);case 10:return function(s,d){const g=s.mapValue.fields||{},w=d.mapValue.fields||{};if(Ns(g)!==Ns(w))return!1;for(const k in g)if(g.hasOwnProperty(k)&&(void 0===w[k]||!bl(g[k],w[k])))return!1;return!0}(i,e);default:return hn()}var d}function Pu(i,e){return void 0!==(i.values||[]).find(t=>bl(t,e))}function ou(i,e){if(i===e)return 0;const t=$l(i),s=$l(e);if(t!==s)return pr(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return pr(i.booleanValue,e.booleanValue);case 2:return function(d,g){const w=Gr(d.integerValue||d.doubleValue),k=Gr(g.integerValue||g.doubleValue);return w<k?-1:w>k?1:w===k?0:isNaN(w)?isNaN(k)?0:-1:1}(i,e);case 3:return Td(i.timestampValue,e.timestampValue);case 4:return Td(mo(i),mo(e));case 5:return pr(i.stringValue,e.stringValue);case 6:return function(d,g){const w=ol(d),k=ol(g);return w.compareTo(k)}(i.bytesValue,e.bytesValue);case 7:return function(d,g){const w=d.split("/"),k=g.split("/");for(let G=0;G<w.length&&G<k.length;G++){const Q=pr(w[G],k[G]);if(0!==Q)return Q}return pr(w.length,k.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,g){const w=pr(Gr(d.latitude),Gr(g.latitude));return 0!==w?w:pr(Gr(d.longitude),Gr(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,g){const w=d.values||[],k=g.values||[];for(let G=0;G<w.length&&G<k.length;++G){const Q=ou(w[G],k[G]);if(Q)return Q}return pr(w.length,k.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===$a.mapValue&&g===$a.mapValue)return 0;if(d===$a.mapValue)return 1;if(g===$a.mapValue)return-1;const w=d.fields||{},k=Object.keys(w),G=g.fields||{},Q=Object.keys(G);k.sort(),Q.sort();for(let pe=0;pe<k.length&&pe<Q.length;++pe){const Ze=pr(k[pe],Q[pe]);if(0!==Ze)return Ze;const Tt=ou(w[k[pe]],G[Q[pe]]);if(0!==Tt)return Tt}return pr(k.length,Q.length)}(i.mapValue,e.mapValue);default:throw hn()}}function Td(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return pr(i,e);const t=Yi(i),s=Yi(e),d=pr(t.seconds,s.seconds);return 0!==d?d:pr(t.nanos,s.nanos)}function Si(i){return yf(i)}function yf(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const d=Yi(s);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ol(i.bytesValue).toBase64():"referenceValue"in i?Sn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let d="[",g=!0;for(const w of s.values||[])g?g=!1:d+=",",d+=yf(w);return d+"]"}(i.arrayValue):"mapValue"in i?function(s){const d=Object.keys(s.fields||{}).sort();let g="{",w=!0;for(const k of d)w?w=!1:g+=",",g+=`${k}:${yf(s.fields[k])}`;return g+"}"}(i.mapValue):hn();var e}function Ua(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function jc(i){return!!i&&"integerValue"in i}function lc(i){return!!i&&"arrayValue"in i}function uc(i){return!!i&&"nullValue"in i}function Ul(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ou(i){return!!i&&"mapValue"in i}function Sr(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return $(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Sr(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sr(i.arrayValue.values[t]);return e}return Object.assign({},i)}function wh(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ku(i){return"nullValue"in i?su:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Ua(wl.empty(),Sn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:hn()}function Sd(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Ua(wl.empty(),Sn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?$a:hn()}function as(i,e){const t=ou(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Hc(i,e){const t=ou(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Ou(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sr(t)}setAll(e){let t=ui.emptyPath(),s={},d=[];e.forEach((w,k)=>{if(!t.isImmediateParentOf(k)){const G=this.getFieldsMap(t);this.applyChanges(G,s,d),s={},d=[],t=k.popLast()}w?s[k.lastSegment()]=Sr(w):d.push(k.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,d)}delete(e){const t=this.field(e.popLast());Ou(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return bl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let d=t.mapValue.fields[e.get(s)];Ou(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,s){$(t,(d,g)=>e[d]=g);for(const d of s)delete e[d]}clone(){return new Ki(Sr(this.value))}}function Ad(i){const e=[];return $(i.fields,(t,s)=>{const d=new ui([t]);if(Ou(s)){const g=Ad(s.mapValue).fields;if(0===g.length)e.push(d);else for(const w of g)e.push(d.child(w))}else e.push(d)}),new xn(e)}class Ji{constructor(e,t,s,d,g,w,k){this.key=e,this.documentType=t,this.version=s,this.readTime=d,this.createTime=g,this.data=w,this.documentState=k}static newInvalidDocument(e){return new Ji(e,0,Xn.min(),Xn.min(),Xn.min(),Ki.empty(),0)}static newFoundDocument(e,t,s,d){return new Ji(e,1,t,Xn.min(),s,d,0)}static newNoDocument(e,t){return new Ji(e,2,t,Xn.min(),Xn.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,Xn.min(),Xn.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ga{constructor(e,t){this.position=e,this.inclusive=t}}function Nu(i,e,t){let s=0;for(let d=0;d<i.position.length;d++){const g=e[d],w=i.position[d];if(s=g.field.isKeyField()?Sn.comparator(Sn.fromName(w.referenceValue),t.key):ou(w,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function au(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!bl(i.position[t],e.position[t]))return!1;return!0}class cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function bh(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class lu{}class ii extends lu{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,s):new hc(e,t,s):"array-contains"===t?new Wc(e,s):"in"===t?new Bu(e,s):"not-in"===t?new xd(e,s):"array-contains-any"===t?new Dh(e,s):new ii(e,t,s)}static createKeyFieldInFilter(e,t,s){return"in"===t?new Ch(e,s):new fc(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ou(t,this.value)):null!==t&&$l(this.value)===$l(t)&&this.matchesComparison(ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yi extends lu{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new yi(e,t)}matches(e){return dc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dc(i){return"and"===i.op}function Ro(i){return"or"===i.op}function zc(i){return Fu(i)&&dc(i)}function Fu(i){for(const e of i.filters)if(e instanceof yi)return!1;return!0}function Gc(i){if(i instanceof ii)return i.field.canonicalString()+i.op.toString()+Si(i.value);if(zc(i))return i.filters.map(e=>Gc(e)).join(",");{const e=i.filters.map(t=>Gc(t)).join(",");return`${i.op}(${e})`}}function yo(i,e){return i instanceof ii?(t=i,(s=e)instanceof ii&&t.op===s.op&&t.field.isEqual(s.field)&&bl(t.value,s.value)):i instanceof yi?function(t,s){return s instanceof yi&&t.op===s.op&&t.filters.length===s.filters.length&&t.filters.reduce((d,g,w)=>d&&yo(g,s.filters[w]),!0)}(i,e):void hn();var t,s}function uu(i,e){const t=i.filters.concat(e);return yi.create(t,i.op)}function Lu(i){return i instanceof ii?`${(e=i).field.canonicalString()} ${e.op} ${Si(e.value)}`:i instanceof yi?function(e){return e.op.toString()+" {"+e.getFilters().map(Lu).join(" ,")+"}"}(i):"Filter";var e}class hc extends ii{constructor(e,t,s){super(e,t,s),this.key=Sn.fromName(s.referenceValue)}matches(e){const t=Sn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ch extends ii{constructor(e,t){super(e,"in",t),this.keys=vf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fc extends ii{constructor(e,t){super(e,"not-in",t),this.keys=vf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vf(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Sn.fromName(s.referenceValue))}class Wc extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return lc(t)&&Pu(t.arrayValue,this.value)}}class Bu extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Pu(this.value.arrayValue,t)}}class xd extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Pu(this.value.arrayValue,t)}}class Dh extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!lc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Pu(this.value.arrayValue,s))}}class _f{constructor(e,t=null,s=[],d=[],g=null,w=null,k=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=d,this.limit=g,this.startAt=w,this.endAt=k,this.ft=null}}function qc(i,e=null,t=[],s=[],d=null,g=null,w=null){return new _f(i,e,t,s,d,g,w)}function Vl(i){const e=on(i);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Gc(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),Bl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Si(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Si(s)).join(",")),e.ft=t}return e.ft}function al(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!bh(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!yo(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!au(i.startAt,e.startAt)&&au(i.endAt,e.endAt)}function cu(i){return Sn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Md(i,e){return i.filters.filter(t=>t instanceof ii&&t.field.isEqual(e))}function Qo(i,e,t){let s=su,d=!0;for(const g of Md(i,e)){let w=su,k=!0;switch(g.op){case"<":case"<=":w=ku(g.value);break;case"==":case"in":case">=":w=g.value;break;case">":w=g.value,k=!1;break;case"!=":case"not-in":w=su}as({value:s,inclusive:d},{value:w,inclusive:k})<0&&(s=w,d=k)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];as({value:s,inclusive:d},{value:w,inclusive:t.inclusive})<0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}function pc(i,e,t){let s=$a,d=!0;for(const g of Md(i,e)){let w=$a,k=!0;switch(g.op){case">=":case">":w=Sd(g.value),k=!1;break;case"==":case"in":case"<=":w=g.value;break;case"<":w=g.value,k=!1;break;case"!=":case"not-in":w=$a}Hc({value:s,inclusive:d},{value:w,inclusive:k})>0&&(s=w,d=k)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const w=t.position[g];Hc({value:s,inclusive:d},{value:w,inclusive:t.inclusive})>0&&(s=w,d=t.inclusive);break}return{value:s,inclusive:d}}class Jo{constructor(e,t=null,s=[],d=[],g=null,w="F",k=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=d,this.limit=g,this.limitType=w,this.startAt=k,this.endAt=G,this.dt=null,this.wt=null}}function Yc(i,e,t,s,d,g,w,k){return new Jo(i,e,t,s,d,g,w,k)}function ma(i){return new Jo(i)}function Cl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Dl(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function jl(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ya(i){return null!==i.collectionGroup}function $u(i){const e=on(i);if(null===e.dt){e.dt=[];const t=jl(e),s=Dl(e);if(null!==t&&null===s)t.isKeyField()||e.dt.push(new cc(t)),e.dt.push(new cc(ui.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e.dt.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new cc(ui.keyField(),g))}}}return e.dt}function ea(i){const e=on(i);if(!e.wt)if("F"===e.limitType)e.wt=qc(e.path,e.collectionGroup,$u(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of $u(e))t.push(new cc(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new ga(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new ga(e.startAt.position,e.startAt.inclusive):null;e.wt=qc(e.path,e.collectionGroup,t,e.filters,e.limit,s,d)}return e.wt}function Uu(i,e){e.getFirstInequalityField(),jl(i);const t=i.filters.concat([e]);return new Jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Rd(i,e,t){return new Jo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Kc(i,e){return al(ea(i),ea(e))&&i.limitType===e.limitType}function gc(i){return`${Vl(ea(i))}|lt:${i.limitType}`}function Tl(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(s=>Lu(s)).join(", ")}]`),Bl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Si(s)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Si(s)).join(",")),`Target(${t})`}(ea(i))}; limitType=${i.limitType})`}function du(i,e){return e.isFoundDocument()&&function(t,s){const d=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Sn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,s){for(const d of $u(t))if(!d.field.isKeyField()&&null===s.data.field(d.field))return!1;return!0}(i,e)&&function(t,s){for(const d of t.filters)if(!d.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(d,g,w){const k=Nu(d,g,w);return d.inclusive?k<=0:k<0}(t.startAt,$u(t),s)||t.endAt&&!function(d,g,w){const k=Nu(d,g,w);return d.inclusive?k>=0:k>0}(t.endAt,$u(t),s)));var t,s}function mc(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Va(i){return(e,t)=>{let s=!1;for(const d of $u(i)){const g=Zc(d,e,t);if(0!==g)return g;s=s||d.field.isKeyField()}return 0}}function Zc(i,e,t){const s=i.field.isKeyField()?Sn.comparator(e.key,t.key):function(d,g,w){const k=g.data.field(d),G=w.data.field(d);return null!==k&&null!==G?ou(k,G):hn()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return hn()}}class hu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[d,g]of s)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),d=this.inner[s];if(void 0===d)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let d=0;d<s.length;d++)if(this.equalsFn(s[d][0],e))return 1===s.length?delete this.inner[t]:s.splice(d,1),this.innerSize--,!0;return!1}forEach(e){$(this.inner,(t,s)=>{for(const[d,g]of s)e(d,g)})}isEmpty(){return z(this.inner)}size(){return this.innerSize}}const Zi=new re(Sn.comparator);function Hi(){return Zi}const ja=new re(Sn.comparator);function fu(...i){let e=ja;for(const t of i)e=e.insert(t.key,t);return e}function Pd(i){let e=ja;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function xa(){return Hl()}function Vu(){return Hl()}function Hl(){return new hu(i=>i.toString(),(i,e)=>i.isEqual(e))}const pu=new re(Sn.comparator),Od=new ft(Sn.comparator);function mr(...i){let e=Od;for(const t of i)e=e.add(t);return e}const Th=new ft(pr);function Sl(){return Th}function Sh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yo(e)?"-0":e}}function Xc(i){return{integerValue:""+i}}function Qc(i,e){return Mu(e)?Xc(e):Sh(i,e)}class Jc{constructor(){this._=void 0}}function kd(i,e,t){return i instanceof Ha?function(s,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return d&&(g.fields.__previous_value__=d),{mapValue:g}}(t,e):i instanceof gu?td(i,e):i instanceof ju?va(i,e):function(s,d){const g=yc(s,d),w=Nd(g)+Nd(s._t);return jc(g)&&jc(s._t)?Xc(w):Sh(s.serializer,w)}(i,e)}function ed(i,e,t){return i instanceof gu?td(i,e):i instanceof ju?va(i,e):t}function yc(i,e){return i instanceof Al?jc(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ha extends Jc{}class gu extends Jc{constructor(e){super(),this.elements=e}}function td(i,e){const t=Ah(e);for(const s of i.elements)t.some(d=>bl(d,s))||t.push(s);return{arrayValue:{values:t}}}class ju extends Jc{constructor(e){super(),this.elements=e}}function va(i,e){let t=Ah(e);for(const s of i.elements)t=t.filter(d=>!bl(d,s));return{arrayValue:{values:t}}}class Al extends Jc{constructor(e,t){super(),this.serializer=e,this._t=t}}function Nd(i){return Gr(i.integerValue||i.doubleValue)}function Ah(i){return lc(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ma{constructor(e,t){this.field=e,this.transform=t}}class zu{constructor(e,t){this.version=e,this.transformResults=t}}class zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zi}static exists(e){return new zi(void 0,e)}static updateTime(e){return new zi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class za{}function Ld(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ul(i.key,zi.none()):new Ds(i.key,i.data,zi.none());{const t=i.data,s=Ki.empty();let d=new ft(ui.comparator);for(let g of e.fields)if(!d.has(g)){let w=t.field(g);null===w&&g.length>1&&(g=g.popLast(),w=t.field(g)),null===w?s.delete(g):s.set(g,w),d=d.add(g)}return new Ga(i.key,s,new xn(d.toArray()),zi.none())}}function Bd(i,e,t){i instanceof Ds?function(s,d,g){const w=s.value.clone(),k=xh(s.fieldTransforms,d,g.transformResults);w.setAll(k),d.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(i,e,t):i instanceof Ga?function(s,d,g){if(!Fd(s.precondition,d))return void d.convertToUnknownDocument(g.version);const w=xh(s.fieldTransforms,d,g.transformResults),k=d.data;k.setAll(rd(s)),k.setAll(w),d.convertToFoundDocument(g.version,k).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nd(i,e,t,s){return i instanceof Ds?function(d,g,w,k){if(!Fd(d.precondition,g))return w;const G=d.value.clone(),Q=ll(d.fieldTransforms,k,g);return G.setAll(Q),g.convertToFoundDocument(g.version,G).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ga?function(d,g,w,k){if(!Fd(d.precondition,g))return w;const G=ll(d.fieldTransforms,k,g),Q=g.data;return Q.setAll(rd(d)),Q.setAll(G),g.convertToFoundDocument(g.version,Q).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(pe=>pe.field))}(i,e,t,s):(w=t,Fd(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function Ef(i,e){let t=null;for(const s of i.fieldTransforms){const d=e.data.field(s.field),g=yc(s.transform,d||null);null!=g&&(null===t&&(t=Ki.empty()),t.set(s.field,g))}return t||null}function Gu(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&go(t,s,(d,g)=>function Hu(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof gu&&s instanceof gu||t instanceof ju&&s instanceof ju?go(t.elements,s.elements,bl):t instanceof Al&&s instanceof Al?bl(t._t,s._t):t instanceof Ha&&s instanceof Ha);var t,s}(d,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Ds extends za{constructor(e,t,s,d=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Ga extends za{constructor(e,t,s,d,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function rd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function xh(i,e,t){const s=new Map;yn(i.length===t.length);for(let d=0;d<t.length;d++){const g=i[d],w=g.transform,k=e.data.field(g.field);s.set(g.field,ed(w,k,t[d]))}return s}function ll(i,e,t){const s=new Map;for(const d of i){const g=d.transform,w=t.data.field(d.field);s.set(d.field,kd(g,w,e))}return s}class ul extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Wu extends za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vc{constructor(e,t,s,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=d}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&Bd(g,e,s[d])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=nd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=nd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Vu();return this.mutations.forEach(d=>{const g=e.get(d.key),w=g.overlayedDocument;let k=this.applyToLocalView(w,g.mutatedFields);k=t.has(d.key)?null:k;const G=Ld(w,k);null!==G&&s.set(d.key,G),w.isValidDocument()||w.convertToNoDocument(Xn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mr())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(t,s)=>Gu(t,s))&&go(this.baseMutations,e.baseMutations,(t,s)=>Gu(t,s))}}class $d{constructor(e,t,s,d){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=d}static from(e,t,s){yn(e.mutations.length===s.length);let d=pu;const g=e.mutations;for(let w=0;w<g.length;w++)d=d.insert(g[w].key,s[w].version);return new $d(e,t,s,d)}}class id{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class bg{constructor(e){this.count=e}}var b,p;function y(i){switch(i){default:return hn();case At.CANCELLED:case At.UNKNOWN:case At.DEADLINE_EXCEEDED:case At.RESOURCE_EXHAUSTED:case At.INTERNAL:case At.UNAVAILABLE:case At.UNAUTHENTICATED:return!1;case At.INVALID_ARGUMENT:case At.NOT_FOUND:case At.ALREADY_EXISTS:case At.PERMISSION_DENIED:case At.FAILED_PRECONDITION:case At.ABORTED:case At.OUT_OF_RANGE:case At.UNIMPLEMENTED:case At.DATA_LOSS:return!0}}function x(i){if(void 0===i)return lr("GRPC error has no .code"),At.UNKNOWN;switch(i){case b.OK:return At.OK;case b.CANCELLED:return At.CANCELLED;case b.UNKNOWN:return At.UNKNOWN;case b.DEADLINE_EXCEEDED:return At.DEADLINE_EXCEEDED;case b.RESOURCE_EXHAUSTED:return At.RESOURCE_EXHAUSTED;case b.INTERNAL:return At.INTERNAL;case b.UNAVAILABLE:return At.UNAVAILABLE;case b.UNAUTHENTICATED:return At.UNAUTHENTICATED;case b.INVALID_ARGUMENT:return At.INVALID_ARGUMENT;case b.NOT_FOUND:return At.NOT_FOUND;case b.ALREADY_EXISTS:return At.ALREADY_EXISTS;case b.PERMISSION_DENIED:return At.PERMISSION_DENIED;case b.FAILED_PRECONDITION:return At.FAILED_PRECONDITION;case b.ABORTED:return At.ABORTED;case b.OUT_OF_RANGE:return At.OUT_OF_RANGE;case b.UNIMPLEMENTED:return At.UNIMPLEMENTED;case b.DATA_LOSS:return At.DATA_LOSS;default:return hn()}}(p=b||(b={}))[p.OK=0]="OK",p[p.CANCELLED=1]="CANCELLED",p[p.UNKNOWN=2]="UNKNOWN",p[p.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",p[p.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",p[p.NOT_FOUND=5]="NOT_FOUND",p[p.ALREADY_EXISTS=6]="ALREADY_EXISTS",p[p.PERMISSION_DENIED=7]="PERMISSION_DENIED",p[p.UNAUTHENTICATED=16]="UNAUTHENTICATED",p[p.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",p[p.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",p[p.ABORTED=10]="ABORTED",p[p.OUT_OF_RANGE=11]="OUT_OF_RANGE",p[p.UNIMPLEMENTED=12]="UNIMPLEMENTED",p[p.INTERNAL=13]="INTERNAL",p[p.UNAVAILABLE=14]="UNAVAILABLE",p[p.DATA_LOSS=15]="DATA_LOSS";class Y{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return de}static getOrCreateInstance(){return null===de&&(de=new Y),de}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let de=null;class pt{constructor(e,t,s,d,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const d=new Map;return d.set(e,Ut.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new pt(Xn.min(),d,Sl(),Hi(),mr())}}class Ut{constructor(e,t,s,d,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Ut(s,t,mr(),mr(),mr())}}class bn{constructor(e,t,s,d){this.It=e,this.removedTargetIds=t,this.key=s,this.Tt=d}}class Gn{constructor(e,t){this.targetId=e,this.Et=t}}class rr{constructor(e,t,s=Yn.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=d}}class er{constructor(){this.At=0,this.Rt=_c(),this.vt=Yn.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return 0!==this.At}get St(){return this.Pt}Dt(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}Ct(){let e=mr(),t=mr(),s=mr();return this.Rt.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:s=s.add(d);break;default:hn()}}),new Ut(this.vt,this.bt,e,t,s)}xt(){this.Pt=!1,this.Rt=_c()}Nt(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class qs{constructor(e){this.Ft=e,this.Bt=new Map,this.Lt=Hi(),this.qt=Ra(),this.Ut=new ft(pr)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}zt(e){this.forEachTarget(e,t=>{const s=this.jt(t);switch(e.state){case 0:this.Wt(t)&&s.Dt(e.resumeToken);break;case 1:s.$t(),s.Vt||s.xt(),s.Dt(e.resumeToken);break;case 2:s.$t(),s.Vt||this.removeTarget(t);break;case 3:this.Wt(t)&&(s.Mt(),s.Dt(e.resumeToken));break;case 4:this.Wt(t)&&(this.Ht(t),s.Dt(e.resumeToken));break;default:hn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((s,d)=>{this.Wt(d)&&t(d)})}Jt(e){var t;const s=e.targetId,d=e.Et.count,g=this.Yt(s);if(g){const w=g.target;if(cu(w))if(0===d){const k=new Sn(w.path);this.Qt(s,k,Ji.newNoDocument(k,Xn.min()))}else yn(1===d);else{const k=this.Zt(s);k!==d&&(this.Ht(s),this.Ut=this.Ut.add(s),null===(t=Y.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:k,existenceFilterCount:e.Et.count}))}}}Xt(e){const t=new Map;this.Bt.forEach((g,w)=>{const k=this.Yt(w);if(k){if(g.current&&cu(k.target)){const G=new Sn(k.target.path);null!==this.Lt.get(G)||this.te(w,G)||this.Qt(w,G,Ji.newNoDocument(G,e))}g.St&&(t.set(w,g.Ct()),g.xt())}});let s=mr();this.qt.forEach((g,w)=>{let k=!0;w.forEachWhile(G=>{const Q=this.Yt(G);return!Q||2===Q.purpose||(k=!1,!1)}),k&&(s=s.add(g))}),this.Lt.forEach((g,w)=>w.setReadTime(e));const d=new pt(e,t,this.Ut,this.Lt,s);return this.Lt=Hi(),this.qt=Ra(),this.Ut=new ft(pr),d}Gt(e,t){if(!this.Wt(e))return;const s=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,s),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,s){if(!this.Wt(e))return;const d=this.jt(e);this.te(e,t)?d.Nt(t,1):d.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),s&&(this.Lt=this.Lt.insert(t,s))}removeTarget(e){this.Bt.delete(e)}Zt(e){const t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.jt(e).Ot()}jt(e){let t=this.Bt.get(e);return t||(t=new er,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new ft(pr),this.qt=this.qt.insert(e,t)),t}Wt(e){const t=null!==this.Yt(e);return t||Ft("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}Ht(e){this.Bt.set(e,new er),this.Ft.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}function Ra(){return new re(Sn.comparator)}function _c(){return new re(Sn.comparator)}const mp={asc:"ASCENDING",desc:"DESCENDING"},Ud={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},If={and:"AND",or:"OR"};class Vd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mh(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function mu(i,e){return xl(i,e.toTimestamp())}function ls(i){return yn(!!i),Xn.fromTimestamp(function(e){const t=Yi(e);return new Ii(t.seconds,t.nanos)}(i))}function sd(i,e){return(t=i,new jr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wl(i){const e=jr.fromString(i);return yn(xf(e)),e}function Ml(i,e){return sd(i.databaseId,e.path)}function Pa(i,e){const t=Wl(e);if(t.get(1)!==i.databaseId.projectId)throw new Wt(At.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Wt(At.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Sn(Oh(t))}function wf(i,e){return sd(i.databaseId,e)}function Rh(i){const e=Wl(i);return 4===e.length?jr.emptyPath():Oh(e)}function Ph(i){return new jr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Oh(i){return yn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function bf(i,e,t){return{name:Ml(i,e),fields:t.value.mapValue.fields}}function uo(i,e,t){const s=Pa(i,e.name),d=ls(e.updateTime),g=e.createTime?ls(e.createTime):Xn.min(),w=new Ki({mapValue:{fields:e.fields}}),k=Ji.newFoundDocument(s,d,g,w);return t&&k.setHasCommittedMutations(),t?k.setHasCommittedMutations():k}function jd(i,e){let t;if(e instanceof Ds)t={update:bf(i,e.key,e.value)};else if(e instanceof ul)t={delete:Ml(i,e.key)};else if(e instanceof Ga)t={update:bf(i,e.key,e.data),updateMask:yp(e.fieldMask)};else{if(!(e instanceof Wu))return hn();t={verify:Ml(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const w=g.transform;if(w instanceof Ha)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof gu)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof ju)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Al)return{fieldPath:g.field.canonicalString(),increment:w._t};throw hn()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:mu(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:hn()),t;var d}function Cf(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?zi.updateTime(ls(d.updateTime)):void 0!==d.exists?zi.exists(d.exists):zi.none():zi.none(),s=e.updateTransforms?e.updateTransforms.map(d=>function(g,w){let k=null;"setToServerValue"in w?(yn("REQUEST_TIME"===w.setToServerValue),k=new Ha):"appendMissingElements"in w?k=new gu(w.appendMissingElements.values||[]):"removeAllFromArray"in w?k=new ju(w.removeAllFromArray.values||[]):"increment"in w?k=new Al(g,w.increment):hn();const G=ui.fromServerFormat(w.fieldPath);return new Ma(G,k)}(i,d)):[];var d;if(e.update){const d=Pa(i,e.update.name),g=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new xn((e.updateMask.fieldPaths||[]).map(Q=>ui.fromServerFormat(Q)));return new Ga(d,g,w,t,s)}return new Ds(d,g,t,s)}if(e.delete){const d=Pa(i,e.delete);return new ul(d,t)}if(e.verify){const d=Pa(i,e.verify);return new Wu(d,t)}return hn()}function Nh(i,e){return{documents:[wf(i,e.path)]}}function Df(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=wf(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=wf(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const d=function(G){if(0!==G.length)return od(yi.create(G,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const g=function(G){if(0!==G.length)return G.map(Q=>{return{field:vu((pe=Q).field),direction:Yy(pe.dir)};var pe})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const w=(Q=e.limit,i.useProto3Json||Bl(Q)?Q:{value:Q});var Q,k,G;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(k=e.startAt).inclusive,values:k.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function Cg(i){let e=Rh(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let d=null;if(s>0){yn(1===s);const pe=t.from[0];pe.allDescendants?d=pe.collectionId:e=e.child(pe.collectionId)}let g=[];t.where&&(g=function(pe){const Ze=Sf(pe);return Ze instanceof yi&&zc(Ze)?Ze.getFilters():[Ze]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(pe=>{return new cc(Ic((Ze=pe).field),function(Tt){switch(Tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ze.direction));var Ze}));let k=null;t.limit&&(k=function(pe){let Ze;return Ze="object"==typeof pe?pe.value:pe,Bl(Ze)?null:Ze}(t.limit));let G=null;var pe;t.startAt&&(G=new ga((pe=t.startAt).values||[],!!pe.before));let Q=null;return t.endAt&&(Q=function(pe){return new ga(pe.values||[],!pe.before)}(t.endAt)),Yc(e,d,w,g,k,"F",G,Q)}function Sf(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ic(e.unaryFilter.field);return ii.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Ic(e.unaryFilter.field);return ii.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Ic(e.unaryFilter.field);return ii.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Ic(e.unaryFilter.field);return ii.create(g,"!=",{nullValue:"NULL_VALUE"});default:return hn()}}(i):void 0!==i.fieldFilter?ii.create(Ic((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hn()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return yi.create(e.compositeFilter.filters.map(t=>Sf(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return hn()}}(e.compositeFilter.op))}(i):hn();var e}function Yy(i){return mp[i]}function yu(i){return Ud[i]}function Af(i){return If[i]}function vu(i){return{fieldPath:i.canonicalString()}}function Ic(i){return ui.fromServerFormat(i.fieldPath)}function od(i){return i instanceof ii?function(e){if("=="===e.op){if(Ul(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NAN"}};if(uc(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ul(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NAN"}};if(uc(e.value))return{unaryFilter:{field:vu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vu(e.field),op:yu(e.op),value:e.value}}}(i):i instanceof yi?function(e){const t=e.getFilters().map(s=>od(s));return 1===t.length?t[0]:{compositeFilter:{op:Af(e.op),filters:t}}}(i):hn()}function yp(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function xf(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class ql{constructor(e,t,s,d,g=Xn.min(),w=Xn.min(),k=Yn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=k}withSequenceNumber(e){return new ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Fh{constructor(e){this.se=e}}function Lh(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ml(d=i.se,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:xl(d,g.version.toTimestamp()),createTime:xl(d,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:ad(e.version)};else{if(!e.isUnknownDocument())return hn();s.unknownDocument={path:t.path.toArray(),version:ad(e.version)}}var d,g;return s}function Hd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ad(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function qu(i){const e=new Ii(i.seconds,i.nanoseconds);return Xn.fromTimestamp(e)}function _u(i,e){const t=(e.baseMutations||[]).map(g=>Cf(i.se,g));for(let g=0;g<e.mutations.length-1;++g)g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(e.mutations[g].updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g);const s=e.mutations.map(g=>Cf(i.se,g)),d=Ii.fromMillis(e.localWriteTimeMs);return new vc(e.batchId,d,t,s)}function wc(i){const e=qu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?qu(i.lastLimboFreeSnapshotVersion):Xn.min();let s;var d;return void 0!==i.query.documents?(yn(1===(d=i.query).documents.length),s=ea(ma(Rh(d.documents[0])))):s=ea(Cg(i.query)),new ql(s,i.targetId,0,i.lastListenSequenceNumber,e,t,Yn.fromBase64String(i.resumeToken))}function bc(i,e){const t=ad(e.snapshotVersion),s=ad(e.lastLimboFreeSnapshotVersion);let d;d=cu(e.target)?Nh(i.se,e.target):Df(i.se,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vl(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:d}}function Mf(i){const e=Cg({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Rd(e,e.limit,"L"):e}function Bh(i,e){return new id(e.largestBatchId,Cf(i.se,e.overlayMutation))}function $h(i,e){const t=e.path.lastSegment();return[i,ao(e.path.popLast()),t]}function _p(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:ad(s.readTime),documentKey:ao(s.documentKey.path),largestBatchId:s.largestBatchId}}class Uh{getBundleMetadata(e,t){return ld(e).get(t).next(s=>{if(s)return{id:(d=s).bundleId,createTime:qu(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return ld(e).put({bundleId:(s=t).id,createTime:ad(ls(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Eu(e).get(t).next(s=>{if(s)return{name:(d=s).name,query:Mf(d.bundledQuery),readTime:qu(d.readTime)};var d})}saveNamedQuery(e,t){return Eu(e).put({name:(s=t).name,readTime:ad(ls(s.readTime)),bundledQuery:s.bundledQuery});var s}}function ld(i){return Ir(i,"bundles")}function Eu(i){return Ir(i,"namedQueries")}class Cc{constructor(e,t){this.serializer=e,this.userId=t}static ie(e,t){return new Cc(e,t.uid||"")}getOverlay(e,t){return cl(e).get($h(this.userId,t)).next(s=>s?Bh(this.serializer,s):null)}getOverlays(e,t){const s=xa();return Rt.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){const d=[];return s.forEach((g,w)=>{const k=new id(t,w);d.push(this.re(e,k))}),Rt.waitFor(d)}removeOverlaysForBatchId(e,t,s){const d=new Set;t.forEach(w=>d.add(ao(w.getCollectionPath())));const g=[];return d.forEach(w=>{const k=IDBKeyRange.bound([this.userId,w,s],[this.userId,w,s+1],!1,!0);g.push(cl(e).J("collectionPathOverlayIndex",k))}),Rt.waitFor(g)}getOverlaysForCollection(e,t,s){const d=xa(),g=ao(t),w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return cl(e).j("collectionPathOverlayIndex",w).next(k=>{for(const G of k){const Q=Bh(this.serializer,G);d.set(Q.getKey(),Q)}return d})}getOverlaysForCollectionGroup(e,t,s,d){const g=xa();let w;const k=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cl(e).Z({index:"collectionGroupOverlayIndex",range:k},(G,Q,pe)=>{const Ze=Bh(this.serializer,Q);g.size()<d||Ze.largestBatchId===w?(g.set(Ze.getKey(),Ze),w=Ze.largestBatchId):pe.done()}).next(()=>g)}re(e,t){return cl(e).put(function(s,d,g){const[w,k,G]=$h(d,g.mutation.key);return{userId:d,collectionPath:k,documentId:G,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:jd(s.se,g.mutation)}}(this.serializer,this.userId,t))}}function cl(i){return Ir(i,"documentOverlays")}class Yu{constructor(){}oe(e,t){this.ue(e,t),t.ce()}ue(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Gr(e.integerValue));else if("doubleValue"in e){const s=Gr(e.doubleValue);isNaN(s)?this.ae(t,13):(this.ae(t,15),Yo(s)?t.he(0):t.he(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ae(t,20),"string"==typeof s?t.le(s):(t.le(`${s.seconds||""}`),t.he(s.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(ol(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ae(t,45),t.he(s.latitude||0),t.he(s.longitude||0)}else"mapValue"in e?wh(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):hn()}fe(e,t){this.ae(t,25),this.ye(e,t)}ye(e,t){t.le(e)}me(e,t){const s=e.fields||{};this.ae(t,55);for(const d of Object.keys(s))this.fe(d,t),this.ue(s[d],t)}ge(e,t){const s=e.values||[];this.ae(t,50);for(const d of s)this.ue(d,t)}_e(e,t){this.ae(t,37),Sn.fromName(e).path.forEach(s=>{this.ae(t,60),this.ye(s,t)})}ae(e,t){e.he(t)}de(e){e.he(2)}}function Dg(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Ep(i){const e=64-function(t){let s=0;for(let d=0;d<8;++d){const g=Dg(255&t[d]);if(s+=g,8!==g)break}return s}(i);return Math.ceil(e/8)}Yu.pe=new Yu;class Ku{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ie(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Te(s.value),s=t.next();this.Ee()}Ae(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Re(s.value),s=t.next();this.ve()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Te(s);else if(s<2048)this.Te(960|s>>>6),this.Te(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Te(480|s>>>12),this.Te(128|63&s>>>6),this.Te(128|63&s);else{const d=t.codePointAt(0);this.Te(240|d>>>18),this.Te(128|63&d>>>12),this.Te(128|63&d>>>6),this.Te(128|63&d)}}this.Ee()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Re(s);else if(s<2048)this.Re(960|s>>>6),this.Re(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Re(480|s>>>12),this.Re(128|63&s>>>6),this.Re(128|63&s);else{const d=t.codePointAt(0);this.Re(240|d>>>18),this.Re(128|63&d>>>12),this.Re(128|63&d>>>6),this.Re(128|63&d)}}this.ve()}Ve(e){const t=this.Se(e),s=Ep(t);this.De(1+s),this.buffer[this.position++]=255&s;for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Ce(e){const t=this.Se(e),s=Ep(t);this.De(1+s),this.buffer[this.position++]=~(255&s);for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}xe(){this.Ne(255),this.Ne(255)}ke(){this.Oe(255),this.Oe(255)}reset(){this.position=0}seed(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Se(e){const t=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let d=1;d<t.length;++d)t[d]^=s?255:0;return t}Te(e){const t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}Re(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}Ee(){this.Ne(0),this.Ne(1)}ve(){this.Oe(0),this.Oe(1)}Ne(e){this.De(1),this.buffer[this.position++]=e}Oe(e){this.De(1),this.buffer[this.position++]=~e}De(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const d=new Uint8Array(s);d.set(this.buffer),this.buffer=d}}class Tg{constructor(e){this.Me=e}we(e){this.Me.Ie(e)}le(e){this.Me.be(e)}he(e){this.Me.Ve(e)}ce(){this.Me.xe()}}class Vm{constructor(e){this.Me=e}we(e){this.Me.Ae(e)}le(e){this.Me.Pe(e)}he(e){this.Me.Ce(e)}ce(){this.Me.ke()}}class Zu{constructor(){this.Me=new Ku,this.Fe=new Tg(this.Me),this.Be=new Vm(this.Me)}seed(e){this.Me.seed(e)}Le(e){return 0===e?this.Fe:this.Be}$e(){return this.Me.$e()}reset(){this.Me.reset()}}class Yl{constructor(e,t,s,d){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=d}qe(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Yl(this.indexId,this.documentKey,this.arrayValue,s)}}function Dc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ip(i.arrayValue,e.arrayValue),0!==t?t:(t=Ip(i.directionalValue,e.directionalValue),0!==t?t:Sn.comparator(i.documentKey,e.documentKey)))}function Ip(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class jm{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.Ke=[];for(const t of e.filters){const s=t;s.isInequality()?this.Ge=s:this.Ke.push(s)}}Qe(e){yn(e.collectionGroup===this.collectionId);const t=nl(e);if(void 0!==t&&!this.ze(t))return!1;const s=Ws(e);let d=0,g=0;for(;d<s.length&&this.ze(s[d]);++d);if(d===s.length)return!0;if(void 0!==this.Ge){const w=s[d];if(!this.je(this.Ge,w)||!this.We(this.Ue[g++],w))return!1;++d}for(;d<s.length;++d)if(g>=this.Ue.length||!this.We(this.Ue[g++],s[d]))return!1;return!0}ze(e){for(const t of this.Ke)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Vh(i){var e,t;if(yn(i instanceof ii||i instanceof yi),i instanceof ii){if(i instanceof Bu){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(g=>ii.create(i.field,"==",g)))||[];return yi.create(d,"or")}return i}const s=i.filters.map(d=>Vh(d));return yi.create(s,i.op)}function wp(i){if(0===i.getFilters().length)return[];const e=ta(Vh(i));return yn(zd(e)),Rf(e)||ud(e)?[e]:e.getFilters()}function Rf(i){return i instanceof ii}function ud(i){return i instanceof yi&&zc(i)}function zd(i){return Rf(i)||ud(i)||function(e){if(e instanceof yi&&Ro(e)){for(const t of e.getFilters())if(!Rf(t)&&!ud(t))return!1;return!0}return!1}(i)}function ta(i){if(yn(i instanceof ii||i instanceof yi),i instanceof ii)return i;if(1===i.filters.length)return ta(i.filters[0]);const e=i.filters.map(s=>ta(s));let t=yi.create(e,i.op);return t=Gd(t),zd(t)?t:(yn(t instanceof yi),yn(dc(t)),yn(t.filters.length>1),t.filters.reduce((s,d)=>Kl(s,d)))}function Kl(i,e){let t;return yn(i instanceof ii||i instanceof yi),yn(e instanceof ii||e instanceof yi),t=i instanceof ii?e instanceof ii?yi.create([i,e],"and"):Sg(i,e):e instanceof ii?Sg(e,i):function(s,d){if(yn(s.filters.length>0&&d.filters.length>0),dc(s)&&dc(d))return uu(s,d.getFilters());const g=Ro(s)?s:d,w=Ro(s)?d:s,k=g.filters.map(G=>Kl(G,w));return yi.create(k,"or")}(i,e),Gd(t)}function Sg(i,e){if(dc(e))return uu(e,i.getFilters());{const t=e.filters.map(s=>Kl(i,s));return yi.create(t,"or")}}function Gd(i){if(yn(i instanceof ii||i instanceof yi),i instanceof ii)return i;const e=i.getFilters();if(1===e.length)return Gd(e[0]);if(Fu(i))return i;const t=e.map(d=>Gd(d)),s=[];return t.forEach(d=>{d instanceof ii?s.push(d):d instanceof yi&&(d.op===i.op?s.push(...d.filters):s.push(d))}),1===s.length?s[0]:yi.create(s,i.op)}class bp{constructor(){this.He=new cd}addToCollectionParentIndex(e,t){return this.He.add(t),Rt.resolve()}getCollectionParents(e,t){return Rt.resolve(this.He.getEntries(t))}addFieldIndex(e,t){return Rt.resolve()}deleteFieldIndex(e,t){return Rt.resolve()}getDocumentsMatchingTarget(e,t){return Rt.resolve(null)}getIndexType(e,t){return Rt.resolve(0)}getFieldIndexes(e,t){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}getMinOffset(e,t){return Rt.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,t){return Rt.resolve(gs.min())}updateCollectionGroup(e,t,s){return Rt.resolve()}updateIndexEntries(e,t){return Rt.resolve()}}class cd{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t]||new ft(jr.comparator),g=!d.has(s);return this.index[t]=d.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t];return d&&d.has(s)}getEntries(e){return(this.index[e]||new ft(jr.comparator)).toArray()}}const Tc=new Uint8Array(0);class Ag{constructor(e,t){this.user=e,this.databaseId=t,this.Je=new cd,this.Ye=new hu(s=>Vl(s),(s,d)=>al(s,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Je.has(t)){const s=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Je.add(t)});const g={collectionId:s,parent:ao(d)};return Wa(e).put(g)}return Rt.resolve()}getCollectionParents(e,t){const s=[],d=IDBKeyRange.bound([t,""],[La(t),""],!1,!0);return Wa(e).j(d).next(g=>{for(const w of g){if(w.collectionId!==t)break;s.push(ys(w.parent))}return s})}addFieldIndex(e,t){const s=Wd(e),d={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(k=>[k.fieldPath.canonicalString(),k.kind])};var w;delete d.indexId;const g=s.add(d);if(t.indexState){const w=Ac(e);return g.next(k=>{w.put(_p(k,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=Wd(e),d=Ac(e),g=Sc(e);return s.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Sc(e);let d=!0;const g=new Map;return Rt.forEach(this.Ze(t),w=>this.Xe(e,w).next(k=>{d&&(d=!!k),g.set(w,k)})).next(()=>{if(d){let w=mr();const k=[];return Rt.forEach(g,(G,Q)=>{var pe;Ft("IndexedDbIndexManager",`Using index ${pe=G,`id=${pe.indexId}|cg=${pe.collectionGroup}|f=${pe.fields.map(ci=>`${ci.fieldPath}:${ci.kind}`).join(",")}`} to execute ${Vl(t)}`);const Ze=function(ci,wa){const Bs=nl(wa);if(void 0===Bs)return null;for(const $s of Md(ci,Bs.fieldPath))switch($s.op){case"array-contains-any":return $s.value.arrayValue.values||[];case"array-contains":return[$s.value]}return null}(Q,G),Tt=function(ci,wa){const Bs=new Map;for(const $s of Ws(wa))for(const fl of Md(ci,$s.fieldPath))switch(fl.op){case"==":case"in":Bs.set($s.fieldPath.canonicalString(),fl.value);break;case"not-in":case"!=":return Bs.set($s.fieldPath.canonicalString(),fl.value),Array.from(Bs.values())}return null}(Q,G),Yt=function(ci,wa){const Bs=[];let $s=!0;for(const fl of Ws(wa)){const Eh=0===fl.kind?Qo(ci,fl.fieldPath,ci.startAt):pc(ci,fl.fieldPath,ci.startAt);Bs.push(Eh.value),$s&&($s=Eh.inclusive)}return new ga(Bs,$s)}(Q,G),gn=function(ci,wa){const Bs=[];let $s=!0;for(const fl of Ws(wa)){const Eh=0===fl.kind?pc(ci,fl.fieldPath,ci.endAt):Qo(ci,fl.fieldPath,ci.endAt);Bs.push(Eh.value),$s&&($s=Eh.inclusive)}return new ga(Bs,$s)}(Q,G),zn=this.tn(G,Q,Yt),cr=this.tn(G,Q,gn),Bi=this.en(G,Q,Tt),Ls=this.nn(G.indexId,Ze,zn,Yt.inclusive,cr,gn.inclusive,Bi);return Rt.forEach(Ls,ci=>s.H(ci,t.limit).next(wa=>{wa.forEach(Bs=>{const $s=Sn.fromSegments(Bs.documentKey);w.has($s)||(w=w.add($s),k.push($s))})}))}).next(()=>k)}return Rt.resolve(null)})}Ze(e){let t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:wp(yi.create(e.filters,"and")).map(s=>qc(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.Ye.set(e,t),t)}nn(e,t,s,d,g,w,k){const G=(null!=t?t.length:1)*Math.max(s.length,g.length),Q=G/(null!=t?t.length:1),pe=[];for(let Ze=0;Ze<G;++Ze){const Tt=t?this.sn(t[Ze/Q]):Tc,Yt=this.rn(e,Tt,s[Ze%Q],d),gn=this.on(e,Tt,g[Ze%Q],w),zn=k.map(cr=>this.rn(e,Tt,cr,!0));pe.push(...this.createRange(Yt,gn,zn))}return pe}rn(e,t,s,d){const g=new Yl(e,Sn.empty(),t,s);return d?g:g.qe()}on(e,t,s,d){const g=new Yl(e,Sn.empty(),t,s);return d?g.qe():g}Xe(e,t){const s=new jm(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let w=null;for(const k of g)s.Qe(k)&&(!w||k.fields.length>w.fields.length)&&(w=k);return w})}getIndexType(e,t){let s=2;const d=this.Ze(t);return Rt.forEach(d,g=>this.Xe(e,g).next(w=>{w?0!==s&&w.fields.length<function(k){let G=new ft(ui.comparator),Q=!1;for(const pe of k.filters)for(const Ze of pe.getFlattenedFilters())Ze.field.isKeyField()||("array-contains"===Ze.op||"array-contains-any"===Ze.op?Q=!0:G=G.add(Ze.field));for(const pe of k.orderBy)pe.field.isKeyField()||(G=G.add(pe.field));return G.size+(Q?1:0)}(g)&&(s=1):s=0})).next(()=>null!==t.limit&&d.length>1&&2===s?1:s)}un(e,t){const s=new Zu;for(const d of Ws(e)){const g=t.data.field(d.fieldPath);if(null==g)return null;const w=s.Le(d.kind);Yu.pe.oe(g,w)}return s.$e()}sn(e){const t=new Zu;return Yu.pe.oe(e,t.Le(0)),t.$e()}cn(e,t){const s=new Zu;return Yu.pe.oe(Ua(this.databaseId,t),s.Le(function(d){const g=Ws(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.$e()}en(e,t,s){if(null===s)return[];let d=[];d.push(new Zu);let g=0;for(const w of Ws(e)){const k=s[g++];for(const G of d)if(this.an(t,w.fieldPath)&&lc(k))d=this.hn(d,w,k);else{const Q=G.Le(w.kind);Yu.pe.oe(k,Q)}}return this.ln(d)}tn(e,t,s){return this.en(e,t,s.position)}ln(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].$e();return t}hn(e,t,s){const d=[...e],g=[];for(const w of s.arrayValue.values||[])for(const k of d){const G=new Zu;G.seed(k.$e()),Yu.pe.oe(w,G.Le(t.kind)),g.push(G)}return g}an(e,t){return!!e.filters.find(s=>s instanceof ii&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Wd(e),d=Ac(e);return(t?s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.j()).next(g=>{const w=[];return Rt.forEach(g,k=>d.get([k.indexId,this.uid]).next(G=>{w.push(function(Q,pe){const Ze=pe?new ps(pe.sequenceNumber,new gs(qu(pe.readTime),new Sn(ys(pe.documentKey)),pe.largestBatchId)):ps.empty(),Tt=Q.fields.map(([Yt,gn])=>new El(ui.fromServerFormat(Yt),gn));return new Pi(Q.indexId,Q.collectionGroup,Tt,Ze)}(k,G))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,d)=>{const g=s.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:pr(s.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const d=Wd(e),g=Ac(e);return this.fn(e).next(w=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(k=>Rt.forEach(k,G=>g.put(_p(G.indexId,this.user,w,s)))))}updateIndexEntries(e,t){const s=new Map;return Rt.forEach(t,(d,g)=>{const w=s.get(d.collectionGroup);return(w?Rt.resolve(w):this.getFieldIndexes(e,d.collectionGroup)).next(k=>(s.set(d.collectionGroup,k),Rt.forEach(k,G=>this.dn(e,d,G).next(Q=>{const pe=this.wn(g,G);return Q.isEqual(pe)?Rt.resolve():this._n(e,g,G,Q,pe)}))))})}mn(e,t,s,d){return Sc(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.cn(s,t.key),documentKey:t.key.path.toArray()})}gn(e,t,s,d){return Sc(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.cn(s,t.key),t.key.path.toArray()])}dn(e,t,s){const d=Sc(e);let g=new ft(Dc);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.cn(s,t)])},(w,k)=>{g=g.add(new Yl(s.indexId,t,k.arrayValue,k.directionalValue))}).next(()=>g)}wn(e,t){let s=new ft(Dc);const d=this.un(t,e);if(null==d)return s;const g=nl(t);if(null!=g){const w=e.data.field(g.fieldPath);if(lc(w))for(const k of w.arrayValue.values||[])s=s.add(new Yl(t.indexId,e.key,this.sn(k),d))}else s=s.add(new Yl(t.indexId,e.key,Tc,d));return s}_n(e,t,s,d,g){Ft("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(k,G,Q,pe,Ze){const Tt=k.getIterator(),Yt=G.getIterator();let gn=Un(Tt),zn=Un(Yt);for(;gn||zn;){let cr=!1,Bi=!1;if(gn&&zn){const Ls=Q(gn,zn);Ls<0?Bi=!0:Ls>0&&(cr=!0)}else null!=gn?Bi=!0:cr=!0;cr?(pe(zn),zn=Un(Yt)):Bi?(Ze(gn),gn=Un(Tt)):(gn=Un(Tt),zn=Un(Yt))}}(d,g,Dc,k=>{w.push(this.mn(e,t,s,k))},k=>{w.push(this.gn(e,t,s,k))}),Rt.waitFor(w)}fn(e){let t=1;return Ac(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,d,g)=>{g.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((w,k)=>Dc(w,k)).filter((w,k,G)=>!k||0!==Dc(w,G[k-1]));const d=[];d.push(e);for(const w of s){const k=Dc(w,e),G=Dc(w,t);if(0===k)d[0]=e.qe();else if(k>0&&G<0)d.push(w),d.push(w.qe());else if(G>0)break}d.push(t);const g=[];for(let w=0;w<d.length;w+=2){if(this.yn(d[w],d[w+1]))return[];g.push(IDBKeyRange.bound([d[w].indexId,this.uid,d[w].arrayValue,d[w].directionalValue,Tc,[]],[d[w+1].indexId,this.uid,d[w+1].arrayValue,d[w+1].directionalValue,Tc,[]]))}return g}yn(e,t){return Dc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jh)}getMinOffset(e,t){return Rt.mapArray(this.Ze(t),s=>this.Xe(e,s).next(d=>d||hn())).next(jh)}}function Wa(i){return Ir(i,"collectionParents")}function Sc(i){return Ir(i,"indexEntries")}function Wd(i){return Ir(i,"indexConfiguration")}function Ac(i){return Ir(i,"indexState")}function jh(i){yn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const d=i[s].indexState.offset;iu(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new gs(e.readTime,e.documentKey,t)}const Lo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oa{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new Oa(e,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xg(i,e,t){const s=i.store("mutations"),d=i.store("documentMutations"),g=[],w=IDBKeyRange.only(t.batchId);let k=0;const G=s.Z({range:w},(pe,Ze,Tt)=>(k++,Tt.delete()));g.push(G.next(()=>{yn(1===k)}));const Q=[];for(const pe of t.mutations){const Ze=Zo(e,pe.key.path,t.batchId);g.push(d.delete(Ze)),Q.push(pe.key)}return Rt.waitFor(g).next(()=>Q)}function Hh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw hn();e=i.noDocument}return JSON.stringify(e).length}Oa.DEFAULT_COLLECTION_PERCENTILE=10,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oa.DEFAULT=new Oa(41943040,Oa.DEFAULT_COLLECTION_PERCENTILE,Oa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oa.DISABLED=new Oa(-1,0,0);class Pf{constructor(e,t,s,d){this.userId=e,this.serializer=t,this.indexManager=s,this.referenceDelegate=d,this.pn={}}static ie(e,t,s,d){yn(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Pf(g,t,s,d)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).Z({index:"userMutationsIndex",range:s},(d,g,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,s,d){const g=dd(e),w=xc(e);return w.add({}).next(k=>{yn("number"==typeof k);const G=new vc(k,t,s,d),Q=function(Tt,Yt,gn){const zn=gn.baseMutations.map(Bi=>jd(Tt.se,Bi)),cr=gn.mutations.map(Bi=>jd(Tt.se,Bi));return{userId:Yt,batchId:gn.batchId,localWriteTimeMs:gn.localWriteTime.toMillis(),baseMutations:zn,mutations:cr}}(this.serializer,this.userId,G),pe=[];let Ze=new ft((Tt,Yt)=>pr(Tt.canonicalString(),Yt.canonicalString()));for(const Tt of d){const Yt=Zo(this.userId,Tt.key.path,k);Ze=Ze.add(Tt.key.path.popLast()),pe.push(w.put(Q)),pe.push(g.put(Yt,ri))}return Ze.forEach(Tt=>{pe.push(this.indexManager.addToCollectionParentIndex(e,Tt))}),e.addOnCommittedListener(()=>{this.pn[k]=G.keys()}),Rt.waitFor(pe).next(()=>G)})}lookupMutationBatch(e,t){return xc(e).get(t).next(s=>s?(yn(s.userId===this.userId),_u(this.serializer,s)):null)}In(e,t){return this.pn[t]?Rt.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const d=s.keys();return this.pn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,d=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return xc(e).Z({index:"userMutationsIndex",range:d},(w,k,G)=>{k.userId===this.userId&&(yn(k.batchId>=s),g=_u(this.serializer,k)),G.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return xc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,g,w)=>{s=g.batchId,w.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xc(e).j("userMutationsIndex",t).next(s=>s.map(d=>_u(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=vs(this.userId,t.path),d=IDBKeyRange.lowerBound(s),g=[];return dd(e).Z({range:d},(w,k,G)=>{const[Q,pe,Ze]=w,Tt=ys(pe);if(Q===this.userId&&t.path.isEqual(Tt))return xc(e).get(Ze).next(Yt=>{if(!Yt)throw hn();yn(Yt.userId===this.userId),g.push(_u(this.serializer,Yt))});G.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ft(pr);const d=[];return t.forEach(g=>{const w=vs(this.userId,g.path),k=IDBKeyRange.lowerBound(w),G=dd(e).Z({range:k},(Q,pe,Ze)=>{const[Tt,Yt,gn]=Q,zn=ys(Yt);Tt===this.userId&&g.path.isEqual(zn)?s=s.add(gn):Ze.done()});d.push(G)}),Rt.waitFor(d).next(()=>this.Tn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1,g=vs(this.userId,s),w=IDBKeyRange.lowerBound(g);let k=new ft(pr);return dd(e).Z({range:w},(G,Q,pe)=>{const[Ze,Tt,Yt]=G,gn=ys(Tt);Ze===this.userId&&s.isPrefixOf(gn)?gn.length===d&&(k=k.add(Yt)):pe.done()}).next(()=>this.Tn(e,k))}Tn(e,t){const s=[],d=[];return t.forEach(g=>{d.push(xc(e).get(g).next(w=>{if(null===w)throw hn();yn(w.userId===this.userId),s.push(_u(this.serializer,w))}))}),Rt.waitFor(d).next(()=>s)}removeMutationBatch(e,t){return xg(e.at,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.En(t.batchId)}),Rt.forEach(s,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}En(e){delete this.pn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rt.resolve();const s=IDBKeyRange.lowerBound([this.userId]),d=[];return dd(e).Z({range:s},(g,w,k)=>{if(g[0]===this.userId){const G=ys(g[1]);d.push(G)}else k.done()}).next(()=>{yn(0===d.length)})})}containsKey(e,t){return Mg(e,this.userId,t)}An(e){return Zl(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Mg(i,e,t){const s=vs(e,t.path),d=s[1],g=IDBKeyRange.lowerBound(s);let w=!1;return dd(i).Z({range:g,Y:!0},(k,G,Q)=>{const[pe,Ze,Tt]=k;pe===e&&Ze===d&&(w=!0),Q.done()}).next(()=>w)}function xc(i){return Ir(i,"mutations")}function dd(i){return Ir(i,"documentMutations")}function Zl(i){return Ir(i,"mutationQueues")}class _a{constructor(e){this.Rn=e}next(){return this.Rn+=2,this.Rn}static vn(){return new _a(0)}static bn(){return new _a(-1)}}class Rg{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Pn(e).next(t=>{const s=new _a(t.highestTargetId);return t.highestTargetId=s.next(),this.Vn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Pn(e).next(t=>Xn.fromTimestamp(new Ii(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.Pn(e).next(d=>(d.highestListenSequenceNumber=t,s&&(d.lastRemoteSnapshotVersion=s.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Vn(e,d)))}addTargetData(e,t){return this.Sn(e,t).next(()=>this.Pn(e).next(s=>(s.targetCount+=1,this.Dn(t,s),this.Vn(e,s))))}updateTargetData(e,t){return this.Sn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qd(e).delete(t.targetId)).next(()=>this.Pn(e)).next(s=>(yn(s.targetCount>0),s.targetCount-=1,this.Vn(e,s)))}removeTargets(e,t,s){let d=0;const g=[];return qd(e).Z((w,k)=>{const G=wc(k);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(d++,g.push(this.removeTargetData(e,G)))}).next(()=>Rt.waitFor(g)).next(()=>d)}forEachTarget(e,t){return qd(e).Z((s,d)=>{const g=wc(d);t(g)})}Pn(e){return Cp(e).get("targetGlobalKey").next(t=>(yn(null!==t),t))}Vn(e,t){return Cp(e).put("targetGlobalKey",t)}Sn(e,t){return qd(e).put(bc(this.serializer,t))}Dn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.Pn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Vl(t),d=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return qd(e).Z({range:d,index:"queryTargetsIndex"},(w,k,G)=>{const Q=wc(k);al(t,Q.target)&&(g=Q,G.done())}).next(()=>g)}addMatchingKeys(e,t,s){const d=[],g=Iu(e);return t.forEach(w=>{const k=ao(w.path);d.push(g.put({targetId:s,path:k})),d.push(this.referenceDelegate.addReference(e,s,w))}),Rt.waitFor(d)}removeMatchingKeys(e,t,s){const d=Iu(e);return Rt.forEach(t,g=>{const w=ao(g.path);return Rt.waitFor([d.delete([s,w]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=Iu(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(d)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),d=Iu(e);let g=mr();return d.Z({range:s,Y:!0},(w,k,G)=>{const Q=ys(w[1]),pe=new Sn(Q);g=g.add(pe)}).next(()=>g)}containsKey(e,t){const s=ao(t.path),d=IDBKeyRange.bound([s],[La(s)],!1,!0);let g=0;return Iu(e).Z({index:"documentTargetsIndex",Y:!0,range:d},([w,k],G,Q)=>{0!==w&&(g++,Q.done())}).next(()=>g>0)}ne(e,t){return qd(e).get(t).next(s=>s?wc(s):null)}}function qd(i){return Ir(i,"targets")}function Cp(i){return Ir(i,"targetGlobal")}function Iu(i){return Ir(i,"targetDocuments")}function Dp([i,e],[t,s]){const d=pr(i,t);return 0===d?pr(e,s):d}class Pg{constructor(e){this.Cn=e,this.buffer=new ft(Dp),this.xn=0}Nn(){return++this.xn}kn(e){const t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Dp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Og{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}$n(e){var t=this;Ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ue.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){rl(s)?Ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ms(s)}yield t.$n(3e5)}))}}class kg{constructor(e,t){this.Mn=e,this.params=t}calculateTargetCount(e,t){return this.Mn.Fn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Rt.resolve(eo.ct);const s=new Pg(t);return this.Mn.forEachTarget(e,d=>s.kn(d.sequenceNumber)).next(()=>this.Mn.Bn(e,d=>s.kn(d))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Mn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Mn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(Lo)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lo):this.Ln(e,t))}getCacheSize(e){return this.Mn.getCacheSize(e)}Ln(e,t){let s,d,g,w,k,G,Q;const pe=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ze=>(Ze>this.params.maximumSequenceNumbersToCollect?(Ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ze}`),d=this.params.maximumSequenceNumbersToCollect):d=Ze,w=Date.now(),this.nthSequenceNumber(e,d))).next(Ze=>(s=Ze,k=Date.now(),this.removeTargets(e,s,t))).next(Ze=>(g=Ze,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(Ze=>(Q=Date.now(),Vn()<=et.in.DEBUG&&Ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-pe}ms\n\tDetermined least recently used ${d} in `+(k-w)+`ms\n\tRemoved ${g} targets in `+(G-k)+`ms\n\tRemoved ${Ze} documents in `+(Q-G)+`ms\nTotal Duration: ${Q-pe}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:Ze})))}}class Hm{constructor(e,t){this.db=e,this.garbageCollector=new kg(this,t)}Fn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(d=>s+d))}qn(e){let t=0;return this.Bn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Bn(e,t){return this.Un(e,(s,d)=>t(d))}addReference(e,t,s){return Yd(e,s)}removeReference(e,t,s){return Yd(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Yd(e,t)}Kn(e,t){return function(s,d){let g=!1;return Zl(s).X(w=>Mg(s,w,d).next(k=>(k&&(g=!0),Rt.resolve(!k)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Un(e,(w,k)=>{if(k<=t){const G=this.Kn(e,w).next(Q=>{if(!Q)return g++,s.getEntry(e,w).next(()=>(s.removeEntry(w,Xn.min()),Iu(e).delete([0,ao(w.path)])))});d.push(G)}}).next(()=>Rt.waitFor(d)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Yd(e,t)}Un(e,t){const s=Iu(e);let d,g=eo.ct;return s.Z({index:"documentTargetsIndex"},([w,k],{path:G,sequenceNumber:Q})=>{0===w?(g!==eo.ct&&t(new Sn(ys(d)),g),g=Q,d=G):g=eo.ct}).next(()=>{g!==eo.ct&&t(new Sn(ys(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Yd(i,e){return Iu(i).put((s=i.currentSequenceNumber,{targetId:0,path:ao(e.path),sequenceNumber:s}));var s}class Ng{constructor(){this.changes=new hu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Rt.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class zm{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return hd(e).put(s)}removeEntry(e,t,s){return hd(e).delete(function(d,g){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Hd(g),w[w.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.Gn(e,s)))}getEntry(e,t){let s=Ji.newInvalidDocument(t);return hd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},(d,g)=>{s=this.Qn(t,g)}).next(()=>s)}zn(e,t){let s={size:0,document:Ji.newInvalidDocument(t)};return hd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(wu(t))},(d,g)=>{s={document:this.Qn(t,g),size:Hh(g)}}).next(()=>s)}getEntries(e,t){let s=Hi();return this.jn(e,t,(d,g)=>{const w=this.Qn(d,g);s=s.insert(d,w)}).next(()=>s)}Wn(e,t){let s=Hi(),d=new re(Sn.comparator);return this.jn(e,t,(g,w)=>{const k=this.Qn(g,w);s=s.insert(g,k),d=d.insert(g,Hh(w))}).next(()=>({documents:s,Hn:d}))}jn(e,t,s){if(t.isEmpty())return Rt.resolve();let d=new ft(Fg);t.forEach(G=>d=d.add(G));const g=IDBKeyRange.bound(wu(d.first()),wu(d.last())),w=d.getIterator();let k=w.getNext();return hd(e).Z({index:"documentKeyIndex",range:g},(G,Q,pe)=>{const Ze=Sn.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;k&&Fg(k,Ze)<0;)s(k,null),k=w.getNext();k&&k.isEqual(Ze)&&(s(k,Q),k=w.hasNext()?w.getNext():null),k?pe.G(wu(k)):pe.done()}).next(()=>{for(;k;)s(k,null),k=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,s,d){const g=t.path,w=[g.popLast().toArray(),g.lastSegment(),Hd(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],k=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hd(e).j(IDBKeyRange.bound(w,k,!0)).next(G=>{let Q=Hi();for(const pe of G){const Ze=this.Qn(Sn.fromSegments(pe.prefixPath.concat(pe.collectionGroup,pe.documentId)),pe);Ze.isFoundDocument()&&(du(t,Ze)||d.has(Ze.key))&&(Q=Q.insert(Ze.key,Ze))}return Q})}getAllFromCollectionGroup(e,t,s,d){let g=Hi();const w=Xu(t,s),k=Xu(t,gs.max());return hd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,k,!0)},(G,Q,pe)=>{const Ze=this.Qn(Sn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);g=g.insert(Ze.key,Ze),g.size===d&&pe.done()}).next(()=>g)}newChangeBuffer(e){return new Tp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Of(e).get("remoteDocumentGlobalKey").next(t=>(yn(!!t),t))}Gn(e,t){return Of(e).put("remoteDocumentGlobalKey",t)}Qn(e,t){if(t){const s=function vp(i,e){let t;if(e.document)t=uo(i.se,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Sn.fromSegments(e.noDocument.path),d=qu(e.noDocument.readTime);t=Ji.newNoDocument(s,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return hn();{const s=Sn.fromSegments(e.unknownDocument.path),d=qu(e.unknownDocument.version);t=Ji.newUnknownDocument(s,d)}}return e.readTime&&t.setReadTime(function(s){const d=new Ii(s[0],s[1]);return Xn.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!s.isNoDocument()||!s.version.isEqual(Xn.min()))return s}return Ji.newInvalidDocument(e)}}function Rl(i){return new zm(i)}class Tp extends Ng{constructor(e,t){super(),this.Jn=e,this.trackRemovals=t,this.Yn=new hu(s=>s.toString(),(s,d)=>s.isEqual(d))}applyChanges(e){const t=[];let s=0,d=new ft((g,w)=>pr(g.canonicalString(),w.canonicalString()));return this.changes.forEach((g,w)=>{const k=this.Yn.get(g);if(t.push(this.Jn.removeEntry(e,g,k.readTime)),w.isValidDocument()){const G=Lh(this.Jn.serializer,w);d=d.add(g.path.popLast());const Q=Hh(G);s+=Q-k.size,t.push(this.Jn.addEntry(e,g,G))}else if(s-=k.size,this.trackRemovals){const G=Lh(this.Jn.serializer,w.convertToNoDocument(Xn.min()));t.push(this.Jn.addEntry(e,g,G))}}),d.forEach(g=>{t.push(this.Jn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.Jn.updateMetadata(e,s)),Rt.waitFor(t)}getFromCache(e,t){return this.Jn.zn(e,t).next(s=>(this.Yn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.Jn.Wn(e,t).next(({documents:s,Hn:d})=>(d.forEach((g,w)=>{this.Yn.set(g,{size:w,readTime:s.get(g).readTime})}),s))}}function Of(i){return Ir(i,"remoteDocumentGlobal")}function hd(i){return Ir(i,"remoteDocumentsV14")}function wu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xu(i,e){const t=e.documentKey.path.toArray();return[i,Hd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Fg(i,e){const t=i.path.toArray(),s=e.path.toArray();let d=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(d=pr(t[g],s[g]),d)return d;return d=pr(t.length,s.length),d||(d=pr(t[t.length-2],s[s.length-2]),d||pr(t[t.length-1],s[s.length-1]))}class kf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class zh{constructor(e,t,s,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=d}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(s=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==s&&nd(s.mutation,d,xn.empty(),Ii.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,mr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=mr()){const d=xa();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,s).next(g=>{let w=fu();return g.forEach((k,G)=>{w=w.insert(k,G.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const s=xa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,mr()))}populateOverlays(e,t,s){const d=[];return s.forEach(g=>{t.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((w,k)=>{t.set(w,k)})})}computeViews(e,t,s,d){let g=Hi();const w=Hl(),k=Hl();return t.forEach((G,Q)=>{const pe=s.get(Q.key);d.has(Q.key)&&(void 0===pe||pe.mutation instanceof Ga)?g=g.insert(Q.key,Q):void 0!==pe?(w.set(Q.key,pe.mutation.getFieldMask()),nd(pe.mutation,Q,pe.mutation.getFieldMask(),Ii.now())):w.set(Q.key,xn.empty())}),this.recalculateAndSaveOverlays(e,g).next(G=>(G.forEach((Q,pe)=>w.set(Q,pe)),t.forEach((Q,pe)=>{var Ze;return k.set(Q,new kf(pe,null!==(Ze=w.get(Q))&&void 0!==Ze?Ze:null))}),k))}recalculateAndSaveOverlays(e,t){const s=Hl();let d=new re((w,k)=>w-k),g=mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const k of w)k.keys().forEach(G=>{const Q=t.get(G);if(null===Q)return;let pe=s.get(G)||xn.empty();pe=k.applyToLocalView(Q,pe),s.set(G,pe);const Ze=(d.get(k.batchId)||mr()).add(G);d=d.insert(k.batchId,Ze)})}).next(()=>{const w=[],k=d.getReverseIterator();for(;k.hasNext();){const G=k.getNext(),Q=G.key,pe=G.value,Ze=Vu();pe.forEach(Tt=>{if(!g.has(Tt)){const Yt=Ld(t.get(Tt),s.get(Tt));null!==Yt&&Ze.set(Tt,Yt),g=g.add(Tt)}}),w.push(this.documentOverlayCache.saveOverlays(e,Q,Ze))}return Rt.waitFor(w)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Sn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ya(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var d}getNextDocuments(e,t,s,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,d).next(g=>{const w=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,d-g.size):Rt.resolve(xa());let k=-1,G=g;return w.next(Q=>Rt.forEach(Q,(pe,Ze)=>(k<Ze.largestBatchId&&(k=Ze.largestBatchId),g.get(pe)?Rt.resolve():this.remoteDocumentCache.getEntry(e,pe).next(Tt=>{G=G.insert(pe,Tt)}))).next(()=>this.populateOverlays(e,Q,g)).next(()=>this.computeViews(e,G,Q,mr())).next(pe=>({batchId:k,changes:Pd(pe)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Sn(t)).next(s=>{let d=fu();return s.isFoundDocument()&&(d=d.insert(s.key,s)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const d=t.collectionGroup;let g=fu();return this.indexManager.getCollectionParents(e,d).next(w=>Rt.forEach(w,k=>{const G=(Q=t,pe=k.child(d),new Jo(pe,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,pe;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(Q=>{Q.forEach((pe,Ze)=>{g=g.insert(pe,Ze)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(g=>(d=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,d))).next(g=>{d.forEach((k,G)=>{const Q=G.getKey();null===g.get(Q)&&(g=g.insert(Q,Ji.newInvalidDocument(Q)))});let w=fu();return g.forEach((k,G)=>{const Q=d.get(k);void 0!==Q&&nd(Q.mutation,G,xn.empty(),Ii.now()),du(t,G)&&(w=w.insert(k,G))}),w})}}class Gm{constructor(e){this.serializer=e,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Rt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var s;return this.Zn.set(t.id,{id:(s=t).id,version:s.version,createTime:ls(s.createTime)}),Rt.resolve()}getNamedQuery(e,t){return Rt.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(s=t).name,query:Mf(s.bundledQuery),readTime:ls(s.readTime)}),Rt.resolve();var s}}class Kd{constructor(){this.overlays=new re(Sn.comparator),this.ts=new Map}getOverlay(e,t){return Rt.resolve(this.overlays.get(t))}getOverlays(e,t){const s=xa();return Rt.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((d,g)=>{this.re(e,t,g)}),Rt.resolve()}removeOverlaysForBatchId(e,t,s){const d=this.ts.get(s);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.ts.delete(s)),Rt.resolve()}getOverlaysForCollection(e,t,s){const d=xa(),g=t.length+1,w=new Sn(t.child("")),k=this.overlays.getIteratorFrom(w);for(;k.hasNext();){const G=k.getNext().value,Q=G.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===g&&G.largestBatchId>s&&d.set(G.getKey(),G)}return Rt.resolve(d)}getOverlaysForCollectionGroup(e,t,s,d){let g=new re((Q,pe)=>Q-pe);const w=this.overlays.getIterator();for(;w.hasNext();){const Q=w.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>s){let pe=g.get(Q.largestBatchId);null===pe&&(pe=xa(),g=g.insert(Q.largestBatchId,pe)),pe.set(Q.getKey(),Q)}}const k=xa(),G=g.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Q,pe)=>k.set(Q,pe)),!(k.size()>=d)););return Rt.resolve(k)}re(e,t,s){const d=this.overlays.get(s.key);if(null!==d){const w=this.ts.get(d.largestBatchId).delete(s.key);this.ts.set(d.largestBatchId,w)}this.overlays=this.overlays.insert(s.key,new id(t,s));let g=this.ts.get(t);void 0===g&&(g=mr(),this.ts.set(t,g)),this.ts.set(t,g.add(s.key))}}class Nr{constructor(){this.es=new ft(vo.ns),this.ss=new ft(vo.rs)}isEmpty(){return this.es.isEmpty()}addReference(e,t){const s=new vo(e,t);this.es=this.es.add(s),this.ss=this.ss.add(s)}os(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.us(new vo(e,t))}cs(e,t){e.forEach(s=>this.removeReference(s,t))}hs(e){const t=new Sn(new jr([])),s=new vo(t,e),d=new vo(t,e+1),g=[];return this.ss.forEachInRange([s,d],w=>{this.us(w),g.push(w.key)}),g}ls(){this.es.forEach(e=>this.us(e))}us(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}fs(e){const t=new Sn(new jr([])),s=new vo(t,e),d=new vo(t,e+1);let g=mr();return this.ss.forEachInRange([s,d],w=>{g=g.add(w.key)}),g}containsKey(e){const t=new vo(e,0),s=this.es.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class vo{constructor(e,t){this.key=e,this.ds=t}static ns(e,t){return Sn.comparator(e.key,t.key)||pr(e.ds,t.ds)}static rs(e,t){return pr(e.ds,t.ds)||Sn.comparator(e.key,t.key)}}class Sp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this._s=new ft(vo.ns)}checkEmpty(e){return Rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,d){const g=this.ws;this.ws++;const w=new vc(g,t,s,d);this.mutationQueue.push(w);for(const k of d)this._s=this._s.add(new vo(k.key,g)),this.indexManager.addToCollectionParentIndex(e,k.key.path.popLast());return Rt.resolve(w)}lookupMutationBatch(e,t){return Rt.resolve(this.gs(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ys(t+1),g=d<0?0:d;return Rt.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new vo(t,0),d=new vo(t,Number.POSITIVE_INFINITY),g=[];return this._s.forEachInRange([s,d],w=>{const k=this.gs(w.ds);g.push(k)}),Rt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ft(pr);return t.forEach(d=>{const g=new vo(d,0),w=new vo(d,Number.POSITIVE_INFINITY);this._s.forEachInRange([g,w],k=>{s=s.add(k.ds)})}),Rt.resolve(this.ps(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1;let g=s;Sn.isDocumentKey(g)||(g=g.child(""));const w=new vo(new Sn(g),0);let k=new ft(pr);return this._s.forEachWhile(G=>{const Q=G.key.path;return!!s.isPrefixOf(Q)&&(Q.length===d&&(k=k.add(G.ds)),!0)},w),Rt.resolve(this.ps(k))}ps(e){const t=[];return e.forEach(s=>{const d=this.gs(s);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){yn(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();let s=this._s;return Rt.forEach(t.mutations,d=>{const g=new vo(d.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this._s=s})}En(e){}containsKey(e,t){const s=new vo(t,0),d=this._s.firstAfterOrEqual(s);return Rt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Rt.resolve()}Is(e,t){return this.ys(e)}ys(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}gs(e){const t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ap{constructor(e){this.Ts=e,this.docs=new re(Sn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,d=this.docs.get(s),g=d?d.size:0,w=this.Ts(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:w}),this.size+=w-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Rt.resolve(s?s.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let s=Hi();return t.forEach(d=>{const g=this.docs.get(d);s=s.insert(d,g?g.document.mutableCopy():Ji.newInvalidDocument(d))}),Rt.resolve(s)}getDocumentsMatchingQuery(e,t,s,d){let g=Hi();const w=t.path,k=new Sn(w.child("")),G=this.docs.getIteratorFrom(k);for(;G.hasNext();){const{key:Q,value:{document:pe}}=G.getNext();if(!w.isPrefixOf(Q.path))break;Q.path.length>w.length+1||iu(sc(pe),s)<=0||(d.has(pe.key)||du(t,pe))&&(g=g.insert(pe.key,pe.mutableCopy()))}return Rt.resolve(g)}getAllFromCollectionGroup(e,t,s,d){hn()}Es(e,t){return Rt.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Nf(this)}getSize(e){return Rt.resolve(this.size)}}class Nf extends Ng{constructor(e){super(),this.Jn=e}applyChanges(e){const t=[];return this.changes.forEach((s,d)=>{d.isValidDocument()?t.push(this.Jn.addEntry(e,d)):this.Jn.removeEntry(s)}),Rt.waitFor(t)}getFromCache(e,t){return this.Jn.getEntry(e,t)}getAllFromCache(e,t){return this.Jn.getEntries(e,t)}}class xp{constructor(e){this.persistence=e,this.As=new hu(t=>Vl(t),al),this.lastRemoteSnapshotVersion=Xn.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Nr,this.targetCount=0,this.bs=_a.vn()}forEachTarget(e,t){return this.As.forEach((s,d)=>t(d)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.Rs)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Rs&&(this.Rs=t),Rt.resolve()}Sn(e){this.As.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new _a(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}addTargetData(e,t){return this.Sn(t),this.targetCount+=1,Rt.resolve()}updateTargetData(e,t){return this.Sn(t),Rt.resolve()}removeTargetData(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,t,s){let d=0;const g=[];return this.As.forEach((w,k)=>{k.sequenceNumber<=t&&null===s.get(k.targetId)&&(this.As.delete(w),g.push(this.removeMatchingKeysForTargetId(e,k.targetId)),d++)}),Rt.waitFor(g).next(()=>d)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,t){const s=this.As.get(t)||null;return Rt.resolve(s)}addMatchingKeys(e,t,s){return this.vs.os(t,s),Rt.resolve()}removeMatchingKeys(e,t,s){this.vs.cs(t,s);const d=this.persistence.referenceDelegate,g=[];return d&&t.forEach(w=>{g.push(d.markPotentiallyOrphaned(e,w))}),Rt.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.vs.hs(t),Rt.resolve()}getMatchingKeysForTargetId(e,t){const s=this.vs.fs(t);return Rt.resolve(s)}containsKey(e,t){return Rt.resolve(this.vs.containsKey(t))}}class Gh{constructor(e,t){this.Ps={},this.overlays={},this.Vs=new eo(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=e(this),this.Ds=new xp(this),this.indexManager=new bp,this.remoteDocumentCache=new Ap(s=>this.referenceDelegate.Cs(s)),this.serializer=new Fh(t),this.xs=new Gm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Kd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Ps[e.toKey()];return s||(s=new Sp(t,this.referenceDelegate),this.Ps[e.toKey()]=s),s}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(e,t,s){Ft("MemoryPersistence","Starting transaction:",e);const d=new Wm(this.Vs.next());return this.referenceDelegate.Ns(),s(d).next(g=>this.referenceDelegate.ks(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Os(e,t){return Rt.or(Object.values(this.Ps).map(s=>()=>s.containsKey(e,t)))}}class Wm extends Il{constructor(e){super(),this.currentSequenceNumber=e}}class Wh{constructor(e){this.persistence=e,this.$s=new Nr,this.Ms=null}static Fs(e){return new Wh(e)}get Bs(){if(this.Ms)return this.Ms;throw hn()}addReference(e,t,s){return this.$s.addReference(s,t),this.Bs.delete(s.toString()),Rt.resolve()}removeReference(e,t,s){return this.$s.removeReference(s,t),this.Bs.add(s.toString()),Rt.resolve()}markPotentiallyOrphaned(e,t){return this.Bs.add(t.toString()),Rt.resolve()}removeTarget(e,t){this.$s.hs(t.targetId).forEach(d=>this.Bs.add(d.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(g=>this.Bs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}Ns(){this.Ms=new Set}ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.Bs,s=>{const d=Sn.fromPath(s);return this.Ls(e,d).next(g=>{g||t.removeEntry(d,Xn.min())})}).next(()=>(this.Ms=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ls(e,t).next(s=>{s?this.Bs.delete(t.toString()):this.Bs.add(t.toString())})}Cs(e){return 0}Ls(e,t){return Rt.or([()=>Rt.resolve(this.$s.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Mp{constructor(e){this.serializer=e}M(e,t,s,d){const g=new Js("createOrUpgrade",t);var k;s<1&&d>=1&&(e.createObjectStore("owner"),(k=e).createObjectStore("mutationQueues",{keyPath:"userId"}),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ko,{unique:!0}),k.createObjectStore("documentMutations"),Lg(e),function(k){k.createObjectStore("remoteDocuments")}(e));let w=Rt.resolve();return s<3&&d>=3&&(0!==s&&(function(k){k.deleteObjectStore("targetDocuments"),k.deleteObjectStore("targets"),k.deleteObjectStore("targetGlobal")}(e),Lg(e)),w=w.next(()=>function(k){const G=k.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Q)}(g))),s<4&&d>=4&&(0!==s&&(w=w.next(()=>function(k,G){return G.store("mutations").j().next(Q=>{k.deleteObjectStore("mutations"),k.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ko,{unique:!0});const pe=G.store("mutations"),Ze=Q.map(Tt=>pe.put(Tt));return Rt.waitFor(Ze)})}(e,g))),w=w.next(()=>{!function(k){k.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&d>=5&&(w=w.next(()=>this.qs(g))),s<6&&d>=6&&(w=w.next(()=>(function(k){k.createObjectStore("remoteDocumentGlobal")}(e),this.Us(g)))),s<7&&d>=7&&(w=w.next(()=>this.Ks(g))),s<8&&d>=8&&(w=w.next(()=>this.Gs(e,g))),s<9&&d>=9&&(w=w.next(()=>{!function(k){k.objectStoreNames.contains("remoteDocumentChanges")&&k.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&d>=10&&(w=w.next(()=>this.Qs(g))),s<11&&d>=11&&(w=w.next(()=>{(function(k){k.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(k){k.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&d>=12&&(w=w.next(()=>{!function(k){const G=k.createObjectStore("documentOverlays",{keyPath:H});G.createIndex("collectionPathOverlayIndex",ie,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",ae,{unique:!1})}(e)})),s<13&&d>=13&&(w=w.next(()=>function(k){const G=k.createObjectStore("remoteDocumentsV14",{keyPath:Hr});G.createIndex("documentKeyIndex",vr),G.createIndex("collectionGroupIndex",Xo)}(e)).next(()=>this.zs(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&d>=14&&(w=w.next(()=>this.js(e,g))),s<15&&d>=15&&(w=w.next(()=>function(k){k.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),k.createObjectStore("indexState",{keyPath:S}).createIndex("sequenceNumberIndex",A,{unique:!1}),k.createObjectStore("indexEntries",{keyPath:I}).createIndex("documentKeyIndex",P,{unique:!1})}(e))),w}Us(e){let t=0;return e.store("remoteDocuments").Z((s,d)=>{t+=Hh(d)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}qs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.j().next(d=>Rt.forEach(d,g=>{const w=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.j("userMutationsIndex",w).next(k=>Rt.forEach(k,G=>{yn(G.userId===g.userId);const Q=_u(this.serializer,G);return xg(e,g.userId,Q).next(()=>{})}))}))}Ks(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return s.Z((w,k)=>{const G=new jr(w),Q=[0,ao(G)];g.push(t.get(Q).next(pe=>pe?Rt.resolve():t.put({targetId:0,path:ao(G),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Rt.waitFor(g))})}Gs(e,t){e.createObjectStore("collectionParents",{keyPath:lo});const s=t.store("collectionParents"),d=new cd,g=w=>{if(d.add(w)){const k=w.lastSegment(),G=w.popLast();return s.put({collectionId:k,parent:ao(G)})}};return t.store("remoteDocuments").Z({Y:!0},(w,k)=>{const G=new jr(w);return g(G.popLast())}).next(()=>t.store("documentMutations").Z({Y:!0},([w,k,G],Q)=>{const pe=ys(k);return g(pe.popLast())}))}Qs(e){const t=e.store("targets");return t.Z((s,d)=>{const g=wc(d),w=bc(this.serializer,g);return t.put(w)})}zs(e,t){const s=t.store("remoteDocuments"),d=[];return s.Z((g,w)=>{const k=t.store("remoteDocumentsV14"),G=(Q=w,Q.document?new Sn(jr.fromString(Q.document.name).popFirst(5)):Q.noDocument?Sn.fromSegments(Q.noDocument.path):Q.unknownDocument?Sn.fromSegments(Q.unknownDocument.path):hn()).path.toArray();var Q;const pe={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};d.push(k.put(pe))}).next(()=>Rt.waitFor(d))}js(e,t){const s=t.store("mutations"),d=Rl(this.serializer),g=new Gh(Wh.Fs,this.serializer.se);return s.j().next(w=>{const k=new Map;return w.forEach(G=>{var Q;let pe=null!==(Q=k.get(G.userId))&&void 0!==Q?Q:mr();_u(this.serializer,G).keys().forEach(Ze=>pe=pe.add(Ze)),k.set(G.userId,pe)}),Rt.forEach(k,(G,Q)=>{const pe=new be(Q),Ze=Cc.ie(this.serializer,pe),Tt=g.getIndexManager(pe),Yt=Pf.ie(pe,this.serializer,Tt,g.referenceDelegate);return new zh(d,Yt,Ze,Tt).recalculateAndSaveOverlaysForDocumentKeys(new zr(t,eo.ct),G).next()})})}}function Lg(i){i.createObjectStore("targetDocuments",{keyPath:Ru}).createIndex("documentTargetsIndex",Vc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Di,{unique:!0}),i.createObjectStore("targetGlobal")}const Rp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ff{constructor(e,t,s,d,g,w,k,G,Q,pe,Ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.Ws=g,this.window=w,this.document=k,this.Hs=Q,this.Js=pe,this.Ys=Ze,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=Tt=>Promise.resolve(),!Ff.D())throw new Wt(At.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hm(this,d),this.si=t+"main",this.serializer=new Fh(G),this.ii=new oo(this.si,this.Ys,new Mp(this.serializer)),this.Ds=new Rg(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Rl(this.serializer),this.xs=new Uh,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===pe&&lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.oi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Wt(At.FAILED_PRECONDITION,Rp);return this.ui(),this.ci(),this.ai(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ds.getHighestSequenceNumber(e))}).then(e=>{this.Vs=new eo(e,this.Hs)}).then(()=>{this.Ss=!0}).catch(e=>(this.ii&&this.ii.close(),Promise.reject(e)))}hi(e){var t=this;return this.ni=function(){var s=(0,ue.Z)(function*(d){if(t.started)return e(d)});return function(d){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ii.B(function(){var t=(0,ue.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget((0,ue.Z)(function*(){t.started&&(yield t.oi())})))}oi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.li(e).next(t=>{t||(this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)))})}).next(()=>this.fi(e)).next(t=>this.isPrimary&&!t?this.di(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(rl(e))return Ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ws.enqueueRetryable(()=>this.ni(e)),this.isPrimary=e})}li(e){return fd(e).get("owner").next(t=>Rt.resolve(this._i(t)))}mi(e){return Xl(e).delete(this.clientId)}gi(){var e=this;return(0,ue.Z)(function*(){if(e.isPrimary&&!e.yi(e.ei,18e5)){e.ei=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const d=Ir(s,"clientMetadata");return d.j().next(g=>{const w=e.pi(g,18e5),k=g.filter(G=>-1===w.indexOf(G));return Rt.forEach(k,G=>d.delete(G.clientId)).next(()=>k)})}).catch(()=>[]);if(e.ri)for(const s of t)e.ri.removeItem(e.Ii(s.clientId))}})()}ai(){this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.oi().then(()=>this.gi()).then(()=>this.ai()))}_i(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.Js?Rt.resolve(!0):fd(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)){if(this._i(t)&&this.networkEnabled)return!0;if(!this._i(t)){if(!t.allowTabSynchronization)throw new Wt(At.FAILED_PRECONDITION,Rp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xl(e).j().next(s=>void 0===this.pi(s,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ft("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ue.Z)(function*(){e.Ss=!1,e.Ei(),e.ti&&(e.ti.cancel(),e.ti=null),e.Ai(),e.Ri(),yield e.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new zr(t,eo.ct);return e.di(s).next(()=>e.mi(s))}),e.ii.close(),e.vi()})()}pi(e,t){return e.filter(s=>this.yi(s.updateTimeMs,t)&&!this.Ti(s.clientId))}bi(){return this.runTransaction("getActiveClients","readonly",e=>Xl(e).j().next(t=>this.pi(t,18e5).map(s=>s.clientId)))}get started(){return this.Ss}getMutationQueue(e,t){return Pf.ie(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ag(e,this.serializer.se.databaseId)}getDocumentOverlayCache(e){return Cc.ie(this.serializer,e)}getBundleCache(){return this.xs}runTransaction(e,t,s){Ft("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",g=15===(w=this.Ys)?Dn:14===w?Fn:13===w?dn:12===w?Pt:11===w?at:void hn();var w;let k;return this.ii.runTransaction(e,d,g,G=>(k=new zr(G,this.Vs?this.Vs.next():eo.ct),"readwrite-primary"===t?this.li(k).next(Q=>!!Q||this.fi(k)).next(Q=>{if(!Q)throw lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ws.enqueueRetryable(()=>this.ni(!1)),new Wt(At.FAILED_PRECONDITION,os);return s(k)}).next(Q=>this.wi(k).next(()=>Q)):this.Pi(k).next(()=>s(k)))).then(G=>(k.raiseOnCommittedEvent(),G))}Pi(e){return fd(e).get("owner").next(t=>{if(null!==t&&this.yi(t.leaseTimestampMs,5e3)&&!this.Ti(t.ownerId)&&!this._i(t)&&!(this.Js||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Wt(At.FAILED_PRECONDITION,Rp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return fd(e).put("owner",t)}static D(){return oo.D()}di(e){const t=fd(e);return t.get("owner").next(s=>this._i(s)?(Ft("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rt.resolve())}yi(e,t){const s=Date.now();return!(e<s-t||e>s&&(lr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ui(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=()=>{this.Ws.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.oi()))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}Ai(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}ci(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ei();const t=/(?:Version|Mobile)\/1[456]/;(0,Xe.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ws.enterRestrictedMode(!0),this.Ws.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}Ri(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ti(e){var t;try{const s=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Ft("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return lr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ei(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(e){lr("Failed to set zombie client id.",e)}}vi(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch{}}Ii(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function fd(i){return Ir(i,"owner")}function Xl(i){return Ir(i,"clientMetadata")}function qh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Zd{constructor(e,t,s,d){this.targetId=e,this.fromCache=t,this.Vi=s,this.Si=d}static Di(e,t){let s=mr(),d=mr();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new Zd(e,t.fromCache,s,d)}}class na{constructor(){this.Ci=!1}initialize(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}getDocumentsMatchingQuery(e,t,s,d){return this.Ni(e,t).next(g=>g||this.ki(e,t,d,s)).next(g=>g||this.Oi(e,t))}Ni(e,t){if(Cl(t))return Rt.resolve(null);let s=ea(t);return this.indexManager.getIndexType(e,s).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=Rd(t,null,"F"),s=ea(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(g=>{const w=mr(...g);return this.xi.getDocuments(e,w).next(k=>this.indexManager.getMinOffset(e,s).next(G=>{const Q=this.$i(t,k);return this.Mi(t,Q,w,G.readTime)?this.Ni(e,Rd(t,null,"F")):this.Fi(e,Q,t,G)}))})))}ki(e,t,s,d){return Cl(t)||d.isEqual(Xn.min())?this.Oi(e,t):this.xi.getDocuments(e,s).next(g=>{const w=this.$i(t,g);return this.Mi(t,w,s,d)?this.Oi(e,t):(Vn()<=et.in.DEBUG&&Ft("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),Tl(t)),this.Fi(e,w,t,ru(d,-1)))})}$i(e,t){let s=new ft(Va(e));return t.forEach((d,g)=>{du(e,g)&&(s=s.add(g))}),s}Mi(e,t,s,d){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Oi(e,t){return Vn()<=et.in.DEBUG&&Ft("QueryEngine","Using full collection scan to execute query:",Tl(t)),this.xi.getDocumentsMatchingQuery(e,t,gs.min())}Fi(e,t,s,d){return this.xi.getDocumentsMatchingQuery(e,s,d).next(g=>(t.forEach(w=>{g=g.insert(w.key,w)}),g))}}class Lf{constructor(e,t,s,d){this.persistence=e,this.Bi=t,this.serializer=d,this.Li=new re(pr),this.qi=new hu(g=>Vl(g),al),this.Ui=new Map,this.Ki=e.getRemoteDocumentCache(),this.Ds=e.getTargetCache(),this.xs=e.getBundleCache(),this.Gi(s)}Gi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zh(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Li))}}function Mc(i,e,t,s){return new Lf(i,e,t,s)}function Bf(i,e){return dl.apply(this,arguments)}function dl(){return dl=(0,ue.Z)(function*(i,e){const t=on(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let d;return t.mutationQueue.getAllMutationBatches(s).next(g=>(d=g,t.Gi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const w=[],k=[];let G=mr();for(const Q of d){w.push(Q.batchId);for(const pe of Q.mutations)G=G.add(pe.key)}for(const Q of g){k.push(Q.batchId);for(const pe of Q.mutations)G=G.add(pe.key)}return t.localDocuments.getDocuments(s,G).next(Q=>({Qi:Q,removedBatchIds:w,addedBatchIds:k}))})})}),dl.apply(this,arguments)}function $f(i){const e=on(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ds.getLastRemoteSnapshotVersion(t))}function Rc(i,e,t){let s=mr(),d=mr();return t.forEach(g=>s=s.add(g)),e.getEntries(i,s).next(g=>{let w=Hi();return t.forEach((k,G)=>{const Q=g.get(k);G.isFoundDocument()!==Q.isFoundDocument()&&(d=d.add(k)),G.isNoDocument()&&G.version.isEqual(Xn.min())?(e.removeEntry(k,G.readTime),w=w.insert(k,G)):!Q.isValidDocument()||G.version.compareTo(Q.version)>0||0===G.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(G),w=w.insert(k,G)):Ft("LocalStore","Ignoring outdated watch update for ",k,". Current version:",Q.version," Watch version:",G.version)}),{zi:w,ji:d}})}function Yh(i,e){const t=on(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Xd(i,e){const t=on(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let d;return t.Ds.getTargetData(s,e).next(g=>g?(d=g,Rt.resolve(d)):t.Ds.allocateTargetId(s).next(w=>(d=new ql(e,w,0,s.currentSequenceNumber),t.Ds.addTargetData(s,d).next(()=>d))))}).then(s=>{const d=t.Li.get(s.targetId);return(null===d||s.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Li=t.Li.insert(s.targetId,s),t.qi.set(e,s.targetId)),s})}function gd(i,e,t){return Pc.apply(this,arguments)}function Pc(){return Pc=(0,ue.Z)(function*(i,e,t){const s=on(i),d=s.Li.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,w=>s.persistence.referenceDelegate.removeTarget(w,d)))}catch(w){if(!rl(w))throw w;Ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}s.Li=s.Li.remove(e),s.qi.delete(d.target)}),Pc.apply(this,arguments)}function Uf(i,e,t){const s=on(i);let d=Xn.min(),g=mr();return s.persistence.runTransaction("Execute query","readonly",w=>function(k,G,Q){const pe=on(k),Ze=pe.qi.get(Q);return void 0!==Ze?Rt.resolve(pe.Li.get(Ze)):pe.Ds.getTargetData(G,Q)}(s,w,ea(e)).next(k=>{if(k)return d=k.lastLimboFreeSnapshotVersion,s.Ds.getMatchingKeysForTargetId(w,k.targetId).next(G=>{g=G})}).next(()=>s.Bi.getDocumentsMatchingQuery(w,e,t?d:Xn.min(),t?g:mr())).next(k=>($g(s,mc(e),k),{documents:k,Wi:g})))}function Pp(i,e){const t=on(i),s=on(t.Ds),d=t.Li.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",g=>s.ne(g,e).next(w=>w?w.target:null))}function Bg(i,e){const t=on(i),s=t.Ui.get(e)||Xn.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Ki.getAllFromCollectionGroup(d,e,ru(s,-1),Number.MAX_SAFE_INTEGER)).then(d=>($g(t,e,d),d))}function $g(i,e,t){let s=i.Ui.get(e)||Xn.min();t.forEach((d,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),i.Ui.set(e,s)}function Qd(){return Qd=(0,ue.Z)(function*(i,e,t,s){const d=on(i);let g=mr(),w=Hi();for(const Q of t){const pe=e.Hi(Q.metadata.name);Q.document&&(g=g.add(pe));const Ze=e.Ji(Q);Ze.setReadTime(e.Yi(Q.metadata.readTime)),w=w.insert(pe,Ze)}const k=d.Ki.newChangeBuffer({trackRemovals:!0}),G=yield Xd(d,(Q=s,ea(ma(jr.fromString(`__bundle__/docs/${Q}`)))));var Q;return d.persistence.runTransaction("Apply bundle documents","readwrite",Q=>Rc(Q,k,w).next(pe=>(k.apply(Q),pe)).next(pe=>d.Ds.removeMatchingKeysForTargetId(Q,G.targetId).next(()=>d.Ds.addMatchingKeys(Q,g,G.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(Q,pe.zi,pe.ji)).next(()=>pe.zi)))}),Qd.apply(this,arguments)}function Zh(i,e){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,ue.Z)(function*(i,e,t=mr()){const s=yield Xd(i,ea(Mf(e.bundledQuery))),d=on(i);return d.persistence.runTransaction("Save named query","readwrite",g=>{const w=ls(e.readTime);if(s.snapshotVersion.compareTo(w)>=0)return d.xs.saveNamedQuery(g,e);const k=s.withResumeToken(Yn.EMPTY_BYTE_STRING,w);return d.Li=d.Li.insert(k.targetId,k),d.Ds.updateTargetData(g,k).next(()=>d.Ds.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>d.Ds.addMatchingKeys(g,t,s.targetId)).next(()=>d.xs.saveNamedQuery(g,e))})}),Jd.apply(this,arguments)}function Op(i,e){return`firestore_clients_${i}_${e}`}function Vf(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Xh(i,e){return`firestore_targets_${i}_${e}`}class md{constructor(e,t,s,d){this.user=e,this.batchId=t,this.state=s,this.error=d}static Zi(e,t,s){const d=JSON.parse(s);let g,w="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return w&&d.error&&(w="string"==typeof d.error.message&&"string"==typeof d.error.code,w&&(g=new Wt(d.error.code,d.error.message))),w?new md(e,t,d.state,g):(lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Zi(e,t){const s=JSON.parse(t);let d,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(d=new Wt(s.error.code,s.error.message))),g?new Qh(e,s.state,d):(lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ea{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const s=JSON.parse(t);let d="object"==typeof s&&s.activeTargetIds instanceof Array,g=Sl();for(let w=0;d&&w<s.activeTargetIds.length;++w)d=Mu(s.activeTargetIds[w]),g=g.add(s.activeTargetIds[w]);return d?new Ea(e,g):(lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class jf{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new jf(t.clientId,t.onlineState):(lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ug{constructor(){this.activeTargetIds=Sl()}tr(e){this.activeTargetIds=this.activeTargetIds.add(e)}er(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oc{constructor(e,t,s,d,g){this.window=e,this.Ws=t,this.persistenceKey=s,this.nr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new re(pr),this.started=!1,this.ur=[];const w=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.cr=Op(this.persistenceKey,this.nr),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.rr=this.rr.insert(this.nr,new Ug),this.hr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.lr=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.dr=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this._r=function(k){return`firestore_bundle_loaded_v2_${k}`}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ue.Z)(function*(){const t=yield e.syncEngine.bi();for(const d of t){if(d===e.nr)continue;const g=e.getItem(Op(e.persistenceKey,d));if(g){const w=Ea.Zi(d,g);w&&(e.rr=e.rr.insert(w.clientId,w))}}e.mr();const s=e.storage.getItem(e.wr);if(s){const d=e.gr(s);d&&e.yr(d)}for(const d of e.ur)e.ir(d);e.ur=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.pr(this.rr)}isActiveQueryTarget(e){let t=!1;return this.rr.forEach((s,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ir(e,"pending")}updateMutationState(e,t,s){this.Ir(e,t,s),this.Tr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Xh(this.persistenceKey,e));if(s){const d=Qh.Zi(e,s);d&&(t=d.state)}}return this.Er.tr(e),this.mr(),t}removeLocalQueryTarget(e){this.Er.er(e),this.mr()}isLocalQueryTarget(e){return this.Er.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xh(this.persistenceKey,e))}updateQueryState(e,t,s){this.Ar(e,t,s)}handleUserChange(e,t,s){t.forEach(d=>{this.Tr(d)}),this.currentUser=e,s.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Rr(e)}notifyBundleLoaded(e){this.vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ft("SharedClientState","READ",e,t),t}setItem(e,t){Ft("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ir(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ft("SharedClientState","EVENT",s.key,s.newValue),s.key===this.cr)return void lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable((0,ue.Z)(function*(){if(t.started){if(null!==s.key)if(t.hr.test(s.key)){if(null==s.newValue){const d=t.br(s.key);return t.Pr(d,null)}{const d=t.Vr(s.key,s.newValue);if(d)return t.Pr(d.clientId,d)}}else if(t.lr.test(s.key)){if(null!==s.newValue){const d=t.Sr(s.key,s.newValue);if(d)return t.Dr(d)}}else if(t.dr.test(s.key)){if(null!==s.newValue){const d=t.Cr(s.key,s.newValue);if(d)return t.Nr(d)}}else if(s.key===t.wr){if(null!==s.newValue){const d=t.gr(s.newValue);if(d)return t.yr(d)}}else if(s.key===t.ar){const d=function(g){let w=eo.ct;if(null!=g)try{const k=JSON.parse(g);yn("number"==typeof k),w=k}catch(k){lr("SharedClientState","Failed to read sequence number from WebStorage",k)}return w}(s.newValue);d!==eo.ct&&t.sequenceNumberHandler(d)}else if(s.key===t._r){const d=t.kr(s.newValue);yield Promise.all(d.map(g=>t.syncEngine.Or(g)))}}else t.ur.push(s)}))}}get Er(){return this.rr.get(this.nr)}mr(){this.setItem(this.cr,this.Er.Xi())}Ir(e,t,s){const d=new md(this.currentUser,e,t,s),g=Vf(this.persistenceKey,this.currentUser,e);this.setItem(g,d.Xi())}Tr(e){const t=Vf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Rr(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.nr,onlineState:e}))}Ar(e,t,s){const d=Xh(this.persistenceKey,e),g=new Qh(e,t,s);this.setItem(d,g.Xi())}vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}br(e){const t=this.hr.exec(e);return t?t[1]:null}Vr(e,t){const s=this.br(e);return Ea.Zi(s,t)}Sr(e,t){const s=this.lr.exec(e),d=Number(s[1]);return md.Zi(new be(void 0!==s[2]?s[2]:null),d,t)}Cr(e,t){const s=this.dr.exec(e),d=Number(s[1]);return Qh.Zi(d,t)}gr(e){return jf.Zi(e)}kr(e){return JSON.parse(e)}Dr(e){var t=this;return(0,ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Nr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}Pr(e,t){const s=t?this.rr.insert(e,t):this.rr.remove(e),d=this.pr(this.rr),g=this.pr(s),w=[],k=[];return g.forEach(G=>{d.has(G)||w.push(G)}),d.forEach(G=>{g.has(G)||k.push(G)}),this.syncEngine.Fr(w,k).then(()=>{this.rr=s})}yr(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}pr(e){let t=Sl();return e.forEach((s,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class kp{constructor(){this.Br=new Ug,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Br.tr(e),this.Lr[e]||"not-current"}updateQueryState(e,t,s){this.Lr[e]=t}removeLocalQueryTarget(e){this.Br.er(e)}isLocalQueryTarget(e){return this.Br.activeTargetIds.has(e)}clearQueryState(e){delete this.Lr[e]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(e){return this.Br.activeTargetIds.has(e)}start(){return this.Br=new Ug,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vg{qr(e){}shutdown(){}}class Np{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){Ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Qr(){Ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hf=null;function Fp(){return null===Hf?Hf=268435456+Math.round(2147483648*Math.random()):Hf++,"0x"+Hf.toString(16)}const zf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eh{constructor(e){this.Wr=e.Wr,this.Hr=e.Hr}Jr(e){this.Yr=e}Zr(e){this.Xr=e}onMessage(e){this.eo=e}close(){this.Hr()}send(e){this.Wr(e)}no(){this.Yr()}so(e){this.Xr(e)}io(e){this.eo(e)}}const Bo="WebChannelConnection";class Jh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.ro=(e.ssl?"https":"http")+"://"+e.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(e,t,s,d,g){const w=Fp(),k=this.ao(e,t);Ft("RestConnection",`Sending RPC '${e}' ${w}:`,k,s);const G={};return this.ho(G,d,g),this.lo(e,k,G,s).then(Q=>(Ft("RestConnection",`Received RPC '${e}' ${w}: `,Q),Q),Q=>{throw Zn("RestConnection",`RPC '${e}' ${w} failed with error: `,Q,"url: ",k,"request:",s),Q})}fo(e,t,s,d,g,w){return this.co(e,t,s,d,g)}ho(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,g)=>e[g]=d),s&&s.headers.forEach((d,g)=>e[g]=d)}ao(e,t){return`${this.ro}/v1/${t}:${zf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,s,d){const g=Fp();return new Promise((w,k)=>{const G=new V;G.setWithCredentials(!0),G.listenOnce(yl.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Nl.NO_ERROR:const pe=G.getResponseJson();Ft(Bo,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(pe)),w(pe);break;case Nl.TIMEOUT:Ft(Bo,`RPC '${e}' ${g} timed out`),k(new Wt(At.DEADLINE_EXCEEDED,"Request time out"));break;case Nl.HTTP_ERROR:const Ze=G.getStatus();if(Ft(Bo,`RPC '${e}' ${g} failed with status:`,Ze,"response text:",G.getResponseText()),Ze>0){let Tt=G.getResponseJson();Array.isArray(Tt)&&(Tt=Tt[0]);const Yt=null==Tt?void 0:Tt.error;if(Yt&&Yt.status&&Yt.message){const gn=function(zn){const cr=zn.toLowerCase().replace(/_/g,"-");return Object.values(At).indexOf(cr)>=0?cr:At.UNKNOWN}(Yt.status);k(new Wt(gn,Yt.message))}else k(new Wt(At.UNKNOWN,"Server responded with status "+G.getStatus()))}else k(new Wt(At.UNAVAILABLE,"Connection failed."));break;default:hn()}}finally{Ft(Bo,`RPC '${e}' ${g} completed.`)}});const Q=JSON.stringify(d);Ft(Bo,`RPC '${e}' ${g} sending request:`,d),G.send(t,"POST",Q,s,15)})}wo(e,t,s){const d=Fp(),g=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=ha(),k=ss(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(G.xmlHttpFactory=new F({})),this.ho(G.initMessageHeaders,t,s),G.encodeInitMessageHeaders=!0;const Q=g.join("");Ft(Bo,`Creating RPC '${e}' stream ${d}: ${Q}`,G);const pe=w.createWebChannel(Q,G);let Ze=!1,Tt=!1;const Yt=new eh({Wr:zn=>{Tt?Ft(Bo,`Not sending because RPC '${e}' stream ${d} is closed:`,zn):(Ze||(Ft(Bo,`Opening RPC '${e}' stream ${d} transport.`),pe.open(),Ze=!0),Ft(Bo,`RPC '${e}' stream ${d} sending:`,zn),pe.send(zn))},Hr:()=>pe.close()}),gn=(zn,cr,Bi)=>{zn.listen(cr,Ls=>{try{Bi(Ls)}catch(ci){setTimeout(()=>{throw ci},0)}})};return gn(pe,Z.EventType.OPEN,()=>{Tt||Ft(Bo,`RPC '${e}' stream ${d} transport opened.`)}),gn(pe,Z.EventType.CLOSE,()=>{Tt||(Tt=!0,Ft(Bo,`RPC '${e}' stream ${d} transport closed`),Yt.so())}),gn(pe,Z.EventType.ERROR,zn=>{Tt||(Tt=!0,Zn(Bo,`RPC '${e}' stream ${d} transport errored:`,zn),Yt.so(new Wt(At.UNAVAILABLE,"The operation could not be completed")))}),gn(pe,Z.EventType.MESSAGE,zn=>{var cr;if(!Tt){const Bi=zn.data[0];yn(!!Bi);const ci=Bi.error||(null===(cr=Bi[0])||void 0===cr?void 0:cr.error);if(ci){Ft(Bo,`RPC '${e}' stream ${d} received error:`,ci);const wa=ci.status;let Bs=function(fl){const Eh=b[fl];if(void 0!==Eh)return x(Eh)}(wa),$s=ci.message;void 0===Bs&&(Bs=At.INTERNAL,$s="Unknown error status: "+wa+" with message "+ci.message),Tt=!0,Yt.so(new Wt(Bs,$s)),pe.close()}else Ft(Bo,`RPC '${e}' stream ${d} received:`,Bi),Yt.io(Bi)}}),gn(k,Ya.STAT_EVENT,zn=>{zn.stat===Ka.PROXY?Ft(Bo,`RPC '${e}' stream ${d} detected buffering proxy`):zn.stat===Ka.NOPROXY&&Ft(Bo,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{Yt.no()},0),Yt}}function Gf(){return typeof window<"u"?window:null}function yd(){return typeof document<"u"?document:null}function th(i){return new Vd(i,!0)}class ef{constructor(e,t,s=1e3,d=1.5,g=6e4){this.Ws=e,this.timerId=t,this._o=s,this.mo=d,this.yo=g,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),s=Math.max(0,Date.now()-this.To),d=Math.max(0,t-s);d>0&&Ft("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,d,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Wf{constructor(e,t,s,d,g,w,k,G){this.Ws=e,this.bo=s,this.Po=d,this.connection=g,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=k,this.listener=G,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new ef(e,t)}xo(){return 1===this.state||5===this.state||this.No()}No(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.ko()}stop(){var e=this;return(0,ue.Z)(function*(){e.xo()&&(yield e.close(0))})()}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(e){this.Bo(),this.stream.send(e)}Mo(){var e=this;return(0,ue.Z)(function*(){if(e.No())return e.close(0)})()}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}close(e,t){var s=this;return(0,ue.Z)(function*(){s.Bo(),s.Lo(),s.Co.cancel(),s.Vo++,4!==e?s.Co.reset():t&&t.code===At.RESOURCE_EXHAUSTED?(lr(t.toString()),lr("Using maximum backoff delay to prevent overloading the backend."),s.Co.Eo()):t&&t.code===At.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.qo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,d])=>{this.Vo===t&&this.Ko(s,d)},s=>{e(()=>{const d=new Wt(At.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Go(d)})})}Ko(e,t){const s=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr(()=>{s(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(d=>{s(()=>this.Go(d))}),this.stream.onMessage(d=>{s(()=>this.onMessage(d))})}ko(){var e=this;this.state=5,this.Co.Ao((0,ue.Z)(function*(){e.state=0,e.start()}))}Go(e){return Ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Ws.enqueueAndForget(()=>this.Vo===e?t():(Ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lp extends Wf{constructor(e,t,s,d,g,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,d,w),this.serializer=g}Qo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.Co.reset();const t=function kh(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:hn(),d=e.targetChange.targetIds||[],g=function(G,Q){return G.useProto3Json?(yn(void 0===Q||"string"==typeof Q),Yn.fromBase64String(Q||"")):(yn(void 0===Q||Q instanceof Uint8Array),Yn.fromUint8Array(Q||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,k=w&&function(G){const Q=void 0===G.code?At.UNKNOWN:x(G.code);return new Wt(Q,G.message||"")}(w);t=new rr(s,d,g,k||null)}else if("documentChange"in e){const s=e.documentChange,d=Pa(i,s.document.name),g=ls(s.document.updateTime),w=s.document.createTime?ls(s.document.createTime):Xn.min(),k=new Ki({mapValue:{fields:s.document.fields}}),G=Ji.newFoundDocument(d,g,w,k);t=new bn(s.targetIds||[],s.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const s=e.documentDelete,d=Pa(i,s.document),g=s.readTime?ls(s.readTime):Xn.min(),w=Ji.newNoDocument(d,g);t=new bn([],s.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const s=e.documentRemove,d=Pa(i,s.document);t=new bn([],s.removedTargetIds||[],d,null)}else{if(!("filter"in e))return hn();{const s=e.filter,g=new bg(s.count||0);t=new Gn(s.targetId,g)}}var G;return t}(this.serializer,e),s=function(d){if(!("targetChange"in d))return Xn.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?Xn.min():g.readTime?ls(g.readTime):Xn.min()}(e);return this.listener.zo(t,s)}jo(e){const t={};t.database=Ph(this.serializer),t.addTarget=function(d,g){let w;const k=g.target;return w=cu(k)?{documents:Nh(d,k)}:{query:Df(d,k)},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?w.resumeToken=Mh(d,g.resumeToken):g.snapshotVersion.compareTo(Xn.min())>0&&(w.readTime=xl(d,g.snapshotVersion.toTimestamp())),w}(this.serializer,e);const s=function Tf(i,e){const t=function(s,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Fo(t)}Wo(e){const t={};t.database=Ph(this.serializer),t.removeTarget=e,this.Fo(t)}}class jg extends Wf{constructor(e,t,s,d,g,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,d,w),this.serializer=g,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(yn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();const t=function Um(i,e){return i&&i.length>0?(yn(void 0!==e),i.map(t=>function(s,d){let g=ls(s.updateTime?s.updateTime:d);return g.isEqual(Xn.min())&&(g=ls(d)),new zu(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=ls(e.commitTime);return this.listener.Zo(s,t)}return yn(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}tu(){const e={};e.database=Ph(this.serializer),this.Fo(e)}Yo(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>jd(this.serializer,s))};this.Fo(t)}}class Bp extends class{}{constructor(e,t,s,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=d,this.eu=!1}nu(){if(this.eu)throw new Wt(At.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,s){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.co(e,t,s,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Wt(At.UNKNOWN,d.toString())})}fo(e,t,s,d){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.fo(e,t,s,g,w,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===At.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Wt(At.UNKNOWN,g.toString())})}terminate(){this.eu=!0}}class Pl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.uu("Offline")))}set(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}uu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}cu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(lr(t),this.ru=!1):Ft("OnlineStateTracker",t)}hu(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}class Km{constructor(e,t,s,d,g){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=g,this._u.qr(k=>{s.enqueueAndForget((0,ue.Z)(function*(){var G;Qu(w)&&(Ft("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,ue.Z)(function*(Q){const pe=on(Q);pe.du.add(4),yield nh(pe),pe.mu.set("Unknown"),pe.du.delete(4),yield kc(pe)}),function(Q){return G.apply(this,arguments)})(w))}))}),this.mu=new Pl(s,d)}}function kc(i){return tf.apply(this,arguments)}function tf(){return tf=(0,ue.Z)(function*(i){if(Qu(i))for(const e of i.wu)yield e(!0)}),tf.apply(this,arguments)}function nh(i){return qf.apply(this,arguments)}function qf(){return qf=(0,ue.Z)(function*(i){for(const e of i.wu)yield e(!1)}),qf.apply(this,arguments)}function Ia(i,e){const t=on(i);t.fu.has(e.targetId)||(t.fu.set(e.targetId,e),Yf(t)?ih(t):vd(t).No()&&Up(t,e))}function rh(i,e){const t=on(i),s=vd(t);t.fu.delete(e),s.No()&&Zm(t,e),0===t.fu.size&&(s.No()?s.$o():Qu(t)&&t.mu.set("Unknown"))}function Up(i,e){i.gu.Ot(e.targetId),vd(i).jo(e)}function Zm(i,e){i.gu.Ot(e),vd(i).Wo(e)}function ih(i){i.gu=new qs({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>i.fu.get(e)||null}),vd(i).start(),i.mu.ou()}function Yf(i){return Qu(i)&&!vd(i).xo()&&i.fu.size>0}function Qu(i){return 0===on(i).du.size}function Xm(i){i.gu=void 0}function Hg(i){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,ue.Z)(function*(i){i.fu.forEach((e,t)=>{Up(i,e)})}),Kf.apply(this,arguments)}function Qm(i,e){return Vp.apply(this,arguments)}function Vp(){return Vp=(0,ue.Z)(function*(i,e){Xm(i),Yf(i)?(i.mu.au(e),ih(i)):i.mu.set("Unknown")}),Vp.apply(this,arguments)}function jp(i,e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,ue.Z)(function*(i,e,t){if(i.mu.set("Online"),e instanceof rr&&2===e.state&&e.cause)try{yield(s=(0,ue.Z)(function*(d,g){const w=g.cause;for(const k of g.targetIds)d.fu.has(k)&&(yield d.remoteSyncer.rejectListen(k,w),d.fu.delete(k),d.gu.removeTarget(k))}),function(d,g){return s.apply(this,arguments)})(i,e)}catch(s){Ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Zf(i,s)}else if(e instanceof bn?i.gu.Kt(e):e instanceof Gn?i.gu.Jt(e):i.gu.zt(e),!t.isEqual(Xn.min()))try{const s=yield $f(i.localStore);t.compareTo(s)>=0&&(yield function(d,g){const w=d.gu.Xt(g);return w.targetChanges.forEach((k,G)=>{if(k.resumeToken.approximateByteSize()>0){const Q=d.fu.get(G);Q&&d.fu.set(G,Q.withResumeToken(k.resumeToken,g))}}),w.targetMismatches.forEach(k=>{const G=d.fu.get(k);if(!G)return;d.fu.set(k,G.withResumeToken(Yn.EMPTY_BYTE_STRING,G.snapshotVersion)),Zm(d,k);const Q=new ql(G.target,k,1,G.sequenceNumber);Up(d,Q)}),d.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(s){Ft("RemoteStore","Failed to raise snapshot:",s),yield Zf(i,s)}var s}),Hp.apply(this,arguments)}function Zf(i,e,t){return zp.apply(this,arguments)}function zp(){return zp=(0,ue.Z)(function*(i,e,t){if(!rl(e))throw e;i.du.add(1),yield nh(i),i.mu.set("Offline"),t||(t=()=>$f(i.localStore)),i.asyncQueue.enqueueRetryable((0,ue.Z)(function*(){Ft("RemoteStore","Retrying IndexedDB access"),yield t(),i.du.delete(1),yield kc(i)}))}),zp.apply(this,arguments)}function zg(i,e){return e().catch(t=>Zf(i,t,e))}function sh(i){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,ue.Z)(function*(i){const e=on(i),t=ec(e);let s=e.lu.length>0?e.lu[e.lu.length-1].batchId:-1;for(;Gg(e);)try{const d=yield Yh(e.localStore,s);if(null===d){0===e.lu.length&&t.$o();break}s=d.batchId,Jm(e,d)}catch(d){yield Zf(e,d)}Wg(e)&&Gp(e)}),Ql.apply(this,arguments)}function Gg(i){return Qu(i)&&i.lu.length<10}function Jm(i,e){i.lu.push(e);const t=ec(i);t.No()&&t.Jo&&t.Yo(e.mutations)}function Wg(i){return Qu(i)&&!ec(i).xo()&&i.lu.length>0}function Gp(i){ec(i).start()}function qg(i){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,ue.Z)(function*(i){ec(i).tu()}),Wp.apply(this,arguments)}function ey(i){return nf.apply(this,arguments)}function nf(){return nf=(0,ue.Z)(function*(i){const e=ec(i);for(const t of i.lu)e.Yo(t.mutations)}),nf.apply(this,arguments)}function ty(i,e,t){return bu.apply(this,arguments)}function bu(){return bu=(0,ue.Z)(function*(i,e,t){const s=i.lu.shift(),d=$d.from(s,e,t);yield zg(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield sh(i)}),bu.apply(this,arguments)}function _o(i,e){return ra.apply(this,arguments)}function ra(){return ra=(0,ue.Z)(function*(i,e){var t;e&&ec(i).Jo&&(yield(t=(0,ue.Z)(function*(s,d){if(y(g=d.code)&&g!==At.ABORTED){const w=s.lu.shift();ec(s).Oo(),yield zg(s,()=>s.remoteSyncer.rejectFailedWrite(w.batchId,d)),yield sh(s)}var g}),function(s,d){return t.apply(this,arguments)})(i,e)),Wg(i)&&Gp(i)}),ra.apply(this,arguments)}function Ju(i,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,ue.Z)(function*(i,e){const t=on(i);t.asyncQueue.verifyOperationInProgress(),Ft("RemoteStore","RemoteStore received new credentials");const s=Qu(t);t.du.add(3),yield nh(t),s&&t.mu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.du.delete(3),yield kc(t)}),Yg.apply(this,arguments)}function rf(i,e){return Kg.apply(this,arguments)}function Kg(){return Kg=(0,ue.Z)(function*(i,e){const t=on(i);e?(t.du.delete(2),yield kc(t)):e||(t.du.add(2),yield nh(t),t.mu.set("Unknown"))}),Kg.apply(this,arguments)}function vd(i){return i.yu||(i.yu=function(e,t,s){const d=on(e);return d.nu(),new Lp(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,s)}(i.datastore,i.asyncQueue,{Jr:Hg.bind(null,i),Zr:Qm.bind(null,i),zo:jp.bind(null,i)}),i.wu.push(function(){var e=(0,ue.Z)(function*(t){t?(i.yu.Oo(),Yf(i)?ih(i):i.mu.set("Unknown")):(yield i.yu.stop(),Xm(i))});return function(t){return e.apply(this,arguments)}}())),i.yu}function ec(i){return i.pu||(i.pu=function(e,t,s){const d=on(e);return d.nu(),new jg(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,s)}(i.datastore,i.asyncQueue,{Jr:qg.bind(null,i),Zr:_o.bind(null,i),Xo:ey.bind(null,i),Zo:ty.bind(null,i)}),i.wu.push(function(){var e=(0,ue.Z)(function*(t){t?(i.pu.Oo(),yield sh(i)):(yield i.pu.stop(),i.lu.length>0&&(Ft("RemoteStore",`Stopping write stream with ${i.lu.length} pending writes`),i.lu=[]))});return function(t){return e.apply(this,arguments)}}())),i.pu}class Xf{constructor(e,t,s,d,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=d,this.removalCallback=g,this.deferred=new Ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,s,d,g){const w=Date.now()+s,k=new Xf(e,t,w,d,g);return k.start(s),k}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wt(At.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nc(i,e){if(lr("AsyncQueue",`${e}: ${i}`),rl(i))return new Wt(At.UNAVAILABLE,`${e}: ${i}`);throw i}class tc{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Sn.comparator(t.key,s.key):(t,s)=>Sn.comparator(t.key,s.key),this.keyedMap=fu(),this.sortedSet=new re(this.comparator)}static emptySet(e){return new tc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new tc;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Jl{constructor(){this.Iu=new re(Sn.comparator)}track(e){const t=e.doc.key,s=this.Iu.get(t);s?0!==e.type&&3===s.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==s.type?this.Iu=this.Iu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.Iu=this.Iu.remove(t):1===e.type&&2===s.type?this.Iu=this.Iu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):hn():this.Iu=this.Iu.insert(t,e)}Tu(){const e=[];return this.Iu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Cu{constructor(e,t,s,d,g,w,k,G,Q){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=d,this.mutatedKeys=g,this.fromCache=w,this.syncStateChanged=k,this.excludesMetadataChanges=G,this.hasCachedResults=Q}static fromInitialDocuments(e,t,s,d,g){const w=[];return t.forEach(k=>{w.push({type:0,doc:k})}),new Cu(e,t,tc.emptySet(t),w,s,d,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==s[d].type||!t[d].doc.isEqual(s[d].doc))return!1;return!0}}class Fc{constructor(){this.Eu=void 0,this.listeners=[]}}class sf{constructor(){this.queries=new hu(e=>gc(e),Kc),this.onlineState="Unknown",this.Au=new Set}}function Qf(i,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ue.Z)(function*(i,e){const t=on(i),s=e.query;let d=!1,g=t.queries.get(s);if(g||(d=!0,g=new Fc),d)try{g.Eu=yield t.onListen(s)}catch(w){const k=Nc(w,`Initialization of query '${Tl(e.query)}' failed`);return void e.onError(k)}t.queries.set(s,g),g.listeners.push(e),e.Ru(t.onlineState),g.Eu&&e.vu(g.Eu)&&qp(t)}),Jf.apply(this,arguments)}function ep(i,e){return tp.apply(this,arguments)}function tp(){return tp=(0,ue.Z)(function*(i,e){const t=on(i),s=e.query;let d=!1;const g=t.queries.get(s);if(g){const w=g.listeners.indexOf(e);w>=0&&(g.listeners.splice(w,1),d=0===g.listeners.length)}if(d)return t.queries.delete(s),t.onUnlisten(s)}),tp.apply(this,arguments)}function Zg(i,e){const t=on(i);let s=!1;for(const d of e){const w=t.queries.get(d.query);if(w){for(const k of w.listeners)k.vu(d)&&(s=!0);w.Eu=d}}s&&qp(t)}function oh(i,e,t){const s=on(i),d=s.queries.get(e);if(d)for(const g of d.listeners)g.onError(t);s.queries.delete(e)}function qp(i){i.Au.forEach(e=>{e.next()})}class Xg{constructor(e,t,s){this.query=e,this.bu=t,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=s||{}}vu(e){if(!this.options.includeMetadataChanges){const s=[];for(const d of e.docChanges)3!==d.type&&s.push(d);e=new Cu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),t=!0):this.Du(e,this.onlineState)&&(this.Cu(e),t=!0),this.Vu=e,t}onError(e){this.bu.error(e)}Ru(e){this.onlineState=e;let t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}Du(e,t){return!e.fromCache||(!this.options.xu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Su(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Cu(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}class ny{constructor(e,t){this.Nu=e,this.byteLength=t}ku(){return"metadata"in this.Nu}}class Yp{constructor(e){this.serializer=e}Hi(e){return Pa(this.serializer,e)}Ji(e){return e.metadata.exists?uo(this.serializer,e.document,!1):Ji.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}Yi(e){return ls(e)}}class ry{constructor(e,t,s){this.Ou=e,this.localStore=t,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Qg(e)}$u(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;const s=jr.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,s=new Yp(this.serializer);for(const d of e)if(d.metadata.queries){const g=s.Hi(d.metadata.name);for(const w of d.metadata.queries){const k=(t.get(w)||mr()).add(g);t.set(w,k)}}return t}complete(){var e=this;return(0,ue.Z)(function*(){const t=yield function Kh(i,e,t,s){return Qd.apply(this,arguments)}(e.localStore,new Yp(e.serializer),e.documents,e.Ou.id),s=e.Mu(e.documents);for(const d of e.queries)yield Zh(e.localStore,d,s.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Fu:e.collectionGroups,Bu:t}})()}}function Qg(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Kp{constructor(e){this.key=e}}class Jg{constructor(e){this.key=e}}class em{constructor(e,t){this.query=e,this.Lu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=mr(),this.mutatedKeys=mr(),this.Ku=Va(e),this.Gu=new tc(this.Ku)}get Qu(){return this.Lu}zu(e,t){const s=t?t.ju:new Jl,d=t?t.Gu:this.Gu;let g=t?t.mutatedKeys:this.mutatedKeys,w=d,k=!1;const G="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,Q="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((pe,Ze)=>{const Tt=d.get(pe),Yt=du(this.query,Ze)?Ze:null,gn=!!Tt&&this.mutatedKeys.has(Tt.key),zn=!!Yt&&(Yt.hasLocalMutations||this.mutatedKeys.has(Yt.key)&&Yt.hasCommittedMutations);let cr=!1;Tt&&Yt?Tt.data.isEqual(Yt.data)?gn!==zn&&(s.track({type:3,doc:Yt}),cr=!0):this.Wu(Tt,Yt)||(s.track({type:2,doc:Yt}),cr=!0,(G&&this.Ku(Yt,G)>0||Q&&this.Ku(Yt,Q)<0)&&(k=!0)):!Tt&&Yt?(s.track({type:0,doc:Yt}),cr=!0):Tt&&!Yt&&(s.track({type:1,doc:Tt}),cr=!0,(G||Q)&&(k=!0)),cr&&(Yt?(w=w.add(Yt),g=zn?g.add(pe):g.delete(pe)):(w=w.delete(pe),g=g.delete(pe)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const pe="F"===this.query.limitType?w.last():w.first();w=w.delete(pe.key),g=g.delete(pe.key),s.track({type:1,doc:pe})}return{Gu:w,ju:s,Mi:k,mutatedKeys:g}}Wu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const d=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const g=e.ju.Tu();g.sort((Q,pe)=>function(Ze,Tt){const Yt=gn=>{switch(gn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hn()}};return Yt(Ze)-Yt(Tt)}(Q.type,pe.type)||this.Ku(Q.doc,pe.doc)),this.Hu(s);const w=t?this.Ju():[],k=0===this.Uu.size&&this.current?1:0,G=k!==this.qu;return this.qu=k,0!==g.length||G?{snapshot:new Cu(this.query,e.Gu,d,g,e.mutatedKeys,0===k,G,!1,!!s&&s.resumeToken.approximateByteSize()>0),Yu:w}:{Yu:w}}Ru(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new Jl,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.Uu;this.Uu=mr(),this.Gu.forEach(s=>{this.Zu(s.key)&&(this.Uu=this.Uu.add(s.key))});const t=[];return e.forEach(s=>{this.Uu.has(s)||t.push(new Jg(s))}),this.Uu.forEach(s=>{e.has(s)||t.push(new Kp(s))}),t}Xu(e){this.Lu=e.Wi,this.Uu=mr();const t=this.zu(e.documents);return this.applyChanges(t,!0)}tc(){return Cu.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class tm{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Zp{constructor(e){this.key=e,this.ec=!1}}class iy{constructor(e,t,s,d,g,w){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=w,this.nc={},this.sc=new hu(k=>gc(k),Kc),this.ic=new Map,this.rc=new Set,this.oc=new re(Sn.comparator),this.uc=new Map,this.cc=new Nr,this.ac={},this.hc=new Map,this.lc=_a.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function Xp(i,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ue.Z)(function*(i,e){const t=ly(i);let s,d;const g=t.sc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),d=g.view.tc();else{const w=yield Xd(t.localStore,ea(e));t.isPrimaryClient&&Ia(t.remoteStore,w);const k=t.sharedClientState.addLocalQueryTarget(w.targetId);s=w.targetId,d=yield u(t,e,s,"current"===k,w.resumeToken)}return d}),Qp.apply(this,arguments)}function u(i,e,t,s,d){return a.apply(this,arguments)}function a(){return a=(0,ue.Z)(function*(i,e,t,s,d){i.dc=(Ze,Tt,Yt)=>{return(gn=(0,ue.Z)(function*(zn,cr,Bi,Ls){let ci=cr.view.zu(Bi);ci.Mi&&(ci=yield Uf(zn.localStore,cr.query,!1).then(({documents:$s})=>cr.view.zu($s,ci)));const wa=Ls&&Ls.targetChanges.get(cr.targetId),Bs=cr.view.applyChanges(ci,zn.isPrimaryClient,wa);return eu(zn,cr.targetId,Bs.Yu),Bs.snapshot}),function(zn,cr,Bi,Ls){return gn.apply(this,arguments)})(i,Ze,Tt,Yt);var gn};const g=yield Uf(i.localStore,e,!0),w=new em(e,g.Wi),k=w.zu(g.documents),G=Ut.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState,d),Q=w.applyChanges(k,i.isPrimaryClient,G);eu(i,t,Q.Yu);const pe=new tm(e,t,w);return i.sc.set(e,pe),i.ic.has(t)?i.ic.get(t).push(e):i.ic.set(t,[e]),Q.snapshot}),a.apply(this,arguments)}function l(i,e){return f.apply(this,arguments)}function f(){return f=(0,ue.Z)(function*(i,e){const t=on(i),s=t.sc.get(e),d=t.ic.get(s.targetId);if(d.length>1)return t.ic.set(s.targetId,d.filter(g=>!Kc(g,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield gd(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),rh(t.remoteStore,s.targetId),Wr(t,s.targetId)}).catch(ms))):(Wr(t,s.targetId),yield gd(t.localStore,s.targetId,!0))}),f.apply(this,arguments)}function M(){return M=(0,ue.Z)(function*(i,e,t){const s=om(i);try{const d=yield function(g,w){const k=on(g),G=Ii.now(),Q=w.reduce((Tt,Yt)=>Tt.add(Yt.key),mr());let pe,Ze;return k.persistence.runTransaction("Locally write mutations","readwrite",Tt=>{let Yt=Hi(),gn=mr();return k.Ki.getEntries(Tt,Q).next(zn=>{Yt=zn,Yt.forEach((cr,Bi)=>{Bi.isValidDocument()||(gn=gn.add(cr))})}).next(()=>k.localDocuments.getOverlayedDocuments(Tt,Yt)).next(zn=>{pe=zn;const cr=[];for(const Bi of w){const Ls=Ef(Bi,pe.get(Bi.key).overlayedDocument);null!=Ls&&cr.push(new Ga(Bi.key,Ls,Ad(Ls.value.mapValue),zi.exists(!0)))}return k.mutationQueue.addMutationBatch(Tt,G,cr,w)}).next(zn=>{Ze=zn;const cr=zn.applyToLocalDocumentSet(pe,gn);return k.documentOverlayCache.saveOverlays(Tt,zn.batchId,cr)})}).then(()=>({batchId:Ze.batchId,changes:Pd(pe)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(d.batchId),function(g,w,k){let G=g.ac[g.currentUser.toKey()];G||(G=new re(pr)),G=G.insert(w,k),g.ac[g.currentUser.toKey()]=G}(s,d.batchId,t),yield $o(s,d.changes),yield sh(s.remoteStore)}catch(d){const g=Nc(d,"Failed to persist write");t.reject(g)}}),M.apply(this,arguments)}function U(i,e){return ee.apply(this,arguments)}function ee(){return ee=(0,ue.Z)(function*(i,e){const t=on(i);try{const s=yield function qm(i,e){const t=on(i),s=e.snapshotVersion;let d=t.Li;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const w=t.Ki.newChangeBuffer({trackRemovals:!0});d=t.Li;const k=[];e.targetChanges.forEach((pe,Ze)=>{const Tt=d.get(Ze);if(!Tt)return;k.push(t.Ds.removeMatchingKeys(g,pe.removedDocuments,Ze).next(()=>t.Ds.addMatchingKeys(g,pe.addedDocuments,Ze)));let Yt=Tt.withSequenceNumber(g.currentSequenceNumber);var gn,zn,cr;e.targetMismatches.has(Ze)?Yt=Yt.withResumeToken(Yn.EMPTY_BYTE_STRING,Xn.min()).withLastLimboFreeSnapshotVersion(Xn.min()):pe.resumeToken.approximateByteSize()>0&&(Yt=Yt.withResumeToken(pe.resumeToken,s)),d=d.insert(Ze,Yt),zn=Yt,cr=pe,(0===(gn=Tt).resumeToken.approximateByteSize()||zn.snapshotVersion.toMicroseconds()-gn.snapshotVersion.toMicroseconds()>=3e8||cr.addedDocuments.size+cr.modifiedDocuments.size+cr.removedDocuments.size>0)&&k.push(t.Ds.updateTargetData(g,Yt))});let G=Hi(),Q=mr();if(e.documentUpdates.forEach(pe=>{e.resolvedLimboDocuments.has(pe)&&k.push(t.persistence.referenceDelegate.updateLimboDocument(g,pe))}),k.push(Rc(g,w,e.documentUpdates).next(pe=>{G=pe.zi,Q=pe.ji})),!s.isEqual(Xn.min())){const pe=t.Ds.getLastRemoteSnapshotVersion(g).next(Ze=>t.Ds.setTargetsMetadata(g,g.currentSequenceNumber,s));k.push(pe)}return Rt.waitFor(k).next(()=>w.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,G,Q)).next(()=>G)}).then(g=>(t.Li=d,g))}(t.localStore,e);e.targetChanges.forEach((d,g)=>{const w=t.uc.get(g);w&&(yn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?w.ec=!0:d.modifiedDocuments.size>0?yn(w.ec):d.removedDocuments.size>0&&(yn(w.ec),w.ec=!1))}),yield $o(t,s,e)}catch(s){yield ms(s)}}),ee.apply(this,arguments)}function he(i,e,t){const s=on(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const d=[];s.sc.forEach((g,w)=>{const k=w.view.Ru(e);k.snapshot&&d.push(k.snapshot)}),function(g,w){const k=on(g);k.onlineState=w;let G=!1;k.queries.forEach((Q,pe)=>{for(const Ze of pe.listeners)Ze.Ru(w)&&(G=!0)}),G&&qp(k)}(s.eventManager,e),d.length&&s.nc.zo(d),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Se(i,e,t){return wt.apply(this,arguments)}function wt(){return wt=(0,ue.Z)(function*(i,e,t){const s=on(i);s.sharedClientState.updateQueryState(e,"rejected",t);const d=s.uc.get(e),g=d&&d.key;if(g){let w=new re(Sn.comparator);w=w.insert(g,Ji.newNoDocument(g,Xn.min()));const k=mr().add(g),G=new pt(Xn.min(),new Map,new ft(pr),w,k);yield U(s,G),s.oc=s.oc.remove(g),s.uc.delete(e),_d(s)}else yield gd(s.localStore,e,!1).then(()=>Wr(s,e,t)).catch(ms)}),wt.apply(this,arguments)}function Ot(i,e){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,ue.Z)(function*(i,e){const t=on(i),s=e.batch.batchId;try{const d=yield function pd(i,e){const t=on(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const d=e.batch.keys(),g=t.Ki.newChangeBuffer({trackRemovals:!0});return function(w,k,G,Q){const pe=G.batch,Ze=pe.keys();let Tt=Rt.resolve();return Ze.forEach(Yt=>{Tt=Tt.next(()=>Q.getEntry(k,Yt)).next(gn=>{const zn=G.docVersions.get(Yt);yn(null!==zn),gn.version.compareTo(zn)<0&&(pe.applyToRemoteDocument(gn,G),gn.isValidDocument()&&(gn.setReadTime(G.commitVersion),Q.addEntry(gn)))})}),Tt.next(()=>w.mutationQueue.removeMutationBatch(k,pe))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let k=mr();for(let G=0;G<w.mutationResults.length;++G)w.mutationResults[G].transformResults.length>0&&(k=k.add(w.batch.mutations[G].key));return k}(e))).next(()=>t.localDocuments.getDocuments(s,d))})}(t.localStore,e);Ts(t,s,null),Li(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield $o(t,d)}catch(d){yield ms(d)}}),Bt.apply(this,arguments)}function pn(i,e,t){return kn.apply(this,arguments)}function kn(){return kn=(0,ue.Z)(function*(i,e,t){const s=on(i);try{const d=yield function(g,w){const k=on(g);return k.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Q;return k.mutationQueue.lookupMutationBatch(G,w).next(pe=>(yn(null!==pe),Q=pe.keys(),k.mutationQueue.removeMutationBatch(G,pe))).next(()=>k.mutationQueue.performConsistencyCheck(G)).next(()=>k.documentOverlayCache.removeOverlaysForBatchId(G,Q,w)).next(()=>k.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Q)).next(()=>k.localDocuments.getDocuments(G,Q))})}(s.localStore,e);Ts(s,e,t),Li(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield $o(s,d)}catch(d){yield ms(d)}}),kn.apply(this,arguments)}function Xr(){return Xr=(0,ue.Z)(function*(i,e){const t=on(i);Qu(t.remoteStore)||Ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=on(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",k=>w.mutationQueue.getHighestUnacknowledgedBatchId(k))}(t.localStore);if(-1===s)return void e.resolve();const d=t.hc.get(s)||[];d.push(e),t.hc.set(s,d)}catch(s){const d=Nc(s,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Xr.apply(this,arguments)}function Li(i,e){(i.hc.get(e)||[]).forEach(t=>{t.resolve()}),i.hc.delete(e)}function Ts(i,e,t){const s=on(i);let d=s.ac[s.currentUser.toKey()];if(d){const g=d.get(e);g&&(t?g.reject(t):g.resolve(),d=d.remove(e)),s.ac[s.currentUser.toKey()]=d}}function Wr(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ic.get(e))i.sc.delete(s),t&&i.nc.wc(s,t);i.ic.delete(e),i.isPrimaryClient&&i.cc.hs(e).forEach(s=>{i.cc.containsKey(s)||_s(i,s)})}function _s(i,e){i.rc.delete(e.path.canonicalString());const t=i.oc.get(e);null!==t&&(rh(i.remoteStore,t),i.oc=i.oc.remove(e),i.uc.delete(t),_d(i))}function eu(i,e,t){for(const s of t)s instanceof Kp?(i.cc.addReference(s.key,e),ia(i,s)):s instanceof Jg?(Ft("SyncEngine","Document no longer in limbo: "+s.key),i.cc.removeReference(s.key,e),i.cc.containsKey(s.key)||_s(i,s.key)):hn()}function ia(i,e){const t=e.key,s=t.path.canonicalString();i.oc.get(t)||i.rc.has(s)||(Ft("SyncEngine","New document in limbo: "+t),i.rc.add(s),_d(i))}function _d(i){for(;i.rc.size>0&&i.oc.size<i.maxConcurrentLimboResolutions;){const e=i.rc.values().next().value;i.rc.delete(e);const t=new Sn(jr.fromString(e)),s=i.lc.next();i.uc.set(s,new Zp(t)),i.oc=i.oc.insert(t,s),Ia(i.remoteStore,new ql(ea(ma(t.path)),s,2,eo.ct))}}function $o(i,e,t){return Du.apply(this,arguments)}function Du(){return Du=(0,ue.Z)(function*(i,e,t){const s=on(i),d=[],g=[],w=[];var k;s.sc.isEmpty()||(s.sc.forEach((k,G)=>{w.push(s.dc(G,e,t).then(Q=>{if((Q||t)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,null!=Q&&Q.fromCache?"not-current":"current"),Q){d.push(Q);const pe=Zd.Di(G.targetId,Q);g.push(pe)}}))}),yield Promise.all(w),s.nc.zo(d),yield(k=(0,ue.Z)(function*(G,Q){const pe=on(G);try{yield pe.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ze=>Rt.forEach(Q,Tt=>Rt.forEach(Tt.Vi,Yt=>pe.persistence.referenceDelegate.addReference(Ze,Tt.targetId,Yt)).next(()=>Rt.forEach(Tt.Si,Yt=>pe.persistence.referenceDelegate.removeReference(Ze,Tt.targetId,Yt)))))}catch(Ze){if(!rl(Ze))throw Ze;Ft("LocalStore","Failed to update sequence numbers: "+Ze)}for(const Ze of Q){const Tt=Ze.targetId;if(!Ze.fromCache){const Yt=pe.Li.get(Tt),zn=Yt.withLastLimboFreeSnapshotVersion(Yt.snapshotVersion);pe.Li=pe.Li.insert(Tt,zn)}}}),function(G,Q){return k.apply(this,arguments)})(s.localStore,g))}),Du.apply(this,arguments)}function np(i,e){return ah.apply(this,arguments)}function ah(){return ah=(0,ue.Z)(function*(i,e){const t=on(i);if(!t.currentUser.isEqual(e)){Ft("SyncEngine","User change. New user:",e.toKey());const s=yield Bf(t.localStore,e);t.currentUser=e,(d=t).hc.forEach(w=>{w.forEach(k=>{k.reject(new Wt(At.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.hc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield $o(t,s.Qi)}var d}),ah.apply(this,arguments)}function rp(i,e){const t=on(i),s=t.uc.get(e);if(s&&s.ec)return mr().add(s.key);{let d=mr();const g=t.ic.get(e);if(!g)return d;for(const w of g){const k=t.sc.get(w);d=d.unionWith(k.view.Qu)}return d}}function ip(i,e){return lh.apply(this,arguments)}function lh(){return lh=(0,ue.Z)(function*(i,e){const t=on(i),s=yield Uf(t.localStore,e.query,!0),d=e.view.Xu(s);return t.isPrimaryClient&&eu(t,e.targetId,d.Yu),d}),lh.apply(this,arguments)}function sp(i,e){return uh.apply(this,arguments)}function uh(){return uh=(0,ue.Z)(function*(i,e){const t=on(i);return Bg(t.localStore,e).then(s=>$o(t,s))}),uh.apply(this,arguments)}function Ky(i,e,t,s){return nm.apply(this,arguments)}function nm(){return nm=(0,ue.Z)(function*(i,e,t,s){const d=on(i),g=yield function(w,k){const G=on(w),Q=on(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",pe=>Q.In(pe,k).next(Ze=>Ze?G.localDocuments.getDocuments(pe,Ze):Rt.resolve(null)))}(d.localStore,e);var k;null!==g?("pending"===t?yield sh(d.remoteStore):"acknowledged"===t||"rejected"===t?(Ts(d,e,s||null),Li(d,e),k=e,on(on(d.localStore).mutationQueue).En(k)):hn(),yield $o(d,g)):Ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),nm.apply(this,arguments)}function rm(){return rm=(0,ue.Z)(function*(i,e){const t=on(i);if(ly(t),om(t),!0===e&&!0!==t.fc){const s=t.sharedClientState.getAllActiveQueryTargets(),d=yield sy(t,s.toArray());t.fc=!0,yield rf(t.remoteStore,!0);for(const g of d)Ia(t.remoteStore,g)}else if(!1===e&&!1!==t.fc){const s=[];let d=Promise.resolve();t.ic.forEach((g,w)=>{t.sharedClientState.isLocalQueryTarget(w)?s.push(w):d=d.then(()=>(Wr(t,w),gd(t.localStore,w,!0))),rh(t.remoteStore,w)}),yield d,yield sy(t,s),function(g){const w=on(g);w.uc.forEach((k,G)=>{rh(w.remoteStore,G)}),w.cc.ls(),w.uc=new Map,w.oc=new re(Sn.comparator)}(t),t.fc=!1,yield rf(t.remoteStore,!1)}}),rm.apply(this,arguments)}function sy(i,e,t){return im.apply(this,arguments)}function im(){return im=(0,ue.Z)(function*(i,e,t){const s=on(i),d=[],g=[];for(const w of e){let k;const G=s.ic.get(w);if(G&&0!==G.length){k=yield Xd(s.localStore,ea(G[0]));for(const Q of G){const pe=s.sc.get(Q),Ze=yield ip(s,pe);Ze.snapshot&&g.push(Ze.snapshot)}}else{const Q=yield Pp(s.localStore,w);k=yield Xd(s.localStore,Q),yield u(s,oy(Q),w,!1,k.resumeToken)}d.push(k)}return s.nc.zo(g),d}),im.apply(this,arguments)}function oy(i){return Yc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Xy(i){const e=on(i);return on(on(e.localStore).persistence).bi()}function Qy(i,e,t,s){return ay.apply(this,arguments)}function ay(){return ay=(0,ue.Z)(function*(i,e,t,s){const d=on(i);if(d.fc)return void Ft("SyncEngine","Ignoring unexpected query state notification.");const g=d.ic.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const w=yield Bg(d.localStore,mc(g[0])),k=pt.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Yn.EMPTY_BYTE_STRING);yield $o(d,w,k);break}case"rejected":yield gd(d.localStore,e,!0),Wr(d,e,s);break;default:hn()}}),ay.apply(this,arguments)}function s_(i,e,t){return sm.apply(this,arguments)}function sm(){return sm=(0,ue.Z)(function*(i,e,t){const s=ly(i);if(s.fc){for(const d of e){if(s.ic.has(d)){Ft("SyncEngine","Adding an already active target "+d);continue}const g=yield Pp(s.localStore,d),w=yield Xd(s.localStore,g);yield u(s,oy(g),w.targetId,!1,w.resumeToken),Ia(s.remoteStore,w)}for(const d of t)s.ic.has(d)&&(yield gd(s.localStore,d,!1).then(()=>{rh(s.remoteStore,d),Wr(s,d)}).catch(ms))}}),sm.apply(this,arguments)}function ly(i){const e=on(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=U.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Se.bind(null,e),e.nc.zo=Zg.bind(null,e.eventManager),e.nc.wc=oh.bind(null,e.eventManager),e}function om(i){const e=on(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ot.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pn.bind(null,e),e}class op{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ue.Z)(function*(){t.serializer=th(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Mc(this.persistence,new na,e.initialUser,this.serializer)}createPersistence(e){return new Gh(Wh.Fs,this.serializer)}createSharedClientState(e){return new kp}terminate(){var e=this;return(0,ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cy extends op{constructor(e,t,s){super(),this.mc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e),yield s.mc.initialize(s,e),yield om(s.mc.syncEngine),yield sh(s.mc.remoteStore),yield s.persistence.hi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Mc(this.persistence,new na,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Og(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const s=new Dd(t,this.persistence);return new xu(e.asyncQueue,s)}createPersistence(e){const t=qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?Oa.withCacheSize(this.cacheSizeBytes):Oa.DEFAULT;return new Ff(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Gf(),yd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new kp}}class Jp extends cy{constructor(e,t){super(e,t,!1),this.mc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,ue.Z)(function*(){yield t().call(s,e);const d=s.mc.syncEngine;s.sharedClientState instanceof Oc&&(s.sharedClientState.syncEngine={$r:Ky.bind(null,d),Mr:Qy.bind(null,d),Fr:s_.bind(null,d),bi:Xy.bind(null,d),Or:sp.bind(null,d)},yield s.sharedClientState.start()),yield s.persistence.hi(function(){var g=(0,ue.Z)(function*(w){yield function Zy(i,e){return rm.apply(this,arguments)}(s.mc.syncEngine,w),s.gcScheduler&&(w&&!s.gcScheduler.started?s.gcScheduler.start():w||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(w&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():w||s.indexBackfillerScheduler.stop())});return function(w){return g.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Gf();if(!Oc.D(t))throw new Wt(At.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=qh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oc(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ed{initialize(e,t){var s=this;return(0,ue.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=d=>he(s.syncEngine,d,1),s.remoteStore.remoteSyncer.handleCredentialChange=np.bind(null,s.syncEngine),yield rf(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new sf}createDatastore(e){const t=th(e.databaseInfo.databaseId),s=new Jh(e.databaseInfo);return new Bp(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,d=e.asyncQueue,g=k=>he(this.syncEngine,k,0),w=Np.D()?new Np:new Vg,new Km(t,s,d,g,w);var t,s,d,g,w}createSyncEngine(e,t){return function(s,d,g,w,k,G,Q){const pe=new iy(s,d,g,w,k,G);return Q&&(pe.fc=!0),pe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ue.Z)(function*(t){const s=on(t);Ft("RemoteStore","RemoteStore shutting down."),s.du.add(5),yield nh(s),s._u.shutdown(),s.mu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function am(i,e=10240){let t=0;return{read:()=>(0,ue.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.gc(this.observer.next,e)}error(e){this.observer.error?this.gc(this.observer.error,e):lr("Uncaught Error in snapshot listener:",e.toString())}yc(){this.muted=!0}gc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dy{constructor(e,t){this.Ic=e,this.serializer=t,this.metadata=new Ti,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then(s=>{s&&s.ku()?this.metadata.resolve(s.Nu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.Nu)}`))},s=>this.metadata.reject(s))}close(){return this.Ic.cancel()}getMetadata(){var e=this;return(0,ue.Z)(function*(){return e.metadata.promise})()}_c(){var e=this;return(0,ue.Z)(function*(){return yield e.getMetadata(),e.Ec()})()}Ec(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ac();if(null===t)return null;const s=e.Tc.decode(t),d=Number(s);isNaN(d)&&e.Rc(`length string (${s}) is not valid number`);const g=yield e.vc(d);return new ny(JSON.parse(g),t.length+d)})()}bc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ac(){var e=this;return(0,ue.Z)(function*(){for(;e.bc()<0&&!(yield e.Pc()););if(0===e.buffer.length)return null;const t=e.bc();t<0&&e.Rc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Pc())&&t.Rc("Reached the end of bundle when more is expected.");const s=t.Tc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Rc(e){throw this.Ic.cancel(),new Error(`Invalid bundle format: ${e}`)}Pc(){var e=this;return(0,ue.Z)(function*(){const t=yield e.Ic.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class hy{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Wt(At.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(d=(0,ue.Z)(function*(g,w){const k=on(g),G=Ph(k.serializer)+"/documents",Q={documents:w.map(Yt=>Ml(k.serializer,Yt))},pe=yield k.fo("BatchGetDocuments",G,Q,w.length),Ze=new Map;pe.forEach(Yt=>{const gn=function Ec(i,e){return"found"in e?function(t,s){yn(!!s.found);const d=Pa(t,s.found.name),g=ls(s.found.updateTime),w=s.found.createTime?ls(s.found.createTime):Xn.min(),k=new Ki({mapValue:{fields:s.found.fields}});return Ji.newFoundDocument(d,g,w,k)}(i,e):"missing"in e?function(t,s){yn(!!s.missing),yn(!!s.readTime);const d=Pa(t,s.missing),g=ls(s.readTime);return Ji.newNoDocument(d,g)}(i,e):hn()}(k.serializer,Yt);Ze.set(gn.key.toString(),gn)});const Tt=[];return w.forEach(Yt=>{const gn=Ze.get(Yt.toString());yn(!!gn),Tt.push(gn)}),Tt}),function(g,w){return d.apply(this,arguments)})(t.datastore,e);var d;return s.forEach(d=>t.recordVersion(d)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,d)=>{const g=Sn.fromPath(d);e.mutations.push(new Wu(g,e.precondition(g)))}),yield(s=(0,ue.Z)(function*(d,g){const w=on(d),k=Ph(w.serializer)+"/documents",G={writes:g.map(Q=>jd(w.serializer,Q))};yield w.co("Commit",k,G)}),function(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw hn();t=Xn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new Wt(At.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Xn.min())?zi.exists(!1):zi.updateTime(t):zi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xn.min()))throw new Wt(At.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zi.updateTime(t)}return zi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fy{constructor(e,t,s,d,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=d,this.deferred=g,this.Vc=s.maxAttempts,this.Co=new ef(this.asyncQueue,"transaction_retry")}run(){this.Vc-=1,this.Sc()}Sc(){var e=this;this.Co.Ao((0,ue.Z)(function*(){const t=new hy(e.datastore),s=e.Dc(t);s&&s.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.Cc(g)}))}).catch(d=>{e.Cc(d)})}))}Dc(e){try{const t=this.updateFunction(e);return!Bl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Cc(e){this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sc(),Promise.resolve()))):this.deferred.reject(e)}xc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!y(t)}return!1}}class Jy{constructor(e,t,s,d){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=d,this.user=be.UNAUTHENTICATED,this.clientId=Fa.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var w=(0,ue.Z)(function*(k){Ft("FirestoreClient","Received user=",k.uid),yield g.authCredentialListener(k),g.user=k});return function(k){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(s,w=>(Ft("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Wt(At.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const d=Nc(s,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function ap(i,e){return um.apply(this,arguments)}function um(){return um=(0,ue.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Ft("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,ue.Z)(function*(g){s.isEqual(g)||(yield Bf(e.localStore,g),s=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),um.apply(this,arguments)}function cm(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,ue.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield gy(i);Ft("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(d=>Ju(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,g)=>Ju(e.remoteStore,g)),i._onlineComponents=e}),eg.apply(this,arguments)}function py(i){return"FirebaseError"===i.name?i.code===At.FAILED_PRECONDITION||i.code===At.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function gy(i){return dm.apply(this,arguments)}function dm(){return dm=(0,ue.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Ft("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ap(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!py(t))throw t;Zn("Error using user provided cache. Falling back to memory cache: "+t),yield ap(i,new op)}}else Ft("FirestoreClient","Using default OfflineComponentProvider"),yield ap(i,new op);return i._offlineComponents}),dm.apply(this,arguments)}function tg(i){return hm.apply(this,arguments)}function hm(){return hm=(0,ue.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Ft("FirestoreClient","Using user provided OnlineComponentProvider"),yield cm(i,i._uninitializedComponentsProvider._online)):(Ft("FirestoreClient","Using default OnlineComponentProvider"),yield cm(i,new Ed))),i._onlineComponents}),hm.apply(this,arguments)}function my(i){return gy(i).then(e=>e.persistence)}function fm(i){return gy(i).then(e=>e.localStore)}function pm(i){return tg(i).then(e=>e.remoteStore)}function gm(i){return tg(i).then(e=>e.syncEngine)}function ch(i){return mm.apply(this,arguments)}function mm(){return mm=(0,ue.Z)(function*(i){const e=yield tg(i),t=e.eventManager;return t.onListen=Xp.bind(null,e.syncEngine),t.onUnlisten=l.bind(null,e.syncEngine),t}),mm.apply(this,arguments)}function vy(i,e,t={}){const s=new Ti;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(d,g,w,k,G){const Q=new lm({next:Ze=>{g.enqueueAndForget(()=>ep(d,pe));const Tt=Ze.docs.has(w);!Tt&&Ze.fromCache?G.reject(new Wt(At.UNAVAILABLE,"Failed to get document because the client is offline.")):Tt&&Ze.fromCache&&k&&"server"===k.source?G.reject(new Wt(At.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Ze)},error:Ze=>G.reject(Ze)}),pe=new Xg(ma(w.path),Q,{includeMetadataChanges:!0,xu:!0});return Qf(d,pe)}(yield ch(i),i.asyncQueue,e,t,s)})),s.promise}function _y(i,e,t={}){const s=new Ti;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function(d,g,w,k,G){const Q=new lm({next:Ze=>{g.enqueueAndForget(()=>ep(d,pe)),Ze.fromCache&&"server"===k.source?G.reject(new Wt(At.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Ze)},error:Ze=>G.reject(Ze)}),pe=new Xg(w,Q,{includeMetadataChanges:!0,xu:!0});return Qf(d,pe)}(yield ch(i),i.asyncQueue,e,t,s)})),s.promise}const sv=new Map;function ng(i,e,t){if(!t)throw new Wt(At.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hh(i,e,t,s){if(!0===e&&!0===s)throw new Wt(At.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function vm(i){if(!Sn.isDocumentKey(i))throw new Wt(At.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ov(i){if(Sn.isDocumentKey(i))throw new Wt(At.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function lp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":hn()}function Ai(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Wt(At.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lp(i);throw new Wt(At.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function a_(i,e){if(e<=0)throw new Wt(At.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class av{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Wt(At.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Wt(At.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rg{constructor(e,t,s,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Wt(At.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wt(At.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new av(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Za;switch(t.type){case"firstParty":return new Ja(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Wt(At.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sv.get(e);t&&(Ft("ComponentProvider","Removing Datastore"),sv.delete(e),t.terminate())}(this),Promise.resolve()}}class Ys{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ys(this.firestore,e,this._key)}}class xi{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class nc extends xi{constructor(e,t,s){super(e,t,ma(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ys(this.firestore,null,new Sn(e))}withConverter(e){return new nc(this.firestore,e,this._path)}}function lv(i,e,...t){if(i=(0,Xe.m9)(i),ng("collection","path",e),i instanceof rg){const s=jr.fromString(e,...t);return ov(s),new nc(i,null,s)}{if(!(i instanceof Ys||i instanceof nc))throw new Wt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(jr.fromString(e,...t));return ov(s),new nc(i.firestore,null,s)}}function ig(i,e,...t){if(i=(0,Xe.m9)(i),1===arguments.length&&(e=Fa.A()),ng("doc","path",e),i instanceof rg){const s=jr.fromString(e,...t);return vm(s),new Ys(i,null,new Sn(s))}{if(!(i instanceof Ys||i instanceof nc))throw new Wt(At.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(jr.fromString(e,...t));return vm(s),new Ys(i.firestore,i instanceof nc?i.converter:null,new Sn(s))}}function uv(i,e){return i=(0,Xe.m9)(i),e=(0,Xe.m9)(e),(i instanceof Ys||i instanceof nc)&&(e instanceof Ys||e instanceof nc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function _m(i,e){return i=(0,Xe.m9)(i),e=(0,Xe.m9)(e),i instanceof xi&&e instanceof xi&&i.firestore===e.firestore&&Kc(i._query,e._query)&&i.converter===e.converter}class cv{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new ef(this,"async_queue_retry"),this.qc=()=>{const t=yd();t&&Ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Co.vo()};const e=yd();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Uc(),this.Kc(e)}enterRestrictedMode(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;const t=yd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}enqueue(e){if(this.Uc(),this.Oc)return new Promise(()=>{});const t=new Ti;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.kc.push(e),this.Gc()))}Gc(){var e=this;return(0,ue.Z)(function*(){if(0!==e.kc.length){try{yield e.kc[0](),e.kc.shift(),e.Co.reset()}catch(t){if(!rl(t))throw t;Ft("AsyncQueue","Operation failed with retryable error: "+t)}e.kc.length>0&&e.Co.Ao(()=>e.Gc())}})()}Kc(e){const t=this.Nc.then(()=>(this.Fc=!0,e().catch(s=>{throw this.Mc=s,this.Fc=!1,lr("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.Fc=!1,s))));return this.Nc=t,t}enqueueAfterDelay(e,t,s){this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);const d=Xf.createAndSchedule(this,e,t,s,g=>this.Qc(g));return this.$c.push(d),d}Uc(){this.Mc&&hn()}verifyOperationInProgress(){}zc(){var e=this;return(0,ue.Z)(function*(){let t;do{t=e.Nc,yield t}while(t!==e.Nc)})()}jc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Wc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Hc(e){this.Lc.push(e)}Qc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function fh(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const d of["next","error","complete"])if(d in s&&"function"==typeof s[d])return!0;return!1}(i)}class u_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Fs extends rg{constructor(e,t,s,d){super(e,t,s,d),this.type="firestore",this._queue=new cv,this._persistenceKey=(null==d?void 0:d.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Iy(this),this._firestoreClient.terminate()}}function Uo(i){return i._firestoreClient||Iy(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Iy(i){var e,t,s;const d=i._freezeSettings(),g=(k=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new ac(i._databaseId,k,i._persistenceKey,(Q=d).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,Q.useFetchStreams));var k,Q;i._firestoreClient=new Jy(i._authCredentials,i._appCheckCredentials,i._queue,g),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(s=d.cache)&&void 0!==s&&s._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function dv(i,e,t){const s=new Ti;return i.asyncQueue.enqueue((0,ue.Z)(function*(){try{yield ap(i,t),yield cm(i,e),s.resolve()}catch(d){const g=d;if(!py(g))throw g;Zn("Error enabling indexeddb cache. Falling back to memory cache: "+g),s.reject(g)}})).then(()=>s.promise)}function fv(i){if(i._initialized||i._terminated)throw new Wt(At.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tu(Yn.fromBase64String(e))}catch(t){throw new Wt(At.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Tu(Yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Wt(At.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ui(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ph{constructor(e){this._methodName=e}}class Em{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wt(At.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wt(At.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pr(this._lat,e._lat)||pr(this._long,e._long)}}const pv=/^__.*__$/;class gv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ds(e,this.data,t,this.fieldTransforms)}}class og{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ga(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function mv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hn()}}class ag{constructor(e,t,s,d,g,w){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=d,void 0===g&&this.Jc(),this.fieldTransforms=g||[],this.fieldMask=w||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(e){return new ag(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Zc({path:s,ta:!1});return d.ea(e),d}na(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.Zc({path:s,ta:!1});return d.Jc(),d}sa(e){return this.Zc({path:void 0,ta:!0})}ia(e){return Dm(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Jc(){if(this.path)for(let e=0;e<this.path.length;e++)this.ea(this.path.get(e))}ea(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(mv(this.Yc)&&pv.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}class yv{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||th(e)}ua(e,t,s,d=!1){return new ag({Yc:e,methodName:t,oa:s,path:ui.emptyPath(),ta:!1,ra:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(i){const e=i._freezeSettings(),t=th(i._databaseId);return new yv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function af(i,e,t,s,d,g={}){const w=i.ua(g.merge||g.mergeFields?2:0,e,t,d);Cy("Data must be an object, but it was:",w,s);const k=wv(s,w);let G,Q;if(g.merge)G=new xn(w.fieldMask),Q=w.fieldTransforms;else if(g.mergeFields){const pe=[];for(const Ze of g.mergeFields){const Tt=lg(e,Ze,t);if(!w.contains(Tt))throw new Wt(At.INVALID_ARGUMENT,`Field '${Tt}' is specified in your field mask but missing from your input data.`);Cv(pe,Tt)||pe.push(Tt)}G=new xn(pe),Q=w.fieldTransforms.filter(Ze=>G.covers(Ze.field))}else G=null,Q=w.fieldTransforms;return new gv(new Ki(k),G,Q)}class lf extends ph{_toFieldTransform(e){if(2!==e.Yc)throw e.ia(1===e.Yc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lf}}function by(i,e,t){return new ag({Yc:3,oa:e.settings.oa,methodName:i._methodName,ta:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Im extends ph{_toFieldTransform(e){return new Ma(e.path,new Ha)}isEqual(e){return e instanceof Im}}class vv extends ph{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=by(this,e,!0),s=this.ca.map(g=>uf(g,t)),d=new gu(s);return new Ma(e.path,d)}isEqual(e){return this===e}}class _v extends ph{constructor(e,t){super(e),this.ca=t}_toFieldTransform(e){const t=by(this,e,!0),s=this.ca.map(g=>uf(g,t)),d=new ju(s);return new Ma(e.path,d)}isEqual(e){return this===e}}class Ev extends ph{constructor(e,t){super(e),this.aa=t}_toFieldTransform(e){const t=new Al(e.serializer,Qc(e.serializer,this.aa));return new Ma(e.path,t)}isEqual(e){return this===e}}function wm(i,e,t,s){const d=i.ua(1,e,t);Cy("Data must be an object, but it was:",d,s);const g=[],w=Ki.empty();$(s,(G,Q)=>{const pe=Cm(e,G,t);Q=(0,Xe.m9)(Q);const Ze=d.na(pe);if(Q instanceof lf)g.push(pe);else{const Tt=uf(Q,Ze);null!=Tt&&(g.push(pe),w.set(pe,Tt))}});const k=new xn(g);return new og(w,k,d.fieldTransforms)}function bm(i,e,t,s,d,g){const w=i.ua(1,e,t),k=[lg(e,s,t)],G=[d];if(g.length%2!=0)throw new Wt(At.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Tt=0;Tt<g.length;Tt+=2)k.push(lg(e,g[Tt])),G.push(g[Tt+1]);const Q=[],pe=Ki.empty();for(let Tt=k.length-1;Tt>=0;--Tt)if(!Cv(Q,k[Tt])){const Yt=k[Tt];let gn=G[Tt];gn=(0,Xe.m9)(gn);const zn=w.na(Yt);if(gn instanceof lf)Q.push(Yt);else{const cr=uf(gn,zn);null!=cr&&(Q.push(Yt),pe.set(Yt,cr))}}const Ze=new xn(Q);return new og(pe,Ze,w.fieldTransforms)}function Iv(i,e,t,s=!1){return uf(t,i.ua(s?4:3,e))}function uf(i,e){if(bv(i=(0,Xe.m9)(i)))return Cy("Unsupported field value:",e,i),wv(i,e);if(i instanceof ph)return function(t,s){if(!mv(s.Yc))throw s.ia(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ia(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(s);d&&s.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ta&&4!==e.Yc)throw e.ia("Nested arrays are not supported");return function(t,s){const d=[];let g=0;for(const w of t){let k=uf(w,s.sa(g));null==k&&(k={nullValue:"NULL_VALUE"}),d.push(k),g++}return{arrayValue:{values:d}}}(i,e)}return function(t,s){if(null===(t=(0,Xe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Qc(s.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Ii.fromDate(t);return{timestampValue:xl(s.serializer,d)}}if(t instanceof Ii){const d=new Ii(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xl(s.serializer,d)}}if(t instanceof Em)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tu)return{bytesValue:Mh(s.serializer,t._byteString)};if(t instanceof Ys){const d=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(d))throw s.ia(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:sd(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.ia(`Unsupported field value: ${lp(t)}`)}(i,e)}function wv(i,e){const t={};return z(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$(i,(s,d)=>{const g=uf(d,e.Xc(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function bv(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Ii||i instanceof Em||i instanceof Tu||i instanceof Ys||i instanceof ph)}function Cy(i,e,t){if(!bv(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=lp(t);throw e.ia("an object"===s?i+" a custom object":i+" "+s)}var s}function lg(i,e,t){if((e=(0,Xe.m9)(e))instanceof tu)return e._internalPath;if("string"==typeof e)return Cm(i,e);throw Dm("Field path arguments must be of type string or ",i,!1,void 0,t)}const m_=new RegExp("[~\\*/\\[\\]]");function Cm(i,e,t){if(e.search(m_)>=0)throw Dm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new tu(...e.split("."))._internalPath}catch{throw Dm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Dm(i,e,t,s,d){const g=s&&!s.isEmpty(),w=void 0!==d;let k=`Function ${e}() called with invalid data`;t&&(k+=" (via `toFirestore()`)"),k+=". ";let G="";return(g||w)&&(G+=" (found",g&&(G+=` in field ${s}`),w&&(G+=` in document ${d}`),G+=")"),new Wt(At.INVALID_ARGUMENT,k+i+G)}function Cv(i,e){return i.some(t=>t.isEqual(e))}class ug{constructor(e,t,s,d,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Ys(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new y_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class y_ extends ug{data(){return super.data()}}function Tm(i,e){return"string"==typeof e?Cm(i,e):e instanceof tu?e._internalPath:e._delegate._internalPath}function Dv(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Wt(At.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class cg extends Dy{}function gh(i,e,...t){let s=[];e instanceof Dy&&s.push(e),s=s.concat(t),function(d){const g=d.filter(k=>k instanceof cf).length,w=d.filter(k=>k instanceof dg).length;if(g>1||g>0&&w>0)throw new Wt(At.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const d of s)i=d._apply(i);return i}class dg extends cg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new dg(e,t,s)}_apply(e){const t=this._parse(e);return Ty(e._query,t),new xi(e.firestore,e.converter,Uu(e._query,t))}_parse(e){const t=Id(e.firestore);return function(d,g,w,k,G,Q,pe){let Ze;if(G.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new Wt(At.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){w_(pe,Q);const Tt=[];for(const Yt of pe)Tt.push(xm(k,d,Yt));Ze={arrayValue:{values:Tt}}}else Ze=xm(k,d,pe)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||w_(pe,Q),Ze=Iv(w,"where",pe,"in"===Q||"not-in"===Q);return ii.create(G,Q,Ze)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class cf extends Dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cf(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===t.length?t[0]:yi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,d){let g=s;const w=d.getFlattenedFilters();for(const k of w)Ty(g,k),g=Uu(g,k)}(e._query,t),new xi(e.firestore,e.converter,Uu(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Sm extends cg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sm(e,t)}_apply(e){const t=function(s,d,g){if(null!==s.startAt)throw new Wt(At.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Wt(At.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new cc(d,g);return function(k,G){if(null===Dl(k)){const Q=jl(k);null!==Q&&Sy(0,Q,G.field)}}(s,w),w}(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,function(s,d){const g=s.explicitOrderBy.concat([d]);return new Jo(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class hg extends cg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new hg(e,t,s)}_apply(e){return new xi(e.firestore,e.converter,Rd(e._query,this._limit,this._limitType))}}class fg extends cg{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new fg(e,t,s)}_apply(e){const t=I_(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(d=t,new Jo((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,d,s.endAt)));var s,d}}class Am extends cg{constructor(e,t,s){super(),this.type=e,this._docOrFields=t,this._inclusive=s}static _create(e,t,s){return new Am(e,t,s)}_apply(e){const t=I_(e,this.type,this._docOrFields,this._inclusive);return new xi(e.firestore,e.converter,(d=t,new Jo((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,d)));var s,d}}function I_(i,e,t,s){if(t[0]=(0,Xe.m9)(t[0]),t[0]instanceof ug)return function(d,g,w,k,G){if(!k)throw new Wt(At.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const Q=[];for(const pe of $u(d))if(pe.field.isKeyField())Q.push(Ua(g,k.key));else{const Ze=k.data.field(pe.field);if(Ba(Ze))throw new Wt(At.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+pe.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ze){const Tt=pe.field.canonicalString();throw new Wt(At.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Tt}' (used as the orderBy) does not exist.`)}Q.push(Ze)}return new ga(Q,G)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const d=Id(i.firestore);return function(g,w,k,G,Q,pe){const Ze=g.explicitOrderBy;if(Q.length>Ze.length)throw new Wt(At.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Tt=[];for(let Yt=0;Yt<Q.length;Yt++){const gn=Q[Yt];if(Ze[Yt].field.isKeyField()){if("string"!=typeof gn)throw new Wt(At.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof gn}`);if(!ya(g)&&-1!==gn.indexOf("/"))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${gn}' contains a slash.`);const zn=g.path.child(jr.fromString(gn));if(!Sn.isDocumentKey(zn))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${zn}' is not because it contains an odd number of segments.`);const cr=new Sn(zn);Tt.push(Ua(w,cr))}else{const zn=Iv(k,G,gn);Tt.push(zn)}}return new ga(Tt,pe)}(i._query,i.firestore._databaseId,d,e,t,s)}}function xm(i,e,t){if("string"==typeof(t=(0,Xe.m9)(t))){if(""===t)throw new Wt(At.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ya(e)&&-1!==t.indexOf("/"))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(jr.fromString(t));if(!Sn.isDocumentKey(s))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ua(i,new Sn(s))}if(t instanceof Ys)return Ua(i,t._key);throw new Wt(At.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lp(t)}.`)}function w_(i,e){if(!Array.isArray(i)||0===i.length)throw new Wt(At.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ty(i,e){if(e.isInequality()){const s=jl(i),d=e.field;if(null!==s&&!s.isEqual(d))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${s.toString()}' and '${d.toString()}'`);const g=Dl(i);null!==g&&Sy(0,d,g)}const t=function(s,d){for(const g of s)for(const w of g.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(i.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Wt(At.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Sy(i,e,t){if(!t.isEqual(e))throw new Wt(At.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class wr{convertValue(e,t="none"){switch($l(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ol(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw hn()}}convertObject(e,t){const s={};return $(e.fields,(d,g)=>{s[d]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new Em(Gr(e.latitude),Gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Mo(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){const t=Yi(e);return new Ii(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=jr.fromString(e);yn(xf(s));const d=new wl(s.get(1),s.get(3)),g=new Sn(s.popFirst(5));return d.isEqual(t)||lr(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Mm(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class C_ extends wr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,t)}}class Es{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mh extends ug{constructor(e,t,s,d,g,w){super(e,t,s,d,w),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Tm("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class cp extends mh{data(e={}){return super.data(e)}}class wd{constructor(e,t,s,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Es(d.hasPendingWrites,d.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new cp(this._firestore,this._userDataWriter,s.key,s,new Es(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wt(At.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,d){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(w=>({type:"added",doc:new cp(s._firestore,s._userDataWriter,w.doc.key,w.doc,new Es(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const k=new cp(s._firestore,s._userDataWriter,w.doc.key,w.doc,new Es(s._snapshot.mutatedKeys.has(w.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,Q=-1;return 0!==w.type&&(G=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),Q=g.indexOf(w.doc.key)),{type:T_(w.type),doc:k,oldIndex:G,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function T_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hn()}}function My(i,e){return i instanceof mh&&e instanceof mh?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof wd&&e instanceof wd&&i._firestore===e._firestore&&_m(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class bd extends wr{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ys(this.firestore,null,t)}}function Ov(i,e,t){i=Ai(i,Ys);const s=Ai(i.firestore,Fs),d=Mm(i.converter,e,t);return hf(s,[af(Id(s),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,zi.none())])}function kv(i,e,t,...s){i=Ai(i,Ys);const d=Ai(i.firestore,Fs),g=Id(d);let w;return w="string"==typeof(e=(0,Xe.m9)(e))||e instanceof tu?bm(g,"updateDoc",i._key,e,t,s):wm(g,"updateDoc",i._key,e),hf(d,[w.toMutation(i._key,zi.exists(!0))])}function Ry(i,...e){var t,s,d;i=(0,Xe.m9)(i);let g={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||fh(e[w])||(g=e[w],w++);const k={includeMetadataChanges:g.includeMetadataChanges};if(fh(e[w])){const Ze=e[w];e[w]=null===(t=Ze.next)||void 0===t?void 0:t.bind(Ze),e[w+1]=null===(s=Ze.error)||void 0===s?void 0:s.bind(Ze),e[w+2]=null===(d=Ze.complete)||void 0===d?void 0:d.bind(Ze)}let G,Q,pe;if(i instanceof Ys)Q=Ai(i.firestore,Fs),pe=ma(i._key.path),G={next:Ze=>{e[w]&&e[w](Py(Q,i,Ze))},error:e[w+1],complete:e[w+2]};else{const Ze=Ai(i,xi);Q=Ai(Ze.firestore,Fs),pe=Ze._query;const Tt=new bd(Q);G={next:Yt=>{e[w]&&e[w](new wd(Q,Tt,Ze,Yt))},error:e[w+1],complete:e[w+2]},Dv(i._query)}return function(Ze,Tt,Yt,gn){const zn=new lm(gn),cr=new Xg(Tt,zn,Yt);return Ze.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return Qf(yield ch(Ze),cr)})),()=>{zn.yc(),Ze.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return ep(yield ch(Ze),cr)}))}}(Uo(Q),pe,k,G)}function hf(i,e){return function(t,s){const d=new Ti;return t.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function E(i,e,t){return M.apply(this,arguments)}(yield gm(t),s,d)})),d.promise}(Uo(i),e)}function Py(i,e,t){const s=t.docs.get(e._key),d=new bd(i);return new mh(i,d,e._key,s,new Es(t.hasPendingWrites,t.fromCache),e.converter)}const F_={maxAttempts:5};class Bv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Id(e)}set(e,t,s){this._verifyNotCommitted();const d=ff(e,this._firestore),g=Mm(d.converter,t,s),w=af(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,s);return this._mutations.push(w.toMutation(d._key,zi.none())),this}update(e,t,s,...d){this._verifyNotCommitted();const g=ff(e,this._firestore);let w;return w="string"==typeof(t=(0,Xe.m9)(t))||t instanceof tu?bm(this._dataReader,"WriteBatch.update",g._key,t,s,d):wm(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(w.toMutation(g._key,zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ff(e,this._firestore);return this._mutations=this._mutations.concat(new ul(t._key,zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(At.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ff(i,e){if((i=(0,Xe.m9)(i)).firestore!==e)throw new Wt(At.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class O0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Id(e)}get(e){const t=ff(e,this._firestore),s=new C_(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return hn();const g=d[0];if(g.isFoundDocument())return new ug(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new ug(this._firestore,s,t._key,null,t.converter);throw hn()})}set(e,t,s){const d=ff(e,this._firestore),g=Mm(d.converter,t,s),w=af(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,s);return this._transaction.set(d._key,w),this}update(e,t,s,...d){const g=ff(e,this._firestore);let w;return w="string"==typeof(t=(0,Xe.m9)(t))||t instanceof tu?bm(this._dataReader,"Transaction.update",g._key,t,s,d):wm(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,w),this}delete(e){const t=ff(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ff(e,this._firestore),s=new bd(this._firestore);return super.get(e).then(d=>new mh(this._firestore,s,t._key,d._document,new Es(!1,!1),t.converter))}}!function(i,e=!0){Mt=ut.SDK_VERSION,(0,ut._registerComponent)(new Je.wA("firestore",(t,{instanceIdentifier:s,options:d})=>{const g=t.getProvider("app").getImmediate(),w=new Fs(new Qa(t.getProvider("auth-internal")),new el(t.getProvider("app-check-internal")),function(k,G){if(!Object.prototype.hasOwnProperty.apply(k.options,["projectId"]))throw new Wt(At.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(k.options.projectId,G)}(g,s),g);return d=Object.assign({useFetchStreams:e},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,ut.registerVersion)(oe,"3.10.0",i),(0,ut.registerVersion)(oe,"3.10.0","esm2017")}();function Oy(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function j_(){if(typeof Uint8Array>"u")throw new Wt("unimplemented","Uint8Arrays are not available in this environment.")}function Vv(){if(!function Cr(){return typeof atob<"u"}())throw new Wt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class dp{constructor(e){this._delegate=e}static fromBase64String(e){return Vv(),new dp(Tu.fromBase64String(e))}static fromUint8Array(e){return j_(),new dp(Tu.fromUint8Array(e))}toBase64(){return Vv(),this._delegate.toBase64()}toUint8Array(){return j_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ky(i){return function H_(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class yg{enableIndexedDbPersistence(e,t){return function wy(i,e){fv(i=Ai(i,Fs));const t=Uo(i);if(t._uninitializedComponentsProvider)throw new Wt(At.FAILED_PRECONDITION,"SDK cache is already specified.");Zn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=i._freezeSettings(),d=new Ed;return dv(t,d,new cy(d,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Lc(i){fv(i=Ai(i,Fs));const e=Uo(i);if(e._uninitializedComponentsProvider)throw new Wt(At.FAILED_PRECONDITION,"SDK cache is already specified.");Zn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),s=new Ed;return dv(e,s,new Jp(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function h_(i){if(i._initialized&&!i._terminated)throw new Wt(At.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ti;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ue.Z)(function*(){try{yield(t=(0,ue.Z)(function*(s){if(!oo.D())return Promise.resolve();const d=s+"main";yield oo.delete(d)}),function(s){return t.apply(this,arguments)})(qh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class jv{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof wl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Ey(i,e,t,s={}){var d;const g=(i=Ai(i,rg))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Zn("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let w,k;if("string"==typeof s.mockUserToken)w=s.mockUserToken,k=be.MOCK_USER;else{w=(0,Xe.Sg)(s.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const G=s.mockUserToken.sub||s.mockUserToken.user_id;if(!G)throw new Wt(At.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");k=new be(G)}i._authCredentials=new Xa(new Gs(w,k))}}(this._delegate,e,t,s)}enableNetwork(){return function rc(i){return function ev(i){return i.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield my(i),t=yield pm(i);return e.setNetworkEnabled(!0),function(s){const d=on(s);return d.du.delete(0),kc(d)}(t)}))}(Uo(i=Ai(i,Fs)))}(this._delegate)}disableNetwork(){return function ic(i){return function tv(i){return i.asyncQueue.enqueue((0,ue.Z)(function*(){const e=yield my(i),t=yield pm(i);return e.setNetworkEnabled(!1),(s=(0,ue.Z)(function*(d){const g=on(d);g.du.add(0),yield nh(g),g.mu.set("Offline")}),function(d){return s.apply(this,arguments)})(t);var s}))}(Uo(i=Ai(i,Fs)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,hh("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Bc(i){return function(e){const t=new Ti;return e.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return function Mr(i,e){return Xr.apply(this,arguments)}(yield gm(e),t)})),t.promise}(Uo(i=Ai(i,Fs)))}(this._delegate)}onSnapshotsInSync(e){return function Nv(i,e){return function iv(i,e){const t=new lm(e);return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield ch(i),d=t,on(s).Au.add(d),void d.next();var s,d})),()=>{t.yc(),i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return s=yield ch(i),d=t,void on(s).Au.delete(d);var s,d}))}}(Uo(i=Ai(i,Fs)),fh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Wt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new fp(this,lv(this._delegate,e))}catch(t){throw ka(t,"collection()","Firestore.collection()")}}doc(e){try{return new Su(this,ig(this._delegate,e))}catch(t){throw ka(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new hl(this,function l_(i,e){if(i=Ai(i,rg),ng("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wt(At.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xi(i,null,(t=e,new Jo(jr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ka(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function k0(i,e,t){i=Ai(i,Fs);const s=Object.assign(Object.assign({},F_),t);return function(d){if(d.maxAttempts<1)throw new Wt(At.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(d,g,w){const k=new Ti;return d.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){const G=yield function yy(i){return tg(i).then(e=>e.datastore)}(d);new fy(d.asyncQueue,G,w,g,k).run()})),k.promise}(Uo(i),d=>e(new O0(i,d)),s)}(this._delegate,t=>e(new Ny(this,t)))}batch(){return Uo(this._delegate),new Hv(new Bv(this._delegate,e=>hf(this._delegate,e)))}loadBundle(e){return function hv(i,e){const t=Uo(i=Ai(i,Fs)),s=new u_;return function ym(i,e,t,s){const d=function(g,w){let k;return k="string"==typeof g?(new TextEncoder).encode(g):g,G=function(G,Q){if(G instanceof Uint8Array)return am(G,Q);if(G instanceof ArrayBuffer)return am(new Uint8Array(G),Q);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(k),new dy(G,w);var G}(t,th(e));i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){!function uy(i,e,t){const s=on(i);var d;(d=(0,ue.Z)(function*(g,w,k){try{const G=yield w.getMetadata();if(yield function(Tt,Yt){const gn=on(Tt),zn=ls(Yt.createTime);return gn.persistence.runTransaction("hasNewerBundle","readonly",cr=>gn.xs.getBundleMetadata(cr,Yt.id)).then(cr=>!!cr&&cr.createTime.compareTo(zn)>=0)}(g.localStore,G))return yield w.close(),k._completeWith({taskState:"Success",documentsLoaded:(Tt=G).totalDocuments,bytesLoaded:Tt.totalBytes,totalDocuments:Tt.totalDocuments,totalBytes:Tt.totalBytes}),Promise.resolve(new Set);k._updateProgress(Qg(G));const Q=new ry(G,g.localStore,w.serializer);let pe=yield w._c();for(;pe;){const Tt=yield Q.$u(pe);Tt&&k._updateProgress(Tt),pe=yield w._c()}const Ze=yield Q.complete();return yield $o(g,Ze.Bu,void 0),yield function(Tt,Yt){const gn=on(Tt);return gn.persistence.runTransaction("Save bundle","readwrite",zn=>gn.xs.saveBundleMetadata(zn,Yt))}(g.localStore,G),k._completeWith(Ze.progress),Promise.resolve(Ze.Fu)}catch(G){return Zn("SyncEngine",`Loading bundle failed with ${G}`),k._failWith(G),Promise.resolve(new Set)}var Tt}),function(g,w,k){return d.apply(this,arguments)})(s,e,t).then(d=>{s.sharedClientState.notifyBundleLoaded(d)})}(yield gm(i),d,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function p_(i,e){return function dh(i,e){return i.asyncQueue.enqueue((0,ue.Z)(function*(){return function(t,s){const d=on(t);return d.persistence.runTransaction("Get named query","readonly",g=>d.xs.getNamedQuery(g,s))}(yield fm(i),e)}))}(Uo(i=Ai(i,Fs)),e).then(t=>t?new xi(i,null,t.query):null)}(this._delegate,e).then(t=>t?new hl(this,t):null)}}class vg extends wr{constructor(e){super(),this.firestore=e}convertBytes(e){return new dp(new Tu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Su.forKey(t,this.firestore,null)}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vg(e)}get(e){const t=vh(e);return this._delegate.get(t).then(s=>new hp(this._firestore,new mh(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const d=vh(e);return s?(Oy("Transaction.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=vh(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=vh(e);return this._delegate.delete(t),this}}class Hv{constructor(e){this._delegate=e}set(e,t,s){const d=vh(e);return s?(Oy("WriteBatch.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=vh(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=vh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yh{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new cp(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _g(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=yh.INSTANCES;let d=s.get(e);d||(d=new WeakMap,s.set(e,d));let g=d.get(t);return g||(g=new yh(e,new vg(e),t),d.set(t,g)),g}}yh.INSTANCES=new WeakMap;class Su{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new Wt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Su(t,new Ys(t._delegate,s,new Sn(e)))}static forKey(e,t,s){return new Su(t,new Ys(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new fp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new fp(this.firestore,lv(this._delegate,e))}catch(t){throw ka(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xe.m9)(e))instanceof Ys&&uv(this._delegate,e)}set(e,t){t=Oy("DocumentReference.set",t);try{return t?Ov(this._delegate,e,t):Ov(this._delegate,e)}catch(s){throw ka(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?kv(this._delegate,e):kv(this._delegate,e,t,...s)}catch(d){throw ka(d,"updateDoc()","DocumentReference.update()")}}delete(){return function M_(i){return hf(Ai(i.firestore,Fs),[new ul(i._key,zi.none())])}(this._delegate)}onSnapshot(...e){const t=zv(e),s=Fy(e,d=>new hp(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Ry(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Pv(i){i=Ai(i,Ys);const e=Ai(i.firestore,Fs),t=Uo(e),s=new bd(e);return function nv(i,e){const t=new Ti;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(d,g,w){try{const k=yield function(G,Q){const pe=on(G);return pe.persistence.runTransaction("read document","readonly",Ze=>pe.localDocuments.getDocument(Ze,Q))}(d,g);k.isFoundDocument()?w.resolve(k):k.isNoDocument()?w.resolve(null):w.reject(new Wt(At.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(k){const G=Nc(k,`Failed to get document '${g} from cache`);w.reject(G)}}),function(d,g,w){return s.apply(this,arguments)})(yield fm(i),e,t);var s})),t.promise}(t,i._key).then(d=>new mh(e,s,i._key,d,new Es(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function S_(i){i=Ai(i,Ys);const e=Ai(i.firestore,Fs);return vy(Uo(e),i._key,{source:"server"}).then(t=>Py(e,i,t))}(this._delegate):function Rv(i){i=Ai(i,Ys);const e=Ai(i.firestore,Fs);return vy(Uo(e),i._key).then(t=>Py(e,i,t))}(this._delegate),t.then(s=>new hp(this.firestore,new mh(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Su(this.firestore,this._delegate.withConverter(e?yh.getInstance(this.firestore,e):null))}}function ka(i,e,t){return i.message=i.message.replace(e,t),i}function zv(i){for(const e of i)if("object"==typeof e&&!ky(e))return e;return{}}function Fy(i,e){var t,s;let d;return d=ky(i[0])?i[0]:ky(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(s=d.complete)||void 0===s?void 0:s.bind(d)}}class hp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Su(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return My(this._delegate,e._delegate)}}class _g extends hp{data(e){const t=this._delegate.data(e);return function xo(i,e){i||hn()}(void 0!==t),t}}class hl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vg(e)}where(e,t,s){try{return new hl(this.firestore,gh(this._delegate,function Tv(i,e,t){const s=e,d=Tm("where",i);return dg._create(d,s,t)}(e,t,s)))}catch(d){throw ka(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new hl(this.firestore,gh(this._delegate,function Sv(i,e="asc"){const t=e,s=Tm("orderBy",i);return Sm._create(s,t)}(e,t)))}catch(s){throw ka(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new hl(this.firestore,gh(this._delegate,function Av(i){return a_("limit",i),hg._create("limit",i,"F")}(e)))}catch(t){throw ka(t,"limit()","Query.limit()")}}limitToLast(e){try{return new hl(this.firestore,gh(this._delegate,function xv(i){return a_("limitToLast",i),hg._create("limitToLast",i,"L")}(e)))}catch(t){throw ka(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new hl(this.firestore,gh(this._delegate,function Mv(...i){return fg._create("startAt",i,!0)}(...e)))}catch(t){throw ka(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new hl(this.firestore,gh(this._delegate,function df(...i){return fg._create("startAfter",i,!1)}(...e)))}catch(t){throw ka(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new hl(this.firestore,gh(this._delegate,function E_(...i){return Am._create("endBefore",i,!1)}(...e)))}catch(t){throw ka(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new hl(this.firestore,gh(this._delegate,function up(...i){return Am._create("endAt",i,!0)}(...e)))}catch(t){throw ka(t,"endAt()","Query.endAt()")}}isEqual(e){return _m(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function x_(i){i=Ai(i,xi);const e=Ai(i.firestore,Fs),t=Uo(e),s=new bd(e);return function rv(i,e){const t=new Ti;return i.asyncQueue.enqueueAndForget((0,ue.Z)(function*(){return(s=(0,ue.Z)(function*(d,g,w){try{const k=yield Uf(d,g,!0),G=new em(g,k.Wi),Q=G.zu(k.documents),pe=G.applyChanges(Q,!1);w.resolve(pe.snapshot)}catch(k){const G=Nc(k,`Failed to execute query '${g} against cache`);w.reject(G)}}),function(d,g,w){return s.apply(this,arguments)})(yield fm(i),e,t);var s})),t.promise}(t,i._query).then(d=>new wd(e,s,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function gg(i){i=Ai(i,xi);const e=Ai(i.firestore,Fs),t=Uo(e),s=new bd(e);return _y(t,i._query,{source:"server"}).then(d=>new wd(e,s,i,d))}(this._delegate):function A_(i){i=Ai(i,xi);const e=Ai(i.firestore,Fs),t=Uo(e),s=new bd(e);return Dv(i._query),_y(t,i._query).then(d=>new wd(e,s,i,d))}(this._delegate),t.then(s=>new Eg(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=zv(e),s=Fy(e,d=>new Eg(this.firestore,new wd(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Ry(this._delegate,t,s)}withConverter(e){return new hl(this.firestore,this._delegate.withConverter(e?yh.getInstance(this.firestore,e):null))}}class G_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _g(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Eg{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new hl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _g(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new G_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new _g(this._firestore,s))})}isEqual(e){return My(this._delegate,e._delegate)}}class fp extends hl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Su(this.firestore,e):null}doc(e){try{return new Su(this.firestore,void 0===e?ig(this._delegate):ig(this._delegate,e))}catch(t){throw ka(t,"doc()","CollectionReference.doc()")}}add(e){return function Rm(i,e){const t=Ai(i.firestore,Fs),s=ig(i),d=Mm(i.converter,e);return hf(t,[af(Id(i.firestore),"addDoc",s._key,d,null!==i.converter,{}).toMutation(s._key,zi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Su(this.firestore,t))}isEqual(e){return uv(this._delegate,e._delegate)}withConverter(e){return new fp(this.firestore,this._delegate.withConverter(e?yh.getInstance(this.firestore,e):null))}}function vh(i){return Ai(i,Ys)}class Ly{constructor(...e){this._delegate=new tu(...e)}static documentId(){return new Ly(ui.keyField().canonicalString())}isEqual(e){return(e=(0,Xe.m9)(e))instanceof tu&&this._delegate._internalPath.isEqual(e._internalPath)}}class pf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $v(){return new Im("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new pf(e)}static delete(){const e=function N0(){return new lf("deleteField")}();return e._methodName="FieldValue.delete",new pf(e)}static arrayUnion(...e){const t=function Om(...i){return new vv("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new pf(t)}static arrayRemove(...e){const t=function L_(...i){return new _v("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new pf(t)}static increment(e){const t=function B_(i){return new Ev("increment",i)}(e);return t._methodName="FieldValue.increment",new pf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const W_={Firestore:jv,GeoPoint:Em,Timestamp:Ii,Blob:dp,Transaction:Ny,WriteBatch:Hv,DocumentReference:Su,DocumentSnapshot:hp,Query:hl,QueryDocumentSnapshot:_g,QuerySnapshot:Eg,CollectionReference:fp,FieldPath:Ly,FieldValue:pf,setLogLevel:function z_(i){!function Ur(i){zt.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Y_(i){(function q_(i,e){i.INTERNAL.registerComponent(new Je.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(s,d)},"PUBLIC").setServiceProps(Object.assign({},W_)))})(i,(e,t)=>new jv(e,t,new yg)),i.registerVersion("@firebase/firestore-compat","0.3.6")}(Ce.Z);var _h=j(1205),K_=j(6217),Z_=j(9260);function By(i,e){return function Gv(i,e=m.z){return new J.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function $y(i,e){return By(i,e).pipe((0,me.U)(t=>({payload:t,type:"query"})))}function Ig(i,e){return $y(i,e).pipe((0,Ie.O)(void 0),we(),(0,me.U)(([t,s])=>{const d=s.payload.docChanges(),g=d.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((w,k)=>{const G=d.find(pe=>pe.doc.ref.isEqual(w.ref)),Q=null==t?void 0:t.payload.docs.find(pe=>pe.ref.isEqual(w.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(w.metadata)||!G&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(w.metadata)||g.push({type:"modified",payload:{oldIndex:k,newIndex:k,type:"modified",doc:w}})}),g}))}function Wv(i,e,t){return Ig(i,t).pipe((0,ve.R)((s,d)=>function Q_(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function Vy(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Uy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Uy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Uy(i,e.oldIndex,1)}return i}(i,s))}),i}(s,d.map(g=>g.payload),e),[]),(0,Ue.x)(),(0,me.U)(s=>s.map(d=>({type:d.type,payload:d}))))}function Uy(i,e,t,...s){const d=i.slice();return d.splice(e,t,...s),d}function Nm(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class jy{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Ig(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,me.U)(s=>s.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Ie.O)(void 0),we(),(0,je.h)(([s,d])=>d.length>0||!s),(0,me.U)(([s,d])=>d),Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Wv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return $y(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Me.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(Me.iC)}add(e){return this.ref.add(e)}doc(e){return new Fm(this.ref.doc(e),this.afs)}}class Fm{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:d,query:g}=gf(s,t);return new jy(d,g,this.afs)}snapshotChanges(){return function X_(i,e){return By(i,e).pipe((0,Ie.O)(void 0),we(),(0,me.U)(([t,s])=>s.exists?null!=t&&t.exists?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,me.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,fe.D)(this.ref.get(e)).pipe(Me.iC)}}class J_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ig(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,je.h)(t=>t.length>0),Me.iC):Ig(this.query,this.afs.schedulers.outsideAngular).pipe(Me.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ve.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Nm(e);return Wv(this.query,t,this.afs.schedulers.outsideAngular).pipe(Me.iC)}valueChanges(e={}){return $y(this.query,this.afs.schedulers.outsideAngular).pipe((0,me.U)(s=>s.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Me.iC)}get(e){return(0,fe.D)(this.query.get(e)).pipe(Me.iC)}}const qv=new _.OlP("angularfire2.enableFirestorePersistence"),Lm=new _.OlP("angularfire2.firestore.persistenceSettings"),e0=new _.OlP("angularfire2.firestore.settings"),Yv=new _.OlP("angularfire2.firestore.use-emulator");function gf(i,e=(t=>t)){return{query:e(i),ref:i}}let Hy=(()=>{class i{constructor(t,s,d,g,w,k,G,Q,pe,Ze,Tt,Yt,gn,zn,cr,Bi,Ls){this.schedulers=G;const ci=(0,rt.on)(t,k,s),wa=pe;Ze&&(0,_h.nw)(ci,k,Tt,gn,zn,cr,Yt,Bi),[this.firestore,this.persistenceEnabled$]=(0,rt.cc)(`${ci.name}.firestore`,"AngularFirestore",ci.name,()=>{const Bs=k.runOutsideAngular(()=>ci.firestore());if(g&&Bs.settings(g),wa&&Bs.useEmulator(...wa),d&&!(0,Dt.PM)(w)){const $s=()=>{try{return(0,fe.D)(Bs.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(fl){return typeof console<"u"&&console.warn(fl),(0,Fe.of)(!1)}};return[Bs,k.runOutsideAngular($s)]}return[Bs,(0,Fe.of)(!1)]},[g,wa,d])}collection(t,s){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:w}=gf(d,s),k=this.schedulers.ngZone.run(()=>g);return new jy(k,w,this)}collectionGroup(t,s){const d=s||(w=>w),g=this.firestore.collectionGroup(t);return new J_(d(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>s);return new Fm(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(_.LFG(rt.Dh),_.LFG(rt.xv,8),_.LFG(qv,8),_.LFG(e0,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Me.HU),_.LFG(Lm,8),_.LFG(Yv,8),_.LFG(_h.zQ,8),_.LFG(_h.Qv,8),_.LFG(_h.L6,8),_.LFG(_h._Q,8),_.LFG(_h.rT,8),_.LFG(_h.lh,8),_.LFG(_h.f7,8),_.LFG(K_.nm,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),t0=(()=>{class i{constructor(){Z_.Z.registerVersion("angularfire",Me.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:qv,useValue:!0},{provide:Lm,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[Hy]}),i})()},2011:(cn,mt,j)=>{"use strict";j.d(mt,{Dh:()=>Le,GT:()=>Me,cc:()=>je,hO:()=>Ue,on:()=>we,pX:()=>Fe,xv:()=>Be});var _=j(4650),m=j(9260),J=j(2122);cn=j.hmd(cn);const fe=["ngOnDestroy"],Fe=(Ce,ue,ut,Je={})=>new Proxy(Ce,{get:(et,Xe)=>ut.runOutsideAngular(()=>{var X;if(Ce[Xe])return!(null===(X=null==Je?void 0:Je.spy)||void 0===X)&&X.get&&Je.spy.get(Xe,Ce[Xe]),Ce[Xe];if(fe.indexOf(Xe)>-1)return()=>{};const Re=ue.toPromise().then(ne=>{const Qe=ne&&ne[Xe];return"function"==typeof Qe?Qe.bind(ne):Qe&&Qe.then?Qe.then(ye=>ut.run(()=>ye)):ut.run(()=>Qe)});return new Proxy(()=>{},{get:(ne,Qe)=>Re[Qe],apply:(ne,Qe,ye)=>Re.then(qe=>{var nt;const ct=qe&&qe(...ye);return!(null===(nt=null==Je?void 0:Je.spy)||void 0===nt)&&nt.apply&&Je.spy.apply(Xe,ye,ct),ct})})})}),Me=(Ce,ue)=>{ue.forEach(ut=>{Object.getOwnPropertyNames(ut.prototype||ut).forEach(Je=>{Object.defineProperty(Ce.prototype,Je,Object.getOwnPropertyDescriptor(ut.prototype||ut,Je))})})};class Ie{constructor(ue){return ue}}const Le=new _.OlP("angularfire2.app.options"),Be=new _.OlP("angularfire2.app.name");function we(Ce,ue,ut){const et="object"==typeof ut&&ut||{};et.name=et.name||"string"==typeof ut&&ut||"[DEFAULT]";const X=m.Z.apps.filter(Re=>Re&&Re.name===et.name)[0]||ue.runOutsideAngular(()=>m.Z.initializeApp(Ce,et));try{JSON.stringify(Ce)!==JSON.stringify(X.options)&&me("error",`${X.name} Firebase App already initialized with different options${cn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(X)}const me=(Ce,...ue)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Ce](...ue)},ve={provide:Ie,useFactory:we,deps:[Le,_.R0b,[new _.FiY,Be]]};let Ue=(()=>{class Ce{constructor(ut){m.Z.registerVersion("angularfire",J.q4.full,"core"),m.Z.registerVersion("angularfire",J.q4.full,"app-compat"),m.Z.registerVersion("angular",_.q4F.full,ut.toString())}static initializeApp(ut,Je){return{ngModule:Ce,providers:[{provide:Le,useValue:ut},{provide:Be,useValue:Je}]}}}return Ce.\u0275fac=function(ut){return new(ut||Ce)(_.LFG(_.Lbi))},Ce.\u0275mod=_.oAB({type:Ce}),Ce.\u0275inj=_.cJS({providers:[ve]}),Ce})();function je(Ce,ue,ut,Je,et){const[,Xe,X]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===Ce)||[];if(Xe)return function rt(Ce,ue){try{return Ce.toString()===ue.toString()}catch{return Ce===ue}}(et,X)||(Ne("error",`${ue} was already initialized on the ${ut} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),Ne("warn",{is:et,was:X})),Xe;{const Re=Je();return globalThis.\u0275AngularfireInstanceCache.push([Ce,Re,et]),Re}}const Dt=!!cn.hot,Ne=(Ce,...ue)=>{(0,_.X6Q)()&&typeof console<"u"&&console[Ce](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(cn,mt,j)=>{"use strict";j.d(mt,{q4:()=>Ko,iC:()=>Dn,fc:()=>dn,HU:()=>ie,vb:()=>A,JM:()=>S});var _=j(4650),m=j(259),J=j(5861),fe=j(9681),Fe=j(2090),Me=j(4859),Ie=j(1877),Le=j(8766);const Be="@firebase/installations",we="0.6.4",me=1e4,ve=`w:${we}`,Ue="FIS_v2",je="https://firebaseinstallations.googleapis.com/v1",rt=36e5,ue=new Fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ut($){return $ instanceof Fe.ZR&&$.code.includes("request-failed")}function Je({projectId:$}){return`${je}/projects/${$}/installations`}function et($){return{token:$.token,requestStatus:2,expiresIn:qe($.expiresIn),creationTime:Date.now()}}function Xe($,z){return X.apply(this,arguments)}function X(){return(X=(0,J.Z)(function*($,z){const ke=(yield z.json()).error;return ue.create("request-failed",{requestName:$,serverCode:ke.code,serverMessage:ke.message,serverStatus:ke.status})})).apply(this,arguments)}function Re({apiKey:$}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$})}function Qe($){return ye.apply(this,arguments)}function ye(){return(ye=(0,J.Z)(function*($){const z=yield $();return z.status>=500&&z.status<600?$():z})).apply(this,arguments)}function qe($){return Number($.replace("s","000"))}function ze(){return(ze=(0,J.Z)(function*({appConfig:$,heartbeatServiceProvider:z},{fid:re}){const ke=Je($),dt=Re($),ft=z.getImmediate({optional:!0});if(ft){const ur=yield ft.getHeartbeatsHeader();ur&&dt.append("x-firebase-client",ur)}const Un={method:"POST",headers:dt,body:JSON.stringify({fid:re,authVersion:Ue,appId:$.appId,sdkVersion:ve})},xn=yield Qe(()=>fetch(ke,Un));if(xn.ok){const ur=yield xn.json();return{fid:ur.fid||re,registrationStatus:2,refreshToken:ur.refreshToken,authToken:et(ur.authToken)}}throw yield Xe("Create Installation",xn)})).apply(this,arguments)}function _t($){return new Promise(z=>{setTimeout(z,$)})}const xe=/^[cdef][\w-]{21}$/,Ae="";function Oe(){try{const $=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues($),$[0]=112+$[0]%16;const re=function it($){return function ot($){return btoa(String.fromCharCode(...$)).replace(/\+/g,"-").replace(/\//g,"_")}($).substr(0,22)}($);return xe.test(re)?re:Ae}catch{return Ae}}function ht($){return`${$.appName}!${$.appId}`}const Zt=new Map;function Vt($,z){const re=ht($);Ee(re,z),function bt($,z){const re=function fn(){return!nn&&"BroadcastChannel"in self&&(nn=new BroadcastChannel("[Firebase] FID Change"),nn.onmessage=$=>{Ee($.data.key,$.data.fid)}),nn}();re&&re.postMessage({key:$,fid:z}),function Mn(){0===Zt.size&&nn&&(nn.close(),nn=null)}()}(re,z)}function Ee($,z){const re=Zt.get($);if(re)for(const ke of re)ke(z)}let nn=null;const _n="firebase-installations-database",Xt=1,Tn="firebase-installations-store";let Hn=null;function or(){return Hn||(Hn=(0,Le.X3)(_n,Xt,{upgrade:($,z)=>{0===z&&$.createObjectStore(Tn)}})),Hn}function En($,z){return gr.apply(this,arguments)}function gr(){return(gr=(0,J.Z)(function*($,z){const re=ht($),dt=(yield or()).transaction(Tn,"readwrite"),ft=dt.objectStore(Tn),$t=yield ft.get(re);return yield ft.put(z,re),yield dt.done,(!$t||$t.fid!==z.fid)&&Vt($,z.fid),z})).apply(this,arguments)}function tn($){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,J.Z)(function*($){const z=ht($),ke=(yield or()).transaction(Tn,"readwrite");yield ke.objectStore(Tn).delete(z),yield ke.done})).apply(this,arguments)}function Rr($,z){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,J.Z)(function*($,z){const re=ht($),dt=(yield or()).transaction(Tn,"readwrite"),ft=dt.objectStore(Tn),$t=yield ft.get(re),Un=z($t);return void 0===Un?yield ft.delete(re):yield ft.put(Un,re),yield dt.done,Un&&(!$t||$t.fid!==Un.fid)&&Vt($,Un.fid),Un})).apply(this,arguments)}function di($){return _r.apply(this,arguments)}function _r(){return _r=(0,J.Z)(function*($){let z;const re=yield Rr($.appConfig,ke=>{const dt=function On($){return hi($||{fid:Oe(),registrationStatus:0})}(ke),ft=function Jt($,z){if(0===z.registrationStatus){if(!navigator.onLine)return{installationEntry:z,registrationPromise:Promise.reject(ue.create("app-offline"))};const re={fid:z.fid,registrationStatus:1,registrationTime:Date.now()},ke=function An($,z){return Kt.apply(this,arguments)}($,re);return{installationEntry:re,registrationPromise:ke}}return 1===z.registrationStatus?{installationEntry:z,registrationPromise:yr($)}:{installationEntry:z}}($,dt);return z=ft.registrationPromise,ft.installationEntry});return re.fid===Ae?{installationEntry:yield z}:{installationEntry:re,registrationPromise:z}}),_r.apply(this,arguments)}function Kt(){return Kt=(0,J.Z)(function*($,z){try{const re=yield function ct($,z){return ze.apply(this,arguments)}($,z);return En($.appConfig,re)}catch(re){throw ut(re)&&409===re.customData.serverCode?yield tn($.appConfig):yield En($.appConfig,{fid:z.fid,registrationStatus:0}),re}}),Kt.apply(this,arguments)}function yr($){return ir.apply(this,arguments)}function ir(){return(ir=(0,J.Z)(function*($){let z=yield Kr($.appConfig);for(;1===z.registrationStatus;)yield _t(100),z=yield Kr($.appConfig);if(0===z.registrationStatus){const{installationEntry:re,registrationPromise:ke}=yield di($);return ke||re}return z})).apply(this,arguments)}function Kr($){return Rr($,z=>{if(!z)throw ue.create("installation-not-found");return hi(z)})}function hi($){return function wi($){return 1===$.registrationStatus&&$.registrationTime+me<Date.now()}($)?{fid:$.fid,registrationStatus:0}:$}function si(){return(si=(0,J.Z)(function*({appConfig:$,heartbeatServiceProvider:z},re){const ke=function nr($,{fid:z}){return`${Je($)}/${z}/authTokens:generate`}($,re),dt=function ne($,{refreshToken:z}){const re=Re($);return re.append("Authorization",function nt($){return`${Ue} ${$}`}(z)),re}($,re),ft=z.getImmediate({optional:!0});if(ft){const ur=yield ft.getHeartbeatsHeader();ur&&dt.append("x-firebase-client",ur)}const Un={method:"POST",headers:dt,body:JSON.stringify({installation:{sdkVersion:ve,appId:$.appId}})},xn=yield Qe(()=>fetch(ke,Un));if(xn.ok)return et(yield xn.json());throw yield Xe("Generate Auth Token",xn)})).apply(this,arguments)}function Wn($){return fi.apply(this,arguments)}function fi(){return fi=(0,J.Z)(function*($,z=!1){let re;const ke=yield Rr($.appConfig,ft=>{if(!$n(ft))throw ue.create("not-registered");const $t=ft.authToken;if(!z&&function Er($){return 2===$.requestStatus&&!function $e($){const z=Date.now();return z<$.creationTime||$.creationTime+$.expiresIn<z+rt}($)}($t))return ft;if(1===$t.requestStatus)return re=function an($,z){return jt.apply(this,arguments)}($,z),ft;{if(!navigator.onLine)throw ue.create("app-offline");const Un=function Pe($){const z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},$),{authToken:z})}(ft);return re=function Ln($,z){return In.apply(this,arguments)}($,Un),Un}});return re?yield re:ke.authToken}),fi.apply(this,arguments)}function jt(){return(jt=(0,J.Z)(function*($,z){let re=yield Cn($.appConfig);for(;1===re.authToken.requestStatus;)yield _t(100),re=yield Cn($.appConfig);const ke=re.authToken;return 0===ke.requestStatus?Wn($,z):ke})).apply(this,arguments)}function Cn($){return Rr($,z=>{if(!$n(z))throw ue.create("not-registered");return function Ke($){return 1===$.requestStatus&&$.requestTime+me<Date.now()}(z.authToken)?Object.assign(Object.assign({},z),{authToken:{requestStatus:0}}):z})}function In(){return In=(0,J.Z)(function*($,z){try{const re=yield function Dr($,z){return si.apply(this,arguments)}($,z),ke=Object.assign(Object.assign({},z),{authToken:re});return yield En($.appConfig,ke),re}catch(re){if(!ut(re)||401!==re.customData.serverCode&&404!==re.customData.serverCode){const ke=Object.assign(Object.assign({},z),{authToken:{requestStatus:0}});yield En($.appConfig,ke)}else yield tn($.appConfig);throw re}}),In.apply(this,arguments)}function $n($){return void 0!==$&&2===$.registrationStatus}function It(){return(It=(0,J.Z)(function*($){const z=$,{installationEntry:re,registrationPromise:ke}=yield di(z);return ke?ke.catch(console.error):Wn(z).catch(console.error),re.fid})).apply(this,arguments)}function We(){return We=(0,J.Z)(function*($,z=!1){const re=$;return yield function He($){return De.apply(this,arguments)}(re),(yield Wn(re,z)).token}),We.apply(this,arguments)}function De(){return(De=(0,J.Z)(function*($){const{registrationPromise:z}=yield di($);z&&(yield z)})).apply(this,arguments)}function Xi($){return ue.create("missing-app-config-values",{valueName:$})}const gi="installations",Tr=$=>{const z=$.getProvider("app").getImmediate(),re=function pi($){if(!$||!$.options)throw Xi("App Configuration");if(!$.name)throw Xi("App Name");const z=["projectId","apiKey","appId"];for(const re of z)if(!$.options[re])throw Xi(re);return{appName:$.name,projectId:$.options.projectId,apiKey:$.options.apiKey,appId:$.options.appId}}(z);return{app:z,appConfig:re,heartbeatServiceProvider:(0,fe._getProvider)(z,"heartbeat"),_delete:()=>Promise.resolve()}},es=$=>{const z=$.getProvider("app").getImmediate(),re=(0,fe._getProvider)(z,gi).getImmediate();return{getId:()=>function Nt($){return It.apply(this,arguments)}(re),getToken:dt=>function wn($){return We.apply(this,arguments)}(re,dt)}};(function Mi(){(0,fe._registerComponent)(new Me.wA(gi,Tr,"PUBLIC")),(0,fe._registerComponent)(new Me.wA("installations-internal",es,"PRIVATE"))})(),(0,fe.registerVersion)(Be,we),(0,fe.registerVersion)(Be,we,"esm2017");const ar="@firebase/remote-config",Br=new Fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gt{constructor(z,re,ke,dt){this.client=z,this.storage=re,this.storageCache=ke,this.logger=dt}isCachedDataFresh(z,re){if(!re)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ke=Date.now()-re,dt=ke<=z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ke}. Cache max age millis (minimumFetchIntervalMillis setting): ${z}. Is cache hit: ${dt}.`),dt}fetch(z){var re=this;return(0,J.Z)(function*(){const[ke,dt]=yield Promise.all([re.storage.getLastSuccessfulFetchTimestampMillis(),re.storage.getLastSuccessfulFetchResponse()]);if(dt&&re.isCachedDataFresh(z.cacheMaxAgeMillis,ke))return dt;z.eTag=dt&&dt.eTag;const ft=yield re.client.fetch(z),$t=[re.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ft.status&&$t.push(re.storage.setLastSuccessfulFetchResponse(ft)),yield Promise.all($t),ft})()}}function rn($=navigator){return $.languages&&$.languages[0]||$.language}class Pn{constructor(z,re,ke,dt,ft,$t){this.firebaseInstallations=z,this.sdkVersion=re,this.namespace=ke,this.projectId=dt,this.apiKey=ft,this.appId=$t}fetch(z){var re=this;return(0,J.Z)(function*(){const[ke,dt]=yield Promise.all([re.firebaseInstallations.getId(),re.firebaseInstallations.getToken()]),$t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${re.projectId}/namespaces/${re.namespace}:fetch?key=${re.apiKey}`,Un={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":z.eTag||"*"},xn={sdk_version:re.sdkVersion,app_instance_id:ke,app_instance_id_token:dt,app_id:re.appId,language_code:rn()},ur={method:"POST",headers:Un,body:JSON.stringify(xn)},Cr=fetch($t,ur),Yn=new Promise((Mo,mo)=>{z.signal.addEventListener(()=>{const ac=new Error("The operation was aborted.");ac.name="AbortError",mo(ac)})});let qi;try{yield Promise.race([Cr,Yn]),qi=yield Cr}catch(Mo){let mo="fetch-client-network";throw"AbortError"===(null==Mo?void 0:Mo.name)&&(mo="fetch-timeout"),Br.create(mo,{originalErrorMessage:null==Mo?void 0:Mo.message})}let Yi=qi.status;const Gr=qi.headers.get("ETag")||void 0;let ol,Ba;if(200===qi.status){let Mo;try{Mo=yield qi.json()}catch(mo){throw Br.create("fetch-client-parse",{originalErrorMessage:null==mo?void 0:mo.message})}ol=Mo.entries,Ba=Mo.state}if("INSTANCE_STATE_UNSPECIFIED"===Ba?Yi=500:"NO_CHANGE"===Ba?Yi=304:("NO_TEMPLATE"===Ba||"EMPTY_CONFIG"===Ba)&&(ol={}),304!==Yi&&200!==Yi)throw Br.create("fetch-status",{httpStatus:Yi});return{status:Yi,eTag:Gr,config:ol}})()}}class Ve{constructor(z,re){this.client=z,this.storage=re}fetch(z){var re=this;return(0,J.Z)(function*(){const ke=(yield re.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return re.attemptFetch(z,ke)})()}attemptFetch(z,{throttleEndTimeMillis:re,backoffCount:ke}){var dt=this;return(0,J.Z)(function*(){yield function qn($,z){return new Promise((re,ke)=>{const dt=Math.max(z-Date.now(),0),ft=setTimeout(re,dt);$.addEventListener(()=>{clearTimeout(ft),ke(Br.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(z.signal,re);try{const ft=yield dt.client.fetch(z);return yield dt.storage.deleteThrottleMetadata(),ft}catch(ft){if(!function tt($){if(!($ instanceof Fe.ZR&&$.customData))return!1;const z=Number($.customData.httpStatus);return 429===z||500===z||503===z||504===z}(ft))throw ft;const $t={throttleEndTimeMillis:Date.now()+(0,Fe.$s)(ke),backoffCount:ke+1};return yield dt.storage.setThrottleMetadata($t),dt.attemptFetch(z,$t)}})()}}class Qt{constructor(z,re,ke,dt,ft){this.app=z,this._client=re,this._storageCache=ke,this._storage=dt,this._logger=ft,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nn($,z){const re=$.target.error||void 0;return Br.create(z,{originalErrorMessage:re&&(null==re?void 0:re.message)})}const Qn="app_namespace_store";class ei{constructor(z,re,ke,dt=function Ss(){return new Promise(($,z)=>{try{const re=indexedDB.open("firebase_remote_config",1);re.onerror=ke=>{z(Nn(ke,"storage-open"))},re.onsuccess=ke=>{$(ke.target.result)},re.onupgradeneeded=ke=>{0===ke.oldVersion&&ke.target.result.createObjectStore(Qn,{keyPath:"compositeKey"})}}catch(re){z(Br.create("storage-open",{originalErrorMessage:null==re?void 0:re.message}))}})}()){this.appId=z,this.appName=re,this.namespace=ke,this.openDbPromise=dt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(z){return this.set("last_fetch_status",z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(z){return this.set("last_successful_fetch_timestamp_millis",z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(z){return this.set("last_successful_fetch_response",z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(z){return this.set("active_config",z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(z){return this.set("active_config_etag",z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(z){return this.set("throttle_metadata",z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(z){var re=this;return(0,J.Z)(function*(){const ke=yield re.openDbPromise;return new Promise((dt,ft)=>{const Un=ke.transaction([Qn],"readonly").objectStore(Qn),xn=re.createCompositeKey(z);try{const ur=Un.get(xn);ur.onerror=Cr=>{ft(Nn(Cr,"storage-get"))},ur.onsuccess=Cr=>{const Yn=Cr.target.result;dt(Yn?Yn.value:void 0)}}catch(ur){ft(Br.create("storage-get",{originalErrorMessage:null==ur?void 0:ur.message}))}})})()}set(z,re){var ke=this;return(0,J.Z)(function*(){const dt=yield ke.openDbPromise;return new Promise((ft,$t)=>{const xn=dt.transaction([Qn],"readwrite").objectStore(Qn),ur=ke.createCompositeKey(z);try{const Cr=xn.put({compositeKey:ur,value:re});Cr.onerror=Yn=>{$t(Nn(Yn,"storage-set"))},Cr.onsuccess=()=>{ft()}}catch(Cr){$t(Br.create("storage-set",{originalErrorMessage:null==Cr?void 0:Cr.message}))}})})()}delete(z){var re=this;return(0,J.Z)(function*(){const ke=yield re.openDbPromise;return new Promise((dt,ft)=>{const Un=ke.transaction([Qn],"readwrite").objectStore(Qn),xn=re.createCompositeKey(z);try{const ur=Un.delete(xn);ur.onerror=Cr=>{ft(Nn(Cr,"storage-delete"))},ur.onsuccess=()=>{dt()}}catch(ur){ft(Br.create("storage-delete",{originalErrorMessage:null==ur?void 0:ur.message}))}})})()}createCompositeKey(z){return[this.appId,this.appName,this.namespace,z].join()}}class ai{constructor(z){this.storage=z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var z=this;return(0,J.Z)(function*(){const re=z.storage.getLastFetchStatus(),ke=z.storage.getLastSuccessfulFetchTimestampMillis(),dt=z.storage.getActiveConfig(),ft=yield re;ft&&(z.lastFetchStatus=ft);const $t=yield ke;$t&&(z.lastSuccessfulFetchTimestampMillis=$t);const Un=yield dt;Un&&(z.activeConfig=Un)})()}setLastFetchStatus(z){return this.lastFetchStatus=z,this.storage.setLastFetchStatus(z)}setLastSuccessfulFetchTimestampMillis(z){return this.lastSuccessfulFetchTimestampMillis=z,this.storage.setLastSuccessfulFetchTimestampMillis(z)}setActiveConfig(z){return this.activeConfig=z,this.storage.setActiveConfig(z)}}function bi(){return to.apply(this,arguments)}function to(){return(to=(0,J.Z)(function*(){if(!(0,Fe.hl)())return!1;try{return yield(0,Fe.eu)()}catch{return!1}})).apply(this,arguments)}!function As(){(0,fe._registerComponent)(new Me.wA("remote-config",function $(z,{instanceIdentifier:re}){const ke=z.getProvider("app").getImmediate(),dt=z.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Br.create("registration-window");if(!(0,Fe.hl)())throw Br.create("indexed-db-unavailable");const{projectId:ft,apiKey:$t,appId:Un}=ke.options;if(!ft)throw Br.create("registration-project-id");if(!$t)throw Br.create("registration-api-key");if(!Un)throw Br.create("registration-app-id");const xn=new ei(Un,ke.name,re=re||"firebase"),ur=new ai(xn),Cr=new Ie.Yd(ar);Cr.logLevel=Ie.in.ERROR;const Yn=new Pn(dt,fe.SDK_VERSION,re,ft,$t,Un),qi=new Ve(Yn,xn),Yi=new Gt(qi,xn,ur,Cr),Gr=new Qt(ke,Yi,ur,xn,Cr);return function vi($){const z=(0,Fe.m9)($);z._initializePromise||(z._initializePromise=z._storageCache.loadFromStorage().then(()=>{z._isInitializationComplete=!0}))}(Gr),Gr},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(ar,"0.4.4"),(0,fe.registerVersion)(ar,"0.4.4","esm2017")}();const co="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",$i="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ns="https://fcmregistrations.googleapis.com/v1",Us="google.c.a.c_id",Vo="google.c.a.c_l",Io="google.c.a.ts",Is="google.c.a.e";var no=(()=>{return($=no||(no={})).PUSH_RECEIVED="push-received",$.NOTIFICATION_CLICKED="notification-clicked",no;var $})();function cs($){const z=new Uint8Array($);return btoa(String.fromCharCode(...z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function sa($){const re=($+"=".repeat((4-$.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ke=atob(re),dt=new Uint8Array(ke.length);for(let ft=0;ft<ke.length;++ft)dt[ft]=ke.charCodeAt(ft);return dt}const wo="fcm_token_details_db",Oo=5,Ci="fcm_token_object_Store";function Xs(){return Xs=(0,J.Z)(function*($){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ft=>ft.name).includes(wo))return null;let z=null;return(yield(0,Le.X3)(wo,Oo,{upgrade:(ke=(0,J.Z)(function*(dt,ft,$t,Un){var xn;if(ft<2||!dt.objectStoreNames.contains(Ci))return;const ur=Un.objectStore(Ci),Cr=yield ur.index("fcmSenderId").get($);if(yield ur.clear(),Cr)if(2===ft){const Yn=Cr;if(!Yn.auth||!Yn.p256dh||!Yn.endpoint)return;z={token:Yn.fcmToken,createTime:null!==(xn=Yn.createTime)&&void 0!==xn?xn:Date.now(),subscriptionOptions:{auth:Yn.auth,p256dh:Yn.p256dh,endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:"string"==typeof Yn.vapidKey?Yn.vapidKey:cs(Yn.vapidKey)}}}else if(3===ft){const Yn=Cr;z={token:Yn.fcmToken,createTime:Yn.createTime,subscriptionOptions:{auth:cs(Yn.auth),p256dh:cs(Yn.p256dh),endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:cs(Yn.vapidKey)}}}else if(4===ft){const Yn=Cr;z={token:Yn.fcmToken,createTime:Yn.createTime,subscriptionOptions:{auth:cs(Yn.auth),p256dh:cs(Yn.p256dh),endpoint:Yn.endpoint,swScope:Yn.swScope,vapidKey:cs(Yn.vapidKey)}}}}),function(ft,$t,Un,xn){return ke.apply(this,arguments)})})).close(),yield(0,Le.Lj)(wo),yield(0,Le.Lj)("fcm_vapid_details_db"),yield(0,Le.Lj)("undefined"),function ro($){if(!$||!$.subscriptionOptions)return!1;const{subscriptionOptions:z}=$;return"number"==typeof $.createTime&&$.createTime>0&&"string"==typeof $.token&&$.token.length>0&&"string"==typeof z.auth&&z.auth.length>0&&"string"==typeof z.p256dh&&z.p256dh.length>0&&"string"==typeof z.endpoint&&z.endpoint.length>0&&"string"==typeof z.swScope&&z.swScope.length>0&&"string"==typeof z.vapidKey&&z.vapidKey.length>0}(z)?z:null;var ke}),Xs.apply(this,arguments)}const oa="firebase-messaging-database",_i=1,Wi="firebase-messaging-store";let io=null;function Ms(){return io||(io=(0,Le.X3)(oa,_i,{upgrade:($,z)=>{0===z&&$.createObjectStore(Wi)}})),io}function ho($){return ws.apply(this,arguments)}function ws(){return ws=(0,J.Z)(function*($){const z=bs($),ke=yield(yield Ms()).transaction(Wi).objectStore(Wi).get(z);if(ke)return ke;{const dt=yield function Qi($){return Xs.apply(this,arguments)}($.appConfig.senderId);if(dt)return yield Rs($,dt),dt}}),ws.apply(this,arguments)}function Rs($,z){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,J.Z)(function*($,z){const re=bs($),dt=(yield Ms()).transaction(Wi,"readwrite");return yield dt.objectStore(Wi).put(z,re),yield dt.done,z})).apply(this,arguments)}function ko(){return(ko=(0,J.Z)(function*($){const z=bs($),ke=(yield Ms()).transaction(Wi,"readwrite");yield ke.objectStore(Wi).delete(z),yield ke.done})).apply(this,arguments)}function bs({appConfig:$}){return $.appId}const Pr=new Fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Co($,z){return No.apply(this,arguments)}function No(){return(No=(0,J.Z)(function*($,z){const re=yield Cs($),ke=Ei(z),dt={method:"POST",headers:re,body:JSON.stringify(ke)};let ft;try{ft=yield(yield fetch(jo($.appConfig),dt)).json()}catch($t){throw Pr.create("token-subscribe-failed",{errorInfo:null==$t?void 0:$t.toString()})}if(ft.error)throw Pr.create("token-subscribe-failed",{errorInfo:ft.error.message});if(!ft.token)throw Pr.create("token-subscribe-no-token");return ft.token})).apply(this,arguments)}function ba(){return(ba=(0,J.Z)(function*($,z){const re=yield Cs($),ke=Ei(z.subscriptionOptions),dt={method:"PATCH",headers:re,body:JSON.stringify(ke)};let ft;try{ft=yield(yield fetch(`${jo($.appConfig)}/${z.token}`,dt)).json()}catch($t){throw Pr.create("token-update-failed",{errorInfo:null==$t?void 0:$t.toString()})}if(ft.error)throw Pr.create("token-update-failed",{errorInfo:ft.error.message});if(!ft.token)throw Pr.create("token-update-no-token");return ft.token})).apply(this,arguments)}function js($,z){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,J.Z)(function*($,z){const ke={method:"DELETE",headers:yield Cs($)};try{const ft=yield(yield fetch(`${jo($.appConfig)}/${z}`,ke)).json();if(ft.error)throw Pr.create("token-unsubscribe-failed",{errorInfo:ft.error.message})}catch(dt){throw Pr.create("token-unsubscribe-failed",{errorInfo:null==dt?void 0:dt.toString()})}})).apply(this,arguments)}function jo({projectId:$}){return`${ns}/projects/${$}/registrations`}function Cs($){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,J.Z)(function*({appConfig:$,installations:z}){const re=yield z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$.apiKey,"x-goog-firebase-installations-auth":`FIS ${re}`})})).apply(this,arguments)}function Ei({p256dh:$,auth:z,endpoint:re,vapidKey:ke}){const dt={web:{endpoint:re,auth:z,p256dh:$}};return ke!==$i&&(dt.web.applicationPubKey=ke),dt}const ds=6048e5;function po(){return po=(0,J.Z)(function*($){const z=yield function C($,z){return q.apply(this,arguments)}($.swRegistration,$.vapidKey),re={vapidKey:$.vapidKey,swScope:$.swRegistration.scope,endpoint:z.endpoint,auth:cs(z.getKey("auth")),p256dh:cs(z.getKey("p256dh"))},ke=yield ho($.firebaseDependencies);if(ke){if(function T($,z){return z.vapidKey===$.vapidKey&&z.endpoint===$.endpoint&&z.auth===$.auth&&z.p256dh===$.p256dh}(ke.subscriptionOptions,re))return Date.now()>=ke.createTime+ds?function aa($,z){return sr.apply(this,arguments)}($,{token:ke.token,createTime:Date.now(),subscriptionOptions:re}):ke.token;try{yield js($.firebaseDependencies,ke.token)}catch(dt){console.warn(dt)}return Ho($.firebaseDependencies,re)}return Ho($.firebaseDependencies,re)}),po.apply(this,arguments)}function Do(){return Do=(0,J.Z)(function*($){const z=yield ho($.firebaseDependencies);z&&(yield js($.firebaseDependencies,z.token),yield function bo($){return ko.apply(this,arguments)}($.firebaseDependencies));const re=yield $.swRegistration.pushManager.getSubscription();return!re||re.unsubscribe()}),Do.apply(this,arguments)}function sr(){return sr=(0,J.Z)(function*($,z){try{const re=yield function li($,z){return ba.apply(this,arguments)}($.firebaseDependencies,z),ke=Object.assign(Object.assign({},z),{token:re,createTime:Date.now()});return yield Rs($.firebaseDependencies,ke),re}catch(re){throw yield function Hs($){return Do.apply(this,arguments)}($),re}}),sr.apply(this,arguments)}function Ho($,z){return so.apply(this,arguments)}function so(){return(so=(0,J.Z)(function*($,z){const ke={token:yield Co($,z),createTime:Date.now(),subscriptionOptions:z};return yield Rs($,ke),ke.token})).apply(this,arguments)}function q(){return(q=(0,J.Z)(function*($,z){return(yield $.pushManager.getSubscription())||$.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:sa(z)})})).apply(this,arguments)}function W($){const z={from:$.from,collapseKey:$.collapse_key,messageId:$.fcmMessageId};return function ge($,z){if(!z.notification)return;$.notification={};const re=z.notification.title;re&&($.notification.title=re);const ke=z.notification.body;ke&&($.notification.body=ke);const dt=z.notification.image;dt&&($.notification.image=dt);const ft=z.notification.icon;ft&&($.notification.icon=ft)}(z,$),function L($,z){z.data&&($.data=z.data)}(z,$),function R($,z){var re,ke,dt,ft,$t;if(!(z.fcmOptions||null!==(re=z.notification)&&void 0!==re&&re.click_action))return;$.fcmOptions={};const Un=null!==(dt=null===(ke=z.fcmOptions)||void 0===ke?void 0:ke.link)&&void 0!==dt?dt:null===(ft=z.notification)||void 0===ft?void 0:ft.click_action;Un&&($.fcmOptions.link=Un);const xn=null===($t=z.fcmOptions)||void 0===$t?void 0:$t.analytics_label;xn&&($.fcmOptions.analyticsLabel=xn)}(z,$),z}function te($,z){const re=[];for(let ke=0;ke<$.length;ke++)re.push($.charAt(ke)),ke<z.length&&re.push(z.charAt(ke));return re.join("")}function sn($){return Pr.create("missing-app-config-values",{valueName:$})}te("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),te("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class br{constructor(z,re,ke){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const dt=function vt($){if(!$||!$.options)throw sn("App Configuration Object");if(!$.name)throw sn("App Name");const z=["projectId","apiKey","appId","messagingSenderId"],{options:re}=$;for(const ke of z)if(!re[ke])throw sn(ke);return{appName:$.name,projectId:re.projectId,apiKey:re.apiKey,appId:re.appId,senderId:re.messagingSenderId}}(z);this.firebaseDependencies={app:z,appConfig:dt,installations:re,analyticsProvider:ke}}_delete(){return Promise.resolve()}}function oi($){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,J.Z)(function*($){try{$.swRegistration=yield navigator.serviceWorker.register(co,{scope:ts}),$.swRegistration.update().catch(()=>{})}catch(z){throw Pr.create("failed-service-worker-registration",{browserErrorMessage:null==z?void 0:z.message})}})).apply(this,arguments)}function rs(){return(rs=(0,J.Z)(function*($,z){if(!z&&!$.swRegistration&&(yield oi($)),z||!$.swRegistration){if(!(z instanceof ServiceWorkerRegistration))throw Pr.create("invalid-sw-registration");$.swRegistration=z}})).apply(this,arguments)}function Ca(){return(Ca=(0,J.Z)(function*($,z){z?$.vapidKey=z:$.vapidKey||($.vapidKey=$i)})).apply(this,arguments)}function Fi(){return Fi=(0,J.Z)(function*($,z){if(!navigator)throw Pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pr.create("permission-blocked");return yield function Ui($,z){return Ca.apply(this,arguments)}($,null==z?void 0:z.vapidKey),yield function hs($,z){return rs.apply(this,arguments)}($,null==z?void 0:z.serviceWorkerRegistration),function Fo($){return po.apply(this,arguments)}($)}),Fi.apply(this,arguments)}function la(){return(la=(0,J.Z)(function*($,z,re){const ke=function ua($){switch($){case no.NOTIFICATION_CLICKED:return"notification_open";case no.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(z);(yield $.firebaseDependencies.analyticsProvider.get()).logEvent(ke,{message_id:re[Us],message_name:re[Vo],message_time:re[Io],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Da(){return Da=(0,J.Z)(function*($,z){const re=z.data;if(!re.isFirebaseMessaging)return;$.onMessageHandler&&re.messageType===no.PUSH_RECEIVED&&("function"==typeof $.onMessageHandler?$.onMessageHandler(W(re)):$.onMessageHandler.next(W(re)));const ke=re.data;(function O($){return"object"==typeof $&&!!$&&Us in $})(ke)&&"1"===ke[Is]&&(yield function Os($,z,re){return la.apply(this,arguments)}($,re.messageType,ke))}),Da.apply(this,arguments)}const Na="@firebase/messaging",gl=$=>{const z=new br($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),$.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",re=>function ks($,z){return Da.apply(this,arguments)}(z,re)),z},To=$=>{const z=$.getProvider("messaging").getImmediate();return{getToken:ke=>function pl($,z){return Fi.apply(this,arguments)}(z,ke)}};function ca(){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,J.Z)(function*(){try{yield(0,Fe.eu)()}catch{return!1}return typeof window<"u"&&(0,Fe.hl)()&&(0,Fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function zs(){(0,fe._registerComponent)(new Me.wA("messaging",gl,"PUBLIC")),(0,fe._registerComponent)(new Me.wA("messaging-internal",To,"PRIVATE")),(0,fe.registerVersion)(Na,"0.12.4"),(0,fe.registerVersion)(Na,"0.12.4","esm2017")}();const da="analytics",Ao="firebase_id",$r="origin",fs=6e4,mi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wo="https://www.googletagmanager.com/gtag/js",ni=new Ie.Yd("@firebase/analytics"),ss=new Fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Nl($){if(!$.startsWith(Wo)){const z=ss.create("invalid-gtag-resource",{gtagURL:$});return ni.warn(z.message),""}return $}function yl($){return Promise.all($.map(z=>z.catch(re=>re)))}function V(){return(V=(0,J.Z)(function*($,z,re,ke,dt,ft){const $t=ke[dt];try{if($t)yield z[$t];else{const xn=(yield yl(re)).find(ur=>ur.measurementId===dt);xn&&(yield z[xn.appId])}}catch(Un){ni.error(Un)}$("config",dt,ft)})).apply(this,arguments)}function be(){return(be=(0,J.Z)(function*($,z,re,ke,dt){try{let ft=[];if(dt&&dt.send_to){let $t=dt.send_to;Array.isArray($t)||($t=[$t]);const Un=yield yl(re);for(const xn of $t){const ur=Un.find(Yn=>Yn.measurementId===xn),Cr=ur&&z[ur.appId];if(!Cr){ft=[];break}ft.push(Cr)}}0===ft.length&&(ft=Object.values(z)),yield Promise.all(ft),$("event",ke,dt||{})}catch(ft){ni.error(ft)}})).apply(this,arguments)}const Ur=30,Zn=new class lr{constructor(z={},re=1e3){this.throttleMetadata=z,this.intervalMillis=re}getThrottleMetadata(z){return this.throttleMetadata[z]}setThrottleMetadata(z,re){this.throttleMetadata[z]=re}deleteThrottleMetadata(z){delete this.throttleMetadata[z]}};function Vi($){return new Headers({Accept:"application/json","x-goog-api-key":$})}function yn(){return(yn=(0,J.Z)(function*($){var z;const{appId:re,apiKey:ke}=$,dt={method:"GET",headers:Vi(ke)},ft=mi.replace("{app-id}",re),$t=yield fetch(ft,dt);if(200!==$t.status&&304!==$t.status){let Un="";try{const xn=yield $t.json();null!==(z=xn.error)&&void 0!==z&&z.message&&(Un=xn.error.message)}catch{}throw ss.create("config-fetch-failed",{httpStatus:$t.status,responseMessage:Un})}return $t.json()})).apply(this,arguments)}function on(){return(on=(0,J.Z)(function*($,z=Zn,re){const{appId:ke,apiKey:dt,measurementId:ft}=$.options;if(!ke)throw ss.create("no-app-id");if(!dt){if(ft)return{measurementId:ft,appId:ke};throw ss.create("no-api-key")}const $t=z.getThrottleMetadata(ke)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Un=new Za;return setTimeout((0,J.Z)(function*(){Un.abort()}),void 0!==re?re:fs),At({appId:ke,apiKey:dt,measurementId:ft},$t,Un,z)})).apply(this,arguments)}function At($,z,re){return Wt.apply(this,arguments)}function Wt(){return Wt=(0,J.Z)(function*($,{throttleEndTimeMillis:z,backoffCount:re},ke,dt=Zn){var ft;const{appId:$t,measurementId:Un}=$;try{yield function Ti($,z){return new Promise((re,ke)=>{const dt=Math.max(z-Date.now(),0),ft=setTimeout(re,dt);$.addEventListener(()=>{clearTimeout(ft),ke(ss.create("fetch-throttle",{throttleEndTimeMillis:z}))})})}(ke,z)}catch(xn){if(Un)return ni.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==xn?void 0:xn.message}]`),{appId:$t,measurementId:Un};throw xn}try{const xn=yield function hn($){return yn.apply(this,arguments)}($);return dt.deleteThrottleMetadata($t),xn}catch(xn){const ur=xn;if(!function Gs($){if(!($ instanceof Fe.ZR&&$.customData))return!1;const z=Number($.customData.httpStatus);return 429===z||500===z||503===z||504===z}(ur)){if(dt.deleteThrottleMetadata($t),Un)return ni.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Un} provided in the "measurementId" field in the local Firebase config. [${null==ur?void 0:ur.message}]`),{appId:$t,measurementId:Un};throw xn}const Cr=503===Number(null===(ft=null==ur?void 0:ur.customData)||void 0===ft?void 0:ft.httpStatus)?(0,Fe.$s)(re,dt.intervalMillis,Ur):(0,Fe.$s)(re,dt.intervalMillis),Yn={throttleEndTimeMillis:Date.now()+Cr,backoffCount:re+1};return dt.setThrottleMetadata($t,Yn),ni.debug(`Calling attemptFetch again in ${Cr} millis`),At($,Yn,ke,dt)}}),Wt.apply(this,arguments)}class Za{constructor(){this.listeners=[]}addEventListener(z){this.listeners.push(z)}abort(){this.listeners.forEach(z=>z())}}let Xa,La;function fa(){return(fa=(0,J.Z)(function*($,z,re,ke,dt){if(dt&&dt.global)$("event",re,ke);else{const ft=yield z;$("event",re,Object.assign(Object.assign({},ke),{send_to:ft}))}})).apply(this,arguments)}function jr(){return(jr=(0,J.Z)(function*(){if(!(0,Fe.hl)())return ni.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Fe.eu)()}catch($){return ni.warn(ss.create("indexeddb-unavailable",{errorInfo:null==$?void 0:$.toString()}).message),!1}return!0})).apply(this,arguments)}function ui(){return ui=(0,J.Z)(function*($,z,re,ke,dt,ft,$t){var Un;const xn=function xo($){return on.apply(this,arguments)}($);xn.then(Yi=>{re[Yi.measurementId]=Yi.appId,$.options.measurementId&&Yi.measurementId!==$.options.measurementId&&ni.warn(`The measurement ID in the local Firebase config (${$.options.measurementId}) does not match the measurement ID fetched from the server (${Yi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Yi=>ni.error(Yi)),z.push(xn);const ur=function tl(){return jr.apply(this,arguments)}().then(Yi=>{if(Yi)return ke.getId()}),[Cr,Yn]=yield Promise.all([xn,ur]);(function Vn($){const z=window.document.getElementsByTagName("script");for(const re of Object.values(z))if(re.src&&re.src.includes(Wo)&&re.src.includes($))return re;return null})(ft)||function Ka($,z){const re=function Ya($,z){let re;return window.trustedTypes&&(re=window.trustedTypes.createPolicy($,z)),re}("firebase-js-sdk-policy",{createScriptURL:Nl}),ke=document.createElement("script"),dt=`${Wo}?l=${$}&id=${z}`;ke.src=re?null==re?void 0:re.createScriptURL(dt):dt,ke.async=!0,document.head.appendChild(ke)}(ft,Cr.measurementId),La&&(dt("consent","default",La),function Ii($){La=$}(void 0)),dt("js",new Date);const qi=null!==(Un=null==$t?void 0:$t.config)&&void 0!==Un?Un:{};return qi[$r]="firebase",qi.update=!0,null!=Yn&&(qi[Ao]=Yn),dt("config",Cr.measurementId,qi),Xa&&(dt("set",Xa),function Xn($){Xa=$}(void 0)),Cr.measurementId}),ui.apply(this,arguments)}class Sn{constructor(z){this.app=z}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},nl=[];const Ws={};let Fl,ps,_l="dataLayer",El="gtag",ru=!1;function iu($,z,re){!function gs(){const $=[];if((0,Fe.ru)()&&$.push("This is a browser extension environment."),(0,Fe.zI)()||$.push("Cookies are not available."),$.length>0){const z=$.map((ke,dt)=>`(${dt+1}) ${ke}`).join(" "),re=ss.create("invalid-analytics-context",{errorInfo:z});ni.warn(re.message)}}();const ke=$.options.appId;if(!ke)throw ss.create("no-app-id");if(!$.options.apiKey){if(!$.options.measurementId)throw ss.create("no-api-key");ni.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${$.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pi[ke])throw ss.create("already-exists",{id:ke});if(!ru){!function F($){let z=[];Array.isArray(window[$])?z=window[$]:window[$]=z}(_l);const{wrappedGtag:ft,gtagCore:$t}=function zt($,z,re,ke,dt){let ft=function(...$t){window[ke].push(arguments)};return window[dt]&&"function"==typeof window[dt]&&(ft=window[dt]),window[dt]=function Mt($,z,re,ke){function ft(){return ft=(0,J.Z)(function*($t,Un,xn){try{"event"===$t?yield function oe($,z,re,ke,dt){return be.apply(this,arguments)}($,z,re,Un,xn):"config"===$t?yield function Z($,z,re,ke,dt,ft){return V.apply(this,arguments)}($,z,re,ke,Un,xn):"consent"===$t?$("consent","update",xn):$("set",Un)}catch(ur){ni.error(ur)}}),ft.apply(this,arguments)}return function dt($t,Un,xn){return ft.apply(this,arguments)}}(ft,$,z,re),{gtagCore:ft,wrappedGtag:window[dt]}}(Pi,nl,Ws,_l,El);ps=ft,Fl=$t,ru=!0}return Pi[ke]=function Uc($,z,re,ke,dt,ft,$t){return ui.apply(this,arguments)}($,nl,Ws,z,Fl,_l,re),new Sn($)}function ms(){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,J.Z)(function*(){if((0,Fe.ru)()||!(0,Fe.zI)()||!(0,Fe.hl)())return!1;try{return yield(0,Fe.eu)()}catch{return!1}})).apply(this,arguments)}const pa="@firebase/analytics";!function oc(){(0,fe._registerComponent)(new Me.wA(da,(z,{options:re})=>iu(z.getProvider("app").getImmediate(),z.getProvider("installations-internal").getImmediate(),re),"PUBLIC")),(0,fe._registerComponent)(new Me.wA("analytics-internal",function $(z){try{const re=z.getProvider(da).getImmediate();return{logEvent:(ke,dt,ft)=>function rl($,z,re,ke){$=(0,Fe.m9)($),function Qa($,z,re,ke,dt){return fa.apply(this,arguments)}(ps,Pi[$.app.options.appId],z,re,ke).catch(dt=>ni.error(dt))}(re,ke,dt,ft)}}catch(re){throw ss.create("interop-component-reg-failed",{reason:re})}},"PRIVATE")),(0,fe.registerVersion)(pa,"0.9.5"),(0,fe.registerVersion)(pa,"0.9.5","esm2017")}();var xu=j(4408),eo=j(7565);const Yo=new class Bl extends eo.v{}(class Dd extends xu.o{constructor(z,re){super(z,re),this.scheduler=z,this.work=re}schedule(z,re=0){return re>0?super.schedule(z,re):(this.delay=re,this.state=z,this.scheduler.flush(this),this)}execute(z,re){return re>0||this.closed?super.execute(z,re):this._execute(z,re)}requestAsyncId(z,re,ke=0){return null!=ke&&ke>0||null==ke&&this.delay>0?super.requestAsyncId(z,re,ke):(z.flush(this),0)}});var ao=j(4986),ji=j(8505),sl=j(5363),ys=j(9468);const Ko=new _.GfV("7.5.0"),vs="__angularfire_symbol__analyticsIsSupportedValue",Zo="__angularfire_symbol__analyticsIsSupported",ri="__angularfire_symbol__remoteConfigIsSupportedValue",Hr="__angularfire_symbol__remoteConfigIsSupported",vr="__angularfire_symbol__messagingIsSupportedValue",Xo="__angularfire_symbol__messagingIsSupported";function S($,z,re){if(z){if(1===z.length)return z[0];const ft=z.filter($t=>$t.app===re);if(1===ft.length)return ft[0]}return re.container.getProvider($).getImmediate({optional:!0})}globalThis[Zo]||(globalThis[Zo]=ms().then($=>globalThis[vs]=$).catch(()=>globalThis[vs]=!1)),globalThis[Xo]||(globalThis[Xo]=ca().then($=>globalThis[vr]=$).catch(()=>globalThis[vr]=!1)),globalThis[Hr]||(globalThis[Hr]=bi().then($=>globalThis[ri]=$).catch(()=>globalThis[ri]=!1));const A=($,z)=>{const re=z?[z]:(0,m.C6)(),ke=[];return re.forEach(dt=>{dt.container.getProvider($).instances.forEach($t=>{ke.includes($t)||ke.push($t)})}),ke};function I(){}class P{constructor(z,re=Yo){this.zone=z,this.delegate=re}now(){return this.delegate.now()}schedule(z,re,ke){const dt=this.zone;return this.delegate.schedule(function($t){dt.runGuarded(()=>{z.apply(this,[$t])})},re,ke)}}class H{constructor(z){this.zone=z,this.task=null}call(z,re){const ke=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",I,{},I,I)),re.pipe((0,ji.b)({next:ke,complete:ke,error:ke})).subscribe(z).add(ke)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ie=(()=>{class ${constructor(re){this.ngZone=re,this.outsideAngular=re.runOutsideAngular(()=>new P(Zone.current)),this.insideAngular=re.run(()=>new P(Zone.current,ao.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return $.\u0275fac=function(re){return new(re||$)(_.LFG(_.R0b))},$.\u0275prov=_.Yz7({token:$,factory:$.\u0275fac,providedIn:"root"}),$})();function ae(){const $=globalThis.\u0275AngularFireScheduler;if(!$)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return $}function dn($){return $.pipe((0,sl.Q)(ae().outsideAngular))}function Dn($){return ae(),function zr($){return function(re){return(re=re.lift(new H($.ngZone))).pipe((0,ys.R)($.outsideAngular),(0,sl.Q)($.insideAngular))}}(ae())($)}},2090:(cn,mt,j)=>{"use strict";j.d(mt,{$s:()=>Ln,BH:()=>Xe,DV:()=>Hn,Dv:()=>ir,G6:()=>xe,GJ:()=>Xt,L:()=>Be,LL:()=>Vt,Pz:()=>et,Sg:()=>X,UG:()=>Qe,UI:()=>En,US:()=>Me,Wj:()=>wi,Wl:()=>bt,Yr:()=>ot,ZB:()=>ve,ZR:()=>Zt,aH:()=>Je,b$:()=>nt,cI:()=>Ee,dS:()=>si,eu:()=>Oe,g5:()=>J,gK:()=>Kr,gQ:()=>_r,h$:()=>Le,hl:()=>Ae,hu:()=>m,jU:()=>ye,lb:()=>Dr,m9:()=>Er,ne:()=>On,p$:()=>me,pd:()=>di,r3:()=>Tn,ru:()=>qe,tV:()=>we,uI:()=>ne,ug:()=>nr,vZ:()=>gr,w1:()=>ze,w9:()=>_n,xO:()=>Rr,xb:()=>or,z$:()=>Re,zI:()=>it,zd:()=>Vr});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},m=function($e,Pe){if(!$e)throw J(Pe)},J=function($e){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+$e)},fe=function($e){const Pe=[];let Ke=0;for(let Nt=0;Nt<$e.length;Nt++){let It=$e.charCodeAt(Nt);It<128?Pe[Ke++]=It:It<2048?(Pe[Ke++]=It>>6|192,Pe[Ke++]=63&It|128):55296==(64512&It)&&Nt+1<$e.length&&56320==(64512&$e.charCodeAt(Nt+1))?(It=65536+((1023&It)<<10)+(1023&$e.charCodeAt(++Nt)),Pe[Ke++]=It>>18|240,Pe[Ke++]=It>>12&63|128,Pe[Ke++]=It>>6&63|128,Pe[Ke++]=63&It|128):(Pe[Ke++]=It>>12|224,Pe[Ke++]=It>>6&63|128,Pe[Ke++]=63&It|128)}return Pe},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($e,Pe){if(!Array.isArray($e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ke=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Nt=[];for(let It=0;It<$e.length;It+=3){const wn=$e[It],We=It+1<$e.length,He=We?$e[It+1]:0,De=It+2<$e.length,Et=De?$e[It+2]:0;let Bn=(15&He)<<2|Et>>6,Rn=63&Et;De||(Rn=64,We||(Bn=64)),Nt.push(Ke[wn>>2],Ke[(3&wn)<<4|He>>4],Ke[Bn],Ke[Rn])}return Nt.join("")},encodeString($e,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa($e):this.encodeByteArray(fe($e),Pe)},decodeString($e,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob($e):function($e){const Pe=[];let Ke=0,Nt=0;for(;Ke<$e.length;){const It=$e[Ke++];if(It<128)Pe[Nt++]=String.fromCharCode(It);else if(It>191&&It<224){const wn=$e[Ke++];Pe[Nt++]=String.fromCharCode((31&It)<<6|63&wn)}else if(It>239&&It<365){const De=((7&It)<<18|(63&$e[Ke++])<<12|(63&$e[Ke++])<<6|63&$e[Ke++])-65536;Pe[Nt++]=String.fromCharCode(55296+(De>>10)),Pe[Nt++]=String.fromCharCode(56320+(1023&De))}else{const wn=$e[Ke++],We=$e[Ke++];Pe[Nt++]=String.fromCharCode((15&It)<<12|(63&wn)<<6|63&We)}}return Pe.join("")}(this.decodeStringToByteArray($e,Pe))},decodeStringToByteArray($e,Pe){this.init_();const Ke=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,Nt=[];for(let It=0;It<$e.length;){const wn=Ke[$e.charAt(It++)],He=It<$e.length?Ke[$e.charAt(It)]:0;++It;const Et=It<$e.length?Ke[$e.charAt(It)]:64;++It;const qt=It<$e.length?Ke[$e.charAt(It)]:64;if(++It,null==wn||null==He||null==Et||null==qt)throw new Ie;Nt.push(wn<<2|He>>4),64!==Et&&(Nt.push(He<<4&240|Et>>2),64!==qt&&Nt.push(Et<<6&192|qt))}return Nt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $e=0;$e<this.ENCODED_VALS.length;$e++)this.byteToCharMap_[$e]=this.ENCODED_VALS.charAt($e),this.charToByteMap_[this.byteToCharMap_[$e]]=$e,this.byteToCharMapWebSafe_[$e]=this.ENCODED_VALS_WEBSAFE.charAt($e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$e]]=$e,$e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($e)]=$e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($e)]=$e)}}};class Ie extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function($e){const Pe=fe($e);return Me.encodeByteArray(Pe,!0)},Be=function($e){return Le($e).replace(/\./g,"")},we=function($e){try{return Me.decodeString($e,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function me($e){return ve(void 0,$e)}function ve($e,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===$e&&($e={});break;case Array:$e=[];break;default:return Pe}for(const Ke in Pe)!Pe.hasOwnProperty(Ke)||!Ue(Ke)||($e[Ke]=ve($e[Ke],Pe[Ke]));return $e}function Ue($e){return"__proto__"!==$e}const Ce=()=>{try{return function je(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $e=process.env.__FIREBASE_DEFAULTS__;return $e?JSON.parse($e):void 0})()||(()=>{if(typeof document>"u")return;let $e;try{$e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Pe=$e&&we($e[1]);return Pe&&JSON.parse(Pe)})()}catch($e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$e}`)}},Je=()=>{var $e;return null===($e=Ce())||void 0===$e?void 0:$e.config},et=$e=>{var Pe;return null===(Pe=Ce())||void 0===Pe?void 0:Pe[`_${$e}`]};class Xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Pe,Ke)=>{this.resolve=Pe,this.reject=Ke})}wrapCallback(Pe){return(Ke,Nt)=>{Ke?this.reject(Ke):this.resolve(Nt),"function"==typeof Pe&&(this.promise.catch(()=>{}),1===Pe.length?Pe(Ke):Pe(Ke,Nt))}}}function X($e,Pe){if($e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Nt=Pe||"demo-project",It=$e.iat||0,wn=$e.sub||$e.user_id;if(!wn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const We=Object.assign({iss:`https://securetoken.google.com/${Nt}`,aud:Nt,iat:It,exp:It+3600,auth_time:It,sub:wn,user_id:wn,firebase:{sign_in_provider:"custom",identities:{}}},$e);return[Be(JSON.stringify({alg:"none",type:"JWT"})),Be(JSON.stringify(We)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ne(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function Qe(){var $e;const Pe=null===($e=Ce())||void 0===$e?void 0:$e.forceEnvironment;if("node"===Pe)return!0;if("browser"===Pe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function qe(){const $e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $e&&void 0!==$e.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ze(){const $e=Re();return $e.indexOf("MSIE ")>=0||$e.indexOf("Trident/")>=0}function ot(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function xe(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function Oe(){return new Promise(($e,Pe)=>{try{let Ke=!0;const Nt="validate-browser-context-for-indexeddb-analytics-module",It=self.indexedDB.open(Nt);It.onsuccess=()=>{It.result.close(),Ke||self.indexedDB.deleteDatabase(Nt),$e(!0)},It.onupgradeneeded=()=>{Ke=!1},It.onerror=()=>{var wn;Pe((null===(wn=It.error)||void 0===wn?void 0:wn.message)||"")}}catch(Ke){Pe(Ke)}})}function it(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Zt extends Error{constructor(Pe,Ke,Nt){super(Ke),this.code=Pe,this.customData=Nt,this.name="FirebaseError",Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vt.prototype.create)}}class Vt{constructor(Pe,Ke,Nt){this.service=Pe,this.serviceName=Ke,this.errors=Nt}create(Pe,...Ke){const Nt=Ke[0]||{},It=`${this.service}/${Pe}`,wn=this.errors[Pe],We=wn?function vn($e,Pe){return $e.replace(gt,(Ke,Nt)=>{const It=Pe[Nt];return null!=It?String(It):`<${Nt}?>`})}(wn,Nt):"Error";return new Zt(It,`${this.serviceName}: ${We} (${It}).`,Nt)}}const gt=/\{\$([^}]+)}/g;function Ee($e){return JSON.parse($e)}function bt($e){return JSON.stringify($e)}const nn=function($e){let Pe={},Ke={},Nt={},It="";try{const wn=$e.split(".");Pe=Ee(we(wn[0])||""),Ke=Ee(we(wn[1])||""),It=wn[2],Nt=Ke.d||{},delete Ke.d}catch{}return{header:Pe,claims:Ke,data:Nt,signature:It}},_n=function($e){const Ke=nn($e).claims;return!!Ke&&"object"==typeof Ke&&Ke.hasOwnProperty("iat")},Xt=function($e){const Pe=nn($e).claims;return"object"==typeof Pe&&!0===Pe.admin};function Tn($e,Pe){return Object.prototype.hasOwnProperty.call($e,Pe)}function Hn($e,Pe){if(Object.prototype.hasOwnProperty.call($e,Pe))return $e[Pe]}function or($e){for(const Pe in $e)if(Object.prototype.hasOwnProperty.call($e,Pe))return!1;return!0}function En($e,Pe,Ke){const Nt={};for(const It in $e)Object.prototype.hasOwnProperty.call($e,It)&&(Nt[It]=Pe.call(Ke,$e[It],It,$e));return Nt}function gr($e,Pe){if($e===Pe)return!0;const Ke=Object.keys($e),Nt=Object.keys(Pe);for(const It of Ke){if(!Nt.includes(It))return!1;const wn=$e[It],We=Pe[It];if(tn(wn)&&tn(We)){if(!gr(wn,We))return!1}else if(wn!==We)return!1}for(const It of Nt)if(!Ke.includes(It))return!1;return!0}function tn($e){return null!==$e&&"object"==typeof $e}function Rr($e){const Pe=[];for(const[Ke,Nt]of Object.entries($e))Array.isArray(Nt)?Nt.forEach(It=>{Pe.push(encodeURIComponent(Ke)+"="+encodeURIComponent(It))}):Pe.push(encodeURIComponent(Ke)+"="+encodeURIComponent(Nt));return Pe.length?"&"+Pe.join("&"):""}function Vr($e){const Pe={};return $e.replace(/^\?/,"").split("&").forEach(Nt=>{if(Nt){const[It,wn]=Nt.split("=");Pe[decodeURIComponent(It)]=decodeURIComponent(wn)}}),Pe}function di($e){const Pe=$e.indexOf("?");if(!Pe)return"";const Ke=$e.indexOf("#",Pe);return $e.substring(Pe,Ke>0?Ke:void 0)}class _r{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Pe,Ke){Ke||(Ke=0);const Nt=this.W_;if("string"==typeof Pe)for(let qt=0;qt<16;qt++)Nt[qt]=Pe.charCodeAt(Ke)<<24|Pe.charCodeAt(Ke+1)<<16|Pe.charCodeAt(Ke+2)<<8|Pe.charCodeAt(Ke+3),Ke+=4;else for(let qt=0;qt<16;qt++)Nt[qt]=Pe[Ke]<<24|Pe[Ke+1]<<16|Pe[Ke+2]<<8|Pe[Ke+3],Ke+=4;for(let qt=16;qt<80;qt++){const Bn=Nt[qt-3]^Nt[qt-8]^Nt[qt-14]^Nt[qt-16];Nt[qt]=4294967295&(Bn<<1|Bn>>>31)}let Et,Lt,It=this.chain_[0],wn=this.chain_[1],We=this.chain_[2],He=this.chain_[3],De=this.chain_[4];for(let qt=0;qt<80;qt++){qt<40?qt<20?(Et=He^wn&(We^He),Lt=1518500249):(Et=wn^We^He,Lt=1859775393):qt<60?(Et=wn&We|He&(wn|We),Lt=2400959708):(Et=wn^We^He,Lt=3395469782);const Bn=(It<<5|It>>>27)+Et+De+Lt+Nt[qt]&4294967295;De=He,He=We,We=4294967295&(wn<<30|wn>>>2),wn=It,It=Bn}this.chain_[0]=this.chain_[0]+It&4294967295,this.chain_[1]=this.chain_[1]+wn&4294967295,this.chain_[2]=this.chain_[2]+We&4294967295,this.chain_[3]=this.chain_[3]+He&4294967295,this.chain_[4]=this.chain_[4]+De&4294967295}update(Pe,Ke){if(null==Pe)return;void 0===Ke&&(Ke=Pe.length);const Nt=Ke-this.blockSize;let It=0;const wn=this.buf_;let We=this.inbuf_;for(;It<Ke;){if(0===We)for(;It<=Nt;)this.compress_(Pe,It),It+=this.blockSize;if("string"==typeof Pe){for(;It<Ke;)if(wn[We]=Pe.charCodeAt(It),++We,++It,We===this.blockSize){this.compress_(wn),We=0;break}}else for(;It<Ke;)if(wn[We]=Pe[It],++We,++It,We===this.blockSize){this.compress_(wn),We=0;break}}this.inbuf_=We,this.total_+=Ke}digest(){const Pe=[];let Ke=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let It=this.blockSize-1;It>=56;It--)this.buf_[It]=255&Ke,Ke/=256;this.compress_(this.buf_);let Nt=0;for(let It=0;It<5;It++)for(let wn=24;wn>=0;wn-=8)Pe[Nt]=this.chain_[It]>>wn&255,++Nt;return Pe}}function On($e,Pe){const Ke=new Jt($e,Pe);return Ke.subscribe.bind(Ke)}class Jt{constructor(Pe,Ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ke,this.task.then(()=>{Pe(this)}).catch(Nt=>{this.error(Nt)})}next(Pe){this.forEachObserver(Ke=>{Ke.next(Pe)})}error(Pe){this.forEachObserver(Ke=>{Ke.error(Pe)}),this.close(Pe)}complete(){this.forEachObserver(Pe=>{Pe.complete()}),this.close()}subscribe(Pe,Ke,Nt){let It;if(void 0===Pe&&void 0===Ke&&void 0===Nt)throw new Error("Missing Observer.");It=function Kt($e,Pe){if("object"!=typeof $e||null===$e)return!1;for(const Ke of Pe)if(Ke in $e&&"function"==typeof $e[Ke])return!0;return!1}(Pe,["next","error","complete"])?Pe:{next:Pe,error:Ke,complete:Nt},void 0===It.next&&(It.next=yr),void 0===It.error&&(It.error=yr),void 0===It.complete&&(It.complete=yr);const wn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?It.error(this.finalError):It.complete()}catch{}}),this.observers.push(It),wn}unsubscribeOne(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Pe){if(!this.finalized)for(let Ke=0;Ke<this.observers.length;Ke++)this.sendOne(Ke,Pe)}sendOne(Pe,Ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Pe])try{Ke(this.observers[Pe])}catch(Nt){typeof console<"u"&&console.error&&console.error(Nt)}})}close(Pe){this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const ir=function($e,Pe,Ke,Nt){let It;if(Nt<Pe?It="at least "+Pe:Nt>Ke&&(It=0===Ke?"none":"no more than "+Ke),It)throw new Error($e+" failed: Was called with "+Nt+(1===Nt?" argument.":" arguments.")+" Expects "+It+".")};function Kr($e,Pe){return`${$e} failed: ${Pe} argument `}function wi($e,Pe,Ke,Nt){if((!Nt||Ke)&&"function"!=typeof Ke)throw new Error(Kr($e,Pe)+"must be a valid function.")}function Dr($e,Pe,Ke,Nt){if((!Nt||Ke)&&("object"!=typeof Ke||null===Ke))throw new Error(Kr($e,Pe)+"must be a valid context object.")}const si=function($e){const Pe=[];let Ke=0;for(let Nt=0;Nt<$e.length;Nt++){let It=$e.charCodeAt(Nt);if(It>=55296&&It<=56319){const wn=It-55296;Nt++,m(Nt<$e.length,"Surrogate pair missing trail surrogate."),It=65536+(wn<<10)+($e.charCodeAt(Nt)-56320)}It<128?Pe[Ke++]=It:It<2048?(Pe[Ke++]=It>>6|192,Pe[Ke++]=63&It|128):It<65536?(Pe[Ke++]=It>>12|224,Pe[Ke++]=It>>6&63|128,Pe[Ke++]=63&It|128):(Pe[Ke++]=It>>18|240,Pe[Ke++]=It>>12&63|128,Pe[Ke++]=It>>6&63|128,Pe[Ke++]=63&It|128)}return Pe},nr=function($e){let Pe=0;for(let Ke=0;Ke<$e.length;Ke++){const Nt=$e.charCodeAt(Ke);Nt<128?Pe++:Nt<2048?Pe+=2:Nt>=55296&&Nt<=56319?(Pe+=4,Ke++):Pe+=3}return Pe},fi=1e3,an=2,jt=144e5,Cn=.5;function Ln($e,Pe=fi,Ke=an){const Nt=Pe*Math.pow(Ke,$e),It=Math.round(Cn*Nt*(Math.random()-.5)*2);return Math.min(jt,Nt+It)}function Er($e){return $e&&$e._delegate?$e._delegate:$e}},2200:(cn,mt,j)=>{"use strict";j.d(mt,{c:()=>Dt});var _=j(9397),m=j(3457);let J;const Fe=Ne=>Ne.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Me=Ne=>(void 0===J&&(J=void 0===Ne.style.animationName&&void 0!==Ne.style.webkitAnimationName?"-webkit-":""),J),Ie=(Ne,Ce,ue)=>{const ut=Ce.startsWith("animation")?Me(Ne):"";Ne.style.setProperty(ut+Ce,ue)},Le=(Ne,Ce)=>{const ue=Ce.startsWith("animation")?Me(Ne):"";Ne.style.removeProperty(ue+Ce)},me=[],rt=(Ne=[],Ce)=>{if(void 0!==Ce){const ue=Array.isArray(Ce)?Ce:[Ce];return[...Ne,...ue]}return Ne},Dt=Ne=>{let Ce,ue,ut,Je,et,Xe,ye,Ae,Oe,it,ht,gt,Ee,X=[],Re=[],ne=[],Qe=!1,qe={},nt=[],ct=[],ze={},_t=0,ot=!1,xe=!1,Zt=!0,Vt=!1,vn=!0,bt=!1;const nn=Ne,fn=[],Mn=[],_n=[],Xt=[],Tn=[],Hn=[],or=[],En=[],gr=[],tn=[],Yr="function"==typeof AnimationEffect||void 0!==m.w&&"function"==typeof m.w.AnimationEffect,Rr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&Yr,di=()=>tn,Kt=(le,Ge)=>((null!=Ge&&Ge.oneTimeCallback?Mn:fn).push({c:le,o:Ge}),Ee),ir=()=>{if(Rr)tn.forEach(le=>{le.cancel()}),tn.length=0;else{const le=_n.slice();(0,_.r)(()=>{le.forEach(Ge=>{Le(Ge,"animation-name"),Le(Ge,"animation-duration"),Le(Ge,"animation-timing-function"),Le(Ge,"animation-iteration-count"),Le(Ge,"animation-delay"),Le(Ge,"animation-play-state"),Le(Ge,"animation-fill-mode"),Le(Ge,"animation-direction")})})}},Kr=()=>{Tn.forEach(le=>{null!=le&&le.parentNode&&le.parentNode.removeChild(le)}),Tn.length=0},$n=()=>void 0!==et?et:ye?ye.getFill():"both",Er=()=>void 0!==Oe?Oe:void 0!==Xe?Xe:ye?ye.getDirection():"normal",$e=()=>ot?"linear":void 0!==ut?ut:ye?ye.getEasing():"linear",Pe=()=>xe?0:void 0!==it?it:void 0!==ue?ue:ye?ye.getDuration():0,Ke=()=>void 0!==Je?Je:ye?ye.getIterations():1,Nt=()=>void 0!==ht?ht:void 0!==Ce?Ce:ye?ye.getDelay():0,gi=()=>{0!==_t&&(_t--,0===_t&&((()=>{un(),En.forEach(kt=>kt()),gr.forEach(kt=>kt());const le=Zt?1:0,Ge=nt,Ye=ct,Ct=ze;_n.forEach(kt=>{const xt=kt.classList;Ge.forEach(Gt=>xt.add(Gt)),Ye.forEach(Gt=>xt.remove(Gt));for(const Gt in Ct)Ct.hasOwnProperty(Gt)&&Ie(kt,Gt,Ct[Gt])}),fn.forEach(kt=>kt.c(le,Ee)),Mn.forEach(kt=>kt.c(le,Ee)),Mn.length=0,vn=!0,Zt&&(Vt=!0),Zt=!0})(),ye&&ye.animationFinish()))},ki=(le=!0)=>{Kr();const Ge=(Ne=>(Ne.forEach(Ce=>{for(const ue in Ce)if(Ce.hasOwnProperty(ue)){const ut=Ce[ue];if("easing"===ue)Ce["animation-timing-function"]=ut,delete Ce[ue];else{const Je=Fe(ue);Je!==ue&&(Ce[Je]=ut,delete Ce[ue])}}}),Ne))(X);_n.forEach(Ye=>{if(Ge.length>0){const Ct=((Ne=[])=>Ne.map(Ce=>{const ue=Ce.offset,ut=[];for(const Je in Ce)Ce.hasOwnProperty(Je)&&"offset"!==Je&&ut.push(`${Je}: ${Ce[Je]};`);return`${100*ue}% { ${ut.join(" ")} }`}).join(" "))(Ge);gt=void 0!==Ne?Ne:(Ne=>{let Ce=me.indexOf(Ne);return Ce<0&&(Ce=me.push(Ne)-1),`ion-animation-${Ce}`})(Ct);const kt=((Ne,Ce,ue)=>{var ut;const Je=(Ne=>{const Ce=void 0!==Ne.getRootNode?Ne.getRootNode():Ne;return Ce.head||Ce})(ue),et=Me(ue),Xe=Je.querySelector("#"+Ne);if(Xe)return Xe;const X=(null!==(ut=ue.ownerDocument)&&void 0!==ut?ut:document).createElement("style");return X.id=Ne,X.textContent=`@${et}keyframes ${Ne} { ${Ce} } @${et}keyframes ${Ne}-alt { ${Ce} }`,Je.appendChild(X),X})(gt,Ct,Ye);Tn.push(kt),Ie(Ye,"animation-duration",`${Pe()}ms`),Ie(Ye,"animation-timing-function",$e()),Ie(Ye,"animation-delay",`${Nt()}ms`),Ie(Ye,"animation-fill-mode",$n()),Ie(Ye,"animation-direction",Er());const xt=Ke()===1/0?"infinite":Ke().toString();Ie(Ye,"animation-iteration-count",xt),Ie(Ye,"animation-play-state","paused"),le&&Ie(Ye,"animation-name",`${kt.id}-alt`),(0,_.r)(()=>{Ie(Ye,"animation-name",kt.id||null)})}})},es=(le=!0)=>{(()=>{Hn.forEach(Ct=>Ct()),or.forEach(Ct=>Ct());const le=Re,Ge=ne,Ye=qe;_n.forEach(Ct=>{const kt=Ct.classList;le.forEach(xt=>kt.add(xt)),Ge.forEach(xt=>kt.remove(xt));for(const xt in Ye)Ye.hasOwnProperty(xt)&&Ie(Ct,xt,Ye[xt])})})(),X.length>0&&(Rr?(_n.forEach(le=>{const Ge=le.animate(X,{id:nn,delay:Nt(),duration:Pe(),easing:$e(),iterations:Ke(),fill:$n(),direction:Er()});Ge.pause(),tn.push(Ge)}),tn.length>0&&(tn[0].onfinish=()=>{gi()})):ki(le)),Qe=!0},Mi=le=>{if(le=Math.min(Math.max(le,0),.9999),Rr)tn.forEach(Ge=>{Ge.currentTime=Ge.effect.getComputedTiming().delay+Pe()*le,Ge.pause()});else{const Ge=`-${Pe()*le}ms`;_n.forEach(Ye=>{X.length>0&&(Ie(Ye,"animation-delay",Ge),Ie(Ye,"animation-play-state","paused"))})}},ar=le=>{tn.forEach(Ge=>{Ge.effect.updateTiming({delay:Nt(),duration:Pe(),easing:$e(),iterations:Ke(),fill:$n(),direction:Er()})}),void 0!==le&&Mi(le)},Or=(le=!0,Ge)=>{(0,_.r)(()=>{_n.forEach(Ye=>{Ie(Ye,"animation-name",gt||null),Ie(Ye,"animation-duration",`${Pe()}ms`),Ie(Ye,"animation-timing-function",$e()),Ie(Ye,"animation-delay",void 0!==Ge?`-${Ge*Pe()}ms`:`${Nt()}ms`),Ie(Ye,"animation-fill-mode",$n()||null),Ie(Ye,"animation-direction",Er()||null);const Ct=Ke()===1/0?"infinite":Ke().toString();Ie(Ye,"animation-iteration-count",Ct),le&&Ie(Ye,"animation-name",`${gt}-alt`),(0,_.r)(()=>{Ie(Ye,"animation-name",gt||null)})})})},tr=(le=!1,Ge=!0,Ye)=>(le&&Xt.forEach(Ct=>{Ct.update(le,Ge,Ye)}),Rr?ar(Ye):Or(Ge,Ye),Ee),Gi=()=>{Qe&&(Rr?tn.forEach(le=>{le.pause()}):_n.forEach(le=>{Ie(le,"animation-play-state","paused")}),bt=!0)},ti=()=>{Ae=void 0,gi()},un=()=>{Ae&&clearTimeout(Ae)},Lr=le=>new Promise(Ge=>{null!=le&&le.sync&&(xe=!0,Kt(()=>xe=!1,{oneTimeCallback:!0})),Qe||es(),Vt&&(Rr?(Mi(0),ar()):Or(),Vt=!1),vn&&(_t=Xt.length+1,vn=!1),Kt(()=>Ge(),{oneTimeCallback:!0}),Xt.forEach(Ye=>{Ye.play()}),Rr?(tn.forEach(le=>{le.play()}),(0===X.length||0===_n.length)&&gi()):(()=>{if(un(),(0,_.r)(()=>{_n.forEach(le=>{X.length>0&&Ie(le,"animation-play-state","running")})}),0===X.length||0===_n.length)gi();else{const le=Nt()||0,Ge=Pe()||0,Ye=Ke()||1;isFinite(Ye)&&(Ae=setTimeout(ti,le+Ge*Ye+100)),((Ne,Ce)=>{let ue;const ut={passive:!0},et=Xe=>{Ne===Xe.target&&(ue&&ue(),un(),(0,_.r)(()=>{_n.forEach(le=>{Le(le,"animation-duration"),Le(le,"animation-delay"),Le(le,"animation-play-state")}),(0,_.r)(gi)}))};Ne&&(Ne.addEventListener("webkitAnimationEnd",et,ut),Ne.addEventListener("animationend",et,ut),ue=()=>{Ne.removeEventListener("webkitAnimationEnd",et,ut),Ne.removeEventListener("animationend",et,ut)})})(_n[0])}})(),bt=!1}),se=(le,Ge)=>{const Ye=X[0];return void 0===Ye||void 0!==Ye.offset&&0!==Ye.offset?X=[{offset:0,[le]:Ge},...X]:Ye[le]=Ge,Ee};return Ee={parentAnimation:ye,elements:_n,childAnimations:Xt,id:nn,animationFinish:gi,from:se,to:(le,Ge)=>{const Ye=X[X.length-1];return void 0===Ye||void 0!==Ye.offset&&1!==Ye.offset?X=[...X,{offset:1,[le]:Ge}]:Ye[le]=Ge,Ee},fromTo:(le,Ge,Ye)=>se(le,Ge).to(le,Ye),parent:le=>(ye=le,Ee),play:Lr,pause:()=>(Xt.forEach(le=>{le.pause()}),Gi(),Ee),stop:()=>{Xt.forEach(le=>{le.stop()}),Qe&&(ir(),Qe=!1),ot=!1,xe=!1,vn=!0,Oe=void 0,it=void 0,ht=void 0,_t=0,Vt=!1,Zt=!0,bt=!1},destroy:le=>(Xt.forEach(Ge=>{Ge.destroy(le)}),(le=>{ir(),le&&Kr()})(le),_n.length=0,Xt.length=0,X.length=0,fn.length=0,Mn.length=0,Qe=!1,vn=!0,Ee),keyframes:le=>{const Ge=X!==le;return X=le,Ge&&(le=>{Rr?di().forEach(Ge=>{if(Ge.effect.setKeyframes)Ge.effect.setKeyframes(le);else{const Ye=new KeyframeEffect(Ge.effect.target,le,Ge.effect.getTiming());Ge.effect=Ye}}):ki()})(X),Ee},addAnimation:le=>{if(null!=le)if(Array.isArray(le))for(const Ge of le)Ge.parent(Ee),Xt.push(Ge);else le.parent(Ee),Xt.push(le);return Ee},addElement:le=>{if(null!=le)if(1===le.nodeType)_n.push(le);else if(le.length>=0)for(let Ge=0;Ge<le.length;Ge++)_n.push(le[Ge]);else console.error("Invalid addElement value");return Ee},update:tr,fill:le=>(et=le,tr(!0),Ee),direction:le=>(Xe=le,tr(!0),Ee),iterations:le=>(Je=le,tr(!0),Ee),duration:le=>(!Rr&&0===le&&(le=1),ue=le,tr(!0),Ee),easing:le=>(ut=le,tr(!0),Ee),delay:le=>(Ce=le,tr(!0),Ee),getWebAnimations:di,getKeyframes:()=>X,getFill:$n,getDirection:Er,getDelay:Nt,getIterations:Ke,getEasing:$e,getDuration:Pe,afterAddRead:le=>(En.push(le),Ee),afterAddWrite:le=>(gr.push(le),Ee),afterClearStyles:(le=[])=>{for(const Ge of le)ze[Ge]="";return Ee},afterStyles:(le={})=>(ze=le,Ee),afterRemoveClass:le=>(ct=rt(ct,le),Ee),afterAddClass:le=>(nt=rt(nt,le),Ee),beforeAddRead:le=>(Hn.push(le),Ee),beforeAddWrite:le=>(or.push(le),Ee),beforeClearStyles:(le=[])=>{for(const Ge of le)qe[Ge]="";return Ee},beforeStyles:(le={})=>(qe=le,Ee),beforeRemoveClass:le=>(ne=rt(ne,le),Ee),beforeAddClass:le=>(Re=rt(Re,le),Ee),onFinish:Kt,isRunning:()=>0!==_t&&!bt,progressStart:(le=!1,Ge)=>(Xt.forEach(Ye=>{Ye.progressStart(le,Ge)}),Gi(),ot=le,Qe||es(),tr(!1,!0,Ge),Ee),progressStep:le=>(Xt.forEach(Ge=>{Ge.progressStep(le)}),Mi(le),Ee),progressEnd:(le,Ge,Ye)=>(ot=!1,Xt.forEach(Ct=>{Ct.progressEnd(le,Ge,Ye)}),void 0!==Ye&&(it=Ye),Vt=!1,Zt=!0,0===le?(Oe="reverse"===Er()?"normal":"reverse","reverse"===Oe&&(Zt=!1),Rr?(tr(),Mi(1-Ge)):(ht=(1-Ge)*Pe()*-1,tr(!1,!1))):1===le&&(Rr?(tr(),Mi(Ge)):(ht=Ge*Pe()*-1,tr(!1,!1))),void 0!==le&&(Kt(()=>{it=void 0,Oe=void 0,ht=void 0},{oneTimeCallback:!0}),ye||Lr()),Ee)}}},3982:(cn,mt,j)=>{"use strict";j.d(mt,{E:()=>we,a:()=>_,s:()=>Le});const _=me=>{try{if(me instanceof Ie)return me.value;if(!fe()||"string"!=typeof me||""===me)return me;if(me.includes("onload="))return"";const ve=document.createDocumentFragment(),Ue=document.createElement("div");ve.appendChild(Ue),Ue.innerHTML=me,Me.forEach(Ne=>{const Ce=ve.querySelectorAll(Ne);for(let ue=Ce.length-1;ue>=0;ue--){const ut=Ce[ue];ut.parentNode?ut.parentNode.removeChild(ut):ve.removeChild(ut);const Je=J(ut);for(let et=0;et<Je.length;et++)m(Je[et])}});const je=J(ve);for(let Ne=0;Ne<je.length;Ne++)m(je[Ne]);const rt=document.createElement("div");rt.appendChild(ve);const Dt=rt.querySelector("div");return null!==Dt?Dt.innerHTML:rt.innerHTML}catch(ve){return console.error(ve),""}},m=me=>{if(me.nodeType&&1!==me.nodeType)return;if(typeof NamedNodeMap<"u"&&!(me.attributes instanceof NamedNodeMap))return void me.remove();for(let Ue=me.attributes.length-1;Ue>=0;Ue--){const je=me.attributes.item(Ue),rt=je.name;if(!Fe.includes(rt.toLowerCase())){me.removeAttribute(rt);continue}const Dt=je.value,Ne=me[rt];(null!=Dt&&Dt.toLowerCase().includes("javascript:")||null!=Ne&&Ne.toLowerCase().includes("javascript:"))&&me.removeAttribute(rt)}const ve=J(me);for(let Ue=0;Ue<ve.length;Ue++)m(ve[Ue])},J=me=>null!=me.children?me.children:me.childNodes,fe=()=>{var me;const ve=window,Ue=null===(me=null==ve?void 0:ve.Ionic)||void 0===me?void 0:me.config;return!Ue||(Ue.get?Ue.get("sanitizerEnabled",!0):!0===Ue.sanitizerEnabled||void 0===Ue.sanitizerEnabled)},Fe=["class","id","href","src","name","slot"],Me=["script","style","iframe","meta","link","object","embed"];class Ie{constructor(ve){this.value=ve}}const Le=me=>{const ve=window,Ue=ve.Ionic;if(!Ue||!Ue.config||"Object"===Ue.config.constructor.name)return ve.Ionic=ve.Ionic||{},ve.Ionic.config=Object.assign(Object.assign({},ve.Ionic.config),me),ve.Ionic.config},we=!1},5375:(cn,mt,j)=>{"use strict";j.d(mt,{C:()=>Fe,a:()=>J,d:()=>fe});var _=j(5861),m=j(9397);const J=function(){var Me=(0,_.Z)(function*(Ie,Le,Be,we,me,ve){var Ue;if(Ie)return Ie.attachViewToDom(Le,Be,me,we);if(!(ve||"string"==typeof Be||Be instanceof HTMLElement))throw new Error("framework delegate is missing");const je="string"==typeof Be?null===(Ue=Le.ownerDocument)||void 0===Ue?void 0:Ue.createElement(Be):Be;return we&&we.forEach(rt=>je.classList.add(rt)),me&&Object.assign(je,me),Le.appendChild(je),yield new Promise(rt=>(0,m.c)(je,rt)),je});return function(Le,Be,we,me,ve,Ue){return Me.apply(this,arguments)}}(),fe=(Me,Ie)=>{if(Ie){if(Me)return Me.removeViewFromDom(Ie.parentElement,Ie);Ie.remove()}return Promise.resolve()},Fe=()=>{let Me,Ie;return{attachViewToDom:function(){var we=(0,_.Z)(function*(me,ve,Ue={},je=[]){var rt,Dt;if(Me=me,ve){const Ce="string"==typeof ve?null===(rt=Me.ownerDocument)||void 0===rt?void 0:rt.createElement(ve):ve;je.forEach(ue=>Ce.classList.add(ue)),Object.assign(Ce,Ue),Me.appendChild(Ce),yield new Promise(ue=>(0,m.c)(Ce,ue))}else if(Me.children.length>0&&("ION-MODAL"===Me.tagName||"ION-POPOVER"===Me.tagName)&&!Me.children[0].classList.contains("ion-delegate-host")){const ue=null===(Dt=Me.ownerDocument)||void 0===Dt?void 0:Dt.createElement("div");ue.classList.add("ion-delegate-host"),je.forEach(ut=>ue.classList.add(ut)),ue.append(...Me.children),Me.appendChild(ue)}const Ne=document.querySelector("ion-app")||document.body;return Ie=document.createComment("ionic teleport"),Me.parentNode.insertBefore(Ie,Me),Ne.appendChild(Me),Me});return function(ve,Ue){return we.apply(this,arguments)}}(),removeViewFromDom:()=>(Me&&Ie&&(Ie.parentNode.insertBefore(Me,Ie),Ie.remove()),Promise.resolve())}}},4349:(cn,mt,j)=>{"use strict";j.d(mt,{G:()=>Fe});class m{constructor(Ie,Le,Be,we,me){this.id=Le,this.name=Be,this.disableScroll=me,this.priority=1e6*we+Le,this.ctrl=Ie}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ie=this.ctrl.capture(this.name,this.id,this.priority);return Ie&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ie}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class J{constructor(Ie,Le,Be,we){this.id=Le,this.disable=Be,this.disableScroll=we,this.ctrl=Ie}block(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.disableGesture(Ie,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ie of this.disable)this.ctrl.enableGesture(Ie,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const fe="backdrop-no-scroll",Fe=new class _{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ie){var Le;return new m(this,this.newID(),Ie.name,null!==(Le=Ie.priority)&&void 0!==Le?Le:0,!!Ie.disableScroll)}createBlocker(Ie={}){return new J(this,this.newID(),Ie.disable,!!Ie.disableScroll)}start(Ie,Le,Be){return this.canStart(Ie)?(this.requestedStart.set(Le,Be),!0):(this.requestedStart.delete(Le),!1)}capture(Ie,Le,Be){if(!this.start(Ie,Le,Be))return!1;const we=this.requestedStart;let me=-1e4;if(we.forEach(ve=>{me=Math.max(me,ve)}),me===Be){this.capturedId=Le,we.clear();const ve=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ie}});return document.dispatchEvent(ve),!0}return we.delete(Le),!1}release(Ie){this.requestedStart.delete(Ie),this.capturedId===Ie&&(this.capturedId=void 0)}disableGesture(Ie,Le){let Be=this.disabledGestures.get(Ie);void 0===Be&&(Be=new Set,this.disabledGestures.set(Ie,Be)),Be.add(Le)}enableGesture(Ie,Le){const Be=this.disabledGestures.get(Ie);void 0!==Be&&Be.delete(Le)}disableScroll(Ie){this.disabledScroll.add(Ie),1===this.disabledScroll.size&&document.body.classList.add(fe)}enableScroll(Ie){this.disabledScroll.delete(Ie),0===this.disabledScroll.size&&document.body.classList.remove(fe)}canStart(Ie){return!(void 0!==this.capturedId||this.isDisabled(Ie))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ie){const Le=this.disabledGestures.get(Ie);return!!(Le&&Le.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(cn,mt,j)=>{"use strict";j.r(mt),j.d(mt,{MENU_BACK_BUTTON_PRIORITY:()=>Fe,OVERLAY_BACK_BUTTON_PRIORITY:()=>fe,blockHardwareBackButton:()=>m,startHardwareBackButton:()=>J});var _=j(5861);const m=()=>{document.addEventListener("backbutton",()=>{})},J=()=>{const Me=document;let Ie=!1;Me.addEventListener("backbutton",()=>{if(Ie)return;let Le=0,Be=[];const we=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ue,je){Be.push({priority:Ue,handler:je,id:Le++})}}});Me.dispatchEvent(we);const me=function(){var Ue=(0,_.Z)(function*(je){try{if(null!=je&&je.handler){const rt=je.handler(ve);null!=rt&&(yield rt)}}catch(rt){console.error(rt)}});return function(rt){return Ue.apply(this,arguments)}}(),ve=()=>{if(Be.length>0){let Ue={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};Be.forEach(je=>{je.priority>=Ue.priority&&(Ue=je)}),Ie=!0,Be=Be.filter(je=>je.id!==Ue.id),me(Ue).then(()=>Ie=!1)}};ve()})},fe=100,Fe=99},9397:(cn,mt,j)=>{"use strict";j.d(mt,{a:()=>Le,b:()=>Be,c:()=>J,d:()=>Dt,e:()=>rt,f:()=>je,g:()=>we,h:()=>et,i:()=>Ie,j:()=>Fe,k:()=>Ue,l:()=>Ne,m:()=>fe,n:()=>ve,o:()=>Ce,p:()=>ut,q:()=>Je,r:()=>me,s:()=>X,t:()=>_,u:()=>Xe,v:()=>ue});const _=(Re,ne=0)=>new Promise(Qe=>{m(Re,ne,Qe)}),m=(Re,ne=0,Qe)=>{let ye,qe;const nt={passive:!0},ze=()=>{ye&&ye()},_t=ot=>{(void 0===ot||Re===ot.target)&&(ze(),Qe(ot))};return Re&&(Re.addEventListener("webkitTransitionEnd",_t,nt),Re.addEventListener("transitionend",_t,nt),qe=setTimeout(_t,ne+500),ye=()=>{qe&&(clearTimeout(qe),qe=void 0),Re.removeEventListener("webkitTransitionEnd",_t,nt),Re.removeEventListener("transitionend",_t,nt)}),ze},J=(Re,ne)=>{Re.componentOnReady?Re.componentOnReady().then(Qe=>ne(Qe)):me(()=>ne(Re))},fe=Re=>void 0!==Re.componentOnReady,Fe=(Re,ne=[])=>{const Qe={};return ne.forEach(ye=>{Re.hasAttribute(ye)&&(null!==Re.getAttribute(ye)&&(Qe[ye]=Re.getAttribute(ye)),Re.removeAttribute(ye))}),Qe},Me=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],Ie=(Re,ne)=>{let Qe=Me;return ne&&ne.length>0&&(Qe=Qe.filter(ye=>!ne.includes(ye))),Fe(Re,Qe)},Le=(Re,ne,Qe,ye)=>{var qe;if(typeof window<"u"){const nt=window,ct=null===(qe=null==nt?void 0:nt.Ionic)||void 0===qe?void 0:qe.config;if(ct){const ze=ct.get("_ael");if(ze)return ze(Re,ne,Qe,ye);if(ct._ael)return ct._ael(Re,ne,Qe,ye)}}return Re.addEventListener(ne,Qe,ye)},Be=(Re,ne,Qe,ye)=>{var qe;if(typeof window<"u"){const nt=window,ct=null===(qe=null==nt?void 0:nt.Ionic)||void 0===qe?void 0:qe.config;if(ct){const ze=ct.get("_rel");if(ze)return ze(Re,ne,Qe,ye);if(ct._rel)return ct._rel(Re,ne,Qe,ye)}}return Re.removeEventListener(ne,Qe,ye)},we=(Re,ne=Re)=>Re.shadowRoot||ne,me=Re=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Re):"function"==typeof requestAnimationFrame?requestAnimationFrame(Re):setTimeout(Re),ve=Re=>!!Re.shadowRoot&&!!Re.attachShadow,Ue=Re=>{const ne=Re.closest("ion-item");return ne?ne.querySelector("ion-label"):null},je=Re=>{if(Re.focus(),Re.classList.contains("ion-focusable")){const ne=Re.closest("ion-app");ne&&ne.setFocus([Re])}},rt=(Re,ne)=>{let Qe;const ye=Re.getAttribute("aria-labelledby"),qe=Re.id;let nt=null!==ye&&""!==ye.trim()?ye:ne+"-lbl",ct=null!==ye&&""!==ye.trim()?document.getElementById(ye):Ue(Re);return ct?(null===ye&&(ct.id=nt),Qe=ct.textContent,ct.setAttribute("aria-hidden","true")):""!==qe.trim()&&(ct=document.querySelector(`label[for="${qe}"]`),ct&&(""!==ct.id?nt=ct.id:ct.id=nt=`${qe}-lbl`,Qe=ct.textContent)),{label:ct,labelId:nt,labelText:Qe}},Dt=(Re,ne,Qe,ye,qe)=>{if(Re||ve(ne)){let nt=ne.querySelector("input.aux-input");nt||(nt=ne.ownerDocument.createElement("input"),nt.type="hidden",nt.classList.add("aux-input"),ne.appendChild(nt)),nt.disabled=qe,nt.name=Qe,nt.value=ye||""}},Ne=(Re,ne,Qe)=>Math.max(Re,Math.min(ne,Qe)),Ce=(Re,ne)=>{if(!Re){const Qe="ASSERT: "+ne;throw console.error(Qe),new Error(Qe)}},ue=Re=>Re.timeStamp||Date.now(),ut=Re=>{if(Re){const ne=Re.changedTouches;if(ne&&ne.length>0){const Qe=ne[0];return{x:Qe.clientX,y:Qe.clientY}}if(void 0!==Re.pageX)return{x:Re.pageX,y:Re.pageY}}return{x:0,y:0}},Je=Re=>{const ne="rtl"===document.dir;switch(Re){case"start":return ne;case"end":return!ne;default:throw new Error(`"${Re}" is not a valid value for [side]. Use "start" or "end" instead.`)}},et=(Re,ne)=>{const Qe=Re._original||Re;return{_original:Re,emit:Xe(Qe.emit.bind(Qe),ne)}},Xe=(Re,ne=0)=>{let Qe;return(...ye)=>{clearTimeout(Qe),Qe=setTimeout(Re,ne,...ye)}},X=(Re,ne)=>{if(null!=Re||(Re={}),null!=ne||(ne={}),Re===ne)return!0;const Qe=Object.keys(Re);if(Qe.length!==Object.keys(ne).length)return!1;for(const ye of Qe)if(!(ye in ne)||Re[ye]!==ne[ye])return!1;return!0}},3457:(cn,mt,j)=>{"use strict";j.d(mt,{w:()=>_});const _=typeof window<"u"?window:void 0},1557:(cn,mt,j)=>{"use strict";j.d(mt,{m:()=>me});var _=j(5861),m=j(7593),J=j(9397),fe=j(6406),Fe=j(2200);const Me=ve=>(0,Fe.c)().duration(ve?400:300),Ie=ve=>{let Ue,je;const rt=ve.width+8,Dt=(0,Fe.c)(),Ne=(0,Fe.c)();ve.isEndSide?(Ue=rt+"px",je="0px"):(Ue=-rt+"px",je="0px"),Dt.addElement(ve.menuInnerEl).fromTo("transform",`translateX(${Ue})`,`translateX(${je})`);const ue="ios"===(0,fe.b)(ve),ut=ue?.2:.25;return Ne.addElement(ve.backdropEl).fromTo("opacity",.01,ut),Me(ue).addAnimation([Dt,Ne])},Le=ve=>{let Ue,je;const rt=(0,fe.b)(ve),Dt=ve.width;ve.isEndSide?(Ue=-Dt+"px",je=Dt+"px"):(Ue=Dt+"px",je=-Dt+"px");const Ne=(0,Fe.c)().addElement(ve.menuInnerEl).fromTo("transform",`translateX(${je})`,"translateX(0px)"),Ce=(0,Fe.c)().addElement(ve.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ue})`),ue=(0,Fe.c)().addElement(ve.backdropEl).fromTo("opacity",.01,.32);return Me("ios"===rt).addAnimation([Ne,Ce,ue])},Be=ve=>{const Ue=(0,fe.b)(ve),je=ve.width*(ve.isEndSide?-1:1)+"px",rt=(0,Fe.c)().addElement(ve.contentEl).fromTo("transform","translateX(0px)",`translateX(${je})`);return Me("ios"===Ue).addAnimation(rt)},me=(()=>{const ve=new Map,Ue=[],je=function(){var Ae=(0,_.Z)(function*(Oe){const it=yield Je(Oe);return!!it&&it.open()});return function(it){return Ae.apply(this,arguments)}}(),rt=function(){var Ae=(0,_.Z)(function*(Oe){const it=yield void 0!==Oe?Je(Oe):et();return void 0!==it&&it.close()});return function(it){return Ae.apply(this,arguments)}}(),Dt=function(){var Ae=(0,_.Z)(function*(Oe){const it=yield Je(Oe);return!!it&&it.toggle()});return function(it){return Ae.apply(this,arguments)}}(),Ne=function(){var Ae=(0,_.Z)(function*(Oe,it){const ht=yield Je(it);return ht&&(ht.disabled=!Oe),ht});return function(it,ht){return Ae.apply(this,arguments)}}(),Ce=function(){var Ae=(0,_.Z)(function*(Oe,it){const ht=yield Je(it);return ht&&(ht.swipeGesture=Oe),ht});return function(it,ht){return Ae.apply(this,arguments)}}(),ue=function(){var Ae=(0,_.Z)(function*(Oe){if(null!=Oe){const it=yield Je(Oe);return void 0!==it&&it.isOpen()}return void 0!==(yield et())});return function(it){return Ae.apply(this,arguments)}}(),ut=function(){var Ae=(0,_.Z)(function*(Oe){const it=yield Je(Oe);return!!it&&!it.disabled});return function(it){return Ae.apply(this,arguments)}}(),Je=function(){var Ae=(0,_.Z)(function*(Oe){return yield xe(),"start"===Oe||"end"===Oe?ot(Zt=>Zt.side===Oe&&!Zt.disabled)||ot(Zt=>Zt.side===Oe):null!=Oe?ot(ht=>ht.menuId===Oe):ot(ht=>!ht.disabled)||(Ue.length>0?Ue[0].el:void 0)});return function(it){return Ae.apply(this,arguments)}}(),et=function(){var Ae=(0,_.Z)(function*(){return yield xe(),ct()});return function(){return Ae.apply(this,arguments)}}(),Xe=function(){var Ae=(0,_.Z)(function*(){return yield xe(),ze()});return function(){return Ae.apply(this,arguments)}}(),X=function(){var Ae=(0,_.Z)(function*(){return yield xe(),_t()});return function(){return Ae.apply(this,arguments)}}(),Re=(Ae,Oe)=>{ve.set(Ae,Oe)},ye=Ae=>{const Oe=Ae.side;Ue.filter(it=>it.side===Oe&&it!==Ae).forEach(it=>it.disabled=!0)},qe=function(){var Ae=(0,_.Z)(function*(Oe,it,ht){if(_t())return!1;if(it){const Zt=yield et();Zt&&Oe.el!==Zt&&(yield Zt.setOpen(!1,!1))}return Oe._setOpen(it,ht)});return function(it,ht,Zt){return Ae.apply(this,arguments)}}(),ct=()=>ot(Ae=>Ae._isOpen),ze=()=>Ue.map(Ae=>Ae.el),_t=()=>Ue.some(Ae=>Ae.isAnimating),ot=Ae=>{const Oe=Ue.find(Ae);if(void 0!==Oe)return Oe.el},xe=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(Ae=>new Promise(Oe=>(0,J.c)(Ae,Oe))));return Re("reveal",Be),Re("push",Le),Re("overlay",Ie),typeof document<"u"&&document.addEventListener("ionBackButton",Ae=>{const Oe=ct();Oe&&Ae.detail.register(m.MENU_BACK_BUTTON_PRIORITY,()=>Oe.close())}),{registerAnimation:Re,get:Je,getMenus:Xe,getOpen:et,isEnabled:ut,swipeGesture:Ce,isAnimating:X,isOpen:ue,enable:Ne,toggle:Dt,close:rt,open:je,_getOpenSync:ct,_createAnimation:(Ae,Oe)=>{const it=ve.get(Ae);if(!it)throw new Error("animation not registered");return it(Oe)},_register:Ae=>{Ue.indexOf(Ae)<0&&(Ae.disabled||ye(Ae),Ue.push(Ae))},_unregister:Ae=>{const Oe=Ue.indexOf(Ae);Oe>-1&&Ue.splice(Oe,1)},_setOpen:qe,_setActiveMenu:ye}})()},1898:(cn,mt,j)=>{"use strict";j.r(mt),j.d(mt,{GESTURE_CONTROLLER:()=>_.G,createGesture:()=>Be});var _=j(4349);const m=(Ue,je,rt,Dt)=>{const Ne=J(Ue)?{capture:!!Dt.capture,passive:!!Dt.passive}:!!Dt.capture;let Ce,ue;return Ue.__zone_symbol__addEventListener?(Ce="__zone_symbol__addEventListener",ue="__zone_symbol__removeEventListener"):(Ce="addEventListener",ue="removeEventListener"),Ue[Ce](je,rt,Ne),()=>{Ue[ue](je,rt,Ne)}},J=Ue=>{if(void 0===fe)try{const je=Object.defineProperty({},"passive",{get:()=>{fe=!0}});Ue.addEventListener("optsTest",()=>{},je)}catch{fe=!1}return!!fe};let fe;const Ie=Ue=>Ue instanceof Document?Ue:Ue.ownerDocument,Be=Ue=>{let je=!1,rt=!1,Dt=!0,Ne=!1;const Ce=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ue),ue=Ce.canStart,ut=Ce.onWillStart,Je=Ce.onStart,et=Ce.onEnd,Xe=Ce.notCaptured,X=Ce.onMove,Re=Ce.threshold,ne=Ce.passive,Qe=Ce.blurOnStart,ye={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},qe=((Ue,je,rt)=>{const Dt=rt*(Math.PI/180),Ne="x"===Ue,Ce=Math.cos(Dt),ue=je*je;let ut=0,Je=0,et=!1,Xe=0;return{start(X,Re){ut=X,Je=Re,Xe=0,et=!0},detect(X,Re){if(!et)return!1;const ne=X-ut,Qe=Re-Je,ye=ne*ne+Qe*Qe;if(ye<ue)return!1;const qe=Math.sqrt(ye),nt=(Ne?ne:Qe)/qe;return Xe=nt>Ce?1:nt<-Ce?-1:0,et=!1,!0},isGesture:()=>0!==Xe,getDirection:()=>Xe}})(Ce.direction,Ce.threshold,Ce.maxAngle),nt=_.G.createGesture({name:Ue.gestureName,priority:Ue.gesturePriority,disableScroll:Ue.disableScroll}),_t=()=>{je&&(Ne=!1,X&&X(ye))},ot=()=>!!nt.capture()&&(je=!0,Dt=!1,ye.startX=ye.currentX,ye.startY=ye.currentY,ye.startTime=ye.currentTime,ut?ut(ye).then(Ae):Ae(),!0),Ae=()=>{Qe&&(()=>{if(typeof document<"u"){const Vt=document.activeElement;null!=Vt&&Vt.blur&&Vt.blur()}})(),Je&&Je(ye),Dt=!0},Oe=()=>{je=!1,rt=!1,Ne=!1,Dt=!0,nt.release()},it=Vt=>{const vn=je,gt=Dt;if(Oe(),gt){if(we(ye,Vt),vn)return void(et&&et(ye));Xe&&Xe(ye)}},ht=((Ue,je,rt,Dt,Ne)=>{let Ce,ue,ut,Je,et,Xe,X,Re=0;const ne=xe=>{Re=Date.now()+2e3,je(xe)&&(!ue&&rt&&(ue=m(Ue,"touchmove",rt,Ne)),ut||(ut=m(xe.target,"touchend",ye,Ne)),Je||(Je=m(xe.target,"touchcancel",ye,Ne)))},Qe=xe=>{Re>Date.now()||je(xe)&&(!Xe&&rt&&(Xe=m(Ie(Ue),"mousemove",rt,Ne)),X||(X=m(Ie(Ue),"mouseup",qe,Ne)))},ye=xe=>{nt(),Dt&&Dt(xe)},qe=xe=>{ct(),Dt&&Dt(xe)},nt=()=>{ue&&ue(),ut&&ut(),Je&&Je(),ue=ut=Je=void 0},ct=()=>{Xe&&Xe(),X&&X(),Xe=X=void 0},ze=()=>{nt(),ct()},_t=(xe=!0)=>{xe?(Ce||(Ce=m(Ue,"touchstart",ne,Ne)),et||(et=m(Ue,"mousedown",Qe,Ne))):(Ce&&Ce(),et&&et(),Ce=et=void 0,ze())};return{enable:_t,stop:ze,destroy:()=>{_t(!1),Dt=rt=je=void 0}}})(Ce.el,Vt=>{const vn=ve(Vt);return!(rt||!Dt||(me(Vt,ye),ye.startX=ye.currentX,ye.startY=ye.currentY,ye.startTime=ye.currentTime=vn,ye.velocityX=ye.velocityY=ye.deltaX=ye.deltaY=0,ye.event=Vt,ue&&!1===ue(ye))||(nt.release(),!nt.start()))&&(rt=!0,0===Re?ot():(qe.start(ye.startX,ye.startY),!0))},Vt=>{je?!Ne&&Dt&&(Ne=!0,we(ye,Vt),requestAnimationFrame(_t)):(we(ye,Vt),qe.detect(ye.currentX,ye.currentY)&&(!qe.isGesture()||!ot())&&Zt())},it,{capture:!1,passive:ne}),Zt=()=>{Oe(),ht.stop(),Xe&&Xe(ye)};return{enable(Vt=!0){Vt||(je&&it(void 0),Oe()),ht.enable(Vt)},destroy(){nt.destroy(),ht.destroy()}}},we=(Ue,je)=>{if(!je)return;const rt=Ue.currentX,Dt=Ue.currentY,Ne=Ue.currentTime;me(je,Ue);const Ce=Ue.currentX,ue=Ue.currentY,Je=(Ue.currentTime=ve(je))-Ne;if(Je>0&&Je<100){const Xe=(ue-Dt)/Je;Ue.velocityX=(Ce-rt)/Je*.7+.3*Ue.velocityX,Ue.velocityY=.7*Xe+.3*Ue.velocityY}Ue.deltaX=Ce-Ue.startX,Ue.deltaY=ue-Ue.startY,Ue.event=je},me=(Ue,je)=>{let rt=0,Dt=0;if(Ue){const Ne=Ue.changedTouches;if(Ne&&Ne.length>0){const Ce=Ne[0];rt=Ce.clientX,Dt=Ce.clientY}else void 0!==Ue.pageX&&(rt=Ue.pageX,Dt=Ue.pageY)}je.currentX=rt,je.currentY=Dt},ve=Ue=>Ue.timeStamp||Date.now()},9459:(cn,mt,j)=>{"use strict";j.d(mt,{L:()=>fe,a:()=>Fe,b:()=>Me,c:()=>Ie,d:()=>Le,e:()=>X,g:()=>Qe,l:()=>Xe,s:()=>Re,t:()=>me});var _=j(5861),m=j(9816),J=j(9397);const fe="ionViewWillEnter",Fe="ionViewDidEnter",Me="ionViewWillLeave",Ie="ionViewDidLeave",Le="ionViewWillUnload",me=ye=>new Promise((qe,nt)=>{(0,m.w)(()=>{ve(ye),Ue(ye).then(ct=>{ct.animation&&ct.animation.destroy(),je(ye),qe(ct)},ct=>{je(ye),nt(ct)})})}),ve=ye=>{const qe=ye.enteringEl,nt=ye.leavingEl;ne(qe,nt,ye.direction),ye.showGoBack?qe.classList.add("can-go-back"):qe.classList.remove("can-go-back"),Re(qe,!1),qe.style.setProperty("pointer-events","none"),nt&&(Re(nt,!1),nt.style.setProperty("pointer-events","none"))},Ue=function(){var ye=(0,_.Z)(function*(qe){const nt=yield rt(qe);return nt&&m.B.isBrowser?Dt(nt,qe):Ne(qe)});return function(nt){return ye.apply(this,arguments)}}(),je=ye=>{const qe=ye.enteringEl,nt=ye.leavingEl;qe.classList.remove("ion-page-invisible"),qe.style.removeProperty("pointer-events"),void 0!==nt&&(nt.classList.remove("ion-page-invisible"),nt.style.removeProperty("pointer-events"))},rt=function(){var ye=(0,_.Z)(function*(qe){return qe.leavingEl&&qe.animated&&0!==qe.duration?qe.animationBuilder?qe.animationBuilder:"ios"===qe.mode?(yield Promise.resolve().then(j.bind(j,500))).iosTransitionAnimation:(yield Promise.resolve().then(j.bind(j,9892))).mdTransitionAnimation:void 0});return function(nt){return ye.apply(this,arguments)}}(),Dt=function(){var ye=(0,_.Z)(function*(qe,nt){yield Ce(nt,!0);const ct=qe(nt.baseEl,nt);Je(nt.enteringEl,nt.leavingEl);const ze=yield ut(ct,nt);return nt.progressCallback&&nt.progressCallback(void 0),ze&&et(nt.enteringEl,nt.leavingEl),{hasCompleted:ze,animation:ct}});return function(nt,ct){return ye.apply(this,arguments)}}(),Ne=function(){var ye=(0,_.Z)(function*(qe){const nt=qe.enteringEl,ct=qe.leavingEl;return yield Ce(qe,!1),Je(nt,ct),et(nt,ct),{hasCompleted:!0}});return function(nt){return ye.apply(this,arguments)}}(),Ce=function(){var ye=(0,_.Z)(function*(qe,nt){(void 0!==qe.deepWait?qe.deepWait:nt)&&(yield Promise.all([X(qe.enteringEl),X(qe.leavingEl)])),yield ue(qe.viewIsReady,qe.enteringEl)});return function(nt,ct){return ye.apply(this,arguments)}}(),ue=function(){var ye=(0,_.Z)(function*(qe,nt){qe&&(yield qe(nt))});return function(nt,ct){return ye.apply(this,arguments)}}(),ut=(ye,qe)=>{const nt=qe.progressCallback,ct=new Promise(ze=>{ye.onFinish(_t=>ze(1===_t))});return nt?(ye.progressStart(!0),nt(ye)):ye.play(),ct},Je=(ye,qe)=>{Xe(qe,Me),Xe(ye,fe)},et=(ye,qe)=>{Xe(ye,Fe),Xe(qe,Ie)},Xe=(ye,qe)=>{if(ye){const nt=new CustomEvent(qe,{bubbles:!1,cancelable:!1});ye.dispatchEvent(nt)}},X=function(){var ye=(0,_.Z)(function*(qe){const nt=qe;if(nt){if(null!=nt.componentOnReady){if(null!=(yield nt.componentOnReady()))return}else if(null!=nt.__registerHost)return void(yield new Promise(ze=>(0,J.r)(ze)));yield Promise.all(Array.from(nt.children).map(X))}});return function(nt){return ye.apply(this,arguments)}}(),Re=(ye,qe)=>{qe?(ye.setAttribute("aria-hidden","true"),ye.classList.add("ion-page-hidden")):(ye.hidden=!1,ye.removeAttribute("aria-hidden"),ye.classList.remove("ion-page-hidden"))},ne=(ye,qe,nt)=>{void 0!==ye&&(ye.style.zIndex="back"===nt?"99":"101"),void 0!==qe&&(qe.style.zIndex="100")},Qe=ye=>ye.classList.contains("ion-page")?ye:ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ye},9816:(cn,mt,j)=>{"use strict";j.d(mt,{B:()=>me,H:()=>ze,a:()=>xr,b:()=>De,c:()=>Vt,d:()=>bt,e:()=>Lr,f:()=>Ee,g:()=>vn,h:()=>nt,i:()=>Cn,j:()=>ve,p:()=>Gi,r:()=>pi,w:()=>vi});var _=j(5861);let J,fe,Fe,Me=!1,Ie=!1,Le=!1,Be=!1,we=!1;const me={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},ve=se=>{const _e=new URL(se,Kn.$resourcesUrl$);return _e.origin!==Or.location.origin?_e.href:_e.pathname},ue="s-id",ut="sty-id",Xe="http://www.w3.org/1999/xlink",X={},ye=se=>"object"==(se=typeof se)||"function"===se;function qe(se){var _e,st,le;return null!==(le=null===(st=null===(_e=se.head)||void 0===_e?void 0:_e.querySelector('meta[name="csp-nonce"]'))||void 0===st?void 0:st.getAttribute("content"))&&void 0!==le?le:void 0}const nt=(se,_e,...st)=>{let le=null,Ge=null,Ye=null,Ct=!1,kt=!1;const xt=[],Gt=Pn=>{for(let qn=0;qn<Pn.length;qn++)le=Pn[qn],Array.isArray(le)?Gt(le):null!=le&&"boolean"!=typeof le&&((Ct="function"!=typeof se&&!ye(le))&&(le=String(le)),Ct&&kt?xt[xt.length-1].$text$+=le:xt.push(Ct?ct(null,le):le),kt=Ct)};if(Gt(st),_e){_e.key&&(Ge=_e.key),_e.name&&(Ye=_e.name);{const Pn=_e.className||_e.class;Pn&&(_e.class="object"!=typeof Pn?Pn:Object.keys(Pn).filter(qn=>Pn[qn]).join(" "))}}if("function"==typeof se)return se(null===_e?{}:_e,xt,ot);const rn=ct(se,null);return rn.$attrs$=_e,xt.length>0&&(rn.$children$=xt),rn.$key$=Ge,rn.$name$=Ye,rn},ct=(se,_e)=>({$flags$:0,$tag$:se,$text$:_e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),ze={},ot={forEach:(se,_e)=>se.map(xe).forEach(_e),map:(se,_e)=>se.map(xe).map(_e).map(Ae)},xe=se=>({vattrs:se.$attrs$,vchildren:se.$children$,vkey:se.$key$,vname:se.$name$,vtag:se.$tag$,vtext:se.$text$}),Ae=se=>{if("function"==typeof se.vtag){const st=Object.assign({},se.vattrs);return se.vkey&&(st.key=se.vkey),se.vname&&(st.name=se.vname),nt(se.vtag,st,...se.vchildren||[])}const _e=ct(se.vtag,se.vtext);return _e.$attrs$=se.vattrs,_e.$children$=se.vchildren,_e.$key$=se.vkey,_e.$name$=se.vname,_e},it=(se,_e,st,le,Ge,Ye,Ct)=>{let kt,xt,Gt,rn;if(1===Ye.nodeType){for(kt=Ye.getAttribute("c-id"),kt&&(xt=kt.split("."),(xt[0]===Ct||"0"===xt[0])&&(Gt={$flags$:0,$hostId$:xt[0],$nodeId$:xt[1],$depth$:xt[2],$index$:xt[3],$tag$:Ye.tagName.toLowerCase(),$elm$:Ye,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},_e.push(Gt),Ye.removeAttribute("c-id"),se.$children$||(se.$children$=[]),se.$children$[Gt.$index$]=Gt,se=Gt,le&&"0"===Gt.$depth$&&(le[Gt.$index$]=Gt.$elm$))),rn=Ye.childNodes.length-1;rn>=0;rn--)it(se,_e,st,le,Ge,Ye.childNodes[rn],Ct);if(Ye.shadowRoot)for(rn=Ye.shadowRoot.childNodes.length-1;rn>=0;rn--)it(se,_e,st,le,Ge,Ye.shadowRoot.childNodes[rn],Ct)}else if(8===Ye.nodeType)xt=Ye.nodeValue.split("."),(xt[1]===Ct||"0"===xt[1])&&(kt=xt[0],Gt={$flags$:0,$hostId$:xt[1],$nodeId$:xt[2],$depth$:xt[3],$index$:xt[4],$elm$:Ye,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===kt?(Gt.$elm$=Ye.nextSibling,Gt.$elm$&&3===Gt.$elm$.nodeType&&(Gt.$text$=Gt.$elm$.textContent,_e.push(Gt),Ye.remove(),se.$children$||(se.$children$=[]),se.$children$[Gt.$index$]=Gt,le&&"0"===Gt.$depth$&&(le[Gt.$index$]=Gt.$elm$))):Gt.$hostId$===Ct&&("s"===kt?(Gt.$tag$="slot",Ye["s-sn"]=xt[5]?Gt.$name$=xt[5]:"",Ye["s-sr"]=!0,le&&(Gt.$elm$=tr.createElement(Gt.$tag$),Gt.$name$&&Gt.$elm$.setAttribute("name",Gt.$name$),Ye.parentNode.insertBefore(Gt.$elm$,Ye),Ye.remove(),"0"===Gt.$depth$&&(le[Gt.$index$]=Gt.$elm$)),st.push(Gt),se.$children$||(se.$children$=[]),se.$children$[Gt.$index$]=Gt):"r"===kt&&(le?Ye.remove():(Ge["s-cr"]=Ye,Ye["s-cn"]=!0))));else if(se&&"style"===se.$tag$){const Pn=ct(null,Ye.textContent);Pn.$elm$=Ye,Pn.$index$="0",se.$children$=[Pn]}},ht=(se,_e)=>{if(1===se.nodeType){let st=0;for(;st<se.childNodes.length;st++)ht(se.childNodes[st],_e);if(se.shadowRoot)for(st=0;st<se.shadowRoot.childNodes.length;st++)ht(se.shadowRoot.childNodes[st],_e)}else if(8===se.nodeType){const st=se.nodeValue.split(".");"o"===st[0]&&(_e.set(st[1]+"."+st[2],se),se.nodeValue="",se["s-en"]=st[3])}},Vt=se=>ar.push(se),vn=se=>Qr(se).$modeName$,Ee=se=>Qr(se).$hostElement$,bt=(se,_e,st)=>{const le=Ee(se);return{emit:Ge=>nn(le,_e,{bubbles:!!(4&st),composed:!!(2&st),cancelable:!!(1&st),detail:Ge})}},nn=(se,_e,st)=>{const le=Kn.ce(_e,st);return se.dispatchEvent(le),le},fn=new WeakMap,Mn=(se,_e,st)=>{let le=Mi.get(se);us&&st?(le=le||new CSSStyleSheet,"string"==typeof le?le=_e:le.replaceSync(_e)):le=_e,Mi.set(se,le)},_n=(se,_e,st,le)=>{var Ge;let Ye=Tn(_e,st);const Ct=Mi.get(Ye);if(se=11===se.nodeType?se:tr,Ct)if("string"==typeof Ct){let xt,kt=fn.get(se=se.head||se);if(kt||fn.set(se,kt=new Set),!kt.has(Ye)){if(se.host&&(xt=se.querySelector(`[${ut}="${Ye}"]`)))xt.innerHTML=Ct;else{xt=tr.createElement("style"),xt.innerHTML=Ct;const Gt=null!==(Ge=Kn.$nonce$)&&void 0!==Ge?Ge:qe(tr);null!=Gt&&xt.setAttribute("nonce",Gt),se.insertBefore(xt,se.querySelector("link"))}kt&&kt.add(Ye)}}else se.adoptedStyleSheets.includes(Ct)||(se.adoptedStyleSheets=[...se.adoptedStyleSheets,Ct]);return Ye},Tn=(se,_e)=>"sc-"+(_e&&32&se.$flags$?se.$tagName$+"-"+_e:se.$tagName$),Hn=se=>se.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),or=(se,_e,st,le,Ge,Ye)=>{if(st!==le){let Ct=gi(se,_e),kt=_e.toLowerCase();if("class"===_e){const xt=se.classList,Gt=gr(st),rn=gr(le);xt.remove(...Gt.filter(Pn=>Pn&&!rn.includes(Pn))),xt.add(...rn.filter(Pn=>Pn&&!Gt.includes(Pn)))}else if("style"===_e){for(const xt in st)(!le||null==le[xt])&&(xt.includes("-")?se.style.removeProperty(xt):se.style[xt]="");for(const xt in le)(!st||le[xt]!==st[xt])&&(xt.includes("-")?se.style.setProperty(xt,le[xt]):se.style[xt]=le[xt])}else if("key"!==_e)if("ref"===_e)le&&le(se);else if(Ct||"o"!==_e[0]||"n"!==_e[1]){const xt=ye(le);if((Ct||xt&&null!==le)&&!Ge)try{if(se.tagName.includes("-"))se[_e]=le;else{const rn=null==le?"":le;"list"===_e?Ct=!1:(null==st||se[_e]!=rn)&&(se[_e]=rn)}}catch{}let Gt=!1;kt!==(kt=kt.replace(/^xlink\:?/,""))&&(_e=kt,Gt=!0),null==le||!1===le?(!1!==le||""===se.getAttribute(_e))&&(Gt?se.removeAttributeNS(Xe,_e):se.removeAttribute(_e)):(!Ct||4&Ye||Ge)&&!xt&&(le=!0===le?"":le,Gt?se.setAttributeNS(Xe,_e,le):se.setAttribute(_e,le))}else _e="-"===_e[2]?_e.slice(3):gi(Or,kt)?kt.slice(2):kt[2]+_e.slice(3),st&&Kn.rel(se,_e,st,!1),le&&Kn.ael(se,_e,le,!1)}},En=/\s/,gr=se=>se?se.split(En):[],tn=(se,_e,st,le)=>{const Ge=11===_e.$elm$.nodeType&&_e.$elm$.host?_e.$elm$.host:_e.$elm$,Ye=se&&se.$attrs$||X,Ct=_e.$attrs$||X;for(le in Ye)le in Ct||or(Ge,le,Ye[le],void 0,st,_e.$flags$);for(le in Ct)or(Ge,le,Ye[le],Ct[le],st,_e.$flags$)},Yr=(se,_e,st,le)=>{const Ge=_e.$children$[st];let Ct,kt,xt,Ye=0;if(Me||(Le=!0,"slot"===Ge.$tag$&&(J&&le.classList.add(J+"-s"),Ge.$flags$|=Ge.$children$?2:1)),null!==Ge.$text$)Ct=Ge.$elm$=tr.createTextNode(Ge.$text$);else if(1&Ge.$flags$)Ct=Ge.$elm$=tr.createTextNode("");else{if(Be||(Be="svg"===Ge.$tag$),Ct=Ge.$elm$=tr.createElementNS(Be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ge.$flags$?"slot-fb":Ge.$tag$),Be&&"foreignObject"===Ge.$tag$&&(Be=!1),tn(null,Ge,Be),(se=>null!=se)(J)&&Ct["s-si"]!==J&&Ct.classList.add(Ct["s-si"]=J),Ge.$children$)for(Ye=0;Ye<Ge.$children$.length;++Ye)kt=Yr(se,Ge,Ye,Ct),kt&&Ct.appendChild(kt);"svg"===Ge.$tag$?Be=!1:"foreignObject"===Ct.tagName&&(Be=!0)}return Ct["s-hn"]=Fe,3&Ge.$flags$&&(Ct["s-sr"]=!0,Ct["s-cr"]=fe,Ct["s-sn"]=Ge.$name$||"",xt=se&&se.$children$&&se.$children$[st],xt&&xt.$tag$===Ge.$tag$&&se.$elm$&&Rr(se.$elm$,!1)),Ct},Rr=(se,_e)=>{Kn.$flags$|=1;const st=se.childNodes;for(let le=st.length-1;le>=0;le--){const Ge=st[le];Ge["s-hn"]!==Fe&&Ge["s-ol"]&&(An(Ge).insertBefore(Ge,Jt(Ge)),Ge["s-ol"].remove(),Ge["s-ol"]=void 0,Le=!0),_e&&Rr(Ge,_e)}Kn.$flags$&=-2},Vr=(se,_e,st,le,Ge,Ye)=>{let kt,Ct=se["s-cr"]&&se["s-cr"].parentNode||se;for(Ct.shadowRoot&&Ct.tagName===Fe&&(Ct=Ct.shadowRoot);Ge<=Ye;++Ge)le[Ge]&&(kt=Yr(null,st,Ge,se),kt&&(le[Ge].$elm$=kt,Ct.insertBefore(kt,Jt(_e))))},di=(se,_e,st,le,Ge)=>{for(;_e<=st;++_e)(le=se[_e])&&(Ge=le.$elm$,wi(le),Ie=!0,Ge["s-ol"]?Ge["s-ol"].remove():Rr(Ge,!0),Ge.remove())},On=(se,_e)=>se.$tag$===_e.$tag$&&("slot"===se.$tag$?se.$name$===_e.$name$:se.$key$===_e.$key$),Jt=se=>se&&se["s-ol"]||se,An=se=>(se["s-ol"]?se["s-ol"]:se).parentNode,Kt=(se,_e)=>{const st=_e.$elm$=se.$elm$,le=se.$children$,Ge=_e.$children$,Ye=_e.$tag$,Ct=_e.$text$;let kt;null===Ct?(Be="svg"===Ye||"foreignObject"!==Ye&&Be,"slot"===Ye||tn(se,_e,Be),null!==le&&null!==Ge?((se,_e,st,le)=>{let Ve,yt,Ge=0,Ye=0,Ct=0,kt=0,xt=_e.length-1,Gt=_e[0],rn=_e[xt],Pn=le.length-1,qn=le[0],tt=le[Pn];for(;Ge<=xt&&Ye<=Pn;)if(null==Gt)Gt=_e[++Ge];else if(null==rn)rn=_e[--xt];else if(null==qn)qn=le[++Ye];else if(null==tt)tt=le[--Pn];else if(On(Gt,qn))Kt(Gt,qn),Gt=_e[++Ge],qn=le[++Ye];else if(On(rn,tt))Kt(rn,tt),rn=_e[--xt],tt=le[--Pn];else if(On(Gt,tt))("slot"===Gt.$tag$||"slot"===tt.$tag$)&&Rr(Gt.$elm$.parentNode,!1),Kt(Gt,tt),se.insertBefore(Gt.$elm$,rn.$elm$.nextSibling),Gt=_e[++Ge],tt=le[--Pn];else if(On(rn,qn))("slot"===Gt.$tag$||"slot"===tt.$tag$)&&Rr(rn.$elm$.parentNode,!1),Kt(rn,qn),se.insertBefore(rn.$elm$,Gt.$elm$),rn=_e[--xt],qn=le[++Ye];else{for(Ct=-1,kt=Ge;kt<=xt;++kt)if(_e[kt]&&null!==_e[kt].$key$&&_e[kt].$key$===qn.$key$){Ct=kt;break}Ct>=0?(yt=_e[Ct],yt.$tag$!==qn.$tag$?Ve=Yr(_e&&_e[Ye],st,Ct,se):(Kt(yt,qn),_e[Ct]=void 0,Ve=yt.$elm$),qn=le[++Ye]):(Ve=Yr(_e&&_e[Ye],st,Ye,se),qn=le[++Ye]),Ve&&An(Gt.$elm$).insertBefore(Ve,Jt(Gt.$elm$))}Ge>xt?Vr(se,null==le[Pn+1]?null:le[Pn+1].$elm$,st,le,Ye,Pn):Ye>Pn&&di(_e,Ge,xt)})(st,le,_e,Ge):null!==Ge?(null!==se.$text$&&(st.textContent=""),Vr(st,null,_e,Ge,0,Ge.length-1)):null!==le&&di(le,0,le.length-1),Be&&"svg"===Ye&&(Be=!1)):(kt=st["s-cr"])?kt.parentNode.textContent=Ct:se.$text$!==Ct&&(st.data=Ct)},yr=se=>{const _e=se.childNodes;let st,le,Ge,Ye,Ct,kt;for(le=0,Ge=_e.length;le<Ge;le++)if(st=_e[le],1===st.nodeType){if(st["s-sr"])for(Ct=st["s-sn"],st.hidden=!1,Ye=0;Ye<Ge;Ye++)if(kt=_e[Ye].nodeType,_e[Ye]["s-hn"]!==st["s-hn"]||""!==Ct){if(1===kt&&Ct===_e[Ye].getAttribute("slot")){st.hidden=!0;break}}else if(1===kt||3===kt&&""!==_e[Ye].textContent.trim()){st.hidden=!0;break}yr(st)}},ir=[],Kr=se=>{let _e,st,le,Ge,Ye,Ct,kt=0;const xt=se.childNodes,Gt=xt.length;for(;kt<Gt;kt++){if(_e=xt[kt],_e["s-sr"]&&(st=_e["s-cr"])&&st.parentNode)for(le=st.parentNode.childNodes,Ge=_e["s-sn"],Ct=le.length-1;Ct>=0;Ct--)st=le[Ct],!st["s-cn"]&&!st["s-nr"]&&st["s-hn"]!==_e["s-hn"]&&(hi(st,Ge)?(Ye=ir.find(rn=>rn.$nodeToRelocate$===st),Ie=!0,st["s-sn"]=st["s-sn"]||Ge,Ye?Ye.$slotRefNode$=_e:ir.push({$slotRefNode$:_e,$nodeToRelocate$:st}),st["s-sr"]&&ir.map(rn=>{hi(rn.$nodeToRelocate$,st["s-sn"])&&(Ye=ir.find(Pn=>Pn.$nodeToRelocate$===st),Ye&&!rn.$slotRefNode$&&(rn.$slotRefNode$=Ye.$slotRefNode$))})):ir.some(rn=>rn.$nodeToRelocate$===st)||ir.push({$nodeToRelocate$:st}));1===_e.nodeType&&Kr(_e)}},hi=(se,_e)=>1===se.nodeType?null===se.getAttribute("slot")&&""===_e||se.getAttribute("slot")===_e:se["s-sn"]===_e||""===_e,wi=se=>{se.$attrs$&&se.$attrs$.ref&&se.$attrs$.ref(null),se.$children$&&se.$children$.map(wi)},si=(se,_e)=>{_e&&!se.$onRenderResolve$&&_e["s-p"]&&_e["s-p"].push(new Promise(st=>se.$onRenderResolve$=st))},nr=(se,_e)=>{if(se.$flags$|=16,!(4&se.$flags$))return si(se,se.$ancestorComponent$),vi(()=>Wn(se,_e));se.$flags$|=512},Wn=(se,_e)=>{const le=se.$lazyInstance$;let Ge;return _e&&(se.$flags$|=256,se.$queuedListeners$&&(se.$queuedListeners$.map(([Ye,Ct])=>In(le,Ye,Ct)),se.$queuedListeners$=null),Ge=In(le,"componentWillLoad")),Ge=$n(Ge,()=>In(le,"componentWillRender")),$n(Ge,()=>fi(se,le,_e))},fi=function(){var se=(0,_.Z)(function*(_e,st,le){const Ge=_e.$hostElement$,Ct=Ge["s-rc"];le&&(se=>{const _e=se.$cmpMeta$,st=se.$hostElement$,le=_e.$flags$,Ye=_n(st.shadowRoot?st.shadowRoot:st.getRootNode(),_e,se.$modeName$);10&le&&(st["s-sc"]=Ye,st.classList.add(Ye+"-h"),2&le&&st.classList.add(Ye+"-s"))})(_e);an(_e,st),Ct&&(Ct.map(xt=>xt()),Ge["s-rc"]=void 0);{const xt=Ge["s-p"],Gt=()=>jt(_e);0===xt.length?Gt():(Promise.all(xt).then(Gt),_e.$flags$|=4,xt.length=0)}});return function(st,le,Ge){return se.apply(this,arguments)}}(),an=(se,_e,st)=>{try{_e=_e.render&&_e.render(),se.$flags$&=-17,se.$flags$|=2,((se,_e)=>{const st=se.$hostElement$,le=se.$cmpMeta$,Ge=se.$vnode$||ct(null,null),Ye=(se=>se&&se.$tag$===ze)(_e)?_e:nt(null,null,_e);if(Fe=st.tagName,le.$attrsToReflect$&&(Ye.$attrs$=Ye.$attrs$||{},le.$attrsToReflect$.map(([Ct,kt])=>Ye.$attrs$[kt]=st[Ct])),Ye.$tag$=null,Ye.$flags$|=4,se.$vnode$=Ye,Ye.$elm$=Ge.$elm$=st.shadowRoot||st,J=st["s-sc"],fe=st["s-cr"],Me=0!=(1&le.$flags$),Ie=!1,Kt(Ge,Ye),Kn.$flags$|=1,Le){Kr(Ye.$elm$);let Ct,kt,xt,Gt,rn,Pn,qn=0;for(;qn<ir.length;qn++)Ct=ir[qn],kt=Ct.$nodeToRelocate$,kt["s-ol"]||(xt=tr.createTextNode(""),xt["s-nr"]=kt,kt.parentNode.insertBefore(kt["s-ol"]=xt,kt));for(qn=0;qn<ir.length;qn++)if(Ct=ir[qn],kt=Ct.$nodeToRelocate$,Ct.$slotRefNode$){for(Gt=Ct.$slotRefNode$.parentNode,rn=Ct.$slotRefNode$.nextSibling,xt=kt["s-ol"];xt=xt.previousSibling;)if(Pn=xt["s-nr"],Pn&&Pn["s-sn"]===kt["s-sn"]&&Gt===Pn.parentNode&&(Pn=Pn.nextSibling,!Pn||!Pn["s-nr"])){rn=Pn;break}(!rn&&Gt!==kt.parentNode||kt.nextSibling!==rn)&&kt!==rn&&(!kt["s-hn"]&&kt["s-ol"]&&(kt["s-hn"]=kt["s-ol"].parentNode.nodeName),Gt.insertBefore(kt,rn))}else 1===kt.nodeType&&(kt.hidden=!0)}Ie&&yr(Ye.$elm$),Kn.$flags$&=-2,ir.length=0})(se,_e)}catch(le){ki(le,se.$hostElement$)}return null},jt=se=>{const st=se.$hostElement$,Ge=se.$lazyInstance$,Ye=se.$ancestorComponent$;In(Ge,"componentDidRender"),64&se.$flags$?In(Ge,"componentDidUpdate"):(se.$flags$|=64,Er(st),In(Ge,"componentDidLoad"),se.$onReadyResolve$(st),Ye||Ln()),se.$onInstanceResolve$(st),se.$onRenderResolve$&&(se.$onRenderResolve$(),se.$onRenderResolve$=void 0),512&se.$flags$&&Ri(()=>nr(se,!1)),se.$flags$&=-517},Cn=se=>{{const _e=Qr(se),st=_e.$hostElement$.isConnected;return st&&2==(18&_e.$flags$)&&nr(_e,!1),st}},Ln=se=>{Er(tr.documentElement),Ri(()=>nn(Or,"appload",{detail:{namespace:"ionic"}}))},In=(se,_e,st)=>{if(se&&se[_e])try{return se[_e](st)}catch(le){ki(le)}},$n=(se,_e)=>se&&se.then?se.then(_e):_e(),Er=se=>se.classList.add("hydrated"),Ke=(se,_e,st)=>{if(_e.$members$){se.watchers&&(_e.$watchers$=se.watchers);const le=Object.entries(_e.$members$),Ge=se.prototype;if(le.map(([Ye,[Ct]])=>{31&Ct||2&st&&32&Ct?Object.defineProperty(Ge,Ye,{get(){return((se,_e)=>Qr(this).$instanceValues$.get(_e))(0,Ye)},set(kt){((se,_e,st,le)=>{const Ge=Qr(se),Ye=Ge.$hostElement$,Ct=Ge.$instanceValues$.get(_e),kt=Ge.$flags$,xt=Ge.$lazyInstance$;st=((se,_e)=>null==se||ye(se)?se:4&_e?"false"!==se&&(""===se||!!se):2&_e?parseFloat(se):1&_e?String(se):se)(st,le.$members$[_e][0]);const Gt=Number.isNaN(Ct)&&Number.isNaN(st);if((!(8&kt)||void 0===Ct)&&st!==Ct&&!Gt&&(Ge.$instanceValues$.set(_e,st),xt)){if(le.$watchers$&&128&kt){const Pn=le.$watchers$[_e];Pn&&Pn.map(qn=>{try{xt[qn](st,Ct,_e)}catch(tt){ki(tt,Ye)}})}2==(18&kt)&&nr(Ge,!1)}})(this,Ye,kt,_e)},configurable:!0,enumerable:!0}):1&st&&64&Ct&&Object.defineProperty(Ge,Ye,{value(...kt){const xt=Qr(this);return xt.$onInstancePromise$.then(()=>xt.$lazyInstance$[Ye](...kt))}})}),1&st){const Ye=new Map;Ge.attributeChangedCallback=function(Ct,kt,xt){Kn.jmp(()=>{const Gt=Ye.get(Ct);if(this.hasOwnProperty(Gt))xt=this[Gt],delete this[Gt];else if(Ge.hasOwnProperty(Gt)&&"number"==typeof this[Gt]&&this[Gt]==xt)return;this[Gt]=(null!==xt||"boolean"!=typeof this[Gt])&&xt})},se.observedAttributes=le.filter(([Ct,kt])=>15&kt[0]).map(([Ct,kt])=>{const xt=kt[1]||Ct;return Ye.set(xt,Ct),512&kt[0]&&_e.$attrsToReflect$.push([Ct,xt]),xt})}}return se},Nt=function(){var se=(0,_.Z)(function*(_e,st,le,Ge,Ye){if(!(32&st.$flags$)){{if(st.$flags$|=32,(Ye=es(le)).then){const Gt=()=>{};Ye=yield Ye,Gt()}Ye.isProxied||(le.$watchers$=Ye.watchers,Ke(Ye,le,2),Ye.isProxied=!0);const xt=()=>{};st.$flags$|=8;try{new Ye(st)}catch(Gt){ki(Gt)}st.$flags$&=-9,st.$flags$|=128,xt(),It(st.$lazyInstance$)}if(Ye.style){let xt=Ye.style;"string"!=typeof xt&&(xt=xt[st.$modeName$=(se=>ar.map(_e=>_e(se)).find(_e=>!!_e))(_e)]);const Gt=Tn(le,st.$modeName$);if(!Mi.has(Gt)){const rn=()=>{};Mn(Gt,xt,!!(1&le.$flags$)),rn()}}}const Ct=st.$ancestorComponent$,kt=()=>nr(st,!0);Ct&&Ct["s-rc"]?Ct["s-rc"].push(kt):kt()});return function(st,le,Ge,Ye,Ct){return se.apply(this,arguments)}}(),It=se=>{In(se,"connectedCallback")},We=se=>{const _e=se["s-cr"]=tr.createComment("");_e["s-cn"]=!0,se.insertBefore(_e,se.firstChild)},De=(se,_e={})=>{var st;const Ge=[],Ye=_e.exclude||[],Ct=Or.customElements,kt=tr.head,xt=kt.querySelector("meta[charset]"),Gt=tr.createElement("style"),rn=[],Pn=tr.querySelectorAll(`[${ut}]`);let qn,tt=!0,Ve=0;for(Object.assign(Kn,_e),Kn.$resourcesUrl$=new URL(_e.resourcesUrl||"./",tr.baseURI).href,Kn.$flags$|=2;Ve<Pn.length;Ve++)Mn(Pn[Ve].getAttribute(ut),Hn(Pn[Ve].innerHTML),!0);se.map(yt=>{yt[1].map(Ht=>{const Qt={$flags$:Ht[0],$tagName$:Ht[1],$members$:Ht[2],$listeners$:Ht[3]};Qt.$members$=Ht[2],Qt.$listeners$=Ht[3],Qt.$attrsToReflect$=[],Qt.$watchers$={};const Nn=Qt.$tagName$,Qn=class extends HTMLElement{constructor(kr){super(kr),Xi(kr=this,Qt),1&Qt.$flags$&&kr.attachShadow({mode:"open",delegatesFocus:!!(16&Qt.$flags$)})}connectedCallback(){qn&&(clearTimeout(qn),qn=null),tt?rn.push(this):Kn.jmp(()=>(se=>{if(!(1&Kn.$flags$)){const _e=Qr(se),st=_e.$cmpMeta$,le=()=>{};if(1&_e.$flags$)Et(se,_e,st.$listeners$),It(_e.$lazyInstance$);else{let Ge;if(_e.$flags$|=1,Ge=se.getAttribute(ue),Ge){if(1&st.$flags$){const Ye=_n(se.shadowRoot,st,se.getAttribute("s-mode"));se.classList.remove(Ye+"-h",Ye+"-s")}((se,_e,st,le)=>{const Ye=se.shadowRoot,Ct=[],xt=Ye?[]:null,Gt=le.$vnode$=ct(_e,null);Kn.$orgLocNodes$||ht(tr.body,Kn.$orgLocNodes$=new Map),se[ue]=st,se.removeAttribute(ue),it(Gt,Ct,[],xt,se,se,st),Ct.map(rn=>{const Pn=rn.$hostId$+"."+rn.$nodeId$,qn=Kn.$orgLocNodes$.get(Pn),tt=rn.$elm$;qn&&Br&&""===qn["s-en"]&&qn.parentNode.insertBefore(tt,qn.nextSibling),Ye||(tt["s-hn"]=_e,qn&&(tt["s-ol"]=qn,tt["s-ol"]["s-nr"]=tt)),Kn.$orgLocNodes$.delete(Pn)}),Ye&&xt.map(rn=>{rn&&Ye.appendChild(rn)})})(se,st.$tagName$,Ge,_e)}Ge||12&st.$flags$&&We(se);{let Ye=se;for(;Ye=Ye.parentNode||Ye.host;)if(1===Ye.nodeType&&Ye.hasAttribute("s-id")&&Ye["s-p"]||Ye["s-p"]){si(_e,_e.$ancestorComponent$=Ye);break}}st.$members$&&Object.entries(st.$members$).map(([Ye,[Ct]])=>{if(31&Ct&&se.hasOwnProperty(Ye)){const kt=se[Ye];delete se[Ye],se[Ye]=kt}}),Nt(se,_e,st)}le()}})(this))}disconnectedCallback(){Kn.jmp(()=>(se=>{if(!(1&Kn.$flags$)){const _e=Qr(this),st=_e.$lazyInstance$;_e.$rmListeners$&&(_e.$rmListeners$.map(le=>le()),_e.$rmListeners$=void 0),In(st,"disconnectedCallback")}})())}componentOnReady(){return Qr(this).$onReadyPromise$}};Qt.$lazyBundleId$=yt[0],!Ye.includes(Nn)&&!Ct.get(Nn)&&(Ge.push(Nn),Ct.define(Nn,Ke(Qn,Qt,1)))})});{Gt.innerHTML=Ge+"{visibility:hidden}.hydrated{visibility:inherit}",Gt.setAttribute("data-styles","");const yt=null!==(st=Kn.$nonce$)&&void 0!==st?st:qe(tr);null!=yt&&Gt.setAttribute("nonce",yt),kt.insertBefore(Gt,xt?xt.nextSibling:kt.firstChild)}tt=!1,rn.length?rn.map(yt=>yt.connectedCallback()):Kn.jmp(()=>qn=setTimeout(Ln,30))},Et=(se,_e,st,le)=>{st&&st.map(([Ge,Ye,Ct])=>{const kt=qt(se,Ge),xt=Lt(_e,Ct),Gt=Bn(Ge);Kn.ael(kt,Ye,xt,Gt),(_e.$rmListeners$=_e.$rmListeners$||[]).push(()=>Kn.rel(kt,Ye,xt,Gt))})},Lt=(se,_e)=>st=>{try{256&se.$flags$?se.$lazyInstance$[_e](st):(se.$queuedListeners$=se.$queuedListeners$||[]).push([_e,st])}catch(le){ki(le)}},qt=(se,_e)=>4&_e?tr:8&_e?Or:16&_e?tr.body:se,Bn=se=>0!=(2&se),hr=new WeakMap,Qr=se=>hr.get(se),pi=(se,_e)=>hr.set(_e.$lazyInstance$=se,_e),Xi=(se,_e)=>{const st={$flags$:0,$hostElement$:se,$cmpMeta$:_e,$instanceValues$:new Map};return st.$onInstancePromise$=new Promise(le=>st.$onInstanceResolve$=le),st.$onReadyPromise$=new Promise(le=>st.$onReadyResolve$=le),se["s-p"]=[],se["s-rc"]=[],Et(se,st,_e.$listeners$),hr.set(se,st)},gi=(se,_e)=>_e in se,ki=(se,_e)=>(0,console.error)(se,_e),Tr=new Map,es=(se,_e,st)=>{const le=se.$tagName$.replace(/-/g,"_"),Ge=se.$lazyBundleId$,Ye=Tr.get(Ge);return Ye?Ye[le]:j(863)(`./${Ge}.entry.js`).then(Ct=>(Tr.set(Ge,Ct),Ct[le]),ki)},Mi=new Map,ar=[],Or=typeof window<"u"?window:{},tr=Or.document||{head:{}},Kn={$flags$:0,$resourcesUrl$:"",jmp:se=>se(),raf:se=>requestAnimationFrame(se),ael:(se,_e,st,le)=>se.addEventListener(_e,st,le),rel:(se,_e,st,le)=>se.removeEventListener(_e,st,le),ce:(se,_e)=>new CustomEvent(se,_e)},xr=se=>{Object.assign(Kn,se)},Br=!0,Gi=se=>Promise.resolve(se),us=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch{}return!1})(),ti=[],un=[],Jn=(se,_e)=>st=>{se.push(st),we||(we=!0,_e&&4&Kn.$flags$?Ri(Jr):Kn.raf(Jr))},Fr=se=>{for(let _e=0;_e<se.length;_e++)try{se[_e](performance.now())}catch(st){ki(st)}se.length=0},Jr=()=>{Fr(ti),Fr(un),(we=ti.length>0)&&Kn.raf(Jr)},Ri=se=>Gi().then(se),Lr=Jn(ti,!1),vi=Jn(un,!0)},1178:(cn,mt,j)=>{"use strict";j.d(mt,{a:()=>m,b:()=>J,p:()=>_});const _=(fe,...Fe)=>console.warn(`[Ionic Warning]: ${fe}`,...Fe),m=(fe,...Fe)=>console.error(`[Ionic Error]: ${fe}`,...Fe),J=(fe,...Fe)=>console.error(`<${fe.tagName.toLowerCase()}> must be used inside ${Fe.join(" or ")}.`)},6406:(cn,mt,j)=>{"use strict";j.d(mt,{a:()=>me,b:()=>_t,c:()=>J,g:()=>we,i:()=>ot});var _=j(9816);class m{constructor(){this.m=new Map}reset(Ae){this.m=new Map(Object.entries(Ae))}get(Ae,Oe){const it=this.m.get(Ae);return void 0!==it?it:Oe}getBoolean(Ae,Oe=!1){const it=this.m.get(Ae);return void 0===it?Oe:"string"==typeof it?"true"===it:!!it}getNumber(Ae,Oe){const it=parseFloat(this.m.get(Ae));return isNaN(it)?void 0!==Oe?Oe:NaN:it}set(Ae,Oe){this.m.set(Ae,Oe)}}const J=new m,Be="ionic-persist-config",we=xe=>ve(xe),me=(xe,Ae)=>("string"==typeof xe&&(Ae=xe,xe=void 0),we(xe).includes(Ae)),ve=(xe=window)=>{if(typeof xe>"u")return[];xe.Ionic=xe.Ionic||{};let Ae=xe.Ionic.platforms;return null==Ae&&(Ae=xe.Ionic.platforms=Ue(xe),Ae.forEach(Oe=>xe.document.documentElement.classList.add(`plt-${Oe}`))),Ae},Ue=xe=>{const Ae=J.get("platform");return Object.keys(ct).filter(Oe=>{const it=null==Ae?void 0:Ae[Oe];return"function"==typeof it?it(xe):ct[Oe](xe)})},rt=xe=>!!(qe(xe,/iPad/i)||qe(xe,/Macintosh/i)&&et(xe)),Ce=xe=>qe(xe,/android|sink/i),et=xe=>nt(xe,"(any-pointer:coarse)"),X=xe=>Re(xe)||ne(xe),Re=xe=>!!(xe.cordova||xe.phonegap||xe.PhoneGap),ne=xe=>{const Ae=xe.Capacitor;return!(null==Ae||!Ae.isNative)},qe=(xe,Ae)=>Ae.test(xe.navigator.userAgent),nt=(xe,Ae)=>{var Oe;return null===(Oe=xe.matchMedia)||void 0===Oe?void 0:Oe.call(xe,Ae).matches},ct={ipad:rt,iphone:xe=>qe(xe,/iPhone/i),ios:xe=>qe(xe,/iPhone|iPod/i)||rt(xe),android:Ce,phablet:xe=>{const Ae=xe.innerWidth,Oe=xe.innerHeight,it=Math.min(Ae,Oe),ht=Math.max(Ae,Oe);return it>390&&it<520&&ht>620&&ht<800},tablet:xe=>{const Ae=xe.innerWidth,Oe=xe.innerHeight,it=Math.min(Ae,Oe),ht=Math.max(Ae,Oe);return rt(xe)||(xe=>Ce(xe)&&!qe(xe,/mobile/i))(xe)||it>460&&it<820&&ht>780&&ht<1400},cordova:Re,capacitor:ne,electron:xe=>qe(xe,/electron/i),pwa:xe=>{var Ae;return!!(null!==(Ae=xe.matchMedia)&&void 0!==Ae&&Ae.call(xe,"(display-mode: standalone)").matches||xe.navigator.standalone)},mobile:et,mobileweb:xe=>et(xe)&&!X(xe),desktop:xe=>!et(xe),hybrid:X};let ze;const _t=xe=>xe&&(0,_.g)(xe)||ze,ot=(xe={})=>{if(typeof window>"u")return;const Ae=window.document,Oe=window,it=Oe.Ionic=Oe.Ionic||{},ht={};xe._ael&&(ht.ael=xe._ael),xe._rel&&(ht.rel=xe._rel),xe._ce&&(ht.ce=xe._ce),(0,_.a)(ht);const Zt=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(xe=>{try{const Ae=xe.sessionStorage.getItem(Be);return null!==Ae?JSON.parse(Ae):{}}catch{return{}}})(Oe)),{persistConfig:!1}),it.config),(xe=>{const Ae={};return xe.location.search.slice(1).split("&").map(Oe=>Oe.split("=")).map(([Oe,it])=>[decodeURIComponent(Oe),decodeURIComponent(it)]).filter(([Oe])=>((xe,Ae)=>xe.substr(0,Ae.length)===Ae)(Oe,"ionic:")).map(([Oe,it])=>[Oe.slice("ionic:".length),it]).forEach(([Oe,it])=>{Ae[Oe]=it}),Ae})(Oe)),xe);J.reset(Zt),J.getBoolean("persistConfig")&&((xe,Ae)=>{try{xe.sessionStorage.setItem(Be,JSON.stringify(Ae))}catch{return}})(Oe,Zt),ve(Oe),it.config=J,it.mode=ze=J.get("mode",Ae.documentElement.getAttribute("mode")||(me(Oe,"ios")?"ios":"md")),J.set("mode",ze),Ae.documentElement.setAttribute("mode",ze),Ae.documentElement.classList.add(ze),J.getBoolean("_testing")&&J.set("animated",!1);const Vt=gt=>{var Ee;return null===(Ee=gt.tagName)||void 0===Ee?void 0:Ee.startsWith("ION-")},vn=gt=>["ios","md"].includes(gt);(0,_.c)(gt=>{for(;gt;){const Ee=gt.mode||gt.getAttribute("mode");if(Ee){if(vn(Ee))return Ee;Vt(gt)&&console.warn('Invalid ionic mode: "'+Ee+'", expected: "ios" or "md"')}gt=gt.parentElement}return ze})}},500:(cn,mt,j)=>{"use strict";j.r(mt),j.d(mt,{iosTransitionAnimation:()=>Ue,shadow:()=>Ie});var _=j(2200),m=j(9459);j(3457),j(9816);const Me=je=>document.querySelector(`${je}.ion-cloned-element`),Ie=je=>je.shadowRoot||je,Le=je=>{const rt="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs"),Dt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=rt){const Ne=rt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Ne?Ne.querySelector(Dt):null}return je.querySelector(Dt)},Be=(je,rt)=>{const Dt="ION-TABS"===je.tagName?je:je.querySelector("ion-tabs");let Ne=[];if(null!=Dt){const Ce=Dt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=Ce&&(Ne=Ce.querySelectorAll("ion-buttons"))}else Ne=je.querySelectorAll("ion-buttons");for(const Ce of Ne){const ue=Ce.closest("ion-header"),ut=ue&&!ue.classList.contains("header-collapse-condense-inactive"),Je=Ce.querySelector("ion-back-button"),et=Ce.classList.contains("buttons-collapse");if(null!==Je&&("start"===Ce.slot||""===Ce.slot)&&(et&&ut&&rt||!et))return Je}return null},me=(je,rt,Dt,Ne,Ce,ue)=>{const ut=rt?`calc(100% - ${ue.right+4}px)`:ue.left-4+"px",Je=rt?"7px":"-7px",et=rt?"-4px":"4px",Xe=rt?"-4px":"4px",X=rt?"right":"left",Re=rt?"left":"right",ye=Dt?[{offset:0,opacity:1,transform:`translate3d(${et}, ${ue.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Je}, ${Ce.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${Je}, ${Ce.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${et}, ${ue.top-46}px, 0) scale(1)`}],ct=Dt?[{offset:0,opacity:1,transform:`translate3d(${Xe}, ${ue.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${Xe}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${Xe}, ${ue.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${Xe}, ${ue.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${Xe}, ${ue.top-46}px, 0) scale(1)`}],ze=(0,_.c)(),_t=(0,_.c)(),ot=Me("ion-back-button"),xe=Ie(ot).querySelector(".button-text"),Ae=Ie(ot).querySelector("ion-icon");ot.text=Ne.text,ot.mode=Ne.mode,ot.icon=Ne.icon,ot.color=Ne.color,ot.disabled=Ne.disabled,ot.style.setProperty("display","block"),ot.style.setProperty("position","fixed"),_t.addElement(Ae),ze.addElement(xe),ze.beforeStyles({"transform-origin":`${X} center`}).beforeAddWrite(()=>{Ne.style.setProperty("display","none"),ot.style.setProperty(X,ut)}).afterAddWrite(()=>{Ne.style.setProperty("display",""),ot.style.setProperty("display","none"),ot.style.removeProperty(X)}).keyframes(ye),_t.beforeStyles({"transform-origin":`${Re} center`}).keyframes(ct),je.addAnimation([ze,_t])},ve=(je,rt,Dt,Ne,Ce,ue)=>{const ut=rt?`calc(100% - ${Ce.right}px)`:`${Ce.left}px`,Je=rt?"-18px":"18px",et=rt?"right":"left",Re=Dt?[{offset:0,opacity:0,transform:`translate3d(${Je}, ${ue.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${Ce.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${Je}, ${ue.top-4}px, 0) scale(0.5)`}],ne=Me("ion-title"),Qe=(0,_.c)();ne.innerText=Ne.innerText,ne.size=Ne.size,ne.color=Ne.color,Qe.addElement(ne),Qe.beforeStyles({"transform-origin":`${et} center`,height:"46px",display:"",position:"relative",[et]:ut}).beforeAddWrite(()=>{Ne.style.setProperty("display","none")}).afterAddWrite(()=>{Ne.style.setProperty("display",""),ne.style.setProperty("display","none")}).keyframes(Re),je.addAnimation(Qe)},Ue=(je,rt)=>{var Dt;try{const Ne="cubic-bezier(0.32,0.72,0,1)",Ce="opacity",ue="transform",ut="0%",et="rtl"===je.ownerDocument.dir,Xe=et?"-99.5%":"99.5%",X=et?"33%":"-33%",Re=rt.enteringEl,ne=rt.leavingEl,Qe="back"===rt.direction,ye=Re.querySelector(":scope > ion-content"),qe=Re.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),nt=Re.querySelectorAll(":scope > ion-header > ion-toolbar"),ct=(0,_.c)(),ze=(0,_.c)();if(ct.addElement(Re).duration((null!==(Dt=rt.duration)&&void 0!==Dt?Dt:0)||540).easing(rt.easing||Ne).fill("both").beforeRemoveClass("ion-page-invisible"),ne&&null!=je){const Ae=(0,_.c)();Ae.addElement(je),ct.addAnimation(Ae)}if(ye||0!==nt.length||0!==qe.length?(ze.addElement(ye),ze.addElement(qe)):ze.addElement(Re.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ct.addAnimation(ze),Qe?ze.beforeClearStyles([Ce]).fromTo("transform",`translateX(${X})`,`translateX(${ut})`).fromTo(Ce,.8,1):ze.beforeClearStyles([Ce]).fromTo("transform",`translateX(${Xe})`,`translateX(${ut})`),ye){const Ae=Ie(ye).querySelector(".transition-effect");if(Ae){const Oe=Ae.querySelector(".transition-cover"),it=Ae.querySelector(".transition-shadow"),ht=(0,_.c)(),Zt=(0,_.c)(),Vt=(0,_.c)();ht.addElement(Ae).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Zt.addElement(Oe).beforeClearStyles([Ce]).fromTo(Ce,0,.1),Vt.addElement(it).beforeClearStyles([Ce]).fromTo(Ce,.03,.7),ht.addAnimation([Zt,Vt]),ze.addAnimation([ht])}}const _t=Re.querySelector("ion-header.header-collapse-condense"),{forward:ot,backward:xe}=((je,rt,Dt,Ne,Ce)=>{const ue=Be(Ne,Dt),ut=Le(Ce),Je=Le(Ne),et=Be(Ce,Dt),Xe=null!==ue&&null!==ut&&!Dt,X=null!==Je&&null!==et&&Dt;if(Xe){const Re=ut.getBoundingClientRect(),ne=ue.getBoundingClientRect();ve(je,rt,Dt,ut,Re,ne),me(je,rt,Dt,ue,Re,ne)}else if(X){const Re=Je.getBoundingClientRect(),ne=et.getBoundingClientRect();ve(je,rt,Dt,Je,Re,ne),me(je,rt,Dt,et,Re,ne)}return{forward:Xe,backward:X}})(ct,et,Qe,Re,ne);if(nt.forEach(Ae=>{const Oe=(0,_.c)();Oe.addElement(Ae),ct.addAnimation(Oe);const it=(0,_.c)();it.addElement(Ae.querySelector("ion-title"));const ht=(0,_.c)(),Zt=Array.from(Ae.querySelectorAll("ion-buttons,[menuToggle]")),Vt=Ae.closest("ion-header"),vn=null==Vt?void 0:Vt.classList.contains("header-collapse-condense-inactive");let gt;gt=Zt.filter(Qe?Mn=>{const _n=Mn.classList.contains("buttons-collapse");return _n&&!vn||!_n}:Mn=>!Mn.classList.contains("buttons-collapse")),ht.addElement(gt);const Ee=(0,_.c)();Ee.addElement(Ae.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const bt=(0,_.c)();bt.addElement(Ie(Ae).querySelector(".toolbar-background"));const nn=(0,_.c)(),fn=Ae.querySelector("ion-back-button");if(fn&&nn.addElement(fn),Oe.addAnimation([it,ht,Ee,bt,nn]),ht.fromTo(Ce,.01,1),Ee.fromTo(Ce,.01,1),Qe)vn||it.fromTo("transform",`translateX(${X})`,`translateX(${ut})`).fromTo(Ce,.01,1),Ee.fromTo("transform",`translateX(${X})`,`translateX(${ut})`),nn.fromTo(Ce,.01,1);else if(_t||it.fromTo("transform",`translateX(${Xe})`,`translateX(${ut})`).fromTo(Ce,.01,1),Ee.fromTo("transform",`translateX(${Xe})`,`translateX(${ut})`),bt.beforeClearStyles([Ce,"transform"]),(null==Vt?void 0:Vt.translucent)?bt.fromTo("transform",et?"translateX(-100%)":"translateX(100%)","translateX(0px)"):bt.fromTo(Ce,.01,"var(--opacity)"),ot||nn.fromTo(Ce,.01,1),fn&&!ot){const _n=(0,_.c)();_n.addElement(Ie(fn).querySelector(".button-text")).fromTo("transform",et?"translateX(-100px)":"translateX(100px)","translateX(0px)"),Oe.addAnimation(_n)}}),ne){const Ae=(0,_.c)(),Oe=ne.querySelector(":scope > ion-content"),it=ne.querySelectorAll(":scope > ion-header > ion-toolbar"),ht=ne.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(Oe||0!==it.length||0!==ht.length?(Ae.addElement(Oe),Ae.addElement(ht)):Ae.addElement(ne.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),ct.addAnimation(Ae),Qe){Ae.beforeClearStyles([Ce]).fromTo("transform",`translateX(${ut})`,et?"translateX(-100%)":"translateX(100%)");const Zt=(0,m.g)(ne);ct.afterAddWrite(()=>{"normal"===ct.getDirection()&&Zt.style.setProperty("display","none")})}else Ae.fromTo("transform",`translateX(${ut})`,`translateX(${X})`).fromTo(Ce,1,.8);if(Oe){const Zt=Ie(Oe).querySelector(".transition-effect");if(Zt){const Vt=Zt.querySelector(".transition-cover"),vn=Zt.querySelector(".transition-shadow"),gt=(0,_.c)(),Ee=(0,_.c)(),bt=(0,_.c)();gt.addElement(Zt).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Ee.addElement(Vt).beforeClearStyles([Ce]).fromTo(Ce,.1,0),bt.addElement(vn).beforeClearStyles([Ce]).fromTo(Ce,.7,.03),gt.addAnimation([Ee,bt]),Ae.addAnimation([gt])}}it.forEach(Zt=>{const Vt=(0,_.c)();Vt.addElement(Zt);const vn=(0,_.c)();vn.addElement(Zt.querySelector("ion-title"));const gt=(0,_.c)(),Ee=Zt.querySelectorAll("ion-buttons,[menuToggle]"),bt=Zt.closest("ion-header"),nn=null==bt?void 0:bt.classList.contains("header-collapse-condense-inactive"),fn=Array.from(Ee).filter(or=>{const En=or.classList.contains("buttons-collapse");return En&&!nn||!En});gt.addElement(fn);const Mn=(0,_.c)(),_n=Zt.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");_n.length>0&&Mn.addElement(_n);const Xt=(0,_.c)();Xt.addElement(Ie(Zt).querySelector(".toolbar-background"));const Tn=(0,_.c)(),Hn=Zt.querySelector("ion-back-button");if(Hn&&Tn.addElement(Hn),Vt.addAnimation([vn,gt,Mn,Tn,Xt]),ct.addAnimation(Vt),Tn.fromTo(Ce,.99,0),gt.fromTo(Ce,.99,0),Mn.fromTo(Ce,.99,0),Qe){if(nn||vn.fromTo("transform",`translateX(${ut})`,et?"translateX(-100%)":"translateX(100%)").fromTo(Ce,.99,0),Mn.fromTo("transform",`translateX(${ut})`,et?"translateX(-100%)":"translateX(100%)"),Xt.beforeClearStyles([Ce,"transform"]),(null==bt?void 0:bt.translucent)?Xt.fromTo("transform","translateX(0px)",et?"translateX(-100%)":"translateX(100%)"):Xt.fromTo(Ce,"var(--opacity)",0),Hn&&!xe){const En=(0,_.c)();En.addElement(Ie(Hn).querySelector(".button-text")).fromTo("transform",`translateX(${ut})`,`translateX(${(et?-124:124)+"px"})`),Vt.addAnimation(En)}}else nn||vn.fromTo("transform",`translateX(${ut})`,`translateX(${X})`).fromTo(Ce,.99,0).afterClearStyles([ue,Ce]),Mn.fromTo("transform",`translateX(${ut})`,`translateX(${X})`).afterClearStyles([ue,Ce]),Tn.afterClearStyles([Ce]),vn.afterClearStyles([Ce]),gt.afterClearStyles([Ce])})}return ct}catch(Ne){throw Ne}}},9892:(cn,mt,j)=>{"use strict";j.r(mt),j.d(mt,{mdTransitionAnimation:()=>Fe});var _=j(2200),m=j(9459);j(3457),j(9816);const Fe=(Me,Ie)=>{var Le,Be,we;const Ue="back"===Ie.direction,rt=Ie.leavingEl,Dt=(0,m.g)(Ie.enteringEl),Ne=Dt.querySelector("ion-toolbar"),Ce=(0,_.c)();if(Ce.addElement(Dt).fill("both").beforeRemoveClass("ion-page-invisible"),Ue?Ce.duration((null!==(Le=Ie.duration)&&void 0!==Le?Le:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):Ce.duration((null!==(Be=Ie.duration)&&void 0!==Be?Be:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Ne){const ue=(0,_.c)();ue.addElement(Ne),Ce.addAnimation(ue)}if(rt&&Ue){Ce.duration((null!==(we=Ie.duration)&&void 0!==we?we:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ue=(0,_.c)();ue.addElement((0,m.g)(rt)).onFinish(ut=>{1===ut&&ue.elements.length>0&&ue.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),Ce.addAnimation(ue)}return Ce}},6280:(cn,mt,j)=>{"use strict";j.d(mt,{B:()=>ht,G:()=>Zt,a:()=>we,b:()=>me,c:()=>rt,d:()=>Vt,e:()=>vn,f:()=>qe,g:()=>ct,h:()=>ot,i:()=>Ae,j:()=>Ne,k:()=>Le,m:()=>Ue,n:()=>ut,o:()=>Qe,s:()=>it});var _=j(5861),m=j(6406),J=j(5375),fe=j(7593),Fe=j(9397),Me=j(1178);let Ie=0;const Le=new WeakMap,Be=gt=>({create:Ee=>Ce(gt,Ee),dismiss:(Ee,bt,nn)=>Re(document,Ee,bt,gt,nn),getTop:()=>(0,_.Z)(function*(){return Qe(document,gt)})()}),we=Be("ion-alert"),me=Be("ion-action-sheet"),Ue=Be("ion-modal"),rt=Be("ion-popover"),Ne=gt=>{typeof document<"u"&&X(document);const Ee=Ie++;gt.overlayIndex=Ee,gt.hasAttribute("id")||(gt.id=`ion-overlay-${Ee}`)},Ce=(gt,Ee)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(gt).then(()=>{const bt=document.createElement(gt);return bt.classList.add("overlay-hidden"),Object.assign(bt,Object.assign(Object.assign({},Ee),{hasController:!0})),ze(document).appendChild(bt),new Promise(nn=>(0,Fe.c)(bt,nn))}):Promise.resolve(),ue='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',ut=(gt,Ee)=>{let bt=gt.querySelector(ue);const nn=null==bt?void 0:bt.shadowRoot;nn&&(bt=nn.querySelector(ue)||bt),bt?(0,Fe.f)(bt):Ee.focus()},et=(gt,Ee)=>{const bt=Array.from(gt.querySelectorAll(ue));let nn=bt.length>0?bt[bt.length-1]:null;const fn=null==nn?void 0:nn.shadowRoot;fn&&(nn=fn.querySelector(ue)||nn),nn?nn.focus():Ee.focus()},X=gt=>{0===Ie&&(Ie=1,gt.addEventListener("focus",Ee=>{((gt,Ee)=>{const bt=Qe(Ee,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),nn=gt.target;bt&&nn&&!bt.classList.contains("ion-disable-focus-trap")&&(bt.shadowRoot?(()=>{if(bt.contains(nn))bt.lastFocus=nn;else{const _n=bt.lastFocus;ut(bt,bt),_n===Ee.activeElement&&et(bt,bt),bt.lastFocus=Ee.activeElement}})():(()=>{if(bt===nn)bt.lastFocus=void 0;else{const _n=(0,Fe.g)(bt);if(!_n.contains(nn))return;const Xt=_n.querySelector(".ion-overlay-wrapper");if(!Xt)return;if(Xt.contains(nn))bt.lastFocus=nn;else{const Tn=bt.lastFocus;ut(Xt,bt),Tn===Ee.activeElement&&et(Xt,bt),bt.lastFocus=Ee.activeElement}}})())})(Ee,gt)},!0),gt.addEventListener("ionBackButton",Ee=>{const bt=Qe(gt);null!=bt&&bt.backdropDismiss&&Ee.detail.register(fe.OVERLAY_BACK_BUTTON_PRIORITY,()=>bt.dismiss(void 0,ht))}),gt.addEventListener("keydown",Ee=>{if("Escape"===Ee.key){const bt=Qe(gt);null!=bt&&bt.backdropDismiss&&bt.dismiss(void 0,ht)}}))},Re=(gt,Ee,bt,nn,fn)=>{const Mn=Qe(gt,nn,fn);return Mn?Mn.dismiss(Ee,bt):Promise.reject("overlay does not exist")},Qe=(gt,Ee,bt)=>{const nn=((gt,Ee)=>(void 0===Ee&&(Ee="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(gt.querySelectorAll(Ee)).filter(bt=>bt.overlayIndex>0)))(gt,Ee).filter(fn=>!(gt=>gt.classList.contains("overlay-hidden"))(fn));return void 0===bt?nn[nn.length-1]:nn.find(fn=>fn.id===bt)},ye=(gt=!1)=>{const bt=ze(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");bt&&(gt?bt.setAttribute("aria-hidden","true"):bt.removeAttribute("aria-hidden"))},qe=function(){var gt=(0,_.Z)(function*(Ee,bt,nn,fn,Mn){var _n,Xt;if(Ee.presented)return;ye(!0),Ee.presented=!0,Ee.willPresent.emit(),null===(_n=Ee.willPresentShorthand)||void 0===_n||_n.emit();const Tn=(0,m.b)(Ee),Hn=Ee.enterAnimation?Ee.enterAnimation:m.c.get(bt,"ios"===Tn?nn:fn);(yield _t(Ee,Hn,Ee.el,Mn))&&(Ee.didPresent.emit(),null===(Xt=Ee.didPresentShorthand)||void 0===Xt||Xt.emit()),"ION-TOAST"!==Ee.el.tagName&&nt(Ee.el),Ee.keyboardClose&&(null===document.activeElement||!Ee.el.contains(document.activeElement))&&Ee.el.focus()});return function(bt,nn,fn,Mn,_n){return gt.apply(this,arguments)}}(),nt=function(){var gt=(0,_.Z)(function*(Ee){let bt=document.activeElement;if(!bt)return;const nn=null==bt?void 0:bt.shadowRoot;nn&&(bt=nn.querySelector(ue)||bt),yield Ee.onDidDismiss(),bt.focus()});return function(bt){return gt.apply(this,arguments)}}(),ct=function(){var gt=(0,_.Z)(function*(Ee,bt,nn,fn,Mn,_n,Xt){var Tn,Hn;if(!Ee.presented)return!1;ye(!1),Ee.presented=!1;try{Ee.el.style.setProperty("pointer-events","none"),Ee.willDismiss.emit({data:bt,role:nn}),null===(Tn=Ee.willDismissShorthand)||void 0===Tn||Tn.emit({data:bt,role:nn});const or=(0,m.b)(Ee),En=Ee.leaveAnimation?Ee.leaveAnimation:m.c.get(fn,"ios"===or?Mn:_n);nn!==Zt&&(yield _t(Ee,En,Ee.el,Xt)),Ee.didDismiss.emit({data:bt,role:nn}),null===(Hn=Ee.didDismissShorthand)||void 0===Hn||Hn.emit({data:bt,role:nn}),Le.delete(Ee),Ee.el.classList.add("overlay-hidden"),Ee.el.style.removeProperty("pointer-events"),void 0!==Ee.el.lastFocus&&(Ee.el.lastFocus=void 0)}catch(or){console.error(or)}return Ee.el.remove(),!0});return function(bt,nn,fn,Mn,_n,Xt,Tn){return gt.apply(this,arguments)}}(),ze=gt=>gt.querySelector("ion-app")||gt.body,_t=function(){var gt=(0,_.Z)(function*(Ee,bt,nn,fn){nn.classList.remove("overlay-hidden");const _n=bt(Ee.el,fn);(!Ee.animated||!m.c.getBoolean("animated",!0))&&_n.duration(0),Ee.keyboardClose&&_n.beforeAddWrite(()=>{const Tn=nn.ownerDocument.activeElement;null!=Tn&&Tn.matches("input,ion-input, ion-textarea")&&Tn.blur()});const Xt=Le.get(Ee)||[];return Le.set(Ee,[...Xt,_n]),yield _n.play(),!0});return function(bt,nn,fn,Mn){return gt.apply(this,arguments)}}(),ot=(gt,Ee)=>{let bt;const nn=new Promise(fn=>bt=fn);return xe(gt,Ee,fn=>{bt(fn.detail)}),nn},xe=(gt,Ee,bt)=>{const nn=fn=>{(0,Fe.b)(gt,Ee,nn),bt(fn)};(0,Fe.a)(gt,Ee,nn)},Ae=gt=>"cancel"===gt||gt===ht,Oe=gt=>gt(),it=(gt,Ee)=>{if("function"==typeof gt)return m.c.get("_zoneGate",Oe)(()=>{try{return gt(Ee)}catch(nn){throw nn}})},ht="backdrop",Zt="gesture",Vt=gt=>{let bt,Ee=!1;const nn=(0,J.C)(),fn=(Xt=!1)=>{if(bt&&!Xt)return{delegate:bt,inline:Ee};const{el:Tn,hasController:Hn,delegate:or}=gt;return Ee=null!==Tn.parentNode&&!Hn,bt=Ee?or||nn:or,{inline:Ee,delegate:bt}};return{attachViewToDom:function(){var Xt=(0,_.Z)(function*(Tn){const{delegate:Hn}=fn(!0);if(Hn)return yield Hn.attachViewToDom(gt.el,Tn);const{hasController:or}=gt;if(or&&void 0!==Tn)throw new Error("framework delegate is missing");return null});return function(Hn){return Xt.apply(this,arguments)}}(),removeViewFromDom:()=>{const{delegate:Xt}=fn();Xt&&void 0!==gt.el&&Xt.removeViewFromDom(gt.el.parentElement,gt.el)}}},vn=()=>{let gt;const Ee=()=>{gt&&(gt(),gt=void 0)};return{addClickListener:(nn,fn)=>{Ee();const Mn=void 0!==fn?document.getElementById(fn):null;Mn?gt=((Xt,Tn)=>{const Hn=()=>{Tn.present()};return Xt.addEventListener("click",Hn),()=>{Xt.removeEventListener("click",Hn)}})(Mn,nn):(0,Me.p)(`A trigger element with the ID "${fn}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,nn)},removeClickListener:Ee}}},7447:(cn,mt,j)=>{"use strict";var _=j(1481),m=j(4650),J=j(2435),fe=j(4709);let Fe=(()=>{class u{constructor(){}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-root"]],decls:4,vars:0,template:function(l,f){1&l&&(m.TgZ(0,"ion-app")(1,"h1"),m._uU(2,"hello there"),m.qZA(),m._UZ(3,"ion-router-outlet"),m.qZA())},dependencies:[fe.dr,fe.jP]}),u})();const Me=[{path:"",loadChildren:()=>j.e(174).then(j.bind(j,5652)).then(u=>u.TabsPageModule)},{path:"tab1",loadChildren:()=>j.e(4152).then(j.bind(j,4152)).then(u=>u.Tab1PageModule)}];let Ie=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({imports:[J.Bz.forRoot(Me,{preloadingStrategy:J.wm}),J.Bz]}),u})();const Le_firebaseConfig={apiKey:"AIzaSyDHihjHGIy7ft2ZLy5sPxLWuFoUSO8f91o",authDomain:"studentapp-289c8.firebaseapp.com",databaseURL:"https://studentapp-289c8-default-rtdb.europe-west1.firebasedatabase.app",projectId:"studentapp-289c8",storageBucket:"studentapp-289c8.appspot.com",messagingSenderId:"168959365364",appId:"1:168959365364:web:4f3ac4c945d1c8bb3c0ea1",measurementId:"G-C4PML4WLYN"};var Be=j(2011),we=j(1205),me=j(9751),ve=j(9646),Ue=j(8996),je=j(4986),rt=j(4482),Dt=j(5403),Ce=j(4004),ue=j(3900),ut=j(2122),Je=j(3942),et=j(5861),Xe=j(9681),X=j(2090),Re=j(4859);const ne="firebasestorage.googleapis.com",Qe="storageBucket";class ct extends X.ZR{constructor(a,l,f=0){super(_t(a),`Firebase Storage: ${l} (${_t(a)})`),this.status_=f,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(a){this.status_=a}_codeEquals(a){return _t(a)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(a){this.customData.serverResponse=a,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ze=(()=>{return(u=ze||(ze={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ze;var u})();function _t(u){return"storage/"+u}function ot(){return new ct(ze.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Zt(){return new ct(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vt(){return new ct(ze.CANCELED,"User canceled the upload/download.")}function bt(){return new ct(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _n(u){return new ct(ze.INVALID_ARGUMENT,u)}function Xt(){return new ct(ze.APP_DELETED,"The Firebase app was deleted.")}function Tn(u){return new ct(ze.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hn(u,a){return new ct(ze.INVALID_FORMAT,"String does not match format '"+u+"': "+a)}function or(u){throw new ct(ze.INTERNAL_ERROR,"Internal error: "+u)}class En{constructor(a,l){this.bucket=a,this.path_=l}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const a=encodeURIComponent;return"/b/"+a(this.bucket)+"/o/"+a(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(a,l){let f;try{f=En.makeFromUrl(a,l)}catch{return new En(a,"")}if(""===f.path)return f;throw function gt(u){return new ct(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(a)}static makeFromUrl(a,l){let f=null;const E="([A-Za-z0-9.\\-_]+)",ee=new RegExp("^gs://"+E+"(/(.*))?$","i");function Se(_s){_s.path_=decodeURIComponent(_s.path)}const Ot=l.replace(/[.]/g,"\\."),Wr=[{regex:ee,indices:{bucket:1,path:3},postModify:function M(_s){"/"===_s.path.charAt(_s.path.length-1)&&(_s.path_=_s.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Ot}/v[A-Za-z0-9_]+/b/${E}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Se},{regex:new RegExp(`^https?://${l===ne?"(?:storage.googleapis.com|storage.cloud.google.com)":l}/${E}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Se}];for(let _s=0;_s<Wr.length;_s++){const eu=Wr[_s],ia=eu.regex.exec(a);if(ia){let $o=ia[eu.indices.path];$o||($o=""),f=new En(ia[eu.indices.bucket],$o),eu.postModify(f);break}}if(null==f)throw function vn(u){return new ct(ze.INVALID_URL,"Invalid URL '"+u+"'.")}(a);return f}}class gr{constructor(a){this.promise_=Promise.reject(a)}getPromise(){return this.promise_}cancel(a=!1){}}function _r(u){return"string"==typeof u||u instanceof String}function On(u){return Jt()&&u instanceof Blob}function Jt(){return typeof Blob<"u"&&!(0,X.UG)()}function An(u,a,l,f){if(f<a)throw _n(`Invalid value for '${u}'. Expected ${a} or greater.`);if(f>l)throw _n(`Invalid value for '${u}'. Expected ${l} or less.`)}function Kt(u,a,l){let f=a;return null==l&&(f=`https://${a}`),`${l}://${f}/v0${u}`}function yr(u){const a=encodeURIComponent;let l="?";for(const f in u)u.hasOwnProperty(f)&&(l=l+(a(f)+"=")+a(u[f])+"&");return l=l.slice(0,-1),l}var ir=(()=>{return(u=ir||(ir={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",ir;var u})();function Kr(u,a){const l=u>=500&&u<600,E=-1!==[408,429].indexOf(u),M=-1!==a.indexOf(u);return l||E||M}class hi{constructor(a,l,f,E,M,U,ee,he,Se,wt,Ot,Bt=!0){this.url_=a,this.method_=l,this.headers_=f,this.body_=E,this.successCodes_=M,this.additionalRetryCodes_=U,this.callback_=ee,this.errorCallback_=he,this.timeout_=Se,this.progressCallback_=wt,this.connectionFactory_=Ot,this.retry=Bt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((pn,kn)=>{this.resolve_=pn,this.reject_=kn,this.start_()})}start_(){const l=(f,E)=>{const M=this.resolve_,U=this.reject_,ee=E.connection;if(E.wasSuccessCode)try{const he=this.callback_(ee,ee.getResponse());!function Rr(u){return void 0!==u}(he)?M():M(he)}catch(he){U(he)}else if(null!==ee){const he=ot();he.serverResponse=ee.getErrorText(),U(this.errorCallback_?this.errorCallback_(ee,he):he)}else U(E.canceled?this.appDelete_?Xt():Vt():Zt())};this.canceled_?l(0,new wi(!1,null,!0)):this.backoffId_=function tn(u,a,l){let f=1,E=null,M=null,U=!1,ee=0;function he(){return 2===ee}let Se=!1;function wt(...Xr){Se||(Se=!0,a.apply(null,Xr))}function Ot(Xr){E=setTimeout(()=>{E=null,u(pn,he())},Xr)}function Bt(){M&&clearTimeout(M)}function pn(Xr,...Li){if(Se)return void Bt();if(Xr)return Bt(),void wt.call(null,Xr,...Li);if(he()||U)return Bt(),void wt.call(null,Xr,...Li);let Wr;f<64&&(f*=2),1===ee?(ee=2,Wr=0):Wr=1e3*(f+Math.random()),Ot(Wr)}let kn=!1;function Mr(Xr){kn||(kn=!0,Bt(),!Se&&(null!==E?(Xr||(ee=2),clearTimeout(E),Ot(0)):Xr||(ee=1)))}return Ot(0),M=setTimeout(()=>{U=!0,Mr(!0)},l),Mr}((f,E)=>{if(E)return void f(!1,new wi(!1,null,!0));const M=this.connectionFactory_();this.pendingConnection_=M;const U=ee=>{null!==this.progressCallback_&&this.progressCallback_(ee.loaded,ee.lengthComputable?ee.total:-1)};null!==this.progressCallback_&&M.addUploadProgressListener(U),M.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&M.removeUploadProgressListener(U),this.pendingConnection_=null;const ee=M.getErrorCode()===ir.NO_ERROR,he=M.getStatus();if(!ee||Kr(he,this.additionalRetryCodes_)&&this.retry){const wt=M.getErrorCode()===ir.ABORT;return void f(!1,new wi(!1,null,wt))}const Se=-1!==this.successCodes_.indexOf(he);f(!0,new wi(Se,M))})},l,this.timeout_)}getPromise(){return this.promise_}cancel(a){this.canceled_=!0,this.appDelete_=a||!1,null!==this.backoffId_&&function Yr(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class wi{constructor(a,l,f){this.wasSuccessCode=a,this.connection=l,this.canceled=!!f}}function jt(...u){const a=function an(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==a){const l=new a;for(let f=0;f<u.length;f++)l.append(u[f]);return l.getBlob()}if(Jt())return new Blob(u);throw new ct(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const In={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $n{constructor(a,l){this.data=a,this.contentType=l||null}}function Er(u,a){switch(u){case In.RAW:return new $n($e(a));case In.BASE64:case In.BASE64URL:return new $n(Ke(u,a));case In.DATA_URL:return new $n(function It(u){const a=new Nt(u);return a.base64?Ke(In.BASE64,a.rest):function Pe(u){let a;try{a=decodeURIComponent(u)}catch{throw Hn(In.DATA_URL,"Malformed data URL.")}return $e(a)}(a.rest)}(a),function wn(u){return new Nt(u).contentType}(a))}throw ot()}function $e(u){const a=[];for(let l=0;l<u.length;l++){let f=u.charCodeAt(l);f<=127?a.push(f):f<=2047?a.push(192|f>>6,128|63&f):55296==(64512&f)?l<u.length-1&&56320==(64512&u.charCodeAt(l+1))?(f=65536|(1023&f)<<10|1023&u.charCodeAt(++l),a.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)):a.push(239,191,189):56320==(64512&f)?a.push(239,191,189):a.push(224|f>>12,128|f>>6&63,128|63&f)}return new Uint8Array(a)}function Ke(u,a){switch(u){case In.BASE64:{const E=-1!==a.indexOf("-"),M=-1!==a.indexOf("_");if(E||M)throw Hn(u,"Invalid character '"+(E?"-":"_")+"' found: is it base64url encoded?");break}case In.BASE64URL:{const E=-1!==a.indexOf("+"),M=-1!==a.indexOf("/");if(E||M)throw Hn(u,"Invalid character '"+(E?"+":"/")+"' found: is it base64 encoded?");a=a.replace(/-/g,"+").replace(/_/g,"/");break}}let l;try{l=function Ln(u){if(typeof atob>"u")throw function Mn(u){return new ct(ze.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(a)}catch(E){throw E.message.includes("polyfill")?E:Hn(u,"Invalid character found")}const f=new Uint8Array(l.length);for(let E=0;E<l.length;E++)f[E]=l.charCodeAt(E);return f}class Nt{constructor(a){this.base64=!1,this.contentType=null;const l=a.match(/^data:([^,]+)?,/);if(null===l)throw Hn(In.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=l[1]||null;null!=f&&(this.base64=function We(u,a){return u.length>=a.length&&u.substring(u.length-a.length)===a}(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-7):f),this.rest=a.substring(a.indexOf(",")+1)}}class He{constructor(a,l){let f=0,E="";On(a)?(this.data_=a,f=a.size,E=a.type):a instanceof ArrayBuffer?(l?this.data_=new Uint8Array(a):(this.data_=new Uint8Array(a.byteLength),this.data_.set(new Uint8Array(a))),f=this.data_.length):a instanceof Uint8Array&&(l?this.data_=a:(this.data_=new Uint8Array(a.length),this.data_.set(a)),f=a.length),this.size_=f,this.type_=E}size(){return this.size_}type(){return this.type_}slice(a,l){if(On(this.data_)){const E=function Cn(u,a,l){return u.webkitSlice?u.webkitSlice(a,l):u.mozSlice?u.mozSlice(a,l):u.slice?u.slice(a,l):null}(this.data_,a,l);return null===E?null:new He(E)}{const f=new Uint8Array(this.data_.buffer,a,l-a);return new He(f,!0)}}static getBlob(...a){if(Jt()){const l=a.map(f=>f instanceof He?f.data_:f);return new He(jt.apply(null,l))}{const l=a.map(U=>_r(U)?Er(In.RAW,U).data:U.data_);let f=0;l.forEach(U=>{f+=U.byteLength});const E=new Uint8Array(f);let M=0;return l.forEach(U=>{for(let ee=0;ee<U.length;ee++)E[M++]=U[ee]}),new He(E,!0)}}uploadData(){return this.data_}}function De(u){let a;try{a=JSON.parse(u)}catch{return null}return function di(u){return"object"==typeof u&&!Array.isArray(u)}(a)?a:null}function qt(u){const a=u.lastIndexOf("/",u.length-2);return-1===a?u:u.slice(a+1)}function Bn(u,a){return a}class Rn{constructor(a,l,f,E){this.server=a,this.local=l||a,this.writable=!!f,this.xform=E||Bn}}let hr=null;function pi(){if(hr)return hr;const u=[];u.push(new Rn("bucket")),u.push(new Rn("generation")),u.push(new Rn("metageneration")),u.push(new Rn("name","fullPath",!0));const l=new Rn("name");l.xform=function a(M,U){return function Qr(u){return!_r(u)||u.length<2?u:qt(u)}(U)},u.push(l);const E=new Rn("size");return E.xform=function f(M,U){return void 0!==U?Number(U):U},u.push(E),u.push(new Rn("timeCreated")),u.push(new Rn("updated")),u.push(new Rn("md5Hash",null,!0)),u.push(new Rn("cacheControl",null,!0)),u.push(new Rn("contentDisposition",null,!0)),u.push(new Rn("contentEncoding",null,!0)),u.push(new Rn("contentLanguage",null,!0)),u.push(new Rn("contentType",null,!0)),u.push(new Rn("metadata","customMetadata",!0)),hr=u,hr}function ki(u,a,l){const f=De(a);return null===f?null:function gi(u,a,l){const f={type:"file"},E=l.length;for(let M=0;M<E;M++){const U=l[M];f[U.local]=U.xform(f,a[U.server])}return function Xi(u,a){Object.defineProperty(u,"ref",{get:function l(){const M=new En(u.bucket,u.fullPath);return a._makeStorageReference(M)}})}(f,u),f}(u,f,l)}function es(u,a){const l={},f=a.length;for(let E=0;E<f;E++){const M=a[E];M.writable&&(l[M.server]=u[M.local])}return JSON.stringify(l)}const Mi="prefixes",ar="items";class Kn{constructor(a,l,f,E){this.url=a,this.method=l,this.handler=f,this.timeout=E,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xr(u){if(!u)throw ot()}function Br(u,a){return function l(f,E){const M=ki(u,E,a);return xr(null!==M),M}}function ti(u){return function a(l,f){let E;return E=401===l.getStatus()?l.getErrorText().includes("Firebase App Check token is invalid")?function it(){return new ct(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Oe(){return new ct(ze.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===l.getStatus()?function Ae(u){return new ct(ze.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===l.getStatus()?function ht(u){return new ct(ze.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):f,E.status=l.getStatus(),E.serverResponse=f.serverResponse,E}}function un(u){const a=ti(u);return function l(f,E){let M=a(f,E);return 404===f.getStatus()&&(M=function xe(u){return new ct(ze.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),M.serverResponse=E.serverResponse,M}}function Jn(u,a,l){const E=Kt(a.fullServerUrl(),u.host,u._protocol),U=u.maxOperationRetryTime,ee=new Kn(E,"GET",Br(u,l),U);return ee.errorHandler=un(a),ee}function Fr(u,a,l,f,E){const M={};M.prefix=a.isRoot?"":a.path+"/",l&&l.length>0&&(M.delimiter=l),f&&(M.pageToken=f),E&&(M.maxResults=E);const ee=Kt(a.bucketOnlyServerUrl(),u.host,u._protocol),Se=u.maxOperationRetryTime,wt=new Kn(ee,"GET",function Gi(u,a){return function l(f,E){const M=function tr(u,a,l){const f=De(l);return null===f?null:function Or(u,a,l){const f={prefixes:[],items:[],nextPageToken:l.nextPageToken};if(l[Mi])for(const E of l[Mi]){const M=E.replace(/\/$/,""),U=u._makeStorageReference(new En(a,M));f.prefixes.push(U)}if(l[ar])for(const E of l[ar]){const M=u._makeStorageReference(new En(a,E.name));f.items.push(M)}return f}(u,a,f)}(u,a,E);return xr(null!==M),M}}(u,a.bucket),Se);return wt.urlParams=M,wt.errorHandler=ti(a),wt}function _e(u,a,l){const f=Object.assign({},l);return f.fullPath=u.path,f.size=a.size(),f.contentType||(f.contentType=function se(u,a){return u&&u.contentType||a&&a.type()||"application/octet-stream"}(null,a)),f}class le{constructor(a,l,f,E){this.current=a,this.total=l,this.finalized=!!f,this.metadata=E||null}}function Ge(u,a){let l=null;try{l=u.getResponseHeader("X-Goog-Upload-Status")}catch{xr(!1)}return xr(!!l&&-1!==(a||["active"]).indexOf(l)),l}const Gt={STATE_CHANGED:"state_changed"},rn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Pn(u){switch(u){case"running":case"pausing":case"canceling":return rn.RUNNING;case"paused":return rn.PAUSED;case"success":return rn.SUCCESS;case"canceled":return rn.CANCELED;default:return rn.ERROR}}class qn{constructor(a,l,f){if(function Vr(u){return"function"==typeof u}(a)||null!=l||null!=f)this.next=a,this.error=null!=l?l:void 0,this.complete=null!=f?f:void 0;else{const M=a;this.next=M.next,this.error=M.error,this.complete=M.complete}}}function tt(u){return(...a)=>{Promise.resolve().then(()=>u(...a))}}let Ve=null;class yt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ir.NO_ERROR,this.sendPromise_=new Promise(a=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ir.ABORT,a()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ir.NETWORK_ERROR,a()}),this.xhr_.addEventListener("load",()=>{a()})})}send(a,l,f,E){if(this.sent_)throw or("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(l,a,!0),void 0!==E)for(const M in E)E.hasOwnProperty(M)&&this.xhr_.setRequestHeader(M,E[M].toString());return void 0!==f?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw or("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw or("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw or("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw or("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(a){return this.xhr_.getResponseHeader(a)}addUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",a)}removeUploadProgressListener(a){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",a)}}class Ht extends yt{initXhr(){this.xhr_.responseType="text"}}function Qt(){return Ve?Ve():new Ht}class Ss{constructor(a,l,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=a,this._blob=l,this._metadata=f,this._mappings=pi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=E=>{if(this._request=void 0,this._chunkMultiplier=1,E._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const M=this.isExponentialBackoffExpired();if(Kr(E.status,[])){if(!M)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();E=Zt()}this._error=E,this._transition("error")}},this._metadataErrorHandler=E=>{this._request=void 0,E._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=E,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((E,M)=>{this._resolve=E,this._reject=M,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const a=this._transferred;return l=>this._updateProgress(a+l)}_shouldDoResumable(a){return a.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(a){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([l,f])=>{switch(this._state){case"running":a(l,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((a,l)=>{const f=function Ye(u,a,l,f,E){const M=a.bucketOnlyServerUrl(),U=_e(a,f,E),ee={name:U.fullPath},he=Kt(M,u.host,u._protocol),wt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":U.contentType,"Content-Type":"application/json; charset=utf-8"},Ot=es(U,l),kn=new Kn(he,"POST",function pn(Mr){let Xr;Ge(Mr);try{Xr=Mr.getResponseHeader("X-Goog-Upload-URL")}catch{xr(!1)}return xr(_r(Xr)),Xr},u.maxUploadRetryTime);return kn.urlParams=ee,kn.headers=wt,kn.body=Ot,kn.errorHandler=ti(a),kn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),E=this._ref.storage._makeRequest(f,Qt,a,l);this._request=E,E.getPromise().then(M=>{this._request=void 0,this._uploadUrl=M,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const a=this._uploadUrl;this._resolveToken((l,f)=>{const E=function Ct(u,a,l,f){const he=new Kn(l,"POST",function M(Se){const wt=Ge(Se,["active","final"]);let Ot=null;try{Ot=Se.getResponseHeader("X-Goog-Upload-Size-Received")}catch{xr(!1)}Ot||xr(!1);const Bt=Number(Ot);return xr(!isNaN(Bt)),new le(Bt,f.size(),"final"===wt)},u.maxUploadRetryTime);return he.headers={"X-Goog-Upload-Command":"query"},he.errorHandler=ti(a),he}(this._ref.storage,this._ref._location,a,this._blob),M=this._ref.storage._makeRequest(E,Qt,l,f);this._request=M,M.getPromise().then(U=>{this._request=void 0,this._updateProgress(U.current),this._needToFetchStatus=!1,U.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const a=262144*this._chunkMultiplier,l=new le(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((E,M)=>{let U;try{U=function xt(u,a,l,f,E,M,U,ee){const he=new le(0,0);if(U?(he.current=U.current,he.total=U.total):(he.current=0,he.total=f.size()),f.size()!==he.total)throw function nn(){return new ct(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Se=he.total-he.current;let wt=Se;E>0&&(wt=Math.min(wt,E));const Ot=he.current;let pn="";pn=0===wt?"finalize":Se===wt?"upload, finalize":"upload";const kn={"X-Goog-Upload-Command":pn,"X-Goog-Upload-Offset":`${he.current}`},Mr=f.slice(Ot,Ot+wt);if(null===Mr)throw bt();const Wr=new Kn(l,"POST",function Xr(_s,eu){const ia=Ge(_s,["active","final"]),_d=he.current+wt,$o=f.size();let Du;return Du="final"===ia?Br(a,M)(_s,eu):null,new le(_d,$o,"final"===ia,Du)},a.maxUploadRetryTime);return Wr.headers=kn,Wr.body=Mr.uploadData(),Wr.progressCallback=ee||null,Wr.errorHandler=ti(u),Wr}(this._ref._location,this._ref.storage,f,this._blob,a,this._mappings,l,this._makeProgressCallback())}catch(he){return this._error=he,void this._transition("error")}const ee=this._ref.storage._makeRequest(U,Qt,E,M,!1);this._request=ee,ee.getPromise().then(he=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(he.current),he.finalized?(this._metadata=he.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((a,l)=>{const f=Jn(this._ref.storage,this._ref._location,this._mappings),E=this._ref.storage._makeRequest(f,Qt,a,l);this._request=E,E.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((a,l)=>{const f=function st(u,a,l,f,E){const M=a.bucketOnlyServerUrl(),U={"X-Goog-Upload-Protocol":"multipart"},he=function ee(){let Wr="";for(let _s=0;_s<2;_s++)Wr+=Math.random().toString().slice(2);return Wr}();U["Content-Type"]="multipart/related; boundary="+he;const Se=_e(a,f,E),wt=es(Se,l),pn=He.getBlob("--"+he+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wt+"\r\n--"+he+"\r\nContent-Type: "+Se.contentType+"\r\n\r\n",f,"\r\n--"+he+"--");if(null===pn)throw bt();const kn={name:Se.fullPath},Mr=Kt(M,u.host,u._protocol),Li=u.maxUploadRetryTime,Ts=new Kn(Mr,"POST",Br(u,l),Li);return Ts.urlParams=kn,Ts.headers=U,Ts.body=pn.uploadData(),Ts.errorHandler=ti(a),Ts}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),E=this._ref.storage._makeRequest(f,Qt,a,l);this._request=E,E.getPromise().then(M=>{this._request=void 0,this._metadata=M,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(a){const l=this._transferred;this._transferred=a,this._transferred!==l&&this._notifyObservers()}_transition(a){if(this._state!==a)switch(a){case"canceling":case"pausing":this._state=a,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const l="paused"===this._state;this._state=a,l&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=a,this._notifyObservers();break;case"canceled":this._error=Vt(),this._state=a,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const a=Pn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:a,metadata:this._metadata,task:this,ref:this._ref}}on(a,l,f,E){const M=new qn(l||void 0,f||void 0,E||void 0);return this._addObserver(M),()=>{this._removeObserver(M)}}then(a,l){return this._promise.then(a,l)}catch(a){return this.then(null,a)}_addObserver(a){this._observers.push(a),this._notifyObserver(a)}_removeObserver(a){const l=this._observers.indexOf(a);-1!==l&&this._observers.splice(l,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(l=>{this._notifyObserver(l)})}_finishPromise(){if(void 0!==this._resolve){let a=!0;switch(Pn(this._state)){case rn.SUCCESS:tt(this._resolve.bind(null,this.snapshot))();break;case rn.CANCELED:case rn.ERROR:tt(this._reject.bind(null,this._error))();break;default:a=!1}a&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(a){switch(Pn(this._state)){case rn.RUNNING:case rn.PAUSED:a.next&&tt(a.next.bind(a,this.snapshot))();break;case rn.SUCCESS:a.complete&&tt(a.complete.bind(a))();break;default:a.error&&tt(a.error.bind(a,this._error))()}}resume(){const a="paused"===this._state||"pausing"===this._state;return a&&this._transition("running"),a}pause(){const a="running"===this._state;return a&&this._transition("pausing"),a}cancel(){const a="running"===this._state||"pausing"===this._state;return a&&this._transition("canceling"),a}}class ei{constructor(a,l){this._service=a,this._location=l instanceof En?l:En.makeFromUrl(l,a.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(a,l){return new ei(a,l)}get root(){const a=new En(this._location.bucket,"");return this._newRef(this._service,a)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qt(this._location.path)}get storage(){return this._service}get parent(){const a=function Et(u){if(0===u.length)return null;const a=u.lastIndexOf("/");return-1===a?"":u.slice(0,a)}(this._location.path);if(null===a)return null;const l=new En(this._location.bucket,a);return new ei(this._service,l)}_throwIfRoot(a){if(""===this._location.path)throw Tn(a)}}function co(u,a,l){return ts.apply(this,arguments)}function ts(){return(ts=(0,et.Z)(function*(u,a,l){const E=yield $i(u,{pageToken:l});a.prefixes.push(...E.prefixes),a.items.push(...E.items),null!=E.nextPageToken&&(yield co(u,a,E.nextPageToken))})).apply(this,arguments)}function $i(u,a){null!=a&&"number"==typeof a.maxResults&&An("options.maxResults",1,1e3,a.maxResults);const l=a||{},f=Fr(u.storage,u._location,"/",l.pageToken,l.maxResults);return u.storage.makeRequestWithTokens(f,Qt)}function Vo(u){u._throwIfRoot("getDownloadURL");const a=function Ri(u,a,l){const E=Kt(a.fullServerUrl(),u.host,u._protocol),U=u.maxOperationRetryTime,ee=new Kn(E,"GET",function us(u,a){return function l(f,E){const M=ki(u,E,a);return xr(null!==M),function Tr(u,a,l,f){const E=De(a);if(null===E||!_r(E.downloadTokens))return null;const M=E.downloadTokens;if(0===M.length)return null;const U=encodeURIComponent;return M.split(",").map(Se=>{const Ot=u.fullPath;return Kt("/b/"+U(u.bucket)+"/o/"+U(Ot),l,f)+yr({alt:"media",token:Se})})[0]}(M,E,u.host,u._protocol)}}(u,l),U);return ee.errorHandler=un(a),ee}(u.storage,u._location,pi());return u.storage.makeRequestWithTokens(a,Qt).then(l=>{if(null===l)throw function fn(){return new ct(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return l})}function Is(u,a){const l=function Lt(u,a){const l=a.split("/").filter(f=>f.length>0).join("/");return 0===u.length?l:u+"/"+l}(u._location.path,a),f=new En(u._location.bucket,l);return new ei(u.storage,f)}function cs(u,a){if(u instanceof Ci){const l=u;if(null==l._bucket)throw function Ee(){return new ct(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qe+"' property when initializing the app?")}();const f=new ei(l,l._bucket);return null!=a?cs(f,a):f}return void 0!==a?Is(u,a):u}function sa(u,a){if(a&&function xs(u){return/^[A-Za-z]+:\/\//.test(u)}(a)){if(u instanceof Ci)return function no(u,a){return new ei(u,a)}(u,a);throw _n("To use ref(service, url), the first argument must be a Storage instance.")}return cs(u,a)}function wo(u,a){const l=null==a?void 0:a[Qe];return null==l?null:En.makeFromBucketSpec(l,u)}class Ci{constructor(a,l,f,E,M){this.app=a,this._authProvider=l,this._appCheckProvider=f,this._url=E,this._firebaseVersion=M,this._bucket=null,this._host=ne,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=E?En.makeFromBucketSpec(E,this._host):wo(this._host,this.app.options)}get host(){return this._host}set host(a){this._host=a,this._bucket=null!=this._url?En.makeFromBucketSpec(this._url,a):wo(a,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(a){An("time",0,Number.POSITIVE_INFINITY,a),this._maxUploadRetryTime=a}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(a){An("time",0,Number.POSITIVE_INFINITY,a),this._maxOperationRetryTime=a}_getAuthToken(){var a=this;return(0,et.Z)(function*(){if(a._overrideAuthToken)return a._overrideAuthToken;const l=a._authProvider.getImmediate({optional:!0});if(l){const f=yield l.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var a=this;return(0,et.Z)(function*(){const l=a._appCheckProvider.getImmediate({optional:!0});return l?(yield l.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(a=>a.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(a){return new ei(this,a)}_makeRequest(a,l,f,E,M=!0){if(this._deleted)return new gr(Xt());{const U=function fi(u,a,l,f,E,M,U=!0){const ee=yr(u.urlParams),he=u.url+ee,Se=Object.assign({},u.headers);return function nr(u,a){a&&(u["X-Firebase-GMPID"]=a)}(Se,a),function Dr(u,a){null!==a&&a.length>0&&(u.Authorization="Firebase "+a)}(Se,l),function si(u,a){u["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager")}(Se,M),function Wn(u,a){null!==a&&(u["X-Firebase-AppCheck"]=a)}(Se,f),new hi(he,u.method,Se,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,E,U)}(a,this._appId,f,E,l,this._firebaseVersion,M);return this._requests.add(U),U.getPromise().then(()=>this._requests.delete(U),()=>this._requests.delete(U)),U}}makeRequestWithTokens(a,l){var f=this;return(0,et.Z)(function*(){const[E,M]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(a,l,E,M).getPromise()})()}}const Qi="@firebase/storage";function ko(u,a){return sa(u=(0,X.m9)(u),a)}function li(u,{instanceIdentifier:a}){const l=u.getProvider("app").getImmediate(),f=u.getProvider("auth-internal"),E=u.getProvider("app-check-internal");return new Ci(l,f,E,a,Xe.SDK_VERSION)}!function ba(){(0,Xe._registerComponent)(new Re.wA("storage",li,"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(Qi,"0.11.2",""),(0,Xe.registerVersion)(Qi,"0.11.2","esm2017")}();class js{constructor(a,l,f){this._delegate=a,this.task=l,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Ni{constructor(a,l){this._delegate=a,this._ref=l,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new js(this._delegate.snapshot,this,this._ref)}then(a,l){return this._delegate.then(f=>{if(a)return a(new js(f,this,this._ref))},l)}on(a,l,f,E){let M;return l&&(M="function"==typeof l?U=>l(new js(U,this,this._ref)):{next:l.next?U=>l.next(new js(U,this,this._ref)):void 0,complete:l.complete||void 0,error:l.error||void 0}),this._delegate.on(a,M,f||void 0,E||void 0)}}class jo{constructor(a,l){this._delegate=a,this._service=l}get prefixes(){return this._delegate.prefixes.map(a=>new Cs(a,this._service))}get items(){return this._delegate.items.map(a=>new Cs(a,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Cs{constructor(a,l){this._delegate=a,this.storage=l}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(a){const l=function bs(u,a){return Is(u,a)}(this._delegate,a);return new Cs(l,this.storage)}get root(){return new Cs(this._delegate.root,this.storage)}get parent(){const a=this._delegate.parent;return null==a?null:new Cs(a,this.storage)}put(a,l){return this._throwIfRoot("put"),new Ni(function io(u,a,l){return function Zs(u,a,l){return u._throwIfRoot("uploadBytesResumable"),new Ss(u,new He(a),l)}(u=(0,X.m9)(u),a,l)}(this._delegate,a,l),this)}putString(a,l=In.RAW,f){this._throwIfRoot("putString");const E=Er(l,a),M=Object.assign({},f);return null==M.contentType&&null!=E.contentType&&(M.contentType=E.contentType),new Ni(new Ss(this._delegate,new He(E.data,!0),M),this)}listAll(){return function Rs(u){return function to(u){const a={prefixes:[],items:[]};return co(u,a).then(()=>a)}(u=(0,X.m9)(u))}(this._delegate).then(a=>new jo(a,this.storage))}list(a){return function ws(u,a){return $i(u=(0,X.m9)(u),a)}(this._delegate,a||void 0).then(l=>new jo(l,this.storage))}getMetadata(){return function Ms(u){return function ns(u){u._throwIfRoot("getMetadata");const a=Jn(u.storage,u._location,pi());return u.storage.makeRequestWithTokens(a,Qt)}(u=(0,X.m9)(u))}(this._delegate)}updateMetadata(a){return function ho(u,a){return function Us(u,a){u._throwIfRoot("updateMetadata");const l=function Lr(u,a,l,f){const M=Kt(a.fullServerUrl(),u.host,u._protocol),ee=es(l,f),Se=u.maxOperationRetryTime,wt=new Kn(M,"PATCH",Br(u,f),Se);return wt.headers={"Content-Type":"application/json; charset=utf-8"},wt.body=ee,wt.errorHandler=un(a),wt}(u.storage,u._location,a,pi());return u.storage.makeRequestWithTokens(l,Qt)}(u=(0,X.m9)(u),a)}(this._delegate,a)}getDownloadURL(){return function Vs(u){return Vo(u=(0,X.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function bo(u){return function Io(u){u._throwIfRoot("deleteObject");const a=function vi(u,a){const f=Kt(a.fullServerUrl(),u.host,u._protocol),ee=new Kn(f,"DELETE",function U(he,Se){},u.maxOperationRetryTime);return ee.successCodes=[200,204],ee.errorHandler=un(a),ee}(u.storage,u._location);return u.storage.makeRequestWithTokens(a,Qt)}(u=(0,X.m9)(u))}(this._delegate)}_throwIfRoot(a){if(""===this._delegate._location.path)throw Tn(a)}}class Ps{constructor(a,l){this.app=a,this._delegate=l}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(a){if(Ei(a))throw _n("ref() expected a child path but got a URL, use refFromURL instead.");return new Cs(ko(this._delegate,a),this)}refFromURL(a){if(!Ei(a))throw _n("refFromURL() expected a full URL but got a child path, use ref() instead.");try{En.makeFromUrl(a,this._delegate.host)}catch{throw _n("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cs(ko(this._delegate,a),this)}setMaxUploadRetryTime(a){this._delegate.maxUploadRetryTime=a}setMaxOperationRetryTime(a){this._delegate.maxOperationRetryTime=a}useEmulator(a,l,f={}){!function Pr(u,a,l,f={}){!function Oo(u,a,l,f={}){u.host=`${a}:${l}`,u._protocol="http";const{mockUserToken:E}=f;E&&(u._overrideAuthToken="string"==typeof E?E:(0,X.Sg)(E,u.app.options.projectId))}(u,a,l,f)}(this._delegate,a,l,f)}}function Ei(u){return/^[A-Za-z]+:\/\//.test(u)}function Hs(u,{instanceIdentifier:a}){const l=u.getProvider("app-compat").getImmediate(),f=u.getProvider("storage").getImmediate({identifier:a});return new Ps(l,f)}!function Do(u){const a={TaskState:rn,TaskEvent:Gt,StringFormat:In,Storage:Ps,Reference:Cs};u.INTERNAL.registerComponent(new Re.wA("storage-compat",Hs,"PUBLIC").setServiceProps(a).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Je.Z);var aa=j(6217),sr=j(9260);function so(u){const a=function Ho(u){return new me.y(a=>{const l=U=>a.next(U);l(u.snapshot);const M=u.on("state_changed",l);return u.then(U=>{l(U),a.complete()},U=>{l(u.snapshot),(U=>{a.error(U)})(U)}),function(){M()}}).pipe(function Ne(u,a=je.z){return(0,rt.e)((l,f)=>{let E=null,M=null,U=null;const ee=()=>{if(E){E.unsubscribe(),E=null;const Se=M;M=null,f.next(Se)}};function he(){const Se=U+u,wt=a.now();if(wt<Se)return E=this.schedule(void 0,Se-wt),void f.add(E);ee()}l.subscribe((0,Dt.x)(f,Se=>{M=Se,U=a.now(),E||(E=a.schedule(he,u),f.add(E))},()=>{ee(),f.complete()},void 0,()=>{M=E=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>a,percentageChanges:()=>a.pipe((0,Ce.U)(l=>l.bytesTransferred/l.totalBytes*100))}}function C(u){return{getDownloadURL:()=>(0,ve.of)(void 0).pipe(ut.fc,(0,ue.w)(()=>u.getDownloadURL()),ut.iC),getMetadata:()=>(0,ve.of)(void 0).pipe(ut.fc,(0,ue.w)(()=>u.getMetadata()),ut.iC),delete:()=>(0,Ue.D)(u.delete()),child:a=>C(u.child(a)),updateMetadata:a=>(0,Ue.D)(u.updateMetadata(a)),put:(a,l)=>so(u.put(a,l)),putString:(a,l,f)=>so(u.putString(a,l,f)),list:a=>(0,Ue.D)(u.list(a)),listAll:()=>(0,Ue.D)(u.listAll())}}const q=new m.OlP("angularfire2.storageBucket"),T=new m.OlP("angularfire2.storage.maxUploadRetryTime"),W=new m.OlP("angularfire2.storage.maxOperationRetryTime"),ge=new m.OlP("angularfire2.storage.use-emulator");let L=(()=>{class u{constructor(l,f,E,M,U,ee,he,Se,wt,Ot){const Bt=(0,Be.on)(l,U,f);this.storage=(0,Be.cc)(`${Bt.name}.storage.${E}`,"AngularFireStorage",Bt.name,()=>{const pn=U.runOutsideAngular(()=>Bt.storage(E||void 0)),kn=wt;return kn&&pn.useEmulator(...kn),he&&pn.setMaxUploadRetryTime(he),Se&&pn.setMaxOperationRetryTime(Se),pn},[he,Se])}ref(l){return C(this.storage.ref(l))}refFromURL(l){return C(this.storage.refFromURL(l))}upload(l,f,E){return C(this.storage.ref(l)).put(f,E)}}return u.\u0275fac=function(l){return new(l||u)(m.LFG(Be.Dh),m.LFG(Be.xv,8),m.LFG(q,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ut.HU),m.LFG(T,8),m.LFG(W,8),m.LFG(ge,8),m.LFG(aa.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),O=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({}),u})(),te=(()=>{class u{constructor(){sr.Z.registerVersion("angularfire",ut.q4.full,"gcs-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[L],imports:[O]}),u})();var vt=j(3101),sn=j(6451),br=j(3099),oi=j(5026),Zr=j(1884),hs=j(8421),rs=j(4671),Ui=j(5032),Ca=j(7669);j(9800);var la=j(1877);const ua="@firebase/database";let Da="";function Na(u){Da=u}class Ol{constructor(a){this.domStorage_=a,this.prefix_="firebase:"}set(a,l){null==l?this.domStorage_.removeItem(this.prefixedName_(a)):this.domStorage_.setItem(this.prefixedName_(a),(0,X.Wl)(l))}get(a){const l=this.domStorage_.getItem(this.prefixedName_(a));return null==l?null:(0,X.cI)(l)}remove(a){this.domStorage_.removeItem(this.prefixedName_(a))}prefixedName_(a){return this.prefix_+a}toString(){return this.domStorage_.toString()}}class gl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(a,l){null==l?delete this.cache_[a]:this.cache_[a]=l}get(a){return(0,X.r3)(this.cache_,a)?this.cache_[a]:null}remove(a){delete this.cache_[a]}}const To=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const a=window[u];return a.setItem("firebase:sentinel","cache"),a.removeItem("firebase:sentinel"),new Ol(a)}}catch{}return new gl},zs=To("localStorage"),ca=To("sessionStorage"),Qs=new la.Yd("@firebase/database"),kl=function(){let u=1;return function(){return u++}}(),qa=function(u){const a=(0,X.dS)(u),l=new X.gQ;l.update(a);const f=l.digest();return X.US.encodeByteArray(f)},zo=function(...u){let a="";for(let l=0;l<u.length;l++){const f=u[l];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?a+=zo.apply(null,f):a+="object"==typeof f?(0,X.Wl)(f):f,a+=" "}return a};let Ta=null,ml=!0;const So=function(u,a){(0,X.hu)(!a||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Qs.logLevel=la.in.VERBOSE,Ta=Qs.log.bind(Qs),a&&ca.set("logging_enabled",!0)):"function"==typeof u?Ta=u:(Ta=null,ca.remove("logging_enabled"))},is=function(...u){if(!0===ml&&(ml=!1,null===Ta&&!0===ca.get("logging_enabled")&&So(!0)),Ta){const a=zo.apply(null,u);Ta(a)}},Go=function(u){return function(...a){is(u,...a)}},da=function(...u){const a="FIREBASE INTERNAL ERROR: "+zo(...u);Qs.error(a)},Ao=function(...u){const a=`FIREBASE FATAL ERROR: ${zo(...u)}`;throw Qs.error(a),new Error(a)},$r=function(...u){const a="FIREBASE WARNING: "+zo(...u);Qs.warn(a)},mi=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},ni="[MIN_NAME]",ha="[MAX_NAME]",ss=function(u,a){if(u===a)return 0;if(u===ni||a===ha)return-1;if(a===ni||u===ha)return 1;{const l=Ur(u),f=Ur(a);return null!==l?null!==f?l-f==0?u.length-a.length:l-f:-1:null!==f?1:u<a?-1:1}},Nl=function(u,a){return u===a?0:u<a?-1:1},yl=function(u,a){if(a&&u in a)return a[u];throw new Error("Missing required key ("+u+") in object: "+(0,X.Wl)(a))},Ya=function(u){if("object"!=typeof u||null===u)return(0,X.Wl)(u);const a=[];for(const f in u)a.push(f);a.sort();let l="{";for(let f=0;f<a.length;f++)0!==f&&(l+=","),l+=(0,X.Wl)(a[f]),l+=":",l+=Ya(u[a[f]]);return l+="}",l},Ka=function(u,a){const l=u.length;if(l<=a)return[u];const f=[];for(let E=0;E<l;E+=a)f.push(u.substring(E,E+a>l?l:E+a));return f};function F(u,a){for(const l in u)u.hasOwnProperty(l)&&a(l,u[l])}const Z=function(u){(0,X.hu)(!mi(u),"Invalid JSON number");const f=1023;let E,M,U,ee,he;0===u?(M=0,U=0,E=1/u==-1/0?1:0):(E=u<0,(u=Math.abs(u))>=Math.pow(2,1-f)?(ee=Math.min(Math.floor(Math.log(u)/Math.LN2),f),M=ee+f,U=Math.round(u*Math.pow(2,52-ee)-Math.pow(2,52))):(M=0,U=Math.round(u/Math.pow(2,-1074))));const Se=[];for(he=52;he;he-=1)Se.push(U%2?1:0),U=Math.floor(U/2);for(he=11;he;he-=1)Se.push(M%2?1:0),M=Math.floor(M/2);Se.push(E?1:0),Se.reverse();const wt=Se.join("");let Ot="";for(he=0;he<64;he+=8){let Bt=parseInt(wt.substr(he,8),2).toString(16);1===Bt.length&&(Bt="0"+Bt),Ot+=Bt}return Ot.toLowerCase()},Mt=new RegExp("^-?(0*)\\d{1,10}$"),Ur=function(u){if(Mt.test(u)){const a=Number(u);if(a>=-2147483648&&a<=2147483647)return a}return null},Ft=function(u){try{u()}catch(a){setTimeout(()=>{throw $r("Exception was thrown by user callback.",a.stack||""),a},Math.floor(0))}},lr=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zn=function(u,a){const l=setTimeout(u,a);return"number"==typeof l&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(l):"object"==typeof l&&l.unref&&l.unref(),l};class Vi{constructor(a,l){this.appName_=a,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(f=>this.appCheck=f)}getToken(a){return this.appCheck?this.appCheck.getToken(a):new Promise((l,f)=>{setTimeout(()=>{this.appCheck?this.getToken(a).then(l,f):l(null)},0)})}addTokenChangeListener(a){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(f=>f.addTokenListener(a))}notifyForInvalidToken(){$r(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class hn{constructor(a,l,f){this.appName_=a,this.firebaseOptions_=l,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(E=>this.auth_=E)}getToken(a){return this.auth_?this.auth_.getToken(a).catch(l=>l&&"auth/token-not-initialized"===l.code?(is("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,f)=>{setTimeout(()=>{this.auth_?this.getToken(a).then(l,f):l(null)},0)})}addTokenChangeListener(a){this.auth_?this.auth_.addAuthTokenListener(a):this.authProvider_.get().then(l=>l.addAuthTokenListener(a))}removeTokenChangeListener(a){this.authProvider_.get().then(l=>l.removeAuthTokenListener(a))}notifyForInvalidToken(){let a='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';a+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$r(a)}}let yn=(()=>{class u{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Gs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,fa="websocket",Ja="long_polling";class Sa{constructor(a,l,f,E,M=!1,U="",ee=!1,he=!1){this.secure=l,this.namespace=f,this.webSocketOnly=E,this.nodeAdmin=M,this.persistenceKey=U,this.includeNamespaceInQueryParams=ee,this.isUsingEmulator=he,this._host=a.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zs.get("host:"+a)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(a){a!==this.internalHost&&(this.internalHost=a,this.isCacheableHost()&&zs.set("host:"+this._host,this.internalHost))}toString(){let a=this.toURLString();return this.persistenceKey&&(a+="<"+this.persistenceKey+">"),a}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function vl(u,a,l){let f;if((0,X.hu)("string"==typeof a,"typeof type must == string"),(0,X.hu)("object"==typeof l,"typeof params must == object"),a===fa)f=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(a!==Ja)throw new Error("Unknown connection type: "+a);f=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function el(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(l.ns=u.namespace);const E=[];return F(l,(M,U)=>{E.push(M+"="+U)}),f+E.join("&")}class qo{constructor(){this.counters_={}}incrementCounter(a,l=1){(0,X.r3)(this.counters_,a)||(this.counters_[a]=0),this.counters_[a]+=l}get(){return(0,X.p$)(this.counters_)}}const Fa={},pr={};function go(u){const a=u.toString();return Fa[a]||(Fa[a]=new qo),Fa[a]}class Ii{constructor(a){this.onMessage_=a,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(a,l){this.closeAfterResponse=a,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(a,l){for(this.pendingResponses[a]=l;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let E=0;E<f.length;++E)f[E]&&Ft(()=>{this.onMessage_(f[E])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class os{constructor(a,l,f,E,M,U,ee){this.connId=a,this.repoInfo=l,this.applicationId=f,this.appCheckToken=E,this.authToken=M,this.transportSessionId=U,this.lastSessionId=ee,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Go(a),this.stats_=go(l),this.urlFn=he=>(this.appCheckToken&&(he.ac=this.appCheckToken),vl(l,Ja,he))}open(a,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new Ii(a),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,X.Yr)()||"complete"===document.readyState)u();else{let a=!1;const l=function(){document.body?a||(a=!0,u()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Il((...M)=>{const[U,ee,he,Se,wt]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===U)this.id=ee,this.password=he;else{if("close"!==U)throw new Error("Unrecognized command received: "+U);ee?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ee,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[U,ee]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse(U,ee)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Gs.test(location.hostname)&&(f.r="f");const E=this.urlFn(f);this.log_("Connecting via long-poll to "+E),this.scriptTagHolder.addTag(E,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){os.forceAllow_=!0}static forceDisallow(){os.forceDisallow_=!0}static isAvailable(){return!((0,X.Yr)()||!os.forceAllow_&&(os.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(a){const l=(0,X.Wl)(a);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const f=(0,X.h$)(l),E=Ka(f,1840);for(let M=0;M<E.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,E.length,E[M]),this.curSegmentNum++}addDisconnectPingFrame(a,l){if((0,X.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=a,f.pw=l,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(a){const l=(0,X.Wl)(a).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Il{constructor(a,l,f,E){if(this.onDisconnect=f,this.urlFn=E,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,X.Yr)())this.commandCB=a,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=kl(),window["pLPCommand"+this.uniqueCallbackIdentifier]=a,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Il.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const U="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(U),this.myIFrame.doc.close()}catch(ee){is("frame writing exception"),ee.stack&&is(ee.stack),is(ee)}}}static createIFrame_(){const a=document.createElement("iframe");if(a.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(a);try{a.contentWindow.document||is("No IE domain setting required")}catch{const f=document.domain;a.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return a.contentDocument?a.doc=a.contentDocument:a.contentWindow?a.doc=a.contentWindow.document:a.document&&(a.doc=a.document),a}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const a=this.onDisconnect;a&&(this.onDisconnect=null,a())}startLongPoll(a,l){for(this.myID=a,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const a={};a.id=this.myID,a.pw=this.myPW,a.ser=this.currentSerial;let l=this.urlFn(a),f="",E=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const U=this.pendingSegs.shift();f=f+"&seg"+E+"="+U.seg+"&ts"+E+"="+U.ts+"&d"+E+"="+U.d,E++}return l+=f,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(a,l,f){this.pendingSegs.push({seg:a,ts:l,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(a,l){this.outstandingRequests.add(l);const f=()=>{this.outstandingRequests.delete(l),this.newRequest_()},E=setTimeout(f,Math.floor(25e3));this.addTag(a,()=>{clearTimeout(E),f()})}addTag(a,l){(0,X.Yr)()?this.doNodeLongPoll(a,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=a,f.onload=f.onreadystatechange=function(){const E=f.readyState;(!E||"loaded"===E||"complete"===E)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),l())},f.onerror=()=>{is("Long-poll script failed to load: "+a),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch{}},Math.floor(1))}}let Rt=null;typeof MozWebSocket<"u"?Rt=MozWebSocket:typeof WebSocket<"u"&&(Rt=WebSocket);let Js=(()=>{class u{constructor(l,f,E,M,U,ee,he){this.connId=l,this.applicationId=E,this.appCheckToken=M,this.authToken=U,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Go(this.connId),this.stats_=go(f),this.connURL=u.connectionURL_(f,ee,he,M,E),this.nodeAdmin=f.nodeAdmin}static connectionURL_(l,f,E,M,U){const ee={v:"5"};return!(0,X.Yr)()&&typeof location<"u"&&location.hostname&&Gs.test(location.hostname)&&(ee.r="f"),f&&(ee.s=f),E&&(ee.ls=E),M&&(ee.ac=M),U&&(ee.p=U),vl(l,fa,ee)}open(l,f){this.onDisconnect=f,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zs.set("previous_websocket_failure",!0);try{let E;if((0,X.Yr)()){E={headers:{"User-Agent":`Firebase/5/${Da}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(E.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(E.headers["X-Firebase-AppCheck"]=this.appCheckToken);const U=process.env,ee=0===this.connURL.indexOf("wss://")?U.HTTPS_PROXY||U.https_proxy:U.HTTP_PROXY||U.http_proxy;ee&&(E.proxy={origin:ee})}this.mySock=new Rt(this.connURL,[],E)}catch(E){this.log_("Error instantiating WebSocket.");const M=E.message||E.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=E=>{this.handleIncomingFrame(E)},this.mySock.onerror=E=>{this.log_("WebSocket error.  Closing connection.");const M=E.message||E.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let l=!1;if(typeof navigator<"u"&&navigator.userAgent){const E=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);E&&E.length>1&&parseFloat(E[1])<4.4&&(l=!0)}return!l&&null!==Rt&&!u.forceDisallow_}static previouslyFailed(){return zs.isInMemoryStorage||!0===zs.get("previous_websocket_failure")}markConnectionHealthy(){zs.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const E=(0,X.cI)(f);this.onMessage(E)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,X.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const f=Number(l);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const f=l.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const E=this.extractFrameCount_(f);null!==E&&this.appendFrame_(E)}}send(l){this.resetKeepAlive();const f=(0,X.Wl)(l);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const E=Ka(f,16384);E.length>1&&this.sendString_(String(E.length));for(let M=0;M<E.length;M++)this.sendString_(E[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),oo=(()=>{class u{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[os,Js]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const f=Js&&Js.isAvailable();let E=f&&!Js.previouslyFailed();if(l.webSocketOnly&&(f||$r("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),E=!0),E)this.transports_=[Js];else{const M=this.transports_=[];for(const U of u.ALL_TRANSPORTS)U&&U.isAvailable()&&M.push(U);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class ji{constructor(a,l,f,E,M,U,ee,he,Se,wt){this.id=a,this.repoInfo_=l,this.applicationId_=f,this.appCheckToken_=E,this.authToken_=M,this.onMessage_=U,this.onReady_=ee,this.onDisconnect_=he,this.onKill_=Se,this.lastSessionId=wt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Go("c:"+this.id+":"),this.transportManager_=new oo(l),this.log_("Connection created"),this.start_()}start_(){const a=this.transportManager_.initialTransport();this.conn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,f)},Math.floor(0));const E=a.healthyTimeout||0;E>0&&(this.healthyTimeout_=Zn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(E)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(a){return l=>{a===this.conn_?this.onConnectionLost_(l):a===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(a){return l=>{2!==this.state_&&(a===this.rx_?this.onPrimaryMessageReceived_(l):a===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(a){this.sendData_({t:"d",d:a})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(a){if("t"in a){const l=a.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(a){const l=yl("t",a),f=yl("d",a);if("c"===l)this.onSecondaryControl_(f);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(a){const l=yl("t",a),f=yl("d",a);"c"===l?this.onControl_(f):"d"===l&&this.onDataMessage_(f)}onDataMessage_(a){this.onPrimaryResponse_(),this.onMessage_(a)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(a){const l=yl("t",a);if("d"in a){const f=a.d;if("h"===l){const E=Object.assign({},f);this.repoInfo_.isUsingEmulator&&(E.h=this.repoInfo_.host),this.onHandshake_(E)}else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let E=0;E<this.pendingDataMessages.length;++E)this.onDataMessage_(this.pendingDataMessages[E]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(f):"r"===l?this.onReset_(f):"e"===l?da("Server Error: "+f):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):da("Unknown control packet command: "+l)}}onHandshake_(a){const l=a.ts,f=a.v,E=a.h;this.sessionId=a.s,this.repoInfo_.host=E,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==f&&$r("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const a=this.transportManager_.upgradeTransport();a&&this.startUpgrade_(a)}startUpgrade_(a){this.secondaryConn_=new a(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=a.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,f),Zn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(a){this.log_("Reset packet received.  New host: "+a),this.repoInfo_.host=a,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(a,l){this.log_("Realtime connection established."),this.conn_=a,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const a=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===a||this.rx_===a)&&this.close()}onConnectionLost_(a){this.conn_=null,a||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(a){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(a),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(a){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(a)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sl{put(a,l,f,E){}merge(a,l,f,E){}refreshAuthToken(a){}refreshAppCheckToken(a){}onDisconnectPut(a,l,f){}onDisconnectMerge(a,l,f){}onDisconnectCancel(a,l){}reportStats(a){}}class ys{constructor(a){this.allowedEvents_=a,this.listeners_={},(0,X.hu)(Array.isArray(a)&&a.length>0,"Requires a non-empty array")}trigger(a,...l){if(Array.isArray(this.listeners_[a])){const f=[...this.listeners_[a]];for(let E=0;E<f.length;E++)f[E].callback.apply(f[E].context,l)}}on(a,l,f){this.validateEventType_(a),this.listeners_[a]=this.listeners_[a]||[],this.listeners_[a].push({callback:l,context:f});const E=this.getInitialEvent(a);E&&l.apply(f,E)}off(a,l,f){this.validateEventType_(a);const E=this.listeners_[a]||[];for(let M=0;M<E.length;M++)if(E[M].callback===l&&(!f||f===E[M].context))return void E.splice(M,1)}validateEventType_(a){(0,X.hu)(this.allowedEvents_.find(l=>l===a),"Unknown event: "+a)}}class Ko extends ys{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,X.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ko}getInitialEvent(a){return(0,X.hu)("online"===a,"Unknown event type: "+a),[this.online_]}currentlyOnline(){return this.online_}}const vs=32,Zo=768;class ri{constructor(a,l){if(void 0===l){this.pieces_=a.split("/");let f=0;for(let E=0;E<this.pieces_.length;E++)this.pieces_[E].length>0&&(this.pieces_[f]=this.pieces_[E],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=a,this.pieceNum_=l}toString(){let a="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(a+="/"+this.pieces_[l]);return a||"/"}}function Hr(){return new ri("")}function vr(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function Xo(u){return u.pieces_.length-u.pieceNum_}function Di(u){let a=u.pieceNum_;return a<u.pieces_.length&&a++,new ri(u.pieces_,a)}function Ru(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function lo(u,a=0){return u.pieces_.slice(u.pieceNum_+a)}function S(u){if(u.pieceNum_>=u.pieces_.length)return null;const a=[];for(let l=u.pieceNum_;l<u.pieces_.length-1;l++)a.push(u.pieces_[l]);return new ri(a,0)}function A(u,a){const l=[];for(let f=u.pieceNum_;f<u.pieces_.length;f++)l.push(u.pieces_[f]);if(a instanceof ri)for(let f=a.pieceNum_;f<a.pieces_.length;f++)l.push(a.pieces_[f]);else{const f=a.split("/");for(let E=0;E<f.length;E++)f[E].length>0&&l.push(f[E])}return new ri(l,0)}function I(u){return u.pieceNum_>=u.pieces_.length}function P(u,a){const l=vr(u),f=vr(a);if(null===l)return a;if(l===f)return P(Di(u),Di(a));throw new Error("INTERNAL ERROR: innerPath ("+a+") is not within outerPath ("+u+")")}function H(u,a){const l=lo(u,0),f=lo(a,0);for(let E=0;E<l.length&&E<f.length;E++){const M=ss(l[E],f[E]);if(0!==M)return M}return l.length===f.length?0:l.length<f.length?-1:1}function ie(u,a){if(Xo(u)!==Xo(a))return!1;for(let l=u.pieceNum_,f=a.pieceNum_;l<=u.pieces_.length;l++,f++)if(u.pieces_[l]!==a.pieces_[f])return!1;return!0}function ae(u,a){let l=u.pieceNum_,f=a.pieceNum_;if(Xo(u)>Xo(a))return!1;for(;l<u.pieces_.length;){if(u.pieces_[l]!==a.pieces_[f])return!1;++l,++f}return!0}class at{constructor(a,l){this.errorPrefix_=l,this.parts_=lo(a,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,X.ug)(this.parts_[f]);Fn(this)}}function Fn(u){if(u.byteLength_>Zo)throw new Error(u.errorPrefix_+"has a key path longer than "+Zo+" bytes ("+u.byteLength_+").");if(u.parts_.length>vs)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+vs+") or object contains a cycle "+Dn(u))}function Dn(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class zr extends ys{constructor(){let a,l;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(l="visibilitychange",a="hidden"):typeof document.mozHidden<"u"?(l="mozvisibilitychange",a="mozHidden"):typeof document.msHidden<"u"?(l="msvisibilitychange",a="msHidden"):typeof document.webkitHidden<"u"&&(l="webkitvisibilitychange",a="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const f=!document[a];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new zr}getInitialEvent(a){return(0,X.hu)("visible"===a,"Unknown event type: "+a),[this.visible_]}}const Ir=1e3;let xn,ft=(()=>{class u extends sl{constructor(l,f,E,M,U,ee,he,Se){if(super(),this.repoInfo_=l,this.applicationId_=f,this.onDataUpdate_=E,this.onConnectStatus_=M,this.onServerInfoUpdate_=U,this.authTokenProvider_=ee,this.appCheckTokenProvider_=he,this.authOverride_=Se,this.id=u.nextPersistentConnectionId_++,this.log_=Go("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ir,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Se&&!(0,X.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zr.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&Ko.getInstance().on("online",this.onOnline_,this)}sendRequest(l,f,E){const M=++this.requestNumber_,U={r:M,a:l,b:f};this.log_((0,X.Wl)(U)),(0,X.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(U),E&&(this.requestCBHash_[M]=E)}get(l){this.initConnection_();const f=new X.BH,M={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:ee=>{const he=ee.d;"ok"===ee.s?f.resolve(he):f.reject(he)}};return this.outstandingGets_.push(M),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),f.promise}listen(l,f,E,M){this.initConnection_();const U=l._queryIdentifier,ee=l._path.toString();this.log_("Listen called for "+ee+" "+U),this.listens.has(ee)||this.listens.set(ee,new Map),(0,X.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,X.hu)(!this.listens.get(ee).has(U),"listen() called twice for same path/queryId.");const he={onComplete:M,hashFn:f,query:l,tag:E};this.listens.get(ee).set(U,he),this.connected_&&this.sendListen_(he)}sendGet_(l){const f=this.outstandingGets_[l];this.sendRequest("g",f.request,E=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(E)})}sendListen_(l){const f=l.query,E=f._path.toString(),M=f._queryIdentifier;this.log_("Listen on "+E+" for "+M);const U={p:E};l.tag&&(U.q=f._queryObject,U.t=l.tag),U.h=l.hashFn(),this.sendRequest("q",U,he=>{const Se=he.d,wt=he.s;u.warnOnListenWarnings_(Se,f),(this.listens.get(E)&&this.listens.get(E).get(M))===l&&(this.log_("listen response",he),"ok"!==wt&&this.removeListen_(E,M),l.onComplete&&l.onComplete(wt,Se))})}static warnOnListenWarnings_(l,f){if(l&&"object"==typeof l&&(0,X.r3)(l,"w")){const E=(0,X.DV)(l,"w");if(Array.isArray(E)&&~E.indexOf("no_index")){const M='".indexOn": "'+f._queryParams.getIndex().toString()+'"',U=f._path.toString();$r(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${U} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,X.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,f=(0,X.w9)(l)?"auth":"gauth",E={cred:l};null===this.authOverride_?E.noauth=!0:"object"==typeof this.authOverride_&&(E.authvar=this.authOverride_),this.sendRequest(f,E,M=>{const U=M.s,ee=M.d||"error";this.authToken_===l&&("ok"===U?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(U,ee))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const f=l.s,E=l.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,E)})}unlisten(l,f){const E=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+E+" "+M),(0,X.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(E,M)&&this.connected_&&this.sendUnlisten_(E,M,l._queryObject,f)}sendUnlisten_(l,f,E,M){this.log_("Unlisten on "+l+" for "+f);const U={p:l};M&&(U.q=E,U.t=M),this.sendRequest("n",U)}onDisconnectPut(l,f,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,f,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:f,onComplete:E})}onDisconnectMerge(l,f,E){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,f,E):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:f,onComplete:E})}onDisconnectCancel(l,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,f):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(l,f,E,M){const U={p:f,d:E};this.log_("onDisconnect "+l,U),this.sendRequest(l,U,ee=>{M&&setTimeout(()=>{M(ee.s,ee.d)},Math.floor(0))})}put(l,f,E,M){this.putInternal("p",l,f,E,M)}merge(l,f,E,M){this.putInternal("m",l,f,E,M)}putInternal(l,f,E,M,U){this.initConnection_();const ee={p:f,d:E};void 0!==U&&(ee.h=U),this.outstandingPuts_.push({action:l,request:ee,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(l){const f=this.outstandingPuts_[l].action,E=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(f,E,U=>{this.log_(f+" response",U),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M(U.s,U.d)})}reportStats(l){if(this.connected_){const f={c:l};this.log_("reportStats",f),this.sendRequest("s",f,E=>{"ok"!==E.s&&this.log_("reportStats","Error sending stats: "+E.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,X.Wl)(l));const f=l.r,E=this.requestCBHash_[f];E&&(delete this.requestCBHash_[f],E(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,f){this.log_("handleServerMessage",l,f),"d"===l?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===l?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===l?this.onListenRevoked_(f.p,f.q):"ac"===l?this.onAuthRevoked_(f.s,f.d):"apc"===l?this.onAppCheckRevoked_(f.s,f.d):"sd"===l?this.onSecurityDebugPacket_(f):da("Unrecognized action received from server: "+(0,X.Wl)(l)+"\nAre you using the latest client?")}onReady_(l,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,X.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ir),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-l);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,et.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const f=l.onDataMessage_.bind(l),E=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),U=l.id+":"+u.nextConnectionId_++,ee=l.lastSessionId;let he=!1,Se=null;const wt=function(){Se?Se.close():(he=!0,M())};l.realtime_={close:wt,sendRequest:function(pn){(0,X.hu)(Se,"sendRequest call when we're not connected not allowed."),Se.sendRequest(pn)}};const Bt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[pn,kn]=yield Promise.all([l.authTokenProvider_.getToken(Bt),l.appCheckTokenProvider_.getToken(Bt)]);he?is("getToken() completed but was canceled"):(is("getToken() completed. Creating connection."),l.authToken_=pn&&pn.accessToken,l.appCheckToken_=kn&&kn.token,Se=new ji(U,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,f,E,M,Mr=>{$r(Mr+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ee))}catch(pn){l.log_("Failed to get token: "+pn),he||(l.repoInfo_.nodeAdmin&&$r(pn),wt())}}})()}interrupt(l){is("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){is("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,X.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ir,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const f=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const f=this.outstandingPuts_[l];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,f){let E;E=f?f.map(U=>Ya(U)).join("$"):"default";const M=this.removeListen_(l,E);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,f){const E=new ri(l).toString();let M;if(this.listens.has(E)){const U=this.listens.get(E);M=U.get(f),U.delete(f),0===U.size&&this.listens.delete(E)}else M=void 0;return M}onAuthRevoked_(l,f){is("Auth token revoked: "+l+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,f){is("App check token revoked: "+l+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const f of l.values())this.sendListen_(f);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let f="js";(0,X.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+f+"."+Da.replace(/\./g,"-")]=1,(0,X.uI)()?l["framework.cordova"]=1:(0,X.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=Ko.getInstance().currentlyOnline();return(0,X.xb)(this.interruptReasons_)&&l}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class $t{constructor(a,l){this.name=a,this.node=l}static Wrap(a,l){return new $t(a,l)}}class Un{getCompare(){return this.compare.bind(this)}indexedValueChanged(a,l){const f=new $t(ni,a),E=new $t(ni,l);return 0!==this.compare(f,E)}minPost(){return $t.MIN}}class ur extends Un{static get __EMPTY_NODE(){return xn}static set __EMPTY_NODE(a){xn=a}compare(a,l){return ss(a.name,l.name)}isDefinedOn(a){throw(0,X.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(a,l){return!1}minPost(){return $t.MIN}maxPost(){return new $t(ha,xn)}makePost(a,l){return(0,X.hu)("string"==typeof a,"KeyIndex indexValue must always be a string."),new $t(a,xn)}toString(){return".key"}}const Cr=new ur;class Yn{constructor(a,l,f,E,M=null){this.isReverse_=E,this.resultGenerator_=M,this.nodeStack_=[];let U=1;for(;!a.isEmpty();)if(U=l?f(a.key,l):1,E&&(U*=-1),U<0)a=this.isReverse_?a.left:a.right;else{if(0===U){this.nodeStack_.push(a);break}this.nodeStack_.push(a),a=this.isReverse_?a.right:a.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,a=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value},this.isReverse_)for(a=a.left;!a.isEmpty();)this.nodeStack_.push(a),a=a.right;else for(a=a.right;!a.isEmpty();)this.nodeStack_.push(a),a=a.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const a=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(a.key,a.value):{key:a.key,value:a.value}}}let Mo,qi=(()=>{class u{constructor(l,f,E,M,U){this.key=l,this.value=f,this.color=null!=E?E:u.RED,this.left=null!=M?M:Gr.EMPTY_NODE,this.right=null!=U?U:Gr.EMPTY_NODE}copy(l,f,E,M,U){return new u(null!=l?l:this.key,null!=f?f:this.value,null!=E?E:this.color,null!=M?M:this.left,null!=U?U:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,f,E){let M=this;const U=E(l,M.key);return M=U<0?M.copy(null,null,null,M.left.insert(l,f,E),null):0===U?M.copy(null,f,null,null,null):M.copy(null,null,null,null,M.right.insert(l,f,E)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return Gr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,f){let E,M;if(E=this,f(l,E.key)<0)!E.left.isEmpty()&&!E.left.isRed_()&&!E.left.left.isRed_()&&(E=E.moveRedLeft_()),E=E.copy(null,null,null,E.left.remove(l,f),null);else{if(E.left.isRed_()&&(E=E.rotateRight_()),!E.right.isEmpty()&&!E.right.isRed_()&&!E.right.left.isRed_()&&(E=E.moveRedRight_()),0===f(l,E.key)){if(E.right.isEmpty())return Gr.EMPTY_NODE;M=E.right.min_(),E=E.copy(M.key,M.value,null,null,E.right.removeMin_())}E=E.copy(null,null,null,null,E.right.remove(l,f))}return E.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,f)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class Gr{constructor(a,l=Gr.EMPTY_NODE){this.comparator_=a,this.root_=l}insert(a,l){return new Gr(this.comparator_,this.root_.insert(a,l,this.comparator_).copy(null,null,qi.BLACK,null,null))}remove(a){return new Gr(this.comparator_,this.root_.remove(a,this.comparator_).copy(null,null,qi.BLACK,null,null))}get(a){let l,f=this.root_;for(;!f.isEmpty();){if(l=this.comparator_(a,f.key),0===l)return f.value;l<0?f=f.left:l>0&&(f=f.right)}return null}getPredecessorKey(a){let l,f=this.root_,E=null;for(;!f.isEmpty();){if(l=this.comparator_(a,f.key),0===l){if(f.left.isEmpty())return E?E.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}l<0?f=f.left:l>0&&(E=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(a){return this.root_.inorderTraversal(a)}reverseTraversal(a){return this.root_.reverseTraversal(a)}getIterator(a){return new Yn(this.root_,null,this.comparator_,!1,a)}getIteratorFrom(a,l){return new Yn(this.root_,a,this.comparator_,!1,l)}getReverseIteratorFrom(a,l){return new Yn(this.root_,a,this.comparator_,!0,l)}getReverseIterator(a){return new Yn(this.root_,null,this.comparator_,!0,a)}}function ol(u,a){return ss(u.name,a.name)}function Ba(u,a){return ss(u,a)}Gr.EMPTY_NODE=new class Yi{copy(a,l,f,E,M){return this}insert(a,l,f){return new qi(a,l,null)}remove(a,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(a){return!1}reverseTraversal(a){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ac=function(u){return"number"==typeof u?"number:"+Z(u):"string:"+u},wl=function(u){if(u.isLeafNode()){const a=u.val();(0,X.hu)("string"==typeof a||"number"==typeof a||"object"==typeof a&&(0,X.r3)(a,".sv"),"Priority must be a string or number.")}else(0,X.hu)(u===Mo||u.isEmpty(),"priority of unexpected type.");(0,X.hu)(u===Mo||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $a,$l,bl,su=(()=>{class u{constructor(l,f=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=f,this.lazyHash_=null,(0,X.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),wl(this.priorityNode_)}static set __childrenNodeConstructor(l){$a=l}static get __childrenNodeConstructor(){return $a}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new u(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return I(l)?this:".priority"===vr(l)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,f){return null}updateImmediateChild(l,f){return".priority"===l?this.updatePriority(f):f.isEmpty()&&".priority"!==l?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,f).updatePriority(this.priorityNode_)}updateChild(l,f){const E=vr(l);return null===E?f:f.isEmpty()&&".priority"!==E?this:((0,X.hu)(".priority"!==E||1===Xo(l),".priority must be the last token in a path"),this.updateImmediateChild(E,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(Di(l),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,f){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+ac(this.priorityNode_.val())+":");const f=typeof this.value_;l+=f+":",l+="number"===f?Z(this.value_):this.value_,this.lazyHash_=qa(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===u.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof u.__childrenNodeConstructor?-1:((0,X.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const f=typeof l.value_,E=typeof this.value_,M=u.VALUE_TYPE_ORDER.indexOf(f),U=u.VALUE_TYPE_ORDER.indexOf(E);return(0,X.hu)(M>=0,"Unknown leaf type: "+f),(0,X.hu)(U>=0,"Unknown leaf type: "+E),M===U?"object"===E?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:U-M}withIndex(){return this}isIndexed(){return!0}equals(l){return l===this||!!l.isLeafNode()&&(this.value_===l.value_&&this.priorityNode_.equals(l.priorityNode_))}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Si=new class Td extends Un{compare(a,l){const f=a.node.getPriority(),E=l.node.getPriority(),M=f.compareTo(E);return 0===M?ss(a.name,l.name):M}isDefinedOn(a){return!a.getPriority().isEmpty()}indexedValueChanged(a,l){return!a.getPriority().equals(l.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(ha,new su("[PRIORITY-POST]",bl))}makePost(a,l){const f=$l(a);return new $t(l,new su("[PRIORITY-POST]",f))}toString(){return".priority"}},yf=Math.log(2);class Ua{constructor(a){this.count=parseInt(Math.log(a+1)/yf,10),this.current_=this.count-1;const E=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=a+1&E}nextBitIsOne(){const a=!(this.bits_&1<<this.current_);return this.current_--,a}}const jc=function(u,a,l,f){u.sort(a);const E=function(he,Se){const wt=Se-he;let Ot,Bt;if(0===wt)return null;if(1===wt)return Ot=u[he],Bt=l?l(Ot):Ot,new qi(Bt,Ot.node,qi.BLACK,null,null);{const pn=parseInt(wt/2,10)+he,kn=E(he,pn),Mr=E(pn+1,Se);return Ot=u[pn],Bt=l?l(Ot):Ot,new qi(Bt,Ot.node,qi.BLACK,kn,Mr)}},ee=function(he){let Se=null,wt=null,Ot=u.length;const Bt=function(kn,Mr){const Xr=Ot-kn,Li=Ot;Ot-=kn;const Ts=E(Xr+1,Li),Wr=u[Xr],_s=l?l(Wr):Wr;pn(new qi(_s,Wr.node,Mr,null,Ts))},pn=function(kn){Se?(Se.left=kn,Se=kn):(wt=kn,Se=kn)};for(let kn=0;kn<he.count;++kn){const Mr=he.nextBitIsOne(),Xr=Math.pow(2,he.count-(kn+1));Mr?Bt(Xr,qi.BLACK):(Bt(Xr,qi.BLACK),Bt(Xr,qi.RED))}return wt}(new Ua(u.length));return new Gr(f||a,ee)};let lc;const uc={};class Ul{constructor(a,l){this.indexes_=a,this.indexSet_=l}static get Default(){return(0,X.hu)(uc&&Si,"ChildrenNode.ts has not been loaded"),lc=lc||new Ul({".priority":uc},{".priority":Si}),lc}get(a){const l=(0,X.DV)(this.indexes_,a);if(!l)throw new Error("No index defined for "+a);return l instanceof Gr?l:null}hasIndex(a){return(0,X.r3)(this.indexSet_,a.toString())}addIndex(a,l){(0,X.hu)(a!==Cr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let E=!1;const M=l.getIterator($t.Wrap);let ee,U=M.getNext();for(;U;)E=E||a.isDefinedOn(U.node),f.push(U),U=M.getNext();ee=E?jc(f,a.getCompare()):uc;const he=a.toString(),Se=Object.assign({},this.indexSet_);Se[he]=a;const wt=Object.assign({},this.indexes_);return wt[he]=ee,new Ul(wt,Se)}addToIndexes(a,l){const f=(0,X.UI)(this.indexes_,(E,M)=>{const U=(0,X.DV)(this.indexSet_,M);if((0,X.hu)(U,"Missing index implementation for "+M),E===uc){if(U.isDefinedOn(a.node)){const ee=[],he=l.getIterator($t.Wrap);let Se=he.getNext();for(;Se;)Se.name!==a.name&&ee.push(Se),Se=he.getNext();return ee.push(a),jc(ee,U.getCompare())}return uc}{const ee=l.get(a.name);let he=E;return ee&&(he=he.remove(new $t(a.name,ee))),he.insert(a,a.node)}});return new Ul(f,this.indexSet_)}removeFromIndexes(a,l){const f=(0,X.UI)(this.indexes_,E=>{if(E===uc)return E;{const M=l.get(a.name);return M?E.remove(new $t(a.name,M)):E}});return new Ul(f,this.indexSet_)}}let Ou,Sr=(()=>{class u{constructor(l,f,E){this.children_=l,this.priorityNode_=f,this.indexMap_=E,this.lazyHash_=null,this.priorityNode_&&wl(this.priorityNode_),this.children_.isEmpty()&&(0,X.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ou||(Ou=new u(new Gr(Ba),null,Ul.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ou}updatePriority(l){return this.children_.isEmpty()?this:new u(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const f=this.children_.get(l);return null===f?Ou:f}}getChild(l){const f=vr(l);return null===f?this:this.getImmediateChild(f).getChild(Di(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,f){if((0,X.hu)(f,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(f);{const E=new $t(l,f);let M,U;f.isEmpty()?(M=this.children_.remove(l),U=this.indexMap_.removeFromIndexes(E,this.children_)):(M=this.children_.insert(l,f),U=this.indexMap_.addToIndexes(E,this.children_));const ee=M.isEmpty()?Ou:this.priorityNode_;return new u(M,ee,U)}}updateChild(l,f){const E=vr(l);if(null===E)return f;{(0,X.hu)(".priority"!==vr(l)||1===Xo(l),".priority must be the last token in a path");const M=this.getImmediateChild(E).updateChild(Di(l),f);return this.updateImmediateChild(E,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const f={};let E=0,M=0,U=!0;if(this.forEachChild(Si,(ee,he)=>{f[ee]=he.val(l),E++,U&&u.INTEGER_REGEXP_.test(ee)?M=Math.max(M,Number(ee)):U=!1}),!l&&U&&M<2*E){const ee=[];for(const he in f)ee[he]=f[he];return ee}return l&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+ac(this.getPriority().val())+":"),this.forEachChild(Si,(f,E)=>{const M=E.hash();""!==M&&(l+=":"+f+":"+M)}),this.lazyHash_=""===l?"":qa(l)}return this.lazyHash_}getPredecessorChildName(l,f,E){const M=this.resolveIndex_(E);if(M){const U=M.getPredecessorKey(new $t(l,f));return U?U.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const f=this.resolveIndex_(l);if(f){const E=f.minKey();return E&&E.name}return this.children_.minKey()}getFirstChild(l){const f=this.getFirstChildName(l);return f?new $t(f,this.children_.get(f)):null}getLastChildName(l){const f=this.resolveIndex_(l);if(f){const E=f.maxKey();return E&&E.name}return this.children_.maxKey()}getLastChild(l){const f=this.getLastChildName(l);return f?new $t(f,this.children_.get(f)):null}forEachChild(l,f){const E=this.resolveIndex_(l);return E?E.inorderTraversal(M=>f(M.name,M.node)):this.children_.inorderTraversal(f)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,f){const E=this.resolveIndex_(f);if(E)return E.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,$t.Wrap);let U=M.peek();for(;null!=U&&f.compare(U,l)<0;)M.getNext(),U=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,f){const E=this.resolveIndex_(f);if(E)return E.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,$t.Wrap);let U=M.peek();for(;null!=U&&f.compare(U,l)>0;)M.getNext(),U=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ku?-1:0}withIndex(l){if(l===Cr||this.indexMap_.hasIndex(l))return this;{const f=this.indexMap_.addIndex(l,this.children_);return new u(this.children_,this.priorityNode_,f)}}isIndexed(l){return l===Cr||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const f=l;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const E=this.getIterator(Si),M=f.getIterator(Si);let U=E.getNext(),ee=M.getNext();for(;U&&ee;){if(U.name!==ee.name||!U.node.equals(ee.node))return!1;U=E.getNext(),ee=M.getNext()}return null===U&&null===ee}return!1}return!1}}resolveIndex_(l){return l===Cr?null:this.indexMap_.get(l.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const ku=new class wh extends Sr{constructor(){super(new Gr(Ba),Sr.EMPTY_NODE,Ul.Default)}compareTo(a){return a===this?0:1}equals(a){return a===this}getPriority(){return this}getImmediateChild(a){return Sr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties($t,{MIN:{value:new $t(ni,Sr.EMPTY_NODE)},MAX:{value:new $t(ha,ku)}}),ur.__EMPTY_NODE=Sr.EMPTY_NODE,su.__childrenNodeConstructor=Sr,function mo(u){Mo=u}(ku),function ou(u){bl=u}(ku);const Sd=!0;function as(u,a=null){if(null===u)return Sr.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(a=u[".priority"]),(0,X.hu)(null===a||"string"==typeof a||"number"==typeof a||"object"==typeof a&&".sv"in a,"Invalid priority type found: "+typeof a),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new su(u,as(a));if(u instanceof Array||!Sd){let l=Sr.EMPTY_NODE;return F(u,(f,E)=>{if((0,X.r3)(u,f)&&"."!==f.substring(0,1)){const M=as(E);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(f,M))}}),l.updatePriority(as(a))}{const l=[];let f=!1;if(F(u,(U,ee)=>{if("."!==U.substring(0,1)){const he=as(ee);he.isEmpty()||(f=f||!he.getPriority().isEmpty(),l.push(new $t(U,he)))}}),0===l.length)return Sr.EMPTY_NODE;const M=jc(l,ol,U=>U.name,Ba);if(f){const U=jc(l,Si.getCompare());return new Sr(M,as(a),new Ul({".priority":U},{".priority":Si}))}return new Sr(M,as(a),Ul.Default)}}!function Pu(u){$l=u}(as);class Hc extends Un{constructor(a){super(),this.indexPath_=a,(0,X.hu)(!I(a)&&".priority"!==vr(a),"Can't create PathIndex with empty path or .priority key")}extractChild(a){return a.getChild(this.indexPath_)}isDefinedOn(a){return!a.getChild(this.indexPath_).isEmpty()}compare(a,l){const f=this.extractChild(a.node),E=this.extractChild(l.node),M=f.compareTo(E);return 0===M?ss(a.name,l.name):M}makePost(a,l){const f=as(a),E=Sr.EMPTY_NODE.updateChild(this.indexPath_,f);return new $t(l,E)}maxPost(){const a=Sr.EMPTY_NODE.updateChild(this.indexPath_,ku);return new $t(ha,a)}toString(){return lo(this.indexPath_,0).join("/")}}const Ad=new class Ki extends Un{compare(a,l){const f=a.node.compareTo(l.node);return 0===f?ss(a.name,l.name):f}isDefinedOn(a){return!0}indexedValueChanged(a,l){return!a.equals(l)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(a,l){const f=as(a);return new $t(l,f)}toString(){return".value"}};function Ji(u){return{type:"value",snapshotNode:u}}function ga(u,a){return{type:"child_added",snapshotNode:a,childName:u}}function Nu(u,a){return{type:"child_removed",snapshotNode:a,childName:u}}function au(u,a,l){return{type:"child_changed",snapshotNode:a,childName:u,oldSnap:l}}class bh{constructor(a){this.index_=a}updateChild(a,l,f,E,M,U){(0,X.hu)(a.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ee=a.getImmediateChild(l);return ee.getChild(E).equals(f.getChild(E))&&ee.isEmpty()===f.isEmpty()||(null!=U&&(f.isEmpty()?a.hasChild(l)?U.trackChildChange(Nu(l,ee)):(0,X.hu)(a.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ee.isEmpty()?U.trackChildChange(ga(l,f)):U.trackChildChange(au(l,f,ee))),a.isLeafNode()&&f.isEmpty())?a:a.updateImmediateChild(l,f).withIndex(this.index_)}updateFullNode(a,l,f){return null!=f&&(a.isLeafNode()||a.forEachChild(Si,(E,M)=>{l.hasChild(E)||f.trackChildChange(Nu(E,M))}),l.isLeafNode()||l.forEachChild(Si,(E,M)=>{if(a.hasChild(E)){const U=a.getImmediateChild(E);U.equals(M)||f.trackChildChange(au(E,M,U))}else f.trackChildChange(ga(E,M))})),l.withIndex(this.index_)}updatePriority(a,l){return a.isEmpty()?Sr.EMPTY_NODE:a.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class lu{constructor(a){this.indexedFilter_=new bh(a.getIndex()),this.index_=a.getIndex(),this.startPost_=lu.getStartPost_(a),this.endPost_=lu.getEndPost_(a),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(a){const l=this.startIsInclusive_?this.index_.compare(this.getStartPost(),a)<=0:this.index_.compare(this.getStartPost(),a)<0,f=this.endIsInclusive_?this.index_.compare(a,this.getEndPost())<=0:this.index_.compare(a,this.getEndPost())<0;return l&&f}updateChild(a,l,f,E,M,U){return this.matches(new $t(l,f))||(f=Sr.EMPTY_NODE),this.indexedFilter_.updateChild(a,l,f,E,M,U)}updateFullNode(a,l,f){l.isLeafNode()&&(l=Sr.EMPTY_NODE);let E=l.withIndex(this.index_);E=E.updatePriority(Sr.EMPTY_NODE);const M=this;return l.forEachChild(Si,(U,ee)=>{M.matches(new $t(U,ee))||(E=E.updateImmediateChild(U,Sr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(a,E,f)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(a){if(a.hasStart()){const l=a.getIndexStartName();return a.getIndex().makePost(a.getIndexStartValue(),l)}return a.getIndex().minPost()}static getEndPost_(a){if(a.hasEnd()){const l=a.getIndexEndName();return a.getIndex().makePost(a.getIndexEndValue(),l)}return a.getIndex().maxPost()}}class ii{constructor(a){this.withinDirectionalStart=l=>this.reverse_?this.withinEndPost(l):this.withinStartPost(l),this.withinDirectionalEnd=l=>this.reverse_?this.withinStartPost(l):this.withinEndPost(l),this.withinStartPost=l=>{const f=this.index_.compare(this.rangedFilter_.getStartPost(),l);return this.startIsInclusive_?f<=0:f<0},this.withinEndPost=l=>{const f=this.index_.compare(l,this.rangedFilter_.getEndPost());return this.endIsInclusive_?f<=0:f<0},this.rangedFilter_=new lu(a),this.index_=a.getIndex(),this.limit_=a.getLimit(),this.reverse_=!a.isViewFromLeft(),this.startIsInclusive_=!a.startAfterSet_,this.endIsInclusive_=!a.endBeforeSet_}updateChild(a,l,f,E,M,U){return this.rangedFilter_.matches(new $t(l,f))||(f=Sr.EMPTY_NODE),a.getImmediateChild(l).equals(f)?a:a.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(a,l,f,E,M,U):this.fullLimitUpdateChild_(a,l,f,M,U)}updateFullNode(a,l,f){let E;if(l.isLeafNode()||l.isEmpty())E=Sr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;E=Sr.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let U=0;for(;M.hasNext()&&U<this.limit_;){const ee=M.getNext();if(this.withinDirectionalStart(ee)){if(!this.withinDirectionalEnd(ee))break;E=E.updateImmediateChild(ee.name,ee.node),U++}}}else{let M;E=l.withIndex(this.index_),E=E.updatePriority(Sr.EMPTY_NODE),M=this.reverse_?E.getReverseIterator(this.index_):E.getIterator(this.index_);let U=0;for(;M.hasNext();){const ee=M.getNext();U<this.limit_&&this.withinDirectionalStart(ee)&&this.withinDirectionalEnd(ee)?U++:E=E.updateImmediateChild(ee.name,Sr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(a,E,f)}updatePriority(a,l){return a}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(a,l,f,E,M){let U;if(this.reverse_){const Ot=this.index_.getCompare();U=(Bt,pn)=>Ot(pn,Bt)}else U=this.index_.getCompare();const ee=a;(0,X.hu)(ee.numChildren()===this.limit_,"");const he=new $t(l,f),Se=this.reverse_?ee.getFirstChild(this.index_):ee.getLastChild(this.index_),wt=this.rangedFilter_.matches(he);if(ee.hasChild(l)){const Ot=ee.getImmediateChild(l);let Bt=E.getChildAfterChild(this.index_,Se,this.reverse_);for(;null!=Bt&&(Bt.name===l||ee.hasChild(Bt.name));)Bt=E.getChildAfterChild(this.index_,Bt,this.reverse_);const pn=null==Bt?1:U(Bt,he);if(wt&&!f.isEmpty()&&pn>=0)return null!=M&&M.trackChildChange(au(l,f,Ot)),ee.updateImmediateChild(l,f);{null!=M&&M.trackChildChange(Nu(l,Ot));const Mr=ee.updateImmediateChild(l,Sr.EMPTY_NODE);return null!=Bt&&this.rangedFilter_.matches(Bt)?(null!=M&&M.trackChildChange(ga(Bt.name,Bt.node)),Mr.updateImmediateChild(Bt.name,Bt.node)):Mr}}return f.isEmpty()?a:wt&&U(Se,he)>=0?(null!=M&&(M.trackChildChange(Nu(Se.name,Se.node)),M.trackChildChange(ga(l,f))),ee.updateImmediateChild(l,f).updateImmediateChild(Se.name,Sr.EMPTY_NODE)):a}}class yi{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Si}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,X.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ni}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,X.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ha}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,X.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Si}copy(){const a=new yi;return a.limitSet_=this.limitSet_,a.limit_=this.limit_,a.startSet_=this.startSet_,a.startAfterSet_=this.startAfterSet_,a.indexStartValue_=this.indexStartValue_,a.startNameSet_=this.startNameSet_,a.indexStartName_=this.indexStartName_,a.endSet_=this.endSet_,a.endBeforeSet_=this.endBeforeSet_,a.indexEndValue_=this.indexEndValue_,a.endNameSet_=this.endNameSet_,a.indexEndName_=this.indexEndName_,a.index_=this.index_,a.viewFrom_=this.viewFrom_,a}}function Fu(u,a,l){const f=u.copy();return f.startSet_=!0,void 0===a&&(a=null),f.indexStartValue_=a,null!=l?(f.startNameSet_=!0,f.indexStartName_=l):(f.startNameSet_=!1,f.indexStartName_=""),f}function yo(u,a,l){const f=u.copy();return f.endSet_=!0,void 0===a&&(a=null),f.indexEndValue_=a,void 0!==l?(f.endNameSet_=!0,f.indexEndName_=l):(f.endNameSet_=!1,f.indexEndName_=""),f}function Lu(u,a){const l=u.copy();return l.index_=a,l}function hc(u){const a={};if(u.isDefault())return a;let l;if(u.index_===Si?l="$priority":u.index_===Ad?l="$value":u.index_===Cr?l="$key":((0,X.hu)(u.index_ instanceof Hc,"Unrecognized index type!"),l=u.index_.toString()),a.orderBy=(0,X.Wl)(l),u.startSet_){const f=u.startAfterSet_?"startAfter":"startAt";a[f]=(0,X.Wl)(u.indexStartValue_),u.startNameSet_&&(a[f]+=","+(0,X.Wl)(u.indexStartName_))}if(u.endSet_){const f=u.endBeforeSet_?"endBefore":"endAt";a[f]=(0,X.Wl)(u.indexEndValue_),u.endNameSet_&&(a[f]+=","+(0,X.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?a.limitToFirst=u.limit_:a.limitToLast=u.limit_),a}function Ch(u){const a={};if(u.startSet_&&(a.sp=u.indexStartValue_,u.startNameSet_&&(a.sn=u.indexStartName_),a.sin=!u.startAfterSet_),u.endSet_&&(a.ep=u.indexEndValue_,u.endNameSet_&&(a.en=u.indexEndName_),a.ein=!u.endBeforeSet_),u.limitSet_){a.l=u.limit_;let l=u.viewFrom_;""===l&&(l=u.isViewFromLeft()?"l":"r"),a.vf=l}return u.index_!==Si&&(a.i=u.index_.toString()),a}class fc extends sl{constructor(a,l,f,E){super(),this.repoInfo_=a,this.onDataUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=E,this.log_=Go("p:rest:"),this.listens_={}}reportStats(a){throw new Error("Method not implemented.")}static getListenId_(a,l){return void 0!==l?"tag$"+l:((0,X.hu)(a._queryParams.isDefault(),"should have a tag if it's not a default query."),a._path.toString())}listen(a,l,f,E){const M=a._path.toString();this.log_("Listen called for "+M+" "+a._queryIdentifier);const U=fc.getListenId_(a,f),ee={};this.listens_[U]=ee;const he=hc(a._queryParams);this.restRequest_(M+".json",he,(Se,wt)=>{let Ot=wt;if(404===Se&&(Ot=null,Se=null),null===Se&&this.onDataUpdate_(M,Ot,!1,f),(0,X.DV)(this.listens_,U)===ee){let Bt;Bt=Se?401===Se?"permission_denied":"rest_error:"+Se:"ok",E(Bt,null)}})}unlisten(a,l){const f=fc.getListenId_(a,l);delete this.listens_[f]}get(a){const l=hc(a._queryParams),f=a._path.toString(),E=new X.BH;return this.restRequest_(f+".json",l,(M,U)=>{let ee=U;404===M&&(ee=null,M=null),null===M?(this.onDataUpdate_(f,ee,!1,null),E.resolve(ee)):E.reject(new Error(ee))}),E.promise}refreshAuthToken(a){}restRequest_(a,l={},f){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([E,M])=>{E&&E.accessToken&&(l.auth=E.accessToken),M&&M.token&&(l.ac=M.token);const U=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+a+"?ns="+this.repoInfo_.namespace+(0,X.xO)(l);this.log_("Sending REST request for "+U);const ee=new XMLHttpRequest;ee.onreadystatechange=()=>{if(f&&4===ee.readyState){this.log_("REST Response for "+U+" received. status:",ee.status,"response:",ee.responseText);let he=null;if(ee.status>=200&&ee.status<300){try{he=(0,X.cI)(ee.responseText)}catch{$r("Failed to parse JSON response for "+U+": "+ee.responseText)}f(null,he)}else 401!==ee.status&&404!==ee.status&&$r("Got unsuccessful REST response for "+U+" Status: "+ee.status),f(ee.status);f=null}},ee.open("GET",U,!0),ee.send()})}}class vf{constructor(){this.rootNode_=Sr.EMPTY_NODE}getNode(a){return this.rootNode_.getChild(a)}updateSnapshot(a,l){this.rootNode_=this.rootNode_.updateChild(a,l)}}function Wc(){return{value:null,children:new Map}}function Bu(u,a,l){if(I(a))u.value=l,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(a,l);else{const f=vr(a);u.children.has(f)||u.children.set(f,Wc()),Bu(u.children.get(f),a=Di(a),l)}}function xd(u,a){if(I(a))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const l=u.value;return u.value=null,l.forEachChild(Si,(f,E)=>{Bu(u,new ri(f),E)}),xd(u,a)}}if(u.children.size>0){const l=vr(a);return a=Di(a),u.children.has(l)&&xd(u.children.get(l),a)&&u.children.delete(l),0===u.children.size}return!0}function Dh(u,a,l){null!==u.value?l(a,u.value):function _f(u,a){u.children.forEach((l,f)=>{a(f,l)})}(u,(f,E)=>{Dh(E,new ri(a.toString()+"/"+f),l)})}class qc{constructor(a){this.collection_=a,this.last_=null}get(){const a=this.collection_.get(),l=Object.assign({},a);return this.last_&&F(this.last_,(f,E)=>{l[f]=l[f]-E}),this.last_=a,l}}class Md{constructor(a,l){this.server_=l,this.statsToReport_={},this.statsListener_=new qc(a);const f=1e4+2e4*Math.random();Zn(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const a=this.statsListener_.get(),l={};let f=!1;F(a,(E,M)=>{M>0&&(0,X.r3)(this.statsToReport_,E)&&(l[E]=M,f=!0)}),f&&this.server_.reportStats(l),Zn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qo=(()=>{return(u=Qo||(Qo={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Qo;var u})();function Yc(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class ma{constructor(a,l,f){this.path=a,this.affectedTree=l,this.revert=f,this.type=Qo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(a){if(I(this.path)){if(null!=this.affectedTree.value)return(0,X.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new ri(a));return new ma(Hr(),l,this.revert)}}return(0,X.hu)(vr(this.path)===a,"operationForChild called for unrelated child."),new ma(Di(this.path),this.affectedTree,this.revert)}}class Cl{constructor(a,l){this.source=a,this.path=l,this.type=Qo.LISTEN_COMPLETE}operationForChild(a){return I(this.path)?new Cl(this.source,Hr()):new Cl(this.source,Di(this.path))}}class Dl{constructor(a,l,f){this.source=a,this.path=l,this.snap=f,this.type=Qo.OVERWRITE}operationForChild(a){return I(this.path)?new Dl(this.source,Hr(),this.snap.getImmediateChild(a)):new Dl(this.source,Di(this.path),this.snap)}}class jl{constructor(a,l,f){this.source=a,this.path=l,this.children=f,this.type=Qo.MERGE}operationForChild(a){if(I(this.path)){const l=this.children.subtree(new ri(a));return l.isEmpty()?null:l.value?new Dl(this.source,Hr(),l.value):new jl(this.source,Hr(),l)}return(0,X.hu)(vr(this.path)===a,"Can't get a merge for a child not on the path of the operation"),new jl(this.source,Di(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ya{constructor(a,l,f){this.node_=a,this.fullyInitialized_=l,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(a){if(I(a))return this.isFullyInitialized()&&!this.filtered_;const l=vr(a);return this.isCompleteForChild(l)}isCompleteForChild(a){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(a)}getNode(){return this.node_}}class $u{constructor(a){this.query_=a,this.index_=this.query_._queryParams.getIndex()}}function Uu(u,a,l,f,E,M){const U=f.filter(ee=>ee.type===l);U.sort((ee,he)=>function Kc(u,a,l){if(null==a.childName||null==l.childName)throw(0,X.g5)("Should only compare child_ events.");const f=new $t(a.childName,a.snapshotNode),E=new $t(l.childName,l.snapshotNode);return u.index_.compare(f,E)}(u,ee,he)),U.forEach(ee=>{const he=function Rd(u,a,l){return"value"===a.type||"child_removed"===a.type||(a.prevName=l.getPredecessorChildName(a.childName,a.snapshotNode,u.index_)),a}(u,ee,M);E.forEach(Se=>{Se.respondsTo(ee.type)&&a.push(Se.createEvent(he,u.query_))})})}function gc(u,a){return{eventCache:u,serverCache:a}}function Tl(u,a,l,f){return gc(new ya(a,l,f),u.serverCache)}function du(u,a,l,f){return gc(u.eventCache,new ya(a,l,f))}function mc(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function Va(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let Zc;class Zi{constructor(a,l=(()=>(Zc||(Zc=new Gr(Nl)),Zc))()){this.value=a,this.children=l}static fromObject(a){let l=new Zi(null);return F(a,(f,E)=>{l=l.set(new ri(f),E)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(a,l){if(null!=this.value&&l(this.value))return{path:Hr(),value:this.value};if(I(a))return null;{const f=vr(a),E=this.children.get(f);if(null!==E){const M=E.findRootMostMatchingPathAndValue(Di(a),l);return null!=M?{path:A(new ri(f),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(a){return this.findRootMostMatchingPathAndValue(a,()=>!0)}subtree(a){if(I(a))return this;{const l=vr(a),f=this.children.get(l);return null!==f?f.subtree(Di(a)):new Zi(null)}}set(a,l){if(I(a))return new Zi(l,this.children);{const f=vr(a),M=(this.children.get(f)||new Zi(null)).set(Di(a),l),U=this.children.insert(f,M);return new Zi(this.value,U)}}remove(a){if(I(a))return this.children.isEmpty()?new Zi(null):new Zi(null,this.children);{const l=vr(a),f=this.children.get(l);if(f){const E=f.remove(Di(a));let M;return M=E.isEmpty()?this.children.remove(l):this.children.insert(l,E),null===this.value&&M.isEmpty()?new Zi(null):new Zi(this.value,M)}return this}}get(a){if(I(a))return this.value;{const l=vr(a),f=this.children.get(l);return f?f.get(Di(a)):null}}setTree(a,l){if(I(a))return l;{const f=vr(a),M=(this.children.get(f)||new Zi(null)).setTree(Di(a),l);let U;return U=M.isEmpty()?this.children.remove(f):this.children.insert(f,M),new Zi(this.value,U)}}fold(a){return this.fold_(Hr(),a)}fold_(a,l){const f={};return this.children.inorderTraversal((E,M)=>{f[E]=M.fold_(A(a,E),l)}),l(a,this.value,f)}findOnPath(a,l){return this.findOnPath_(a,Hr(),l)}findOnPath_(a,l,f){const E=!!this.value&&f(l,this.value);if(E)return E;if(I(a))return null;{const M=vr(a),U=this.children.get(M);return U?U.findOnPath_(Di(a),A(l,M),f):null}}foreachOnPath(a,l){return this.foreachOnPath_(a,Hr(),l)}foreachOnPath_(a,l,f){if(I(a))return this;{this.value&&f(l,this.value);const E=vr(a),M=this.children.get(E);return M?M.foreachOnPath_(Di(a),A(l,E),f):new Zi(null)}}foreach(a){this.foreach_(Hr(),a)}foreach_(a,l){this.children.inorderTraversal((f,E)=>{E.foreach_(A(a,f),l)}),this.value&&l(a,this.value)}foreachChild(a){this.children.inorderTraversal((l,f)=>{f.value&&a(l,f.value)})}}class Hi{constructor(a){this.writeTree_=a}static empty(){return new Hi(new Zi(null))}}function ja(u,a,l){if(I(a))return new Hi(new Zi(l));{const f=u.writeTree_.findRootMostValueAndPath(a);if(null!=f){const E=f.path;let M=f.value;const U=P(E,a);return M=M.updateChild(U,l),new Hi(u.writeTree_.set(E,M))}{const E=new Zi(l),M=u.writeTree_.setTree(a,E);return new Hi(M)}}}function fu(u,a,l){let f=u;return F(l,(E,M)=>{f=ja(f,A(a,E),M)}),f}function Pd(u,a){if(I(a))return Hi.empty();{const l=u.writeTree_.setTree(a,new Zi(null));return new Hi(l)}}function xa(u,a){return null!=Vu(u,a)}function Vu(u,a){const l=u.writeTree_.findRootMostValueAndPath(a);return null!=l?u.writeTree_.get(l.path).getChild(P(l.path,a)):null}function Hl(u){const a=[],l=u.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(Si,(f,E)=>{a.push(new $t(f,E))}):u.writeTree_.children.inorderTraversal((f,E)=>{null!=E.value&&a.push(new $t(f,E.value))}),a}function pu(u,a){if(I(a))return u;{const l=Vu(u,a);return new Hi(null!=l?new Zi(l):u.writeTree_.subtree(a))}}function Od(u){return u.writeTree_.isEmpty()}function mr(u,a){return Th(Hr(),u.writeTree_,a)}function Th(u,a,l){if(null!=a.value)return l.updateChild(u,a.value);{let f=null;return a.children.inorderTraversal((E,M)=>{".priority"===E?((0,X.hu)(null!==M.value,"Priority writes must always be leaf nodes"),f=M.value):l=Th(A(u,E),M,l)}),!l.getChild(u).isEmpty()&&null!==f&&(l=l.updateChild(A(u,".priority"),f)),l}}function Sl(u,a){return Bd(a,u)}function kd(u,a){if(u.snap)return ae(u.path,a);for(const l in u.children)if(u.children.hasOwnProperty(l)&&ae(A(u.path,l),a))return!0;return!1}function yc(u){return u.visible}function Ha(u,a,l){let f=Hi.empty();for(let E=0;E<u.length;++E){const M=u[E];if(a(M)){const U=M.path;let ee;if(M.snap)ae(l,U)?(ee=P(l,U),f=ja(f,ee,M.snap)):ae(U,l)&&(ee=P(U,l),f=ja(f,Hr(),M.snap.getChild(ee)));else{if(!M.children)throw(0,X.g5)("WriteRecord should have .snap or .children");if(ae(l,U))ee=P(l,U),f=fu(f,ee,M.children);else if(ae(U,l))if(ee=P(U,l),I(ee))f=fu(f,Hr(),M.children);else{const he=(0,X.DV)(M.children,vr(ee));if(he){const Se=he.getChild(Di(ee));f=ja(f,Hr(),Se)}}}}}return f}function gu(u,a,l,f,E){if(f||E){const M=pu(u.visibleWrites,a);return!E&&Od(M)?l:E||null!=l||xa(M,Hr())?mr(Ha(u.allWrites,function(Se){return(Se.visible||E)&&(!f||!~f.indexOf(Se.writeId))&&(ae(Se.path,a)||ae(a,Se.path))},a),l||Sr.EMPTY_NODE):null}{const M=Vu(u.visibleWrites,a);if(null!=M)return M;{const U=pu(u.visibleWrites,a);return Od(U)?l:null!=l||xa(U,Hr())?mr(U,l||Sr.EMPTY_NODE):null}}}function Ma(u,a,l,f){return gu(u.writeTree,u.treePath,a,l,f)}function Hu(u,a){return function td(u,a,l){let f=Sr.EMPTY_NODE;const E=Vu(u.visibleWrites,a);if(E)return E.isLeafNode()||E.forEachChild(Si,(M,U)=>{f=f.updateImmediateChild(M,U)}),f;if(l){const M=pu(u.visibleWrites,a);return l.forEachChild(Si,(U,ee)=>{const he=mr(pu(M,new ri(U)),ee);f=f.updateImmediateChild(U,he)}),Hl(M).forEach(U=>{f=f.updateImmediateChild(U.name,U.node)}),f}return Hl(pu(u.visibleWrites,a)).forEach(U=>{f=f.updateImmediateChild(U.name,U.node)}),f}(u.writeTree,u.treePath,a)}function zu(u,a,l,f){return function ju(u,a,l,f,E){(0,X.hu)(f||E,"Either existingEventSnap or existingServerSnap must exist");const M=A(a,l);if(xa(u.visibleWrites,M))return null;{const U=pu(u.visibleWrites,M);return Od(U)?E.getChild(l):mr(U,E.getChild(l))}}(u.writeTree,u.treePath,a,l,f)}function zi(u,a){return function Al(u,a){return Vu(u.visibleWrites,a)}(u.writeTree,A(u.treePath,a))}function za(u,a,l){return function va(u,a,l,f){const E=A(a,l),M=Vu(u.visibleWrites,E);return null!=M?M:f.isCompleteForChild(l)?mr(pu(u.visibleWrites,E),f.getNode().getImmediateChild(l)):null}(u.writeTree,u.treePath,a,l)}function Ld(u,a){return Bd(A(u.treePath,a),u.writeTree)}function Bd(u,a){return{treePath:u,writeTree:a}}class nd{constructor(){this.changeMap=new Map}trackChildChange(a){const l=a.type,f=a.childName;(0,X.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,X.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const E=this.changeMap.get(f);if(E){const M=E.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(f,au(f,a.snapshotNode,E.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(f);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(f,Nu(f,E.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(f,ga(f,a.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,X.g5)("Illegal combination of changes: "+a+" occurred after "+E);this.changeMap.set(f,au(f,a.snapshotNode,E.oldSnap))}}else this.changeMap.set(f,a)}getChanges(){return Array.from(this.changeMap.values())}}const Gu=new class Ef{getCompleteChild(a){return null}getChildAfterChild(a,l,f){return null}};class Ds{constructor(a,l,f=null){this.writes_=a,this.viewCache_=l,this.optCompleteServerCache_=f}getCompleteChild(a){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(a))return l.getNode().getImmediateChild(a);{const f=null!=this.optCompleteServerCache_?new ya(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return za(this.writes_,a,f)}}getChildAfterChild(a,l,f){const E=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Va(this.viewCache_),M=function Fd(u,a,l,f,E,M){return function Nd(u,a,l,f,E,M,U){let ee;const he=pu(u.visibleWrites,a),Se=Vu(he,Hr());if(null!=Se)ee=Se;else{if(null==l)return[];ee=mr(he,l)}if(ee=ee.withIndex(U),ee.isEmpty()||ee.isLeafNode())return[];{const wt=[],Ot=U.getCompare(),Bt=M?ee.getReverseIteratorFrom(f,U):ee.getIteratorFrom(f,U);let pn=Bt.getNext();for(;pn&&wt.length<E;)0!==Ot(pn,f)&&wt.push(pn),pn=Bt.getNext();return wt}}(u.writeTree,u.treePath,a,l,f,E,M)}(this.writes_,E,l,1,f,a);return 0===M.length?null:M[0]}}function ul(u,a,l,f,E,M){const U=a.eventCache;if(null!=zi(f,l))return a;{let ee,he;if(I(l))if((0,X.hu)(a.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),a.serverCache.isFiltered()){const Se=Va(a),Ot=Hu(f,Se instanceof Sr?Se:Sr.EMPTY_NODE);ee=u.filter.updateFullNode(a.eventCache.getNode(),Ot,M)}else{const Se=Ma(f,Va(a));ee=u.filter.updateFullNode(a.eventCache.getNode(),Se,M)}else{const Se=vr(l);if(".priority"===Se){(0,X.hu)(1===Xo(l),"Can't have a priority with additional path components");const wt=U.getNode();he=a.serverCache.getNode();const Ot=zu(f,l,wt,he);ee=null!=Ot?u.filter.updatePriority(wt,Ot):U.getNode()}else{const wt=Di(l);let Ot;if(U.isCompleteForChild(Se)){he=a.serverCache.getNode();const Bt=zu(f,l,U.getNode(),he);Ot=null!=Bt?U.getNode().getImmediateChild(Se).updateChild(wt,Bt):U.getNode().getImmediateChild(Se)}else Ot=za(f,Se,a.serverCache);ee=null!=Ot?u.filter.updateChild(U.getNode(),Se,Ot,wt,E,M):U.getNode()}}return Tl(a,ee,U.isFullyInitialized()||I(l),u.filter.filtersNodes())}}function Wu(u,a,l,f,E,M,U,ee){const he=a.serverCache;let Se;const wt=U?u.filter:u.filter.getIndexedFilter();if(I(l))Se=wt.updateFullNode(he.getNode(),f,null);else if(wt.filtersNodes()&&!he.isFiltered()){const pn=he.getNode().updateChild(l,f);Se=wt.updateFullNode(he.getNode(),pn,null)}else{const pn=vr(l);if(!he.isCompleteForPath(l)&&Xo(l)>1)return a;const kn=Di(l),Xr=he.getNode().getImmediateChild(pn).updateChild(kn,f);Se=".priority"===pn?wt.updatePriority(he.getNode(),Xr):wt.updateChild(he.getNode(),pn,Xr,kn,Gu,null)}const Ot=du(a,Se,he.isFullyInitialized()||I(l),wt.filtersNodes());return ul(u,Ot,l,E,new Ds(E,Ot,M),ee)}function vc(u,a,l,f,E,M,U){const ee=a.eventCache;let he,Se;const wt=new Ds(E,a,M);if(I(l))Se=u.filter.updateFullNode(a.eventCache.getNode(),f,U),he=Tl(a,Se,!0,u.filter.filtersNodes());else{const Ot=vr(l);if(".priority"===Ot)Se=u.filter.updatePriority(a.eventCache.getNode(),f),he=Tl(a,Se,ee.isFullyInitialized(),ee.isFiltered());else{const Bt=Di(l),pn=ee.getNode().getImmediateChild(Ot);let kn;if(I(Bt))kn=f;else{const Mr=wt.getCompleteChild(Ot);kn=null!=Mr?".priority"===Ru(Bt)&&Mr.getChild(S(Bt)).isEmpty()?Mr:Mr.updateChild(Bt,f):Sr.EMPTY_NODE}he=pn.equals(kn)?a:Tl(a,u.filter.updateChild(ee.getNode(),Ot,kn,Bt,wt,U),ee.isFullyInitialized(),u.filter.filtersNodes())}}return he}function $d(u,a){return u.eventCache.isCompleteForChild(a)}function zl(u,a,l){return l.foreach((f,E)=>{a=a.updateChild(f,E)}),a}function Gl(u,a,l,f,E,M,U,ee){if(a.serverCache.getNode().isEmpty()&&!a.serverCache.isFullyInitialized())return a;let Se,he=a;Se=I(l)?f:new Zi(null).setTree(l,f);const wt=a.serverCache.getNode();return Se.children.inorderTraversal((Ot,Bt)=>{if(wt.hasChild(Ot)){const kn=zl(0,a.serverCache.getNode().getImmediateChild(Ot),Bt);he=Wu(u,he,new ri(Ot),kn,E,M,U,ee)}}),Se.children.inorderTraversal((Ot,Bt)=>{const pn=!a.serverCache.isCompleteForChild(Ot)&&null===Bt.value;if(!wt.hasChild(Ot)&&!pn){const Mr=zl(0,a.serverCache.getNode().getImmediateChild(Ot),Bt);he=Wu(u,he,new ri(Ot),Mr,E,M,U,ee)}}),he}class p{constructor(a,l){this.query_=a,this.eventRegistrations_=[];const f=this.query_._queryParams,E=new bh(f.getIndex()),M=function dc(u){return u.loadsAllData()?new bh(u.getIndex()):u.hasLimit()?new ii(u):new lu(u)}(f);this.processor_=function Ga(u){return{filter:u}}(M);const U=l.serverCache,ee=l.eventCache,he=E.updateFullNode(Sr.EMPTY_NODE,U.getNode(),null),Se=M.updateFullNode(Sr.EMPTY_NODE,ee.getNode(),null),wt=new ya(he,U.isFullyInitialized(),E.filtersNodes()),Ot=new ya(Se,ee.isFullyInitialized(),M.filtersNodes());this.viewCache_=gc(Ot,wt),this.eventGenerator_=new $u(this.query_)}get query(){return this.query_}}function Y(u,a){const l=Va(u.viewCache_);return l&&(u.query._queryParams.loadsAllData()||!I(a)&&!l.getImmediateChild(vr(a)).isEmpty())?l.getChild(a):null}function de(u){return 0===u.eventRegistrations_.length}function Ut(u,a,l){const f=[];if(l){(0,X.hu)(null==a,"A cancel should cancel all event registrations.");const E=u.query._path;u.eventRegistrations_.forEach(M=>{const U=M.createCancelEvent(l,E);U&&f.push(U)})}if(a){let E=[];for(let M=0;M<u.eventRegistrations_.length;++M){const U=u.eventRegistrations_[M];if(U.matches(a)){if(a.hasAnyCallback()){E=E.concat(u.eventRegistrations_.slice(M+1));break}}else E.push(U)}u.eventRegistrations_=E}else u.eventRegistrations_=[];return f}function bn(u,a,l,f){a.type===Qo.MERGE&&null!==a.source.queryId&&((0,X.hu)(Va(u.viewCache_),"We should always have a full cache before handling merges"),(0,X.hu)(mc(u.viewCache_),"Missing event cache, even though we have a server cache"));const E=u.viewCache_,M=function xh(u,a,l,f,E){const M=new nd;let U,ee;if(l.type===Qo.OVERWRITE){const Se=l;Se.source.fromUser?U=vc(u,a,Se.path,Se.snap,f,E,M):((0,X.hu)(Se.source.fromServer,"Unknown source."),ee=Se.source.tagged||a.serverCache.isFiltered()&&!I(Se.path),U=Wu(u,a,Se.path,Se.snap,f,E,ee,M))}else if(l.type===Qo.MERGE){const Se=l;Se.source.fromUser?U=function id(u,a,l,f,E,M,U){let ee=a;return f.foreach((he,Se)=>{const wt=A(l,he);$d(a,vr(wt))&&(ee=vc(u,ee,wt,Se,E,M,U))}),f.foreach((he,Se)=>{const wt=A(l,he);$d(a,vr(wt))||(ee=vc(u,ee,wt,Se,E,M,U))}),ee}(u,a,Se.path,Se.children,f,E,M):((0,X.hu)(Se.source.fromServer,"Unknown source."),ee=Se.source.tagged||a.serverCache.isFiltered(),U=Gl(u,a,Se.path,Se.children,f,E,ee,M))}else if(l.type===Qo.ACK_USER_WRITE){const Se=l;U=Se.revert?function b(u,a,l,f,E,M){let U;if(null!=zi(f,l))return a;{const ee=new Ds(f,a,E),he=a.eventCache.getNode();let Se;if(I(l)||".priority"===vr(l)){let wt;if(a.serverCache.isFullyInitialized())wt=Ma(f,Va(a));else{const Ot=a.serverCache.getNode();(0,X.hu)(Ot instanceof Sr,"serverChildren would be complete if leaf node"),wt=Hu(f,Ot)}Se=u.filter.updateFullNode(he,wt,M)}else{const wt=vr(l);let Ot=za(f,wt,a.serverCache);null==Ot&&a.serverCache.isCompleteForChild(wt)&&(Ot=he.getImmediateChild(wt)),Se=null!=Ot?u.filter.updateChild(he,wt,Ot,Di(l),ee,M):a.eventCache.getNode().hasChild(wt)?u.filter.updateChild(he,wt,Sr.EMPTY_NODE,Di(l),ee,M):he,Se.isEmpty()&&a.serverCache.isFullyInitialized()&&(U=Ma(f,Va(a)),U.isLeafNode()&&(Se=u.filter.updateFullNode(Se,U,M)))}return U=a.serverCache.isFullyInitialized()||null!=zi(f,Hr()),Tl(a,Se,U,u.filter.filtersNodes())}}(u,a,Se.path,f,E,M):function gp(u,a,l,f,E,M,U){if(null!=zi(E,l))return a;const ee=a.serverCache.isFiltered(),he=a.serverCache;if(null!=f.value){if(I(l)&&he.isFullyInitialized()||he.isCompleteForPath(l))return Wu(u,a,l,he.getNode().getChild(l),E,M,ee,U);if(I(l)){let Se=new Zi(null);return he.getNode().forEachChild(Cr,(wt,Ot)=>{Se=Se.set(new ri(wt),Ot)}),Gl(u,a,l,Se,E,M,ee,U)}return a}{let Se=new Zi(null);return f.foreach((wt,Ot)=>{const Bt=A(l,wt);he.isCompleteForPath(Bt)&&(Se=Se.set(wt,he.getNode().getChild(Bt)))}),Gl(u,a,l,Se,E,M,ee,U)}}(u,a,Se.path,Se.affectedTree,f,E,M)}else{if(l.type!==Qo.LISTEN_COMPLETE)throw(0,X.g5)("Unknown operation type: "+l.type);U=function bg(u,a,l,f,E){const M=a.serverCache;return ul(u,du(a,M.getNode(),M.isFullyInitialized()||I(l),M.isFiltered()),l,f,Gu,E)}(u,a,l.path,f,M)}const he=M.getChanges();return function ll(u,a,l){const f=a.eventCache;if(f.isFullyInitialized()){const E=f.getNode().isLeafNode()||f.getNode().isEmpty(),M=mc(u);(l.length>0||!u.eventCache.isFullyInitialized()||E&&!f.getNode().equals(M)||!f.getNode().getPriority().equals(M.getPriority()))&&l.push(Ji(mc(a)))}}(a,U,he),{viewCache:U,changes:he}}(u.processor_,E,a,l,f);return function rd(u,a){(0,X.hu)(a.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,X.hu)(a.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,M.viewCache),(0,X.hu)(M.viewCache.serverCache.isFullyInitialized()||!E.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=M.viewCache,rr(u,M.changes,M.viewCache.eventCache.getNode(),null)}function rr(u,a,l,f){return function ea(u,a,l,f){const E=[],M=[];return a.forEach(U=>{"child_changed"===U.type&&u.index_.indexedValueChanged(U.oldSnap,U.snapshotNode)&&M.push(function cc(u,a){return{type:"child_moved",snapshotNode:a,childName:u}}(U.childName,U.snapshotNode))}),Uu(u,E,"child_removed",a,f,l),Uu(u,E,"child_added",a,f,l),Uu(u,E,"child_moved",M,f,l),Uu(u,E,"child_changed",a,f,l),Uu(u,E,"value",a,f,l),E}(u.eventGenerator_,a,l,f?[f]:u.eventRegistrations_)}let er,Pa;class qs{constructor(){this.views=new Map}}function Ud(u,a,l,f){const E=a.source.queryId;if(null!==E){const M=u.views.get(E);return(0,X.hu)(null!=M,"SyncTree gave us an op for an invalid query."),bn(M,a,l,f)}{let M=[];for(const U of u.views.values())M=M.concat(bn(U,a,l,f));return M}}function If(u,a,l,f,E){const U=u.views.get(a._queryIdentifier);if(!U){let ee=Ma(l,E?f:null),he=!1;ee?he=!0:f instanceof Sr?(ee=Hu(l,f),he=!1):(ee=Sr.EMPTY_NODE,he=!1);const Se=gc(new ya(ee,he,!1),new ya(f,E,!1));return new p(a,Se)}return U}function Mh(u){const a=[];for(const l of u.views.values())l.query._queryParams.loadsAllData()||a.push(l);return a}function mu(u,a){let l=null;for(const f of u.views.values())l=l||Y(f,a);return l}function ls(u,a){return a._queryParams.loadsAllData()?Ml(u):u.views.get(a._queryIdentifier)}function sd(u,a){return null!=ls(u,a)}function Wl(u){return null!=Ml(u)}function Ml(u){for(const a of u.views.values())if(a.query._queryParams.loadsAllData())return a;return null}let Ph=1;class Oh{constructor(a){this.listenProvider_=a,this.syncPointTree_=new Zi(null),this.pendingWriteTree_=function Ah(){return{visibleWrites:Hi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function bf(u,a,l,f,E){return function Sh(u,a,l,f,E){(0,X.hu)(f>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===E&&(E=!0),u.allWrites.push({path:a,snap:l,writeId:f,visible:E}),E&&(u.visibleWrites=ja(u.visibleWrites,a,l)),u.lastWriteId=f}(u.pendingWriteTree_,a,l,f,E),E?yu(u,new Dl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,l)):[]}function Ec(u,a,l=!1){const f=function Qc(u,a){for(let l=0;l<u.allWrites.length;l++){const f=u.allWrites[l];if(f.writeId===a)return f}return null}(u.pendingWriteTree_,a);if(function Jc(u,a){const l=u.allWrites.findIndex(ee=>ee.writeId===a);(0,X.hu)(l>=0,"removeWrite called with nonexistent writeId.");const f=u.allWrites[l];u.allWrites.splice(l,1);let E=f.visible,M=!1,U=u.allWrites.length-1;for(;E&&U>=0;){const ee=u.allWrites[U];ee.visible&&(U>=l&&kd(ee,f.path)?E=!1:ae(f.path,ee.path)&&(M=!0)),U--}return!!E&&(M?(function ed(u){u.visibleWrites=Ha(u.allWrites,yc,Hr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(f.snap?u.visibleWrites=Pd(u.visibleWrites,f.path):F(f.children,he=>{u.visibleWrites=Pd(u.visibleWrites,A(f.path,he))}),!0))}(u.pendingWriteTree_,a)){let M=new Zi(null);return null!=f.snap?M=M.set(Hr(),!0):F(f.children,U=>{M=M.set(new ri(U),!0)}),yu(u,new ma(f.path,M,l))}return[]}function kh(u,a,l){return yu(u,new Dl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,l))}function Nh(u,a,l,f,E=!1){const M=a._path,U=u.syncPointTree_.get(M);let ee=[];if(U&&("default"===a._queryIdentifier||sd(U,a))){const he=function xl(u,a,l,f){const E=a._queryIdentifier,M=[];let U=[];const ee=Wl(u);if("default"===E)for(const[he,Se]of u.views.entries())U=U.concat(Ut(Se,l,f)),de(Se)&&(u.views.delete(he),Se.query._queryParams.loadsAllData()||M.push(Se.query));else{const he=u.views.get(E);he&&(U=U.concat(Ut(he,l,f)),de(he)&&(u.views.delete(E),he.query._queryParams.loadsAllData()||M.push(he.query)))}return ee&&!Wl(u)&&M.push(new(function _c(){return(0,X.hu)(er,"Reference.ts has not been loaded"),er}())(a._repo,a._path)),{removed:M,events:U}}(U,a,l,f);(function mp(u){return 0===u.views.size})(U)&&(u.syncPointTree_=u.syncPointTree_.remove(M));const Se=he.removed;if(ee=he.events,!E){const wt=-1!==Se.findIndex(Bt=>Bt._queryParams.loadsAllData()),Ot=u.syncPointTree_.findOnPath(M,(Bt,pn)=>Wl(pn));if(wt&&!Ot){const Bt=u.syncPointTree_.subtree(M);if(!Bt.isEmpty()){const pn=function vp(u){return u.fold((a,l,f)=>{if(l&&Wl(l))return[Ml(l)];{let E=[];return l&&(E=Mh(l)),F(f,(M,U)=>{E=E.concat(U)}),E}})}(Bt);for(let kn=0;kn<pn.length;++kn){const Mr=pn[kn],Xr=Mr.query,Li=Ic(u,Mr);u.listenProvider_.startListening(Lh(Xr),od(u,Xr),Li.hashFn,Li.onComplete)}}}!Ot&&Se.length>0&&!f&&(wt?u.listenProvider_.stopListening(Lh(a),null):Se.forEach(Bt=>{const pn=u.queryToTagMap.get(yp(Bt));u.listenProvider_.stopListening(Lh(Bt),pn)}))}!function Hd(u,a){for(let l=0;l<a.length;++l){const f=a[l];if(!f._queryParams.loadsAllData()){const E=yp(f),M=u.queryToTagMap.get(E);u.queryToTagMap.delete(E),u.tagToQueryMap.delete(M)}}}(u,Se)}return ee}function Df(u,a,l,f){const E=xf(u,f);if(null!=E){const M=ql(E),U=M.path,ee=M.queryId,he=P(U,a);return Fh(u,U,new Dl(Yc(ee),he,l))}return[]}function Tf(u,a,l,f=!1){const E=a._path;let M=null,U=!1;u.syncPointTree_.foreachOnPath(E,(Bt,pn)=>{const kn=P(Bt,E);M=M||mu(pn,kn),U=U||Wl(pn)});let he,ee=u.syncPointTree_.get(E);ee?(U=U||Wl(ee),M=M||mu(ee,Hr())):(ee=new qs,u.syncPointTree_=u.syncPointTree_.set(E,ee)),null!=M?he=!0:(he=!1,M=Sr.EMPTY_NODE,u.syncPointTree_.subtree(E).foreachChild((pn,kn)=>{const Mr=mu(kn,Hr());Mr&&(M=M.updateImmediateChild(pn,Mr))}));const Se=sd(ee,a);if(!Se&&!a._queryParams.loadsAllData()){const Bt=yp(a);(0,X.hu)(!u.queryToTagMap.has(Bt),"View does not exist, but we have a tag");const pn=function ad(){return Ph++}();u.queryToTagMap.set(Bt,pn),u.tagToQueryMap.set(pn,Bt)}let Ot=function Vd(u,a,l,f,E,M){const U=If(u,a,f,E,M);return u.views.has(a._queryIdentifier)||u.views.set(a._queryIdentifier,U),function pt(u,a){u.eventRegistrations_.push(a)}(U,l),function Gn(u,a){const l=u.viewCache_.eventCache,f=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(Si,(M,U)=>{f.push(ga(M,U))}),l.isFullyInitialized()&&f.push(Ji(l.getNode())),rr(u,f,l.getNode(),a)}(U,l)}(ee,a,l,Sl(u.pendingWriteTree_,E),M,he);if(!Se&&!U&&!f){const Bt=ls(ee,a);Ot=Ot.concat(function qu(u,a,l){const f=a._path,E=od(u,a),M=Ic(u,l),U=u.listenProvider_.startListening(Lh(a),E,M.hashFn,M.onComplete),ee=u.syncPointTree_.subtree(f);if(E)(0,X.hu)(!Wl(ee.value),"If we're adding a query, it shouldn't be shadowed");else{const he=ee.fold((Se,wt,Ot)=>{if(!I(Se)&&wt&&Wl(wt))return[Ml(wt).query];{let Bt=[];return wt&&(Bt=Bt.concat(Mh(wt).map(pn=>pn.query))),F(Ot,(pn,kn)=>{Bt=Bt.concat(kn)}),Bt}});for(let Se=0;Se<he.length;++Se){const wt=he[Se];u.listenProvider_.stopListening(Lh(wt),od(u,wt))}}return U}(u,a,Bt))}return Ot}function Sf(u,a,l){const E=u.pendingWriteTree_,M=u.syncPointTree_.findOnPath(a,(U,ee)=>{const Se=mu(ee,P(U,a));if(Se)return Se});return gu(E,a,M,l,!0)}function yu(u,a){return Af(a,u.syncPointTree_,null,Sl(u.pendingWriteTree_,Hr()))}function Af(u,a,l,f){if(I(u.path))return vu(u,a,l,f);{const E=a.get(Hr());null==l&&null!=E&&(l=mu(E,Hr()));let M=[];const U=vr(u.path),ee=u.operationForChild(U),he=a.children.get(U);if(he&&ee){const Se=l?l.getImmediateChild(U):null,wt=Ld(f,U);M=M.concat(Af(ee,he,Se,wt))}return E&&(M=M.concat(Ud(E,u,f,l))),M}}function vu(u,a,l,f){const E=a.get(Hr());null==l&&null!=E&&(l=mu(E,Hr()));let M=[];return a.children.inorderTraversal((U,ee)=>{const he=l?l.getImmediateChild(U):null,Se=Ld(f,U),wt=u.operationForChild(U);wt&&(M=M.concat(vu(wt,ee,he,Se)))}),E&&(M=M.concat(Ud(E,u,f,l))),M}function Ic(u,a){const l=a.query,f=od(u,l);return{hashFn:()=>(function y(u){return u.viewCache_.serverCache.getNode()}(a)||Sr.EMPTY_NODE).hash(),onComplete:E=>{if("ok"===E)return f?function Um(u,a,l){const f=xf(u,l);if(f){const E=ql(f),M=E.path,U=E.queryId,ee=P(M,a);return Fh(u,M,new Cl(Yc(U),ee))}return[]}(u,l._path,f):function Cf(u,a){return yu(u,new Cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a))}(u,l._path);{const M=function be(u,a){let l="Unknown Error";"too_big"===u?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?l="Client doesn't have permission to access the desired data.":"unavailable"===u&&(l="The service is unavailable");const f=new Error(u+" at "+a._path.toString()+": "+l);return f.code=u.toUpperCase(),f}(E,l);return Nh(u,l,null,M)}}}}function od(u,a){const l=yp(a);return u.queryToTagMap.get(l)}function yp(u){return u._path.toString()+"$"+u._queryIdentifier}function xf(u,a){return u.tagToQueryMap.get(a)}function ql(u){const a=u.indexOf("$");return(0,X.hu)(-1!==a&&a<u.length-1,"Bad queryKey."),{queryId:u.substr(a+1),path:new ri(u.substr(0,a))}}function Fh(u,a,l){const f=u.syncPointTree_.get(a);return(0,X.hu)(f,"Missing sync point for query tag that we're tracking"),Ud(f,l,Sl(u.pendingWriteTree_,a),null)}function Lh(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function Rh(){return(0,X.hu)(Pa,"Reference.ts has not been loaded"),Pa}())(u._repo,u._path):u}class _u{constructor(a){this.node_=a}getImmediateChild(a){const l=this.node_.getImmediateChild(a);return new _u(l)}node(){return this.node_}}class wc{constructor(a,l){this.syncTree_=a,this.path_=l}getImmediateChild(a){const l=A(this.path_,a);return new wc(this.syncTree_,l)}node(){return Sf(this.syncTree_,this.path_)}}const bc=function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u},Mf=function(u,a,l){return u&&"object"==typeof u?((0,X.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Bh(u[".sv"],a,l):"object"==typeof u[".sv"]?$h(u[".sv"],a):void(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Bh=function(u,a,l){if("timestamp"===u)return l.timestamp;(0,X.hu)(!1,"Unexpected server value: "+u)},$h=function(u,a,l){u.hasOwnProperty("increment")||(0,X.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const f=u.increment;"number"!=typeof f&&(0,X.hu)(!1,"Unexpected increment value: "+f);const E=a.node();if((0,X.hu)(null!==E&&typeof E<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!E.isLeafNode())return f;const U=E.getValue();return"number"!=typeof U?f:U+f},_p=function(u,a,l,f){return ld(a,new wc(l,u),f)},Uh=function(u,a,l){return ld(u,new _u(a),l)};function ld(u,a,l){const f=u.getPriority().val(),E=Mf(f,a.getImmediateChild(".priority"),l);let M;if(u.isLeafNode()){const U=u,ee=Mf(U.getValue(),a,l);return ee!==U.getValue()||E!==U.getPriority().val()?new su(ee,as(E)):u}{const U=u;return M=U,E!==U.getPriority().val()&&(M=M.updatePriority(new su(E))),U.forEachChild(Si,(ee,he)=>{const Se=ld(he,a.getImmediateChild(ee),l);Se!==he&&(M=M.updateImmediateChild(ee,Se))}),M}}class Eu{constructor(a="",l=null,f={children:{},childCount:0}){this.name=a,this.parent=l,this.node=f}}function Cc(u,a){let l=a instanceof ri?a:new ri(a),f=u,E=vr(l);for(;null!==E;){const M=(0,X.DV)(f.node.children,E)||{children:{},childCount:0};f=new Eu(E,f,M),l=Di(l),E=vr(l)}return f}function cl(u){return u.node.value}function Yu(u,a){u.node.value=a,Yl(u)}function Dg(u){return u.node.childCount>0}function Ku(u,a){F(u.node.children,(l,f)=>{a(new Eu(l,u,f))})}function Tg(u,a,l,f){l&&!f&&a(u),Ku(u,E=>{Tg(E,a,!0,f)}),l&&f&&a(u)}function Zu(u){return new ri(null===u.parent?u.name:Zu(u.parent)+"/"+u.name)}function Yl(u){null!==u.parent&&function Dc(u,a,l){const f=function Ep(u){return void 0===cl(u)&&!Dg(u)}(l),E=(0,X.r3)(u.node.children,a);f&&E?(delete u.node.children[a],u.node.childCount--,Yl(u)):!f&&!E&&(u.node.children[a]=l.node,u.node.childCount++,Yl(u))}(u.parent,u.name,u)}const Ip=/[\[\].#$\/\u0000-\u001F\u007F]/,jm=/[\[\].#$\u0000-\u001F\u007F]/,Vh=10485760,wp=function(u){return"string"==typeof u&&0!==u.length&&!Ip.test(u)},Rf=function(u){return"string"==typeof u&&0!==u.length&&!jm.test(u)},zd=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!mi(u)||u&&"object"==typeof u&&(0,X.r3)(u,".sv")},ta=function(u,a,l,f){f&&void 0===a||Kl((0,X.gK)(u,"value"),a,l)},Kl=function(u,a,l){const f=l instanceof ri?new at(l,u):l;if(void 0===a)throw new Error(u+"contains undefined "+Dn(f));if("function"==typeof a)throw new Error(u+"contains a function "+Dn(f)+" with contents = "+a.toString());if(mi(a))throw new Error(u+"contains "+a.toString()+" "+Dn(f));if("string"==typeof a&&a.length>Vh/3&&(0,X.ug)(a)>Vh)throw new Error(u+"contains a string greater than "+Vh+" utf8 bytes "+Dn(f)+" ('"+a.substring(0,50)+"...')");if(a&&"object"==typeof a){let E=!1,M=!1;if(F(a,(U,ee)=>{if(".value"===U)E=!0;else if(".priority"!==U&&".sv"!==U&&(M=!0,!wp(U)))throw new Error(u+" contains an invalid key ("+U+") "+Dn(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Pt(u,a){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(a),u.byteLength_+=(0,X.ug)(a),Fn(u)})(f,U),Kl(u,ee,f),function dn(u){const a=u.parts_.pop();u.byteLength_-=(0,X.ug)(a),u.parts_.length>0&&(u.byteLength_-=1)}(f)}),E&&M)throw new Error(u+' contains ".value" child '+Dn(f)+" in addition to actual children.")}},Gd=function(u,a,l,f){if(f&&void 0===a)return;const E=(0,X.gK)(u,"values");if(!a||"object"!=typeof a||Array.isArray(a))throw new Error(E+" must be an object containing the children to replace.");const M=[];F(a,(U,ee)=>{const he=new ri(U);if(Kl(E,ee,A(l,he)),".priority"===Ru(he)&&!zd(ee))throw new Error(E+"contains an invalid value for '"+he.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(he)}),function(u,a){let l,f;for(l=0;l<a.length;l++){f=a[l];const M=lo(f);for(let U=0;U<M.length;U++)if((".priority"!==M[U]||U!==M.length-1)&&!wp(M[U]))throw new Error(u+"contains an invalid key ("+M[U]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}a.sort(H);let E=null;for(l=0;l<a.length;l++){if(f=a[l],null!==E&&ae(E,f))throw new Error(u+"contains a path "+E.toString()+" that is ancestor of another path "+f.toString());E=f}}(E,M)},bp=function(u,a,l){if(!l||void 0!==a){if(mi(a))throw new Error((0,X.gK)(u,"priority")+"is "+a.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!zd(a))throw new Error((0,X.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},cd=function(u,a,l,f){if(!(f&&void 0===l||wp(l)))throw new Error((0,X.gK)(u,a)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Tc=function(u,a,l,f){if(!(f&&void 0===l||Rf(l)))throw new Error((0,X.gK)(u,a)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ag=function(u,a,l,f){l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Tc(u,a,l,f)},Wa=function(u,a){if(".info"===vr(a))throw new Error(u+" failed = Can't modify data under /.info/")},Sc=function(u,a){const l=a.path.toString();if("string"!=typeof a.repoInfo.host||0===a.repoInfo.host.length||!wp(a.repoInfo.namespace)&&"localhost"!==a.repoInfo.host.split(":")[0]||0!==l.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Rf(u)}(l))throw new Error((0,X.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Wd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ac(u,a){let l=null;for(let f=0;f<a.length;f++){const E=a[f],M=E.getPath();null!==l&&!ie(M,l.path)&&(u.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(E)}l&&u.eventLists_.push(l)}function jh(u,a,l){Ac(u,l),Oa(u,f=>ie(f,a))}function Lo(u,a,l){Ac(u,l),Oa(u,f=>ae(f,a)||ae(a,f))}function Oa(u,a){u.recursionDepth_++;let l=!0;for(let f=0;f<u.eventLists_.length;f++){const E=u.eventLists_[f];E&&(a(E.path)?(xg(u.eventLists_[f]),u.eventLists_[f]=null):l=!1)}l&&(u.eventLists_=[]),u.recursionDepth_--}function xg(u){for(let a=0;a<u.events.length;a++){const l=u.events[a];if(null!==l){u.events[a]=null;const f=l.getEventRunner();Ta&&is("event: "+l.toString()),Ft(f)}}}const Hh="repo_interrupt",Pf=25;class Mg{constructor(a,l,f,E){this.repoInfo_=a,this.forceRestClient_=l,this.authTokenProvider_=f,this.appCheckProvider_=E,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wc(),this.transactionQueueTree_=new Eu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function dd(u){const l=u.infoData_.getNode(new ri(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function Zl(u){return bc({timestamp:dd(u)})}function _a(u,a,l,f,E){u.dataUpdateCount++;const M=new ri(a);l=u.interceptServerDataCallback_?u.interceptServerDataCallback_(a,l):l;let U=[];if(E)if(f){const he=(0,X.UI)(l,Se=>as(Se));U=function Cg(u,a,l,f){const E=xf(u,f);if(E){const M=ql(E),U=M.path,ee=M.queryId,he=P(U,a),Se=Zi.fromObject(l);return Fh(u,U,new jl(Yc(ee),he,Se))}return[]}(u.serverSyncTree_,M,he,E)}else{const he=as(l);U=Df(u.serverSyncTree_,M,he,E)}else if(f){const he=(0,X.UI)(l,Se=>as(Se));U=function jd(u,a,l){const f=Zi.fromObject(l);return yu(u,new jl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},a,f))}(u.serverSyncTree_,M,he)}else{const he=as(l);U=kh(u.serverSyncTree_,M,he)}let ee=M;U.length>0&&(ee=Kd(u,M)),Lo(u.eventQueue_,ee,U)}function Rg(u,a){Cp(u,"connected",a),!1===a&&function kg(u){wu(u,"onDisconnectEvents");const a=Zl(u),l=Wc();Dh(u.onDisconnect_,Hr(),(E,M)=>{const U=_p(E,M,u.serverSyncTree_,a);Bu(l,E,U)});let f=[];Dh(l,Hr(),(E,M)=>{f=f.concat(kh(u.serverSyncTree_,E,M));const U=xp(u,E);Kd(u,U)}),u.onDisconnect_=Wc(),Lo(u.eventQueue_,Hr(),f)}(u)}function Cp(u,a,l){const f=new ri("/.info/"+a),E=as(l);u.infoData_.updateSnapshot(f,E);const M=kh(u.infoSyncTree_,f,E);Lo(u.eventQueue_,f,M)}function Iu(u){return u.nextWriteId_++}function Pg(u,a,l,f,E){wu(u,"set",{path:a.toString(),value:l,priority:f});const M=Zl(u),U=as(l,f),ee=Sf(u.serverSyncTree_,a),he=Uh(U,ee,M),Se=Iu(u),wt=bf(u.serverSyncTree_,a,he,Se,!0);Ac(u.eventQueue_,wt),u.server_.put(a.toString(),U.val(!0),(Bt,pn)=>{const kn="ok"===Bt;kn||$r("set at "+a+" failed: "+Bt);const Mr=Ec(u.serverSyncTree_,Se,!kn);Lo(u.eventQueue_,a,Mr),Xu(0,E,Bt,pn)});const Ot=xp(u,a);Kd(u,Ot),Lo(u.eventQueue_,Ot,[])}function Hm(u,a,l){u.server_.onDisconnectCancel(a.toString(),(f,E)=>{"ok"===f&&xd(u.onDisconnect_,a),Xu(0,l,f,E)})}function Yd(u,a,l,f){const E=as(l);u.server_.onDisconnectPut(a.toString(),E.val(!0),(M,U)=>{"ok"===M&&Bu(u.onDisconnect_,a,E),Xu(0,f,M,U)})}function Tp(u,a,l){let f;f=".info"===vr(a._path)?Nh(u.infoSyncTree_,a,l):Nh(u.serverSyncTree_,a,l),jh(u.eventQueue_,a._path,f)}function Of(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Hh)}function wu(u,...a){let l="";u.persistentConnection_&&(l=u.persistentConnection_.id+":"),is(l,...a)}function Xu(u,a,l,f){a&&Ft(()=>{if("ok"===l)a(null);else{const E=(l||"error").toUpperCase();let M=E;f&&(M+=": "+f);const U=new Error(M);U.code=E,a(U)}})}function kf(u,a,l){return Sf(u.serverSyncTree_,a,l)||Sr.EMPTY_NODE}function zh(u,a=u.transactionQueueTree_){if(a||Nf(u,a),cl(a)){const l=Sp(u,a);(0,X.hu)(l.length>0,"Sending zero length transaction queue"),l.every(E=>0===E.status)&&function Gm(u,a,l){const f=l.map(Se=>Se.currentWriteId),E=kf(u,a,f);let M=E;const U=E.hash();for(let Se=0;Se<l.length;Se++){const wt=l[Se];(0,X.hu)(0===wt.status,"tryToSendTransactionQueue_: items in queue should all be run."),wt.status=1,wt.retryCount++;const Ot=P(a,wt.path);M=M.updateChild(Ot,wt.currentOutputSnapshotRaw)}const ee=M.val(!0),he=a;u.server_.put(he.toString(),ee,Se=>{wu(u,"transaction put response",{path:he.toString(),status:Se});let wt=[];if("ok"===Se){const Ot=[];for(let Bt=0;Bt<l.length;Bt++)l[Bt].status=2,wt=wt.concat(Ec(u.serverSyncTree_,l[Bt].currentWriteId)),l[Bt].onComplete&&Ot.push(()=>l[Bt].onComplete(null,!0,l[Bt].currentOutputSnapshotResolved)),l[Bt].unwatcher();Nf(u,Cc(u.transactionQueueTree_,a)),zh(u,u.transactionQueueTree_),Lo(u.eventQueue_,a,wt);for(let Bt=0;Bt<Ot.length;Bt++)Ft(Ot[Bt])}else{if("datastale"===Se)for(let Ot=0;Ot<l.length;Ot++)l[Ot].status=3===l[Ot].status?4:0;else{$r("transaction at "+he.toString()+" failed: "+Se);for(let Ot=0;Ot<l.length;Ot++)l[Ot].status=4,l[Ot].abortReason=Se}Kd(u,a)}},U)}(u,Zu(a),l)}else Dg(a)&&Ku(a,l=>{zh(u,l)})}function Kd(u,a){const l=vo(u,a),f=Zu(l);return function Nr(u,a,l){if(0===a.length)return;const f=[];let E=[];const U=a.filter(ee=>0===ee.status).map(ee=>ee.currentWriteId);for(let ee=0;ee<a.length;ee++){const he=a[ee],Se=P(l,he.path);let Ot,wt=!1;if((0,X.hu)(null!==Se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===he.status)wt=!0,Ot=he.abortReason,E=E.concat(Ec(u.serverSyncTree_,he.currentWriteId,!0));else if(0===he.status)if(he.retryCount>=Pf)wt=!0,Ot="maxretry",E=E.concat(Ec(u.serverSyncTree_,he.currentWriteId,!0));else{const Bt=kf(u,he.path,U);he.currentInputSnapshot=Bt;const pn=a[ee].update(Bt.val());if(void 0!==pn){Kl("transaction failed: Data returned ",pn,he.path);let kn=as(pn);"object"==typeof pn&&null!=pn&&(0,X.r3)(pn,".priority")||(kn=kn.updatePriority(Bt.getPriority()));const Xr=he.currentWriteId,Li=Zl(u),Ts=Uh(kn,Bt,Li);he.currentOutputSnapshotRaw=kn,he.currentOutputSnapshotResolved=Ts,he.currentWriteId=Iu(u),U.splice(U.indexOf(Xr),1),E=E.concat(bf(u.serverSyncTree_,he.path,Ts,he.currentWriteId,he.applyLocally)),E=E.concat(Ec(u.serverSyncTree_,Xr,!0))}else wt=!0,Ot="nodata",E=E.concat(Ec(u.serverSyncTree_,he.currentWriteId,!0))}Lo(u.eventQueue_,l,E),E=[],wt&&(a[ee].status=2,setTimeout(a[ee].unwatcher,Math.floor(0)),a[ee].onComplete&&f.push("nodata"===Ot?()=>a[ee].onComplete(null,!1,a[ee].currentInputSnapshot):()=>a[ee].onComplete(new Error(Ot),!1,null)))}Nf(u,u.transactionQueueTree_);for(let ee=0;ee<f.length;ee++)Ft(f[ee]);zh(u,u.transactionQueueTree_)}(u,Sp(u,l),f),f}function vo(u,a){let l,f=u.transactionQueueTree_;for(l=vr(a);null!==l&&void 0===cl(f);)f=Cc(f,l),l=vr(a=Di(a));return f}function Sp(u,a){const l=[];return Ap(u,a,l),l.sort((f,E)=>f.order-E.order),l}function Ap(u,a,l){const f=cl(a);if(f)for(let E=0;E<f.length;E++)l.push(f[E]);Ku(a,E=>{Ap(u,E,l)})}function Nf(u,a){const l=cl(a);if(l){let f=0;for(let E=0;E<l.length;E++)2!==l[E].status&&(l[f]=l[E],f++);l.length=f,Yu(a,l.length>0?l:void 0)}Ku(a,f=>{Nf(u,f)})}function xp(u,a){const l=Zu(vo(u,a)),f=Cc(u.transactionQueueTree_,a);return function Vm(u,a,l){let f=l?u:u.parent;for(;null!==f;){if(a(f))return!0;f=f.parent}}(f,E=>{Gh(u,E)}),Gh(u,f),Tg(f,E=>{Gh(u,E)}),l}function Gh(u,a){const l=cl(a);if(l){const f=[];let E=[],M=-1;for(let U=0;U<l.length;U++)3===l[U].status||(1===l[U].status?((0,X.hu)(M===U-1,"All SENT items should be at beginning of queue."),M=U,l[U].status=3,l[U].abortReason="set"):((0,X.hu)(0===l[U].status,"Unexpected transaction status in abort"),l[U].unwatcher(),E=E.concat(Ec(u.serverSyncTree_,l[U].currentWriteId,!0)),l[U].onComplete&&f.push(l[U].onComplete.bind(null,new Error("set"),!1,null))));-1===M?Yu(a,void 0):l.length=M+1,Lo(u.eventQueue_,Zu(a),E);for(let U=0;U<f.length;U++)Ft(f[U])}}const Mp=function(u,a){const l=Lg(u),f=l.namespace;return"firebase.com"===l.domain&&Ao(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==l.domain&&Ao("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&$r("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sa(l.host,l.secure,f,"ws"===l.scheme||"wss"===l.scheme,a,"",f!==l.subdomain),path:new ri(l.pathString)}},Lg=function(u){let a="",l="",f="",E="",M="",U=!0,ee="https",he=443;if("string"==typeof u){let Se=u.indexOf("//");Se>=0&&(ee=u.substring(0,Se-1),u=u.substring(Se+2));let wt=u.indexOf("/");-1===wt&&(wt=u.length);let Ot=u.indexOf("?");-1===Ot&&(Ot=u.length),a=u.substring(0,Math.min(wt,Ot)),wt<Ot&&(E=function Wm(u){let a="";const l=u.split("/");for(let f=0;f<l.length;f++)if(l[f].length>0){let E=l[f];try{E=decodeURIComponent(E.replace(/\+/g," "))}catch{}a+="/"+E}return a}(u.substring(wt,Ot)));const Bt=function Wh(u){const a={};"?"===u.charAt(0)&&(u=u.substring(1));for(const l of u.split("&")){if(0===l.length)continue;const f=l.split("=");2===f.length?a[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):$r(`Invalid query segment '${l}' in query '${u}'`)}return a}(u.substring(Math.min(u.length,Ot)));Se=a.indexOf(":"),Se>=0?(U="https"===ee||"wss"===ee,he=parseInt(a.substring(Se+1),10)):Se=a.length;const pn=a.slice(0,Se);if("localhost"===pn.toLowerCase())l="localhost";else if(pn.split(".").length<=2)l=pn;else{const kn=a.indexOf(".");f=a.substring(0,kn).toLowerCase(),l=a.substring(kn+1),M=f}"ns"in Bt&&(M=Bt.ns)}return{host:a,port:he,domain:l,subdomain:f,secure:U,scheme:ee,pathString:E,namespace:M}},Rp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ff=function(){let u=0;const a=[];return function(l){const f=l===u;let E;u=l;const M=new Array(8);for(E=7;E>=0;E--)M[E]=Rp.charAt(l%64),l=Math.floor(l/64);(0,X.hu)(0===l,"Cannot push at time == 0");let U=M.join("");if(f){for(E=11;E>=0&&63===a[E];E--)a[E]=0;a[E]++}else for(E=0;E<12;E++)a[E]=Math.floor(64*Math.random());for(E=0;E<12;E++)U+=Rp.charAt(a[E]);return(0,X.hu)(20===U.length,"nextPushId: Length should be 20."),U}}();class fd{constructor(a,l,f,E){this.eventType=a,this.eventRegistration=l,this.snapshot=f,this.prevName=E}getPath(){const a=this.snapshot.ref;return"value"===this.eventType?a._path:a.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,X.Wl)(this.snapshot.exportVal())}}class Xl{constructor(a,l,f){this.eventRegistration=a,this.error=l,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qh{constructor(a,l){this.snapshotCallback=a,this.cancelCallback=l}onValue(a,l){this.snapshotCallback.call(null,a,l)}onCancel(a){return(0,X.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,a)}get hasCancelCallback(){return!!this.cancelCallback}matches(a){return this.snapshotCallback===a.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===a.snapshotCallback.userCallback&&this.snapshotCallback.context===a.snapshotCallback.context}}class Zd{constructor(a,l){this._repo=a,this._path=l}cancel(){const a=new X.BH;return Hm(this._repo,this._path,a.wrapCallback(()=>{})),a.promise}remove(){Wa("OnDisconnect.remove",this._path);const a=new X.BH;return Yd(this._repo,this._path,null,a.wrapCallback(()=>{})),a.promise}set(a){Wa("OnDisconnect.set",this._path),ta("OnDisconnect.set",a,this._path,!1);const l=new X.BH;return Yd(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}setWithPriority(a,l){Wa("OnDisconnect.setWithPriority",this._path),ta("OnDisconnect.setWithPriority",a,this._path,!1),bp("OnDisconnect.setWithPriority",l,!1);const f=new X.BH;return function Ng(u,a,l,f,E){const M=as(l,f);u.server_.onDisconnectPut(a.toString(),M.val(!0),(U,ee)=>{"ok"===U&&Bu(u.onDisconnect_,a,M),Xu(0,E,U,ee)})}(this._repo,this._path,a,l,f.wrapCallback(()=>{})),f.promise}update(a){Wa("OnDisconnect.update",this._path),Gd("OnDisconnect.update",a,this._path,!1);const l=new X.BH;return function zm(u,a,l,f){if((0,X.xb)(l))return is("onDisconnect().update() called with empty data.  Don't do anything."),void Xu(0,f,"ok",void 0);u.server_.onDisconnectMerge(a.toString(),l,(E,M)=>{"ok"===E&&F(l,(U,ee)=>{const he=as(ee);Bu(u.onDisconnect_,A(a,U),he)}),Xu(0,f,E,M)})}(this._repo,this._path,a,l.wrapCallback(()=>{})),l.promise}}class na{constructor(a,l,f,E){this._repo=a,this._path=l,this._queryParams=f,this._orderByCalled=E}get key(){return I(this._path)?null:Ru(this._path)}get ref(){return new dl(this._repo,this._path)}get _queryIdentifier(){const a=Ch(this._queryParams),l=Ya(a);return"{}"===l?"default":l}get _queryObject(){return Ch(this._queryParams)}isEqual(a){if(!((a=(0,X.m9)(a))instanceof na))return!1;const l=this._repo===a._repo,f=ie(this._path,a._path);return l&&f&&this._queryIdentifier===a._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Vc(u){let a="";for(let l=u.pieceNum_;l<u.pieces_.length;l++)""!==u.pieces_[l]&&(a+="/"+encodeURIComponent(String(u.pieces_[l])));return a||"/"}(this._path)}}function Lf(u,a){if(!0===u._orderByCalled)throw new Error(a+": You can't combine multiple orderBy calls.")}function Mc(u){let a=null,l=null;if(u.hasStart()&&(a=u.getIndexStartValue()),u.hasEnd()&&(l=u.getIndexEndValue()),u.getIndex()===Cr){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",E="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==ni)throw new Error(f);if("string"!=typeof a)throw new Error(E)}if(u.hasEnd()){if(u.getIndexEndName()!==ha)throw new Error(f);if("string"!=typeof l)throw new Error(E)}}else if(u.getIndex()===Si){if(null!=a&&!zd(a)||null!=l&&!zd(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,X.hu)(u.getIndex()instanceof Hc||u.getIndex()===Ad,"unknown index type."),null!=a&&"object"==typeof a||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bf(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class dl extends na{constructor(a,l){super(a,l,new yi,!1)}get parent(){const a=S(this._path);return null===a?null:new dl(this._repo,a)}get root(){let a=this;for(;null!==a.parent;)a=a.parent;return a}}class pd{constructor(a,l,f){this._node=a,this.ref=l,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(a){const l=new ri(a),f=Rc(this.ref,a);return new pd(this._node.getChild(l),f,Si)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(a){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,E)=>a(new pd(E,Rc(this.ref,f),Si)))}hasChild(a){const l=new ri(a);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function $f(u,a){return(u=(0,X.m9)(u))._checkNotDeleted("ref"),void 0!==a?Rc(u._root,a):u._root}function qm(u,a){(u=(0,X.m9)(u))._checkNotDeleted("refFromURL");const l=Mp(a,u._repo.repoInfo_.nodeAdmin);Sc("refFromURL",l);const f=l.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&f.host!==u._repo.repoInfo_.host&&Ao("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+u._repo.repoInfo_.host+")"),$f(u,l.path.toString())}function Rc(u,a){return null===vr((u=(0,X.m9)(u))._path)?Ag("child","path",a,!1):Tc("child","path",a,!1),new dl(u._repo,A(u._path,a))}function Pc(u,a){u=(0,X.m9)(u),Wa("set",u._path),ta("set",a,u._path,!1);const l=new X.BH;return Pg(u._repo,u._path,a,null,l.wrapCallback(()=>{})),l.promise}function Bg(u,a){Gd("update",a,u._path,!1);const l=new X.BH;return function Og(u,a,l,f){wu(u,"update",{path:a.toString(),value:l});let E=!0;const M=Zl(u),U={};if(F(l,(ee,he)=>{E=!1,U[ee]=_p(A(a,ee),as(he),u.serverSyncTree_,M)}),E)is("update() called with empty data.  Don't do anything."),Xu(0,f,"ok",void 0);else{const ee=Iu(u),he=function uo(u,a,l,f){!function Xc(u,a,l,f){(0,X.hu)(f>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:a,children:l,writeId:f,visible:!0}),u.visibleWrites=fu(u.visibleWrites,a,l),u.lastWriteId=f}(u.pendingWriteTree_,a,l,f);const E=Zi.fromObject(l);return yu(u,new jl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},a,E))}(u.serverSyncTree_,a,U,ee);Ac(u.eventQueue_,he),u.server_.merge(a.toString(),l,(Se,wt)=>{const Ot="ok"===Se;Ot||$r("update at "+a+" failed: "+Se);const Bt=Ec(u.serverSyncTree_,ee,!Ot),pn=Bt.length>0?Kd(u,a):a;Lo(u.eventQueue_,pn,Bt),Xu(0,f,Se,wt)}),F(l,Se=>{const wt=xp(u,A(a,Se));Kd(u,wt)}),Lo(u.eventQueue_,a,[])}}(u._repo,u._path,a,l.wrapCallback(()=>{})),l.promise}function $g(u){u=(0,X.m9)(u);const a=new qh(()=>{}),l=new Kh(a);return function Dp(u,a,l){const f=function Yy(u,a){const l=a._path;let f=null;u.syncPointTree_.foreachOnPath(l,(Se,wt)=>{const Ot=P(Se,l);f=f||mu(wt,Ot)});let E=u.syncPointTree_.get(l);E?f=f||mu(E,Hr()):(E=new qs,u.syncPointTree_=u.syncPointTree_.set(l,E));const M=null!=f,U=M?new ya(f,!0,!1):null;return function x(u){return mc(u.viewCache_)}(If(E,a,Sl(u.pendingWriteTree_,a._path),M?U.getNode():Sr.EMPTY_NODE,M))}(u.serverSyncTree_,a);return null!=f?Promise.resolve(f):u.server_.get(a).then(E=>{const M=as(E).withIndex(a._queryParams.getIndex());let U;if(Tf(u.serverSyncTree_,a,l,!0),a._queryParams.loadsAllData())U=kh(u.serverSyncTree_,a._path,M);else{const ee=od(u.serverSyncTree_,a);U=Df(u.serverSyncTree_,a._path,M,ee)}return Lo(u.eventQueue_,a._path,U),Nh(u.serverSyncTree_,a,l,null,!0),M},E=>(wu(u,"get for query "+(0,X.Wl)(a)+" failed: "+E),Promise.reject(new Error(E))))}(u._repo,u,l).then(f=>new pd(f,new dl(u._repo,u._path),u._queryParams.getIndex()))}class Kh{constructor(a){this.callbackContext=a}respondsTo(a){return"value"===a}createEvent(a,l){const f=l._queryParams.getIndex();return new fd("value",this,new pd(a.snapshotNode,new dl(l._repo,l._path),f))}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,null)}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Xl(this,a,l):null}matches(a){return a instanceof Kh&&(!a.callbackContext||!this.callbackContext||a.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Qd{constructor(a,l){this.eventType=a,this.callbackContext=l}respondsTo(a){let l="children_added"===a?"child_added":a;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(a,l){return this.callbackContext.hasCancelCallback?new Xl(this,a,l):null}createEvent(a,l){(0,X.hu)(null!=a.childName,"Child events should have a childName.");const f=Rc(new dl(l._repo,l._path),a.childName),E=l._queryParams.getIndex();return new fd(a.type,this,new pd(a.snapshotNode,f,E),a.prevName)}getEventRunner(a){return"cancel"===a.getEventType()?()=>this.callbackContext.onCancel(a.error):()=>this.callbackContext.onValue(a.snapshot,a.prevName)}matches(a){return a instanceof Qd&&this.eventType===a.eventType&&(!this.callbackContext||!a.callbackContext||this.callbackContext.matches(a.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Zh(u,a,l,f,E){let M;if("object"==typeof f&&(M=void 0,E=f),"function"==typeof f&&(M=f),E&&E.onlyOnce){const he=l,Se=(wt,Ot)=>{Tp(u._repo,u,ee),he(wt,Ot)};Se.userCallback=l.userCallback,Se.context=l.context,l=Se}const U=new qh(l,M||void 0),ee="value"===a?new Kh(U):new Qd(a,U);return function Rl(u,a,l){let f;f=".info"===vr(a._path)?Tf(u.infoSyncTree_,a,l):Tf(u.serverSyncTree_,a,l),jh(u.eventQueue_,a._path,f)}(u._repo,u,ee),()=>Tp(u._repo,u,ee)}function Jd(u,a,l,f){return Zh(u,"value",a,l,f)}function Op(u,a,l,f){return Zh(u,"child_added",a,l,f)}function Vf(u,a,l,f){return Zh(u,"child_changed",a,l,f)}function Xh(u,a,l,f){return Zh(u,"child_moved",a,l,f)}function md(u,a,l,f){return Zh(u,"child_removed",a,l,f)}function Qh(u,a,l){let f=null;const E=l?new qh(l):null;"value"===a?f=new Kh(E):a&&(f=new Qd(a,E)),Tp(u._repo,u,f)}class Ea{}class jf extends Ea{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){ta("endAt",this._value,a._path,!0);const l=yo(a._queryParams,this._value,this._key);if(Bf(l),Mc(l),a._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new na(a._repo,a._path,l,a._orderByCalled)}}class Oc extends Ea{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){ta("endBefore",this._value,a._path,!1);const l=function uu(u,a,l){let f;return f=yo(u,a,u.index_===Cr||l?l:ni),f.endBeforeSet_=!0,f}(a._queryParams,this._value,this._key);if(Bf(l),Mc(l),a._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new na(a._repo,a._path,l,a._orderByCalled)}}class Vg extends Ea{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){ta("startAt",this._value,a._path,!0);const l=Fu(a._queryParams,this._value,this._key);if(Bf(l),Mc(l),a._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new na(a._repo,a._path,l,a._orderByCalled)}}class Hf extends Ea{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){ta("startAfter",this._value,a._path,!1);const l=function Gc(u,a,l){let f;return f=Fu(u,a,u.index_===Cr||l?l:ha),f.startAfterSet_=!0,f}(a._queryParams,this._value,this._key);if(Bf(l),Mc(l),a._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new na(a._repo,a._path,l,a._orderByCalled)}}class zf extends Ea{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new na(a._repo,a._path,function Ro(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="l",l}(a._queryParams,this._limit),a._orderByCalled)}}class Bo extends Ea{constructor(a){super(),this._limit=a}_apply(a){if(a._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new na(a._repo,a._path,function zc(u,a){const l=u.copy();return l.limitSet_=!0,l.limit_=a,l.viewFrom_="r",l}(a._queryParams,this._limit),a._orderByCalled)}}class Gf extends Ea{constructor(a){super(),this._path=a}_apply(a){Lf(a,"orderByChild");const l=new ri(this._path);if(I(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new Hc(l),E=Lu(a._queryParams,f);return Mc(E),new na(a._repo,a._path,E,!0)}}class th extends Ea{_apply(a){Lf(a,"orderByKey");const l=Lu(a._queryParams,Cr);return Mc(l),new na(a._repo,a._path,l,!0)}}class Wf extends Ea{_apply(a){Lf(a,"orderByPriority");const l=Lu(a._queryParams,Si);return Mc(l),new na(a._repo,a._path,l,!0)}}class jg extends Ea{_apply(a){Lf(a,"orderByValue");const l=Lu(a._queryParams,Ad);return Mc(l),new na(a._repo,a._path,l,!0)}}class Ym extends Ea{constructor(a,l){super(),this._value=a,this._key=l}_apply(a){if(ta("equalTo",this._value,a._path,!1),a._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(a._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jf(this._value,this._key)._apply(new Vg(this._value,this._key)._apply(a))}}function Pl(u,...a){let l=(0,X.m9)(u);for(const f of a)l=f._apply(l);return l}(function Ra(u){(0,X.hu)(!er,"__referenceConstructor has already been defined"),er=u})(dl),function wf(u){(0,X.hu)(!Pa,"__referenceConstructor has already been defined"),Pa=u}(dl);const Km="FIREBASE_DATABASE_EMULATOR_HOST",kc={};let tf=!1;function qf(u,a,l,f,E){let M=f||u.options.databaseURL;void 0===M&&(u.options.projectId||Ao("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),is("Using default host for project ",u.options.projectId),M=`${u.options.projectId}-default-rtdb.firebaseio.com`);let he,Se,U=Mp(M,E),ee=U.repoInfo;typeof process<"u"&&process.env&&(Se=process.env[Km]),Se?(he=!0,M=`http://${Se}?ns=${ee.namespace}`,U=Mp(M,E),ee=U.repoInfo):he=!U.repoInfo.secure;const wt=E&&he?new yn(yn.OWNER):new hn(u.name,u.options,a);Sc("Invalid Firebase Database URL",U),I(U.path)||Ao("Database URL must point to the root of a Firebase Database (not including a child path).");const Ot=function rh(u,a,l,f){let E=kc[a.name];E||(E={},kc[a.name]=E);let M=E[u.toURLString()];return M&&Ao("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new Mg(u,tf,l,f),E[u.toURLString()]=M,M}(ee,u,wt,new Vi(u.name,l));return new Zm(Ot,u)}class Zm{constructor(a,l){this._repoInternal=a,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xc(u,a,l){if(u.stats_=go(u.repoInfo_),u.forceRestClient_||lr())u.server_=new fc(u.repoInfo_,(f,E,M,U)=>{_a(u,f,E,M,U)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Rg(u,!0),0);else{if(typeof l<"u"&&null!==l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,X.Wl)(l)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}u.persistentConnection_=new ft(u.repoInfo_,a,(f,E,M,U)=>{_a(u,f,E,M,U)},f=>{Rg(u,f)},f=>{!function qd(u,a){F(a,(l,f)=>{Cp(u,l,f)})}(u,f)},u.authTokenProvider_,u.appCheckProvider_,l),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(f=>{u.server_.refreshAuthToken(f)}),u.appCheckProvider_.addTokenChangeListener(f=>{u.server_.refreshAppCheckToken(f.token)}),u.statsReporter_=function La(u,a){const l=u.toString();return pr[l]||(pr[l]=a()),pr[l]}(u.repoInfo_,()=>new Md(u.stats_,u.server_)),u.infoData_=new vf,u.infoSyncTree_=new Oh({startListening:(f,E,M,U)=>{let ee=[];const he=u.infoData_.getNode(f._path);return he.isEmpty()||(ee=kh(u.infoSyncTree_,f._path,he),setTimeout(()=>{U("ok")},0)),ee},stopListening:()=>{}}),Cp(u,"connected",!1),u.serverSyncTree_=new Oh({startListening:(f,E,M,U)=>(u.server_.listen(f,M,E,(ee,he)=>{const Se=U(ee,he);Lo(u.eventQueue_,f._path,Se)}),[]),stopListening:(f,E)=>{u.server_.unlisten(f,E)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new dl(this._repo,Hr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ia(u,a){const l=kc[a];(!l||l[u.key]!==u)&&Ao(`Database ${a}(${u.repoInfo_}) has already been deleted.`),Of(u),delete l[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(a){null===this._rootInternal&&Ao("Cannot call "+a+" on a deleted database.")}}function ih(){oo.IS_TRANSPORT_INITIALIZED&&$r("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Yf(){ih(),os.forceDisallow()}function Qu(){ih(),Js.forceDisallow(),os.forceAllow()}function Vp(u,a){So(u,a)}const Hp={".sv":"timestamp"};class zg{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ft.prototype.simpleListen=function(u,a){this.sendRequest("q",{p:u},a)},ft.prototype.echo=function(u,a){this.sendRequest("echo",{d:u},a)},function jp(u){Na(Xe.SDK_VERSION),(0,Xe._registerComponent)(new Re.wA("database",(a,{instanceIdentifier:l})=>qf(a.getProvider("app").getImmediate(),a.getProvider("auth-internal"),a.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(ua,"0.14.4",u),(0,Xe.registerVersion)(ua,"0.14.4","esm2017")}();const Gp=new la.Yd("@firebase/database-compat"),qg=function(u){Gp.warn("FIREBASE WARNING: "+u)};class nf{constructor(a){this._delegate=a}cancel(a){(0,X.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,X.Wj)("OnDisconnect.cancel","onComplete",a,!0);const l=this._delegate.cancel();return a&&l.then(()=>a(null),f=>a(f)),l}remove(a){(0,X.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,X.Wj)("OnDisconnect.remove","onComplete",a,!0);const l=this._delegate.remove();return a&&l.then(()=>a(null),f=>a(f)),l}set(a,l){(0,X.Dv)("OnDisconnect.set",1,2,arguments.length),(0,X.Wj)("OnDisconnect.set","onComplete",l,!0);const f=this._delegate.set(a);return l&&f.then(()=>l(null),E=>l(E)),f}setWithPriority(a,l,f){(0,X.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,X.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const E=this._delegate.setWithPriority(a,l);return f&&E.then(()=>f(null),M=>f(M)),E}update(a,l){if((0,X.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(a)){const E={};for(let M=0;M<a.length;++M)E[""+M]=a[M];a=E,qg("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,X.Wj)("OnDisconnect.update","onComplete",l,!0);const f=this._delegate.update(a);return l&&f.then(()=>l(null),E=>l(E)),f}}class ty{constructor(a,l){this.committed=a,this.snapshot=l}toJSON(){return(0,X.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class bu{constructor(a,l){this._database=a,this._delegate=l}val(){return(0,X.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,X.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,X.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,X.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(a){return(0,X.Dv)("DataSnapshot.child",0,1,arguments.length),a=String(a),Tc("DataSnapshot.child","path",a,!1),new bu(this._database,this._delegate.child(a))}hasChild(a){return(0,X.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Tc("DataSnapshot.hasChild","path",a,!1),this._delegate.hasChild(a)}getPriority(){return(0,X.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(a){return(0,X.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,X.Wj)("DataSnapshot.forEach","action",a,!1),this._delegate.forEach(l=>a(new bu(this._database,l)))}hasChildren(){return(0,X.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,X.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,X.Dv)("DataSnapshot.ref",0,0,arguments.length),new ra(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class _o{constructor(a,l){this.database=a,this._delegate=l}on(a,l,f,E){var M;(0,X.Dv)("Query.on",2,4,arguments.length),(0,X.Wj)("Query.on","callback",l,!1);const U=_o.getCancelAndContextArgs_("Query.on",f,E),ee=(Se,wt)=>{l.call(U.context,new bu(this.database,Se),wt)};ee.userCallback=l,ee.context=U.context;const he=null===(M=U.cancel)||void 0===M?void 0:M.bind(U.context);switch(a){case"value":return Jd(this._delegate,ee,he),l;case"child_added":return Op(this._delegate,ee,he),l;case"child_removed":return md(this._delegate,ee,he),l;case"child_changed":return Vf(this._delegate,ee,he),l;case"child_moved":return Xh(this._delegate,ee,he),l;default:throw new Error((0,X.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(a,l,f){if((0,X.Dv)("Query.off",0,3,arguments.length),function(u,a,l){if(void 0!==a)switch(a){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,X.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,a),(0,X.Wj)("Query.off","callback",l,!0),(0,X.lb)("Query.off","context",f,!0),l){const E=()=>{};E.userCallback=l,E.context=f,Qh(this._delegate,a,E)}else Qh(this._delegate,a)}get(){return $g(this._delegate).then(a=>new bu(this.database,a))}once(a,l,f,E){(0,X.Dv)("Query.once",1,4,arguments.length),(0,X.Wj)("Query.once","callback",l,!0);const M=_o.getCancelAndContextArgs_("Query.once",f,E),U=new X.BH,ee=(Se,wt)=>{const Ot=new bu(this.database,Se);l&&l.call(M.context,Ot,wt),U.resolve(Ot)};ee.userCallback=l,ee.context=M.context;const he=Se=>{M.cancel&&M.cancel.call(M.context,Se),U.reject(Se)};switch(a){case"value":Jd(this._delegate,ee,he,{onlyOnce:!0});break;case"child_added":Op(this._delegate,ee,he,{onlyOnce:!0});break;case"child_removed":md(this._delegate,ee,he,{onlyOnce:!0});break;case"child_changed":Vf(this._delegate,ee,he,{onlyOnce:!0});break;case"child_moved":Xh(this._delegate,ee,he,{onlyOnce:!0});break;default:throw new Error((0,X.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return U.promise}limitToFirst(a){return(0,X.Dv)("Query.limitToFirst",1,1,arguments.length),new _o(this.database,Pl(this._delegate,function eh(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new zf(u)}(a)))}limitToLast(a){return(0,X.Dv)("Query.limitToLast",1,1,arguments.length),new _o(this.database,Pl(this._delegate,function Jh(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Bo(u)}(a)))}orderByChild(a){return(0,X.Dv)("Query.orderByChild",1,1,arguments.length),new _o(this.database,Pl(this._delegate,function yd(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Tc("orderByChild","path",u,!1),new Gf(u)}(a)))}orderByKey(){return(0,X.Dv)("Query.orderByKey",0,0,arguments.length),new _o(this.database,Pl(this._delegate,function ef(){return new th}()))}orderByPriority(){return(0,X.Dv)("Query.orderByPriority",0,0,arguments.length),new _o(this.database,Pl(this._delegate,function Lp(){return new Wf}()))}orderByValue(){return(0,X.Dv)("Query.orderByValue",0,0,arguments.length),new _o(this.database,Pl(this._delegate,function Bp(){return new jg}()))}startAt(a=null,l){return(0,X.Dv)("Query.startAt",0,2,arguments.length),new _o(this.database,Pl(this._delegate,function Np(u=null,a){return cd("startAt","key",a,!0),new Vg(u,a)}(a,l)))}startAfter(a=null,l){return(0,X.Dv)("Query.startAfter",0,2,arguments.length),new _o(this.database,Pl(this._delegate,function Fp(u,a){return cd("startAfter","key",a,!0),new Hf(u,a)}(a,l)))}endAt(a=null,l){return(0,X.Dv)("Query.endAt",0,2,arguments.length),new _o(this.database,Pl(this._delegate,function Ug(u,a){return cd("endAt","key",a,!0),new jf(u,a)}(a,l)))}endBefore(a=null,l){return(0,X.Dv)("Query.endBefore",0,2,arguments.length),new _o(this.database,Pl(this._delegate,function kp(u,a){return cd("endBefore","key",a,!0),new Oc(u,a)}(a,l)))}equalTo(a,l){return(0,X.Dv)("Query.equalTo",1,2,arguments.length),new _o(this.database,Pl(this._delegate,function $p(u,a){return cd("equalTo","key",a,!0),new Ym(u,a)}(a,l)))}toString(){return(0,X.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,X.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(a){if((0,X.Dv)("Query.isEqual",1,1,arguments.length),!(a instanceof _o))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(a._delegate)}static getCancelAndContextArgs_(a,l,f){const E={cancel:void 0,context:void 0};if(l&&f)E.cancel=l,(0,X.Wj)(a,"cancel",E.cancel,!0),E.context=f,(0,X.lb)(a,"context",E.context,!0);else if(l)if("object"==typeof l&&null!==l)E.context=l;else{if("function"!=typeof l)throw new Error((0,X.gK)(a,"cancelOrContext")+" must either be a cancel callback or a context object.");E.cancel=l}return E}get ref(){return new ra(this.database,new dl(this._delegate._repo,this._delegate._path))}}class ra extends _o{constructor(a,l){super(a,new na(l._repo,l._path,new yi,!1)),this.database=a,this._delegate=l}getKey(){return(0,X.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(a){return(0,X.Dv)("Reference.child",1,1,arguments.length),"number"==typeof a&&(a=String(a)),new ra(this.database,Rc(this._delegate,a))}getParent(){(0,X.Dv)("Reference.parent",0,0,arguments.length);const a=this._delegate.parent;return a?new ra(this.database,a):null}getRoot(){return(0,X.Dv)("Reference.root",0,0,arguments.length),new ra(this.database,this._delegate.root)}set(a,l){(0,X.Dv)("Reference.set",1,2,arguments.length),(0,X.Wj)("Reference.set","onComplete",l,!0);const f=Pc(this._delegate,a);return l&&f.then(()=>l(null),E=>l(E)),f}update(a,l){if((0,X.Dv)("Reference.update",1,2,arguments.length),Array.isArray(a)){const E={};for(let M=0;M<a.length;++M)E[""+M]=a[M];a=E,qg("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",this._delegate._path),(0,X.Wj)("Reference.update","onComplete",l,!0);const f=Bg(this._delegate,a);return l&&f.then(()=>l(null),E=>l(E)),f}setWithPriority(a,l,f){(0,X.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,X.Wj)("Reference.setWithPriority","onComplete",f,!0);const E=function Pp(u,a,l){if(Wa("setWithPriority",u._path),ta("setWithPriority",a,u._path,!1),bp("setWithPriority",l,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const f=new X.BH;return Pg(u._repo,u._path,a,l,f.wrapCallback(()=>{})),f.promise}(this._delegate,a,l);return f&&E.then(()=>f(null),M=>f(M)),E}remove(a){(0,X.Dv)("Reference.remove",0,1,arguments.length),(0,X.Wj)("Reference.remove","onComplete",a,!0);const l=function gd(u){return Wa("remove",u._path),Pc(u,null)}(this._delegate);return a&&l.then(()=>a(null),f=>a(f)),l}transaction(a,l,f){(0,X.Dv)("Reference.transaction",1,3,arguments.length),(0,X.Wj)("Reference.transaction","transactionUpdate",a,!1),(0,X.Wj)("Reference.transaction","onComplete",l,!0),function(u,a,l,f){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,X.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const E=function sh(u,a,l){var f;if(u=(0,X.m9)(u),Wa("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const E=null===(f=null==l?void 0:l.applyLocally)||void 0===f||f,M=new X.BH,ee=Jd(u,()=>{});return function Fg(u,a,l,f,E,M){wu(u,"transaction on "+a);const U={path:a,update:l,onComplete:f,status:null,order:kl(),applyLocally:M,retryCount:0,unwatcher:E,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ee=kf(u,a,void 0);U.currentInputSnapshot=ee;const he=U.update(ee.val());if(void 0===he)U.unwatcher(),U.currentOutputSnapshotRaw=null,U.currentOutputSnapshotResolved=null,U.onComplete&&U.onComplete(null,!1,U.currentInputSnapshot);else{Kl("transaction failed: Data returned ",he,U.path),U.status=0;const Se=Cc(u.transactionQueueTree_,a),wt=cl(Se)||[];let Ot;wt.push(U),Yu(Se,wt),"object"==typeof he&&null!==he&&(0,X.r3)(he,".priority")?(Ot=(0,X.DV)(he,".priority"),(0,X.hu)(zd(Ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ot=(Sf(u.serverSyncTree_,a)||Sr.EMPTY_NODE).getPriority().val();const Bt=Zl(u),pn=as(he,Ot),kn=Uh(pn,ee,Bt);U.currentOutputSnapshotRaw=pn,U.currentOutputSnapshotResolved=kn,U.currentWriteId=Iu(u);const Mr=bf(u.serverSyncTree_,a,kn,U.currentWriteId,U.applyLocally);Lo(u.eventQueue_,a,Mr),zh(u,u.transactionQueueTree_)}}(u._repo,u._path,a,(he,Se,wt)=>{let Ot=null;he?M.reject(he):(Ot=new pd(wt,new dl(u._repo,u._path),Si),M.resolve(new zg(Se,Ot)))},ee,E),M.promise}(this._delegate,a,{applyLocally:f}).then(M=>new ty(M.committed,new bu(this.database,M.snapshot)));return l&&E.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),E}setPriority(a,l){(0,X.Dv)("Reference.setPriority",1,2,arguments.length),(0,X.Wj)("Reference.setPriority","onComplete",l,!0);const f=function Uf(u,a){u=(0,X.m9)(u),Wa("setPriority",u._path),bp("setPriority",a,!1);const l=new X.BH;return Pg(u._repo,A(u._path,".priority"),a,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,a);return l&&f.then(()=>l(null),E=>l(E)),f}push(a,l){(0,X.Dv)("Reference.push",0,2,arguments.length),(0,X.Wj)("Reference.push","onComplete",l,!0);const f=function Xd(u,a){u=(0,X.m9)(u),Wa("push",u._path),ta("push",a,u._path,!0);const l=dd(u._repo),f=Ff(l),E=Rc(u,f),M=Rc(u,f);let U;return U=null!=a?Pc(M,a).then(()=>M):Promise.resolve(M),E.then=U.then.bind(U),E.catch=U.then.bind(U,void 0),E}(this._delegate,a),E=f.then(U=>new ra(this.database,U));l&&E.then(()=>l(null),U=>l(U));const M=new ra(this.database,f);return M.then=E.then.bind(E),M.catch=E.catch.bind(E,void 0),M}onDisconnect(){return Wa("Reference.onDisconnect",this._delegate._path),new nf(new Zd(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Ju{constructor(a,l){this._delegate=a,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Yf,forceLongPolling:Qu}}useEmulator(a,l,f={}){!function Hg(u,a,l,f={}){(u=(0,X.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&Ao("Cannot call useEmulator() after instance has already been initialized.");const E=u._repoInternal;let M;if(E.repoInfo_.nodeAdmin)f.mockUserToken&&Ao('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new yn(yn.OWNER);else if(f.mockUserToken){const U="string"==typeof f.mockUserToken?f.mockUserToken:(0,X.Sg)(f.mockUserToken,u.app.options.projectId);M=new yn(U)}!function nh(u,a,l,f){u.repoInfo_=new Sa(`${a}:${l}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),f&&(u.authTokenProvider_=f)}(E,a,l,M)}(this._delegate,a,l,f)}ref(a){if((0,X.Dv)("database.ref",0,1,arguments.length),a instanceof ra){const l=qm(this._delegate,a.toString());return new ra(this,l)}{const l=$f(this._delegate,a);return new ra(this,l)}}refFromURL(a){(0,X.Dv)("database.refFromURL",1,1,arguments.length);const f=qm(this._delegate,a);return new ra(this,f)}goOffline(){return(0,X.Dv)("database.goOffline",0,0,arguments.length),function Kf(u){(u=(0,X.m9)(u))._checkNotDeleted("goOffline"),Of(u._repo)}(this._delegate)}goOnline(){return(0,X.Dv)("database.goOnline",0,0,arguments.length),function Qm(u){(u=(0,X.m9)(u))._checkNotDeleted("goOnline"),function hd(u){u.persistentConnection_&&u.persistentConnection_.resume(Hh)}(u._repo)}(this._delegate)}}Ju.ServerValue={TIMESTAMP:function Zf(){return Hp}(),increment:u=>function zp(u){return{".sv":{increment:u}}}(u)};var rf=Object.freeze({__proto__:null,initStandalone:function Yg({app:u,url:a,version:l,customAuthImpl:f,namespace:E,nodeAdmin:M=!1}){Na(l);const U=new Re.zt("auth-internal",new Re.H0("database-standalone"));return U.setComponent(new Re.wA("auth-internal",()=>f,"PRIVATE")),{instance:new Ju(qf(u,U,void 0,a,M),u),namespace:E}}});const Kg=Ju.ServerValue;function Nc(u){return null==u}function tc(u){return"function"==typeof u.set}function Jl(u,a){return tc(a)?a:u.ref(a)}function Cu(u,a){if(function ec(u){return"string"==typeof u}(u))return a.stringCase();if(tc(u))return a.firebaseCase();if(function Xf(u){return"function"==typeof u.exportVal}(u))return a.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Fc(u,a,l="on",f=je.z){return new me.y(E=>{let M=null;return M=u[l](a,(U,ee)=>{f.schedule(()=>{E.next({snapshot:U,prevKey:ee})}),"once"===l&&f.schedule(()=>E.complete())},U=>{f.schedule(()=>E.error(U))}),"on"===l?{unsubscribe(){null!=M&&u.off(a,M)}}:{unsubscribe(){}}}).pipe((0,Ce.U)(E=>{const{snapshot:M,prevKey:U}=E;let ee=null;return M.exists()&&(ee=M.key),{type:a,payload:M,prevKey:U,key:ee}}),(0,br.B)())}function Qf(u,a){const l=u.length;for(let f=0;f<l;f++)if(u[f].payload.key===a)return f;return-1}function ep(u,a){const{payload:l,prevKey:f,key:E}=a,M=Qf(u,E),U=function Jf(u,a){if(Nc(a))return 0;{const l=Qf(u,a);return-1===l?u.length:l+1}}(u,f);switch(a.type){case"value":if(a.payload&&a.payload.exists()){let ee=null;a.payload.forEach(he=>{const Se={payload:he,type:"value",prevKey:ee,key:he.key};return ee=he.key,u=[...u,Se],!1})}return u;case"child_added":if(M>-1){const ee=u[M-1];(ee&&ee.key||null)!==f&&(u=u.filter(he=>he.payload.key!==l.key)).splice(U,0,a)}else{if(null==f)return[a,...u];(u=u.slice()).splice(U,0,a)}return u;case"child_removed":return u.filter(ee=>ee.payload.key!==l.key);case"child_changed":return u.map(ee=>ee.payload.key===E?a:ee);case"child_moved":if(M>-1){const ee=u.splice(M,1)[0];return(u=u.slice()).splice(U,0,ee),u}return u;default:return u}}function tp(u){return(Nc(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function Zg(u,a,l){return function sf(u,a,l){return Fc(u,"value","once",l).pipe((0,ue.w)(f=>{const E=[(0,ve.of)(f)];return a.forEach(M=>E.push(Fc(u,M,"on",l))),(0,sn.T)(...E).pipe((0,oi.R)(ep,[]))}),(0,Zr.x)())}(u,a=tp(a),l)}function oh(u,a,l){const f=(a=tp(a)).map(E=>Fc(u,E,"on",l));return(0,sn.T)(...f)}function Yp(u,a){return function(f,E){return Cu(f,{stringCase:()=>u.child(f)[a](E),firebaseCase:()=>f[a](E),snapshotCase:()=>f.ref[a](E)})}}function ry(u){return function(l){return l?Cu(l,{stringCase:()=>u.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):u.remove()}}function Kp(u,a){return function(){return Fc(u,"value","on",a)}}!function vd(u){u.INTERNAL.registerComponent(new Re.wA("database-compat",(a,{instanceIdentifier:l})=>{const f=a.getProvider("app-compat").getImmediate(),E=a.getProvider("database").getImmediate({identifier:l});return new Ju(E,f)},"PUBLIC").setServiceProps({Reference:ra,Query:_o,Database:Ju,DataSnapshot:bu,enableLogging:Vp,INTERNAL:rf,ServerValue:Kg}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Je.Z);const em=new m.OlP("angularfire2.realtimeDatabaseURL"),tm=new m.OlP("angularfire2.database.use-emulator");let Zp=(()=>{class u{constructor(l,f,E,M,U,ee,he,Se,wt,Ot,Bt,pn,kn,Mr,Xr){this.schedulers=ee;const Li=he,Ts=(0,Be.on)(l,U,f);Se&&(0,we.nw)(Ts,U,wt,Bt,pn,kn,Ot,Mr),this.database=(0,Be.cc)(`${Ts.name}.database.${E}`,"AngularFireDatabase",Ts.name,()=>{const Wr=U.runOutsideAngular(()=>Ts.database(E||void 0));return Li&&Wr.useEmulator(...Li),Wr},[Li])}list(l,f){const E=this.schedulers.ngZone.runOutsideAngular(()=>Jl(this.database,l));let M=E;return f&&(M=f(E)),function Qg(u,a){const l=a.schedulers.outsideAngular,f=a.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Yp(f,"update"),set:Yp(f,"set"),push:E=>f.push(E),remove:ry(f),snapshotChanges:E=>Zg(u,E,l).pipe(ut.iC),stateChanges:E=>oh(u,E,l).pipe(ut.iC),auditTrail:E=>function qp(u,a,l){return function ny(u,a,l){return function Xg(u,a){return Fc(u,"value","on",a).pipe((0,Ce.U)(l=>{let f;return l.payload.forEach(E=>(f=E.key,!1)),{data:l,lastKeyToLoad:f}}))}(u,l).pipe(function pl(...u){const a=(0,Ca.jO)(u);return(0,rt.e)((l,f)=>{const E=u.length,M=new Array(E);let U=u.map(()=>!1),ee=!1;for(let he=0;he<E;he++)(0,hs.Xf)(u[he]).subscribe((0,Dt.x)(f,Se=>{M[he]=Se,!ee&&!U[he]&&(U[he]=!0,(ee=U.every(rs.y))&&(U=null))},Ui.Z));l.subscribe((0,Dt.x)(f,he=>{if(ee){const Se=[he,...M];f.next(a?a(...Se):Se)}}))})}(a),(0,Ce.U)(([E,M])=>{const U=E.lastKeyToLoad,ee=M.map(he=>he.key);return{actions:M,lastKeyToLoad:U,loadedKeys:ee}}),function Fi(u){return(0,rt.e)((a,l)=>{let f=!1,E=0;a.subscribe((0,Dt.x)(l,M=>(f||(f=!u(M,E++)))&&l.next(M)))})}(E=>-1===E.loadedKeys.indexOf(E.lastKeyToLoad)),(0,Ce.U)(E=>E.actions))}(u,oh(u,a).pipe((0,oi.R)((E,M)=>[...E,M],[])),l)}(u,E,l).pipe(ut.iC),valueChanges:(E,M)=>Zg(u,E,l).pipe((0,Ce.U)(ee=>ee.map(he=>M&&M.idField?Object.assign(Object.assign({},he.payload.val()),{[M.idField]:he.key}):he.payload.val())),ut.iC)}}(M,this)}object(l){return function Jg(u,a){return{query:u,snapshotChanges:()=>Kp(u,a.schedulers.outsideAngular)().pipe(ut.iC),update:l=>u.ref.update(l),set:l=>u.ref.set(l),remove:()=>u.ref.remove(),valueChanges:()=>Kp(u,a.schedulers.outsideAngular)().pipe(ut.iC,(0,Ce.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Jl(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(l){return new(l||u)(m.LFG(Be.Dh),m.LFG(Be.xv,8),m.LFG(em,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(ut.HU),m.LFG(tm,8),m.LFG(we.zQ,8),m.LFG(we.Qv,8),m.LFG(we.L6,8),m.LFG(we._Q,8),m.LFG(we.rT,8),m.LFG(we.lh,8),m.LFG(we.f7,8),m.LFG(aa.nm,8))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),iy=(()=>{class u{constructor(){sr.Z.registerVersion("angularfire",ut.q4.full,"rtdb-compat")}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=m.oAB({type:u}),u.\u0275inj=m.cJS({providers:[Zp]}),u})();var Xp=j(433);let Qp=(()=>{class u{}return u.\u0275fac=function(l){return new(l||u)},u.\u0275mod=m.oAB({type:u,bootstrap:[Fe]}),u.\u0275inj=m.cJS({providers:[{provide:J.wN,useClass:fe.r4}],imports:[_.b2,fe.Pc.forRoot(),Xp.u5,Ie,Be.hO.initializeApp(Le_firebaseConfig),vt.yb,we.ww,te,iy]}),u})();(0,m.G48)(),_.q6().bootstrapModule(Qp).catch(u=>console.log(u))},1135:(cn,mt,j)=>{"use strict";j.d(mt,{X:()=>m});var _=j(7579);class m extends _.x{constructor(fe){super(),this._value=fe}get value(){return this.getValue()}_subscribe(fe){const Fe=super._subscribe(fe);return!Fe.closed&&fe.next(this._value),Fe}getValue(){const{hasError:fe,thrownError:Fe,_value:Me}=this;if(fe)throw Fe;return this._throwIfClosed(),Me}next(fe){super.next(this._value=fe)}}},9751:(cn,mt,j)=>{"use strict";j.d(mt,{y:()=>Le});var _=j(930),m=j(727),J=j(8822),fe=j(9635),Fe=j(2416),Me=j(576),Ie=j(2806);let Le=(()=>{class ve{constructor(je){je&&(this._subscribe=je)}lift(je){const rt=new ve;return rt.source=this,rt.operator=je,rt}subscribe(je,rt,Dt){const Ne=function me(ve){return ve&&ve instanceof _.Lv||function we(ve){return ve&&(0,Me.m)(ve.next)&&(0,Me.m)(ve.error)&&(0,Me.m)(ve.complete)}(ve)&&(0,m.Nn)(ve)}(je)?je:new _.Hp(je,rt,Dt);return(0,Ie.x)(()=>{const{operator:Ce,source:ue}=this;Ne.add(Ce?Ce.call(Ne,ue):ue?this._subscribe(Ne):this._trySubscribe(Ne))}),Ne}_trySubscribe(je){try{return this._subscribe(je)}catch(rt){je.error(rt)}}forEach(je,rt){return new(rt=Be(rt))((Dt,Ne)=>{const Ce=new _.Hp({next:ue=>{try{je(ue)}catch(ut){Ne(ut),Ce.unsubscribe()}},error:Ne,complete:Dt});this.subscribe(Ce)})}_subscribe(je){var rt;return null===(rt=this.source)||void 0===rt?void 0:rt.subscribe(je)}[J.L](){return this}pipe(...je){return(0,fe.U)(je)(this)}toPromise(je){return new(je=Be(je))((rt,Dt)=>{let Ne;this.subscribe(Ce=>Ne=Ce,Ce=>Dt(Ce),()=>rt(Ne))})}}return ve.create=Ue=>new ve(Ue),ve})();function Be(ve){var Ue;return null!==(Ue=null!=ve?ve:Fe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(cn,mt,j)=>{"use strict";j.d(mt,{x:()=>Ie});var _=j(9751),m=j(727);const fe=(0,j(3888).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Fe=j(8737),Me=j(2806);let Ie=(()=>{class Be extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(me){const ve=new Le(this,this);return ve.operator=me,ve}_throwIfClosed(){if(this.closed)throw new fe}next(me){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ve of this.currentObservers)ve.next(me)}})}error(me){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=me;const{observers:ve}=this;for(;ve.length;)ve.shift().error(me)}})}complete(){(0,Me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:me}=this;for(;me.length;)me.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var me;return(null===(me=this.observers)||void 0===me?void 0:me.length)>0}_trySubscribe(me){return this._throwIfClosed(),super._trySubscribe(me)}_subscribe(me){return this._throwIfClosed(),this._checkFinalizedStatuses(me),this._innerSubscribe(me)}_innerSubscribe(me){const{hasError:ve,isStopped:Ue,observers:je}=this;return ve||Ue?m.Lc:(this.currentObservers=null,je.push(me),new m.w0(()=>{this.currentObservers=null,(0,Fe.P)(je,me)}))}_checkFinalizedStatuses(me){const{hasError:ve,thrownError:Ue,isStopped:je}=this;ve?me.error(Ue):je&&me.complete()}asObservable(){const me=new _.y;return me.source=this,me}}return Be.create=(we,me)=>new Le(we,me),Be})();class Le extends Ie{constructor(we,me){super(),this.destination=we,this.source=me}next(we){var me,ve;null===(ve=null===(me=this.destination)||void 0===me?void 0:me.next)||void 0===ve||ve.call(me,we)}error(we){var me,ve;null===(ve=null===(me=this.destination)||void 0===me?void 0:me.error)||void 0===ve||ve.call(me,we)}complete(){var we,me;null===(me=null===(we=this.destination)||void 0===we?void 0:we.complete)||void 0===me||me.call(we)}_subscribe(we){var me,ve;return null!==(ve=null===(me=this.source)||void 0===me?void 0:me.subscribe(we))&&void 0!==ve?ve:m.Lc}}},930:(cn,mt,j)=>{"use strict";j.d(mt,{Hp:()=>Dt,Lv:()=>ve});var _=j(576),m=j(727),J=j(2416),fe=j(7849),Fe=j(5032);const Me=Be("C",void 0,void 0);function Be(Je,et,Xe){return{kind:Je,value:et,error:Xe}}var we=j(3410),me=j(2806);class ve extends m.w0{constructor(et){super(),this.isStopped=!1,et?(this.destination=et,(0,m.Nn)(et)&&et.add(this)):this.destination=ut}static create(et,Xe,X){return new Dt(et,Xe,X)}next(et){this.isStopped?ue(function Le(Je){return Be("N",Je,void 0)}(et),this):this._next(et)}error(et){this.isStopped?ue(function Ie(Je){return Be("E",void 0,Je)}(et),this):(this.isStopped=!0,this._error(et))}complete(){this.isStopped?ue(Me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(et){this.destination.next(et)}_error(et){try{this.destination.error(et)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function je(Je,et){return Ue.call(Je,et)}class rt{constructor(et){this.partialObserver=et}next(et){const{partialObserver:Xe}=this;if(Xe.next)try{Xe.next(et)}catch(X){Ne(X)}}error(et){const{partialObserver:Xe}=this;if(Xe.error)try{Xe.error(et)}catch(X){Ne(X)}else Ne(et)}complete(){const{partialObserver:et}=this;if(et.complete)try{et.complete()}catch(Xe){Ne(Xe)}}}class Dt extends ve{constructor(et,Xe,X){let Re;if(super(),(0,_.m)(et)||!et)Re={next:null!=et?et:void 0,error:null!=Xe?Xe:void 0,complete:null!=X?X:void 0};else{let ne;this&&J.v.useDeprecatedNextContext?(ne=Object.create(et),ne.unsubscribe=()=>this.unsubscribe(),Re={next:et.next&&je(et.next,ne),error:et.error&&je(et.error,ne),complete:et.complete&&je(et.complete,ne)}):Re=et}this.destination=new rt(Re)}}function Ne(Je){J.v.useDeprecatedSynchronousErrorHandling?(0,me.O)(Je):(0,fe.h)(Je)}function ue(Je,et){const{onStoppedNotification:Xe}=J.v;Xe&&we.z.setTimeout(()=>Xe(Je,et))}const ut={closed:!0,next:Fe.Z,error:function Ce(Je){throw Je},complete:Fe.Z}},727:(cn,mt,j)=>{"use strict";j.d(mt,{Lc:()=>Me,w0:()=>Fe,Nn:()=>Ie});var _=j(576);const J=(0,j(3888).d)(Be=>function(me){Be(this),this.message=me?`${me.length} errors occurred during unsubscription:\n${me.map((ve,Ue)=>`${Ue+1}) ${ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=me});var fe=j(8737);class Fe{constructor(we){this.initialTeardown=we,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let we;if(!this.closed){this.closed=!0;const{_parentage:me}=this;if(me)if(this._parentage=null,Array.isArray(me))for(const je of me)je.remove(this);else me.remove(this);const{initialTeardown:ve}=this;if((0,_.m)(ve))try{ve()}catch(je){we=je instanceof J?je.errors:[je]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const je of Ue)try{Le(je)}catch(rt){we=null!=we?we:[],rt instanceof J?we=[...we,...rt.errors]:we.push(rt)}}if(we)throw new J(we)}}add(we){var me;if(we&&we!==this)if(this.closed)Le(we);else{if(we instanceof Fe){if(we.closed||we._hasParent(this))return;we._addParent(this)}(this._finalizers=null!==(me=this._finalizers)&&void 0!==me?me:[]).push(we)}}_hasParent(we){const{_parentage:me}=this;return me===we||Array.isArray(me)&&me.includes(we)}_addParent(we){const{_parentage:me}=this;this._parentage=Array.isArray(me)?(me.push(we),me):me?[me,we]:we}_removeParent(we){const{_parentage:me}=this;me===we?this._parentage=null:Array.isArray(me)&&(0,fe.P)(me,we)}remove(we){const{_finalizers:me}=this;me&&(0,fe.P)(me,we),we instanceof Fe&&we._removeParent(this)}}Fe.EMPTY=(()=>{const Be=new Fe;return Be.closed=!0,Be})();const Me=Fe.EMPTY;function Ie(Be){return Be instanceof Fe||Be&&"closed"in Be&&(0,_.m)(Be.remove)&&(0,_.m)(Be.add)&&(0,_.m)(Be.unsubscribe)}function Le(Be){(0,_.m)(Be)?Be():Be.unsubscribe()}},2416:(cn,mt,j)=>{"use strict";j.d(mt,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(cn,mt,j)=>{"use strict";j.d(mt,{z:()=>Fe});var _=j(8189),J=j(7669),fe=j(8996);function Fe(...Me){return function m(){return(0,_.J)(1)}()((0,fe.D)(Me,(0,J.yG)(Me)))}},515:(cn,mt,j)=>{"use strict";j.d(mt,{E:()=>m});const m=new(j(9751).y)(Fe=>Fe.complete())},8996:(cn,mt,j)=>{"use strict";j.d(mt,{D:()=>et});var _=j(8421),m=j(5363),J=j(9468),Me=j(9751),Le=j(2202),Be=j(576),we=j(9672);function ve(Xe,X){if(!Xe)throw new Error("Iterable cannot be null");return new Me.y(Re=>{(0,we.f)(Re,X,()=>{const ne=Xe[Symbol.asyncIterator]();(0,we.f)(Re,X,()=>{ne.next().then(Qe=>{Qe.done?Re.complete():Re.next(Qe.value)})},0,!0)})})}var Ue=j(3670),je=j(8239),rt=j(1144),Dt=j(6495),Ne=j(2206),Ce=j(4532),ue=j(3260);function et(Xe,X){return X?function Je(Xe,X){if(null!=Xe){if((0,Ue.c)(Xe))return function fe(Xe,X){return(0,_.Xf)(Xe).pipe((0,J.R)(X),(0,m.Q)(X))}(Xe,X);if((0,rt.z)(Xe))return function Ie(Xe,X){return new Me.y(Re=>{let ne=0;return X.schedule(function(){ne===Xe.length?Re.complete():(Re.next(Xe[ne++]),Re.closed||this.schedule())})})}(Xe,X);if((0,je.t)(Xe))return function Fe(Xe,X){return(0,_.Xf)(Xe).pipe((0,J.R)(X),(0,m.Q)(X))}(Xe,X);if((0,Ne.D)(Xe))return ve(Xe,X);if((0,Dt.T)(Xe))return function me(Xe,X){return new Me.y(Re=>{let ne;return(0,we.f)(Re,X,()=>{ne=Xe[Le.h](),(0,we.f)(Re,X,()=>{let Qe,ye;try{({value:Qe,done:ye}=ne.next())}catch(qe){return void Re.error(qe)}ye?Re.complete():Re.next(Qe)},0,!0)}),()=>(0,Be.m)(null==ne?void 0:ne.return)&&ne.return()})}(Xe,X);if((0,ue.L)(Xe))return function ut(Xe,X){return ve((0,ue.Q)(Xe),X)}(Xe,X)}throw(0,Ce.z)(Xe)}(Xe,X):(0,_.Xf)(Xe)}},8421:(cn,mt,j)=>{"use strict";j.d(mt,{Xf:()=>Ue});var _=j(655),m=j(1144),J=j(8239),fe=j(9751),Fe=j(3670),Me=j(2206),Ie=j(4532),Le=j(6495),Be=j(3260),we=j(576),me=j(7849),ve=j(8822);function Ue(Je){if(Je instanceof fe.y)return Je;if(null!=Je){if((0,Fe.c)(Je))return function je(Je){return new fe.y(et=>{const Xe=Je[ve.L]();if((0,we.m)(Xe.subscribe))return Xe.subscribe(et);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Je);if((0,m.z)(Je))return function rt(Je){return new fe.y(et=>{for(let Xe=0;Xe<Je.length&&!et.closed;Xe++)et.next(Je[Xe]);et.complete()})}(Je);if((0,J.t)(Je))return function Dt(Je){return new fe.y(et=>{Je.then(Xe=>{et.closed||(et.next(Xe),et.complete())},Xe=>et.error(Xe)).then(null,me.h)})}(Je);if((0,Me.D)(Je))return Ce(Je);if((0,Le.T)(Je))return function Ne(Je){return new fe.y(et=>{for(const Xe of Je)if(et.next(Xe),et.closed)return;et.complete()})}(Je);if((0,Be.L)(Je))return function ue(Je){return Ce((0,Be.Q)(Je))}(Je)}throw(0,Ie.z)(Je)}function Ce(Je){return new fe.y(et=>{(function ut(Je,et){var Xe,X,Re,ne;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Xe=(0,_.KL)(Je);!(X=yield Xe.next()).done;)if(et.next(X.value),et.closed)return}catch(Qe){Re={error:Qe}}finally{try{X&&!X.done&&(ne=Xe.return)&&(yield ne.call(Xe))}finally{if(Re)throw Re.error}}et.complete()})})(Je,et).catch(Xe=>et.error(Xe))})}},6451:(cn,mt,j)=>{"use strict";j.d(mt,{T:()=>Me});var _=j(8189),m=j(8421),J=j(515),fe=j(7669),Fe=j(8996);function Me(...Ie){const Le=(0,fe.yG)(Ie),Be=(0,fe._6)(Ie,1/0),we=Ie;return we.length?1===we.length?(0,m.Xf)(we[0]):(0,_.J)(Be)((0,Fe.D)(we,Le)):J.E}},9646:(cn,mt,j)=>{"use strict";j.d(mt,{of:()=>J});var _=j(7669),m=j(8996);function J(...fe){const Fe=(0,_.yG)(fe);return(0,m.D)(fe,Fe)}},5403:(cn,mt,j)=>{"use strict";j.d(mt,{x:()=>m});var _=j(930);function m(fe,Fe,Me,Ie,Le){return new J(fe,Fe,Me,Ie,Le)}class J extends _.Lv{constructor(Fe,Me,Ie,Le,Be,we){super(Fe),this.onFinalize=Be,this.shouldUnsubscribe=we,this._next=Me?function(me){try{Me(me)}catch(ve){Fe.error(ve)}}:super._next,this._error=Le?function(me){try{Le(me)}catch(ve){Fe.error(ve)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(me){Fe.error(me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Me}=this;super.unsubscribe(),!Me&&(null===(Fe=this.onFinalize)||void 0===Fe||Fe.call(this))}}}},6590:(cn,mt,j)=>{"use strict";j.d(mt,{d:()=>J});var _=j(4482),m=j(5403);function J(fe){return(0,_.e)((Fe,Me)=>{let Ie=!1;Fe.subscribe((0,m.x)(Me,Le=>{Ie=!0,Me.next(Le)},()=>{Ie||Me.next(fe),Me.complete()}))})}},1884:(cn,mt,j)=>{"use strict";j.d(mt,{x:()=>fe});var _=j(4671),m=j(4482),J=j(5403);function fe(Me,Ie=_.y){return Me=null!=Me?Me:Fe,(0,m.e)((Le,Be)=>{let we,me=!0;Le.subscribe((0,J.x)(Be,ve=>{const Ue=Ie(ve);(me||!Me(we,Ue))&&(me=!1,we=Ue,Be.next(ve))}))})}function Fe(Me,Ie){return Me===Ie}},9300:(cn,mt,j)=>{"use strict";j.d(mt,{h:()=>J});var _=j(4482),m=j(5403);function J(fe,Fe){return(0,_.e)((Me,Ie)=>{let Le=0;Me.subscribe((0,m.x)(Ie,Be=>fe.call(Fe,Be,Le++)&&Ie.next(Be)))})}},590:(cn,mt,j)=>{"use strict";j.d(mt,{P:()=>Ie});var _=j(6805),m=j(9300),J=j(5698),fe=j(6590),Fe=j(8068),Me=j(4671);function Ie(Le,Be){const we=arguments.length>=2;return me=>me.pipe(Le?(0,m.h)((ve,Ue)=>Le(ve,Ue,me)):Me.y,(0,J.q)(1),we?(0,fe.d)(Be):(0,Fe.T)(()=>new _.K))}},4004:(cn,mt,j)=>{"use strict";j.d(mt,{U:()=>J});var _=j(4482),m=j(5403);function J(fe,Fe){return(0,_.e)((Me,Ie)=>{let Le=0;Me.subscribe((0,m.x)(Ie,Be=>{Ie.next(fe.call(Fe,Be,Le++))}))})}},8189:(cn,mt,j)=>{"use strict";j.d(mt,{J:()=>J});var _=j(5577),m=j(4671);function J(fe=1/0){return(0,_.z)(m.y,fe)}},5577:(cn,mt,j)=>{"use strict";j.d(mt,{z:()=>Le});var _=j(4004),m=j(8421),J=j(4482),fe=j(9672),Fe=j(5403),Ie=j(576);function Le(Be,we,me=1/0){return(0,Ie.m)(we)?Le((ve,Ue)=>(0,_.U)((je,rt)=>we(ve,je,Ue,rt))((0,m.Xf)(Be(ve,Ue))),me):("number"==typeof we&&(me=we),(0,J.e)((ve,Ue)=>function Me(Be,we,me,ve,Ue,je,rt,Dt){const Ne=[];let Ce=0,ue=0,ut=!1;const Je=()=>{ut&&!Ne.length&&!Ce&&we.complete()},et=X=>Ce<ve?Xe(X):Ne.push(X),Xe=X=>{je&&we.next(X),Ce++;let Re=!1;(0,m.Xf)(me(X,ue++)).subscribe((0,Fe.x)(we,ne=>{null==Ue||Ue(ne),je?et(ne):we.next(ne)},()=>{Re=!0},void 0,()=>{if(Re)try{for(Ce--;Ne.length&&Ce<ve;){const ne=Ne.shift();rt?(0,fe.f)(we,rt,()=>Xe(ne)):Xe(ne)}Je()}catch(ne){we.error(ne)}}))};return Be.subscribe((0,Fe.x)(we,et,()=>{ut=!0,Je()})),()=>{null==Dt||Dt()}}(ve,Ue,Be,me)))}},5363:(cn,mt,j)=>{"use strict";j.d(mt,{Q:()=>fe});var _=j(9672),m=j(4482),J=j(5403);function fe(Fe,Me=0){return(0,m.e)((Ie,Le)=>{Ie.subscribe((0,J.x)(Le,Be=>(0,_.f)(Le,Fe,()=>Le.next(Be),Me),()=>(0,_.f)(Le,Fe,()=>Le.complete(),Me),Be=>(0,_.f)(Le,Fe,()=>Le.error(Be),Me)))})}},5026:(cn,mt,j)=>{"use strict";j.d(mt,{R:()=>fe});var _=j(4482),m=j(5403);function fe(Fe,Me){return(0,_.e)(function J(Fe,Me,Ie,Le,Be){return(we,me)=>{let ve=Ie,Ue=Me,je=0;we.subscribe((0,m.x)(me,rt=>{const Dt=je++;Ue=ve?Fe(Ue,rt,Dt):(ve=!0,rt),Le&&me.next(Ue)},Be&&(()=>{ve&&me.next(Ue),me.complete()})))}}(Fe,Me,arguments.length>=2,!0))}},3099:(cn,mt,j)=>{"use strict";j.d(mt,{B:()=>Fe});var _=j(8421),m=j(7579),J=j(930),fe=j(4482);function Fe(Ie={}){const{connector:Le=(()=>new m.x),resetOnError:Be=!0,resetOnComplete:we=!0,resetOnRefCountZero:me=!0}=Ie;return ve=>{let Ue,je,rt,Dt=0,Ne=!1,Ce=!1;const ue=()=>{null==je||je.unsubscribe(),je=void 0},ut=()=>{ue(),Ue=rt=void 0,Ne=Ce=!1},Je=()=>{const et=Ue;ut(),null==et||et.unsubscribe()};return(0,fe.e)((et,Xe)=>{Dt++,!Ce&&!Ne&&ue();const X=rt=null!=rt?rt:Le();Xe.add(()=>{Dt--,0===Dt&&!Ce&&!Ne&&(je=Me(Je,me))}),X.subscribe(Xe),!Ue&&Dt>0&&(Ue=new J.Hp({next:Re=>X.next(Re),error:Re=>{Ce=!0,ue(),je=Me(ut,Be,Re),X.error(Re)},complete:()=>{Ne=!0,ue(),je=Me(ut,we),X.complete()}}),(0,_.Xf)(et).subscribe(Ue))})(ve)}}function Me(Ie,Le,...Be){if(!0===Le)return void Ie();if(!1===Le)return;const we=new J.Hp({next:()=>{we.unsubscribe(),Ie()}});return Le(...Be).subscribe(we)}},8675:(cn,mt,j)=>{"use strict";j.d(mt,{O:()=>fe});var _=j(7272),m=j(7669),J=j(4482);function fe(...Fe){const Me=(0,m.yG)(Fe);return(0,J.e)((Ie,Le)=>{(Me?(0,_.z)(Fe,Ie,Me):(0,_.z)(Fe,Ie)).subscribe(Le)})}},9468:(cn,mt,j)=>{"use strict";j.d(mt,{R:()=>m});var _=j(4482);function m(J,fe=0){return(0,_.e)((Fe,Me)=>{Me.add(J.schedule(()=>Fe.subscribe(Me),fe))})}},3900:(cn,mt,j)=>{"use strict";j.d(mt,{w:()=>fe});var _=j(8421),m=j(4482),J=j(5403);function fe(Fe,Me){return(0,m.e)((Ie,Le)=>{let Be=null,we=0,me=!1;const ve=()=>me&&!Be&&Le.complete();Ie.subscribe((0,J.x)(Le,Ue=>{null==Be||Be.unsubscribe();let je=0;const rt=we++;(0,_.Xf)(Fe(Ue,rt)).subscribe(Be=(0,J.x)(Le,Dt=>Le.next(Me?Me(Ue,Dt,rt,je++):Dt),()=>{Be=null,ve()}))},()=>{me=!0,ve()}))})}},5698:(cn,mt,j)=>{"use strict";j.d(mt,{q:()=>fe});var _=j(515),m=j(4482),J=j(5403);function fe(Fe){return Fe<=0?()=>_.E:(0,m.e)((Me,Ie)=>{let Le=0;Me.subscribe((0,J.x)(Ie,Be=>{++Le<=Fe&&(Ie.next(Be),Fe<=Le&&Ie.complete())}))})}},8505:(cn,mt,j)=>{"use strict";j.d(mt,{b:()=>Fe});var _=j(576),m=j(4482),J=j(5403),fe=j(4671);function Fe(Me,Ie,Le){const Be=(0,_.m)(Me)||Ie||Le?{next:Me,error:Ie,complete:Le}:Me;return Be?(0,m.e)((we,me)=>{var ve;null===(ve=Be.subscribe)||void 0===ve||ve.call(Be);let Ue=!0;we.subscribe((0,J.x)(me,je=>{var rt;null===(rt=Be.next)||void 0===rt||rt.call(Be,je),me.next(je)},()=>{var je;Ue=!1,null===(je=Be.complete)||void 0===je||je.call(Be),me.complete()},je=>{var rt;Ue=!1,null===(rt=Be.error)||void 0===rt||rt.call(Be,je),me.error(je)},()=>{var je,rt;Ue&&(null===(je=Be.unsubscribe)||void 0===je||je.call(Be)),null===(rt=Be.finalize)||void 0===rt||rt.call(Be)}))}):fe.y}},8068:(cn,mt,j)=>{"use strict";j.d(mt,{T:()=>fe});var _=j(6805),m=j(4482),J=j(5403);function fe(Me=Fe){return(0,m.e)((Ie,Le)=>{let Be=!1;Ie.subscribe((0,J.x)(Le,we=>{Be=!0,Le.next(we)},()=>Be?Le.complete():Le.error(Me())))})}function Fe(){return new _.K}},4408:(cn,mt,j)=>{"use strict";j.d(mt,{o:()=>Fe});var _=j(727);class m extends _.w0{constructor(Ie,Le){super()}schedule(Ie,Le=0){return this}}const J={setInterval(Me,Ie,...Le){const{delegate:Be}=J;return null!=Be&&Be.setInterval?Be.setInterval(Me,Ie,...Le):setInterval(Me,Ie,...Le)},clearInterval(Me){const{delegate:Ie}=J;return((null==Ie?void 0:Ie.clearInterval)||clearInterval)(Me)},delegate:void 0};var fe=j(8737);class Fe extends m{constructor(Ie,Le){super(Ie,Le),this.scheduler=Ie,this.work=Le,this.pending=!1}schedule(Ie,Le=0){var Be;if(this.closed)return this;this.state=Ie;const we=this.id,me=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(me,we,Le)),this.pending=!0,this.delay=Le,this.id=null!==(Be=this.id)&&void 0!==Be?Be:this.requestAsyncId(me,this.id,Le),this}requestAsyncId(Ie,Le,Be=0){return J.setInterval(Ie.flush.bind(Ie,this),Be)}recycleAsyncId(Ie,Le,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Le;null!=Le&&J.clearInterval(Le)}execute(Ie,Le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(Ie,Le);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,Le){let we,Be=!1;try{this.work(Ie)}catch(me){Be=!0,we=me||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),we}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:Le}=this,{actions:Be}=Le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(Be,this),null!=Ie&&(this.id=this.recycleAsyncId(Le,Ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(cn,mt,j)=>{"use strict";j.d(mt,{v:()=>J});var _=j(6063);class m{constructor(Fe,Me=m.now){this.schedulerActionCtor=Fe,this.now=Me}schedule(Fe,Me=0,Ie){return new this.schedulerActionCtor(this,Fe).schedule(Ie,Me)}}m.now=_.l.now;class J extends m{constructor(Fe,Me=m.now){super(Fe,Me),this.actions=[],this._active=!1}flush(Fe){const{actions:Me}=this;if(this._active)return void Me.push(Fe);let Ie;this._active=!0;do{if(Ie=Fe.execute(Fe.state,Fe.delay))break}while(Fe=Me.shift());if(this._active=!1,Ie){for(;Fe=Me.shift();)Fe.unsubscribe();throw Ie}}}},4986:(cn,mt,j)=>{"use strict";j.d(mt,{z:()=>J});var _=j(4408);const J=new(j(7565).v)(_.o)},6063:(cn,mt,j)=>{"use strict";j.d(mt,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(cn,mt,j)=>{"use strict";j.d(mt,{z:()=>_});const _={setTimeout(m,J,...fe){const{delegate:Fe}=_;return null!=Fe&&Fe.setTimeout?Fe.setTimeout(m,J,...fe):setTimeout(m,J,...fe)},clearTimeout(m){const{delegate:J}=_;return((null==J?void 0:J.clearTimeout)||clearTimeout)(m)},delegate:void 0}},2202:(cn,mt,j)=>{"use strict";j.d(mt,{h:()=>m});const m=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(cn,mt,j)=>{"use strict";j.d(mt,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(cn,mt,j)=>{"use strict";j.d(mt,{K:()=>m});const m=(0,j(3888).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(cn,mt,j)=>{"use strict";j.d(mt,{_6:()=>Me,jO:()=>fe,yG:()=>Fe});var _=j(576);function J(Ie){return Ie[Ie.length-1]}function fe(Ie){return(0,_.m)(J(Ie))?Ie.pop():void 0}function Fe(Ie){return function m(Ie){return Ie&&(0,_.m)(Ie.schedule)}(J(Ie))?Ie.pop():void 0}function Me(Ie,Le){return"number"==typeof J(Ie)?Ie.pop():Le}},4742:(cn,mt,j)=>{"use strict";j.d(mt,{D:()=>Fe});const{isArray:_}=Array,{getPrototypeOf:m,prototype:J,keys:fe}=Object;function Fe(Ie){if(1===Ie.length){const Le=Ie[0];if(_(Le))return{args:Le,keys:null};if(function Me(Ie){return Ie&&"object"==typeof Ie&&m(Ie)===J}(Le)){const Be=fe(Le);return{args:Be.map(we=>Le[we]),keys:Be}}}return{args:Ie,keys:null}}},8737:(cn,mt,j)=>{"use strict";function _(m,J){if(m){const fe=m.indexOf(J);0<=fe&&m.splice(fe,1)}}j.d(mt,{P:()=>_})},3888:(cn,mt,j)=>{"use strict";function _(m){const fe=m(Fe=>{Error.call(Fe),Fe.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}j.d(mt,{d:()=>_})},1810:(cn,mt,j)=>{"use strict";function _(m,J){return m.reduce((fe,Fe,Me)=>(fe[Fe]=J[Me],fe),{})}j.d(mt,{n:()=>_})},2806:(cn,mt,j)=>{"use strict";j.d(mt,{O:()=>fe,x:()=>J});var _=j(2416);let m=null;function J(Fe){if(_.v.useDeprecatedSynchronousErrorHandling){const Me=!m;if(Me&&(m={errorThrown:!1,error:null}),Fe(),Me){const{errorThrown:Ie,error:Le}=m;if(m=null,Ie)throw Le}}else Fe()}function fe(Fe){_.v.useDeprecatedSynchronousErrorHandling&&m&&(m.errorThrown=!0,m.error=Fe)}},9672:(cn,mt,j)=>{"use strict";function _(m,J,fe,Fe=0,Me=!1){const Ie=J.schedule(function(){fe(),Me?m.add(this.schedule(null,Fe)):this.unsubscribe()},Fe);if(m.add(Ie),!Me)return Ie}j.d(mt,{f:()=>_})},4671:(cn,mt,j)=>{"use strict";function _(m){return m}j.d(mt,{y:()=>_})},1144:(cn,mt,j)=>{"use strict";j.d(mt,{z:()=>_});const _=m=>m&&"number"==typeof m.length&&"function"!=typeof m},2206:(cn,mt,j)=>{"use strict";j.d(mt,{D:()=>m});var _=j(576);function m(J){return Symbol.asyncIterator&&(0,_.m)(null==J?void 0:J[Symbol.asyncIterator])}},576:(cn,mt,j)=>{"use strict";function _(m){return"function"==typeof m}j.d(mt,{m:()=>_})},3670:(cn,mt,j)=>{"use strict";j.d(mt,{c:()=>J});var _=j(8822),m=j(576);function J(fe){return(0,m.m)(fe[_.L])}},6495:(cn,mt,j)=>{"use strict";j.d(mt,{T:()=>J});var _=j(2202),m=j(576);function J(fe){return(0,m.m)(null==fe?void 0:fe[_.h])}},8239:(cn,mt,j)=>{"use strict";j.d(mt,{t:()=>m});var _=j(576);function m(J){return(0,_.m)(null==J?void 0:J.then)}},3260:(cn,mt,j)=>{"use strict";j.d(mt,{L:()=>fe,Q:()=>J});var _=j(655),m=j(576);function J(Fe){return(0,_.FC)(this,arguments,function*(){const Ie=Fe.getReader();try{for(;;){const{value:Le,done:Be}=yield(0,_.qq)(Ie.read());if(Be)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Le)}}finally{Ie.releaseLock()}})}function fe(Fe){return(0,m.m)(null==Fe?void 0:Fe.getReader)}},4482:(cn,mt,j)=>{"use strict";j.d(mt,{A:()=>m,e:()=>J});var _=j(576);function m(fe){return(0,_.m)(null==fe?void 0:fe.lift)}function J(fe){return Fe=>{if(m(Fe))return Fe.lift(function(Me){try{return fe(Me,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(cn,mt,j)=>{"use strict";j.d(mt,{Z:()=>fe});var _=j(4004);const{isArray:m}=Array;function fe(Fe){return(0,_.U)(Me=>function J(Fe,Me){return m(Me)?Fe(...Me):Fe(Me)}(Fe,Me))}},5032:(cn,mt,j)=>{"use strict";function _(){}j.d(mt,{Z:()=>_})},9635:(cn,mt,j)=>{"use strict";j.d(mt,{U:()=>J,z:()=>m});var _=j(4671);function m(...fe){return J(fe)}function J(fe){return 0===fe.length?_.y:1===fe.length?fe[0]:function(Me){return fe.reduce((Ie,Le)=>Le(Ie),Me)}}},7849:(cn,mt,j)=>{"use strict";j.d(mt,{h:()=>J});var _=j(2416),m=j(3410);function J(fe){m.z.setTimeout(()=>{const{onUnhandledError:Fe}=_.v;if(!Fe)throw fe;Fe(fe)})}},4532:(cn,mt,j)=>{"use strict";function _(m){return new TypeError(`You provided ${null!==m&&"object"==typeof m?"an invalid object":`'${m}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(mt,{z:()=>_})},863:(cn,mt,j)=>{var _={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,53],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[8372,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,8592,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,8594,9230],"./ion-datetime_3.entry.js":[4959,8594,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,8034],"./ion-input.entry.js":[1217,8592,1217],"./ion-item-option_3.entry.js":[2933,8592,2933],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,8592,4432],"./ion-range.entry.js":[1709,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,3326],"./ion-reorder_2.entry.js":[3583,8592,3583],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,8592,2773],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,8592,6560],"./ion-toast.entry.js":[6120,6120],"./ion-toggle.entry.js":[5168,8592,5168]};function m(J){if(!j.o(_,J))return Promise.resolve().then(()=>{var Me=new Error("Cannot find module '"+J+"'");throw Me.code="MODULE_NOT_FOUND",Me});var fe=_[J],Fe=fe[0];return Promise.all(fe.slice(1).map(j.e)).then(()=>j(Fe))}m.keys=()=>Object.keys(_),m.id=863,cn.exports=m},655:(cn,mt,j)=>{"use strict";function fe(ze,_t){var ot={};for(var xe in ze)Object.prototype.hasOwnProperty.call(ze,xe)&&_t.indexOf(xe)<0&&(ot[xe]=ze[xe]);if(null!=ze&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(xe=Object.getOwnPropertySymbols(ze);Ae<xe.length;Ae++)_t.indexOf(xe[Ae])<0&&Object.prototype.propertyIsEnumerable.call(ze,xe[Ae])&&(ot[xe[Ae]]=ze[xe[Ae]])}return ot}function Fe(ze,_t,ot,xe){var it,Ae=arguments.length,Oe=Ae<3?_t:null===xe?xe=Object.getOwnPropertyDescriptor(_t,ot):xe;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Oe=Reflect.decorate(ze,_t,ot,xe);else for(var ht=ze.length-1;ht>=0;ht--)(it=ze[ht])&&(Oe=(Ae<3?it(Oe):Ae>3?it(_t,ot,Oe):it(_t,ot))||Oe);return Ae>3&&Oe&&Object.defineProperty(_t,ot,Oe),Oe}function ve(ze,_t,ot,xe){return new(ot||(ot=Promise))(function(Oe,it){function ht(vn){try{Vt(xe.next(vn))}catch(gt){it(gt)}}function Zt(vn){try{Vt(xe.throw(vn))}catch(gt){it(gt)}}function Vt(vn){vn.done?Oe(vn.value):function Ae(Oe){return Oe instanceof ot?Oe:new ot(function(it){it(Oe)})}(vn.value).then(ht,Zt)}Vt((xe=xe.apply(ze,_t||[])).next())})}function Je(ze){return this instanceof Je?(this.v=ze,this):new Je(ze)}function et(ze,_t,ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,xe=ot.apply(ze,_t||[]),Oe=[];return Ae={},it("next"),it("throw"),it("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function it(Ee){xe[Ee]&&(Ae[Ee]=function(bt){return new Promise(function(nn,fn){Oe.push([Ee,bt,nn,fn])>1||ht(Ee,bt)})})}function ht(Ee,bt){try{!function Zt(Ee){Ee.value instanceof Je?Promise.resolve(Ee.value.v).then(Vt,vn):gt(Oe[0][2],Ee)}(xe[Ee](bt))}catch(nn){gt(Oe[0][3],nn)}}function Vt(Ee){ht("next",Ee)}function vn(Ee){ht("throw",Ee)}function gt(Ee,bt){Ee(bt),Oe.shift(),Oe.length&&ht(Oe[0][0],Oe[0][1])}}function X(ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ot,_t=ze[Symbol.asyncIterator];return _t?_t.call(ze):(ze=function Dt(ze){var _t="function"==typeof Symbol&&Symbol.iterator,ot=_t&&ze[_t],xe=0;if(ot)return ot.call(ze);if(ze&&"number"==typeof ze.length)return{next:function(){return ze&&xe>=ze.length&&(ze=void 0),{value:ze&&ze[xe++],done:!ze}}};throw new TypeError(_t?"Object is not iterable.":"Symbol.iterator is not defined.")}(ze),ot={},xe("next"),xe("throw"),xe("return"),ot[Symbol.asyncIterator]=function(){return this},ot);function xe(Oe){ot[Oe]=ze[Oe]&&function(it){return new Promise(function(ht,Zt){!function Ae(Oe,it,ht,Zt){Promise.resolve(Zt).then(function(Vt){Oe({value:Vt,done:ht})},it)}(ht,Zt,(it=ze[Oe](it)).done,it.value)})}}}j.d(mt,{FC:()=>et,KL:()=>X,_T:()=>fe,gn:()=>Fe,mG:()=>ve,qq:()=>Je})},6895:(cn,mt,j)=>{"use strict";j.d(mt,{Do:()=>ue,EM:()=>Ms,HT:()=>fe,JF:()=>bo,K0:()=>Me,Mx:()=>Gi,O5:()=>_e,PM:()=>oa,S$:()=>Dt,V_:()=>Be,Ye:()=>ut,b0:()=>Ce,bD:()=>Oo,ez:()=>wo,q:()=>J,sg:()=>Lr,tP:()=>qn,w_:()=>Fe});var _=j(4650);let m=null;function J(){return m}function fe(F){m||(m=F)}class Fe{}const Me=new _.OlP("DocumentToken");let Ie=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=_.Yz7({token:F,factory:function(){return function Le(){return(0,_.LFG)(we)}()},providedIn:"platform"}),F})();const Be=new _.OlP("Location Initialized");let we=(()=>{class F extends Ie{constructor(V){super(),this._doc=V,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(V){const oe=J().getGlobalEventTarget(this._doc,"window");return oe.addEventListener("popstate",V,!1),()=>oe.removeEventListener("popstate",V)}onHashChange(V){const oe=J().getGlobalEventTarget(this._doc,"window");return oe.addEventListener("hashchange",V,!1),()=>oe.removeEventListener("hashchange",V)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(V){this._location.pathname=V}pushState(V,oe,be){me()?this._history.pushState(V,oe,be):this._location.hash=be}replaceState(V,oe,be){me()?this._history.replaceState(V,oe,be):this._location.hash=be}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(Me))},F.\u0275prov=_.Yz7({token:F,factory:function(){return function ve(){return new we((0,_.LFG)(Me))}()},providedIn:"platform"}),F})();function me(){return!!window.history.pushState}function Ue(F,Z){if(0==F.length)return Z;if(0==Z.length)return F;let V=0;return F.endsWith("/")&&V++,Z.startsWith("/")&&V++,2==V?F+Z.substring(1):1==V?F+Z:F+"/"+Z}function je(F){const Z=F.match(/#|\?|$/),V=Z&&Z.index||F.length;return F.slice(0,V-("/"===F[V-1]?1:0))+F.slice(V)}function rt(F){return F&&"?"!==F[0]?"?"+F:F}let Dt=(()=>{class F{historyGo(V){throw new Error("Not implemented")}}return F.\u0275fac=function(V){return new(V||F)},F.\u0275prov=_.Yz7({token:F,factory:function(){return(0,_.f3M)(Ce)},providedIn:"root"}),F})();const Ne=new _.OlP("appBaseHref");let Ce=(()=>{class F extends Dt{constructor(V,oe){var be,Mt,zt;super(),this._platformLocation=V,this._removeListenerFns=[],this._baseHref=null!==(be=null!==(Mt=null!=oe?oe:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Mt?Mt:null===(zt=(0,_.f3M)(Me).location)||void 0===zt?void 0:zt.origin)&&void 0!==be?be:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return Ue(this._baseHref,V)}path(V=!1){const oe=this._platformLocation.pathname+rt(this._platformLocation.search),be=this._platformLocation.hash;return be&&V?`${oe}${be}`:oe}pushState(V,oe,be,Mt){const zt=this.prepareExternalUrl(be+rt(Mt));this._platformLocation.pushState(V,oe,zt)}replaceState(V,oe,be,Mt){const zt=this.prepareExternalUrl(be+rt(Mt));this._platformLocation.replaceState(V,oe,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var oe,be;null===(oe=(be=this._platformLocation).historyGo)||void 0===oe||oe.call(be,V)}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(Ie),_.LFG(Ne,8))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),ue=(()=>{class F extends Dt{constructor(V,oe){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=oe&&(this._baseHref=oe)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let oe=this._platformLocation.hash;return null==oe&&(oe="#"),oe.length>0?oe.substring(1):oe}prepareExternalUrl(V){const oe=Ue(this._baseHref,V);return oe.length>0?"#"+oe:oe}pushState(V,oe,be,Mt){let zt=this.prepareExternalUrl(be+rt(Mt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState(V,oe,zt)}replaceState(V,oe,be,Mt){let zt=this.prepareExternalUrl(be+rt(Mt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState(V,oe,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(V=0){var oe,be;null===(oe=(be=this._platformLocation).historyGo)||void 0===oe||oe.call(be,V)}}return F.\u0275fac=function(V){return new(V||F)(_.LFG(Ie),_.LFG(Ne,8))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac}),F})(),ut=(()=>{class F{constructor(V){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=V;const oe=this._locationStrategy.getBaseHref();this._basePath=function X(F){if(new RegExp("^(https?:)?//").test(F)){const[,V]=F.split(/\/\/[^\/]+/);return V}return F}(je(Xe(oe))),this._locationStrategy.onPopState(be=>{this._subject.emit({url:this.path(!0),pop:!0,state:be.state,type:be.type})})}ngOnDestroy(){var V;null===(V=this._urlChangeSubscription)||void 0===V||V.unsubscribe(),this._urlChangeListeners=[]}path(V=!1){return this.normalize(this._locationStrategy.path(V))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(V,oe=""){return this.path()==this.normalize(V+rt(oe))}normalize(V){return F.stripTrailingSlash(function et(F,Z){if(!F||!Z.startsWith(F))return Z;const V=Z.substring(F.length);return""===V||["/",";","?","#"].includes(V[0])?V:Z}(this._basePath,Xe(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._locationStrategy.prepareExternalUrl(V)}go(V,oe="",be=null){this._locationStrategy.pushState(be,"",V,oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+rt(oe)),be)}replaceState(V,oe="",be=null){this._locationStrategy.replaceState(be,"",V,oe),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+rt(oe)),be)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(V=0){var oe,be;null===(oe=(be=this._locationStrategy).historyGo)||void 0===oe||oe.call(be,V)}onUrlChange(V){return this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(oe=>{this._notifyUrlChangeListeners(oe.url,oe.state)})),()=>{const oe=this._urlChangeListeners.indexOf(V);var be;this._urlChangeListeners.splice(oe,1),0===this._urlChangeListeners.length&&(null===(be=this._urlChangeSubscription)||void 0===be||be.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(V="",oe){this._urlChangeListeners.forEach(be=>be(V,oe))}subscribe(V,oe,be){return this._subject.subscribe({next:V,error:oe,complete:be})}}return F.normalizeQueryParams=rt,F.joinWithSlash=Ue,F.stripTrailingSlash=je,F.\u0275fac=function(V){return new(V||F)(_.LFG(Dt))},F.\u0275prov=_.Yz7({token:F,factory:function(){return function Je(){return new ut((0,_.LFG)(Dt))}()},providedIn:"root"}),F})();function Xe(F){return F.replace(/\/index.html$/,"")}function Gi(F,Z){Z=encodeURIComponent(Z);for(const V of F.split(";")){const oe=V.indexOf("="),[be,Mt]=-1==oe?[V,""]:[V.slice(0,oe),V.slice(oe+1)];if(be.trim()===Z)return decodeURIComponent(Mt)}return null}class Ri{constructor(Z,V,oe,be){this.$implicit=Z,this.ngForOf=V,this.index=oe,this.count=be}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Lr=(()=>{class F{set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}constructor(V,oe,be){this._viewContainer=V,this._template=oe,this._differs=be,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const oe=this._viewContainer;V.forEachOperation((be,Mt,zt)=>{if(null==be.previousIndex)oe.createEmbeddedView(this._template,new Ri(be.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)oe.remove(null===Mt?void 0:Mt);else if(null!==Mt){const Vn=oe.get(Mt);oe.move(Vn,zt),vi(Vn,be)}});for(let be=0,Mt=oe.length;be<Mt;be++){const Vn=oe.get(be).context;Vn.index=be,Vn.count=Mt,Vn.ngForOf=this._ngForOf}V.forEachIdentityChange(be=>{vi(oe.get(be.currentIndex),be)})}static ngTemplateContextGuard(V,oe){return!0}}return F.\u0275fac=function(V){return new(V||F)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},F.\u0275dir=_.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function vi(F,Z){F.context.$implicit=Z.item}let _e=(()=>{class F{constructor(V,oe){this._viewContainer=V,this._context=new st,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=oe}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){le("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){le("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,oe){return!0}}return F.\u0275fac=function(V){return new(V||F)(_.Y36(_.s_b),_.Y36(_.Rgc))},F.\u0275dir=_.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class st{constructor(){this.$implicit=null,this.ngIf=null}}function le(F,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,_.AaK)(Z)}'.`)}let qn=(()=>{class F{constructor(V){this._viewContainerRef=V,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(V){if(V.ngTemplateOutlet||V.ngTemplateOutletInjector){const oe=this._viewContainerRef;if(this._viewRef&&oe.remove(oe.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:be,ngTemplateOutletContext:Mt,ngTemplateOutletInjector:zt}=this;this._viewRef=oe.createEmbeddedView(be,Mt,zt?{injector:zt}:void 0)}else this._viewRef=null}else this._viewRef&&V.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function(V){return new(V||F)(_.Y36(_.s_b))},F.\u0275dir=_.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_.TTD]}),F})(),wo=(()=>{class F{}return F.\u0275fac=function(V){return new(V||F)},F.\u0275mod=_.oAB({type:F}),F.\u0275inj=_.cJS({}),F})();const Oo="browser",Ci="server";function oa(F){return F===Ci}let Ms=(()=>{class F{}return F.\u0275prov=(0,_.Yz7)({token:F,providedIn:"root",factory:()=>new ho((0,_.LFG)(Me),window)}),F})();class ho{constructor(Z,V){this.document=Z,this.window=V,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const V=function Rs(F,Z){const V=F.getElementById(Z)||F.getElementsByName(Z)[0];if(V)return V;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const oe=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let be=oe.currentNode;for(;be;){const Mt=be.shadowRoot;if(Mt){const zt=Mt.getElementById(Z)||Mt.querySelector(`[name="${Z}"]`);if(zt)return zt}be=oe.nextNode()}}return null}(this.document,Z);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Z)}}scrollToElement(Z){const V=Z.getBoundingClientRect(),oe=V.left+this.window.pageXOffset,be=V.top+this.window.pageYOffset,Mt=this.offset();this.window.scrollTo(oe-Mt[0],be-Mt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=ws(this.window.history)||ws(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ws(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class bo{}},4650:(cn,mt,j)=>{"use strict";j.d(mt,{$8M:()=>Il,$WT:()=>Kn,$Z:()=>kp,AFp:()=>vE,AaK:()=>Le,AsE:()=>lf,CHM:()=>te,CRH:()=>K0,CZH:()=>Jv,CqO:()=>cm,D6c:()=>Mw,EJc:()=>GI,EpF:()=>Jy,F$t:()=>pm,F4k:()=>um,FYo:()=>Gd,FiY:()=>Ir,G48:()=>hw,Gf:()=>q0,GfV:()=>Ag,GkF:()=>fy,Gpc:()=>me,Hsn:()=>gm,JOm:()=>Ki,KtG:()=>vt,LFG:()=>an,LMc:()=>Pw,Lbi:()=>jI,Lck:()=>t0,MAs:()=>om,MMx:()=>d,NdJ:()=>eg,OlP:()=>Oi,Oqu:()=>Id,P3R:()=>Tf,PXZ:()=>ow,Q6J:()=>uy,QGY:()=>ap,Qsj:()=>bp,R0b:()=>$c,RDi:()=>nd,Rgc:()=>Wy,SBq:()=>Kl,Sil:()=>qI,Suo:()=>Y0,TTD:()=>Ms,TgZ:()=>Jp,W1O:()=>J0,X6Q:()=>dw,XFs:()=>tn,Xpm:()=>hr,Xts:()=>Af,Y36:()=>Oc,YKP:()=>Hy,YNc:()=>sm,Yjl:()=>Mi,Yz7:()=>gt,Z0I:()=>fn,ZZ4:()=>S0,_Bn:()=>Yv,_UZ:()=>am,_Vd:()=>ud,_c5:()=>Aw,_uU:()=>yv,aQg:()=>A0,c2e:()=>HI,cJS:()=>bt,cg1:()=>xm,dDg:()=>nw,dqk:()=>On,eFA:()=>RE,eJc:()=>d0,ekj:()=>wy,eoX:()=>SE,f3M:()=>Cn,g9A:()=>EE,h0i:()=>gf,hGG:()=>xw,hij:()=>af,iGM:()=>W0,ifc:()=>It,ip1:()=>yE,jDz:()=>w,kL8:()=>Ty,lG2:()=>es,lqb:()=>Eu,lri:()=>DE,n5z:()=>sc,oAB:()=>gi,oxw:()=>my,q4F:()=>Wa,qLn:()=>Lo,qOj:()=>Zp,qZA:()=>Ed,rWj:()=>TE,sBO:()=>fw,s_b:()=>Zv,soG:()=>e_,tb:()=>xE,tp0:()=>$,uIk:()=>_d,vHH:()=>Ne,vpe:()=>Ih,wAp:()=>wr,xp6:()=>vo,z2F:()=>t_,zSh:()=>Bh,zs3:()=>Xl});var _=j(7579),m=j(727),J=j(9751),fe=j(6451),Fe=j(3099);function Me(n){for(let r in n)if(n[r]===Me)return r;throw Error("Could not find renamed property on target object.")}function Ie(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Le(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Le).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const we=Me({__forward_ref__:Me});function me(n){return n.__forward_ref__=me,n.toString=function(){return Le(this())},n}function ve(n){return Ue(n)?n():n}function Ue(n){return"function"==typeof n&&n.hasOwnProperty(we)&&n.__forward_ref__===me}function je(n){return n&&!!n.\u0275providers}const Dt="https://g.co/ng/security#xss";class Ne extends Error{constructor(r,o){super(Ce(r,o)),this.code=r}}function Ce(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}function ue(n){return"string"==typeof n?n:null==n?"":String(n)}function X(n,r){throw new Ne(-201,!1)}function it(n,r){null==n&&function ht(n,r,o,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${o} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function gt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function bt(n){return{providers:n.providers||[],imports:n.imports||[]}}function nn(n){return Mn(n,Hn)||Mn(n,En)}function fn(n){return null!==nn(n)}function Mn(n,r){return n.hasOwnProperty(r)?n[r]:null}function Tn(n){return n&&(n.hasOwnProperty(or)||n.hasOwnProperty(gr))?n[or]:null}const Hn=Me({\u0275prov:Me}),or=Me({\u0275inj:Me}),En=Me({ngInjectableDef:Me}),gr=Me({ngInjectorDef:Me});var tn=(()=>((tn=tn||{})[tn.Default=0]="Default",tn[tn.Host=1]="Host",tn[tn.Self=2]="Self",tn[tn.SkipSelf=4]="SkipSelf",tn[tn.Optional=8]="Optional",tn))();let Yr;function Vr(n){const r=Yr;return Yr=n,r}function di(n,r,o){const c=nn(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&tn.Optional?null:void 0!==r?r:void X(Le(n))}const On=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yr={},ir="__NG_DI_FLAG__",Kr="ngTempTokenPath",hi="ngTokenPath",wi=/\n/gm,Dr="\u0275",si="__source";let nr;function Wn(n){const r=nr;return nr=n,r}function fi(n,r=tn.Default){if(void 0===nr)throw new Ne(-203,!1);return null===nr?di(n,void 0,r):nr.get(n,r&tn.Optional?null:void 0,r)}function an(n,r=tn.Default){return(function Rr(){return Yr}()||fi)(ve(n),r)}function Cn(n,r=tn.Default){return an(n,Ln(r))}function Ln(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function In(n){const r=[];for(let o=0;o<n.length;o++){const c=ve(n[o]);if(Array.isArray(c)){if(0===c.length)throw new Ne(900,!1);let h,v=tn.Default;for(let D=0;D<c.length;D++){const N=c[D],B=Er(N);"number"==typeof B?-1===B?h=N.token:v|=B:h=N}r.push(an(h,v))}else r.push(an(c))}return r}function $n(n,r){return n[ir]=r,n.prototype[ir]=r,n}function Er(n){return n[ir]}function Ke(n){return{toString:n}.toString()}var Nt=(()=>((Nt=Nt||{})[Nt.OnPush=0]="OnPush",Nt[Nt.Default=1]="Default",Nt))(),It=(()=>{return(n=It||(It={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",It;var n})();const wn={},We=[],He=Me({\u0275cmp:Me}),De=Me({\u0275dir:Me}),Et=Me({\u0275pipe:Me}),Lt=Me({\u0275mod:Me}),qt=Me({\u0275fac:Me}),Bn=Me({__NG_ELEMENT_ID__:Me});let Rn=0;function hr(n){return Ke(()=>{const r=Br(n),o={...r,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Nt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||It.Emulated,id:"c"+Rn++,styles:n.styles||We,_:null,schemas:n.schemas||null,tView:null};Gi(o);const c=n.dependencies;return o.directiveDefs=us(c,!1),o.pipeDefs=us(c,!0),o})}function pi(n){return ar(n)||Or(n)}function Xi(n){return null!==n}function gi(n){return Ke(()=>({type:n.type,bootstrap:n.bootstrap||We,declarations:n.declarations||We,imports:n.imports||We,exports:n.exports||We,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Tr(n,r){if(null==n)return wn;const o={};for(const c in n)if(n.hasOwnProperty(c)){let h=n[c],v=h;Array.isArray(h)&&(v=h[1],h=h[0]),o[h]=c,r&&(r[h]=v)}return o}function es(n){return Ke(()=>{const r=Br(n);return Gi(r),r})}function Mi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function ar(n){return n[He]||null}function Or(n){return n[De]||null}function tr(n){return n[Et]||null}function Kn(n){const r=ar(n)||Or(n)||tr(n);return null!==r&&r.standalone}function xr(n,r){const o=n[Lt]||null;if(!o&&!0===r)throw new Error(`Type ${Le(n)} does not have '\u0275mod' property.`);return o}function Br(n){const r={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||We,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Tr(n.inputs,r),outputs:Tr(n.outputs)}}function Gi(n){var r;null===(r=n.features)||void 0===r||r.forEach(o=>o(n))}function us(n,r){if(!n)return null;const o=r?tr:pi;return()=>("function"==typeof n?n():n).map(c=>o(c)).filter(Xi)}const ti=0,un=1,Jn=2,Fr=3,Jr=4,Ri=5,Lr=6,vi=7,se=8,_e=9,st=10,le=11,Ge=12,Ye=13,Ct=14,kt=15,xt=16,Gt=17,rn=18,Pn=19,qn=20,tt=21,Ve=22,Ht=1,Qt=2,Nn=7,Qn=8,kr=9,fr=10;function ei(n){return Array.isArray(n)&&"object"==typeof n[Ht]}function ai(n){return Array.isArray(n)&&!0===n[Ht]}function As(n){return 0!=(4&n.flags)}function Eo(n){return n.componentOffset>-1}function Zs(n){return 1==(1&n.flags)}function bi(n){return!!n.template}function to(n){return 0!=(256&n[Jn])}function Wi(n,r){return n.hasOwnProperty(qt)?n[qt]:null}class io{constructor(r,o,c){this.previousValue=r,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function Ms(){return ho}function ho(n){return n.type.prototype.ngOnChanges&&(n.setInput=Rs),ws}function ws(){const n=bo(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===wn)n.previous=r;else for(let c in r)o[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Rs(n,r,o,c){const h=this.declaredInputs[o],v=bo(n)||function ko(n,r){return n[Vs]=r}(n,{previous:wn,current:null}),D=v.current||(v.current={}),N=v.previous,B=N[h];D[h]=new io(B&&B.currentValue,r,N===wn),n[c]=r}Ms.ngInherit=!0;const Vs="__ngSimpleChanges__";function bo(n){return n[Vs]||null}const Pr=function(n,r,o){};function li(n){for(;Array.isArray(n);)n=n[ti];return n}function js(n,r){return li(r[n])}function Ni(n,r){return li(r[n.index])}function Cs(n,r){return n.data[r]}function Ei(n,r){const o=r[n];return ei(o)?o:o[ti]}function Fo(n){return 64==(64&n[Jn])}function Hs(n,r){return null==r?null:n[r]}function Do(n){n[rn]=0}function aa(n,r){n[Ri]+=r;let o=n,c=n[Fr];for(;null!==c&&(1===r&&1===o[Ri]||-1===r&&0===o[Ri]);)c[Ri]+=r,o=c,c=c[Fr]}const sr={lFrame:ml(null),bindingsEnabled:!0};function W(){return sr.bindingsEnabled}function R(){return sr.lFrame.lView}function O(){return sr.lFrame.tView}function te(n){return sr.lFrame.contextLView=n,n[se]}function vt(n){return sr.lFrame.contextLView=null,n}function sn(){let n=br();for(;null!==n&&64===n.type;)n=n.parent;return n}function br(){return sr.lFrame.currentTNode}function Zr(n,r){const o=sr.lFrame;o.currentTNode=n,o.isParent=r}function hs(){return sr.lFrame.isParent}function rs(){sr.lFrame.isParent=!1}function ua(){return sr.lFrame.bindingIndex++}function ks(n){const r=sr.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function Ol(n,r){const o=sr.lFrame;o.bindingIndex=o.bindingRootIndex=n,To(r)}function To(n){sr.lFrame.currentDirectiveIndex=n}function ca(){return sr.lFrame.currentQueryIndex}function Qs(n){sr.lFrame.currentQueryIndex=n}function kl(n){const r=n[un];return 2===r.type?r.declTNode:1===r.type?n[Lr]:null}function qa(n,r,o){if(o&tn.SkipSelf){let h=r,v=n;for(;!(h=h.parent,null!==h||o&tn.Host||(h=kl(v),null===h||(v=v[kt],10&h.type))););if(null===h)return!1;r=h,n=v}const c=sr.lFrame=Ta();return c.currentTNode=r,c.lView=n,!0}function zo(n){const r=Ta(),o=n[un];sr.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Ta(){const n=sr.lFrame,r=null===n?null:n.child;return null===r?ml(n):r}function ml(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function So(){const n=sr.lFrame;return sr.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const is=So;function Go(){const n=So();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function $r(){return sr.lFrame.selectedIndex}function fs(n){sr.lFrame.selectedIndex=n}function mi(){const n=sr.lFrame;return Cs(n.tView,n.selectedIndex)}function Ya(n,r){for(let K=r.directiveStart,ce=r.directiveEnd;K<ce;K++){const lt=n.data[K].type.prototype,{ngAfterContentInit:St,ngAfterContentChecked:en,ngAfterViewInit:mn,ngAfterViewChecked:jn,ngOnDestroy:dr}=lt;var o,c,h,v,D,N,B;St&&(null!==(o=n.contentHooks)&&void 0!==o?o:n.contentHooks=[]).push(-K,St),en&&((null!==(c=n.contentHooks)&&void 0!==c?c:n.contentHooks=[]).push(K,en),(null!==(h=n.contentCheckHooks)&&void 0!==h?h:n.contentCheckHooks=[]).push(K,en)),mn&&(null!==(v=n.viewHooks)&&void 0!==v?v:n.viewHooks=[]).push(-K,mn),jn&&((null!==(D=n.viewHooks)&&void 0!==D?D:n.viewHooks=[]).push(K,jn),(null!==(N=n.viewCheckHooks)&&void 0!==N?N:n.viewCheckHooks=[]).push(K,jn)),null!=dr&&(null!==(B=n.destroyHooks)&&void 0!==B?B:n.destroyHooks=[]).push(K,dr)}}function Ka(n,r,o){V(n,r,3,o)}function F(n,r,o,c){(3&n[Jn])===o&&V(n,r,o,c)}function Z(n,r){let o=n[Jn];(3&o)===r&&(o&=2047,o+=1,n[Jn]=o)}function V(n,r,o,c){const v=null!=c?c:-1,D=r.length-1;let N=0;for(let B=void 0!==c?65535&n[rn]:0;B<D;B++)if("number"==typeof r[B+1]){if(N=r[B],null!=c&&N>=c)break}else r[B]<0&&(n[rn]+=65536),(N<v||-1==v)&&(oe(n,o,r,B),n[rn]=(4294901760&n[rn])+B+2),B++}function oe(n,r,o,c){const h=o[c]<0,v=o[c+1],N=n[h?-o[c]:o[c]];if(h){if(n[Jn]>>11<n[rn]>>16&&(3&n[Jn])===r){n[Jn]+=2048,Pr(4,N,v);try{v.call(N)}finally{Pr(5,N,v)}}}else{Pr(4,N,v);try{v.call(N)}finally{Pr(5,N,v)}}}const be=-1;class Mt{constructor(r,o,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function yn(n,r,o){let c=0;for(;c<o.length;){const h=o[c];if("number"==typeof h){if(0!==h)break;c++;const v=o[c++],D=o[c++],N=o[c++];n.setAttribute(r,D,N,v)}else{const v=h,D=o[++c];on(v)?n.setProperty(r,v,D):n.setAttribute(r,v,D),c++}}return c}function xo(n){return 3===n||4===n||6===n}function on(n){return 64===n.charCodeAt(0)}function At(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let c=0;c<r.length;c++){const h=r[c];"number"==typeof h?o=h:0===o||Wt(n,o,h,null,-1===o||2===o?r[++c]:null)}}return n}function Wt(n,r,o,c,h){let v=0,D=n.length;if(-1===r)D=-1;else for(;v<n.length;){const N=n[v++];if("number"==typeof N){if(N===r){D=-1;break}if(N>r){D=v-1;break}}}for(;v<n.length;){const N=n[v];if("number"==typeof N)break;if(N===o){if(null===c)return void(null!==h&&(n[v+1]=h));if(c===n[v+1])return void(n[v+2]=h)}v++,null!==c&&v++,null!==h&&v++}-1!==D&&(n.splice(D,0,r),v=D+1),n.splice(v++,0,o),null!==c&&n.splice(v++,0,c),null!==h&&n.splice(v++,0,h)}function Ti(n){return n!==be}function Gs(n){return 32767&n}function Xa(n,r){let o=function Za(n){return n>>16}(n),c=r;for(;o>0;)c=c[kt],o--;return c}let Qa=!0;function fa(n){const r=Qa;return Qa=n,r}const Sa=255,el=5;let vl=0;const qo={};function pr(n,r){const o=La(n,r);if(-1!==o)return o;const c=r[un];c.firstCreatePass&&(n.injectorIndex=r.length,go(c.data,n),go(r,null),go(c.blueprint,null));const h=Ii(n,r),v=n.injectorIndex;if(Ti(h)){const D=Gs(h),N=Xa(h,r),B=N[un].data;for(let K=0;K<8;K++)r[v+K]=N[D+K]|B[D+K]}return r[v+8]=h,v}function go(n,r){n.push(0,0,0,0,0,0,0,0,r)}function La(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Ii(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,h=r;for(;null!==h;){if(c=os(h),null===c)return be;if(o++,h=h[kt],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return be}function Xn(n,r,o){!function Fa(n,r,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(Bn)&&(c=o[Bn]),null==c&&(c=o[Bn]=vl++);const h=c&Sa;r.data[n+(h>>el)]|=1<<h}(n,r,o)}function jr(n,r,o){if(o&tn.Optional||void 0!==n)return n;X()}function Uc(n,r,o,c){if(o&tn.Optional&&void 0===c&&(c=null),!(o&(tn.Self|tn.Host))){const h=n[_e],v=Vr(void 0);try{return h?h.get(r,c,o&tn.Optional):di(r,c,o&tn.Optional)}finally{Vr(v)}}return jr(c,0,o)}function ui(n,r,o,c=tn.Default,h){if(null!==n){if(1024&r[Jn]){const D=function iu(n,r,o,c,h){let v=n,D=r;for(;null!==v&&null!==D&&1024&D[Jn]&&!(256&D[Jn]);){const N=Sn(v,D,o,c|tn.Self,qo);if(N!==qo)return N;let B=v.parent;if(!B){const K=D[tt];if(K){const ce=K.get(o,qo,c);if(ce!==qo)return ce}B=os(D),D=D[kt]}v=B}return h}(n,r,o,c,qo);if(D!==qo)return D}const v=Sn(n,r,o,c,qo);if(v!==qo)return v}return Uc(r,o,c,h)}function Sn(n,r,o,c,h){const v=function _l(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Bn)?n[Bn]:void 0;return"number"==typeof r?r>=0?r&Sa:ru:r}(o);if("function"==typeof v){if(!qa(r,n,c))return c&tn.Host?jr(h,0,c):Uc(r,o,c,h);try{const D=v(c);if(null!=D||c&tn.Optional)return D;X()}finally{is()}}else if("number"==typeof v){let D=null,N=La(n,r),B=be,K=c&tn.Host?r[xt][Lr]:null;for((-1===N||c&tn.SkipSelf)&&(B=-1===N?Ii(n,r):r[N+8],B!==be&&Fl(c,!1)?(D=r[un],N=Gs(B),r=Xa(B,r)):N=-1);-1!==N;){const ce=r[un];if(El(v,N,ce.data)){const Te=Pi(N,r,o,D,c,K);if(Te!==qo)return Te}B=r[N+8],B!==be&&Fl(c,r[un].data[N+8]===K)&&El(v,N,r)?(D=ce,N=Gs(B),r=Xa(B,r)):N=-1}}return h}function Pi(n,r,o,c,h,v){const D=r[un],N=D.data[n+8],ce=nl(N,D,o,null==c?Eo(N)&&Qa:c!=D&&0!=(3&N.type),h&tn.Host&&v===N);return null!==ce?Ws(r,D,ce,N):qo}function nl(n,r,o,c,h){const v=n.providerIndexes,D=r.data,N=1048575&v,B=n.directiveStart,ce=v>>20,lt=h?N+ce:n.directiveEnd;for(let St=c?N:N+ce;St<lt;St++){const en=D[St];if(St<B&&o===en||St>=B&&en.type===o)return St}if(h){const St=D[B];if(St&&bi(St)&&St.type===o)return B}return null}function Ws(n,r,o,c){let h=n[o];const v=r.data;if(function zt(n){return n instanceof Mt}(h)){const D=h;D.resolving&&function Je(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${n}${o}`)}(function ut(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ue(n)}(v[o]));const N=fa(D.canSeeViewProviders);D.resolving=!0;const B=D.injectImpl?Vr(D.injectImpl):null;qa(n,c,tn.Default);try{h=n[o]=D.factory(void 0,v,n,c),r.firstCreatePass&&o>=c.directiveStart&&function yl(n,r,o){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:v}=r.type.prototype;if(c){var D,N;const Te=ho(r);(null!==(D=o.preOrderHooks)&&void 0!==D?D:o.preOrderHooks=[]).push(n,Te),(null!==(N=o.preOrderCheckHooks)&&void 0!==N?N:o.preOrderCheckHooks=[]).push(n,Te)}var B,K,ce;h&&(null!==(B=o.preOrderHooks)&&void 0!==B?B:o.preOrderHooks=[]).push(0-n,h),v&&((null!==(K=o.preOrderHooks)&&void 0!==K?K:o.preOrderHooks=[]).push(n,v),(null!==(ce=o.preOrderCheckHooks)&&void 0!==ce?ce:o.preOrderCheckHooks=[]).push(n,v))}(o,v[o],r)}finally{null!==B&&Vr(B),fa(N),D.resolving=!1,is()}}return h}function El(n,r,o){return!!(o[r+(n>>el)]&1<<n)}function Fl(n,r){return!(n&tn.Self||n&tn.Host&&r)}class ps{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,c){return ui(this._tNode,this._lView,r,Ln(c),o)}}function ru(){return new ps(sn(),R())}function sc(n){return Ke(()=>{const r=n.prototype.constructor,o=r[qt]||gs(r),c=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==c;){const v=h[qt]||gs(h);if(v&&v!==o)return v;h=Object.getPrototypeOf(h)}return v=>new v})}function gs(n){return Ue(n)?()=>{const r=gs(ve(n));return r&&r()}:Wi(n)}function os(n){const r=n[un],o=r.type;return 2===o?r.declTNode:1===o?n[Lr]:null}function Il(n){return function tl(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const c=o.length;let h=0;for(;h<c;){const v=o[h];if(xo(v))break;if(0===v)h+=2;else if("number"==typeof v)for(h++;h<c&&"string"==typeof o[h];)h++;else{if(v===r)return o[h+1];h+=2}}}return null}(sn(),n)}const Aa="__parameters__";function Ll(n,r,o){return Ke(()=>{const c=function oo(n){return function(...o){if(n){const c=n(...o);for(const h in c)this[h]=c[h]}}}(r);function h(...v){if(this instanceof h)return c.apply(this,v),this;const D=new h(...v);return N.annotation=D,N;function N(B,K,ce){const Te=B.hasOwnProperty(Aa)?B[Aa]:Object.defineProperty(B,Aa,{value:[]})[Aa];for(;Te.length<=ce;)Te.push(null);return(Te[ce]=Te[ce]||[]).push(D),B}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Oi{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=gt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Zo(n,r){n.forEach(o=>Array.isArray(o)?Zo(o,r):r(o))}function ri(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Hr(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function vr(n,r){const o=[];for(let c=0;c<n;c++)o.push(r);return o}function lo(n,r,o){let c=A(n,r);return c>=0?n[1|c]=o:(c=~c,function Ru(n,r,o,c){let h=n.length;if(h==r)n.push(o,c);else if(1===h)n.push(c,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=c}}(n,c,r,o)),c}function S(n,r){const o=A(n,r);if(o>=0)return n[1|o]}function A(n,r){return function P(n,r,o){let c=0,h=n.length>>o;for(;h!==c;){const v=c+(h-c>>1),D=n[v<<o];if(r===D)return v<<o;D>r?h=v:c=v+1}return~(h<<o)}(n,r,1)}const Ir=$n(Ll("Optional"),8),$=$n(Ll("SkipSelf"),4);var Ki=(()=>((Ki=Ki||{})[Ki.Important=1]="Important",Ki[Ki.DashCase=2]="DashCase",Ki))();const au=new Map;let cc=0;const Gc="__ngContext__";function yo(n,r){ei(r)?(n[Gc]=r[qn],function lu(n){au.set(n[qn],n)}(r)):n[Gc]=r}let qc;function Vl(n,r){return qc(n,r)}function cu(n){const r=n[Fr];return ai(r)?r[Fr]:r}function pc(n){return Yc(n[Ye])}function Jo(n){return Yc(n[Jr])}function Yc(n){for(;null!==n&&!ai(n);)n=n[Jr];return n}function ma(n,r,o,c,h){if(null!=c){let v,D=!1;ai(c)?v=c:ei(c)&&(D=!0,c=c[ti]);const N=li(c);0===n&&null!==o?null==h?fu(r,o,N):ja(r,o,N,h||null,!0):1===n&&null!==o?ja(r,o,N,h||null,!0):2===n?function ed(n,r,o){const c=Hl(n,r);c&&function xa(n,r,o,c){n.removeChild(r,o,c)}(n,c,r,o)}(r,N,D):3===n&&r.destroyNode(N),null!=v&&function ju(n,r,o,c,h){const v=o[Nn];v!==li(o)&&ma(r,n,c,v,h);for(let N=fr;N<o.length;N++){const B=o[N];Ha(B[un],B,n,r,c,v)}}(r,n,v,o,h)}}function ya(n,r,o){return n.createElement(r,o)}function Tl(n,r){const o=n[kr],c=o.indexOf(r),h=r[Fr];512&r[Jn]&&(r[Jn]&=-513,aa(h,-1)),o.splice(c,1)}function du(n,r){if(n.length<=fr)return;const o=fr+r,c=n[o];if(c){const h=c[Gt];null!==h&&h!==n&&Tl(h,c),r>0&&(n[o-1][Jr]=c[Jr]);const v=Hr(n,fr+r);!function $u(n,r){Ha(n,r,r[le],2,null,null),r[ti]=null,r[Lr]=null}(c[un],c);const D=v[Pn];null!==D&&D.detachView(v[un]),c[Fr]=null,c[Jr]=null,c[Jn]&=-65}return c}function mc(n,r){if(!(128&r[Jn])){const o=r[le];o.destroyNode&&Ha(n,r,o,3,null,null),function Rd(n){let r=n[Ye];if(!r)return Va(n[un],n);for(;r;){let o=null;if(ei(r))o=r[Ye];else{const c=r[fr];c&&(o=c)}if(!o){for(;r&&!r[Jr]&&r!==n;)ei(r)&&Va(r[un],r),r=r[Fr];null===r&&(r=n),ei(r)&&Va(r[un],r),o=r&&r[Jr]}r=o}}(r)}}function Va(n,r){if(!(128&r[Jn])){r[Jn]&=-65,r[Jn]|=128,function hu(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const h=r[o[c]];if(!(h instanceof Mt)){const v=o[c+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const N=h[v[D]],B=v[D+1];Pr(4,N,B);try{B.call(N)}finally{Pr(5,N,B)}}else{Pr(4,h,v);try{v.call(h)}finally{Pr(5,h,v)}}}}}(n,r),function Zc(n,r){const o=n.cleanup,c=r[vi];let h=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const D=o[v+3];D>=0?c[h=D]():c[h=-D].unsubscribe(),v+=2}else{const D=c[h=o[v+1]];o[v].call(D)}if(null!==c){for(let v=h+1;v<c.length;v++)(0,c[v])();r[vi]=null}}(n,r),1===r[un].type&&r[le].destroy();const o=r[Gt];if(null!==o&&ai(r[Fr])){o!==r[Fr]&&Tl(o,r);const c=r[Pn];null!==c&&c.detachView(n)}!function yi(n){au.delete(n[qn])}(r)}}function Zi(n,r,o){return function Hi(n,r,o){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return o[ti];{const{componentOffset:h}=c;if(h>-1){const{encapsulation:v}=n.data[c.directiveStart+h];if(v===It.None||v===It.Emulated)return null}return Ni(c,o)}}(n,r.parent,o)}function ja(n,r,o,c,h){n.insertBefore(r,o,c,h)}function fu(n,r,o){n.appendChild(r,o)}function Pd(n,r,o,c,h){null!==c?ja(n,r,o,c,h):fu(n,r,o)}function Hl(n,r){return n.parentNode(r)}function Od(n,r,o){return Th(n,r,o)}let Sl,Bd,Gu,Th=function mr(n,r,o){return 40&n.type?Ni(n,o):null};function Xc(n,r,o,c){const h=Zi(n,c,r),v=r[le],N=Od(c.parent||r[Lr],c,r);if(null!=h)if(Array.isArray(o))for(let B=0;B<o.length;B++)Pd(v,h,o[B],N,!1);else Pd(v,h,o,N,!1);void 0!==Sl&&Sl(v,c,r,o,h)}function Qc(n,r){if(null!==r){const o=r.type;if(3&o)return Ni(r,n);if(4&o)return kd(-1,n[r.index]);if(8&o){const c=r.child;if(null!==c)return Qc(n,c);{const h=n[r.index];return ai(h)?kd(-1,h):li(h)}}if(32&o)return Vl(r,n)()||li(n[r.index]);{const c=Jc(n,r);return null!==c?Array.isArray(c)?c[0]:Qc(cu(n[xt]),c):Qc(n,r.next)}}return null}function Jc(n,r){return null!==r?n[xt][Lr].projection[r.projection]:null}function kd(n,r){const o=fr+n+1;if(o<r.length){const c=r[o],h=c[un].firstChild;if(null!==h)return Qc(c,h)}return r[Nn]}function yc(n,r,o,c,h,v,D){for(;null!=o;){const N=c[o.index],B=o.type;if(D&&0===r&&(N&&yo(li(N),c),o.flags|=2),32!=(32&o.flags))if(8&B)yc(n,r,o.child,c,h,v,!1),ma(r,n,h,N,v);else if(32&B){const K=Vl(o,c);let ce;for(;ce=K();)ma(r,n,h,ce,v);ma(r,n,h,N,v)}else 16&B?td(n,r,c,o,h,v):ma(r,n,h,N,v);o=D?o.projectionNext:o.next}}function Ha(n,r,o,c,h,v){yc(o,c,n.firstChild,r,h,v,!1)}function td(n,r,o,c,h,v){const D=o[xt],B=D[Lr].projection[c.projection];if(Array.isArray(B))for(let K=0;K<B.length;K++)ma(r,n,h,B[K],v);else yc(n,r,B,D[Fr],h,v,!0)}function Nd(n,r,o){""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o)}function Ah(n,r,o){const{mergedAttrs:c,classes:h,styles:v}=o;null!==c&&yn(n,r,c),null!==h&&Nd(n,r,h),null!==v&&function Al(n,r,o){n.setAttribute(r,"style",o)}(n,r,v)}function nd(n){Bd=n}function xh(n){var r;return(null===(r=function Ds(){if(void 0===Gu&&(Gu=null,On.trustedTypes))try{Gu=On.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gu}())||void 0===r?void 0:r.createScriptURL(n))||n}class ll{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dt})`}}function zl(n){return n instanceof ll?n.changingThisBreaksApplicationSecurity:n}function Gl(n,r){const o=function gp(n){return n instanceof ll&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see ${Dt})`)}return o===r}const bn=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var uo=(()=>((uo=uo||{})[uo.NONE=0]="NONE",uo[uo.HTML=1]="HTML",uo[uo.STYLE=2]="STYLE",uo[uo.SCRIPT=3]="SCRIPT",uo[uo.URL=4]="URL",uo[uo.RESOURCE_URL=5]="RESOURCE_URL",uo))();function jd(n){const r=yu();return r?r.sanitize(uo.URL,n)||"":Gl(n,"URL")?zl(n):function Gn(n){return(n=String(n)).match(bn)?n:"unsafe:"+n}(ue(n))}function Cf(n){const r=yu();if(r)return xh(r.sanitize(uo.RESOURCE_URL,n)||"");if(Gl(n,"ResourceURL"))return xh(zl(n));throw new Ne(904,!1)}function Tf(n,r,o){return function Cg(n,r){return"src"===r&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===r&&("base"===n||"link"===n)?Cf:jd}(r,o)(n)}function yu(){const n=R();return n&&n[Ge]}const Af=new Oi("ENVIRONMENT_INITIALIZER"),vu=new Oi("INJECTOR",-1),Ic=new Oi("INJECTOR_DEF_TYPES");class od{get(r,o=yr){if(o===yr){const c=new Error(`NullInjectorError: No provider for ${Le(r)}!`);throw c.name="NullInjectorError",c}return o}}function xf(...n){return{\u0275providers:ql(0,n),\u0275fromNgModule:!0}}function ql(n,...r){const o=[],c=new Set;let h;return Zo(r,v=>{const D=v;vp(D,o,[],c)&&(h||(h=[]),h.push(D))}),void 0!==h&&Fh(h,o),o}function Fh(n,r){for(let o=0;o<n.length;o++){const{providers:h}=n[o];Hd(h,v=>{r.push(v)})}}function vp(n,r,o,c){if(!(n=ve(n)))return!1;let h=null,v=Tn(n);const D=!v&&ar(n);if(v||D){if(D&&!D.standalone)return!1;h=n}else{const B=n.ngModule;if(v=Tn(B),!v)return!1;h=B}const N=c.has(h);if(D){if(N)return!1;if(c.add(h),D.dependencies){const B="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const K of B)vp(K,r,o,c)}}else{if(!v)return!1;{if(null!=v.imports&&!N){let K;c.add(h);try{Zo(v.imports,ce=>{vp(ce,r,o,c)&&(K||(K=[]),K.push(ce))})}finally{}void 0!==K&&Fh(K,r)}if(!N){const K=Wi(h)||(()=>new h);r.push({provide:h,useFactory:K,deps:We},{provide:Ic,useValue:h,multi:!0},{provide:Af,useValue:()=>an(h),multi:!0})}const B=v.providers;null==B||N||Hd(B,ce=>{r.push(ce)})}}return h!==n&&void 0!==n.providers}function Hd(n,r){for(let o of n)je(o)&&(o=o.\u0275providers),Array.isArray(o)?Hd(o,r):r(o)}const ad=Me({provide:String,useValue:Me});function qu(n){return null!==n&&"object"==typeof n&&ad in n}function bc(n){return"function"==typeof n}const Bh=new Oi("Set Injector scope."),$h={},_p={};let Uh;function ld(){return void 0===Uh&&(Uh=new od),Uh}class Eu{}class Cc extends Eu{get destroyed(){return this._destroyed}constructor(r,o,c,h){super(),this.parent=o,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yl(r,D=>this.processProvider(D)),this.records.set(vu,Ku(void 0,this)),h.has("environment")&&this.records.set(Eu,Ku(void 0,this));const v=this.records.get(Bh);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Ic.multi,We,tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const o=Wn(this),c=Vr(void 0);try{return r()}finally{Wn(o),Vr(c)}}get(r,o=yr,c=tn.Default){this.assertNotDestroyed(),c=Ln(c);const h=Wn(this),v=Vr(void 0);try{if(!(c&tn.SkipSelf)){let N=this.records.get(r);if(void 0===N){const B=function Zu(n){return"function"==typeof n||"object"==typeof n&&n instanceof Oi}(r)&&nn(r);N=B&&this.injectableDefInScope(B)?Ku(cl(r),$h):null,this.records.set(r,N)}if(null!=N)return this.hydrate(r,N)}return(c&tn.Self?ld():this.parent).get(r,o=c&tn.Optional&&o===yr?null:o)}catch(D){if("NullInjectorError"===D.name){if((D[Kr]=D[Kr]||[]).unshift(Le(r)),h)throw D;return function $e(n,r,o,c){const h=n[Kr];throw r[si]&&h.unshift(r[si]),n.message=function Pe(n,r,o,c=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==Dr?n.slice(2):n;let h=Le(r);if(Array.isArray(r))h=r.map(Le).join(" -> ");else if("object"==typeof r){let v=[];for(let D in r)if(r.hasOwnProperty(D)){let N=r[D];v.push(D+":"+("string"==typeof N?JSON.stringify(N):Le(N)))}h=`{${v.join(", ")}}`}return`${o}${c?"("+c+")":""}[${h}]: ${n.replace(wi,"\n  ")}`}("\n"+n.message,h,o,c),n[hi]=h,n[Kr]=null,n}(D,r,"R3InjectorError",this.source)}throw D}finally{Vr(v),Wn(h)}}resolveInjectorInitializers(){const r=Wn(this),o=Vr(void 0);try{const c=this.get(Af.multi,We,tn.Self);for(const h of c)h()}finally{Wn(r),Vr(o)}}toString(){const r=[],o=this.records;for(const c of o.keys())r.push(Le(c));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processProvider(r){let o=bc(r=ve(r))?r:ve(r&&r.provide);const c=function Dg(n){return qu(n)?Ku(void 0,n.useValue):Ku(Ep(n),$h)}(r);if(bc(r)||!0!==r.multi)this.records.get(o);else{let h=this.records.get(o);h||(h=Ku(void 0,$h,!0),h.factory=()=>In(h.multi),this.records.set(o,h)),o=r,h.multi.push(r)}this.records.set(o,c)}hydrate(r,o){return o.value===$h&&(o.value=_p,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Vm(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=ve(r.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function cl(n){const r=nn(n),o=null!==r?r.factory:Wi(n);if(null!==o)return o;if(n instanceof Oi)throw new Ne(204,!1);if(n instanceof Function)return function Yu(n){const r=n.length;if(r>0)throw vr(r,"?"),new Ne(204,!1);const o=function _n(n){const r=n&&(n[Hn]||n[En]);return r?(function Xt(n){if(n.hasOwnProperty("name"))return n.name;(""+n).match(/^function\s*([^\s(]+)/)}(n),r):null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Ne(204,!1)}function Ep(n,r,o){let c;if(bc(n)){const h=ve(n);return Wi(h)||cl(h)}if(qu(n))c=()=>ve(n.useValue);else if(function wc(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...In(n.deps||[]));else if(function _u(n){return!(!n||!n.useExisting)}(n))c=()=>an(ve(n.useExisting));else{const h=ve(n&&(n.useClass||n.provide));if(!function Tg(n){return!!n.deps}(n))return Wi(h)||cl(h);c=()=>new h(...In(n.deps))}return c}function Ku(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Yl(n,r){for(const o of n)Array.isArray(o)?Yl(o,r):o&&je(o)?Yl(o.\u0275providers,r):r(o)}class Dc{}class Ip{}class Rf{resolveComponentFactory(r){throw function jm(n){const r=Error(`No component factory found for ${Le(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let ud=(()=>{class n{}return n.NULL=new Rf,n})();function zd(){return ta(sn(),R())}function ta(n,r){return new Kl(Ni(n,r))}let Kl=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=zd,n})();function Sg(n){return n instanceof Kl?n.nativeElement:n}class Gd{}let bp=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function cd(){const n=R(),o=Ei(sn().index,n);return(ei(o)?o:n)[le]}(),n})(),Tc=(()=>{class n{}return n.\u0275prov=gt({token:n,providedIn:"root",factory:()=>null}),n})();class Ag{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Wa=new Ag("15.2.6"),Sc={},Wd="ngOriginalError";function jh(n){return n[Wd]}class Lo{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r);this._console.error("ERROR",r),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&jh(r);for(;o&&jh(o);)o=jh(o);return o||null}}function _a(n){return n instanceof Function?n():n}function Og(n,r,o){let c=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const v=r.length;if(h+v===c||n.charCodeAt(h+v)<=32)return h}o=h+1}}const kg="ng-template";function Hm(n,r,o){let c=0,h=!0;for(;c<n.length;){let v=n[c++];if("string"==typeof v&&h){const D=n[c++];if(o&&"class"===v&&-1!==Og(D.toLowerCase(),r,0))return!0}else{if(1===v){for(;c<n.length&&"string"==typeof(v=n[c++]);)if(v.toLowerCase()===r)return!0;return!1}"number"==typeof v&&(h=!1)}}return!1}function Yd(n){return 4===n.type&&n.value!==kg}function Ng(n,r,o){return r===(4!==n.type||o?n.value:kg)}function zm(n,r,o){let c=4;const h=n.attrs||[],v=function wu(n){for(let r=0;r<n.length;r++)if(xo(n[r]))return r;return n.length}(h);let D=!1;for(let N=0;N<r.length;N++){const B=r[N];if("number"!=typeof B){if(!D)if(4&c){if(c=2|1&c,""!==B&&!Ng(n,B,o)||""===B&&1===r.length){if(Rl(c))return!1;D=!0}}else{const K=8&c?B:r[++N];if(8&c&&null!==n.attrs){if(!Hm(n.attrs,K,o)){if(Rl(c))return!1;D=!0}continue}const Te=Tp(8&c?"class":B,h,Yd(n),o);if(-1===Te){if(Rl(c))return!1;D=!0;continue}if(""!==K){let lt;lt=Te>v?"":h[Te+1].toLowerCase();const St=8&c?lt:null;if(St&&-1!==Og(St,K,0)||2&c&&K!==lt){if(Rl(c))return!1;D=!0}}}}else{if(!D&&!Rl(c)&&!Rl(B))return!1;if(D&&Rl(B))continue;D=!1,c=B|1&c}}return Rl(c)||D}function Rl(n){return 0==(1&n)}function Tp(n,r,o,c){if(null===r)return-1;let h=0;if(c||!o){let v=!1;for(;h<r.length;){const D=r[h];if(D===n)return h;if(3===D||6===D)v=!0;else{if(1===D||2===D){let N=r[++h];for(;"string"==typeof N;)N=r[++h];continue}if(4===D)break;if(0===D){h+=4;continue}}h+=v?1:2}return-1}return function Xu(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===r)return o;o++}return-1}(r,n)}function Of(n,r,o=!1){for(let c=0;c<r.length;c++)if(zm(n,r[c],o))return!0;return!1}function Fg(n,r){e:for(let o=0;o<r.length;o++){const c=r[o];if(n.length===c.length){for(let h=0;h<n.length;h++)if(n[h]!==c[h])continue e;return!0}}return!1}function kf(n,r){return n?":not("+r.trim()+")":r}function zh(n){let r=n[0],o=1,c=2,h="",v=!1;for(;o<n.length;){let D=n[o];if("string"==typeof D)if(2&c){const N=n[++o];h+="["+D+(N.length>0?'="'+N+'"':"")+"]"}else 8&c?h+="."+D:4&c&&(h+=" "+D);else""!==h&&!Rl(D)&&(r+=kf(v,h),h=""),c=D,v=v||!Rl(c);o++}return""!==h&&(r+=kf(v,h)),r}const Nr={};function vo(n){Sp(O(),R(),$r()+n,!1)}function Sp(n,r,o,c){if(!c)if(3==(3&r[Jn])){const v=n.preOrderCheckHooks;null!==v&&Ka(r,v,o)}else{const v=n.preOrderHooks;null!==v&&F(r,v,0,o)}fs(o)}function Ff(n,r=null,o=null,c){const h=fd(n,r,o,c);return h.resolveInjectorInitializers(),h}function fd(n,r=null,o=null,c,h=new Set){const v=[o||We,xf(n)];return c=c||("object"==typeof n?void 0:Le(n)),new Cc(v,r||ld(),c||null,h)}let Xl=(()=>{class n{static create(o,c){if(Array.isArray(o))return Ff({name:""},c,o,"");{var h;const v=null!==(h=o.name)&&void 0!==h?h:"";return Ff({name:v},o.parent,o.providers,v)}}}return n.THROW_IF_NOT_FOUND=yr,n.NULL=new od,n.\u0275prov=gt({token:n,providedIn:"any",factory:()=>an(vu)}),n.__NG_ELEMENT_ID__=-1,n})();function Oc(n,r=tn.Default){const o=R();return null===o?an(n,r):ui(sn(),o,ve(n),r)}function kp(){throw new Error("invalid")}function Np(n,r){const o=n.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const v=o[c+1];if(-1!==v){const D=n.data[v];Qs(o[c]),D.contentQueries(2,r[v],v)}}}function zf(n,r,o,c,h,v,D,N,B,K,ce){const Te=r.blueprint.slice();return Te[ti]=h,Te[Jn]=76|c,(null!==ce||n&&1024&n[Jn])&&(Te[Jn]|=1024),Do(Te),Te[Fr]=Te[kt]=n,Te[se]=o,Te[st]=D||n&&n[st],Te[le]=N||n&&n[le],Te[Ge]=B||n&&n[Ge]||null,Te[_e]=K||n&&n[_e]||null,Te[Lr]=v,Te[qn]=function bh(){return cc++}(),Te[tt]=ce,Te[xt]=2==r.type?n[xt]:Te,Te}function eh(n,r,o,c,h){let v=n.data[r];if(null===v)v=function Bo(n,r,o,c,h){const v=br(),D=hs(),B=n.data[r]=function Km(n,r,o,c,h,v){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,o,r,c,h);return null===n.firstChild&&(n.firstChild=B),null!==v&&(D?null==v.child&&null!==B.parent&&(v.child=B):null===v.next&&(v.next=B,B.prev=v)),B}(n,r,o,c,h),function Da(){return sr.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=o,v.value=c,v.attrs=h;const D=function oi(){const n=sr.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return Zr(v,!0),v}function Jh(n,r,o,c){if(0===o)return-1;const h=r.length;for(let v=0;v<o;v++)r.push(c),n.blueprint.push(c),n.data.push(null);return h}function Gf(n,r,o){zo(r);try{const c=n.viewQuery;null!==c&&rf(1,c,o);const h=n.template;null!==h&&th(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Np(n,r),n.staticViewQueries&&rf(2,n.viewQuery,o);const v=n.components;null!==v&&function Fp(n,r){for(let o=0;o<r.length;o++)ty(n,r[o])}(r,v)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[Jn]&=-5,Go()}}function yd(n,r,o,c){const h=r[Jn];if(128!=(128&h)){zo(r);try{Do(r),function la(n){return sr.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&th(n,r,o,2,c);const D=3==(3&h);if(D){const K=n.preOrderCheckHooks;null!==K&&Ka(r,K,null)}else{const K=n.preOrderHooks;null!==K&&F(r,K,0,null),Z(r,0)}if(function Wp(n){for(let r=pc(n);null!==r;r=Jo(r)){if(!r[Qt])continue;const o=r[kr];for(let c=0;c<o.length;c++){const h=o[c];512&h[Jn]||aa(h[Fr],1),h[Jn]|=512}}}(r),function qg(n){for(let r=pc(n);null!==r;r=Jo(r))for(let o=fr;o<r.length;o++){const c=r[o],h=c[un];Fo(c)&&yd(h,c,h.template,c[se])}}(r),null!==n.contentQueries&&Np(n,r),D){const K=n.contentCheckHooks;null!==K&&Ka(r,K)}else{const K=n.contentHooks;null!==K&&F(r,K,1),Z(r,1)}!function Vg(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const h=o[c];if(h<0)fs(~h);else{const v=h,D=o[++c],N=o[++c];Ol(D,v),N(2,r[v])}}}finally{fs(-1)}}(n,r);const N=n.components;null!==N&&function Hf(n,r){for(let o=0;o<r.length;o++)ey(n,r[o])}(r,N);const B=n.viewQuery;if(null!==B&&rf(2,B,c),D){const K=n.viewCheckHooks;null!==K&&Ka(r,K)}else{const K=n.viewHooks;null!==K&&F(r,K,2),Z(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[Jn]&=-41,512&r[Jn]&&(r[Jn]&=-513,aa(r[Fr],-1))}finally{Go()}}}function th(n,r,o,c,h){const v=$r(),D=2&c;try{fs(-1),D&&r.length>Ve&&Sp(n,r,Ve,!1),Pr(D?2:0,h),o(c,h)}finally{fs(v),Pr(D?3:1,h)}}function ef(n,r,o){if(As(r)){const h=r.directiveEnd;for(let v=r.directiveStart;v<h;v++){const D=n.data[v];D.contentQueries&&D.contentQueries(1,o[v],v)}}}function Wf(n,r,o){W()&&(function Hg(n,r,o,c){const h=o.directiveStart,v=o.directiveEnd;Eo(o)&&function sh(n,r,o){const c=Ni(r,n),h=jg(o),v=n[st],D=_o(n,zf(n,h,null,o.onPush?32:16,c,r,v,v.createRenderer(c,o),null,null,null));n[r.index]=D}(r,o,n.data[h+o.componentOffset]),n.firstCreatePass||pr(o,r),yo(c,r);const D=o.initialInputs;for(let N=h;N<v;N++){const B=n.data[N],K=Ws(r,n,N,o);yo(K,r),null!==D&&Jm(0,N-h,K,B,0,D),bi(B)&&(Ei(o.index,r)[se]=Ws(r,n,N,o))}}(n,r,o,Ni(o,r)),64==(64&o.flags)&&Kf(n,r,o))}function Lp(n,r,o=Ni){const c=r.localNames;if(null!==c){let h=r.index+1;for(let v=0;v<c.length;v+=2){const D=c[v+1],N=-1===D?o(r,n):n[D];n[h++]=N}}}function jg(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Bp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Bp(n,r,o,c,h,v,D,N,B,K){const ce=Ve+c,Te=ce+h,lt=function Ym(n,r){const o=[];for(let c=0;c<r;c++)o.push(c<n?null:Nr);return o}(ce,Te),St="function"==typeof K?K():K;return lt[un]={type:n,blueprint:lt,template:o,queries:null,viewQuery:N,declTNode:r,data:lt.slice().fill(null,ce),bindingStartIndex:ce,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:B,consts:St,incompleteFirstPass:!1}}function Pl(n,r,o,c){const h=vd(r);null===o?h.push(c):(h.push(o),n.firstCreatePass&&ec(n).push(c,h.length-1))}function kc(n,r,o,c){for(let h in n)if(n.hasOwnProperty(h)){o=null===o?{}:o;const v=n[h];null===c?tf(o,r,h,v):c.hasOwnProperty(h)&&tf(o,r,c[h],v)}return o}function tf(n,r,o,c){n.hasOwnProperty(o)?n[o].push(r,c):n[o]=[r,c]}function rh(n,r){const o=Ei(r,n);16&o[Jn]||(o[Jn]|=32)}function ih(n,r,o,c){if(W()){const h=null===c?null:{"":-1},v=function Vp(n,r){const o=n.directiveRegistry;let c=null,h=null;if(o)for(let D=0;D<o.length;D++){const N=o[D];if(Of(r,N.selectors,!1))if(c||(c=[]),bi(N))if(null!==N.findHostDirectiveDefs){const B=[];h=h||new Map,N.findHostDirectiveDefs(N,B,h),c.unshift(...B,N),jp(n,r,B.length)}else c.unshift(N),jp(n,r,0);else{var v;h=h||new Map,null===(v=N.findHostDirectiveDefs)||void 0===v||v.call(N,N,c,h),c.push(N)}}return null===c?null:[c,h]}(n,o);let D,N;null===v?D=N=null:[D,N]=v,null!==D&&Yf(n,r,o,D,h,N),h&&function Hp(n,r,o){if(r){const c=n.localNames=[];for(let h=0;h<r.length;h+=2){const v=o[r[h+1]];if(null==v)throw new Ne(-301,!1);c.push(r[h],v)}}}(o,c,h)}o.mergedAttrs=At(o.mergedAttrs,o.attrs)}function Yf(n,r,o,c,h,v){for(let Te=0;Te<c.length;Te++)Xn(pr(o,r),n,c[Te].type);!function zp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}(o,n.data.length,c.length);for(let Te=0;Te<c.length;Te++){const lt=c[Te];lt.providersResolver&&lt.providersResolver(lt)}let D=!1,N=!1,B=Jh(n,r,c.length,null);for(let Te=0;Te<c.length;Te++){const lt=c[Te];o.mergedAttrs=At(o.mergedAttrs,lt.hostAttrs),zg(n,o,r,B,lt),Zf(B,lt,h),null!==lt.contentQueries&&(o.flags|=4),(null!==lt.hostBindings||null!==lt.hostAttrs||0!==lt.hostVars)&&(o.flags|=64);const St=lt.type.prototype;var K,ce;!D&&(St.ngOnChanges||St.ngOnInit||St.ngDoCheck)&&((null!==(K=n.preOrderHooks)&&void 0!==K?K:n.preOrderHooks=[]).push(o.index),D=!0),N||!St.ngOnChanges&&!St.ngDoCheck||((null!==(ce=n.preOrderCheckHooks)&&void 0!==ce?ce:n.preOrderCheckHooks=[]).push(o.index),N=!0),B++}!function nh(n,r,o){const h=r.directiveEnd,v=n.data,D=r.attrs,N=[];let B=null,K=null;for(let ce=r.directiveStart;ce<h;ce++){const Te=v[ce],lt=o?o.get(Te):null,en=lt?lt.outputs:null;B=kc(Te.inputs,ce,B,lt?lt.inputs:null),K=kc(Te.outputs,ce,K,en);const mn=null===B||null===D||Yd(r)?null:Wg(B,ce,D);N.push(mn)}null!==B&&(B.hasOwnProperty("class")&&(r.flags|=8),B.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=N,r.inputs=B,r.outputs=K}(n,o,v)}function Kf(n,r,o){const c=o.directiveStart,h=o.directiveEnd,v=o.index,D=function gl(){return sr.lFrame.currentDirectiveIndex}();try{fs(v);for(let N=c;N<h;N++){const B=n.data[N],K=r[N];To(N),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&Qm(B,K)}}finally{fs(-1),To(D)}}function Qm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function jp(n,r,o){var c;r.componentOffset=o,(null!==(c=n.components)&&void 0!==c?c:n.components=[]).push(r.index)}function Zf(n,r,o){if(o){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)o[r.exportAs[c]]=n;bi(r)&&(o[""]=n)}}function zg(n,r,o,c,h){n.data[c]=h;const v=h.factory||(h.factory=Wi(h.type)),D=new Mt(v,bi(h),Oc);n.blueprint[c]=D,o[c]=D,function Qu(n,r,o,c,h){const v=h.hostBindings;if(v){let D=n.hostBindingOpCodes;null===D&&(D=n.hostBindingOpCodes=[]);const N=~r.index;(function Xm(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(D)!=N&&D.push(N),D.push(o,c,v)}}(n,r,c,Jh(n,o,h.hostVars,Nr),h)}function Ql(n,r,o,c,h,v){const D=Ni(n,r);!function Gg(n,r,o,c,h,v,D){if(null==v)n.removeAttribute(r,h,o);else{const N=null==D?ue(v):D(v,c||"",h);n.setAttribute(r,h,N,o)}}(r[le],D,v,n.value,o,c,h)}function Jm(n,r,o,c,h,v){const D=v[r];if(null!==D){const N=c.setInput;for(let B=0;B<D.length;){const K=D[B++],ce=D[B++],Te=D[B++];null!==N?c.setInput(o,Te,K,ce):o[ce]=Te}}}function Wg(n,r,o){let c=null,h=0;for(;h<o.length;){const v=o[h];if(0!==v)if(5!==v){if("number"==typeof v)break;if(n.hasOwnProperty(v)){null===c&&(c=[]);const D=n[v];for(let N=0;N<D.length;N+=2)if(D[N]===r){c.push(v,D[N+1],o[h+1]);break}}h+=2}else h+=2;else h+=4}return c}function Gp(n,r,o,c){return[n,!0,!1,r,null,0,c,o,null,null]}function ey(n,r){const o=Ei(r,n);if(Fo(o)){const c=o[un];48&o[Jn]?yd(c,o,c.template,o[se]):o[Ri]>0&&nf(o)}}function nf(n){for(let c=pc(n);null!==c;c=Jo(c))for(let h=fr;h<c.length;h++){const v=c[h];if(Fo(v))if(512&v[Jn]){const D=v[un];yd(D,v,D.template,v[se])}else v[Ri]>0&&nf(v)}const o=n[un].components;if(null!==o)for(let c=0;c<o.length;c++){const h=Ei(o[c],n);Fo(h)&&h[Ri]>0&&nf(h)}}function ty(n,r){const o=Ei(r,n),c=o[un];(function bu(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(c,o),Gf(c,o,o[se])}function _o(n,r){return n[Ye]?n[Ct][Jr]=r:n[Ye]=r,n[Ct]=r,r}function ra(n){for(;n;){n[Jn]|=32;const r=cu(n);if(to(n)&&!r)return n;n=r}return null}function Ju(n,r,o,c=!0){const h=r[st];h.begin&&h.begin();try{yd(n,r,n.template,o)}catch(D){throw c&&Nc(r,D),D}finally{h.end&&h.end()}}function rf(n,r,o){Qs(0),r(n,o)}function vd(n){return n[vi]||(n[vi]=[])}function ec(n){return n.cleanup||(n.cleanup=[])}function Nc(n,r){const o=n[_e],c=o?o.get(Lo,null):null;c&&c.handleError(r)}function tc(n,r,o,c,h){for(let v=0;v<o.length;){const D=o[v++],N=o[v++],B=r[D],K=n.data[D];null!==K.setInput?K.setInput(B,h,c,N):B[N]=h}}function Jl(n,r,o){const c=js(r,n);!function Dl(n,r,o){n.setValue(r,o)}(n[le],c,o)}function Cu(n,r,o){let c=o?n.styles:null,h=o?n.classes:null,v=0;if(null!==r)for(let D=0;D<r.length;D++){const N=r[D];"number"==typeof N?v=N:1==v?h=Be(h,N):2==v&&(c=Be(c,N+": "+r[++D]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=h:n.classesWithoutHost=h}function Fc(n,r,o,c,h=!1){for(;null!==o;){const v=r[o.index];if(null!==v&&c.push(li(v)),ai(v))for(let N=fr;N<v.length;N++){const B=v[N],K=B[un].firstChild;null!==K&&Fc(B[un],B,K,c)}const D=o.type;if(8&D)Fc(n,r,o.child,c);else if(32&D){const N=Vl(o,r);let B;for(;B=N();)c.push(B)}else if(16&D){const N=Jc(r,o);if(Array.isArray(N))c.push(...N);else{const B=cu(r[xt]);Fc(B[un],B,N,c,!0)}}o=h?o.projectionNext:o.next}return c}class sf{get rootNodes(){const r=this._lView,o=r[un];return Fc(o,r,o.firstChild,[])}constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[se]}set context(r){this._lView[se]=r}get destroyed(){return 128==(128&this._lView[Jn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[Fr];if(ai(r)){const o=r[Qn],c=o?o.indexOf(this):-1;c>-1&&(du(r,c),Hr(o,c))}this._attachedToViewContainer=!1}mc(this._lView[un],this._lView)}onDestroy(r){Pl(this._lView[un],this._lView,null,r)}markForCheck(){ra(this._cdRefInjectingView||this._lView)}detach(){this._lView[Jn]&=-65}reattach(){this._lView[Jn]|=64}detectChanges(){Ju(this._lView[un],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Uu(n,r){Ha(n,r,r[le],2,null,null)}(this._lView[un],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ne(902,!1);this._appRef=r}}class Qf extends sf{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Ju(r[un],r,r[se],!1)}checkNoChanges(){}get context(){return null}}class Jf extends ud{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=ar(r);return new oh(o,this.ngModule)}}function ep(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Zg{constructor(r,o){this.injector=r,this.parentInjector=o}get(r,o,c){c=Ln(c);const h=this.injector.get(r,Sc,c);return h!==Sc||o===Sc?h:this.parentInjector.get(r,o,c)}}class oh extends Ip{get inputs(){return ep(this.componentDef.inputs)}get outputs(){return ep(this.componentDef.outputs)}constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Gm(n){return n.map(zh).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}create(r,o,c,h){var v;let D=(h=h||this.ngModule)instanceof Eu?h:null===(v=h)||void 0===v?void 0:v.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const N=D?new Zg(r,D):r,B=N.get(Gd,null);if(null===B)throw new Ne(407,!1);const K=N.get(Tc,null),ce=B.createRenderer(null,this.componentDef),Te=this.componentDef.selectors[0][0]||"div",lt=c?function $p(n,r,o){return n.selectRootElement(r,o===It.ShadowDom)}(ce,c,this.componentDef.encapsulation):ya(ce,Te,function tp(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Te)),St=this.componentDef.onPush?288:272,en=Bp(0,null,null,1,0,null,null,null,null,null),mn=zf(null,en,null,St,null,null,B,ce,K,N,null);let jn,dr;zo(mn);try{const Ar=this.componentDef;let ln,qr=null;Ar.findHostDirectiveDefs?(ln=[],qr=new Map,Ar.findHostDirectiveDefs(Ar,ln,qr),ln.push(Ar)):ln=[Ar];const Ks=function ny(n,r){const o=n[un],c=Ve;return n[c]=r,eh(o,c,2,"#host",null)}(mn,lt),Po=function Yp(n,r,o,c,h,v,D,N){const B=h[un];!function ry(n,r,o,c){for(const h of n)r.mergedAttrs=At(r.mergedAttrs,h.hostAttrs);null!==r.mergedAttrs&&(Cu(r,r.mergedAttrs,!0),null!==o&&Ah(c,o,r))}(c,n,r,D);const K=v.createRenderer(r,o),ce=zf(h,jg(o),null,o.onPush?32:16,h[n.index],n,v,K,N||null,null,null);return B.firstCreatePass&&jp(B,n,c.length-1),_o(h,ce),h[n.index]=ce}(Ks,lt,Ar,ln,mn,B,ce);dr=Cs(en,Ve),lt&&function Kp(n,r,o,c){if(c)yn(n,o,["ng-version",Wa.full]);else{const{attrs:h,classes:v}=function Kd(n){const r=[],o=[];let c=1,h=2;for(;c<n.length;){let v=n[c];if("string"==typeof v)2===h?""!==v&&r.push(v,n[++c]):8===h&&o.push(v);else{if(!Rl(h))break;h=v}c++}return{attrs:r,classes:o}}(r.selectors[0]);h&&yn(n,o,h),v&&v.length>0&&Nd(n,o,v.join(" "))}}(ce,Ar,lt,c),void 0!==o&&function Jg(n,r,o){const c=n.projection=[];for(let h=0;h<r.length;h++){const v=o[h];c.push(null!=v?Array.from(v):null)}}(dr,this.ngContentSelectors,o),jn=function Qg(n,r,o,c,h,v){const D=sn(),N=h[un],B=Ni(D,h);Yf(N,h,D,o,null,c);for(let ce=0;ce<o.length;ce++)yo(Ws(h,N,D.directiveStart+ce,D),h);Kf(N,h,D),B&&yo(B,h);const K=Ws(h,N,D.directiveStart+D.componentOffset,D);if(n[se]=h[se]=K,null!==v)for(const ce of v)ce(K,r);return ef(N,D,n),K}(Po,Ar,ln,qr,mn,[em]),Gf(en,mn,null)}finally{Go()}return new qp(this.componentType,jn,ta(dr,mn),mn,dr)}}class qp extends Dc{constructor(r,o,c,h,v){super(),this.location=c,this._rootLView=h,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new Qf(h),this.componentType=r}setInput(r,o){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[r])){const v=this._rootLView;tc(v[un],v,h,r,o),rh(v,this._tNode.index)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function em(){const n=sn();Ya(R()[un],n)}function Zp(n){let r=function tm(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;r;){let h;if(bi(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ne(903,!1);h=r.\u0275dir}if(h){if(o){c.push(h);const D=n;D.inputs=Xp(n.inputs),D.declaredInputs=Xp(n.declaredInputs),D.outputs=Xp(n.outputs);const N=h.hostBindings;N&&a(n,N);const B=h.viewQuery,K=h.contentQueries;if(B&&Qp(n,B),K&&u(n,K),Ie(n.inputs,h.inputs),Ie(n.declaredInputs,h.declaredInputs),Ie(n.outputs,h.outputs),bi(h)&&h.data.animation){const ce=n.data;ce.animation=(ce.animation||[]).concat(h.data.animation)}}const v=h.features;if(v)for(let D=0;D<v.length;D++){const N=v[D];N&&N.ngInherit&&N(n),N===Zp&&(o=!1)}}r=Object.getPrototypeOf(r)}!function iy(n){let r=0,o=null;for(let c=n.length-1;c>=0;c--){const h=n[c];h.hostVars=r+=h.hostVars,h.hostAttrs=At(h.hostAttrs,o=At(o,h.hostAttrs))}}(c)}function Xp(n){return n===wn?{}:n===We?[]:n}function Qp(n,r){const o=n.viewQuery;n.viewQuery=o?(c,h)=>{r(c,h),o(c,h)}:r}function u(n,r){const o=n.contentQueries;n.contentQueries=o?(c,h,v)=>{r(c,h,v),o(c,h,v)}:r}function a(n,r){const o=n.hostBindings;n.hostBindings=o?(c,h)=>{r(c,h),o(c,h)}:r}function Bt(n){return!!Mr(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Mr(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Wr(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function _d(n,r,o,c){const h=R();return Wr(h,ua(),r)&&(O(),Ql(mi(),h,n,r,o,c)),_d}function np(n,r,o,c,h,v){const N=function _s(n,r,o,c){const h=Wr(n,r,o);return Wr(n,r+1,c)||h}(n,function Os(){return sr.lFrame.bindingIndex}(),o,h);return ks(2),N?r+ue(o)+c+ue(h)+v:Nr}function sm(n,r,o,c,h,v,D,N){const B=R(),K=O(),ce=n+Ve,Te=K.firstCreatePass?function s_(n,r,o,c,h,v,D,N,B){const K=r.consts,ce=eh(r,n,4,D||null,Hs(K,N));ih(r,o,ce,Hs(K,B)),Ya(r,ce);const Te=ce.tView=Bp(2,ce,c,h,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,K);return null!==r.queries&&(r.queries.template(r,ce),Te.queries=r.queries.embeddedTView(ce)),ce}(ce,K,B,r,o,c,h,v,D):K.data[ce];Zr(Te,!1);const lt=B[le].createComment("");Xc(K,B,lt,Te),yo(lt,B),_o(B,B[ce]=Gp(lt,B,lt,Te)),Zs(Te)&&Wf(K,B,Te),null!=D&&Lp(B,Te,N)}function om(n){return function Ps(n,r){return n[r]}(function Ui(){return sr.lFrame.contextLView}(),Ve+n)}function uy(n,r,o){const c=R();return Wr(c,ua(),r)&&function Ia(n,r,o,c,h,v,D,N){const B=Ni(r,o);let ce,K=r.inputs;!N&&null!=K&&(ce=K[c])?(tc(n,o,ce,c,h),Eo(r)&&rh(o,r.index)):3&r.type&&(c=function qf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),h=null!=D?D(h,r.value||"",c):h,v.setProperty(B,c,h))}(O(),mi(),c,n,r,c[le],o,!1),uy}function op(n,r,o,c,h){const D=h?"class":"style";tc(n,o,r.inputs[D],D,c)}function Jp(n,r,o,c){const h=R(),v=O(),D=Ve+n,N=h[le],B=v.firstCreatePass?function cy(n,r,o,c,h,v){const D=r.consts,B=eh(r,n,2,c,Hs(D,h));return ih(r,o,B,Hs(D,v)),null!==B.attrs&&Cu(B,B.attrs,!1),null!==B.mergedAttrs&&Cu(B,B.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,B),B}(D,v,h,r,o,c):v.data[D],K=h[D]=ya(N,r,function Nl(){return sr.lFrame.currentNamespace}()),ce=Zs(B);return Zr(B,!0),Ah(N,K,B),32!=(32&B.flags)&&Xc(v,h,K,B),0===function C(){return sr.lFrame.elementDepthCount}()&&yo(K,h),function q(){sr.lFrame.elementDepthCount++}(),ce&&(Wf(v,h,B),ef(v,B,h)),null!==c&&Lp(h,B),Jp}function Ed(){let n=sn();hs()?rs():(n=n.parent,Zr(n,!1));const r=n;!function T(){sr.lFrame.elementDepthCount--}();const o=O();return o.firstCreatePass&&(Ya(o,n),As(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function lr(n){return 0!=(8&n.flags)}(r)&&op(o,r,R(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Zn(n){return 0!=(16&n.flags)}(r)&&op(o,r,R(),r.stylesWithoutHost,!1),Ed}function am(n,r,o,c){return Jp(n,r,o,c),Ed(),am}function dy(n,r,o){const c=R(),h=O(),v=n+Ve,D=h.firstCreatePass?function lm(n,r,o,c,h){const v=r.consts,D=Hs(v,c),N=eh(r,n,8,"ng-container",D);return null!==D&&Cu(N,D,!0),ih(r,o,N,Hs(v,h)),null!==r.queries&&r.queries.elementStart(r,N),N}(v,h,c,r,o):h.data[v];Zr(D,!0);const N=c[v]=c[le].createComment("");return Xc(h,c,N,D),yo(N,c),Zs(D)&&(Wf(h,c,D),ef(h,D,c)),null!=o&&Lp(c,D),dy}function hy(){let n=sn();const r=O();return hs()?rs():(n=n.parent,Zr(n,!1)),r.firstCreatePass&&(Ya(r,n),As(n)&&r.queries.elementEnd(n)),hy}function fy(n,r,o){return dy(n,r,o),hy(),fy}function Jy(){return R()}function ap(n){return!!n&&"function"==typeof n.then}function um(n){return!!n&&"function"==typeof n.subscribe}const cm=um;function eg(n,r,o,c){const h=R(),v=O(),D=sn();return function dm(n,r,o,c,h,v,D){const N=Zs(c),K=n.firstCreatePass&&ec(n),ce=r[se],Te=vd(r);let lt=!0;if(3&c.type||D){const mn=Ni(c,r),jn=D?D(mn):mn,dr=Te.length,Ar=D?qr=>D(li(qr[c.index])):c.index;let ln=null;if(!D&&N&&(ln=function gy(n,r,o,c){const h=n.cleanup;if(null!=h)for(let v=0;v<h.length-1;v+=2){const D=h[v];if(D===o&&h[v+1]===c){const N=r[vi],B=h[v+2];return N.length>B?N[B]:null}"string"==typeof D&&(v+=2)}return null}(n,r,h,c.index)),null!==ln)(ln.__ngLastListenerFn__||ln).__ngNextListenerFn__=v,ln.__ngLastListenerFn__=v,lt=!1;else{v=hm(c,r,ce,v,!1);const qr=o.listen(jn,h,v);Te.push(v,qr),K&&K.push(h,Ar,dr,dr+1)}}else v=hm(c,r,ce,v,!1);const St=c.outputs;let en;if(lt&&null!==St&&(en=St[h])){const mn=en.length;if(mn)for(let jn=0;jn<mn;jn+=2){const Ks=r[en[jn]][en[jn+1]].subscribe(v),Po=Te.length;Te.push(v,Ks),K&&K.push(h,c.index,Po,-(Po+1))}}}(v,h,h[le],D,n,r,c),eg}function tg(n,r,o,c){try{return Pr(6,r,o),!1!==o(c)}catch(h){return Nc(n,h),!1}finally{Pr(7,r,o)}}function hm(n,r,o,c,h){return function v(D){if(D===Function)return c;ra(n.componentOffset>-1?Ei(n.index,r):r);let B=tg(r,o,c,D),K=v.__ngNextListenerFn__;for(;K;)B=tg(r,o,K,D)&&B,K=K.__ngNextListenerFn__;return h&&!1===B&&(D.preventDefault(),D.returnValue=!1),B}}function my(n=1){return function da(n){return(sr.lFrame.contextLView=function Ao(n,r){for(;n>0;)r=r[kt],n--;return r}(n,sr.lFrame.contextLView))[se]}(n)}function fm(n,r){let o=null;const c=function hd(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(!(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const v=r[h];if("*"!==v){if(null===c?Of(n,v,!0):Fg(c,v))return h}else o=h}return o}function pm(n){const r=R()[xt][Lr];if(!r.projection){const c=r.projection=vr(n?n.length:1,null),h=c.slice();let v=r.child;for(;null!==v;){const D=n?fm(v,n):0;null!==D&&(h[D]?h[D].projectionNext=v:c[D]=v,h[D]=v),v=v.next}}}function gm(n,r=0,o){const c=R(),h=O(),v=eh(h,Ve+n,16,null,o||null);null===v.projection&&(v.projection=r),rs(),32!=(32&v.flags)&&function gu(n,r,o){td(r[le],0,r,o,Zi(n,o,r),Od(o.parent||r[Lr],o,r))}(h,c,v)}function ym(n,r){return n<<17|r<<2}function dh(n){return n>>17&32767}function ng(n){return 2|n}function hh(n){return(131068&n)>>2}function vm(n,r){return-131069&n|r<<2}function lp(n){return 1|n}function Ey(n,r,o,c,h){const v=n[o+1],D=null===r;let N=c?dh(v):hh(v),B=!1;for(;0!==N&&(!1===B||D);){const ce=n[N+1];Ys(n[N],r)&&(B=!0,n[N+1]=c?lp(ce):ng(ce)),N=c?dh(ce):hh(ce)}B&&(n[o+1]=c?ng(v):lp(v))}function Ys(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&A(n,r)>=0}function wy(n,r){return function rc(n,r,o,c){const h=R(),v=O(),D=ks(2);v.firstUpdatePass&&function hv(n,r,o,c){const h=n.data;if(null===h[o+1]){const v=h[$r()],D=function f_(n,r){return r>=n.expandoStartIndex}(n,o);(function ag(n,r){return 0!=(n.flags&(r?8:16))})(v,c)&&null===r&&!D&&(r=!1),r=function p_(n,r,o,c){const h=function zs(n){const r=sr.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=c?r.residualClasses:r.residualStyles;if(null===h)0===(c?r.classBindings:r.styleBindings)&&(o=tu(o=Tu(null,n,r,o,c),r.attrs,c),v=null);else{const D=r.directiveStylingLast;if(-1===D||n[D]!==h)if(o=Tu(h,n,r,o,c),null===v){let B=function fv(n,r,o){const c=o?r.classBindings:r.styleBindings;if(0!==hh(c))return n[dh(c)]}(n,r,c);void 0!==B&&Array.isArray(B)&&(B=Tu(null,n,r,B[1],c),B=tu(B,r.attrs,c),function sg(n,r,o,c){n[dh(o?r.classBindings:r.styleBindings)]=c}(n,r,c,B))}else v=function g_(n,r,o){let c;const h=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<h;v++)c=tu(c,n[v].hostAttrs,o);return tu(c,r.attrs,o)}(n,r,c)}return void 0!==v&&(c?r.residualClasses=v:r.residualStyles=v),o}(h,v,r,c),function av(n,r,o,c,h,v){let D=v?r.classBindings:r.styleBindings,N=dh(D),B=hh(D);n[c]=o;let ce,K=!1;if(Array.isArray(o)?(ce=o[1],(null===ce||A(o,ce)>0)&&(K=!0)):ce=o,h)if(0!==B){const lt=dh(n[N+1]);n[c+1]=ym(lt,N),0!==lt&&(n[lt+1]=vm(n[lt+1],c)),n[N+1]=function sv(n,r){return 131071&n|r<<17}(n[N+1],c)}else n[c+1]=ym(N,0),0!==N&&(n[N+1]=vm(n[N+1],c)),N=c;else n[c+1]=ym(B,0),0===N?N=c:n[B+1]=vm(n[B+1],c),B=c;K&&(n[c+1]=ng(n[c+1])),Ey(n,ce,c,!0),Ey(n,ce,c,!1),function rg(n,r,o,c,h){const v=h?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&A(v,r)>=0&&(o[c+1]=lp(o[c+1]))}(r,ce,n,c,v),D=ym(N,B),v?r.classBindings=D:r.styleBindings=D}(h,v,r,o,D,c)}}(v,n,D,c),r!==Nr&&Wr(h,D,r)&&function pv(n,r,o,c,h,v,D,N){if(!(3&r.type))return;const B=n.data,K=B[N+1],ce=function ov(n){return 1==(1&n)}(K)?gv(B,r,o,h,hh(K),D):void 0;og(ce)||(og(v)||function o_(n){return 2==(2&n)}(K)&&(v=gv(B,null,o,h,N,D)),function va(n,r,o,c,h){if(r)h?n.addClass(o,c):n.removeClass(o,c);else{let v=-1===c.indexOf("-")?void 0:Ki.DashCase;null==h?n.removeStyle(o,c,v):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),v|=Ki.Important),n.setStyle(o,c,h,v))}}(c,D,js($r(),o),h,v))}(v,v.data[$r()],h,h[le],n,h[D+1]=function mv(n,r){return null==n||""===n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Le(zl(n)))),n}(r,o),c,D)}(n,r,null,!0),wy}function Tu(n,r,o,c,h){let v=null;const D=o.directiveEnd;let N=o.directiveStylingLast;for(-1===N?N=o.directiveStart:N++;N<D&&(v=r[N],c=tu(c,v.hostAttrs,h),v!==n);)N++;return null!==n&&(o.directiveStylingLast=N),c}function tu(n,r,o){const c=o?1:2;let h=-1;if(null!==r)for(let v=0;v<r.length;v++){const D=r[v];"number"==typeof D?h=D:h===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),lo(n,D,!!o||r[++v]))}return void 0===n?null:n}function gv(n,r,o,c,h,v){const D=null===r;let N;for(;h>0;){const B=n[h],K=Array.isArray(B),ce=K?B[1]:B,Te=null===ce;let lt=o[h+1];lt===Nr&&(lt=Te?We:void 0);let St=Te?S(lt,c):ce===c?lt:void 0;if(K&&!og(St)&&(St=S(B,c)),og(St)&&(N=St,D))return N;const en=n[h+1];h=D?dh(en):hh(en)}if(null!==r){let B=v?r.residualClasses:r.residualStyles;null!=B&&(N=S(B,c))}return N}function og(n){return void 0!==n}function yv(n,r=""){const o=R(),c=O(),h=n+Ve,v=c.firstCreatePass?eh(c,h,1,r,null):c.data[h],D=o[h]=function Cl(n,r){return n.createText(r)}(o[le],r);Xc(c,o,D,v),Zr(v,!1)}function Id(n){return af("",n,""),Id}function af(n,r,o){const c=R(),h=function Du(n,r,o,c){return Wr(n,ua(),o)?r+ue(o)+c:Nr}(c,n,r,o);return h!==Nr&&Jl(c,$r(),h),af}function lf(n,r,o,c,h){const v=R(),D=np(v,n,r,o,c,h);return D!==Nr&&Jl(v,$r(),D),lf}const df=void 0;var E_=["en",[["a","p"],["AM","PM"],df],[["AM","PM"],df,df],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],df,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],df,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",df,"{1} 'at' {0}",df],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Am(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let up={};function xm(n){const r=function Mm(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Sy(r);if(o)return o;const c=r.split("-")[0];if(o=Sy(c),o)return o;if("en"===c)return E_;throw new Ne(701,!1)}function Ty(n){return xm(n)[wr.PluralCase]}function Sy(n){return n in up||(up[n]=On.ng&&On.ng.common&&On.ng.common.locales&&On.ng.common.locales[n]),up[n]}var wr=(()=>((wr=wr||{})[wr.LocaleId=0]="LocaleId",wr[wr.DayPeriodsFormat=1]="DayPeriodsFormat",wr[wr.DayPeriodsStandalone=2]="DayPeriodsStandalone",wr[wr.DaysFormat=3]="DaysFormat",wr[wr.DaysStandalone=4]="DaysStandalone",wr[wr.MonthsFormat=5]="MonthsFormat",wr[wr.MonthsStandalone=6]="MonthsStandalone",wr[wr.Eras=7]="Eras",wr[wr.FirstDayOfWeek=8]="FirstDayOfWeek",wr[wr.WeekendRange=9]="WeekendRange",wr[wr.DateFormat=10]="DateFormat",wr[wr.TimeFormat=11]="TimeFormat",wr[wr.DateTimeFormat=12]="DateTimeFormat",wr[wr.NumberSymbols=13]="NumberSymbols",wr[wr.NumberFormats=14]="NumberFormats",wr[wr.CurrencyCode=15]="CurrencyCode",wr[wr.CurrencySymbol=16]="CurrencySymbol",wr[wr.CurrencyName=17]="CurrencyName",wr[wr.Currencies=18]="Currencies",wr[wr.Directionality=19]="Directionality",wr[wr.PluralCase=20]="PluralCase",wr[wr.ExtraData=21]="ExtraData",wr))();const pg="en-US";let cp=pg;function Vy(n,r,o,c,h){if(n=ve(n),Array.isArray(n))for(let v=0;v<n.length;v++)Vy(n[v],r,o,c,h);else{const v=O(),D=R();let N=bc(n)?n:ve(n.provide),B=Ep(n);const K=sn(),ce=1048575&K.providerIndexes,Te=K.directiveStart,lt=K.providerIndexes>>20;if(bc(n)||!n.multi){const St=new Mt(B,h,Oc),en=Fm(N,r,h?ce:ce+lt,Te);-1===en?(Xn(pr(K,D),v,N),Nm(v,n,r.length),r.push(N),K.directiveStart++,K.directiveEnd++,h&&(K.providerIndexes+=1048576),o.push(St),D.push(St)):(o[en]=St,D[en]=St)}else{const St=Fm(N,r,ce+lt,Te),en=Fm(N,r,ce,ce+lt),jn=en>=0&&o[en];if(h&&!jn||!h&&!(St>=0&&o[St])){Xn(pr(K,D),v,N);const dr=function e0(n,r,o,c,h){const v=new Mt(n,o,Oc);return v.multi=[],v.index=r,v.componentProviders=0,jy(v,h,c&&!o),v}(h?qv:J_,o.length,h,c,B);!h&&jn&&(o[en].providerFactory=dr),Nm(v,n,r.length,0),r.push(N),K.directiveStart++,K.directiveEnd++,h&&(K.providerIndexes+=1048576),o.push(dr),D.push(dr)}else Nm(v,n,St>-1?St:en,jy(o[h?en:St],B,!h&&c));!h&&c&&jn&&o[en].componentProviders++}}}function Nm(n,r,o,c){const h=bc(r),v=function Mf(n){return!!n.useClass}(r);if(h||v){const B=(v?ve(r.useClass):r).prototype.ngOnDestroy;if(B){const K=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const ce=K.indexOf(o);-1===ce?K.push(o,[c,B]):K[ce+1].push(c,B)}else K.push(o,B)}}}function jy(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function Fm(n,r,o,c){for(let h=o;h<c;h++)if(r[h]===n)return h;return-1}function J_(n,r,o,c){return Lm(this.multi,[])}function qv(n,r,o,c){const h=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,N=Ws(o,o[un],this.providerFactory.index,c);v=N.slice(0,D),Lm(h,v);for(let B=D;B<N.length;B++)v.push(N[B])}else v=[],Lm(h,v);return v}function Lm(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function Yv(n,r=[]){return o=>{o.providersResolver=(c,h)=>function Uy(n,r,o){const c=O();if(c.firstCreatePass){const h=bi(n);Vy(o,c.data,c.blueprint,h,!0),Vy(r,c.data,c.blueprint,h,!1)}}(c,h?h(n):n,r)}}class gf{}class Hy{}function t0(n,r){return new e(n,null!=r?r:null)}class e extends gf{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Jf(this);const c=xr(r);this._bootstrapComponents=_a(c.bootstrap),this._r3Injector=fd(r,o,[{provide:gf,useValue:this},{provide:ud,useValue:this.componentFactoryResolver}],Le(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class t extends Hy{constructor(r){super(),this.moduleType=r}create(r){return new e(this.moduleType,r)}}class s extends gf{constructor(r,o,c){super(),this.componentFactoryResolver=new Jf(this),this.instance=null;const h=new Cc([...r,{provide:gf,useValue:this},{provide:ud,useValue:this.componentFactoryResolver}],o||ld(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function d(n,r,o=null){return new s(n,r,o).injector}let g=(()=>{class n{constructor(o){this._injector=o,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(o){if(!o.standalone)return null;if(!this.cachedInjectors.has(o.id)){const c=ql(0,o.type),h=c.length>0?d([c],this._injector,`Standalone[${o.type.name}]`):null;this.cachedInjectors.set(o.id,h)}return this.cachedInjectors.get(o.id)}ngOnDestroy(){try{for(const o of this.cachedInjectors.values())null!==o&&o.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=gt({token:n,providedIn:"environment",factory:()=>new n(an(Eu))}),n})();function w(n){n.getStandaloneInjector=r=>r.get(g).getOrCreateStandaloneInjector(n)}function n0(n){return r=>{setTimeout(n,void 0,r)}}const Ih=class cI extends _.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,c){let h=r,v=o||(()=>null),D=c;if(r&&"object"==typeof r){var N,B,K;const Te=r;h=null===(N=Te.next)||void 0===N?void 0:N.bind(Te),v=null===(B=Te.error)||void 0===B?void 0:B.bind(Te),D=null===(K=Te.complete)||void 0===K?void 0:K.bind(Te)}this.__isAsync&&(v=n0(v),h&&(h=n0(h)),D&&(D=n0(D)));const ce=super.subscribe({next:h,error:v,complete:D});return r instanceof m.w0&&r.add(ce),ce}};function dI(){return this._results[Symbol.iterator]()}class r0{get changes(){return this._changes||(this._changes=new Ih)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=r0.prototype;o[Symbol.iterator]||(o[Symbol.iterator]=dI)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const c=this;c.dirty=!1;const h=function vs(n){return n.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Ko(n,r,o){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let h=n[c],v=r[c];if(o&&(h=o(h),v=o(v)),v!==h)return!1}return!0}(c._results,h,o))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wy=(()=>{class n{}return n.__NG_ELEMENT_ID__=pI,n})();const hI=Wy,fI=class extends hI{constructor(r,o,c){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(r,o){const c=this._declarationTContainer.tView,h=zf(this._declarationLView,c,r,16,null,c.declTNode,null,null,null,null,o||null);h[Gt]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[Pn];return null!==D&&(h[Pn]=D.createEmbeddedView(c)),Gf(c,h,r),new sf(h)}};function pI(){return Kv(sn(),R())}function Kv(n,r){return 4&n.type?new fI(r,n,ta(n,r)):null}let Zv=(()=>{class n{}return n.__NG_ELEMENT_ID__=gI,n})();function gI(){return H0(sn(),R())}const mI=Zv,V0=class extends mI{constructor(r,o,c){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=c}get element(){return ta(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const r=Ii(this._hostTNode,this._hostLView);if(Ti(r)){const o=Xa(r,this._hostLView),c=Gs(r);return new ps(o[un].data[c+8],o)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=j0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(r,o,c){let h,v;"number"==typeof c?h=c:null!=c&&(h=c.index,v=c.injector);const D=r.createEmbeddedView(o||{},v);return this.insert(D,h),D}createComponent(r,o,c,h,v){const D=r&&!function ys(n){return"function"==typeof n}(r);let N;if(D)N=o;else{const Te=o||{};N=Te.index,c=Te.injector,h=Te.projectableNodes,v=Te.environmentInjector||Te.ngModuleRef}const B=D?r:new oh(ar(r)),K=c||this.parentInjector;if(!v&&null==B.ngModule){const lt=(D?K:this.parentInjector).get(Eu,null);lt&&(v=lt)}const ce=B.create(K,h,void 0,v);return this.insert(ce.hostView,N),ce}insert(r,o){const c=r._lView,h=c[un];if(function po(n){return ai(n[Fr])}(c)){const ce=this.indexOf(r);if(-1!==ce)this.detach(ce);else{const Te=c[Fr],lt=new V0(Te,Te[Lr],Te[Fr]);lt.detach(lt.indexOf(r))}}const v=this._adjustIndex(o),D=this._lContainer;!function Kc(n,r,o,c){const h=fr+c,v=o.length;c>0&&(o[h-1][Jr]=r),c<v-fr?(r[Jr]=o[h],ri(o,fr+c,r)):(o.push(r),r[Jr]=null),r[Fr]=o;const D=r[Gt];null!==D&&o!==D&&function gc(n,r){const o=n[kr];r[xt]!==r[Fr][Fr][xt]&&(n[Qt]=!0),null===o?n[kr]=[r]:o.push(r)}(D,r);const N=r[Pn];null!==N&&N.insertView(n),r[Jn]|=64}(h,c,D,v);const N=kd(v,D),B=c[le],K=Hl(B,D[Nn]);return null!==K&&function ea(n,r,o,c,h,v){c[ti]=h,c[Lr]=r,Ha(n,c,o,1,h,v)}(h,D[Lr],B,c,K,N),r.attachToViewContainerRef(),ri(s0(D),v,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=j0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),c=du(this._lContainer,o);c&&(Hr(s0(this._lContainer),o),mc(c[un],c))}detach(r){const o=this._adjustIndex(r,-1),c=du(this._lContainer,o);return c&&null!=Hr(s0(this._lContainer),o)?new sf(c):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function j0(n){return n[Qn]}function s0(n){return n[Qn]||(n[Qn]=[])}function H0(n,r){let o;const c=r[n.index];if(ai(c))o=c;else{let h;if(8&n.type)h=li(c);else{const v=r[le];h=v.createComment("");const D=Ni(n,r);ja(v,Hl(v,D),h,function pu(n,r){return n.nextSibling(r)}(v,D),!1)}r[n.index]=o=Gp(c,r,h,n),_o(r,o)}return new V0(o,n,r)}class o0{constructor(r){this.queryList=r,this.matches=null}clone(){return new o0(this.queryList)}setDirty(){this.queryList.setDirty()}}class a0{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const c=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let v=0;v<c;v++){const D=o.getByIndex(v);h.push(this.queries[D.indexInDeclarationView].clone())}return new a0(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==Q0(r,o).matches&&this.queries[o].setDirty()}}class z0{constructor(r,o,c=null){this.predicate=r,this.flags=o,this.read=c}}class l0{constructor(r=[]){this.queries=r}elementStart(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let c=0;c<this.length;c++){const h=null!==o?o.length:0,v=this.getByIndex(c).embeddedTView(r,h);v&&(v.indexInDeclarationView=c,null!==o?o.push(v):o=[v])}return null!==o?new l0(o):null}template(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class u0{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new u0(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const v=c[h];this.matchTNodeWithReadOption(r,o,yI(o,v)),this.matchTNodeWithReadOption(r,o,nl(o,r,v,!1,!1))}else c===Wy?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,nl(o,r,c,!1,!1))}matchTNodeWithReadOption(r,o,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Kl||h===Zv||h===Wy&&4&o.type)this.addMatch(o.index,-2);else{const v=nl(o,r,h,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,c)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function yI(n,r){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===r)return o[c+1];return null}function _I(n,r,o,c){return-1===o?function vI(n,r){return 11&n.type?ta(n,r):4&n.type?Kv(n,r):null}(r,n):-2===o?function EI(n,r,o){return o===Kl?ta(r,n):o===Wy?Kv(r,n):o===Zv?H0(r,n):void 0}(n,r,c):Ws(n,n[un],o,r)}function G0(n,r,o,c){const h=r[Pn].queries[c];if(null===h.matches){const v=n.data,D=o.matches,N=[];for(let B=0;B<D.length;B+=2){const K=D[B];N.push(K<0?null:_I(r,v[K],D[B+1],o.metadata.read))}h.matches=N}return h.matches}function c0(n,r,o,c){const h=n.queries.getByIndex(o),v=h.matches;if(null!==v){const D=G0(n,r,h,o);for(let N=0;N<v.length;N+=2){const B=v[N];if(B>0)c.push(D[N/2]);else{const K=v[N+1],ce=r[-B];for(let Te=fr;Te<ce.length;Te++){const lt=ce[Te];lt[Gt]===lt[Fr]&&c0(lt[un],lt,K,c)}if(null!==ce[kr]){const Te=ce[kr];for(let lt=0;lt<Te.length;lt++){const St=Te[lt];c0(St[un],St,K,c)}}}}}return c}function W0(n){const r=R(),o=O(),c=ca();Qs(c+1);const h=Q0(o,c);if(n.dirty&&function ds(n){return 4==(4&n[Jn])}(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const v=h.crossesNgTemplate?c0(o,r,c,[]):G0(o,r,h,c);n.reset(v,Sg),n.notifyOnChanges()}return!0}return!1}function q0(n,r,o){const c=O();c.firstCreatePass&&(X0(c,new z0(n,r,o),-1),2==(2&r)&&(c.staticViewQueries=!0)),Z0(c,R(),r)}function Y0(n,r,o,c){const h=O();if(h.firstCreatePass){const v=sn();X0(h,new z0(r,o,c),v.index),function wI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}Z0(h,R(),o)}function K0(){return function II(n,r){return n[Pn].queries[r].queryList}(R(),ca())}function Z0(n,r,o){const c=new r0(4==(4&o));Pl(n,r,c,c.destroy),null===r[Pn]&&(r[Pn]=new a0),r[Pn].queries.push(new o0(c))}function X0(n,r,o){null===n.queries&&(n.queries=new l0),n.queries.track(new u0(r,o))}function Q0(n,r){return n.queries.getByIndex(r)}function J0(n,r){return Kv(n,r)}function d0(n){return!!xr(n)}function Qv(...n){}const yE=new Oi("Application Initializer");let Jv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Qv,this.reject=Qv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const v=this.appInits[h]();if(ap(v))o.push(v);else if(cm(v)){const D=new Promise((N,B)=>{v.subscribe({complete:N,error:B})});o.push(D)}}Promise.all(o).then(()=>{c()}).catch(h=>{this.reject(h)}),0===o.length&&c(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(an(yE,8))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vE=new Oi("AppId",{providedIn:"root",factory:function _E(){return`${m0()}${m0()}${m0()}`}});function m0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const EE=new Oi("Platform Initializer"),jI=new Oi("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let HI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const e_=new Oi("LocaleId",{providedIn:"root",factory:()=>Cn(e_,tn.Optional|tn.SkipSelf)||function zI(){return typeof $localize<"u"&&$localize.locale||pg}()}),GI=new Oi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class WI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let qI=(()=>{class n{compileModuleSync(o){return new t(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const c=this.compileModuleSync(o),v=_a(xr(o).declarations).reduce((D,N)=>{const B=ar(N);return B&&D.push(new oh(B)),D},[]);return new WI(c,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ZI=(()=>Promise.resolve(0))();function y0(n){typeof Zone>"u"?ZI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class $c{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ih(!1),this.onMicrotaskEmpty=new Ih(!1),this.onStable=new Ih(!1),this.onError=new Ih(!1),typeof Zone>"u")throw new Ne(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&o,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function XI(){let n=On.requestAnimationFrame,r=On.cancelAnimationFrame;if(typeof Zone<"u"&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function ew(n){const r=()=>{!function JI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(On,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,_0(n),n.isCheckStableRunning=!0,v0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),_0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,h,v,D,N)=>{try{return bE(n),o.invokeTask(h,v,D,N)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),CE(n)}},onInvoke:(o,c,h,v,D,N,B)=>{try{return bE(n),o.invoke(h,v,D,N,B)}finally{n.shouldCoalesceRunChangeDetection&&r(),CE(n)}},onHasTask:(o,c,h,v)=>{o.hasTask(h,v),c===h&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,_0(n),v0(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,c,h,v)=>(o.handleError(h,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$c.isInAngularZone())throw new Ne(909,!1)}static assertNotInAngularZone(){if($c.isInAngularZone())throw new Ne(909,!1)}run(r,o,c){return this._inner.run(r,o,c)}runTask(r,o,c,h){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+h,r,QI,Qv,Qv);try{return v.runTask(D,o,c)}finally{v.cancelTask(D)}}runGuarded(r,o,c){return this._inner.runGuarded(r,o,c)}runOutsideAngular(r){return this._outer.run(r)}}const QI={};function v0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function _0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,v0(n)}class tw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ih,this.onMicrotaskEmpty=new Ih,this.onStable=new Ih,this.onError=new Ih}run(r,o,c){return r.apply(o,c)}runGuarded(r,o,c){return r.apply(o,c)}runOutsideAngular(r){return r()}runTask(r,o,c,h){return r.apply(o,c)}}const DE=new Oi(""),TE=new Oi("");let E0,nw=(()=>{class n{constructor(o,c,h){this._ngZone=o,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,E0||(function rw(n){E0=n}(h),h.addToWindow(c)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$c.assertNotInAngularZone(),y0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())y0(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,h){let v=-1;c&&c>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:h})}whenStable(o,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,c,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(an($c),an(SE),an(TE))},n.\u0275prov=gt({token:n,factory:n.\u0275fac}),n})(),SE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){var h,v;return null!==(h=null===(v=E0)||void 0===v?void 0:v.findTestabilityInTree(this,o,c))&&void 0!==h?h:null}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const mf=!1;let pp=null;const AE=new Oi("AllowMultipleToken"),I0=new Oi("PlatformDestroyListeners"),xE=new Oi("appBootstrapListener");class ow{constructor(r,o){this.name=r,this.token=o}}function RE(n,r,o=[]){const c=`Platform: ${r}`,h=new Oi(c);return(v=[])=>{let D=w0();if(!D||D.injector.get(AE,!1)){const N=[...o,...v,{provide:h,useValue:!0}];n?n(N):function aw(n){if(pp&&!pp.get(AE,!1))throw new Ne(400,!1);pp=n;const r=n.get(OE);(function ME(n){const r=n.get(EE,null);r&&r.forEach(o=>o())})(n)}(function PE(n=[],r){return Xl.create({name:r,providers:[{provide:Bh,useValue:"platform"},{provide:I0,useValue:new Set([()=>pp=null])},...n]})}(N,c))}return function uw(n){const r=w0();if(!r)throw new Ne(401,!1);return r}()}}function w0(){var n,r;return null!==(n=null===(r=pp)||void 0===r?void 0:r.get(OE))&&void 0!==n?n:null}let OE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const h=function NE(n,r){let o;return o="noop"===n?new tw:("zone.js"===n?void 0:n)||new $c(r),o}(null==c?void 0:c.ngZone,function kE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(c)),v=[{provide:$c,useValue:h}];return h.run(()=>{const D=Xl.create({providers:v,parent:this.injector,name:o.moduleType.name}),N=o.create(D),B=N.injector.get(Lo,null);if(!B)throw new Ne(402,!1);return h.runOutsideAngular(()=>{const K=h.onError.subscribe({next:ce=>{B.handleError(ce)}});N.onDestroy(()=>{n_(this._modules,N),K.unsubscribe()})}),function FE(n,r,o){try{const c=o();return ap(c)?c.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(B,h,()=>{const K=N.injector.get(Jv);return K.runInitializers(),K.donePromise.then(()=>(function wd(n){it(n,"Expected localeId to be defined"),"string"==typeof n&&(cp=n.toLowerCase().replace(/_/g,"-"))}(N.injector.get(e_,pg)||pg),this._moduleDoBootstrap(N),N))})})}bootstrapModule(o,c=[]){const h=LE({},c);return function iw(n,r,o){const c=new t(o);return Promise.resolve(c)}(0,0,o).then(v=>this.bootstrapModuleFactory(v,h))}_moduleDoBootstrap(o){const c=o.injector.get(t_);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new Ne(-403,!1);o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const o=this._injector.get(I0,null);o&&(o.forEach(c=>c()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(an(Xl))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function LE(n,r){return Array.isArray(r)?r.reduce(LE,n):{...n,...r}}let t_=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(o,c,h){this._zone=o,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new J.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),D=new J.y(N=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{$c.assertNotInAngularZone(),y0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const K=this._zone.onUnstable.subscribe(()=>{$c.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{B.unsubscribe(),K.unsubscribe()}});this.isStable=(0,fe.T)(v,D.pipe((0,Fe.B)()))}bootstrap(o,c){const h=o instanceof Ip;if(!this._injector.get(Jv).done){!h&&Kn(o);throw new Ne(405,mf)}let D;D=h?o:this._injector.get(ud).resolveComponentFactory(o),this.componentTypes.push(D.componentType);const N=function sw(n){return n.isBoundToModule}(D)?void 0:this._injector.get(gf),K=D.create(Xl.NULL,[],c||D.selector,N),ce=K.location.nativeElement,Te=K.injector.get(DE,null);return null==Te||Te.registerApplication(ce),K.onDestroy(()=>{this.detachView(K.hostView),n_(this.components,K),null==Te||Te.unregisterApplication(ce)}),this._loadComponent(K),K}tick(){if(this._runningTick)throw new Ne(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;n_(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o);const c=this._injector.get(xE,[]);c.push(...this._bootstrapListeners),c.forEach(h=>h(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>n_(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ne(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(o){return new(o||n)(an($c),an(Eu),an(Lo))},n.\u0275prov=gt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function n_(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}function dw(){return!1}function hw(){}let fw=(()=>{class n{}return n.__NG_ELEMENT_ID__=pw,n})();function pw(n){return function gw(n,r,o){if(Eo(n)&&!o){const c=Ei(n.index,r);return new sf(c,c)}return 47&n.type?new sf(r[xt],r):null}(sn(),R(),16==(16&n))}class jE{constructor(){}supports(r){return Bt(r)}create(r){return new Iw(r)}}const Ew=(n,r)=>r;class Iw{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||Ew}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,c=this._removalsHead,h=0,v=null;for(;o||c;){const D=!c||o&&o.currentIndex<zE(c,h,v)?o:c,N=zE(D,h,v),B=D.currentIndex;if(D===c)h--,c=c._nextRemoved;else if(o=o._next,null==D.previousIndex)h++;else{v||(v=[]);const K=N-h,ce=B-h;if(K!=ce){for(let lt=0;lt<K;lt++){const St=lt<v.length?v[lt]:v[lt]=0,en=St+lt;ce<=en&&en<K&&(v[lt]=St+1)}v[D.previousIndex]=ce-K}}N!==B&&r(D,N,B)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Bt(r))throw new Ne(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,v,D,o=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let N=0;N<this.length;N++)v=r[N],D=this._trackByFn(N,v),null!==o&&Object.is(o.trackById,D)?(c&&(o=this._verifyReinsertion(o,v,D,N)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,D,N),c=!0),o=o._next}else h=0,function kn(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Symbol.iterator]();let c;for(;!(c=o.next()).done;)r(c.value)}}(r,N=>{D=this._trackByFn(h,N),null!==o&&Object.is(o.trackById,D)?(c&&(o=this._verifyReinsertion(o,N,D,h)),Object.is(o.item,N)||this._addIdentityChange(o,N)):(o=this._mismatch(o,N,D,h),c=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,c,h){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,v,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,v,h)):r=this._addAfter(new ww(o,c),v,h),r}_verifyReinsertion(r,o,c,h){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==v?r=this._reinsertAfter(v,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,v=r._nextRemoved;return null===h?this._removalsHead=v:h._nextRemoved=v,null===v?this._removalsTail=h:v._prevRemoved=h,this._insertAfter(r,o,c),this._addToMoves(r,c),r}_moveAfter(r,o,c){return this._unlink(r),this._insertAfter(r,o,c),this._addToMoves(r,c),r}_addAfter(r,o,c){return this._insertAfter(r,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,c){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new HE),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,c=r._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class ww{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bw{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const o=r._prevDup,c=r._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class HE{constructor(){this.map=new Map}put(r){const o=r.trackById;let c=this.map.get(o);c||(c=new bw,this.map.set(o,c)),c.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function zE(n,r,o){const c=n.previousIndex;if(null===c)return c;let h=0;return o&&c<o.length&&(h=o[c]),c+r+h}class GE{constructor(){}supports(r){return r instanceof Map||Mr(r)}create(){return new Cw}}class Cw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Mr(r)))throw new Ne(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(h,c);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const c=r._prev;return o._next=r,o._prev=c,r._prev=o,c&&(c._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const v=h._prev,D=h._next;return v&&(v._next=D),D&&(D._prev=v),h._next=null,h._prev=null,h}const c=new Dw(r);return this._records.set(r,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(c=>o(r[c],c))}}class Dw{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WE(){return new S0([new jE])}let S0=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(null!=c){const h=c.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||WE()),deps:[[n,new $,new Ir]]}}find(o){const c=this.factories.find(h=>h.supports(o));if(null!=c)return c;throw new Ne(901,!1)}}return n.\u0275prov=gt({token:n,providedIn:"root",factory:WE}),n})();function qE(){return new A0([new GE])}let A0=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(c){const h=c.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||qE()),deps:[[n,new $,new Ir]]}}find(o){const c=this.factories.find(h=>h.supports(o));if(c)return c;throw new Ne(901,!1)}}return n.\u0275prov=gt({token:n,providedIn:"root",factory:qE}),n})();const Aw=RE(null,"core",[]);let xw=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(an(t_))},n.\u0275mod=gi({type:n}),n.\u0275inj=bt({}),n})();function Mw(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function Pw(n,r){const o=ar(n),c=r.elementInjector||ld();return new oh(o).create(c,r.projectableNodes,r.hostElement,r.environmentInjector)}},433:(cn,mt,j)=>{"use strict";j.d(mt,{qu:()=>so,u:()=>sa,sg:()=>Us,u5:()=>W,JU:()=>rt,a5:()=>Yr,JJ:()=>_r,JL:()=>On,On:()=>Qn,UX:()=>ge,kI:()=>ye,_Y:()=>kr});var _=j(4650),m=j(6895),J=j(8996),fe=j(9751),Fe=j(4742),Me=j(8421),Ie=j(7669),Le=j(5403),Be=j(3268),we=j(1810),ve=j(4004);let Ue=(()=>{class L{constructor(O,te){this._renderer=O,this._elementRef=te,this.onChange=vt=>{},this.onTouched=()=>{}}setProperty(O,te){this._renderer.setProperty(this._elementRef.nativeElement,O,te)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(_.Qsj),_.Y36(_.SBq))},L.\u0275dir=_.lG2({type:L}),L})(),je=(()=>{class L extends Ue{}return L.\u0275fac=function(){let R;return function(te){return(R||(R=_.n5z(L)))(te||L)}}(),L.\u0275dir=_.lG2({type:L,features:[_.qOj]}),L})();const rt=new _.OlP("NgValueAccessor"),Ce={provide:rt,useExisting:(0,_.Gpc)(()=>Je),multi:!0},ut=new _.OlP("CompositionEventMode");let Je=(()=>{class L extends Ue{constructor(O,te,vt){super(O,te),this._compositionMode=vt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ue(){const L=(0,m.q)()?(0,m.q)().getUserAgent():"";return/android (\d+)/.test(L.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(ut,8))},L.\u0275dir=_.lG2({type:L,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,te){1&O&&_.NdJ("input",function(sn){return te._handleInput(sn.target.value)})("blur",function(){return te.onTouched()})("compositionstart",function(){return te._compositionStart()})("compositionend",function(sn){return te._compositionEnd(sn.target.value)})},features:[_._Bn([Ce]),_.qOj]}),L})();const et=!1;function Xe(L){return null==L||("string"==typeof L||Array.isArray(L))&&0===L.length}function X(L){return null!=L&&"number"==typeof L.length}const Re=new _.OlP("NgValidators"),ne=new _.OlP("NgAsyncValidators"),Qe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ye{static min(R){return function qe(L){return R=>{if(Xe(R.value)||Xe(L))return null;const O=parseFloat(R.value);return!isNaN(O)&&O<L?{min:{min:L,actual:R.value}}:null}}(R)}static max(R){return function nt(L){return R=>{if(Xe(R.value)||Xe(L))return null;const O=parseFloat(R.value);return!isNaN(O)&&O>L?{max:{max:L,actual:R.value}}:null}}(R)}static required(R){return function ct(L){return Xe(L.value)?{required:!0}:null}(R)}static requiredTrue(R){return function ze(L){return!0===L.value?null:{required:!0}}(R)}static email(R){return function _t(L){return Xe(L.value)||Qe.test(L.value)?null:{email:!0}}(R)}static minLength(R){return function ot(L){return R=>Xe(R.value)||!X(R.value)?null:R.value.length<L?{minlength:{requiredLength:L,actualLength:R.value.length}}:null}(R)}static maxLength(R){return function xe(L){return R=>X(R.value)&&R.value.length>L?{maxlength:{requiredLength:L,actualLength:R.value.length}}:null}(R)}static pattern(R){return function Ae(L){if(!L)return Oe;let R,O;return"string"==typeof L?(O="","^"!==L.charAt(0)&&(O+="^"),O+=L,"$"!==L.charAt(L.length-1)&&(O+="$"),R=new RegExp(O)):(O=L.toString(),R=L),te=>{if(Xe(te.value))return null;const vt=te.value;return R.test(vt)?null:{pattern:{requiredPattern:O,actualValue:vt}}}}(R)}static nullValidator(R){return null}static compose(R){return Ee(R)}static composeAsync(R){return nn(R)}}function Oe(L){return null}function it(L){return null!=L}function ht(L){const R=(0,_.QGY)(L)?(0,J.D)(L):L;if(et&&!(0,_.CqO)(R)){let O="Expected async validator to return Promise or Observable.";throw"object"==typeof L&&(O+=" Are you using a synchronous validator where an async validator is expected?"),new _.vHH(-1101,O)}return R}function Zt(L){let R={};return L.forEach(O=>{R=null!=O?{...R,...O}:R}),0===Object.keys(R).length?null:R}function Vt(L,R){return R.map(O=>O(L))}function gt(L){return L.map(R=>function vn(L){return!L.validate}(R)?R:O=>R.validate(O))}function Ee(L){if(!L)return null;const R=L.filter(it);return 0==R.length?null:function(O){return Zt(Vt(O,R))}}function bt(L){return null!=L?Ee(gt(L)):null}function nn(L){if(!L)return null;const R=L.filter(it);return 0==R.length?null:function(O){return function me(...L){const R=(0,Ie.jO)(L),{args:O,keys:te}=(0,Fe.D)(L),vt=new fe.y(sn=>{const{length:br}=O;if(!br)return void sn.complete();const oi=new Array(br);let Zr=br,hs=br;for(let rs=0;rs<br;rs++){let Ui=!1;(0,Me.Xf)(O[rs]).subscribe((0,Le.x)(sn,Ca=>{Ui||(Ui=!0,hs--),oi[rs]=Ca},()=>Zr--,void 0,()=>{(!Zr||!Ui)&&(hs||sn.next(te?(0,we.n)(te,oi):oi),sn.complete())}))}});return R?vt.pipe((0,Be.Z)(R)):vt}(Vt(O,R).map(ht)).pipe((0,ve.U)(Zt))}}function fn(L){return null!=L?nn(gt(L)):null}function Mn(L,R){return null===L?[R]:Array.isArray(L)?[...L,R]:[L,R]}function _n(L){return L._rawValidators}function Xt(L){return L._rawAsyncValidators}function Tn(L){return L?Array.isArray(L)?L:[L]:[]}function Hn(L,R){return Array.isArray(L)?L.includes(R):L===R}function or(L,R){const O=Tn(R);return Tn(L).forEach(vt=>{Hn(O,vt)||O.push(vt)}),O}function En(L,R){return Tn(R).filter(O=>!Hn(L,O))}class gr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(R){this._rawValidators=R||[],this._composedValidatorFn=bt(this._rawValidators)}_setAsyncValidators(R){this._rawAsyncValidators=R||[],this._composedAsyncValidatorFn=fn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(R){this._onDestroyCallbacks.push(R)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(R=>R()),this._onDestroyCallbacks=[]}reset(R){this.control&&this.control.reset(R)}hasError(R,O){return!!this.control&&this.control.hasError(R,O)}getError(R,O){return this.control?this.control.getError(R,O):null}}class tn extends gr{get formDirective(){return null}get path(){return null}}class Yr extends gr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rr{constructor(R){this._cd=R}get isTouched(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.touched)}get isUntouched(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.untouched)}get isPristine(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.pristine)}get isDirty(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.dirty)}get isValid(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.valid)}get isInvalid(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.invalid)}get isPending(){var R,O;return!(null===(R=this._cd)||void 0===R||null===(O=R.control)||void 0===O||!O.pending)}get isSubmitted(){var R;return!(null===(R=this._cd)||void 0===R||!R.submitted)}}let _r=(()=>{class L extends Rr{constructor(O){super(O)}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(Yr,2))},L.\u0275dir=_.lG2({type:L,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,te){2&O&&_.ekj("ng-untouched",te.isUntouched)("ng-touched",te.isTouched)("ng-pristine",te.isPristine)("ng-dirty",te.isDirty)("ng-valid",te.isValid)("ng-invalid",te.isInvalid)("ng-pending",te.isPending)},features:[_.qOj]}),L})(),On=(()=>{class L extends Rr{constructor(O){super(O)}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(tn,10))},L.\u0275dir=_.lG2({type:L,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,te){2&O&&_.ekj("ng-untouched",te.isUntouched)("ng-touched",te.isTouched)("ng-pristine",te.isPristine)("ng-dirty",te.isDirty)("ng-valid",te.isValid)("ng-invalid",te.isInvalid)("ng-pending",te.isPending)("ng-submitted",te.isSubmitted)},features:[_.qOj]}),L})();function an(L,R){return L?`with name: '${R}'`:`at index: ${R}`}const In=!1,$n="VALID",Er="INVALID",$e="PENDING",Pe="DISABLED";function Ke(L){return(We(L)?L.validators:L)||null}function It(L,R){return(We(R)?R.asyncValidators:L)||null}function We(L){return null!=L&&!Array.isArray(L)&&"object"==typeof L}function He(L,R,O){const te=L.controls;if(!(R?Object.keys(te):te).length)throw new _.vHH(1e3,In?function jt(L){return`\n    There are no form controls registered with this ${L?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(R):"");if(!te[O])throw new _.vHH(1001,In?function Cn(L,R){return`Cannot find form control ${an(L,R)}`}(R,O):"")}function De(L,R,O){L._forEachChild((te,vt)=>{if(void 0===O[vt])throw new _.vHH(1002,In?function Ln(L,R){return`Must supply a value for form control ${an(L,R)}`}(R,vt):"")})}class Et{constructor(R,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(R),this._assignAsyncValidators(O)}get validator(){return this._composedValidatorFn}set validator(R){this._rawValidators=this._composedValidatorFn=R}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(R){this._rawAsyncValidators=this._composedAsyncValidatorFn=R}get parent(){return this._parent}get valid(){return this.status===$n}get invalid(){return this.status===Er}get pending(){return this.status==$e}get disabled(){return this.status===Pe}get enabled(){return this.status!==Pe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(R){this._assignValidators(R)}setAsyncValidators(R){this._assignAsyncValidators(R)}addValidators(R){this.setValidators(or(R,this._rawValidators))}addAsyncValidators(R){this.setAsyncValidators(or(R,this._rawAsyncValidators))}removeValidators(R){this.setValidators(En(R,this._rawValidators))}removeAsyncValidators(R){this.setAsyncValidators(En(R,this._rawAsyncValidators))}hasValidator(R){return Hn(this._rawValidators,R)}hasAsyncValidator(R){return Hn(this._rawAsyncValidators,R)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(R={}){this.touched=!0,this._parent&&!R.onlySelf&&this._parent.markAsTouched(R)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(R=>R.markAllAsTouched())}markAsUntouched(R={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}markAsDirty(R={}){this.pristine=!1,this._parent&&!R.onlySelf&&this._parent.markAsDirty(R)}markAsPristine(R={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}markAsPending(R={}){this.status=$e,!1!==R.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!R.onlySelf&&this._parent.markAsPending(R)}disable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=Pe,this.errors=null,this._forEachChild(te=>{te.disable({...R,onlySelf:!0})}),this._updateValue(),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(te=>te(!0))}enable(R={}){const O=this._parentMarkedDirty(R.onlySelf);this.status=$n,this._forEachChild(te=>{te.enable({...R,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent}),this._updateAncestors({...R,skipPristineCheck:O}),this._onDisabledChange.forEach(te=>te(!1))}_updateAncestors(R){this._parent&&!R.onlySelf&&(this._parent.updateValueAndValidity(R),R.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(R){this._parent=R}getRawValue(){return this.value}updateValueAndValidity(R={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$n||this.status===$e)&&this._runAsyncValidator(R.emitEvent)),!1!==R.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!R.onlySelf&&this._parent.updateValueAndValidity(R)}_updateTreeValidity(R={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(R)),this.updateValueAndValidity({onlySelf:!0,emitEvent:R.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pe:$n}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(R){if(this.asyncValidator){this.status=$e,this._hasOwnPendingAsyncValidator=!0;const O=ht(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(te=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(te,{emitEvent:R})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(R,O={}){this.errors=R,this._updateControlsErrors(!1!==O.emitEvent)}get(R){let O=R;return null==O||(Array.isArray(O)||(O=O.split(".")),0===O.length)?null:O.reduce((te,vt)=>te&&te._find(vt),this)}getError(R,O){const te=O?this.get(O):this;return te&&te.errors?te.errors[R]:null}hasError(R,O){return!!this.getError(R,O)}get root(){let R=this;for(;R._parent;)R=R._parent;return R}_updateControlsErrors(R){this.status=this._calculateStatus(),R&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(R)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Pe:this.errors?Er:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($e)?$e:this._anyControlsHaveStatus(Er)?Er:$n}_anyControlsHaveStatus(R){return this._anyControls(O=>O.status===R)}_anyControlsDirty(){return this._anyControls(R=>R.dirty)}_anyControlsTouched(){return this._anyControls(R=>R.touched)}_updatePristine(R={}){this.pristine=!this._anyControlsDirty(),this._parent&&!R.onlySelf&&this._parent._updatePristine(R)}_updateTouched(R={}){this.touched=this._anyControlsTouched(),this._parent&&!R.onlySelf&&this._parent._updateTouched(R)}_registerOnCollectionChange(R){this._onCollectionChange=R}_setUpdateStrategy(R){We(R)&&null!=R.updateOn&&(this._updateOn=R.updateOn)}_parentMarkedDirty(R){return!R&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(R){return null}_assignValidators(R){this._rawValidators=Array.isArray(R)?R.slice():R,this._composedValidatorFn=function Nt(L){return Array.isArray(L)?bt(L):L||null}(this._rawValidators)}_assignAsyncValidators(R){this._rawAsyncValidators=Array.isArray(R)?R.slice():R,this._composedAsyncValidatorFn=function wn(L){return Array.isArray(L)?fn(L):L||null}(this._rawAsyncValidators)}}class Lt extends Et{constructor(R,O,te){super(Ke(O),It(te,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(R,O){return this.controls[R]?this.controls[R]:(this.controls[R]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(R,O,te={}){this.registerControl(R,O),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}removeControl(R,O={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(R,O,te={}){this.controls[R]&&this.controls[R]._registerOnCollectionChange(()=>{}),delete this.controls[R],O&&this.registerControl(R,O),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}contains(R){return this.controls.hasOwnProperty(R)&&this.controls[R].enabled}setValue(R,O={}){De(this,!0,R),Object.keys(R).forEach(te=>{He(this,!0,te),this.controls[te].setValue(R[te],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(Object.keys(R).forEach(te=>{const vt=this.controls[te];vt&&vt.patchValue(R[te],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R={},O={}){this._forEachChild((te,vt)=>{te.reset(R[vt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(R,O,te)=>(R[te]=O.getRawValue(),R))}_syncPendingControls(){let R=this._reduceChildren(!1,(O,te)=>!!te._syncPendingControls()||O);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){Object.keys(this.controls).forEach(O=>{const te=this.controls[O];te&&R(te,O)})}_setUpControls(){this._forEachChild(R=>{R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(R){for(const[O,te]of Object.entries(this.controls))if(this.contains(O)&&R(te))return!0;return!1}_reduceValue(){return this._reduceChildren({},(O,te,vt)=>((te.enabled||this.disabled)&&(O[vt]=te.value),O))}_reduceChildren(R,O){let te=R;return this._forEachChild((vt,sn)=>{te=O(te,vt,sn)}),te}_allControlsDisabled(){for(const R of Object.keys(this.controls))if(this.controls[R].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(R){return this.controls.hasOwnProperty(R)?this.controls[R]:null}}class Rn extends Lt{}const Qr=new _.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>pi}),pi="always";function Xi(L,R){return[...R.path,L]}function gi(L,R,O=pi){var te,vt;Mi(L,R),R.valueAccessor.writeValue(L.value),(L.disabled||"always"===O)&&(null===(te=(vt=R.valueAccessor).setDisabledState)||void 0===te||te.call(vt,L.disabled)),function Or(L,R){R.valueAccessor.registerOnChange(O=>{L._pendingValue=O,L._pendingChange=!0,L._pendingDirty=!0,"change"===L.updateOn&&Kn(L,R)})}(L,R),function xr(L,R){const O=(te,vt)=>{R.valueAccessor.writeValue(te),vt&&R.viewToModelUpdate(te)};L.registerOnChange(O),R._registerOnDestroy(()=>{L._unregisterOnChange(O)})}(L,R),function tr(L,R){R.valueAccessor.registerOnTouched(()=>{L._pendingTouched=!0,"blur"===L.updateOn&&L._pendingChange&&Kn(L,R),"submit"!==L.updateOn&&L.markAsTouched()})}(L,R),function es(L,R){if(R.valueAccessor.setDisabledState){const O=te=>{R.valueAccessor.setDisabledState(te)};L.registerOnDisabledChange(O),R._registerOnDestroy(()=>{L._unregisterOnDisabledChange(O)})}}(L,R)}function ki(L,R,O=!0){const te=()=>{};R.valueAccessor&&(R.valueAccessor.registerOnChange(te),R.valueAccessor.registerOnTouched(te)),ar(L,R),L&&(R._invokeOnDestroyCallbacks(),L._registerOnCollectionChange(()=>{}))}function Tr(L,R){L.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(R)})}function Mi(L,R){const O=_n(L);null!==R.validator?L.setValidators(Mn(O,R.validator)):"function"==typeof O&&L.setValidators([O]);const te=Xt(L);null!==R.asyncValidator?L.setAsyncValidators(Mn(te,R.asyncValidator)):"function"==typeof te&&L.setAsyncValidators([te]);const vt=()=>L.updateValueAndValidity();Tr(R._rawValidators,vt),Tr(R._rawAsyncValidators,vt)}function ar(L,R){let O=!1;if(null!==L){if(null!==R.validator){const vt=_n(L);if(Array.isArray(vt)&&vt.length>0){const sn=vt.filter(br=>br!==R.validator);sn.length!==vt.length&&(O=!0,L.setValidators(sn))}}if(null!==R.asyncValidator){const vt=Xt(L);if(Array.isArray(vt)&&vt.length>0){const sn=vt.filter(br=>br!==R.asyncValidator);sn.length!==vt.length&&(O=!0,L.setAsyncValidators(sn))}}}const te=()=>{};return Tr(R._rawValidators,te),Tr(R._rawAsyncValidators,te),O}function Kn(L,R){L._pendingDirty&&L.markAsDirty(),L.setValue(L._pendingValue,{emitModelToViewChange:!1}),R.viewToModelUpdate(L._pendingValue),L._pendingChange=!1}function Jr(L,R){if(!L.hasOwnProperty("model"))return!1;const O=L.model;return!!O.isFirstChange()||!Object.is(R,O.currentValue)}function vi(L,R){if(!R)return null;let O,te,vt;return Array.isArray(R),R.forEach(sn=>{sn.constructor===Je?O=sn:function Ri(L){return Object.getPrototypeOf(L.constructor)===je}(sn)?te=sn:vt=sn}),vt||te||O||null}function Ye(L,R){const O=L.indexOf(R);O>-1&&L.splice(O,1)}function Ct(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}const kt=class extends Et{constructor(R=null,O,te){super(Ke(O),It(te,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(R),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),We(O)&&(O.nonNullable||O.initialValueIsDefault)&&(this.defaultValue=Ct(R)?R.value:R)}setValue(R,O={}){this.value=this._pendingValue=R,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(te=>te(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(R,O={}){this.setValue(R,O)}reset(R=this.defaultValue,O={}){this._applyFormState(R),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(R){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(R){this._onChange.push(R)}_unregisterOnChange(R){Ye(this._onChange,R)}registerOnDisabledChange(R){this._onDisabledChange.push(R)}_unregisterOnDisabledChange(R){Ye(this._onDisabledChange,R)}_forEachChild(R){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(R){Ct(R)?(this.value=this._pendingValue=R.value,R.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=R}},Qt={provide:Yr,useExisting:(0,_.Gpc)(()=>Qn)},Nn=(()=>Promise.resolve())();let Qn=(()=>{class L extends Yr{constructor(O,te,vt,sn,br,oi){super(),this._changeDetectorRef=br,this.callSetDisabledState=oi,this.control=new kt,this._registered=!1,this.update=new _.vpe,this._parent=O,this._setValidators(te),this._setAsyncValidators(vt),this.valueAccessor=vi(0,sn)}ngOnChanges(O){if(this._checkForErrors(),!this._registered||"name"in O){if(this._registered&&(this._checkName(),this.formDirective)){const te=O.name.previousValue;this.formDirective.removeControl({name:te,path:this._getPath(te)})}this._setUpControl()}"isDisabled"in O&&this._updateDisabled(O),Jr(O,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gi(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(O){Nn.then(()=>{var te;this.control.setValue(O,{emitViewToModelChange:!1}),null===(te=this._changeDetectorRef)||void 0===te||te.markForCheck()})}_updateDisabled(O){const te=O.isDisabled.currentValue,vt=0!==te&&(0,_.D6c)(te);Nn.then(()=>{var sn;vt&&!this.control.disabled?this.control.disable():!vt&&this.control.disabled&&this.control.enable(),null===(sn=this._changeDetectorRef)||void 0===sn||sn.markForCheck()})}_getPath(O){return this._parent?Xi(O,this._parent):[O]}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(tn,9),_.Y36(Re,10),_.Y36(ne,10),_.Y36(rt,10),_.Y36(_.sBO,8),_.Y36(Qr,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([Qt]),_.qOj,_.TTD]}),L})(),kr=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275dir=_.lG2({type:L,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),L})(),As=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({}),L})();const co=new _.OlP("NgModelWithFormControlWarning"),ns={provide:tn,useExisting:(0,_.Gpc)(()=>Us)};let Us=(()=>{class L extends tn{constructor(O,te,vt){super(),this.callSetDisabledState=vt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(O),this._setAsyncValidators(te)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ar(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const te=this.form.get(O.path);return gi(te,O,this.callSetDisabledState),te.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),te}getControl(O){return this.form.get(O.path)}removeControl(O){ki(O.control||null,O,!1),function se(L,R){const O=L.indexOf(R);O>-1&&L.splice(O,1)}(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,te){this.form.get(O.path).setValue(te)}onSubmit(O){var te;return this.submitted=!0,function Lr(L,R){L._syncPendingControls(),R.forEach(O=>{const te=O.control;"submit"===te.updateOn&&te._pendingChange&&(O.viewToModelUpdate(te._pendingValue),te._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),"dialog"===(null==O||null===(te=O.target)||void 0===te?void 0:te.method)}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const te=O.control,vt=this.form.get(O.path);te!==vt&&(ki(te||null,O),(L=>L instanceof kt)(vt)&&(gi(vt,O,this.callSetDisabledState),O.control=vt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const te=this.form.get(O.path);(function Br(L,R){Mi(L,R)})(te,O),te.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const te=this.form.get(O.path);te&&function Gi(L,R){return ar(L,R)}(te,O)&&te.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Mi(this.form,this),this._oldForm&&ar(this._oldForm,this)}_checkFormPresent(){}}return L.\u0275fac=function(O){return new(O||L)(_.Y36(Re,10),_.Y36(ne,10),_.Y36(Qr,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","formGroup",""]],hostBindings:function(O,te){1&O&&_.NdJ("submit",function(sn){return te.onSubmit(sn)})("reset",function(){return te.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([ns]),_.qOj,_.TTD]}),L})();const cs={provide:Yr,useExisting:(0,_.Gpc)(()=>sa)};let sa=(()=>{class L extends Yr{set isDisabled(O){}constructor(O,te,vt,sn,br){super(),this._ngModelWarningConfig=br,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(te),this._setAsyncValidators(vt),this.valueAccessor=vi(0,sn)}ngOnChanges(O){this._added||this._setUpControl(),Jr(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return Xi(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return L._ngModelWarningSentOnce=!1,L.\u0275fac=function(O){return new(O||L)(_.Y36(tn,13),_.Y36(Re,10),_.Y36(ne,10),_.Y36(rt,10),_.Y36(co,8))},L.\u0275dir=_.lG2({type:L,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([cs]),_.qOj,_.TTD]}),L})(),Hs=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[As]}),L})();class Do extends Et{constructor(R,O,te){super(Ke(O),It(te,O)),this.controls=R,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(R){return this.controls[this._adjustIndex(R)]}push(R,O={}){this.controls.push(R),this._registerControl(R),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(R,O,te={}){this.controls.splice(R,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:te.emitEvent})}removeAt(R,O={}){let te=this._adjustIndex(R);te<0&&(te=0),this.controls[te]&&this.controls[te]._registerOnCollectionChange(()=>{}),this.controls.splice(te,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(R,O,te={}){let vt=this._adjustIndex(R);vt<0&&(vt=0),this.controls[vt]&&this.controls[vt]._registerOnCollectionChange(()=>{}),this.controls.splice(vt,1),O&&(this.controls.splice(vt,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:te.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(R,O={}){De(this,!1,R),R.forEach((te,vt)=>{He(this,!1,vt),this.at(vt).setValue(te,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(R,O={}){null!=R&&(R.forEach((te,vt)=>{this.at(vt)&&this.at(vt).patchValue(te,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(R=[],O={}){this._forEachChild((te,vt)=>{te.reset(R[vt],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(R=>R.getRawValue())}clear(R={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:R.emitEvent}))}_adjustIndex(R){return R<0?R+this.length:R}_syncPendingControls(){let R=this.controls.reduce((O,te)=>!!te._syncPendingControls()||O,!1);return R&&this.updateValueAndValidity({onlySelf:!0}),R}_forEachChild(R){this.controls.forEach((O,te)=>{R(O,te)})}_updateValue(){this.value=this.controls.filter(R=>R.enabled||this.disabled).map(R=>R.value)}_anyControls(R){return this.controls.some(O=>O.enabled&&R(O))}_setUpControls(){this._forEachChild(R=>this._registerControl(R))}_allControlsDisabled(){for(const R of this.controls)if(R.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(R){R.setParent(this),R._registerOnCollectionChange(this._onCollectionChange)}_find(R){var O;return null!==(O=this.at(R))&&void 0!==O?O:null}}function Ho(L){return!!L&&(void 0!==L.asyncValidators||void 0!==L.validators||void 0!==L.updateOn)}let so=(()=>{class L{constructor(){this.useNonNullable=!1}get nonNullable(){const O=new L;return O.useNonNullable=!0,O}group(O,te=null){const vt=this._reduceControls(O);let sn={};return Ho(te)?sn=te:null!==te&&(sn.validators=te.validator,sn.asyncValidators=te.asyncValidator),new Lt(vt,sn)}record(O,te=null){const vt=this._reduceControls(O);return new Rn(vt,te)}control(O,te,vt){let sn={};return this.useNonNullable?(Ho(te)?sn=te:(sn.validators=te,sn.asyncValidators=vt),new kt(O,{...sn,nonNullable:!0})):new kt(O,te,vt)}array(O,te,vt){const sn=O.map(br=>this._createControl(br));return new Do(sn,te,vt)}_reduceControls(O){const te={};return Object.keys(O).forEach(vt=>{te[vt]=this._createControl(O[vt])}),te}_createControl(O){return O instanceof kt||O instanceof Et?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275prov=_.Yz7({token:L,factory:L.\u0275fac,providedIn:"root"}),L})(),W=(()=>{class L{static withConfig(O){var te;return{ngModule:L,providers:[{provide:Qr,useValue:null!==(te=O.callSetDisabledState)&&void 0!==te?te:pi}]}}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[Hs]}),L})(),ge=(()=>{class L{static withConfig(O){var te,vt;return{ngModule:L,providers:[{provide:co,useValue:null!==(te=O.warnOnNgModelWithFormControl)&&void 0!==te?te:"always"},{provide:Qr,useValue:null!==(vt=O.callSetDisabledState)&&void 0!==vt?vt:pi}]}}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=_.oAB({type:L}),L.\u0275inj=_.cJS({imports:[Hs]}),L})()},1481:(cn,mt,j)=>{"use strict";j.d(mt,{Dx:()=>On,b2:()=>Yr,q6:()=>or});var _=j(6895),m=j(4650);class J extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends J{static makeCurrent(){(0,_.HT)(new fe)}onAndCancel(He,De,Et){return He.addEventListener(De,Et,!1),()=>{He.removeEventListener(De,Et,!1)}}dispatchEvent(He,De){He.dispatchEvent(De)}remove(He){He.parentNode&&He.parentNode.removeChild(He)}createElement(He,De){return(De=De||this.getDefaultDocument()).createElement(He)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(He){return He.nodeType===Node.ELEMENT_NODE}isShadowRoot(He){return He instanceof DocumentFragment}getGlobalEventTarget(He,De){return"window"===De?window:"document"===De?He:"body"===De?He.body:null}getBaseHref(He){const De=function Me(){return Fe=Fe||document.querySelector("base"),Fe?Fe.getAttribute("href"):null}();return null==De?null:function Le(We){Ie=Ie||document.createElement("a"),Ie.setAttribute("href",We);const He=Ie.pathname;return"/"===He.charAt(0)?He:`/${He}`}(De)}resetBaseElement(){Fe=null}getUserAgent(){return window.navigator.userAgent}getCookie(He){return(0,_.Mx)(document.cookie,He)}}let Ie,Fe=null;const Be=new m.OlP("TRANSITION_ID"),me=[{provide:m.ip1,useFactory:function we(We,He,De){return()=>{De.get(m.CZH).donePromise.then(()=>{const Et=(0,_.q)(),Lt=He.querySelectorAll(`style[ng-transition="${We}"]`);for(let qt=0;qt<Lt.length;qt++)Et.remove(Lt[qt])})}},deps:[Be,_.K0,m.zs3],multi:!0}];let Ue=(()=>{class We{build(){return new XMLHttpRequest}}return We.\u0275fac=function(De){return new(De||We)},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();const je=new m.OlP("EventManagerPlugins");let rt=(()=>{class We{constructor(De,Et){this._zone=Et,this._eventNameToPlugin=new Map,De.forEach(Lt=>{Lt.manager=this}),this._plugins=De.slice().reverse()}addEventListener(De,Et,Lt){return this._findPluginFor(Et).addEventListener(De,Et,Lt)}addGlobalEventListener(De,Et,Lt){return this._findPluginFor(Et).addGlobalEventListener(De,Et,Lt)}getZone(){return this._zone}_findPluginFor(De){const Et=this._eventNameToPlugin.get(De);if(Et)return Et;const Lt=this._plugins;for(let qt=0;qt<Lt.length;qt++){const Bn=Lt[qt];if(Bn.supports(De))return this._eventNameToPlugin.set(De,Bn),Bn}throw new Error(`No event manager plugin found for event ${De}`)}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(je),m.LFG(m.R0b))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();class Dt{constructor(He){this._doc=He}addGlobalEventListener(He,De,Et){const Lt=(0,_.q)().getGlobalEventTarget(this._doc,He);if(!Lt)throw new Error(`Unsupported event target ${Lt} for event ${De}`);return this.addEventListener(Lt,De,Et)}}let Ne=(()=>{class We{constructor(){this.usageCount=new Map}addStyles(De){for(const Et of De)1===this.changeUsageCount(Et,1)&&this.onStyleAdded(Et)}removeStyles(De){for(const Et of De)0===this.changeUsageCount(Et,-1)&&this.onStyleRemoved(Et)}onStyleRemoved(De){}onStyleAdded(De){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(De,Et){var Lt;const qt=this.usageCount;let Bn=null!==(Lt=qt.get(De))&&void 0!==Lt?Lt:0;return Bn+=Et,Bn>0?qt.set(De,Bn):qt.delete(De),Bn}ngOnDestroy(){for(const De of this.getAllStyles())this.onStyleRemoved(De);this.usageCount.clear()}}return We.\u0275fac=function(De){return new(De||We)},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})(),Ce=(()=>{class We extends Ne{constructor(De){super(),this.doc=De,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(De){for(const Et of this.hostNodes)this.addStyleToHost(Et,De)}onStyleRemoved(De){const Et=this.styleRef,Lt=Et.get(De);null==Lt||Lt.forEach(qt=>qt.remove()),Et.delete(De)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(De){this.hostNodes.add(De);for(const Et of this.getAllStyles())this.addStyleToHost(De,Et)}removeHost(De){this.hostNodes.delete(De)}addStyleToHost(De,Et){const Lt=this.doc.createElement("style");Lt.textContent=Et,De.appendChild(Lt);const qt=this.styleRef.get(Et);qt?qt.push(Lt):this.styleRef.set(Et,[Lt])}resetHostNodes(){const De=this.hostNodes;De.clear(),De.add(this.doc.head)}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(_.K0))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();const ue={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ut=/%COMP%/g,ne=new m.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qe(We,He){return He.flat(100).map(De=>De.replace(ut,We))}function nt(We){return He=>{if("__ngUnwrap__"===He)return We;!1===We(He)&&(He.preventDefault(),He.returnValue=!1)}}let ct=(()=>{class We{constructor(De,Et,Lt,qt){this.eventManager=De,this.sharedStylesHost=Et,this.appId=Lt,this.removeStylesOnCompDestory=qt,this.rendererByCompId=new Map,this.defaultRenderer=new ze(De)}createRenderer(De,Et){if(!De||!Et)return this.defaultRenderer;const Lt=this.getOrCreateRenderer(De,Et);return Lt instanceof it?Lt.applyToHost(De):Lt instanceof Oe&&Lt.applyStyles(),Lt}getOrCreateRenderer(De,Et){const Lt=this.rendererByCompId;let qt=Lt.get(Et.id);if(!qt){const Bn=this.eventManager,Rn=this.sharedStylesHost,hr=this.removeStylesOnCompDestory;switch(Et.encapsulation){case m.ifc.Emulated:qt=new it(Bn,Rn,Et,this.appId,hr);break;case m.ifc.ShadowDom:return new Ae(Bn,Rn,De,Et);default:qt=new Oe(Bn,Rn,Et,hr)}qt.onDestroy=()=>Lt.delete(Et.id),Lt.set(Et.id,qt)}return qt}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(rt),m.LFG(Ce),m.LFG(m.AFp),m.LFG(ne))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();class ze{constructor(He){this.eventManager=He,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(He,De){return De?document.createElementNS(ue[De]||De,He):document.createElement(He)}createComment(He){return document.createComment(He)}createText(He){return document.createTextNode(He)}appendChild(He,De){(xe(He)?He.content:He).appendChild(De)}insertBefore(He,De,Et){He&&(xe(He)?He.content:He).insertBefore(De,Et)}removeChild(He,De){He&&He.removeChild(De)}selectRootElement(He,De){let Et="string"==typeof He?document.querySelector(He):He;if(!Et)throw new Error(`The selector "${He}" did not match any elements`);return De||(Et.textContent=""),Et}parentNode(He){return He.parentNode}nextSibling(He){return He.nextSibling}setAttribute(He,De,Et,Lt){if(Lt){De=Lt+":"+De;const qt=ue[Lt];qt?He.setAttributeNS(qt,De,Et):He.setAttribute(De,Et)}else He.setAttribute(De,Et)}removeAttribute(He,De,Et){if(Et){const Lt=ue[Et];Lt?He.removeAttributeNS(Lt,De):He.removeAttribute(`${Et}:${De}`)}else He.removeAttribute(De)}addClass(He,De){He.classList.add(De)}removeClass(He,De){He.classList.remove(De)}setStyle(He,De,Et,Lt){Lt&(m.JOm.DashCase|m.JOm.Important)?He.style.setProperty(De,Et,Lt&m.JOm.Important?"important":""):He.style[De]=Et}removeStyle(He,De,Et){Et&m.JOm.DashCase?He.style.removeProperty(De):He.style[De]=""}setProperty(He,De,Et){He[De]=Et}setValue(He,De){He.nodeValue=De}listen(He,De,Et){return"string"==typeof He?this.eventManager.addGlobalEventListener(He,De,nt(Et)):this.eventManager.addEventListener(He,De,nt(Et))}}function xe(We){return"TEMPLATE"===We.tagName&&void 0!==We.content}class Ae extends ze{constructor(He,De,Et,Lt){super(He),this.sharedStylesHost=De,this.hostEl=Et,this.shadowRoot=Et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const qt=qe(Lt.id,Lt.styles);for(const Bn of qt){const Rn=document.createElement("style");Rn.textContent=Bn,this.shadowRoot.appendChild(Rn)}}nodeOrShadowRoot(He){return He===this.hostEl?this.shadowRoot:He}appendChild(He,De){return super.appendChild(this.nodeOrShadowRoot(He),De)}insertBefore(He,De,Et){return super.insertBefore(this.nodeOrShadowRoot(He),De,Et)}removeChild(He,De){return super.removeChild(this.nodeOrShadowRoot(He),De)}parentNode(He){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(He)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Oe extends ze{constructor(He,De,Et,Lt,qt=Et.id){super(He),this.sharedStylesHost=De,this.removeStylesOnCompDestory=Lt,this.rendererUsageCount=0,this.styles=qe(qt,Et.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){var He;this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount)&&(null===(He=this.onDestroy)||void 0===He||He.call(this))}}class it extends Oe{constructor(He,De,Et,Lt,qt){const Bn=Lt+"-"+Et.id;super(He,De,Et,qt,Bn),this.contentAttr=function Qe(We){return"_ngcontent-%COMP%".replace(ut,We)}(Bn),this.hostAttr=function ye(We){return"_nghost-%COMP%".replace(ut,We)}(Bn)}applyToHost(He){this.applyStyles(),this.setAttribute(He,this.hostAttr,"")}createElement(He,De){const Et=super.createElement(He,De);return super.setAttribute(Et,this.contentAttr,""),Et}}let ht=(()=>{class We extends Dt{constructor(De){super(De)}supports(De){return!0}addEventListener(De,Et,Lt){return De.addEventListener(Et,Lt,!1),()=>this.removeEventListener(De,Et,Lt)}removeEventListener(De,Et,Lt){return De.removeEventListener(Et,Lt)}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(_.K0))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();const Zt=["alt","control","meta","shift"],Vt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vn={alt:We=>We.altKey,control:We=>We.ctrlKey,meta:We=>We.metaKey,shift:We=>We.shiftKey};let gt=(()=>{class We extends Dt{constructor(De){super(De)}supports(De){return null!=We.parseEventName(De)}addEventListener(De,Et,Lt){const qt=We.parseEventName(Et),Bn=We.eventCallback(qt.fullKey,Lt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(De,qt.domEventName,Bn))}static parseEventName(De){const Et=De.toLowerCase().split("."),Lt=Et.shift();if(0===Et.length||"keydown"!==Lt&&"keyup"!==Lt)return null;const qt=We._normalizeKey(Et.pop());let Bn="",Rn=Et.indexOf("code");if(Rn>-1&&(Et.splice(Rn,1),Bn="code."),Zt.forEach(Qr=>{const pi=Et.indexOf(Qr);pi>-1&&(Et.splice(pi,1),Bn+=Qr+".")}),Bn+=qt,0!=Et.length||0===qt.length)return null;const hr={};return hr.domEventName=Lt,hr.fullKey=Bn,hr}static matchEventFullKeyCode(De,Et){let Lt=Vt[De.key]||De.key,qt="";return Et.indexOf("code.")>-1&&(Lt=De.code,qt="code."),!(null==Lt||!Lt)&&(Lt=Lt.toLowerCase()," "===Lt?Lt="space":"."===Lt&&(Lt="dot"),Zt.forEach(Bn=>{Bn!==Lt&&(0,vn[Bn])(De)&&(qt+=Bn+".")}),qt+=Lt,qt===Et)}static eventCallback(De,Et,Lt){return qt=>{We.matchEventFullKeyCode(qt,De)&&Lt.runGuarded(()=>Et(qt))}}static _normalizeKey(De){return"esc"===De?"escape":De}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(_.K0))},We.\u0275prov=m.Yz7({token:We,factory:We.\u0275fac}),We})();const or=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:_.bD},{provide:m.g9A,useValue:function _n(){fe.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function Tn(){return(0,m.RDi)(document),document},deps:[]}]),En=new m.OlP(""),gr=[{provide:m.rWj,useClass:class ve{addToWindow(He){m.dqk.getAngularTestability=(Et,Lt=!0)=>{const qt=He.findTestabilityInTree(Et,Lt);if(null==qt)throw new Error("Could not find testability for element.");return qt},m.dqk.getAllAngularTestabilities=()=>He.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>He.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(Et=>{const Lt=m.dqk.getAllAngularTestabilities();let qt=Lt.length,Bn=!1;const Rn=function(hr){Bn=Bn||hr,qt--,0==qt&&Et(Bn)};Lt.forEach(function(hr){hr.whenStable(Rn)})})}findTestabilityInTree(He,De,Et){if(null==De)return null;const Lt=He.getTestability(De);return null!=Lt?Lt:Et?(0,_.q)().isShadowRoot(De)?this.findTestabilityInTree(He,De.host,!0):this.findTestabilityInTree(He,De.parentElement,!0):null}},deps:[]},{provide:m.lri,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b,m.eoX,m.rWj]}],tn=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function Xt(){return new m.qLn},deps:[]},{provide:je,useClass:ht,multi:!0,deps:[_.K0,m.R0b,m.Lbi]},{provide:je,useClass:gt,multi:!0,deps:[_.K0]},{provide:ct,useClass:ct,deps:[rt,Ce,m.AFp,ne]},{provide:m.FYo,useExisting:ct},{provide:Ne,useExisting:Ce},{provide:Ce,useClass:Ce,deps:[_.K0]},{provide:rt,useClass:rt,deps:[je,m.R0b]},{provide:_.JF,useClass:Ue,deps:[]},[]];let Yr=(()=>{class We{constructor(De){}static withServerTransition(De){return{ngModule:We,providers:[{provide:m.AFp,useValue:De.appId},{provide:Be,useExisting:m.AFp},me]}}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(En,12))},We.\u0275mod=m.oAB({type:We}),We.\u0275inj=m.cJS({providers:[...tn,...gr],imports:[_.ez,m.hGG]}),We})(),On=(()=>{class We{constructor(De){this._doc=De}getTitle(){return this._doc.title}setTitle(De){this._doc.title=De||""}}return We.\u0275fac=function(De){return new(De||We)(m.LFG(_.K0))},We.\u0275prov=m.Yz7({token:We,factory:function(De){let Et=null;return Et=De?new De:function _r(){return new On((0,m.LFG)(_.K0))}(),Et},providedIn:"root"}),We})();typeof window<"u"&&window},2435:(cn,mt,j)=>{"use strict";j.d(mt,{gz:()=>Is,y6:()=>Vs,OD:()=>kt,eC:()=>Xt,wm:()=>ps,wN:()=>qo,F0:()=>Pi,rH:()=>Ws,Bz:()=>Zo,Hx:()=>Ln});var _=j(4650),m=j(8996),J=j(9646),fe=j(1135),Fe=j(6805),Me=j(9751),Ie=j(4742),Le=j(4671),Be=j(3268),we=j(7669),me=j(1810),ve=j(5403),Ue=j(9672);function je(...S){const A=(0,we.yG)(S),I=(0,we.jO)(S),{args:P,keys:H}=(0,Ie.D)(S);if(0===P.length)return(0,m.D)([],A);const ie=new Me.y(function rt(S,A,I=Le.y){return P=>{Dt(A,()=>{const{length:H}=S,ie=new Array(H);let ae=H,at=H;for(let Pt=0;Pt<H;Pt++)Dt(A,()=>{const dn=(0,m.D)(S[Pt],A);let Fn=!1;dn.subscribe((0,ve.x)(P,Dn=>{ie[Pt]=Dn,Fn||(Fn=!0,at--),at||P.next(I(ie.slice()))},()=>{--ae||P.complete()}))},P)},P)}}(P,A,H?ae=>(0,me.n)(H,ae):Le.y));return I?ie.pipe((0,Be.Z)(I)):ie}function Dt(S,A,I){S?(0,Ue.f)(I,S,A):A()}var Ne=j(7272),Ce=j(8421);function ue(S){return new Me.y(A=>{(0,Ce.Xf)(S()).subscribe(A)})}var ut=j(9635),Je=j(576);function et(S,A){const I=(0,Je.m)(S)?S:()=>S,P=H=>H.error(I());return new Me.y(A?H=>A.schedule(P,0,H):P)}var Xe=j(515),X=j(727),Re=j(4482);function ne(){return(0,Re.e)((S,A)=>{let I=null;S._refCount++;const P=(0,ve.x)(A,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(I=null);const H=S._connection,ie=I;I=null,H&&(!ie||H===ie)&&H.unsubscribe(),A.unsubscribe()});S.subscribe(P),P.closed||(I=S.connect())})}class Qe extends Me.y{constructor(A,I){super(),this.source=A,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,Re.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,null==A||A.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new X.w0;const I=this.getSubject();A.add(this.source.subscribe((0,ve.x)(I,void 0,()=>{this._teardown(),I.complete()},P=>{this._teardown(),I.error(P)},()=>this._teardown()))),A.closed&&(this._connection=null,A=X.w0.EMPTY)}return A}refCount(){return ne()(this)}}var ye=j(7579),qe=j(6895),nt=j(4004),ct=j(3900),ze=j(5698),_t=j(8675),ot=j(9300),xe=j(5577),Ae=j(590);function Oe(S,A){return(0,Je.m)(A)?(0,xe.z)(S,A,1):(0,xe.z)(S,1)}var it=j(8505);function ht(S){return(0,Re.e)((A,I)=>{let ie,P=null,H=!1;P=A.subscribe((0,ve.x)(I,void 0,void 0,ae=>{ie=(0,Ce.Xf)(S(ae,ht(S)(A))),P?(P.unsubscribe(),P=null,ie.subscribe(I)):H=!0})),H&&(P.unsubscribe(),P=null,ie.subscribe(I))})}var Zt=j(5026);function Vt(S){return S<=0?()=>Xe.E:(0,Re.e)((A,I)=>{let P=[];A.subscribe((0,ve.x)(I,H=>{P.push(H),S<P.length&&P.shift()},()=>{for(const H of P)I.next(H);I.complete()},void 0,()=>{P=null}))})}var vn=j(8068),gt=j(6590);function Ee(S,A){const I=arguments.length>=2;return P=>P.pipe(S?(0,ot.h)((H,ie)=>S(H,ie,P)):Le.y,Vt(1),I?(0,gt.d)(A):(0,vn.T)(()=>new Fe.K))}function fn(S){return(0,Re.e)((A,I)=>{try{A.subscribe(I)}finally{I.add(S)}})}var Mn=j(8189),_n=j(1481);const Xt="primary",Tn=Symbol("RouteTitle");class Hn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const I=this.params[A];return Array.isArray(I)?I[0]:I}return null}getAll(A){if(this.has(A)){const I=this.params[A];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function or(S){return new Hn(S)}function En(S,A,I){const P=I.path.split("/");if(P.length>S.length||"full"===I.pathMatch&&(A.hasChildren()||P.length<S.length))return null;const H={};for(let ie=0;ie<P.length;ie++){const ae=P[ie],at=S[ie];if(ae.startsWith(":"))H[ae.substring(1)]=at;else if(ae!==at.path)return null}return{consumed:S.slice(0,P.length),posParams:H}}function tn(S,A){const I=S?Object.keys(S):void 0,P=A?Object.keys(A):void 0;if(!I||!P||I.length!=P.length)return!1;let H;for(let ie=0;ie<I.length;ie++)if(H=I[ie],!Yr(S[H],A[H]))return!1;return!0}function Yr(S,A){if(Array.isArray(S)&&Array.isArray(A)){if(S.length!==A.length)return!1;const I=[...S].sort(),P=[...A].sort();return I.every((H,ie)=>P[ie]===H)}return S===A}function Rr(S){return Array.prototype.concat.apply([],S)}function Vr(S){return S.length>0?S[S.length-1]:null}function _r(S,A){for(const I in S)S.hasOwnProperty(I)&&A(S[I],I)}function On(S){return(0,_.CqO)(S)?S:(0,_.QGY)(S)?(0,m.D)(Promise.resolve(S)):(0,J.of)(S)}const Jt=!1,An={exact:function Kr(S,A,I){if(!jt(S.segments,A.segments)||!si(S.segments,A.segments,I)||S.numberOfChildren!==A.numberOfChildren)return!1;for(const P in A.children)if(!S.children[P]||!Kr(S.children[P],A.children[P],I))return!1;return!0},subset:wi},Kt={exact:function ir(S,A){return tn(S,A)},subset:function hi(S,A){return Object.keys(A).length<=Object.keys(S).length&&Object.keys(A).every(I=>Yr(S[I],A[I]))},ignored:()=>!0};function yr(S,A,I){return An[I.paths](S.root,A.root,I.matrixParams)&&Kt[I.queryParams](S.queryParams,A.queryParams)&&!("exact"===I.fragment&&S.fragment!==A.fragment)}function wi(S,A,I){return Dr(S,A,A.segments,I)}function Dr(S,A,I,P){if(S.segments.length>I.length){const H=S.segments.slice(0,I.length);return!(!jt(H,I)||A.hasChildren()||!si(H,I,P))}if(S.segments.length===I.length){if(!jt(S.segments,I)||!si(S.segments,I,P))return!1;for(const H in A.children)if(!S.children[H]||!wi(S.children[H],A.children[H],P))return!1;return!0}{const H=I.slice(0,S.segments.length),ie=I.slice(S.segments.length);return!!(jt(S.segments,H)&&si(S.segments,H,P)&&S.children[Xt])&&Dr(S.children[Xt],A,ie,P)}}function si(S,A,I){return A.every((P,H)=>Kt[I](S[H].parameters,P.parameters))}class nr{constructor(A=new Wn([],{}),I={},P=null){this.root=A,this.queryParams=I,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return $n.serialize(this)}}class Wn{constructor(A,I){this.segments=A,this.children=I,this.parent=null,_r(I,(P,H)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Er(this)}}class fi{constructor(A,I){this.path=A,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=or(this.parameters)),this._parameterMap}toString(){return He(this)}}function jt(S,A){return S.length===A.length&&S.every((I,P)=>I.path===A[P].path)}let Ln=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return new In},providedIn:"root"}),S})();class In{parse(A){const I=new pi(A);return new nr(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(A){const I=`/${$e(A.root,!0)}`,P=function Et(S){const A=Object.keys(S).map(I=>{const P=S[I];return Array.isArray(P)?P.map(H=>`${Ke(I)}=${Ke(H)}`).join("&"):`${Ke(I)}=${Ke(P)}`}).filter(I=>!!I);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${I}${P}${"string"==typeof A.fragment?`#${function Nt(S){return encodeURI(S)}(A.fragment)}`:""}`}}const $n=new In;function Er(S){return S.segments.map(A=>He(A)).join("/")}function $e(S,A){if(!S.hasChildren())return Er(S);if(A){const I=S.children[Xt]?$e(S.children[Xt],!1):"",P=[];return _r(S.children,(H,ie)=>{ie!==Xt&&P.push(`${ie}:${$e(H,!1)}`)}),P.length>0?`${I}(${P.join("//")})`:I}{const I=function Cn(S,A){let I=[];return _r(S.children,(P,H)=>{H===Xt&&(I=I.concat(A(P,H)))}),_r(S.children,(P,H)=>{H!==Xt&&(I=I.concat(A(P,H)))}),I}(S,(P,H)=>H===Xt?[$e(S.children[Xt],!1)]:[`${H}:${$e(P,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Xt]?`${Er(S)}/${I[0]}`:`${Er(S)}/(${I.join("//")})`}}function Pe(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ke(S){return Pe(S).replace(/%3B/gi,";")}function It(S){return Pe(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wn(S){return decodeURIComponent(S)}function We(S){return wn(S.replace(/\+/g,"%20"))}function He(S){return`${It(S.path)}${function De(S){return Object.keys(S).map(A=>`;${It(A)}=${It(S[A])}`).join("")}(S.parameters)}`}const Lt=/^[^\/()?;=#]+/;function qt(S){const A=S.match(Lt);return A?A[0]:""}const Bn=/^[^=?&#]+/,hr=/^[^&#]+/;class pi{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(A.length>0||Object.keys(I).length>0)&&(P[Xt]=new Wn(A,I)),P}parseSegment(){const A=qt(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new _.vHH(4009,Jt);return this.capture(A),new fi(wn(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const I=qt(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const H=qt(this.remaining);H&&(P=H,this.capture(P))}A[wn(I)]=wn(P)}parseQueryParam(A){const I=function Rn(S){const A=S.match(Bn);return A?A[0]:""}(this.remaining);if(!I)return;this.capture(I);let P="";if(this.consumeOptional("=")){const ae=function Qr(S){const A=S.match(hr);return A?A[0]:""}(this.remaining);ae&&(P=ae,this.capture(P))}const H=We(I),ie=We(P);if(A.hasOwnProperty(H)){let ae=A[H];Array.isArray(ae)||(ae=[ae],A[H]=ae),ae.push(ie)}else A[H]=ie}parseParens(A){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=qt(this.remaining),H=this.remaining[P.length];if("/"!==H&&")"!==H&&";"!==H)throw new _.vHH(4010,Jt);let ie;P.indexOf(":")>-1?(ie=P.slice(0,P.indexOf(":")),this.capture(ie),this.capture(":")):A&&(ie=Xt);const ae=this.parseChildren();I[ie]=1===Object.keys(ae).length?ae[Xt]:new Wn([],ae),this.consumeOptional("//")}return I}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new _.vHH(4011,Jt)}}function Xi(S){return S.segments.length>0?new Wn([],{[Xt]:S}):S}function gi(S){const A={};for(const P of Object.keys(S.children)){const ie=gi(S.children[P]);(ie.segments.length>0||ie.hasChildren())&&(A[P]=ie)}return function ki(S){if(1===S.numberOfChildren&&S.children[Xt]){const A=S.children[Xt];return new Wn(S.segments.concat(A.segments),A.children)}return S}(new Wn(S.segments,A))}function Tr(S){return S instanceof nr}const es=!1;function tr(S,A,I,P,H){var ie;if(0===I.length)return Br(A.root,A.root,A.root,P,H);const ae=function ti(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new us(!0,0,S);let A=0,I=!1;const P=S.reduce((H,ie,ae)=>{if("object"==typeof ie&&null!=ie){if(ie.outlets){const at={};return _r(ie.outlets,(Pt,dn)=>{at[dn]="string"==typeof Pt?Pt.split("/"):Pt}),[...H,{outlets:at}]}if(ie.segmentPath)return[...H,ie.segmentPath]}return"string"!=typeof ie?[...H,ie]:0===ae?(ie.split("/").forEach((at,Pt)=>{0==Pt&&"."===at||(0==Pt&&""===at?I=!0:".."===at?A++:""!=at&&H.push(at))}),H):[...H,ie]},[]);return new us(I,A,P)}(I);return ae.toRoot()?Br(A.root,A.root,new Wn([],{}),P,H):function at(dn){var Fn;const Dn=function Fr(S,A,I,P){if(S.isAbsolute)return new un(A.root,!0,0);if(-1===P)return new un(I,I===A.root,0);return function Jr(S,A,I){let P=S,H=A,ie=I;for(;ie>H;){if(ie-=H,P=P.parent,!P)throw new _.vHH(4005,es&&"Invalid number of '../'");H=P.segments.length}return new un(P,!1,H-ie)}(I,P+(Kn(S.commands[0])?0:1),S.numberOfDoubleDots)}(ae,A,null===(Fn=S.snapshot)||void 0===Fn?void 0:Fn._urlSegment,dn),zr=Dn.processChildren?vi(Dn.segmentGroup,Dn.index,ae.commands):Lr(Dn.segmentGroup,Dn.index,ae.commands);return Br(A.root,Dn.segmentGroup,zr,P,H)}(null===(ie=S.snapshot)||void 0===ie?void 0:ie._lastPathIndex)}function Kn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function xr(S){return"object"==typeof S&&null!=S&&S.outlets}function Br(S,A,I,P,H){let ae,ie={};P&&_r(P,(Pt,dn)=>{ie[dn]=Array.isArray(Pt)?Pt.map(Fn=>`${Fn}`):`${Pt}`}),ae=S===A?I:Gi(S,A,I);const at=Xi(gi(ae));return new nr(at,ie,H)}function Gi(S,A,I){const P={};return _r(S.children,(H,ie)=>{P[ie]=H===A?I:Gi(H,A,I)}),new Wn(S.segments,P)}class us{constructor(A,I,P){if(this.isAbsolute=A,this.numberOfDoubleDots=I,this.commands=P,A&&P.length>0&&Kn(P[0]))throw new _.vHH(4003,es&&"Root segment cannot have matrix parameters");const H=P.find(xr);if(H&&H!==Vr(P))throw new _.vHH(4004,es&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class un{constructor(A,I,P){this.segmentGroup=A,this.processChildren=I,this.index=P}}function Lr(S,A,I){if(S||(S=new Wn([],{})),0===S.segments.length&&S.hasChildren())return vi(S,A,I);const P=function se(S,A,I){let P=0,H=A;const ie={match:!1,pathIndex:0,commandIndex:0};for(;H<S.segments.length;){if(P>=I.length)return ie;const ae=S.segments[H],at=I[P];if(xr(at))break;const Pt=`${at}`,dn=P<I.length-1?I[P+1]:null;if(H>0&&void 0===Pt)break;if(Pt&&dn&&"object"==typeof dn&&void 0===dn.outlets){if(!Ge(Pt,dn,ae))return ie;P+=2}else{if(!Ge(Pt,{},ae))return ie;P++}H++}return{match:!0,pathIndex:H,commandIndex:P}}(S,A,I),H=I.slice(P.commandIndex);if(P.match&&P.pathIndex<S.segments.length){const ie=new Wn(S.segments.slice(0,P.pathIndex),{});return ie.children[Xt]=new Wn(S.segments.slice(P.pathIndex),S.children),vi(ie,0,H)}return P.match&&0===H.length?new Wn(S.segments,{}):P.match&&!S.hasChildren()?_e(S,A,I):P.match?vi(S,0,H):_e(S,A,I)}function vi(S,A,I){if(0===I.length)return new Wn(S.segments,{});{const P=function Ri(S){return xr(S[0])?S[0].outlets:{[Xt]:S}}(I),H={};if(!P[Xt]&&S.children[Xt]&&1===S.numberOfChildren&&0===S.children[Xt].segments.length){const ie=vi(S.children[Xt],A,I);return new Wn(S.segments,ie.children)}return _r(P,(ie,ae)=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&(H[ae]=Lr(S.children[ae],A,ie))}),_r(S.children,(ie,ae)=>{void 0===P[ae]&&(H[ae]=ie)}),new Wn(S.segments,H)}}function _e(S,A,I){const P=S.segments.slice(0,A);let H=0;for(;H<I.length;){const ie=I[H];if(xr(ie)){const Pt=st(ie.outlets);return new Wn(P,Pt)}if(0===H&&Kn(I[0])){P.push(new fi(S.segments[A].path,le(I[0]))),H++;continue}const ae=xr(ie)?ie.outlets[Xt]:`${ie}`,at=H<I.length-1?I[H+1]:null;ae&&at&&Kn(at)?(P.push(new fi(ae,le(at))),H+=2):(P.push(new fi(ae,{})),H++)}return new Wn(P,{})}function st(S){const A={};return _r(S,(I,P)=>{"string"==typeof I&&(I=[I]),null!==I&&(A[P]=_e(new Wn([],{}),0,I))}),A}function le(S){const A={};return _r(S,(I,P)=>A[P]=`${I}`),A}function Ge(S,A,I){return S==I.path&&tn(A,I.parameters)}const Ye="imperative";class Ct{constructor(A,I){this.id=A,this.url=I}}class kt extends Ct{constructor(A,I,P="imperative",H=null){super(A,I),this.type=0,this.navigationTrigger=P,this.restoredState=H}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xt extends Ct{constructor(A,I,P){super(A,I),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Gt extends Ct{constructor(A,I,P,H){super(A,I),this.reason=P,this.code=H,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rn extends Ct{constructor(A,I,P,H){super(A,I),this.reason=P,this.code=H,this.type=16}}class Pn extends Ct{constructor(A,I,P,H){super(A,I),this.error=P,this.target=H,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qn extends Ct{constructor(A,I,P,H){super(A,I),this.urlAfterRedirects=P,this.state=H,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tt extends Ct{constructor(A,I,P,H){super(A,I),this.urlAfterRedirects=P,this.state=H,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ve extends Ct{constructor(A,I,P,H,ie){super(A,I),this.urlAfterRedirects=P,this.state=H,this.shouldActivate=ie,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yt extends Ct{constructor(A,I,P,H){super(A,I),this.urlAfterRedirects=P,this.state=H,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht extends Ct{constructor(A,I,P,H){super(A,I),this.urlAfterRedirects=P,this.state=H,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nn{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Qn{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kr{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fr{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ss{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ei{constructor(A,I,P){this.routerEvent=A,this.position=I,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Eo=(()=>{class S{createUrlTree(I,P,H,ie,ae,at){return tr(I||P.root,H,ie,ae,at)}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})(),bi=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:function(A){return Eo.\u0275fac(A)},providedIn:"root"}),S})();class to{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const I=this.pathFromRoot(A);return I.length>1?I[I.length-2]:null}children(A){const I=co(A,this._root);return I?I.children.map(P=>P.value):[]}firstChild(A){const I=co(A,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(A){const I=ts(A,this._root);return I.length<2?[]:I[I.length-2].children.map(H=>H.value).filter(H=>H!==A)}pathFromRoot(A){return ts(A,this._root).map(I=>I.value)}}function co(S,A){if(S===A.value)return A;for(const I of A.children){const P=co(S,I);if(P)return P}return null}function ts(S,A){if(S===A.value)return[A];for(const I of A.children){const P=ts(S,I);if(P.length)return P.unshift(A),P}return[]}class $i{constructor(A,I){this.value=A,this.children=I}toString(){return`TreeNode(${this.value})`}}function ns(S){const A={};return S&&S.children.forEach(I=>A[I.value.outlet]=I),A}class Us extends to{constructor(A,I){super(A),this.snapshot=I,wo(this,A)}toString(){return this.snapshot.toString()}}function Vo(S,A){const I=function Io(S,A){const ae=new cs([],{},{},"",{},Xt,A,null,S.root,-1,{});return new sa("",new $i(ae,[]))}(S,A),P=new fe.X([new fi("",{})]),H=new fe.X({}),ie=new fe.X({}),ae=new fe.X({}),at=new fe.X(""),Pt=new Is(P,H,ae,at,ie,Xt,A,I.root);return Pt.snapshot=I.root,new Us(new $i(Pt,[]),I)}class Is{constructor(A,I,P,H,ie,ae,at,Pt){var dn,Fn;this.url=A,this.params=I,this.queryParams=P,this.fragment=H,this.data=ie,this.outlet=ae,this.component=at,this.title=null!==(dn=null===(Fn=this.data)||void 0===Fn?void 0:Fn.pipe((0,nt.U)(Dn=>Dn[Tn])))&&void 0!==dn?dn:(0,J.of)(void 0),this._futureSnapshot=Pt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,nt.U)(A=>or(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,nt.U)(A=>or(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xs(S,A="emptyOnly"){const I=S.pathFromRoot;let P=0;if("always"!==A)for(P=I.length-1;P>=1;){const H=I[P],ie=I[P-1];if(H.routeConfig&&""===H.routeConfig.path)P--;else{if(ie.component)break;P--}}return function no(S){return S.reduce((A,I)=>{var P;return{params:{...A.params,...I.params},data:{...A.data,...I.data},resolve:{...I.data,...A.resolve,...null===(P=I.routeConfig)||void 0===P?void 0:P.data,...I._resolvedData}}},{params:{},data:{},resolve:{}})}(I.slice(P))}class cs{get title(){var A;return null===(A=this.data)||void 0===A?void 0:A[Tn]}constructor(A,I,P,H,ie,ae,at,Pt,dn,Fn,Dn){this.url=A,this.params=I,this.queryParams=P,this.fragment=H,this.data=ie,this.outlet=ae,this.component=at,this.routeConfig=Pt,this._urlSegment=dn,this._lastPathIndex=Fn,this._resolve=Dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=or(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=or(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class sa extends to{constructor(A,I){super(I),this.url=A,wo(this,I)}toString(){return Oo(this._root)}}function wo(S,A){A.value._routerState=S,A.children.forEach(I=>wo(S,I))}function Oo(S){const A=S.children.length>0?` { ${S.children.map(Oo).join(", ")} } `:"";return`${S.value}${A}`}function Ci(S){if(S.snapshot){const A=S.snapshot,I=S._futureSnapshot;S.snapshot=I,tn(A.queryParams,I.queryParams)||S.queryParams.next(I.queryParams),A.fragment!==I.fragment&&S.fragment.next(I.fragment),tn(A.params,I.params)||S.params.next(I.params),function gr(S,A){if(S.length!==A.length)return!1;for(let I=0;I<S.length;++I)if(!tn(S[I],A[I]))return!1;return!0}(A.url,I.url)||S.url.next(I.url),tn(A.data,I.data)||S.data.next(I.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function Qi(S,A){const I=tn(S.params,A.params)&&function an(S,A){return jt(S,A)&&S.every((I,P)=>tn(I.parameters,A[P].parameters))}(S.url,A.url);return I&&!(!S.parent!=!A.parent)&&(!S.parent||Qi(S.parent,A.parent))}function ro(S,A,I){if(I&&S.shouldReuseRoute(A.value,I.value.snapshot)){const P=I.value;P._futureSnapshot=A.value;const H=function oa(S,A,I){return A.children.map(P=>{for(const H of I.children)if(S.shouldReuseRoute(P.value,H.value.snapshot))return ro(S,P,H);return ro(S,P)})}(S,A,I);return new $i(P,H)}{if(S.shouldAttach(A.value)){const ie=S.retrieve(A.value);if(null!==ie){const ae=ie.route;return ae.value._futureSnapshot=A.value,ae.children=A.children.map(at=>ro(S,at)),ae}}const P=function _i(S){return new Is(new fe.X(S.url),new fe.X(S.params),new fe.X(S.queryParams),new fe.X(S.fragment),new fe.X(S.data),S.outlet,S.component,S)}(A.value),H=A.children.map(ie=>ro(S,ie));return new $i(P,H)}}const Wi="ngNavigationCancelingError";function io(S,A){const{redirectTo:I,navigationBehaviorOptions:P}=Tr(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,H=Ms(!1,0,A);return H.url=I,H.navigationBehaviorOptions=P,H}function Ms(S,A,I){const P=new Error("NavigationCancelingError: "+(S||""));return P[Wi]=!0,P.cancellationCode=A,I&&(P.url=I),P}function ho(S){return ws(S)&&Tr(S.url)}function ws(S){return S&&S[Wi]}class Rs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vs,this.attachRef=null}}let Vs=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(I,P){const H=this.getOrCreateContext(I);H.outlet=P,this.contexts.set(I,H)}onChildOutletDestroyed(I){const P=this.getContext(I);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let P=this.getContext(I);return P||(P=new Rs,this.contexts.set(I,P)),P}getContext(I){return this.contexts.get(I)||null}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const bo=!1;let ko=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=Xt,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(Vs),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(I){if(I.name){const{firstChange:P,previousValue:H}=I.name;if(P)return;this.isTrackedInParentContexts(H)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(H)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(I){var P;return(null===(P=this.parentContexts.getContext(I))||void 0===P?void 0:P.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const I=this.parentContexts.getContext(this.name);null!=I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,bo);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,bo);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,bo);this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,P){this.activated=I,this._activatedRoute=P,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,P){if(this.isActivated)throw new _.vHH(4013,bo);this._activatedRoute=I;const H=this.location,ae=I.snapshot.component,at=this.parentContexts.getOrCreateContext(this.name).children,Pt=new bs(I,at,H.injector);if(P&&function fo(S){return!!S.resolveComponentFactory}(P)){const dn=P.resolveComponentFactory(ae);this.activated=H.createComponent(dn,H.length,Pt)}else this.activated=H.createComponent(ae,{index:H.length,injector:Pt,environmentInjector:null!=P?P:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275dir=_.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),S})();class bs{constructor(A,I,P){this.route=A,this.childContexts=I,this.parent=P}get(A,I){return A===Is?this.route:A===Vs?this.childContexts:this.parent.get(A,I)}}let Pr=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275cmp=_.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(I,P){1&I&&_._UZ(0,"router-outlet")},dependencies:[ko],encapsulation:2}),S})();function Co(S,A){var I;return S.providers&&!S._injector&&(S._injector=(0,_.MMx)(S.providers,A,`Route: ${S.path}`)),null!==(I=S._injector)&&void 0!==I?I:A}function Ei(S){const A=S.children&&S.children.map(Ei),I=A?{...S,children:A}:{...S};return!I.component&&!I.loadComponent&&(A||I.loadChildren)&&I.outlet&&I.outlet!==Xt&&(I.component=Pr),I}function ds(S){return S.outlet||Xt}function Fo(S,A){const I=S.filter(P=>ds(P)===A);return I.push(...S.filter(P=>ds(P)!==A)),I}function po(S){var A;if(!S)return null;if(null!==(A=S.routeConfig)&&void 0!==A&&A._injector)return S.routeConfig._injector;for(let I=S.parent;I;I=I.parent){const P=I.routeConfig;if(null!=P&&P._loadedInjector)return P._loadedInjector;if(null!=P&&P._injector)return P._injector}return null}class Do{constructor(A,I,P,H){this.routeReuseStrategy=A,this.futureState=I,this.currState=P,this.forwardEvent=H}activate(A){const I=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,P,A),Ci(this.futureState.root),this.activateChildRoutes(I,P,A)}deactivateChildRoutes(A,I,P){const H=ns(I);A.children.forEach(ie=>{const ae=ie.value.outlet;this.deactivateRoutes(ie,H[ae],P),delete H[ae]}),_r(H,(ie,ae)=>{this.deactivateRouteAndItsChildren(ie,P)})}deactivateRoutes(A,I,P){const H=A.value,ie=I?I.value:null;if(H===ie)if(H.component){const ae=P.getContext(H.outlet);ae&&this.deactivateChildRoutes(A,I,ae.children)}else this.deactivateChildRoutes(A,I,P);else ie&&this.deactivateRouteAndItsChildren(I,P)}deactivateRouteAndItsChildren(A,I){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,I):this.deactivateRouteAndOutlet(A,I)}detachAndStoreRouteSubtree(A,I){const P=I.getContext(A.value.outlet),H=P&&A.value.component?P.children:I,ie=ns(A);for(const ae of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ae],H);if(P&&P.outlet){const ae=P.outlet.detach(),at=P.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:ae,route:A,contexts:at})}}deactivateRouteAndOutlet(A,I){const P=I.getContext(A.value.outlet),H=P&&A.value.component?P.children:I,ie=ns(A);for(const ae of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ae],H);P&&(P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated()),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(A,I,P){const H=ns(I);A.children.forEach(ie=>{this.activateRoutes(ie,H[ie.value.outlet],P),this.forwardEvent(new Ss(ie.value.snapshot))}),A.children.length&&this.forwardEvent(new kr(A.value.snapshot))}activateRoutes(A,I,P){const H=A.value,ie=I?I.value:null;if(Ci(H),H===ie)if(H.component){const at=P.getOrCreateContext(H.outlet);this.activateChildRoutes(A,I,at.children)}else this.activateChildRoutes(A,I,P);else if(H.component){const at=P.getOrCreateContext(H.outlet);if(this.routeReuseStrategy.shouldAttach(H.snapshot)){const Pt=this.routeReuseStrategy.retrieve(H.snapshot);this.routeReuseStrategy.store(H.snapshot,null),at.children.onOutletReAttached(Pt.contexts),at.attachRef=Pt.componentRef,at.route=Pt.route.value,at.outlet&&at.outlet.attach(Pt.componentRef,Pt.route.value),Ci(Pt.route.value),this.activateChildRoutes(A,null,at.children)}else{var ae;const Pt=po(H.snapshot),dn=null!==(ae=null==Pt?void 0:Pt.get(_._Vd))&&void 0!==ae?ae:null;at.attachRef=null,at.route=H,at.resolver=dn,at.injector=Pt,at.outlet&&at.outlet.activateWith(H,at.injector),this.activateChildRoutes(A,null,at.children)}}else this.activateChildRoutes(A,null,P)}}class aa{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class sr{constructor(A,I){this.component=A,this.route=I}}function Ho(S,A,I){const P=S._root;return q(P,A?A._root:null,I,[P.value])}function C(S,A){const I=Symbol(),P=A.get(S,I);return P===I?"function"!=typeof S||(0,_.Z0I)(S)?A.get(S):S:P}function q(S,A,I,P,H={canDeactivateChecks:[],canActivateChecks:[]}){const ie=ns(A);return S.children.forEach(ae=>{(function T(S,A,I,P,H={canDeactivateChecks:[],canActivateChecks:[]}){const ie=S.value,ae=A?A.value:null,at=I?I.getContext(S.value.outlet):null;if(ae&&ie.routeConfig===ae.routeConfig){const Pt=function W(S,A,I){if("function"==typeof I)return I(S,A);switch(I){case"pathParamsChange":return!jt(S.url,A.url);case"pathParamsOrQueryParamsChange":return!jt(S.url,A.url)||!tn(S.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qi(S,A)||!tn(S.queryParams,A.queryParams);default:return!Qi(S,A)}}(ae,ie,ie.routeConfig.runGuardsAndResolvers);Pt?H.canActivateChecks.push(new aa(P)):(ie.data=ae.data,ie._resolvedData=ae._resolvedData),q(S,A,ie.component?at?at.children:null:I,P,H),Pt&&at&&at.outlet&&at.outlet.isActivated&&H.canDeactivateChecks.push(new sr(at.outlet.component,ae))}else ae&&ge(A,at,H),H.canActivateChecks.push(new aa(P)),q(S,null,ie.component?at?at.children:null:I,P,H)})(ae,ie[ae.value.outlet],I,P.concat([ae.value]),H),delete ie[ae.value.outlet]}),_r(ie,(ae,at)=>ge(ae,I.getContext(at),H)),H}function ge(S,A,I){const P=ns(S),H=S.value;_r(P,(ie,ae)=>{ge(ie,H.component?A?A.children.getContext(ae):null:A,I)}),I.canDeactivateChecks.push(new sr(H.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,H))}function L(S){return"function"==typeof S}function hs(S){return S instanceof Fe.K||"EmptyError"===(null==S?void 0:S.name)}const rs=Symbol("INITIAL_VALUE");function Ui(){return(0,ct.w)(S=>je(S.map(A=>A.pipe((0,ze.q)(1),(0,_t.O)(rs)))).pipe((0,nt.U)(A=>{for(const I of A)if(!0!==I){if(I===rs)return rs;if(!1===I||I instanceof nr)return I}return!0}),(0,ot.h)(A=>A!==rs),(0,ze.q)(1)))}function Ol(S){return(0,ut.z)((0,it.b)(A=>{if(Tr(A))throw io(0,A)}),(0,nt.U)(A=>!0===A))}const To={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zs(S,A,I,P,H){const ie=ca(S,A,I);return ie.matched?function gl(S,A,I,P){const H=A.canMatch;if(!H||0===H.length)return(0,J.of)(!0);const ie=H.map(ae=>{const at=C(ae,S);return On(function br(S){return S&&L(S.canMatch)}(at)?at.canMatch(A,I):S.runInContext(()=>at(A,I)))});return(0,J.of)(ie).pipe(Ui(),Ol())}(P=Co(A,P),A,I).pipe((0,nt.U)(ae=>!0===ae?ie:{...To})):(0,J.of)(ie)}function ca(S,A,I){var P;if(""===A.path)return"full"===A.pathMatch&&(S.hasChildren()||I.length>0)?{...To}:{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const ie=(A.matcher||En)(I,S,A);if(!ie)return{...To};const ae={};_r(ie.posParams,(Pt,dn)=>{ae[dn]=Pt.path});const at=ie.consumed.length>0?{...ae,...ie.consumed[ie.consumed.length-1].parameters}:ae;return{matched:!0,consumedSegments:ie.consumed,remainingSegments:I.slice(ie.consumed.length),parameters:at,positionalParamSegments:null!==(P=ie.posParams)&&void 0!==P?P:{}}}function Qs(S,A,I,P){if(I.length>0&&function zo(S,A,I){return I.some(P=>ml(S,A,P)&&ds(P)!==Xt)}(S,I,P)){const ie=new Wn(A,function qa(S,A,I,P){const H={};H[Xt]=P,P._sourceSegment=S,P._segmentIndexShift=A.length;for(const ie of I)if(""===ie.path&&ds(ie)!==Xt){const ae=new Wn([],{});ae._sourceSegment=S,ae._segmentIndexShift=A.length,H[ds(ie)]=ae}return H}(S,A,P,new Wn(I,S.children)));return ie._sourceSegment=S,ie._segmentIndexShift=A.length,{segmentGroup:ie,slicedSegments:[]}}if(0===I.length&&function Ta(S,A,I){return I.some(P=>ml(S,A,P))}(S,I,P)){const ie=new Wn(S.segments,function kl(S,A,I,P,H){const ie={};for(const ae of P)if(ml(S,I,ae)&&!H[ds(ae)]){const at=new Wn([],{});at._sourceSegment=S,at._segmentIndexShift=A.length,ie[ds(ae)]=at}return{...H,...ie}}(S,A,I,P,S.children));return ie._sourceSegment=S,ie._segmentIndexShift=A.length,{segmentGroup:ie,slicedSegments:I}}const H=new Wn(S.segments,S.children);return H._sourceSegment=S,H._segmentIndexShift=A.length,{segmentGroup:H,slicedSegments:I}}function ml(S,A,I){return(!(S.hasChildren()||A.length>0)||"full"!==I.pathMatch)&&""===I.path}function So(S,A,I,P){return!!(ds(S)===P||P!==Xt&&ml(A,I,S))&&("**"===S.path||ca(A,S,I).matched)}function is(S,A,I){return 0===A.length&&!S.children[I]}const Go=!1;class da{constructor(A){this.segmentGroup=A||null}}class Ao{constructor(A){this.urlTree=A}}function $r(S){return et(new da(S))}function fs(S){return et(new Ao(S))}class ha{constructor(A,I,P,H,ie){this.injector=A,this.configLoader=I,this.urlSerializer=P,this.urlTree=H,this.config=ie,this.allowRedirects=!0}apply(){const A=Qs(this.urlTree.root,[],[],this.config).segmentGroup,I=new Wn(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,I,Xt).pipe((0,nt.U)(ie=>this.createUrlTree(gi(ie),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ht(ie=>{if(ie instanceof Ao)return this.allowRedirects=!1,this.match(ie.urlTree);throw ie instanceof da?this.noMatchError(ie):ie}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,Xt).pipe((0,nt.U)(H=>this.createUrlTree(gi(H),A.queryParams,A.fragment))).pipe(ht(H=>{throw H instanceof da?this.noMatchError(H):H}))}noMatchError(A){return new _.vHH(4002,Go)}createUrlTree(A,I,P){const H=Xi(A);return new nr(H,I,P)}expandSegmentGroup(A,I,P,H){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(A,I,P).pipe((0,nt.U)(ie=>new Wn([],ie))):this.expandSegment(A,P,I,P.segments,H,!0)}expandChildren(A,I,P){const H=[];for(const ie of Object.keys(P.children))"primary"===ie?H.unshift(ie):H.push(ie);return(0,m.D)(H).pipe(Oe(ie=>{const ae=P.children[ie],at=Fo(I,ie);return this.expandSegmentGroup(A,at,ae,ie).pipe((0,nt.U)(Pt=>({segment:Pt,outlet:ie})))}),(0,Zt.R)((ie,ae)=>(ie[ae.outlet]=ae.segment,ie),{}),Ee())}expandSegment(A,I,P,H,ie,ae){return(0,m.D)(P).pipe(Oe(at=>this.expandSegmentAgainstRoute(A,I,P,at,H,ie,ae).pipe(ht(dn=>{if(dn instanceof da)return(0,J.of)(null);throw dn}))),(0,Ae.P)(at=>!!at),ht((at,Pt)=>{if(hs(at))return is(I,H,ie)?(0,J.of)(new Wn([],{})):$r(I);throw at}))}expandSegmentAgainstRoute(A,I,P,H,ie,ae,at){return So(H,I,ie,ae)?void 0===H.redirectTo?this.matchSegmentAgainstRoute(A,I,H,ie,ae):at&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,I,P,H,ie,ae):$r(I):$r(I)}expandSegmentAgainstRouteUsingRedirect(A,I,P,H,ie,ae){return"**"===H.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,P,H,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(A,I,P,H,ie,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,I,P,H){const ie=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?fs(ie):this.lineralizeSegments(P,ie).pipe((0,xe.z)(ae=>{const at=new Wn(ae,{});return this.expandSegment(A,at,I,ae,H,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,I,P,H,ie,ae){const{matched:at,consumedSegments:Pt,remainingSegments:dn,positionalParamSegments:Fn}=ca(I,H,ie);if(!at)return $r(I);const Dn=this.applyRedirectCommands(Pt,H.redirectTo,Fn);return H.redirectTo.startsWith("/")?fs(Dn):this.lineralizeSegments(H,Dn).pipe((0,xe.z)(zr=>this.expandSegment(A,I,P,zr.concat(dn),ae,!1)))}matchSegmentAgainstRoute(A,I,P,H,ie){return"**"===P.path?(A=Co(P,A),P.loadChildren?(P._loadedRoutes?(0,J.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(A,P)).pipe((0,nt.U)(at=>(P._loadedRoutes=at.routes,P._loadedInjector=at.injector,new Wn(H,{})))):(0,J.of)(new Wn(H,{}))):zs(I,P,H,A).pipe((0,ct.w)(({matched:ae,consumedSegments:at,remainingSegments:Pt})=>{var dn;return ae?(A=null!==(dn=P._injector)&&void 0!==dn?dn:A,this.getChildConfig(A,P,H).pipe((0,xe.z)(Dn=>{var zr;const Ir=null!==(zr=Dn.injector)&&void 0!==zr?zr:A,Ns=Dn.routes,{segmentGroup:$,slicedSegments:z}=Qs(I,at,Pt,Ns),re=new Wn($.segments,$.children);if(0===z.length&&re.hasChildren())return this.expandChildren(Ir,Ns,re).pipe((0,nt.U)($t=>new Wn(at,$t)));if(0===Ns.length&&0===z.length)return(0,J.of)(new Wn(at,{}));const ke=ds(P)===ie;return this.expandSegment(Ir,re,Ns,z,ke?Xt:ie,!0).pipe((0,nt.U)(ft=>new Wn(at.concat(ft.segments),ft.children)))}))):$r(I)}))}getChildConfig(A,I,P){return I.children?(0,J.of)({routes:I.children,injector:A}):I.loadChildren?void 0!==I._loadedRoutes?(0,J.of)({routes:I._loadedRoutes,injector:I._loadedInjector}):function Na(S,A,I,P){const H=A.canLoad;if(void 0===H||0===H.length)return(0,J.of)(!0);const ie=H.map(ae=>{const at=C(ae,S);return On(function O(S){return S&&L(S.canLoad)}(at)?at.canLoad(A,I):S.runInContext(()=>at(A,I)))});return(0,J.of)(ie).pipe(Ui(),Ol())}(A,I,P).pipe((0,xe.z)(H=>H?this.configLoader.loadChildren(A,I).pipe((0,it.b)(ie=>{I._loadedRoutes=ie.routes,I._loadedInjector=ie.injector})):function Wo(S){return et(Ms(Go,3))}())):(0,J.of)({routes:[],injector:A})}lineralizeSegments(A,I){let P=[],H=I.root;for(;;){if(P=P.concat(H.segments),0===H.numberOfChildren)return(0,J.of)(P);if(H.numberOfChildren>1||!H.children[Xt])return A.redirectTo,et(new _.vHH(4e3,Go));H=H.children[Xt]}}applyRedirectCommands(A,I,P){return this.applyRedirectCreateUrlTree(I,this.urlSerializer.parse(I),A,P)}applyRedirectCreateUrlTree(A,I,P,H){const ie=this.createSegmentGroup(A,I.root,P,H);return new nr(ie,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(A,I){const P={};return _r(A,(H,ie)=>{if("string"==typeof H&&H.startsWith(":")){const at=H.substring(1);P[ie]=I[at]}else P[ie]=H}),P}createSegmentGroup(A,I,P,H){const ie=this.createSegments(A,I.segments,P,H);let ae={};return _r(I.children,(at,Pt)=>{ae[Pt]=this.createSegmentGroup(A,at,P,H)}),new Wn(ie,ae)}createSegments(A,I,P,H){return I.map(ie=>ie.path.startsWith(":")?this.findPosParam(A,ie,H):this.findOrReturn(ie,P))}findPosParam(A,I,P){const H=P[I.path.substring(1)];if(!H)throw new _.vHH(4001,Go);return H}findOrReturn(A,I){let P=0;for(const H of I){if(H.path===A.path)return I.splice(P),H;P++}return A}}class yl{}class F{constructor(A,I,P,H,ie,ae,at){this.injector=A,this.rootComponentType=I,this.config=P,this.urlTree=H,this.url=ie,this.paramsInheritanceStrategy=ae,this.urlSerializer=at}recognize(){const A=Qs(this.urlTree.root,[],[],this.config.filter(I=>void 0===I.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,Xt).pipe((0,nt.U)(I=>{if(null===I)return null;const P=new cs([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Xt,this.rootComponentType,null,this.urlTree.root,-1,{}),H=new $i(P,I),ie=new sa(this.url,H);return this.inheritParamsAndData(ie._root),ie}))}inheritParamsAndData(A){const I=A.value,P=xs(I,this.paramsInheritanceStrategy);I.params=Object.freeze(P.params),I.data=Object.freeze(P.data),A.children.forEach(H=>this.inheritParamsAndData(H))}processSegmentGroup(A,I,P,H){return 0===P.segments.length&&P.hasChildren()?this.processChildren(A,I,P):this.processSegment(A,I,P,P.segments,H)}processChildren(A,I,P){return(0,m.D)(Object.keys(P.children)).pipe(Oe(H=>{const ie=P.children[H],ae=Fo(I,H);return this.processSegmentGroup(A,ae,ie,H)}),(0,Zt.R)((H,ie)=>H&&ie?(H.push(...ie),H):null),function bt(S,A=!1){return(0,Re.e)((I,P)=>{let H=0;I.subscribe((0,ve.x)(P,ie=>{const ae=S(ie,H++);(ae||A)&&P.next(ie),!ae&&P.complete()}))})}(H=>null!==H),(0,gt.d)(null),Ee(),(0,nt.U)(H=>{if(null===H)return null;const ie=be(H);return function Z(S){S.sort((A,I)=>A.value.outlet===Xt?-1:I.value.outlet===Xt?1:A.value.outlet.localeCompare(I.value.outlet))}(ie),ie}))}processSegment(A,I,P,H,ie){return(0,m.D)(I).pipe(Oe(ae=>{var at;return this.processSegmentAgainstRoute(null!==(at=ae._injector)&&void 0!==at?at:A,ae,P,H,ie)}),(0,Ae.P)(ae=>!!ae),ht(ae=>{if(hs(ae))return is(P,H,ie)?(0,J.of)([]):(0,J.of)(null);throw ae}))}processSegmentAgainstRoute(A,I,P,H,ie){if(I.redirectTo||!So(I,P,H,ie))return(0,J.of)(null);let ae;if("**"===I.path){var at,Pt;const dn=H.length>0?Vr(H).parameters:{},Fn=Vn(P)+H.length,Dn=new cs(H,dn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ft(I),ds(I),null!==(at=null!==(Pt=I.component)&&void 0!==Pt?Pt:I._loadedComponent)&&void 0!==at?at:null,I,zt(P),Fn,lr(I));ae=(0,J.of)({snapshot:Dn,consumedSegments:[],remainingSegments:[]})}else ae=zs(P,I,H,A).pipe((0,nt.U)(({matched:dn,consumedSegments:Fn,remainingSegments:Dn,parameters:zr})=>{var Ir,Ns;if(!dn)return null;const $=Vn(P)+Fn.length;return{snapshot:new cs(Fn,zr,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ft(I),ds(I),null!==(Ir=null!==(Ns=I.component)&&void 0!==Ns?Ns:I._loadedComponent)&&void 0!==Ir?Ir:null,I,zt(P),$,lr(I)),consumedSegments:Fn,remainingSegments:Dn}}));return ae.pipe((0,ct.w)(dn=>{var Fn,Dn;if(null===dn)return(0,J.of)(null);const{snapshot:zr,consumedSegments:Ir,remainingSegments:Ns}=dn;A=null!==(Fn=I._injector)&&void 0!==Fn?Fn:A;const $=null!==(Dn=I._loadedInjector)&&void 0!==Dn?Dn:A,z=function V(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(I),{segmentGroup:re,slicedSegments:ke}=Qs(P,Ir,Ns,z.filter(ft=>void 0===ft.redirectTo));if(0===ke.length&&re.hasChildren())return this.processChildren($,z,re).pipe((0,nt.U)(ft=>null===ft?null:[new $i(zr,ft)]));if(0===z.length&&0===ke.length)return(0,J.of)([new $i(zr,[])]);const dt=ds(I)===ie;return this.processSegment($,z,re,ke,dt?Xt:ie).pipe((0,nt.U)(ft=>null===ft?null:[new $i(zr,ft)]))}))}}function oe(S){const A=S.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function be(S){const A=[],I=new Set;for(const P of S){if(!oe(P)){A.push(P);continue}const H=A.find(ie=>P.value.routeConfig===ie.value.routeConfig);void 0!==H?(H.children.push(...P.children),I.add(H)):A.push(P)}for(const P of I){const H=be(P.children);A.push(new $i(P.value,H))}return A.filter(P=>!I.has(P))}function zt(S){let A=S;for(;A._sourceSegment;)A=A._sourceSegment;return A}function Vn(S){var A;let I=S,P=null!==(A=I._segmentIndexShift)&&void 0!==A?A:0;for(;I._sourceSegment;){var H;I=I._sourceSegment,P+=null!==(H=I._segmentIndexShift)&&void 0!==H?H:0}return P-1}function Ft(S){return S.data||{}}function lr(S){return S.resolve||{}}function At(S){return"string"==typeof S.title||null===S.title}function Wt(S){return(0,ct.w)(A=>{const I=S(A);return I?(0,m.D)(I).pipe((0,nt.U)(()=>A)):(0,J.of)(A)})}const Gs=new _.OlP("ROUTES");let Za=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(I){if(this.componentLoaders.get(I))return this.componentLoaders.get(I);if(I._loadedComponent)return(0,J.of)(I._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(I);const P=On(I.loadComponent()).pipe((0,nt.U)(Qa),(0,it.b)(ie=>{this.onLoadEndListener&&this.onLoadEndListener(I),I._loadedComponent=ie}),fn(()=>{this.componentLoaders.delete(I)})),H=new Qe(P,()=>new ye.x).pipe(ne());return this.componentLoaders.set(I,H),H}loadChildren(I,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,J.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const ie=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,nt.U)(at=>{this.onLoadEndListener&&this.onLoadEndListener(P);let Pt,dn,Fn=!1;Array.isArray(at)?dn=at:(Pt=at.create(I).injector,dn=Rr(Pt.get(Gs,[],_.XFs.Self|_.XFs.Optional)));return{routes:dn.map(Ei),injector:Pt}}),fn(()=>{this.childrenLoaders.delete(P)})),ae=new Qe(ie,()=>new ye.x).pipe(ne());return this.childrenLoaders.set(P,ae),ae}loadModuleFactoryOrRoutes(I){return On(I()).pipe((0,nt.U)(Qa),(0,xe.z)(P=>P instanceof _.YKP||Array.isArray(P)?(0,J.of)(P):(0,m.D)(this.compiler.compileModuleAsync(P))))}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Qa(S){return function Xa(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let Ja=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new ye.x,this.configLoader=(0,_.f3M)(Za),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(Ln),this.rootContexts=(0,_.f3M)(Vs),this.navigationId=0,this.afterPreactivation=()=>(0,J.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=H=>this.events.next(new Nn(H)),this.configLoader.onLoadStartListener=H=>this.events.next(new Qt(H))}complete(){var I;null===(I=this.transitions)||void 0===I||I.complete()}handleNavigationRequest(I){var P;const H=++this.navigationId;null===(P=this.transitions)||void 0===P||P.next({...this.transitions.value,...I,id:H})}setupNavigations(I){return this.transitions=new fe.X({id:0,targetPageId:0,currentUrlTree:I.currentUrlTree,currentRawUrl:I.currentUrlTree,extractedUrl:I.urlHandlingStrategy.extract(I.currentUrlTree),urlAfterRedirects:I.urlHandlingStrategy.extract(I.currentUrlTree),rawUrl:I.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ye,restoredState:null,currentSnapshot:I.routerState.snapshot,targetSnapshot:null,currentRouterState:I.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ot.h)(P=>0!==P.id),(0,nt.U)(P=>({...P,extractedUrl:I.urlHandlingStrategy.extract(P.rawUrl)})),(0,ct.w)(P=>{let H=!1,ie=!1;return(0,J.of)(P).pipe((0,it.b)(ae=>{this.currentNavigation={id:ae.id,initialUrl:ae.rawUrl,extractedUrl:ae.extractedUrl,trigger:ae.source,extras:ae.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ct.w)(ae=>{var at;const Pt=I.browserUrlTree.toString(),dn=!I.navigated||ae.extractedUrl.toString()!==Pt||Pt!==I.currentUrlTree.toString(),Fn=null!==(at=ae.extras.onSameUrlNavigation)&&void 0!==at?at:I.onSameUrlNavigation;if(!dn&&"reload"!==Fn){const Dn="";return this.events.next(new rn(ae.id,I.serializeUrl(P.rawUrl),Dn,0)),I.rawUrlTree=ae.rawUrl,ae.resolve(null),Xe.E}if(I.urlHandlingStrategy.shouldProcessUrl(ae.rawUrl))return Sa(ae.source)&&(I.browserUrlTree=ae.extractedUrl),(0,J.of)(ae).pipe((0,ct.w)(Dn=>{var zr,Ir;const Ns=null===(zr=this.transitions)||void 0===zr?void 0:zr.getValue();return this.events.next(new kt(Dn.id,this.urlSerializer.serialize(Dn.extractedUrl),Dn.source,Dn.restoredState)),Ns!==(null===(Ir=this.transitions)||void 0===Ir?void 0:Ir.getValue())?Xe.E:Promise.resolve(Dn)}),function ss(S,A,I,P){return(0,ct.w)(H=>function ni(S,A,I,P,H){return new ha(S,A,I,P,H).apply()}(S,A,I,H.extractedUrl,P).pipe((0,nt.U)(ie=>({...H,urlAfterRedirects:ie}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,I.config),(0,it.b)(Dn=>{this.currentNavigation={...this.currentNavigation,finalUrl:Dn.urlAfterRedirects},P.urlAfterRedirects=Dn.urlAfterRedirects}),function Zn(S,A,I,P,H){return(0,xe.z)(ie=>function Ka(S,A,I,P,H,ie,ae="emptyOnly"){return new F(S,A,I,P,H,ae,ie).recognize().pipe((0,ct.w)(at=>null===at?function Ya(S){return new Me.y(A=>A.error(S))}(new yl):(0,J.of)(at)))}(S,A,I,ie.urlAfterRedirects,P.serialize(ie.urlAfterRedirects),P,H).pipe((0,nt.U)(ae=>({...ie,targetSnapshot:ae}))))}(this.environmentInjector,this.rootComponentType,I.config,this.urlSerializer,I.paramsInheritanceStrategy),(0,it.b)(Dn=>{if(P.targetSnapshot=Dn.targetSnapshot,"eager"===I.urlUpdateStrategy){if(!Dn.extras.skipLocationChange){const Ir=I.urlHandlingStrategy.merge(Dn.urlAfterRedirects,Dn.rawUrl);I.setBrowserUrl(Ir,Dn)}I.browserUrlTree=Dn.urlAfterRedirects}const zr=new qn(Dn.id,this.urlSerializer.serialize(Dn.extractedUrl),this.urlSerializer.serialize(Dn.urlAfterRedirects),Dn.targetSnapshot);this.events.next(zr)}));if(dn&&I.urlHandlingStrategy.shouldProcessUrl(I.rawUrlTree)){const{id:Dn,extractedUrl:zr,source:Ir,restoredState:Ns,extras:$}=ae,z=new kt(Dn,this.urlSerializer.serialize(zr),Ir,Ns);this.events.next(z);const re=Vo(zr,this.rootComponentType).snapshot;return P={...ae,targetSnapshot:re,urlAfterRedirects:zr,extras:{...$,skipLocationChange:!1,replaceUrl:!1}},(0,J.of)(P)}{const Dn="";return this.events.next(new rn(ae.id,I.serializeUrl(P.extractedUrl),Dn,1)),I.rawUrlTree=ae.rawUrl,ae.resolve(null),Xe.E}}),(0,it.b)(ae=>{const at=new tt(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(ae.urlAfterRedirects),ae.targetSnapshot);this.events.next(at)}),(0,nt.U)(ae=>P={...ae,guards:Ho(ae.targetSnapshot,ae.currentSnapshot,this.rootContexts)}),function Ca(S,A){return(0,xe.z)(I=>{const{targetSnapshot:P,currentSnapshot:H,guards:{canActivateChecks:ie,canDeactivateChecks:ae}}=I;return 0===ae.length&&0===ie.length?(0,J.of)({...I,guardsResult:!0}):function pl(S,A,I,P){return(0,m.D)(S).pipe((0,xe.z)(H=>function Da(S,A,I,P,H){const ie=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ie||0===ie.length)return(0,J.of)(!0);const ae=ie.map(at=>{var Pt;const dn=null!==(Pt=po(A))&&void 0!==Pt?Pt:H,Fn=C(at,dn);return On(function sn(S){return S&&L(S.canDeactivate)}(Fn)?Fn.canDeactivate(S,A,I,P):dn.runInContext(()=>Fn(S,A,I,P))).pipe((0,Ae.P)())});return(0,J.of)(ae).pipe(Ui())}(H.component,H.route,I,A,P)),(0,Ae.P)(H=>!0!==H,!0))}(ae,P,H,S).pipe((0,xe.z)(at=>at&&function R(S){return"boolean"==typeof S}(at)?function Fi(S,A,I,P){return(0,m.D)(A).pipe(Oe(H=>(0,Ne.z)(function la(S,A){return null!==S&&A&&A(new Qn(S)),(0,J.of)(!0)}(H.route.parent,P),function Os(S,A){return null!==S&&A&&A(new fr(S)),(0,J.of)(!0)}(H.route,P),function ks(S,A,I){const P=A[A.length-1],ie=A.slice(0,A.length-1).reverse().map(ae=>function so(S){const A=S.routeConfig?S.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:S,guards:A}:null}(ae)).filter(ae=>null!==ae).map(ae=>ue(()=>{const at=ae.guards.map(Pt=>{var dn;const Fn=null!==(dn=po(ae.node))&&void 0!==dn?dn:I,Dn=C(Pt,Fn);return On(function vt(S){return S&&L(S.canActivateChild)}(Dn)?Dn.canActivateChild(P,S):Fn.runInContext(()=>Dn(P,S))).pipe((0,Ae.P)())});return(0,J.of)(at).pipe(Ui())}));return(0,J.of)(ie).pipe(Ui())}(S,H.path,I),function ua(S,A,I){const P=A.routeConfig?A.routeConfig.canActivate:null;if(!P||0===P.length)return(0,J.of)(!0);const H=P.map(ie=>ue(()=>{var ae;const at=null!==(ae=po(A))&&void 0!==ae?ae:I,Pt=C(ie,at);return On(function te(S){return S&&L(S.canActivate)}(Pt)?Pt.canActivate(A,S):at.runInContext(()=>Pt(A,S))).pipe((0,Ae.P)())}));return(0,J.of)(H).pipe(Ui())}(S,H.route,I))),(0,Ae.P)(H=>!0!==H,!0))}(P,ie,S,A):(0,J.of)(at)),(0,nt.U)(at=>({...I,guardsResult:at})))})}(this.environmentInjector,ae=>this.events.next(ae)),(0,it.b)(ae=>{if(P.guardsResult=ae.guardsResult,Tr(ae.guardsResult))throw io(0,ae.guardsResult);const at=new Ve(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(ae.urlAfterRedirects),ae.targetSnapshot,!!ae.guardsResult);this.events.next(at)}),(0,ot.h)(ae=>!!ae.guardsResult||(I.restoreHistory(ae),this.cancelNavigationTransition(ae,"",3),!1)),Wt(ae=>{if(ae.guards.canActivateChecks.length)return(0,J.of)(ae).pipe((0,it.b)(at=>{const Pt=new yt(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next(Pt)}),(0,ct.w)(at=>{let Pt=!1;return(0,J.of)(at).pipe(function Vi(S,A){return(0,xe.z)(I=>{const{targetSnapshot:P,guards:{canActivateChecks:H}}=I;if(!H.length)return(0,J.of)(I);let ie=0;return(0,m.D)(H).pipe(Oe(ae=>function hn(S,A,I,P){const H=S.routeConfig,ie=S._resolve;return void 0!==(null==H?void 0:H.title)&&!At(H)&&(ie[Tn]=H.title),function yn(S,A,I,P){const H=function xo(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===H.length)return(0,J.of)({});const ie={};return(0,m.D)(H).pipe((0,xe.z)(ae=>function on(S,A,I,P){var H;const ie=null!==(H=po(A))&&void 0!==H?H:P,ae=C(S,ie);return On(ae.resolve?ae.resolve(A,I):ie.runInContext(()=>ae(A,I)))}(S[ae],A,I,P).pipe((0,Ae.P)(),(0,it.b)(at=>{ie[ae]=at}))),Vt(1),function nn(S){return(0,nt.U)(()=>S)}(ie),ht(ae=>hs(ae)?Xe.E:et(ae)))}(ie,S,A,P).pipe((0,nt.U)(ae=>(S._resolvedData=ae,S.data=xs(S,I).resolve,H&&At(H)&&(S.data[Tn]=H.title),null)))}(ae.route,P,S,A)),(0,it.b)(()=>ie++),Vt(1),(0,xe.z)(ae=>ie===H.length?(0,J.of)(I):Xe.E))})}(I.paramsInheritanceStrategy,this.environmentInjector),(0,it.b)({next:()=>Pt=!0,complete:()=>{Pt||(I.restoreHistory(at),this.cancelNavigationTransition(at,"",2))}}))}),(0,it.b)(at=>{const Pt=new Ht(at.id,this.urlSerializer.serialize(at.extractedUrl),this.urlSerializer.serialize(at.urlAfterRedirects),at.targetSnapshot);this.events.next(Pt)}))}),Wt(ae=>{const at=Pt=>{var dn;const Fn=[];null!==(dn=Pt.routeConfig)&&void 0!==dn&&dn.loadComponent&&!Pt.routeConfig._loadedComponent&&Fn.push(this.configLoader.loadComponent(Pt.routeConfig).pipe((0,it.b)(Dn=>{Pt.component=Dn}),(0,nt.U)(()=>{})));for(const Dn of Pt.children)Fn.push(...at(Dn));return Fn};return je(at(ae.targetSnapshot.root)).pipe((0,gt.d)(),(0,ze.q)(1))}),Wt(()=>this.afterPreactivation()),(0,nt.U)(ae=>{const at=function Xs(S,A,I){const P=ro(S,A._root,I?I._root:void 0);return new Us(P,A)}(I.routeReuseStrategy,ae.targetSnapshot,ae.currentRouterState);return P={...ae,targetRouterState:at}}),(0,it.b)(ae=>{I.currentUrlTree=ae.urlAfterRedirects,I.rawUrlTree=I.urlHandlingStrategy.merge(ae.urlAfterRedirects,ae.rawUrl),I.routerState=ae.targetRouterState,"deferred"===I.urlUpdateStrategy&&(ae.extras.skipLocationChange||I.setBrowserUrl(I.rawUrlTree,ae),I.browserUrlTree=ae.urlAfterRedirects)}),((S,A,I)=>(0,nt.U)(P=>(new Do(A,P.targetRouterState,P.currentRouterState,I).activate(S),P)))(this.rootContexts,I.routeReuseStrategy,ae=>this.events.next(ae)),(0,ze.q)(1),(0,it.b)({next:ae=>{var at;H=!0,this.lastSuccessfulNavigation=this.currentNavigation,I.navigated=!0,this.events.next(new xt(ae.id,this.urlSerializer.serialize(ae.extractedUrl),this.urlSerializer.serialize(I.currentUrlTree))),null===(at=I.titleStrategy)||void 0===at||at.updateTitle(ae.targetRouterState.snapshot),ae.resolve(!0)},complete:()=>{H=!0}}),fn(()=>{var ae;H||ie||this.cancelNavigationTransition(P,"",1),(null===(ae=this.currentNavigation)||void 0===ae?void 0:ae.id)===P.id&&(this.currentNavigation=null)}),ht(ae=>{if(ie=!0,ws(ae)){ho(ae)||(I.navigated=!0,I.restoreHistory(P,!0));const Pt=new Gt(P.id,this.urlSerializer.serialize(P.extractedUrl),ae.message,ae.cancellationCode);if(this.events.next(Pt),ho(ae)){const dn=I.urlHandlingStrategy.merge(ae.url,I.rawUrlTree),Fn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===I.urlUpdateStrategy||Sa(P.source)};I.scheduleNavigation(dn,Ye,null,Fn,{resolve:P.resolve,reject:P.reject,promise:P.promise})}else P.resolve(!1)}else{var at;I.restoreHistory(P,!0);const Pt=new Pn(P.id,this.urlSerializer.serialize(P.extractedUrl),ae,null!==(at=P.targetSnapshot)&&void 0!==at?at:void 0);this.events.next(Pt);try{P.resolve(I.errorHandler(ae))}catch(dn){P.reject(dn)}}return Xe.E}))}))}cancelNavigationTransition(I,P,H){const ie=new Gt(I.id,this.urlSerializer.serialize(I.extractedUrl),P,H);this.events.next(ie),I.resolve(!1)}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function Sa(S){return S!==Ye}let el=(()=>{class S{buildTitle(I){let P,H=I.root;for(;void 0!==H;){var ie;P=null!==(ie=this.getResolvedTitleForRoute(H))&&void 0!==ie?ie:P,H=H.children.find(ae=>ae.outlet===Xt)}return P}getResolvedTitleForRoute(I){return I.data[Tn]}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(vl)},providedIn:"root"}),S})(),vl=(()=>{class S extends el{constructor(I){super(),this.title=I}updateTitle(I){const P=this.buildTitle(I);void 0!==P&&this.title.setTitle(P)}}return S.\u0275fac=function(I){return new(I||S)(_.LFG(_n.Dx))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),qo=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(pr)},providedIn:"root"}),S})();class Fa{shouldDetach(A){return!1}store(A,I){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,I){return A.routeConfig===I.routeConfig}}let pr=(()=>{class S extends Fa{}return S.\u0275fac=function(){let A;return function(P){return(A||(A=_.n5z(S)))(P||S)}}(),S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const La=new _.OlP("",{providedIn:"root",factory:()=>({})});let Ii=(()=>{class S{}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(Xn)},providedIn:"root"}),S})(),Xn=(()=>{class S{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,P){return I}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function jr(S){throw S}function Uc(S,A,I){return A.parse("/")}const ui={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Sn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){var I;this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(La,{optional:!0})||{},this.errorHandler=this.options.errorHandler||jr,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Uc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(Ii),this.routeReuseStrategy=(0,_.f3M)(qo),this.urlCreationStrategy=(0,_.f3M)(bi),this.titleStrategy=(0,_.f3M)(el),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Rr(null!==(I=(0,_.f3M)(Gs,{optional:!0}))&&void 0!==I?I:[]),this.navigationTransitions=(0,_.f3M)(Ja),this.urlSerializer=(0,_.f3M)(Ln),this.location=(0,_.f3M)(qe.Ye),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Vo(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(P=>{this.lastSuccessfulId=P.id,this.currentPageId=P.targetPageId},P=>{this.console.warn(`Unhandled Navigation Error: ${P}`)})}resetRootComponentType(I){this.routerState.root.component=I,this.navigationTransitions.rootComponentType=I}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const I=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ye,I)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const P="popstate"===I.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{this.navigateToSyncWithBrowser(I.url,P,I.state)},0)}))}navigateToSyncWithBrowser(I,P,H){const ie={replaceUrl:!0},ae=null!=H&&H.navigationId?H:null;if(H){const Pt={...H};delete Pt.navigationId,delete Pt.\u0275routerPageId,0!==Object.keys(Pt).length&&(ie.state=Pt)}const at=this.parseUrl(I);this.scheduleNavigation(at,P,ae,ie)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(I){this.config=I.map(Ei),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,P={}){const{relativeTo:H,queryParams:ie,fragment:ae,queryParamsHandling:at,preserveFragment:Pt}=P,dn=Pt?this.currentUrlTree.fragment:ae;let Fn=null;switch(at){case"merge":Fn={...this.currentUrlTree.queryParams,...ie};break;case"preserve":Fn=this.currentUrlTree.queryParams;break;default:Fn=ie||null}return null!==Fn&&(Fn=this.removeEmptyProps(Fn)),this.urlCreationStrategy.createUrlTree(H,this.routerState,this.currentUrlTree,I,Fn,null!=dn?dn:null)}navigateByUrl(I,P={skipLocationChange:!1}){const H=Tr(I)?I:this.parseUrl(I),ie=this.urlHandlingStrategy.merge(H,this.rawUrlTree);return this.scheduleNavigation(ie,Ye,null,P)}navigate(I,P={skipLocationChange:!1}){return function nl(S){for(let A=0;A<S.length;A++){const I=S[A];if(null==I)throw new _.vHH(4008,false)}}(I),this.navigateByUrl(this.createUrlTree(I,P),P)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let P;try{P=this.urlSerializer.parse(I)}catch(H){P=this.malformedUriErrorHandler(H,this.urlSerializer,I)}return P}isActive(I,P){let H;if(H=!0===P?{...ui}:!1===P?{...Sn}:P,Tr(I))return yr(this.currentUrlTree,I,H);const ie=this.parseUrl(I);return yr(this.currentUrlTree,ie,H)}removeEmptyProps(I){return Object.keys(I).reduce((P,H)=>{const ie=I[H];return null!=ie&&(P[H]=ie),P},{})}scheduleNavigation(I,P,H,ie,ae){if(this.disposed)return Promise.resolve(!1);let at,Pt,dn,Fn;if(ae?(at=ae.resolve,Pt=ae.reject,dn=ae.promise):dn=new Promise((Ir,Ns)=>{at=Ir,Pt=Ns}),"computed"===this.canceledNavigationResolution)if(H&&H.\u0275routerPageId)Fn=H.\u0275routerPageId;else if(ie.replaceUrl||ie.skipLocationChange){var Dn;Fn=null!==(Dn=this.browserPageId)&&void 0!==Dn?Dn:0}else{var zr;Fn=(null!==(zr=this.browserPageId)&&void 0!==zr?zr:0)+1}else Fn=0;return this.navigationTransitions.handleNavigationRequest({targetPageId:Fn,source:P,restoredState:H,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:I,extras:ie,resolve:at,reject:Pt,promise:dn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dn.catch(Ir=>Promise.reject(Ir))}setBrowserUrl(I,P){const H=this.urlSerializer.serialize(I),ie={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(H)||P.extras.replaceUrl?this.location.replaceState(H,"",ie):this.location.go(H,"",ie)}restoreHistory(I,P=!1){if("computed"===this.canceledNavigationResolution){var H,ie;const ae=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(H=this.getCurrentNavigation())||void 0===H?void 0:H.finalUrl)||0===ae?this.currentUrlTree===(null===(ie=this.getCurrentNavigation())||void 0===ie?void 0:ie.finalUrl)&&0===ae&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ae)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(I,P){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:P}:{navigationId:I}}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Ws=(()=>{class S{constructor(I,P,H,ie,ae,at){var Pt;this.router=I,this.route=P,this.tabIndexAttribute=H,this.renderer=ie,this.el=ae,this.locationStrategy=at,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new ye.x;const dn=null===(Pt=ae.nativeElement.tagName)||void 0===Pt?void 0:Pt.toLowerCase();this.isAnchorElement="a"===dn||"area"===dn,this.isAnchorElement?this.subscription=I.events.subscribe(Fn=>{Fn instanceof xt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(I){this._preserveFragment=(0,_.D6c)(I)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(I){this._skipLocationChange=(0,_.D6c)(I)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(I){this._replaceUrl=(0,_.D6c)(I)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(I){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",I)}ngOnChanges(I){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(I,P,H,ie,ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==I||P||H||ie||ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){var I;null===(I=this.subscription)||void 0===I||I.unsubscribe()}updateHref(){var I;this.href=null!==this.urlTree&&this.locationStrategy?null===(I=this.locationStrategy)||void 0===I?void 0:I.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const P=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",P)}applyAttributeValue(I,P){const H=this.renderer,ie=this.el.nativeElement;null!==P?H.setAttribute(ie,I,P):H.removeAttribute(ie,I)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(I){return new(I||S)(_.Y36(Pi),_.Y36(Is),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(qe.S$))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(I,P){1&I&&_.NdJ("click",function(ie){return P.onClick(ie.button,ie.ctrlKey,ie.shiftKey,ie.altKey,ie.metaKey)}),2&I&&_.uIk("target",P.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),S})();class Fl{}let ps=(()=>{class S{preload(I,P){return P().pipe(ht(()=>(0,J.of)(null)))}}return S.\u0275fac=function(I){return new(I||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),sc=(()=>{class S{constructor(I,P,H,ie,ae){this.router=I,this.injector=H,this.preloadingStrategy=ie,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,ot.h)(I=>I instanceof xt),Oe(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,P){const H=[];for(const Pt of P){var ie,ae;Pt.providers&&!Pt._injector&&(Pt._injector=(0,_.MMx)(Pt.providers,I,`Route: ${Pt.path}`));const dn=null!==(ie=Pt._injector)&&void 0!==ie?ie:I,Fn=null!==(ae=Pt._loadedInjector)&&void 0!==ae?ae:dn;var at;(Pt.loadChildren&&!Pt._loadedRoutes&&void 0===Pt.canLoad||Pt.loadComponent&&!Pt._loadedComponent)&&H.push(this.preloadConfig(dn,Pt)),(Pt.children||Pt._loadedRoutes)&&H.push(this.processRoutes(Fn,null!==(at=Pt.children)&&void 0!==at?at:Pt._loadedRoutes))}return(0,m.D)(H).pipe((0,Mn.J)())}preloadConfig(I,P){return this.preloadingStrategy.preload(P,()=>{let H;H=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(I,P):(0,J.of)(null);const ie=H.pipe((0,xe.z)(ae=>{var at;return null===ae?(0,J.of)(void 0):(P._loadedRoutes=ae.routes,P._loadedInjector=ae.injector,this.processRoutes(null!==(at=ae.injector)&&void 0!==at?at:I,ae.routes))}));if(P.loadComponent&&!P._loadedComponent){const ae=this.loader.loadComponent(P);return(0,m.D)([ie,ae]).pipe((0,Mn.J)())}return ie})}}return S.\u0275fac=function(I){return new(I||S)(_.LFG(Pi),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(Fl),_.LFG(Za))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const gs=new _.OlP("");let iu=(()=>{class S{constructor(I,P,H,ie,ae={}){this.urlSerializer=I,this.transitions=P,this.viewportScroller=H,this.zone=ie,this.options=ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ae.scrollPositionRestoration=ae.scrollPositionRestoration||"disabled",ae.anchorScrolling=ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof kt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof xt&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.urlSerializer.parse(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(I=>{I instanceof ei&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,P){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ei(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))})},0)})}ngOnDestroy(){var I,P;null===(I=this.routerEventsSubscription)||void 0===I||I.unsubscribe(),null===(P=this.scrollEventsSubscription)||void 0===P||P.unsubscribe()}}return S.\u0275fac=function(I){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();var os=(()=>((os=os||{})[os.COMPLETE=0]="COMPLETE",os[os.FAILED=1]="FAILED",os[os.REDIRECTING=2]="REDIRECTING",os))();const ms=!1;function Js(S,A){return{\u0275kind:S,\u0275providers:A}}const oo=new _.OlP("",{providedIn:"root",factory:()=>!1});function Oi(){const S=(0,_.f3M)(_.zs3);return A=>{var I,P;const H=S.get(_.z2F);if(A!==H.components[0])return;const ie=S.get(Pi),ae=S.get(pa);1===S.get(il)&&ie.initialNavigation(),null===(I=S.get(eo,null,_.XFs.Optional))||void 0===I||I.setUpPreloading(),null===(P=S.get(gs,null,_.XFs.Optional))||void 0===P||P.init(),ie.resetRootComponentType(H.componentTypes[0]),ae.closed||(ae.next(),ae.complete(),ae.unsubscribe())}}const pa=new _.OlP(ms?"bootstrap done indicator":"",{factory:()=>new ye.x}),il=new _.OlP(ms?"initial navigation":"",{providedIn:"root",factory:()=>1});function Dd(){let S=[];return S=ms?[{provide:_.Xts,multi:!0,useFactory:()=>{const A=(0,_.f3M)(Pi);return()=>A.events.subscribe(I=>{var P,H,ie,ae;null===(P=(H=console).group)||void 0===P||P.call(H,`Router Event: ${I.constructor.name}`),console.log(function ai(S){var A,I,P,H;if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${(null===(A=S.snapshot.routeConfig)||void 0===A?void 0:A.path)||""}')`;case 13:return`ActivationStart(path: '${(null===(I=S.snapshot.routeConfig)||void 0===I?void 0:I.path)||""}')`;case 12:return`ChildActivationEnd(path: '${(null===(P=S.snapshot.routeConfig)||void 0===P?void 0:P.path)||""}')`;case 11:return`ChildActivationStart(path: '${(null===(H=S.snapshot.routeConfig)||void 0===H?void 0:H.path)||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(I)),console.log(I),null===(ie=(ae=console).groupEnd)||void 0===ie||ie.call(ae)})}}]:[],Js(1,S)}const eo=new _.OlP(ms?"router preloader":"");function Bl(S){return Js(0,[{provide:eo,useExisting:sc},{provide:Fl,useExisting:S}])}const ji=!1,ys=new _.OlP(ji?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Ko=[qe.Ye,{provide:Ln,useClass:In},Pi,Vs,{provide:Is,useFactory:function Rt(S){return S.routerState.root},deps:[Pi]},Za,ji?{provide:oo,useValue:!0}:[]];function vs(){return new _.PXZ("Router",Pi)}let Zo=(()=>{class S{constructor(I){}static forRoot(I,P){return{ngModule:S,providers:[Ko,ji&&null!=P&&P.enableTracing?Dd().\u0275providers:[],{provide:Gs,multi:!0,useValue:I},{provide:ys,useFactory:Xo,deps:[[Pi,new _.FiY,new _.tp0]]},{provide:La,useValue:P||{}},null!=P&&P.useHash?{provide:qe.S$,useClass:qe.Do}:{provide:qe.S$,useClass:qe.b0},{provide:gs,useFactory:()=>{const S=(0,_.f3M)(qe.EM),A=(0,_.f3M)(_.R0b),I=(0,_.f3M)(La),P=(0,_.f3M)(Ja),H=(0,_.f3M)(Ln);return I.scrollOffset&&S.setOffset(I.scrollOffset),new iu(H,P,S,A,I)}},null!=P&&P.preloadingStrategy?Bl(P.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:vs},null!=P&&P.initialNavigation?Di(P):[],[{provide:Ru,useFactory:Oi},{provide:_.tb,multi:!0,useExisting:Ru}]]}}static forChild(I){return{ngModule:S,providers:[{provide:Gs,multi:!0,useValue:I}]}}}return S.\u0275fac=function(I){return new(I||S)(_.LFG(ys,8))},S.\u0275mod=_.oAB({type:S}),S.\u0275inj=_.cJS({imports:[Pr]}),S})();function Xo(S){if(ji&&S)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Di(S){return["disabled"===S.initialNavigation?Js(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const A=(0,_.f3M)(Pi);return()=>{A.setUpLocationChangeListener()}}},{provide:il,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?Js(2,[{provide:il,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:A=>{const I=A.get(qe.V_,Promise.resolve());return()=>I.then(()=>new Promise(P=>{const H=A.get(Pi),ie=A.get(pa);(function Il(S,A){S.events.pipe((0,ot.h)(I=>I instanceof xt||I instanceof Gt||I instanceof Pn||I instanceof rn),(0,nt.U)(I=>I instanceof xt||I instanceof rn?os.COMPLETE:I instanceof Gt&&(0===I.code||1===I.code)?os.REDIRECTING:os.FAILED),(0,ot.h)(I=>I!==os.REDIRECTING),(0,ze.q)(1)).subscribe(()=>{A()})})(H,()=>{P(!0)}),A.get(Ja).afterPreactivation=()=>(P(!0),ie.closed?(0,J.of)(void 0):ie),H.initialNavigation()}))}}]).\u0275providers:[]]}const Ru=new _.OlP(ji?"Router Initializer":"")},3942:(cn,mt,j)=>{"use strict";j.d(mt,{Z:()=>rt});var _=j(2090),m=j(4859),J=j(9681),fe=j(1877);class Fe{constructor(Ne,Ce){this._delegate=Ne,this.firebase=Ce,(0,J._addComponent)(Ne,new m.wA("app-compat",()=>this,"PUBLIC")),this.container=Ne.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this._delegate.automaticDataCollectionEnabled=Ne}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ne=>{this._delegate.checkDestroyed(),Ne()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(Ne,Ce=J._DEFAULT_ENTRY_NAME){var ue;this._delegate.checkDestroyed();const ut=this._delegate.container.getProvider(Ne);return!ut.isInitialized()&&"EXPLICIT"===(null===(ue=ut.getComponent())||void 0===ue?void 0:ue.instantiationMode)&&ut.initialize(),ut.getImmediate({identifier:Ce})}_removeServiceInstance(Ne,Ce=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ne).clearInstance(Ce)}_addComponent(Ne){(0,J._addComponent)(this._delegate,Ne)}_addOrOverwriteComponent(Ne){(0,J._addOrOverwriteComponent)(this._delegate,Ne)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),we=function Be(){const Dt=function Le(Dt){const Ne={},Ce={__esModule:!0,initializeApp:function Je(Re,ne={}){const Qe=J.initializeApp(Re,ne);if((0,_.r3)(Ne,Qe.name))return Ne[Qe.name];const ye=new Dt(Qe,Ce);return Ne[Qe.name]=ye,ye},app:ut,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function Xe(Re){const ne=Re.name,Qe=ne.replace("-compat","");if(J._registerComponent(Re)&&"PUBLIC"===Re.type){const ye=(qe=ut())=>{if("function"!=typeof qe[Qe])throw Ie.create("invalid-app-argument",{appName:ne});return qe[Qe]()};void 0!==Re.serviceProps&&(0,_.ZB)(ye,Re.serviceProps),Ce[Qe]=ye,Dt.prototype[Qe]=function(...qe){return this._getService.bind(this,ne).apply(this,Re.multipleInstances?qe:[])}}return"PUBLIC"===Re.type?Ce[Qe]:null},removeApp:function ue(Re){delete Ne[Re]},useAsService:function X(Re,ne){return"serverAuth"===ne?null:ne},modularAPIs:J}};function ut(Re){if(!(0,_.r3)(Ne,Re=Re||J._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:Re});return Ne[Re]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function et(){return Object.keys(Ne).map(Re=>Ne[Re])}}),ut.App=Dt,Ce}(Fe);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function Ne(Ce){(0,_.ZB)(Dt,Ce)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Dt}(),me=new fe.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){me.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&me.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const rt=we;!function je(Dt){(0,J.registerVersion)("@firebase/app-compat","0.2.7",Dt)}()},9681:(cn,mt,j)=>{"use strict";j.r(mt),j.d(mt,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>_n,_DEFAULT_ENTRY_NAME:()=>Ae,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Vt,_apps:()=>it,_clearComponents:()=>bt,_components:()=>ht,_getProvider:()=>gt,_registerComponent:()=>vn,_removeServiceInstance:()=>Ee,deleteApp:()=>or,getApp:()=>Tn,getApps:()=>Hn,initializeApp:()=>Xt,onLog:()=>tn,registerVersion:()=>gr,setLogLevel:()=>Yr});var _=j(5861),m=j(4859),J=j(1877),fe=j(2090),Fe=j(8766);class Me{constructor(jt){this.container=jt}getPlatformInfoString(){return this.container.getProviders().map(Cn=>{if(function Ie(an){const jt=an.getComponent();return"VERSION"===(null==jt?void 0:jt.type)}(Cn)){const Ln=Cn.getImmediate();return`${Ln.library}/${Ln.version}`}return null}).filter(Cn=>Cn).join(" ")}}const Le="@firebase/app",we=new J.Yd("@firebase/app"),Ae="[DEFAULT]",Oe={[Le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,ht=new Map;function Zt(an,jt){try{an.container.addComponent(jt)}catch(Cn){we.debug(`Component ${jt.name} failed to register with FirebaseApp ${an.name}`,Cn)}}function Vt(an,jt){an.container.addOrOverwriteComponent(jt)}function vn(an){const jt=an.name;if(ht.has(jt))return we.debug(`There were multiple attempts to register component ${jt}.`),!1;ht.set(jt,an);for(const Cn of it.values())Zt(Cn,an);return!0}function gt(an,jt){const Cn=an.container.getProvider("heartbeat").getImmediate({optional:!0});return Cn&&Cn.triggerHeartbeat(),an.container.getProvider(jt)}function Ee(an,jt,Cn=Ae){gt(an,jt).clearInstance(Cn)}function bt(){ht.clear()}const fn=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Mn{constructor(jt,Cn,Ln){this._isDeleted=!1,this._options=Object.assign({},jt),this._config=Object.assign({},Cn),this._name=Cn.name,this._automaticDataCollectionEnabled=Cn.automaticDataCollectionEnabled,this._container=Ln,this.container.addComponent(new m.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(jt){this.checkDestroyed(),this._automaticDataCollectionEnabled=jt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(jt){this._isDeleted=jt}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}const _n="9.19.1";function Xt(an,jt={}){let Cn=an;"object"!=typeof jt&&(jt={name:jt});const Ln=Object.assign({name:Ae,automaticDataCollectionEnabled:!1},jt),In=Ln.name;if("string"!=typeof In||!In)throw fn.create("bad-app-name",{appName:String(In)});if(Cn||(Cn=(0,fe.aH)()),!Cn)throw fn.create("no-options");const $n=it.get(In);if($n){if((0,fe.vZ)(Cn,$n.options)&&(0,fe.vZ)(Ln,$n.config))return $n;throw fn.create("duplicate-app",{appName:In})}const Er=new m.H0(In);for(const Pe of ht.values())Er.addComponent(Pe);const $e=new Mn(Cn,Ln,Er);return it.set(In,$e),$e}function Tn(an=Ae){const jt=it.get(an);if(!jt&&an===Ae)return Xt();if(!jt)throw fn.create("no-app",{appName:an});return jt}function Hn(){return Array.from(it.values())}function or(an){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(an){const jt=an.name;it.has(jt)&&(it.delete(jt),yield Promise.all(an.container.getProviders().map(Cn=>Cn.delete())),an.isDeleted=!0)})).apply(this,arguments)}function gr(an,jt,Cn){var Ln;let In=null!==(Ln=Oe[an])&&void 0!==Ln?Ln:an;Cn&&(In+=`-${Cn}`);const $n=In.match(/\s|\//),Er=jt.match(/\s|\//);if($n||Er){const $e=[`Unable to register library "${In}" with version "${jt}":`];return $n&&$e.push(`library name "${In}" contains illegal characters (whitespace or "/")`),$n&&Er&&$e.push("and"),Er&&$e.push(`version name "${jt}" contains illegal characters (whitespace or "/")`),void we.warn($e.join(" "))}vn(new m.wA(`${In}-version`,()=>({library:In,version:jt}),"VERSION"))}function tn(an,jt){if(null!==an&&"function"!=typeof an)throw fn.create("invalid-log-argument");(0,J.Am)(an,jt)}function Yr(an){(0,J.Ub)(an)}const Rr="firebase-heartbeat-database",Vr=1,di="firebase-heartbeat-store";let _r=null;function On(){return _r||(_r=(0,Fe.X3)(Rr,Vr,{upgrade:(an,jt)=>{0===jt&&an.createObjectStore(di)}}).catch(an=>{throw fn.create("idb-open",{originalErrorMessage:an.message})})),_r}function An(){return(An=(0,_.Z)(function*(an){try{return(yield On()).transaction(di).objectStore(di).get(ir(an))}catch(jt){if(jt instanceof fe.ZR)we.warn(jt.message);else{const Cn=fn.create("idb-get",{originalErrorMessage:null==jt?void 0:jt.message});we.warn(Cn.message)}}})).apply(this,arguments)}function Kt(an,jt){return yr.apply(this,arguments)}function yr(){return(yr=(0,_.Z)(function*(an,jt){try{const Ln=(yield On()).transaction(di,"readwrite");return yield Ln.objectStore(di).put(jt,ir(an)),Ln.done}catch(Cn){if(Cn instanceof fe.ZR)we.warn(Cn.message);else{const Ln=fn.create("idb-set",{originalErrorMessage:null==Cn?void 0:Cn.message});we.warn(Ln.message)}}})).apply(this,arguments)}function ir(an){return`${an.name}!${an.options.appId}`}class wi{constructor(jt){this.container=jt,this._heartbeatsCache=null;const Cn=this.container.getProvider("app").getImmediate();this._storage=new nr(Cn),this._heartbeatsCachePromise=this._storage.read().then(Ln=>(this._heartbeatsCache=Ln,Ln))}triggerHeartbeat(){var jt=this;return(0,_.Z)(function*(){const Ln=jt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=Dr();if(null===jt._heartbeatsCache&&(jt._heartbeatsCache=yield jt._heartbeatsCachePromise),jt._heartbeatsCache.lastSentHeartbeatDate!==In&&!jt._heartbeatsCache.heartbeats.some($n=>$n.date===In))return jt._heartbeatsCache.heartbeats.push({date:In,agent:Ln}),jt._heartbeatsCache.heartbeats=jt._heartbeatsCache.heartbeats.filter($n=>{const Er=new Date($n.date).valueOf();return Date.now()-Er<=2592e6}),jt._storage.overwrite(jt._heartbeatsCache)})()}getHeartbeatsHeader(){var jt=this;return(0,_.Z)(function*(){if(null===jt._heartbeatsCache&&(yield jt._heartbeatsCachePromise),null===jt._heartbeatsCache||0===jt._heartbeatsCache.heartbeats.length)return"";const Cn=Dr(),{heartbeatsToSend:Ln,unsentEntries:In}=function si(an,jt=1024){const Cn=[];let Ln=an.slice();for(const In of an){const $n=Cn.find(Er=>Er.agent===In.agent);if($n){if($n.dates.push(In.date),Wn(Cn)>jt){$n.dates.pop();break}}else if(Cn.push({agent:In.agent,dates:[In.date]}),Wn(Cn)>jt){Cn.pop();break}Ln=Ln.slice(1)}return{heartbeatsToSend:Cn,unsentEntries:Ln}}(jt._heartbeatsCache.heartbeats),$n=(0,fe.L)(JSON.stringify({version:2,heartbeats:Ln}));return jt._heartbeatsCache.lastSentHeartbeatDate=Cn,In.length>0?(jt._heartbeatsCache.heartbeats=In,yield jt._storage.overwrite(jt._heartbeatsCache)):(jt._heartbeatsCache.heartbeats=[],jt._storage.overwrite(jt._heartbeatsCache)),$n})()}}function Dr(){return(new Date).toISOString().substring(0,10)}class nr{constructor(jt){this.app=jt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var jt=this;return(0,_.Z)(function*(){return(yield jt._canUseIndexedDBPromise)&&(yield function Jt(an){return An.apply(this,arguments)}(jt.app))||{heartbeats:[]}})()}overwrite(jt){var Cn=this;return(0,_.Z)(function*(){var Ln;if(yield Cn._canUseIndexedDBPromise){const $n=yield Cn.read();return Kt(Cn.app,{lastSentHeartbeatDate:null!==(Ln=jt.lastSentHeartbeatDate)&&void 0!==Ln?Ln:$n.lastSentHeartbeatDate,heartbeats:jt.heartbeats})}})()}add(jt){var Cn=this;return(0,_.Z)(function*(){var Ln;if(yield Cn._canUseIndexedDBPromise){const $n=yield Cn.read();return Kt(Cn.app,{lastSentHeartbeatDate:null!==(Ln=jt.lastSentHeartbeatDate)&&void 0!==Ln?Ln:$n.lastSentHeartbeatDate,heartbeats:[...$n.heartbeats,...jt.heartbeats]})}})()}}function Wn(an){return(0,fe.L)(JSON.stringify({version:2,heartbeats:an})).length}!function fi(an){vn(new m.wA("platform-logger",jt=>new Me(jt),"PRIVATE")),vn(new m.wA("heartbeat",jt=>new wi(jt),"PRIVATE")),gr(Le,"0.9.7",an),gr(Le,"0.9.7","esm2017"),gr("fire-js","")}("")},4859:(cn,mt,j)=>{"use strict";j.d(mt,{H0:()=>Le,wA:()=>J,zt:()=>Fe});var _=j(5861),m=j(2090);class J{constructor(we,me,ve){this.name=we,this.instanceFactory=me,this.type=ve,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(we){return this.instantiationMode=we,this}setMultipleInstances(we){return this.multipleInstances=we,this}setServiceProps(we){return this.serviceProps=we,this}setInstanceCreatedCallback(we){return this.onInstanceCreated=we,this}}const fe="[DEFAULT]";class Fe{constructor(we,me){this.name=we,this.container=me,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(we){const me=this.normalizeInstanceIdentifier(we);if(!this.instancesDeferred.has(me)){const ve=new m.BH;if(this.instancesDeferred.set(me,ve),this.isInitialized(me)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:me});Ue&&ve.resolve(Ue)}catch{}}return this.instancesDeferred.get(me).promise}getImmediate(we){var me;const ve=this.normalizeInstanceIdentifier(null==we?void 0:we.identifier),Ue=null!==(me=null==we?void 0:we.optional)&&void 0!==me&&me;if(!this.isInitialized(ve)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ve})}catch(je){if(Ue)return null;throw je}}getComponent(){return this.component}setComponent(we){if(we.name!==this.name)throw Error(`Mismatching Component ${we.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=we,this.shouldAutoInitialize()){if(function Ie(Be){return"EAGER"===Be.instantiationMode}(we))try{this.getOrInitializeService({instanceIdentifier:fe})}catch{}for(const[me,ve]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(me);try{const je=this.getOrInitializeService({instanceIdentifier:Ue});ve.resolve(je)}catch{}}}}clearInstance(we=fe){this.instancesDeferred.delete(we),this.instancesOptions.delete(we),this.instances.delete(we)}delete(){var we=this;return(0,_.Z)(function*(){const me=Array.from(we.instances.values());yield Promise.all([...me.filter(ve=>"INTERNAL"in ve).map(ve=>ve.INTERNAL.delete()),...me.filter(ve=>"_delete"in ve).map(ve=>ve._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(we=fe){return this.instances.has(we)}getOptions(we=fe){return this.instancesOptions.get(we)||{}}initialize(we={}){const{options:me={}}=we,ve=this.normalizeInstanceIdentifier(we.instanceIdentifier);if(this.isInitialized(ve))throw Error(`${this.name}(${ve}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:ve,options:me});for(const[je,rt]of this.instancesDeferred.entries())ve===this.normalizeInstanceIdentifier(je)&&rt.resolve(Ue);return Ue}onInit(we,me){var ve;const Ue=this.normalizeInstanceIdentifier(me),je=null!==(ve=this.onInitCallbacks.get(Ue))&&void 0!==ve?ve:new Set;je.add(we),this.onInitCallbacks.set(Ue,je);const rt=this.instances.get(Ue);return rt&&we(rt,Ue),()=>{je.delete(we)}}invokeOnInitCallbacks(we,me){const ve=this.onInitCallbacks.get(me);if(ve)for(const Ue of ve)try{Ue(we,me)}catch{}}getOrInitializeService({instanceIdentifier:we,options:me={}}){let ve=this.instances.get(we);if(!ve&&this.component&&(ve=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=we,Be===fe?void 0:Be),options:me}),this.instances.set(we,ve),this.instancesOptions.set(we,me),this.invokeOnInitCallbacks(ve,we),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,we,ve)}catch{}var Be;return ve||null}normalizeInstanceIdentifier(we=fe){return this.component?this.component.multipleInstances?we:fe:we}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Le{constructor(we){this.name=we,this.providers=new Map}addComponent(we){const me=this.getProvider(we.name);if(me.isComponentSet())throw new Error(`Component ${we.name} has already been registered with ${this.name}`);me.setComponent(we)}addOrOverwriteComponent(we){this.getProvider(we.name).isComponentSet()&&this.providers.delete(we.name),this.addComponent(we)}getProvider(we){if(this.providers.has(we))return this.providers.get(we);const me=new Fe(we,this);return this.providers.set(we,me),me}getProviders(){return Array.from(this.providers.values())}}},1877:(cn,mt,j)=>{"use strict";j.d(mt,{Am:()=>Be,Ub:()=>Le,Yd:()=>Ie,in:()=>m});const _=[];var m=(()=>{return(we=m||(m={}))[we.DEBUG=0]="DEBUG",we[we.VERBOSE=1]="VERBOSE",we[we.INFO=2]="INFO",we[we.WARN=3]="WARN",we[we.ERROR=4]="ERROR",we[we.SILENT=5]="SILENT",m;var we})();const J={debug:m.DEBUG,verbose:m.VERBOSE,info:m.INFO,warn:m.WARN,error:m.ERROR,silent:m.SILENT},fe=m.INFO,Fe={[m.DEBUG]:"log",[m.VERBOSE]:"log",[m.INFO]:"info",[m.WARN]:"warn",[m.ERROR]:"error"},Me=(we,me,...ve)=>{if(me<we.logLevel)return;const Ue=(new Date).toISOString(),je=Fe[me];if(!je)throw new Error(`Attempted to log a message with an invalid logType (value: ${me})`);console[je](`[${Ue}]  ${we.name}:`,...ve)};class Ie{constructor(me){this.name=me,this._logLevel=fe,this._logHandler=Me,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(me){if(!(me in m))throw new TypeError(`Invalid value "${me}" assigned to \`logLevel\``);this._logLevel=me}setLogLevel(me){this._logLevel="string"==typeof me?J[me]:me}get logHandler(){return this._logHandler}set logHandler(me){if("function"!=typeof me)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=me}get userLogHandler(){return this._userLogHandler}set userLogHandler(me){this._userLogHandler=me}debug(...me){this._userLogHandler&&this._userLogHandler(this,m.DEBUG,...me),this._logHandler(this,m.DEBUG,...me)}log(...me){this._userLogHandler&&this._userLogHandler(this,m.VERBOSE,...me),this._logHandler(this,m.VERBOSE,...me)}info(...me){this._userLogHandler&&this._userLogHandler(this,m.INFO,...me),this._logHandler(this,m.INFO,...me)}warn(...me){this._userLogHandler&&this._userLogHandler(this,m.WARN,...me),this._logHandler(this,m.WARN,...me)}error(...me){this._userLogHandler&&this._userLogHandler(this,m.ERROR,...me),this._logHandler(this,m.ERROR,...me)}}function Le(we){_.forEach(me=>{me.setLogLevel(we)})}function Be(we,me){for(const ve of _){let Ue=null;me&&me.level&&(Ue=J[me.level]),ve.userLogHandler=null===we?null:(je,rt,...Dt)=>{const Ne=Dt.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch{return null}}).filter(Ce=>Ce).join(" ");rt>=(null!=Ue?Ue:je.logLevel)&&we({level:m[rt].toLowerCase(),message:Ne,args:Dt,type:je.name})}}}},4709:(cn,mt,j)=>{"use strict";j.d(mt,{dr:()=>wi,YG:()=>jt,PM:()=>Ln,FN:()=>In,Zi:()=>$n,tO:()=>Er,Dq:()=>$e,wI:()=>Nt,W2:()=>It,jY:()=>qt,Gu:()=>Bn,gu:()=>Rn,pK:()=>Xi,Ie:()=>gi,Q$:()=>Or,jP:()=>ws,Nd:()=>Ye,yq:()=>Ve,ZU:()=>yt,UN:()=>Vs,wd:()=>Qn,sr:()=>Ss,Pc:()=>so,r4:()=>Do,j9:()=>di});var _=j(5861),m=j(4650),J=j(433),fe=j(655),Fe=j(8421),Me=j(9751),Ie=j(5577),Le=j(1144),Be=j(576),we=j(3268);const me=["addListener","removeListener"],ve=["addEventListener","removeEventListener"],Ue=["on","off"];function je(C,q,T,W){if((0,Be.m)(T)&&(W=T,T=void 0),W)return je(C,q,T).pipe((0,we.Z)(W));const[ge,L]=function Ce(C){return(0,Be.m)(C.addEventListener)&&(0,Be.m)(C.removeEventListener)}(C)?ve.map(R=>O=>C[R](q,O,T)):function Dt(C){return(0,Be.m)(C.addListener)&&(0,Be.m)(C.removeListener)}(C)?me.map(rt(C,q)):function Ne(C){return(0,Be.m)(C.on)&&(0,Be.m)(C.off)}(C)?Ue.map(rt(C,q)):[];if(!ge&&(0,Le.z)(C))return(0,Ie.z)(R=>je(R,q,T))((0,Fe.Xf)(C));if(!ge)throw new TypeError("Invalid event target");return new Me.y(R=>{const O=(...te)=>R.next(1<te.length?te:te[0]);return ge(O),()=>L(O)})}function rt(C,q){return T=>W=>C[T](q,W)}var ue=j(7579),ut=j(1135),Je=j(2435),ne=(j(2200),j(500),j(9892),j(1898),j(6406)),Qe=j(9397),ye=j(3982),qe=j(9459),ct=(j(1557),j(6280)),ot=(j(3457),j(4349),j(9816)),Ae=j(9300),Oe=j(3900),it=j(1884),ht=j(6895);const Vt=ne.i,Ee=["*"],bt=["outlet"],nn=[[["","slot","top"]],"*"],fn=["[slot=top]","*"],Xt=C=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(C):"function"==typeof requestAnimationFrame?requestAnimationFrame(C):setTimeout(C);let Tn=(()=>{class C{constructor(T,W){this.injector=T,this.el=W,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(T){this.el.nativeElement.value=this.lastValue=T,Hn(this.el)}handleValueChange(T,W){T===this.el.nativeElement&&(W!==this.lastValue&&(this.lastValue=W,this.onChange(W)),Hn(this.el))}_handleBlurEvent(T){T===this.el.nativeElement&&(this.onTouched(),Hn(this.el))}registerOnChange(T){this.onChange=T}registerOnTouched(T){this.onTouched=T}setDisabledState(T){this.el.nativeElement.disabled=T}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let T;try{T=this.injector.get(J.a5)}catch{}if(!T)return;T.statusChanges&&(this.statusChanges=T.statusChanges.subscribe(()=>Hn(this.el)));const W=T.control;W&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(L=>{if(typeof W[L]<"u"){const R=W[L].bind(W);W[L]=(...O)=>{R(...O),Hn(this.el)}}})}}return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.zs3),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C,hostBindings:function(T,W){1&T&&m.NdJ("ionBlur",function(L){return W._handleBlurEvent(L.target)})}}),C})();const Hn=C=>{Xt(()=>{const q=C.nativeElement,T=null!=q.value&&q.value.toString().length>0,W=or(q);En(q,W);const ge=q.closest("ion-item");ge&&En(ge,T?[...W,"item-has-value"]:W)})},or=C=>{const q=C.classList,T=[];for(let W=0;W<q.length;W++){const ge=q.item(W);null!==ge&&gr(ge,"ng-")&&T.push(`ion-${ge.substring(3)}`)}return T},En=(C,q)=>{const T=C.classList;T.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),T.add(...q)},gr=(C,q)=>C.substring(0,q.length)===q;let di=(()=>{class C extends Tn{constructor(T,W){super(T,W)}_handleInputEvent(T){this.handleValueChange(T,T.value)}}return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.zs3),m.Y36(m.SBq))},C.\u0275dir=m.lG2({type:C,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(T,W){1&T&&m.NdJ("ionInput",function(L){return W._handleInputEvent(L.target)})},features:[m._Bn([{provide:J.JU,useExisting:C,multi:!0}]),m.qOj]}),C})();const _r=(C,q)=>{const T=C.prototype;q.forEach(W=>{Object.defineProperty(T,W,{get(){return this.el[W]},set(ge){this.z.runOutsideAngular(()=>this.el[W]=ge)}})})},On=(C,q)=>{const T=C.prototype;q.forEach(W=>{T[W]=function(){const ge=arguments;return this.z.runOutsideAngular(()=>this.el[W].apply(this.el,ge))}})},Jt=(C,q,T)=>{T.forEach(W=>C[W]=je(q,W))};function Kt(C){return function(T){const{defineCustomElementFn:W,inputs:ge,methods:L}=C;return void 0!==W&&W(),ge&&_r(T,ge),L&&On(T,L),T}}let wi=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-app"]],ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({})],C),C})(),jt=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,Jt(this,this.el,["ionFocus","ionBlur"])}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],C),C})(),Ln=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],C),C})(),In=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["mode"]})],C),C})(),$n=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode","translucent"]})],C),C})(),Er=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode"]})],C),C})(),$e=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode"]})],C),C})(),Nt=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],C),C})(),It=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,Jt(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],C),C})(),qt=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["fixed"]})],C),C})(),Bn=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["collapse","mode","translucent"]})],C),C})(),Rn=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],C),C})(),Xi=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement,Jt(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",counter:"counter",counterFormatter:"counterFormatter",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",errorText:"errorText",fill:"fill",helperText:"helperText",inputmode:"inputmode",label:"label",labelPlacement:"labelPlacement",legacy:"legacy",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",shape:"shape",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","counter","counterFormatter","debounce","disabled","enterkeyhint","errorText","fill","helperText","inputmode","label","labelPlacement","legacy","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","shape","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],C),C})(),gi=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],C),C})(),Or=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode","position"]})],C),C})(),Ye=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-row"]],ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({})],C),C})(),Ve=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode","selectedTab","translucent"]})],C),C})(),yt=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],C),C})(),Qn=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","size"]})],C),C})(),Ss=(()=>{let C=class{constructor(T,W,ge){this.z=ge,T.detach(),this.el=W.nativeElement}};return C.\u0275fac=function(T){return new(T||C)(m.Y36(m.sBO),m.Y36(m.SBq),m.Y36(m.R0b))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:Ee,decls:1,vars:0,template:function(T,W){1&T&&(m.F$t(),m.Hsn(0))},encapsulation:2,changeDetection:0}),C=(0,fe.gn)([Kt({inputs:["color","mode"]})],C),C})(),ei=(()=>{class C{get(T,W){const ge=As();return ge?ge.get(T,W):null}getBoolean(T,W){const ge=As();return!!ge&&ge.getBoolean(T,W)}getNumber(T,W){const ge=As();return ge?ge.getNumber(T,W):0}}return C.\u0275fac=function(T){return new(T||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const ai=new m.OlP("USERCONFIG"),As=()=>{if(typeof window<"u"){const C=window.Ionic;if(null!=C&&C.config)return C.config}return null};let Eo=(()=>{class C{constructor(T,W){this.doc=T,this.backButton=new ue.x,this.keyboardDidShow=new ue.x,this.keyboardDidHide=new ue.x,this.pause=new ue.x,this.resume=new ue.x,this.resize=new ue.x,W.run(()=>{var ge;let L;this.win=T.defaultView,this.backButton.subscribeWithPriority=function(R,O){return this.subscribe(te=>te.register(R,vt=>W.run(()=>O(vt))))},bi(this.pause,T,"pause"),bi(this.resume,T,"resume"),bi(this.backButton,T,"ionBackButton"),bi(this.resize,this.win,"resize"),bi(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),bi(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(R=>{L=R}),null!==(ge=this.win)&&void 0!==ge&&ge.cordova?T.addEventListener("deviceready",()=>{L("cordova")},{once:!0}):L("dom")})}is(T){return(0,ne.a)(this.win,T)}platforms(){return(0,ne.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(T){return Zs(this.win.location.href,T)}isLandscape(){return!this.isPortrait()}isPortrait(){var T,W;return null===(T=(W=this.win).matchMedia)||void 0===T?void 0:T.call(W,"(orientation: portrait)").matches}testUserAgent(T){const W=this.win.navigator;return!!(null!=W&&W.userAgent&&W.userAgent.indexOf(T)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return C.\u0275fac=function(T){return new(T||C)(m.LFG(ht.K0),m.LFG(m.R0b))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const Zs=(C,q)=>{q=q.replace(/[[\]\\]/g,"\\$&");const W=new RegExp("[\\?&]"+q+"=([^&#]*)").exec(C);return W?decodeURIComponent(W[1].replace(/\+/g," ")):null},bi=(C,q,T)=>{q&&q.addEventListener(T,W=>{C.next(null!=W?W.detail:void 0)})};let to=(()=>{class C{constructor(T,W,ge,L){this.location=W,this.serializer=ge,this.router=L,this.direction=ts,this.animated=$i,this.guessDirection="forward",this.lastNavId=-1,L&&L.events.subscribe(R=>{if(R instanceof Je.OD){const O=R.restoredState?R.restoredState.navigationId:R.id;this.guessDirection=O<this.lastNavId?"back":"forward",this.guessAnimation=R.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?R.id:O}}),T.backButton.subscribeWithPriority(0,R=>{this.pop(),R()})}navigateForward(T,W={}){return this.setDirection("forward",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateBack(T,W={}){return this.setDirection("back",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}navigateRoot(T,W={}){return this.setDirection("root",W.animated,W.animationDirection,W.animation),this.navigate(T,W)}back(T={animated:!0,animationDirection:"back"}){return this.setDirection("back",T.animated,T.animationDirection,T.animation),this.location.back()}pop(){var T=this;return(0,_.Z)(function*(){let W=T.topOutlet;for(;W&&!(yield W.pop());)W=W.parentOutlet})()}setDirection(T,W,ge,L){this.direction=T,this.animated=co(T,W,ge),this.animationBuilder=L}setTopOutlet(T){this.topOutlet=T}consumeTransition(){let W,T="root";const ge=this.animationBuilder;return"auto"===this.direction?(T=this.guessDirection,W=this.guessAnimation):(W=this.animated,T=this.direction),this.direction=ts,this.animated=$i,this.animationBuilder=void 0,{direction:T,animation:W,animationBuilder:ge}}navigate(T,W){if(Array.isArray(T))return this.router.navigate(T,W);{const ge=this.serializer.parse(T.toString());return void 0!==W.queryParams&&(ge.queryParams={...W.queryParams}),void 0!==W.fragment&&(ge.fragment=W.fragment),this.router.navigateByUrl(ge,W)}}}return C.\u0275fac=function(T){return new(T||C)(m.LFG(Eo),m.LFG(ht.Ye),m.LFG(Je.Hx),m.LFG(Je.F0,8))},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();const co=(C,q,T)=>{if(!1!==q){if(void 0!==T)return T;if("forward"===C||"back"===C)return C;if("root"===C&&!0===q)return"forward"}},ts="auto",$i=void 0;class ns{constructor(q={}){this.data=q}get(q){return this.data[q]}}let Us=(()=>{class C{constructor(){this.zone=(0,m.f3M)(m.R0b),this.applicationRef=(0,m.f3M)(m.z2F)}create(T,W,ge){return new Vo(T,W,this.applicationRef,this.zone,ge)}}return C.\u0275fac=function(T){return new(T||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})();class Vo{constructor(q,T,W,ge,L){this.environmentInjector=q,this.injector=T,this.applicationRef=W,this.zone=ge,this.elementReferenceKey=L,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(q,T,W,ge){return this.zone.run(()=>new Promise(L=>{const R={...W};void 0!==this.elementReferenceKey&&(R[this.elementReferenceKey]=q),L(Io(this.zone,this.environmentInjector,this.injector,this.applicationRef,this.elRefMap,this.elEventsMap,q,T,R,ge))}))}removeViewFromDom(q,T){return this.zone.run(()=>new Promise(W=>{const ge=this.elRefMap.get(T);if(ge){ge.destroy(),this.elRefMap.delete(T);const L=this.elEventsMap.get(T);L&&(L(),this.elEventsMap.delete(T))}W()}))}}const Io=(C,q,T,W,ge,L,R,O,te,vt)=>{const sn=m.zs3.create({providers:cs(te),parent:T}),br=(0,m.LMc)(O,{environmentInjector:q,elementInjector:sn}),oi=br.instance,Zr=br.location.nativeElement;if(te&&Object.assign(oi,te),vt)for(const rs of vt)Zr.classList.add(rs);const hs=xs(C,oi,Zr);return R.appendChild(Zr),W.attachView(br.hostView),ge.set(Zr,br),L.set(Zr,hs),Zr},Is=[qe.L,qe.a,qe.b,qe.c,qe.d],xs=(C,q,T)=>C.run(()=>{const W=Is.filter(ge=>"function"==typeof q[ge]).map(ge=>{const L=R=>q[ge](R.detail);return T.addEventListener(ge,L),()=>T.removeEventListener(ge,L)});return()=>W.forEach(ge=>ge())}),no=new m.OlP("NavParamsToken"),cs=C=>[{provide:no,useValue:C},{provide:ns,useFactory:sa,deps:[no]}],sa=C=>new ns(C),Oo=(C,q)=>((C=C.filter(T=>T.stackId!==q.stackId)).push(q),C),Xs=(C,q)=>{const T=C.createUrlTree(["."],{relativeTo:q});return C.serializeUrl(T)},oa=(C,q)=>{if(!C)return;const T=_i(q);for(let W=0;W<T.length;W++){if(W>=C.length)return T[W];if(T[W]!==C[W])return}},_i=C=>C.split("/").map(q=>q.trim()).filter(q=>""!==q),Wi=C=>{C&&(C.ref.destroy(),C.unlistenEvents())};class io{constructor(q,T,W,ge,L,R){this.containerEl=T,this.router=W,this.navCtrl=ge,this.zone=L,this.location=R,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==q?_i(q):void 0}createView(q,T){var W;const ge=Xs(this.router,T),L=null==q||null===(W=q.location)||void 0===W?void 0:W.nativeElement,R=xs(this.zone,q.instance,L);return{id:this.nextId++,stackId:oa(this.tabsPrefix,ge),unlistenEvents:R,element:L,ref:q,url:ge}}getExistingView(q){const T=Xs(this.router,q),W=this.views.find(ge=>ge.url===T);return W&&W.ref.changeDetectorRef.reattach(),W}setActive(q){var T,W,ge;const L=this.navCtrl.consumeTransition();let{direction:R,animation:O,animationBuilder:te}=L;const vt=this.activeView,sn=((C,q)=>!q||C.stackId!==q.stackId)(q,vt);sn&&(R="back",O=void 0);const br=this.views.slice();let oi;const Zr=this.router;Zr.getCurrentNavigation?oi=Zr.getCurrentNavigation():null!==(T=Zr.navigations)&&void 0!==T&&T.value&&(oi=Zr.navigations.value),null!==(W=oi)&&void 0!==W&&null!==(ge=W.extras)&&void 0!==ge&&ge.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const hs=this.views.includes(q),rs=this.insertView(q,R);hs||q.ref.changeDetectorRef.detectChanges();const Ui=q.animationBuilder;return void 0===te&&"back"===R&&!sn&&void 0!==Ui&&(te=Ui),vt&&(vt.animationBuilder=te),this.zone.runOutsideAngular(()=>this.wait(()=>(vt&&vt.ref.changeDetectorRef.detach(),q.ref.changeDetectorRef.reattach(),this.transition(q,vt,O,this.canGoBack(1),!1,te).then(()=>Ms(q,rs,br,this.location,this.zone)).then(()=>({enteringView:q,direction:R,animation:O,tabSwitch:sn})))))}canGoBack(q,T=this.getActiveStackId()){return this.getStack(T).length>q}pop(q,T=this.getActiveStackId()){return this.zone.run(()=>{const W=this.getStack(T);if(W.length<=q)return Promise.resolve(!1);const ge=W[W.length-q-1];let L=ge.url;const R=ge.savedData;if(R){var O,te;const sn=R.get("primary");null!=sn&&null!==(O=sn.route)&&void 0!==O&&null!==(te=O._routerState)&&void 0!==te&&te.snapshot.url&&(L=sn.route._routerState.snapshot.url)}const{animationBuilder:vt}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(L,{...ge.savedExtras,animation:vt}).then(()=>!0)})}startBackTransition(){const q=this.activeView;if(q){const T=this.getStack(q.stackId),W=T[T.length-2],ge=W.animationBuilder;return this.wait(()=>this.transition(W,q,"back",this.canGoBack(2),!0,ge))}return Promise.resolve()}endBackTransition(q){q?(this.skipTransition=!0,this.pop(1)):this.activeView&&ho(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(q){const T=this.getStack(q);return T.length>0?T[T.length-1]:void 0}getRootUrl(q){const T=this.getStack(q);return T.length>0?T[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Wi),this.activeView=void 0,this.views=[]}getStack(q){return this.views.filter(T=>T.stackId===q)}insertView(q,T){return this.activeView=q,this.views=((C,q,T)=>"root"===T?Oo(C,q):"forward"===T?((C,q)=>(C.indexOf(q)>=0?C=C.filter(W=>W.stackId!==q.stackId||W.id<=q.id):C.push(q),C))(C,q):((C,q)=>C.indexOf(q)>=0?C.filter(W=>W.stackId!==q.stackId||W.id<=q.id):Oo(C,q))(C,q))(this.views,q,T),this.views.slice()}transition(q,T,W,ge,L,R){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(T===q)return Promise.resolve(!1);const O=q?q.element:void 0,te=T?T.element:void 0,vt=this.containerEl;return O&&O!==te&&(O.classList.add("ion-page"),O.classList.add("ion-page-invisible"),O.parentElement!==vt&&vt.appendChild(O),vt.commit)?vt.commit(O,te,{duration:void 0===W?0:void 0,direction:W,showGoBack:ge,progressAnimation:L,animationBuilder:R}):Promise.resolve(!1)}wait(q){var T=this;return(0,_.Z)(function*(){void 0!==T.runningTask&&(yield T.runningTask,T.runningTask=void 0);const W=T.runningTask=q();return W.finally(()=>T.runningTask=void 0),W})()}}const Ms=(C,q,T,W,ge)=>"function"==typeof requestAnimationFrame?new Promise(L=>{requestAnimationFrame(()=>{ho(C,q,T,W,ge),L()})}):Promise.resolve(),ho=(C,q,T,W,ge)=>{ge.run(()=>T.filter(L=>!q.includes(L)).forEach(Wi)),q.forEach(L=>{const O=W.path().split("?")[0].split("#")[0];if(L!==C&&L.url!==O){const te=L.element;te.setAttribute("aria-hidden","true"),te.classList.add("ion-page-hidden"),L.ref.changeDetectorRef.detach()}})};let ws=(()=>{class C{constructor(T,W,ge,L,R,O,te,vt){this.parentOutlet=vt,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new ut.X(null),this.stackEvents=new m.vpe,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.parentContexts=(0,m.f3M)(Je.y6),this.location=(0,m.f3M)(m.s_b),this.environmentInjector=(0,m.f3M)(m.lqb),this.config=(0,m.f3M)(ei),this.navCtrl=(0,m.f3M)(to),this.nativeEl=L.nativeElement,this.name=T||Je.eC,this.tabsPrefix="true"===W?Xs(R,te):void 0,this.stackCtrl=new io(this.tabsPrefix,this.nativeEl,R,this.navCtrl,O,ge),this.parentContexts.onChildOutletCreated(this.name,this)}set animation(T){this.nativeEl.animation=T}set animated(T){this.nativeEl.animated=T}set swipeGesture(T){this._swipeGesture=T,this.nativeEl.swipeHandler=T?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:W=>this.stackCtrl.endBackTransition(W)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(!this.activated){const T=this.getContext();null!=T&&T.route&&this.activateWith(T.route,T.injector)}new Promise(T=>(0,Qe.c)(this.nativeEl,T)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(T,W){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const W=this.getContext();this.activatedView.savedData=new Map(W.children.contexts);const ge=this.activatedView.savedData.get("primary");if(ge&&W.route&&(ge.route={...W.route}),this.activatedView.savedExtras={},W.route){const L=W.route.snapshot;this.activatedView.savedExtras.queryParams=L.queryParams,this.activatedView.savedExtras.fragment=L.fragment}}const T=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(T)}}activateWith(T,W){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=T;let ge,L=this.stackCtrl.getExistingView(T);if(L){ge=this.activated=L.ref;const O=L.savedData;O&&(this.getContext().children.contexts=O),this.updateActivatedRouteProxy(ge.instance,T)}else{var R;const O=T._futureSnapshot,te=this.parentContexts.getOrCreateContext(this.name).children,vt=new ut.X(null),sn=this.createActivatedRouteProxy(vt,T),br=new Rs(sn,te,this.location.injector),oi=null!==(R=O.routeConfig.component)&&void 0!==R?R:O.component;ge=this.activated=this.location.createComponent(oi,{index:this.location.length,injector:br,environmentInjector:null!=W?W:this.environmentInjector}),vt.next(ge.instance),L=this.stackCtrl.createView(this.activated,T),this.proxyMap.set(ge.instance,sn),this.currentActivatedRoute$.next({component:ge.instance,activatedRoute:T})}this.activatedView=L,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(L).then(O=>{this.activateEvents.emit(ge.instance),this.stackEvents.emit(O)})}canGoBack(T=1,W){return this.stackCtrl.canGoBack(T,W)}pop(T=1,W){return this.stackCtrl.pop(T,W)}getLastUrl(T){const W=this.stackCtrl.getLastUrl(T);return W?W.url:void 0}getLastRouteView(T){return this.stackCtrl.getLastUrl(T)}getRootView(T){return this.stackCtrl.getRootUrl(T)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(T,W){const ge=new Je.gz;return ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,ge._paramMap=this.proxyObservable(T,"paramMap"),ge._queryParamMap=this.proxyObservable(T,"queryParamMap"),ge.url=this.proxyObservable(T,"url"),ge.params=this.proxyObservable(T,"params"),ge.queryParams=this.proxyObservable(T,"queryParams"),ge.fragment=this.proxyObservable(T,"fragment"),ge.data=this.proxyObservable(T,"data"),ge}proxyObservable(T,W){return T.pipe((0,Ae.h)(ge=>!!ge),(0,Oe.w)(ge=>this.currentActivatedRoute$.pipe((0,Ae.h)(L=>null!==L&&L.component===ge),(0,Oe.w)(L=>L&&L.activatedRoute[W]),(0,it.x)())))}updateActivatedRouteProxy(T,W){const ge=this.proxyMap.get(T);if(!ge)throw new Error("Could not find activated route proxy for view");ge._futureSnapshot=W._futureSnapshot,ge._routerState=W._routerState,ge.snapshot=W.snapshot,ge.outlet=W.outlet,ge.component=W.component,this.currentActivatedRoute$.next({component:T,activatedRoute:W})}}return C.\u0275fac=function(T){return new(T||C)(m.$8M("name"),m.$8M("tabs"),m.Y36(ht.Ye),m.Y36(m.SBq),m.Y36(Je.F0),m.Y36(m.R0b),m.Y36(Je.gz),m.Y36(C,12))},C.\u0275dir=m.lG2({type:C,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),C})();class Rs{constructor(q,T,W){this.route=q,this.childContexts=T,this.parent=W}get(q,T){return q===Je.gz?this.route:q===Je.y6?this.childContexts:this.parent.get(q,T)}}let Vs=(()=>{class C{constructor(T){this.navCtrl=T,this.ionTabsWillChange=new m.vpe,this.ionTabsDidChange=new m.vpe}onPageSelected(T){const W=T.enteringView.stackId;T.tabSwitch&&void 0!==W&&(this.ionTabsWillChange.emit({tab:W}),this.tabBar&&(this.tabBar.selectedTab=W),this.ionTabsDidChange.emit({tab:W}))}select(T){const W="string"==typeof T,ge=W?T:T.detail.tab,L=this.outlet.getActiveStackId()===ge,R=`${this.outlet.tabsPrefix}/${ge}`;if(W||T.stopPropagation(),L){const O=this.outlet.getActiveStackId(),te=this.outlet.getLastRouteView(O);if((null==te?void 0:te.url)===R)return;const vt=this.outlet.getRootView(ge);return this.navCtrl.navigateRoot(R,{...vt&&R===vt.url&&vt.savedExtras,animated:!0,animationDirection:"back"})}{const O=this.outlet.getLastRouteView(ge);return this.navCtrl.navigateRoot((null==O?void 0:O.url)||R,{...null==O?void 0:O.savedExtras,animated:!0,animationDirection:"back"})}}getSelected(){return this.outlet.getActiveStackId()}}return C.\u0275fac=function(T){return new(T||C)(m.Y36(to))},C.\u0275cmp=m.Xpm({type:C,selectors:[["ion-tabs"]],contentQueries:function(T,W,ge){if(1&T&&m.Suo(ge,Ve,5),2&T){let L;m.iGM(L=m.CRH())&&(W.tabBar=L.first)}},viewQuery:function(T,W){if(1&T&&m.Gf(bt,5,ws),2&T){let ge;m.iGM(ge=m.CRH())&&(W.outlet=ge.first)}},hostBindings:function(T,W){1&T&&m.NdJ("ionTabButtonClick",function(L){return W.select(L)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:fn,decls:5,vars:0,consts:[[1,"tabs-inner"],["tabs","true",3,"stackEvents"],["outlet",""]],template:function(T,W){1&T&&(m.F$t(nn),m.Hsn(0),m.TgZ(1,"div",0)(2,"ion-router-outlet",1,2),m.NdJ("stackEvents",function(L){return W.onPageSelected(L)}),m.qZA()(),m.Hsn(4,1))},dependencies:[ws],styles:["[_nghost-%COMP%]{display:flex;position:absolute;inset:0;flex-direction:column;width:100%;height:100%;contain:layout size style;z-index:$z-index-page-container}.tabs-inner[_ngcontent-%COMP%]{position:relative;flex:1;contain:layout size style}"]}),C})();class No{constructor(q){this.ctrl=q}create(q){return this.ctrl.create(q||{})}dismiss(q,T,W){return this.ctrl.dismiss(q,T,W)}getTop(){return this.ctrl.getTop()}}let Cs=(()=>{class C extends No{constructor(){super(ct.m),this.angularDelegate=(0,m.f3M)(Us),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")})}}return C.\u0275fac=function(T){return new(T||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})(),Ps=(()=>{class C extends No{constructor(){super(ct.c),this.angularDelegate=(0,m.f3M)(Us),this.injector=(0,m.f3M)(m.zs3),this.environmentInjector=(0,m.f3M)(m.lqb)}create(T){return super.create({...T,delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")})}}return C.\u0275fac=function(T){return new(T||C)},C.\u0275prov=m.Yz7({token:C,factory:C.\u0275fac}),C})();class Do{shouldDetach(q){return!1}shouldAttach(q){return!1}store(q,T){}retrieve(q){return null}shouldReuseRoute(q,T){if(q.routeConfig!==T.routeConfig)return!1;const W=q.params,ge=T.params,L=Object.keys(W),R=Object.keys(ge);if(L.length!==R.length)return!1;for(const O of L)if(ge[O]!==W[O])return!1;return!0}}const aa=(C,q,T)=>()=>{if(q.defaultView&&typeof window<"u"){(0,ye.s)({...C,_zoneGate:L=>T.run(L)});const ge="__zone_symbol__addEventListener"in q.body?"__zone_symbol__addEventListener":"addEventListener";return function Zt(){var C=[];if(typeof window<"u"){var q=window;(!q.customElements||q.Element&&(!q.Element.prototype.closest||!q.Element.prototype.matches||!q.Element.prototype.remove||!q.Element.prototype.getRootNode))&&C.push(j.e(6748).then(j.t.bind(j,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||q.NodeList&&!q.NodeList.prototype.forEach||!q.fetch||!function(){try{var W=new URL("b","http://a");return W.pathname="c%20d","http://a/c%20d"===W.href&&W.searchParams}catch{return!1}}()||typeof WeakMap>"u")&&C.push(j.e(2214).then(j.t.bind(j,4144,23)))}return Promise.all(C)}().then(()=>((C,q)=>typeof window>"u"?Promise.resolve():(0,ot.p)().then(()=>(Vt(),(0,ot.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"layout":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32],"setFocus":[64]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-input",[[34,"ion-input",{"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"counter":[4],"counterFormatter":[16],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"errorText":[1,"error-text"],"fill":[1],"inputmode":[1],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"shape":[1],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-textarea",[[34,"ion-textarea",{"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"fill":[1],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"counter":[4],"counterFormatter":[16],"errorText":[1,"error-text"],"helperText":[1,"helper-text"],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"shape":[1],"hasFocus":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[513],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"labelPlacement":[1,"label-placement"],"legacy":[4],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionInput","handleIonInput"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]],["ion-select_3",[[33,"ion-select",{"cancelText":[1,"cancel-text"],"color":[513],"compareWith":[1,"compare-with"],"disabled":[4],"fill":[1],"interface":[1],"interfaceOptions":[8,"interface-options"],"justify":[1],"label":[1],"labelPlacement":[1,"label-placement"],"legacy":[4],"multiple":[4],"name":[1],"okText":[1,"ok-text"],"placeholder":[1],"selectedText":[1,"selected-text"],"shape":[1],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]}]]],["ion-picker-internal",[[33,"ion-picker-internal",{"exitInputMode":[64]},[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"highlightedDates":[16],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"legacy":[4],"justify":[1],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"hasController":[4,"has-controller"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[9,"resize","onResize"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8],"labelPlacement":[1,"label-placement"],"justify":[1],"legacy":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]]]'),q))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Xt,jmp:L=>T.runOutsideAngular(L),ael(L,R,O,te){L[ge](R,O,te)},rel(L,R,O,te){L.removeEventListener(R,O,te)}}))}};let so=(()=>{class C{static forRoot(T){return{ngModule:C,providers:[{provide:ai,useValue:T},{provide:m.ip1,useFactory:aa,multi:!0,deps:[ai,ht.K0,m.R0b]}]}}}return C.\u0275fac=function(T){return new(T||C)},C.\u0275mod=m.oAB({type:C}),C.\u0275inj=m.cJS({providers:[Us,Cs,Ps],imports:[ht.ez]}),C})()},259:(cn,mt,j)=>{"use strict";j.d(mt,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=j(9681);(0,_.registerVersion)("firebase","9.19.1","app")},9260:(cn,mt,j)=>{"use strict";j.d(mt,{Z:()=>_.Z});var _=j(3942);_.Z.registerVersion("firebase","9.19.1","app-compat")},9800:(cn,mt,j)=>{"use strict";j.r(mt);var _=j(5861),m=j(3942),J=j(2090),fe=j(9681),Fe=j(1877),Me=j(655),Ie=j(4859);const Be={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve_EMAIL_SIGNIN="EMAIL_SIGNIN",ve_PASSWORD_RESET="PASSWORD_RESET",ve_RECOVER_EMAIL="RECOVER_EMAIL",ve_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ve_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ve_VERIFY_EMAIL="VERIFY_EMAIL";const rt=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dt=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ne=new J.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ue=new Fe.Yd("@firebase/auth");function ut(b,...p){ue.logLevel<=Fe.in.ERROR&&ue.error(`Auth (${fe.SDK_VERSION}): ${b}`,...p)}function Je(b,...p){throw Re(b,...p)}function et(b,...p){return Re(b,...p)}function Xe(b,p,y){const x=Object.assign(Object.assign({},Dt()),{[p]:y});return new J.LL("auth","Firebase",x).create(p,{appName:b.name})}function X(b,p,y){if(!(p instanceof y))throw y.name!==p.constructor.name&&Je(b,"argument-error"),Xe(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(b,...p){if("string"!=typeof b){const y=p[0],x=[...p.slice(1)];return x[0]&&(x[0].appName=b.name),b._errorFactory.create(y,...x)}return Ne.create(b,...p)}function ne(b,p,...y){if(!b)throw Re(p,...y)}function Qe(b){const p="INTERNAL ASSERTION FAILED: "+b;throw ut(p),new Error(p)}function ye(b,p){b||Qe(p)}const qe=new Map;function nt(b){ye(b instanceof Function,"Expected a class definition");let p=qe.get(b);return p?(ye(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,qe.set(b,p),p)}function _t(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function ot(){return"http:"===xe()||"https:"===xe()}function xe(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class it{constructor(p,y){this.shortDelay=p,this.longDelay=y,ye(y>p,"Short delay should be less than long delay!"),this.isMobile=(0,J.uI)()||(0,J.b$)()}get(){return function Ae(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,J.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ht(b,p){ye(b.emulator,"Emulator should always be set here");const{url:y}=b.emulator;return p?`${y}${p.startsWith("/")?p.slice(1):p}`:y}class Zt{static initialize(p,y,x){this.fetchImpl=p,y&&(this.headersImpl=y),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},vn=new it(3e4,6e4);function gt(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function Ee(b,p,y,x){return bt.apply(this,arguments)}function bt(){return(bt=(0,_.Z)(function*(b,p,y,x,Y={}){return nn(b,Y,(0,_.Z)(function*(){let de={},pt={};x&&("GET"===p?pt=x:de={body:JSON.stringify(x)});const Ut=(0,J.xO)(Object.assign({key:b.config.apiKey},pt)).slice(1),bn=yield b._getAdditionalHeaders();return bn["Content-Type"]="application/json",b.languageCode&&(bn["X-Firebase-Locale"]=b.languageCode),Zt.fetch()(Xt(b,b.config.apiHost,y,Ut),Object.assign({method:p,headers:bn,referrerPolicy:"no-referrer"},de))}))})).apply(this,arguments)}function nn(b,p,y){return fn.apply(this,arguments)}function fn(){return(fn=(0,_.Z)(function*(b,p,y){b._canInitEmulator=!1;const x=Object.assign(Object.assign({},Vt),p);try{const Y=new Tn(b),de=yield Promise.race([y(),Y.promise]);Y.clearNetworkTimeout();const pt=yield de.json();if("needConfirmation"in pt)throw Hn(b,"account-exists-with-different-credential",pt);if(de.ok&&!("errorMessage"in pt))return pt;{const Ut=de.ok?pt.errorMessage:pt.error.message,[bn,Gn]=Ut.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===bn)throw Hn(b,"credential-already-in-use",pt);if("EMAIL_EXISTS"===bn)throw Hn(b,"email-already-in-use",pt);if("USER_DISABLED"===bn)throw Hn(b,"user-disabled",pt);const rr=x[bn]||bn.toLowerCase().replace(/[_\s]+/g,"-");if(Gn)throw Xe(b,rr,Gn);Je(b,rr)}}catch(Y){if(Y instanceof J.ZR)throw Y;Je(b,"network-request-failed",{message:String(Y)})}})).apply(this,arguments)}function Mn(b,p,y,x){return _n.apply(this,arguments)}function _n(){return(_n=(0,_.Z)(function*(b,p,y,x,Y={}){const de=yield Ee(b,p,y,x,Y);return"mfaPendingCredential"in de&&Je(b,"multi-factor-auth-required",{_serverResponse:de}),de})).apply(this,arguments)}function Xt(b,p,y,x){const Y=`${p}${y}?${x}`;return b.config.emulator?ht(b.config,Y):`${b.config.apiScheme}://${Y}`}class Tn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((y,x)=>{this.timer=setTimeout(()=>x(et(this.auth,"network-request-failed")),vn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hn(b,p,y){const x={appName:b.name};y.email&&(x.email=y.email),y.phoneNumber&&(x.phoneNumber=y.phoneNumber);const Y=et(b,p,x);return Y.customData._tokenResponse=y,Y}function En(){return(En=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function tn(){return(tn=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Rr(){return(Rr=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Vr(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function On(){return(On=(0,_.Z)(function*(b,p=!1){const y=(0,J.m9)(b),x=yield y.getIdToken(p),Y=An(x);ne(Y&&Y.exp&&Y.auth_time&&Y.iat,y.auth,"internal-error");const de="object"==typeof Y.firebase?Y.firebase:void 0,pt=null==de?void 0:de.sign_in_provider;return{claims:Y,token:x,authTime:Vr(Jt(Y.auth_time)),issuedAtTime:Vr(Jt(Y.iat)),expirationTime:Vr(Jt(Y.exp)),signInProvider:pt||null,signInSecondFactor:(null==de?void 0:de.sign_in_second_factor)||null}})).apply(this,arguments)}function Jt(b){return 1e3*Number(b)}function An(b){const[p,y,x]=b.split(".");if(void 0===p||void 0===y||void 0===x)return ut("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,J.tV)(y);return Y?JSON.parse(Y):(ut("Failed to decode base64 JWT payload"),null)}catch(Y){return ut("Caught error parsing JWT payload as JSON",null==Y?void 0:Y.toString()),null}}function yr(b,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(b,p,y=!1){if(y)return p;try{return yield p}catch(x){throw x instanceof J.ZR&&function Kr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}(x)&&b.auth.currentUser===b&&(yield b.auth.signOut()),x}})).apply(this,arguments)}class hi{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var y;if(p){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const Y=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(p=!1){var y=this;if(!this.isRunning)return;const x=this.getInterval(p);this.timerId=setTimeout((0,_.Z)(function*(){yield y.iteration()}),x)}iteration(){var p=this;return(0,_.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===(null==y?void 0:y.code)&&p.schedule(!0))}p.schedule()})()}}class wi{constructor(p,y){this.createdAt=p,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vr(this.lastLoginAt),this.creationTime=Vr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Dr(b){return si.apply(this,arguments)}function si(){return si=(0,_.Z)(function*(b){var p;const y=b.auth,x=yield b.getIdToken(),Y=yield yr(b,function Yr(b,p){return Rr.apply(this,arguments)}(y,{idToken:x}));ne(null==Y?void 0:Y.users.length,y,"internal-error");const de=Y.users[0];b._notifyReloadListener(de);const pt=null!==(p=de.providerUserInfo)&&void 0!==p&&p.length?function an(b){return b.map(p=>{var{providerId:y}=p,x=(0,Me._T)(p,["providerId"]);return{providerId:y,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(de.providerUserInfo):[],Ut=function fi(b,p){return[...b.filter(x=>!p.some(Y=>Y.providerId===x.providerId)),...p]}(b.providerData,pt),rr=!!b.isAnonymous&&!(b.email&&de.passwordHash||null!=Ut&&Ut.length),er={uid:de.localId,displayName:de.displayName||null,photoURL:de.photoUrl||null,email:de.email||null,emailVerified:de.emailVerified||!1,phoneNumber:de.phoneNumber||null,tenantId:de.tenantId||null,providerData:Ut,metadata:new wi(de.createdAt,de.lastLoginAt),isAnonymous:rr};Object.assign(b,er)}),si.apply(this,arguments)}function Wn(){return(Wn=(0,_.Z)(function*(b){const p=(0,J.m9)(b);yield Dr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Cn(){return(Cn=(0,_.Z)(function*(b,p){const y=yield nn(b,{},(0,_.Z)(function*(){const x=(0,J.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:Y,apiKey:de}=b.config,pt=Xt(b,Y,"/v1/token",`key=${de}`),Ut=yield b._getAdditionalHeaders();return Ut["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(pt,{method:"POST",headers:Ut,body:x})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ne(p.idToken,"internal-error"),ne(typeof p.idToken<"u","internal-error"),ne(typeof p.refreshToken<"u","internal-error");const y="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Kt(b){const p=An(b);return ne(p,"internal-error"),ne(typeof p.exp<"u","internal-error"),ne(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,y)}getToken(p,y=!1){var x=this;return(0,_.Z)(function*(){return ne(!x.accessToken||x.refreshToken,p,"user-token-expired"),y||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(p,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,y){var x=this;return(0,_.Z)(function*(){const{accessToken:Y,refreshToken:de,expiresIn:pt}=yield function jt(b,p){return Cn.apply(this,arguments)}(p,y);x.updateTokensAndExpiration(Y,de,Number(pt))})()}updateTokensAndExpiration(p,y,x){this.refreshToken=y||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(p,y){const{refreshToken:x,accessToken:Y,expirationTime:de}=y,pt=new Ln;return x&&(ne("string"==typeof x,"internal-error",{appName:p}),pt.refreshToken=x),Y&&(ne("string"==typeof Y,"internal-error",{appName:p}),pt.accessToken=Y),de&&(ne("number"==typeof de,"internal-error",{appName:p}),pt.expirationTime=de),pt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ln,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function In(b,p){ne("string"==typeof b||typeof b>"u","internal-error",{appName:p})}class $n{constructor(p){var{uid:y,auth:x,stsTokenManager:Y}=p,de=(0,Me._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=x,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=de.displayName||null,this.email=de.email||null,this.emailVerified=de.emailVerified||!1,this.phoneNumber=de.phoneNumber||null,this.photoURL=de.photoURL||null,this.isAnonymous=de.isAnonymous||!1,this.tenantId=de.tenantId||null,this.providerData=de.providerData?[...de.providerData]:[],this.metadata=new wi(de.createdAt||void 0,de.lastLoginAt||void 0)}getIdToken(p){var y=this;return(0,_.Z)(function*(){const x=yield yr(y,y.stsTokenManager.getToken(y.auth,p));return ne(x,y.auth,"internal-error"),y.accessToken!==x&&(y.accessToken=x,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),x})()}getIdTokenResult(p){return function _r(b){return On.apply(this,arguments)}(this,p)}reload(){return function nr(b){return Wn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ne(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(y=>Object.assign({},y)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const y=new $n(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(p){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,y=!1){var x=this;return(0,_.Z)(function*(){let Y=!1;p.idToken&&p.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(p),Y=!0),y&&(yield Dr(x)),yield x.auth._persistUserIfCurrent(x),Y&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var p=this;return(0,_.Z)(function*(){const y=yield p.getIdToken();return yield yr(p,function or(b,p){return En.apply(this,arguments)}(p.auth,{idToken:y})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,y){var x,Y,de,pt,Ut,bn,Gn,rr;const er=null!==(x=y.displayName)&&void 0!==x?x:void 0,qs=null!==(Y=y.email)&&void 0!==Y?Y:void 0,Ra=null!==(de=y.phoneNumber)&&void 0!==de?de:void 0,_c=null!==(pt=y.photoURL)&&void 0!==pt?pt:void 0,mp=null!==(Ut=y.tenantId)&&void 0!==Ut?Ut:void 0,Ud=null!==(bn=y._redirectEventId)&&void 0!==bn?bn:void 0,If=null!==(Gn=y.createdAt)&&void 0!==Gn?Gn:void 0,Vd=null!==(rr=y.lastLoginAt)&&void 0!==rr?rr:void 0,{uid:xl,emailVerified:Mh,isAnonymous:mu,providerData:ls,stsTokenManager:sd}=y;ne(xl&&sd,p,"internal-error");const Wl=Ln.fromJSON(this.name,sd);ne("string"==typeof xl,p,"internal-error"),In(er,p.name),In(qs,p.name),ne("boolean"==typeof Mh,p,"internal-error"),ne("boolean"==typeof mu,p,"internal-error"),In(Ra,p.name),In(_c,p.name),In(mp,p.name),In(Ud,p.name),In(If,p.name),In(Vd,p.name);const Ml=new $n({uid:xl,auth:p,email:qs,emailVerified:Mh,displayName:er,isAnonymous:mu,photoURL:_c,phoneNumber:Ra,tenantId:mp,stsTokenManager:Wl,createdAt:If,lastLoginAt:Vd});return ls&&Array.isArray(ls)&&(Ml.providerData=ls.map(Pa=>Object.assign({},Pa))),Ud&&(Ml._redirectEventId=Ud),Ml}static _fromIdTokenResponse(p,y,x=!1){return(0,_.Z)(function*(){const Y=new Ln;Y.updateFromServerResponse(y);const de=new $n({uid:y.localId,auth:p,stsTokenManager:Y,isAnonymous:x});return yield Dr(de),de})()}}const $e=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(y,x){var Y=this;return(0,_.Z)(function*(){Y.storage[y]=x})()}_get(y){var x=this;return(0,_.Z)(function*(){const Y=x.storage[y];return void 0===Y?null:Y})()}_remove(y){var x=this;return(0,_.Z)(function*(){delete x.storage[y]})()}_addListener(y,x){}_removeListener(y,x){}}return b.type="NONE",b})();function Pe(b,p,y){return`firebase:${b}:${p}:${y}`}class Ke{constructor(p,y,x){this.persistence=p,this.auth=y,this.userKey=x;const{config:Y,name:de}=this.auth;this.fullUserKey=Pe(this.userKey,Y.apiKey,de),this.fullPersistenceKey=Pe("persistence",Y.apiKey,de),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,_.Z)(function*(){const y=yield p.persistence._get(p.fullUserKey);return y?$n._fromJSON(p.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var y=this;return(0,_.Z)(function*(){if(y.persistence===p)return;const x=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=p,x?y.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,y,x="authUser"){return(0,_.Z)(function*(){if(!y.length)return new Ke(nt($e),p,x);const Y=(yield Promise.all(y.map(function(){var Gn=(0,_.Z)(function*(rr){if(yield rr._isAvailable())return rr});return function(rr){return Gn.apply(this,arguments)}}()))).filter(Gn=>Gn);let de=Y[0]||nt($e);const pt=Pe(x,p.config.apiKey,p.name);let Ut=null;for(const Gn of y)try{const rr=yield Gn._get(pt);if(rr){const er=$n._fromJSON(p,rr);Gn!==de&&(Ut=er),de=Gn;break}}catch{}const bn=Y.filter(Gn=>Gn._shouldAllowMigration);return de._shouldAllowMigration&&bn.length?(de=bn[0],Ut&&(yield de._set(pt,Ut.toJSON())),yield Promise.all(y.map(function(){var Gn=(0,_.Z)(function*(rr){if(rr!==de)try{yield rr._remove(pt)}catch{}});return function(rr){return Gn.apply(this,arguments)}}())),new Ke(de,p,x)):new Ke(de,p,x)})()}}function Nt(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(He(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(It(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Et(p))return"Blackberry";if(Lt(p))return"Webos";if(wn(p))return"Safari";if((p.includes("chrome/")||We(p))&&!p.includes("edge/"))return"Chrome";if(De(p))return"Android";{const x=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==x?void 0:x.length))return x[1]}return"Other"}function It(b=(0,J.z$)()){return/firefox\//i.test(b)}function wn(b=(0,J.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function We(b=(0,J.z$)()){return/crios\//i.test(b)}function He(b=(0,J.z$)()){return/iemobile/i.test(b)}function De(b=(0,J.z$)()){return/android/i.test(b)}function Et(b=(0,J.z$)()){return/blackberry/i.test(b)}function Lt(b=(0,J.z$)()){return/webos/i.test(b)}function qt(b=(0,J.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function Qr(b=(0,J.z$)()){return qt(b)||De(b)||Lt(b)||Et(b)||/windows phone/i.test(b)||He(b)}function Xi(b,p=[]){let y;switch(b){case"Browser":y=Nt((0,J.z$)());break;case"Worker":y=`${Nt((0,J.z$)())}-${b}`;break;default:y=b}const x=p.length?p.join(","):"FirebaseCore-web";return`${y}/JsCore/${fe.SDK_VERSION}/${x}`}class gi{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,y){const x=de=>new Promise((pt,Ut)=>{try{pt(p(de))}catch(bn){Ut(bn)}});x.onAbort=y,this.queue.push(x);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(p){var y=this;return(0,_.Z)(function*(){if(y.auth.currentUser===p)return;const x=[];try{for(const Y of y.queue)yield Y(p),Y.onAbort&&x.push(Y.onAbort)}catch(Y){x.reverse();for(const de of x)try{de()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null==Y?void 0:Y.message})}})()}}class ki{constructor(p,y,x){this.app=p,this.heartbeatServiceProvider=y,this.config=x,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new es(this),this.idTokenSubscription=new es(this),this.beforeStateQueue=new gi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ne,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=x.sdkClientVersion}_initializeWithPersistence(p,y){var x=this;return y&&(this._popupRedirectResolver=nt(y)),this._initializationPromise=this.queue((0,_.Z)(function*(){var Y,de;if(!x._deleted&&(x.persistenceManager=yield Ke.create(x,p),!x._deleted)){if(null!==(Y=x._popupRedirectResolver)&&void 0!==Y&&Y._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(y),x.lastNotifiedUid=(null===(de=x.currentUser)||void 0===de?void 0:de.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,_.Z)(function*(){if(p._deleted)return;const y=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||y){if(p.currentUser&&y&&p.currentUser.uid===y.uid)return p._currentUser._assign(y),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(y,!0)}})()}initializeCurrentUser(p){var y=this;return(0,_.Z)(function*(){var x;const Y=yield y.assertedPersistence.getCurrentUser();let de=Y,pt=!1;if(p&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Ut=null===(x=y.redirectUser)||void 0===x?void 0:x._redirectEventId,bn=null==de?void 0:de._redirectEventId,Gn=yield y.tryRedirectSignIn(p);(!Ut||Ut===bn)&&null!=Gn&&Gn.user&&(de=Gn.user,pt=!0)}if(!de)return y.directlySetCurrentUser(null);if(!de._redirectEventId){if(pt)try{yield y.beforeStateQueue.runMiddleware(de)}catch(Ut){de=Y,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Ut))}return de?y.reloadAndSetCurrentUserOrClear(de):y.directlySetCurrentUser(null)}return ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===de._redirectEventId?y.directlySetCurrentUser(de):y.reloadAndSetCurrentUserOrClear(de)})()}tryRedirectSignIn(p){var y=this;return(0,_.Z)(function*(){let x=null;try{x=yield y._popupRedirectResolver._completeRedirectFn(y,p,!0)}catch{yield y._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(p){var y=this;return(0,_.Z)(function*(){try{yield Dr(p)}catch(x){if("auth/network-request-failed"!==(null==x?void 0:x.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Oe(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,_.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var y=this;return(0,_.Z)(function*(){const x=p?(0,J.m9)(p):null;return x&&ne(x.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(x&&x._clone(y))})()}_updateCurrentUser(p,y=!1){var x=this;return(0,_.Z)(function*(){if(!x._deleted)return p&&ne(x.tenantId===p.tenantId,x,"tenant-id-mismatch"),y||(yield x.beforeStateQueue.runMiddleware(p)),x.queue((0,_.Z)(function*(){yield x.directlySetCurrentUser(p),x.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,_.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var y=this;return this.queue((0,_.Z)(function*(){yield y.assertedPersistence.setPersistence(nt(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new J.LL("auth","Firebase",p())}onAuthStateChanged(p,y,x){return this.registerStateListener(this.authStateSubscription,p,y,x)}beforeAuthStateChanged(p,y){return this.beforeStateQueue.pushCallback(p,y)}onIdTokenChanged(p,y,x){return this.registerStateListener(this.idTokenSubscription,p,y,x)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,y){var x=this;return(0,_.Z)(function*(){const Y=yield x.getOrInitRedirectPersistenceManager(y);return null===p?Y.removeCurrentUser():Y.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var y=this;return(0,_.Z)(function*(){if(!y.redirectPersistenceManager){const x=p&&nt(p)||y._popupRedirectResolver;ne(x,y,"argument-error"),y.redirectPersistenceManager=yield Ke.create(y,[nt(x._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(p){var y=this;return(0,_.Z)(function*(){var x,Y;return y._isInitialized&&(yield y.queue((0,_.Z)(function*(){}))),(null===(x=y._currentUser)||void 0===x?void 0:x._redirectEventId)===p?y._currentUser:(null===(Y=y.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===p?y.redirectUser:null})()}_persistUserIfCurrent(p){var y=this;return(0,_.Z)(function*(){if(p===y.currentUser)return y.queue((0,_.Z)(function*(){return y.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(y=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,y,x,Y){if(this._deleted)return()=>{};const de="function"==typeof y?y:y.next.bind(y),pt=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(pt,this,"internal-error"),pt.then(()=>de(this.currentUser)),"function"==typeof y?p.addObserver(y,x,Y):p.addObserver(y)}directlySetCurrentUser(p){var y=this;return(0,_.Z)(function*(){y.currentUser&&y.currentUser!==p&&y._currentUser._stopProactiveRefresh(),p&&y.isProactiveRefreshEnabled&&p._startProactiveRefresh(),y.currentUser=p,p?yield y.assertedPersistence.setCurrentUser(p):yield y.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,_.Z)(function*(){var y;const x={"X-Client-Version":p.clientVersion};p.app.options.appId&&(x["X-Firebase-gmpid"]=p.app.options.appId);const Y=yield null===(y=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return Y&&(x["X-Firebase-Client"]=Y),x})()}}function Tr(b){return(0,J.m9)(b)}class es{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,J.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ar(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function tr(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class xr{constructor(p,y){this.providerId=p,this.signInMethod=y}toJSON(){return Qe("not implemented")}_getIdTokenResponse(p){return Qe("not implemented")}_linkToIdToken(p,y){return Qe("not implemented")}_getReauthenticationResolver(p){return Qe("not implemented")}}function Br(b,p){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:resetPassword",gt(b,p))})).apply(this,arguments)}function us(b,p){return ti.apply(this,arguments)}function ti(){return(ti=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Jn(){return(Jn=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:update",gt(b,p))})).apply(this,arguments)}function Jr(){return(Jr=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithPassword",gt(b,p))})).apply(this,arguments)}function Ri(b,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:sendOobCode",gt(b,p))})).apply(this,arguments)}function se(){return(se=(0,_.Z)(function*(b,p){return Ri(b,p)})).apply(this,arguments)}function st(){return(st=(0,_.Z)(function*(b,p){return Ri(b,p)})).apply(this,arguments)}function Ge(){return(Ge=(0,_.Z)(function*(b,p){return Ri(b,p)})).apply(this,arguments)}function Ct(){return(Ct=(0,_.Z)(function*(b,p){return Ri(b,p)})).apply(this,arguments)}function xt(){return(xt=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithEmailLink",gt(b,p))})).apply(this,arguments)}function rn(){return(rn=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithEmailLink",gt(b,p))})).apply(this,arguments)}class Pn extends xr{constructor(p,y,x,Y=null){super("password",x),this._email=p,this._password=y,this._tenantId=Y}static _fromEmailAndPassword(p,y){return new Pn(p,y,"password")}static _fromEmailAndCode(p,y,x=null){return new Pn(p,y,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p;if(null!=y&&y.email&&null!=y&&y.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(p){var y=this;return(0,_.Z)(function*(){switch(y.signInMethod){case"password":return function Fr(b,p){return Jr.apply(this,arguments)}(p,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function kt(b,p){return xt.apply(this,arguments)}(p,{email:y._email,oobCode:y._password});default:Je(p,"internal-error")}})()}_linkToIdToken(p,y){var x=this;return(0,_.Z)(function*(){switch(x.signInMethod){case"password":return us(p,{idToken:y,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Gt(b,p){return rn.apply(this,arguments)}(p,{idToken:y,email:x._email,oobCode:x._password});default:Je(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function qn(b,p){return tt.apply(this,arguments)}function tt(){return(tt=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithIdp",gt(b,p))})).apply(this,arguments)}class yt extends xr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const y=new yt(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(y.idToken=p.idToken),p.accessToken&&(y.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(y.nonce=p.nonce),p.pendingToken&&(y.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(y.accessToken=p.oauthToken,y.secret=p.oauthTokenSecret):Je("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:Y}=y,de=(0,Me._T)(y,["providerId","signInMethod"]);if(!x||!Y)return null;const pt=new yt(x,Y);return pt.idToken=de.idToken||void 0,pt.accessToken=de.accessToken||void 0,pt.secret=de.secret,pt.nonce=de.nonce,pt.pendingToken=de.pendingToken||null,pt}_getIdTokenResponse(p){return qn(p,this.buildRequest())}_linkToIdToken(p,y){const x=this.buildRequest();return x.idToken=y,qn(p,x)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,qn(p,y)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),p.postBody=(0,J.xO)(y)}return p}}function Qt(){return(Qt=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:sendVerificationCode",gt(b,p))})).apply(this,arguments)}function Qn(){return(Qn=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",gt(b,p))})).apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(b,p){const y=yield Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",gt(b,p));if(y.temporaryProof)throw Hn(b,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Ss={USER_NOT_FOUND:"user-not-found"};function ai(){return(ai=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithPhoneNumber",gt(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Ss)})).apply(this,arguments)}class As extends xr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,y){return new As({verificationId:p,verificationCode:y})}static _fromTokenResponse(p,y){return new As({phoneNumber:p,temporaryProof:y})}_getIdTokenResponse(p){return function Nn(b,p){return Qn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,y){return function kr(b,p){return fr.apply(this,arguments)}(p,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ei(b,p){return ai.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:y,verificationId:x,verificationCode:Y}=this.params;return p&&y?{temporaryProof:p,phoneNumber:y}:{sessionInfo:x,code:Y}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:y,verificationCode:x,phoneNumber:Y,temporaryProof:de}=p;return x||y||Y||de?new As({verificationId:y,verificationCode:x,phoneNumber:Y,temporaryProof:de}):null}}class bi{constructor(p){var y,x,Y,de,pt,Ut;const bn=(0,J.zd)((0,J.pd)(p)),Gn=null!==(y=bn.apiKey)&&void 0!==y?y:null,rr=null!==(x=bn.oobCode)&&void 0!==x?x:null,er=function Eo(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=bn.mode)&&void 0!==Y?Y:null);ne(Gn&&rr&&er,"argument-error"),this.apiKey=Gn,this.operation=er,this.code=rr,this.continueUrl=null!==(de=bn.continueUrl)&&void 0!==de?de:null,this.languageCode=null!==(pt=bn.languageCode)&&void 0!==pt?pt:null,this.tenantId=null!==(Ut=bn.tenantId)&&void 0!==Ut?Ut:null}static parseLink(p){const y=function Zs(b){const p=(0,J.zd)((0,J.pd)(b)).link,y=p?(0,J.zd)((0,J.pd)(p)).deep_link_id:null,x=(0,J.zd)((0,J.pd)(b)).deep_link_id;return(x?(0,J.zd)((0,J.pd)(x)).link:null)||x||y||p||b}(p);try{return new bi(y)}catch{return null}}}let co=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(y,x){return Pn._fromEmailAndPassword(y,x)}static credentialWithLink(y,x){const Y=bi.parseLink(x);return ne(Y,"argument-error"),Pn._fromEmailAndCode(y,Y.code,Y.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class ts{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class $i extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ns extends $i{static credentialFromJSON(p){const y="string"==typeof p?JSON.parse(p):p;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),yt._fromParams(y)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ne(p.idToken||p.accessToken,"argument-error"),yt._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ns.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ns.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:y,oauthAccessToken:x,oauthTokenSecret:Y,pendingToken:de,nonce:pt,providerId:Ut}=p;if(!x&&!Y&&!y&&!de||!Ut)return null;try{return new ns(Ut)._credential({idToken:y,accessToken:x,nonce:pt,pendingToken:de})}catch{return null}}}let Us=(()=>{class b extends $i{constructor(){super("facebook.com")}static credential(y){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Vo=(()=>{class b extends $i{constructor(){super("google.com"),this.addScope("profile")}static credential(y,x){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:x})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:x,oauthAccessToken:Y}=y;if(!x&&!Y)return null;try{return b.credential(x,Y)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Io=(()=>{class b extends $i{constructor(){super("github.com")}static credential(y){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return b.credential(y.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class xs extends xr{constructor(p,y){super(p,p),this.pendingToken=y}_getIdTokenResponse(p){return qn(p,this.buildRequest())}_linkToIdToken(p,y){const x=this.buildRequest();return x.idToken=y,qn(p,x)}_getReauthenticationResolver(p){const y=this.buildRequest();return y.autoCreate=!1,qn(p,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const y="string"==typeof p?JSON.parse(p):p,{providerId:x,signInMethod:Y,pendingToken:de}=y;return x&&Y&&de&&x===Y?new xs(x,de):null}static _create(p,y){return new xs(p,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class cs extends ts{constructor(p){ne(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return cs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return cs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const y=xs.fromJSON(p);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:y,providerId:x}=p;if(!y||!x)return null;try{return xs._create(x,y)}catch{return null}}}let sa=(()=>{class b extends $i{constructor(){super("twitter.com")}static credential(y,x){return yt._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:x})}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:x,oauthTokenSecret:Y}=y;if(!x||!Y)return null;try{return b.credential(x,Y)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function wo(b,p){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signUp",gt(b,p))})).apply(this,arguments)}class Ci{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,y,x,Y=!1){return(0,_.Z)(function*(){const de=yield $n._fromIdTokenResponse(p,x,Y),pt=Qi(x);return new Ci({user:de,providerId:pt,_tokenResponse:x,operationType:y})})()}static _forOperation(p,y,x){return(0,_.Z)(function*(){yield p._updateTokensIfNecessary(x,!0);const Y=Qi(x);return new Ci({user:p,providerId:Y,_tokenResponse:x,operationType:y})})()}}function Qi(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ro(){return(ro=(0,_.Z)(function*(b){var p;const y=Tr(b);if(yield y._initializationPromise,null!==(p=y.currentUser)&&void 0!==p&&p.isAnonymous)return new Ci({user:y.currentUser,providerId:null,operationType:"signIn"});const x=yield wo(y,{returnSecureToken:!0}),Y=yield Ci._fromIdTokenResponse(y,"signIn",x,!0);return yield y._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class oa extends J.ZR{constructor(p,y,x,Y){var de;super(y.code,y.message),this.operationType=x,this.user=Y,Object.setPrototypeOf(this,oa.prototype),this.customData={appName:p.name,tenantId:null!==(de=p.tenantId)&&void 0!==de?de:void 0,_serverResponse:y.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(p,y,x,Y){return new oa(p,y,x,Y)}}function _i(b,p,y,x){return("reauthenticate"===p?y._getReauthenticationResolver(b):y._getIdTokenResponse(b)).catch(de=>{throw"auth/multi-factor-auth-required"===de.code?oa._fromErrorAndOperation(b,de,p,x):de})}function Wi(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Ms(){return Ms=(0,_.Z)(function*(b,p){const y=(0,J.m9)(b);yield Rs(!0,y,p);const{providerUserInfo:x}=yield function gr(b,p){return tn.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[p]}),Y=Wi(x||[]);return y.providerData=y.providerData.filter(de=>Y.has(de.providerId)),Y.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Ms.apply(this,arguments)}function ho(b,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,_.Z)(function*(b,p,y=!1){const x=yield yr(b,p._linkToIdToken(b.auth,yield b.getIdToken()),y);return Ci._forOperation(b,"link",x)})).apply(this,arguments)}function Rs(b,p,y){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,_.Z)(function*(b,p,y){yield Dr(p);const Y=!1===b?"provider-already-linked":"no-such-provider";ne(Wi(p.providerData).has(y)===b,p.auth,Y)})).apply(this,arguments)}function bo(b,p){return ko.apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(b,p,y=!1){const{auth:x}=b,Y="reauthenticate";try{const de=yield yr(b,_i(x,Y,p,b),y);ne(de.idToken,x,"internal-error");const pt=An(de.idToken);ne(pt,x,"internal-error");const{sub:Ut}=pt;return ne(b.uid===Ut,x,"user-mismatch"),Ci._forOperation(b,Y,de)}catch(de){throw"auth/user-not-found"===(null==de?void 0:de.code)&&Je(x,"user-mismatch"),de}})).apply(this,arguments)}function bs(b,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,_.Z)(function*(b,p,y=!1){const x="signIn",Y=yield _i(b,x,p),de=yield Ci._fromIdTokenResponse(b,x,Y);return y||(yield b._updateCurrentUser(de.user)),de})).apply(this,arguments)}function Pr(b,p){return Co.apply(this,arguments)}function Co(){return(Co=(0,_.Z)(function*(b,p){return bs(Tr(b),p)})).apply(this,arguments)}function No(b,p){return li.apply(this,arguments)}function li(){return(li=(0,_.Z)(function*(b,p){const y=(0,J.m9)(b);return yield Rs(!1,y,p.providerId),ho(y,p)})).apply(this,arguments)}function ba(b,p){return js.apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(b,p){return bo((0,J.m9)(b),p)})).apply(this,arguments)}function jo(){return(jo=(0,_.Z)(function*(b,p){return Mn(b,"POST","/v1/accounts:signInWithCustomToken",gt(b,p))})).apply(this,arguments)}function Ps(){return Ps=(0,_.Z)(function*(b,p){const y=Tr(b),x=yield function Ni(b,p){return jo.apply(this,arguments)}(y,{token:p,returnSecureToken:!0}),Y=yield Ci._fromIdTokenResponse(y,"signIn",x);return yield y._updateCurrentUser(Y.user),Y}),Ps.apply(this,arguments)}class Ei{constructor(p,y){this.factorId=p,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(p,y){return"phoneInfo"in y?ds._fromServerResponse(p,y):"totpInfo"in y?Fo._fromServerResponse(p,y):Je(p,"internal-error")}}class ds extends Ei{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,y){return new ds(y)}}class Fo extends Ei{constructor(p){super("totp",p)}static _fromServerResponse(p,y){return new Fo(y)}}function po(b,p,y){var x;ne((null===(x=y.url)||void 0===x?void 0:x.length)>0,b,"invalid-continue-uri"),ne(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=y.url,p.dynamicLinkDomain=y.dynamicLinkDomain,p.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=y.android.installApp,p.androidMinimumVersionCode=y.android.minimumVersion,p.androidPackageName=y.android.packageName)}function Do(){return Do=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b),Y={requestType:"PASSWORD_RESET",email:p};y&&po(x,Y,y),yield function _e(b,p){return st.apply(this,arguments)}(x,Y)}),Do.apply(this,arguments)}function sr(){return(sr=(0,_.Z)(function*(b,p,y){yield Br((0,J.m9)(b),{oobCode:p,newPassword:y})})).apply(this,arguments)}function so(){return so=(0,_.Z)(function*(b,p){yield function un(b,p){return Jn.apply(this,arguments)}((0,J.m9)(b),{oobCode:p})}),so.apply(this,arguments)}function C(b,p){return q.apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(b,p){const y=(0,J.m9)(b),x=yield Br(y,{oobCode:p}),Y=x.requestType;switch(ne(Y,y,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(x.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(x.mfaInfo,y,"internal-error");default:ne(x.email,y,"internal-error")}let de=null;return x.mfaInfo&&(de=Ei._fromServerResponse(Tr(y),x.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.newEmail:x.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===x.requestType?x.email:x.newEmail)||null,multiFactorInfo:de},operation:Y}})).apply(this,arguments)}function W(){return(W=(0,_.Z)(function*(b,p){const{data:y}=yield C((0,J.m9)(b),p);return y.email})).apply(this,arguments)}function L(){return(L=(0,_.Z)(function*(b,p,y){const x=Tr(b),Y=yield wo(x,{returnSecureToken:!0,email:p,password:y}),de=yield Ci._fromIdTokenResponse(x,"signIn",Y);return yield x._updateCurrentUser(de.user),de})).apply(this,arguments)}function te(){return te=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b),Y={requestType:"EMAIL_SIGNIN",email:p};ne(y.handleCodeInApp,x,"argument-error"),y&&po(x,Y,y),yield function le(b,p){return Ge.apply(this,arguments)}(x,Y)}),te.apply(this,arguments)}function br(){return(br=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b),Y=co.credentialWithLink(p,y||_t());return ne(Y._tenantId===(x.tenantId||null),x,"tenant-id-mismatch"),Pr(x,Y)})).apply(this,arguments)}function Zr(){return(Zr=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:createAuthUri",gt(b,p))})).apply(this,arguments)}function rs(){return rs=(0,_.Z)(function*(b,p){const x={identifier:p,continueUri:ot()?_t():"http://localhost"},{signinMethods:Y}=yield function oi(b,p){return Zr.apply(this,arguments)}((0,J.m9)(b),x);return Y||[]}),rs.apply(this,arguments)}function Ca(){return Ca=(0,_.Z)(function*(b,p){const y=(0,J.m9)(b),Y={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&po(y.auth,Y,p);const{email:de}=yield function vi(b,p){return se.apply(this,arguments)}(y.auth,Y);de!==b.email&&(yield b.reload())}),Ca.apply(this,arguments)}function Fi(){return Fi=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b),de={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};y&&po(x.auth,de,y);const{email:pt}=yield function Ye(b,p){return Ct.apply(this,arguments)}(x.auth,de);pt!==b.email&&(yield b.reload())}),Fi.apply(this,arguments)}function la(){return(la=(0,_.Z)(function*(b,p){return Ee(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ks(){return ks=(0,_.Z)(function*(b,{displayName:p,photoURL:y}){if(void 0===p&&void 0===y)return;const x=(0,J.m9)(b),de={idToken:yield x.getIdToken(),displayName:p,photoUrl:y,returnSecureToken:!0},pt=yield yr(x,function Os(b,p){return la.apply(this,arguments)}(x.auth,de));x.displayName=pt.displayName||null,x.photoURL=pt.photoUrl||null;const Ut=x.providerData.find(({providerId:bn})=>"password"===bn);Ut&&(Ut.displayName=x.displayName,Ut.photoURL=x.photoURL),yield x._updateTokensIfNecessary(pt)}),ks.apply(this,arguments)}function Ol(b,p,y){return gl.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(b,p,y){const{auth:x}=b,de={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(de.email=p),y&&(de.password=y);const pt=yield yr(b,us(x,de));yield b._updateTokensIfNecessary(pt,!0)})).apply(this,arguments)}class zs{constructor(p,y,x={}){this.isNewUser=p,this.providerId=y,this.profile=x}}class ca extends zs{constructor(p,y,x,Y){super(p,y,x),this.username=Y}}class Qs extends zs{constructor(p,y){super(p,"facebook.com",y)}}class kl extends ca{constructor(p,y){super(p,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class qa extends zs{constructor(p,y){super(p,"google.com",y)}}class zo extends ca{constructor(p,y,x){super(p,"twitter.com",y,x)}}function Ta(b){const{user:p,_tokenResponse:y}=b;return p.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function To(b){var p,y;if(!b)return null;const{providerId:x}=b,Y=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},de=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!x&&null!=b&&b.idToken){const pt=null===(y=null===(p=An(b.idToken))||void 0===p?void 0:p.firebase)||void 0===y?void 0:y.sign_in_provider;if(pt)return new zs(de,"anonymous"!==pt&&"custom"!==pt?pt:null)}if(!x)return null;switch(x){case"facebook.com":return new Qs(de,Y);case"github.com":return new kl(de,Y);case"google.com":return new qa(de,Y);case"twitter.com":return new zo(de,Y,b.screenName||null);case"custom":case"anonymous":return new zs(de,null);default:return new zs(de,x,Y)}}(y)}class Wo{constructor(p,y,x){this.type=p,this.credential=y,this.auth=x}static _fromIdtoken(p,y){return new Wo("enroll",p,y)}static _fromMfaPendingCredential(p){return new Wo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var y,x;if(null!=p&&p.multiFactorSession){if(null!==(y=p.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Wo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(x=p.multiFactorSession)&&void 0!==x&&x.idToken)return Wo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ni{constructor(p,y,x){this.session=p,this.hints=y,this.signInResolver=x}static _fromError(p,y){const x=Tr(p),Y=y.customData._serverResponse,de=(Y.mfaInfo||[]).map(Ut=>Ei._fromServerResponse(x,Ut));ne(Y.mfaPendingCredential,x,"internal-error");const pt=Wo._fromMfaPendingCredential(Y.mfaPendingCredential);return new ni(pt,de,function(){var Ut=(0,_.Z)(function*(bn){const Gn=yield bn._process(x,pt);delete Y.mfaInfo,delete Y.mfaPendingCredential;const rr=Object.assign(Object.assign({},Y),{idToken:Gn.idToken,refreshToken:Gn.refreshToken});switch(y.operationType){case"signIn":const er=yield Ci._fromIdTokenResponse(x,y.operationType,rr);return yield x._updateCurrentUser(er.user),er;case"reauthenticate":return ne(y.user,x,"internal-error"),Ci._forOperation(y.user,y.operationType,rr);default:Je(x,"internal-error")}});return function(bn){return Ut.apply(this,arguments)}}())}resolveSignIn(p){var y=this;return(0,_.Z)(function*(){return y.signInResolver(p)})()}}class F{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(x=>Ei._fromServerResponse(p.auth,x)))})}static _fromUser(p){return new F(p)}getSession(){var p=this;return(0,_.Z)(function*(){return Wo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,y){var x=this;return(0,_.Z)(function*(){const Y=p,de=yield x.getSession(),pt=yield yr(x.user,Y._process(x.user.auth,de,y));return yield x.user._updateTokensIfNecessary(pt),x.user.reload()})()}unenroll(p){var y=this;return(0,_.Z)(function*(){const x="string"==typeof p?p:p.uid,Y=yield y.user.getIdToken();try{const de=yield yr(y.user,function Ka(b,p){return Ee(b,"POST","/v2/accounts/mfaEnrollment:withdraw",gt(b,p))}(y.user.auth,{idToken:Y,mfaEnrollmentId:x}));y.enrolledFactors=y.enrolledFactors.filter(({uid:pt})=>pt!==x),yield y.user._updateTokensIfNecessary(de),yield y.user.reload()}catch(de){throw de}})()}}const Z=new WeakMap,oe="__sak";class be{constructor(p,y){this.storageRetriever=p,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(oe,"1"),this.storage.removeItem(oe),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,y){return this.storage.setItem(p,JSON.stringify(y)),Promise.resolve()}_get(p){const y=this.storage.getItem(p);return Promise.resolve(y?JSON.parse(y):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ft=(()=>{class b extends be{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,x)=>this.onStorageEvent(y,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mt(){const b=(0,J.z$)();return wn(b)||qt(b)}()&&function pi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Qr(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const x of Object.keys(this.listeners)){const Y=this.storage.getItem(x),de=this.localCache[x];Y!==de&&y(x,de,Y)}}onStorageEvent(y,x=!1){if(!y.key)return void this.forAllChangedKeys((Ut,bn,Gn)=>{this.notifyListeners(Ut,Gn)});const Y=y.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ut=this.storage.getItem(Y);if(y.newValue!==Ut)null!==y.newValue?this.storage.setItem(Y,y.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===y.newValue&&!x)return}const de=()=>{const Ut=this.storage.getItem(Y);!x&&this.localCache[Y]===Ut||this.notifyListeners(Y,Ut)},pt=this.storage.getItem(Y);!function hr(){return(0,J.w1)()&&10===document.documentMode}()||pt===y.newValue||y.newValue===y.oldValue?de():setTimeout(de,10)}notifyListeners(y,x){this.localCache[y]=x;const Y=this.listeners[y];if(Y)for(const de of Array.from(Y))de(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,x,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:x,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(x)}_removeListener(y,x){this.listeners[y]&&(this.listeners[y].delete(x),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,x){var Y=()=>super._set,de=this;return(0,_.Z)(function*(){yield Y().call(de,y,x),de.localCache[y]=JSON.stringify(x)})()}_get(y){var x=()=>super._get,Y=this;return(0,_.Z)(function*(){const de=yield x().call(Y,y);return Y.localCache[y]=JSON.stringify(de),de})()}_remove(y){var x=()=>super._remove,Y=this;return(0,_.Z)(function*(){yield x().call(Y,y),delete Y.localCache[y]})()}}return b.type="LOCAL",b})(),Zn=(()=>{class b extends be{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,x){}_removeListener(y,x){}}return b.type="SESSION",b})();let hn=(()=>{class b{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const x=this.receivers.find(de=>de.isListeningto(y));if(x)return x;const Y=new b(y);return this.receivers.push(Y),Y}isListeningto(y){return this.eventTarget===y}handleEvent(y){var x=this;return(0,_.Z)(function*(){const Y=y,{eventId:de,eventType:pt,data:Ut}=Y.data,bn=x.handlersMap[pt];if(null==bn||!bn.size)return;Y.ports[0].postMessage({status:"ack",eventId:de,eventType:pt});const Gn=Array.from(bn).map(function(){var er=(0,_.Z)(function*(qs){return qs(Y.origin,Ut)});return function(qs){return er.apply(this,arguments)}}()),rr=yield function Vi(b){return Promise.all(b.map(function(){var p=(0,_.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(x){return{fulfilled:!1,reason:x}}});return function(y){return p.apply(this,arguments)}}()))}(Gn);Y.ports[0].postMessage({status:"done",eventId:de,eventType:pt,response:rr})})()}_subscribe(y,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(x)}_unsubscribe(y,x){this.handlersMap[y]&&x&&this.handlersMap[y].delete(x),(!x||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function yn(b="",p=10){let y="";for(let x=0;x<p;x++)y+=Math.floor(10*Math.random());return b+y}class xo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,y,x=50){var Y=this;return(0,_.Z)(function*(){const de=typeof MessageChannel<"u"?new MessageChannel:null;if(!de)throw new Error("connection_unavailable");let pt,Ut;return new Promise((bn,Gn)=>{const rr=yn("",20);de.port1.start();const er=setTimeout(()=>{Gn(new Error("unsupported_event"))},x);Ut={messageChannel:de,onMessage(qs){const Ra=qs;if(Ra.data.eventId===rr)switch(Ra.data.status){case"ack":clearTimeout(er),pt=setTimeout(()=>{Gn(new Error("timeout"))},3e3);break;case"done":clearTimeout(pt),bn(Ra.data.response);break;default:clearTimeout(er),clearTimeout(pt),Gn(new Error("invalid_response"))}}},Y.handlers.add(Ut),de.port1.addEventListener("message",Ut.onMessage),Y.target.postMessage({eventType:p,eventId:rr,data:y},[de.port2])}).finally(()=>{Ut&&Y.removeMessageHandler(Ut)})})()}}function on(){return window}function Wt(){return typeof on().WorkerGlobalScope<"u"&&"function"==typeof on().importScripts}function Gs(){return(Gs=(0,_.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qa="firebaseLocalStorageDb",fa=1,Ja="firebaseLocalStorage",Sa="fbase_key";class el{constructor(p){this.request=p}toPromise(){return new Promise((p,y)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function vl(b,p){return b.transaction([Ja],p?"readwrite":"readonly").objectStore(Ja)}function Fa(){const b=indexedDB.open(Qa,fa);return new Promise((p,y)=>{b.addEventListener("error",()=>{y(b.error)}),b.addEventListener("upgradeneeded",()=>{const x=b.result;try{x.createObjectStore(Ja,{keyPath:Sa})}catch(Y){y(Y)}}),b.addEventListener("success",(0,_.Z)(function*(){const x=b.result;x.objectStoreNames.contains(Ja)?p(x):(x.close(),yield function qo(){const b=indexedDB.deleteDatabase(Qa);return new el(b).toPromise()}(),p(yield Fa()))}))})}function pr(b,p,y){return go.apply(this,arguments)}function go(){return(go=(0,_.Z)(function*(b,p,y){const x=vl(b,!0).put({[Sa]:p,value:y});return new el(x).toPromise()})).apply(this,arguments)}function Ii(){return(Ii=(0,_.Z)(function*(b,p){const y=vl(b,!1).get(p),x=yield new el(y).toPromise();return void 0===x?null:x.value})).apply(this,arguments)}function Xn(b,p){const y=vl(b,!0).delete(p);return new el(y).toPromise()}const ui=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,_.Z)(function*(){return y.db||(y.db=yield Fa()),y.db})()}_withRetries(y){var x=this;return(0,_.Z)(function*(){let Y=0;for(;;)try{const de=yield x._openDb();return yield y(de)}catch(de){if(Y++>3)throw de;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,_.Z)(function*(){return Wt()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,_.Z)(function*(){y.receiver=hn._getInstance(function Xa(){return Wt()?self:null}()),y.receiver._subscribe("keyChanged",function(){var x=(0,_.Z)(function*(Y,de){return{keyProcessed:(yield y._poll()).includes(de.key)}});return function(Y,de){return x.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var x=(0,_.Z)(function*(Y,de){return["keyChanged"]});return function(Y,de){return x.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,_.Z)(function*(){var x,Y;if(y.activeServiceWorker=yield function Ti(){return Gs.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new xo(y.activeServiceWorker);const de=yield y.sender._send("ping",{},800);de&&null!==(x=de[0])&&void 0!==x&&x.fulfilled&&null!==(Y=de[0])&&void 0!==Y&&Y.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var x=this;return(0,_.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function Za(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:y},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Fa();return yield pr(y,oe,"1"),yield Xn(y,oe),!0}catch{}return!1})()}_withPendingWrite(y){var x=this;return(0,_.Z)(function*(){x.pendingWrites++;try{yield y()}finally{x.pendingWrites--}})()}_set(y,x){var Y=this;return(0,_.Z)(function*(){return Y._withPendingWrite((0,_.Z)(function*(){return yield Y._withRetries(de=>pr(de,y,x)),Y.localCache[y]=x,Y.notifyServiceWorker(y)}))})()}_get(y){var x=this;return(0,_.Z)(function*(){const Y=yield x._withRetries(de=>function La(b,p){return Ii.apply(this,arguments)}(de,y));return x.localCache[y]=Y,Y})()}_remove(y){var x=this;return(0,_.Z)(function*(){return x._withPendingWrite((0,_.Z)(function*(){return yield x._withRetries(Y=>Xn(Y,y)),delete x.localCache[y],x.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,_.Z)(function*(){const x=yield y._withRetries(pt=>{const Ut=vl(pt,!1).getAll();return new el(Ut).toPromise()});if(!x)return[];if(0!==y.pendingWrites)return[];const Y=[],de=new Set;for(const{fbase_key:pt,value:Ut}of x)de.add(pt),JSON.stringify(y.localCache[pt])!==JSON.stringify(Ut)&&(y.notifyListeners(pt,Ut),Y.push(pt));for(const pt of Object.keys(y.localCache))y.localCache[pt]&&!de.has(pt)&&(y.notifyListeners(pt,null),Y.push(pt));return Y})()}notifyListeners(y,x){this.localCache[y]=x;const Y=this.listeners[y];if(Y)for(const de of Array.from(Y))de(x)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(x)}_removeListener(y,x){this.listeners[y]&&(this.listeners[y].delete(x),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function _l(){return(_l=(0,_.Z)(function*(b){return(yield Ee(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fl(b){return new Promise((p,y)=>{const x=document.createElement("script");x.setAttribute("src",b),x.onload=p,x.onerror=Y=>{const de=et("internal-error");de.customData=Y,y(de)},x.type="text/javascript",x.charset="UTF-8",function El(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(x)})}function ps(b){return`__${b}${Math.floor(1e6*Math.random())}`}const gs=1e12;class iu{constructor(p){this.auth=p,this.counter=gs,this._widgets=new Map}render(p,y){const x=this.counter;return this._widgets.set(x,new os(p,this.auth.name,y||{})),this.counter++,x}reset(p){var y;const x=p||gs;null===(y=this._widgets.get(x))||void 0===y||y.delete(),this._widgets.delete(x)}getResponse(p){var y;return(null===(y=this._widgets.get(p||gs))||void 0===y?void 0:y.getResponse())||""}execute(p){var y=this;return(0,_.Z)(function*(){var x;return null===(x=y._widgets.get(p||gs))||void 0===x||x.execute(),""})()}}class os{constructor(p,y,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof p?document.getElementById(p):p;ne(Y,"argument-error",{appName:y}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Il(b){const p=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<b;x++)p.push(y.charAt(Math.floor(Math.random()*y.length)));return p.join("")}(50);const{callback:p,"expired-callback":y}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ms=ps("rcb"),Aa=new it(3e4,6e4);class Js{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=on().grecaptcha)||void 0===p||!p.render)}load(p,y=""){return ne(function oo(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(y),p,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(on().grecaptcha):new Promise((x,Y)=>{const de=on().setTimeout(()=>{Y(et(p,"network-request-failed"))},Aa.get());on()[ms]=()=>{on().clearTimeout(de),delete on()[ms];const Ut=on().grecaptcha;if(!Ut)return void Y(et(p,"internal-error"));const bn=Ut.render;Ut.render=(Gn,rr)=>{const er=bn(Gn,rr);return this.counter++,er},this.hostLanguage=y,x(Ut)},Fl(`https://www.google.com/recaptcha/api.js??${(0,J.xO)({onload:ms,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(de),Y(et(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var y;return!(null===(y=on().grecaptcha)||void 0===y||!y.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ll{load(p){return(0,_.Z)(function*(){return new iu(p)})()}clearedOneInstance(){}}const Au="recaptcha",rl={theme:"light",type:"image"};class Oi{constructor(p,y=Object.assign({},rl),x){this.parameters=y,this.type=Au,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tr(x),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof p?document.getElementById(p):p;ne(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ll:new Js,this.validateStartingState()}verify(){var p=this;return(0,_.Z)(function*(){p.assertNotDestroyed();const y=yield p.render(),x=p.getAssertedRecaptcha();return x.getResponse(y)||new Promise(de=>{const pt=Ut=>{Ut&&(p.tokenChangeListeners.delete(pt),de(Ut))};p.tokenChangeListeners.add(pt),p.isInvisible&&x.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return y=>{if(this.tokenChangeListeners.forEach(x=>x(y)),"function"==typeof p)p(y);else if("string"==typeof p){const x=on()[p];"function"==typeof x&&x(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,_.Z)(function*(){if(yield p.init(),!p.widgetId){let y=p.container;if(!p.isInvisible){const x=document.createElement("div");y.appendChild(x),y=x}p.widgetId=p.getAssertedRecaptcha().render(y,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,_.Z)(function*(){ne(ot()&&!Wt(),p.auth,"internal-error"),yield function pa(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const y=yield function Ws(b){return _l.apply(this,arguments)}(p.auth);ne(y,p.auth,"internal-error"),p.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class il{constructor(p,y){this.verificationId=p,this.onConfirmation=y}confirm(p){const y=As._fromVerification(this.verificationId,p);return this.onConfirmation(y)}}function xu(){return(xu=(0,_.Z)(function*(b,p,y){const x=Tr(b),Y=yield Mu(x,p,(0,J.m9)(y));return new il(Y,de=>Pr(x,de))})).apply(this,arguments)}function eo(){return(eo=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b);yield Rs(!1,x,"phone");const Y=yield Mu(x.auth,p,(0,J.m9)(y));return new il(Y,de=>No(x,de))})).apply(this,arguments)}function Yo(){return(Yo=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b),Y=yield Mu(x.auth,p,(0,J.m9)(y));return new il(Y,de=>ba(x,de))})).apply(this,arguments)}function Mu(b,p,y){return ao.apply(this,arguments)}function ao(){return ao=(0,_.Z)(function*(b,p,y){var x;const Y=yield y.verify();try{let de;if(ne("string"==typeof Y,b,"argument-error"),ne(y.type===Au,b,"argument-error"),de="string"==typeof p?{phoneNumber:p}:p,"session"in de){const pt=de.session;if("phoneNumber"in de)return ne("enroll"===pt.type,b,"internal-error"),(yield function ss(b,p){return Ee(b,"POST","/v2/accounts/mfaEnrollment:start",gt(b,p))}(b,{idToken:pt.credential,phoneEnrollmentInfo:{phoneNumber:de.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{ne("signin"===pt.type,b,"internal-error");const Ut=(null===(x=de.multiFactorHint)||void 0===x?void 0:x.uid)||de.multiFactorUid;return ne(Ut,b,"missing-multi-factor-info"),(yield function Sn(b,p){return Ee(b,"POST","/v2/accounts/mfaSignIn:start",gt(b,p))}(b,{mfaPendingCredential:pt.credential,mfaEnrollmentId:Ut,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:pt}=yield function Ht(b,p){return Qt.apply(this,arguments)}(b,{phoneNumber:de.phoneNumber,recaptchaToken:Y});return pt}}finally{y._reset()}}),ao.apply(this,arguments)}function sl(){return(sl=(0,_.Z)(function*(b,p){yield ho((0,J.m9)(b),p)})).apply(this,arguments)}let ys=(()=>{class b{constructor(y){this.providerId=b.PROVIDER_ID,this.auth=Tr(y)}verifyPhoneNumber(y,x){return Mu(this.auth,y,(0,J.m9)(x))}static credential(y,x){return As._fromVerification(y,x)}static credentialFromResult(y){return b.credentialFromTaggedObject(y)}static credentialFromError(y){return b.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:x,temporaryProof:Y}=y;return x&&Y?As._fromTokenResponse(x,Y):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Ko(b,p){return p?nt(p):(ne(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class vs extends xr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return qn(p,this._buildIdpRequest())}_linkToIdToken(p,y){return qn(p,this._buildIdpRequest(y))}_getReauthenticationResolver(p){return qn(p,this._buildIdpRequest())}_buildIdpRequest(p){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(y.idToken=p),y}}function Zo(b){return bs(b.auth,new vs(b),b.bypassAuthState)}function ri(b){const{auth:p,user:y}=b;return ne(y,p,"internal-error"),bo(y,new vs(b),b.bypassAuthState)}function Hr(b){return vr.apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(b){const{auth:p,user:y}=b;return ne(y,p,"internal-error"),ho(y,new vs(b),b.bypassAuthState)})).apply(this,arguments)}class Xo{constructor(p,y,x,Y,de=!1){this.auth=p,this.resolver=x,this.user=Y,this.bypassAuthState=de,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var p=this;return new Promise(function(){var y=(0,_.Z)(function*(x,Y){p.pendingPromise={resolve:x,reject:Y};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(de){p.reject(de)}});return function(x,Y){return y.apply(this,arguments)}}())}onAuthEvent(p){var y=this;return(0,_.Z)(function*(){const{urlResponse:x,sessionId:Y,postBody:de,tenantId:pt,error:Ut,type:bn}=p;if(Ut)return void y.reject(Ut);const Gn={auth:y.auth,requestUri:x,sessionId:Y,tenantId:pt||void 0,postBody:de||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(bn)(Gn))}catch(rr){y.reject(rr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Zo;case"linkViaPopup":case"linkViaRedirect":return Hr;case"reauthViaPopup":case"reauthViaRedirect":return ri;default:Je(this.auth,"internal-error")}}resolve(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Di=new it(2e3,1e4);function Vc(){return(Vc=(0,_.Z)(function*(b,p,y){const x=Tr(b);X(b,p,ts);const Y=Ko(x,y);return new P(x,"signInViaPopup",p,Y).executeNotNull()})).apply(this,arguments)}function S(){return(S=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b);X(x.auth,p,ts);const Y=Ko(x.auth,y);return new P(x.auth,"reauthViaPopup",p,Y,x).executeNotNull()})).apply(this,arguments)}function I(){return(I=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b);X(x.auth,p,ts);const Y=Ko(x.auth,y);return new P(x.auth,"linkViaPopup",p,Y,x).executeNotNull()})).apply(this,arguments)}let P=(()=>{class b extends Xo{constructor(y,x,Y,de,pt){super(y,x,de,pt),this.provider=Y,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var y=this;return(0,_.Z)(function*(){const x=yield y.execute();return ne(x,y.auth,"internal-error"),x})()}onExecution(){var y=this;return(0,_.Z)(function*(){ye(1===y.filter.length,"Popup operations only handle one event");const x=yn();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],x),y.authWindow.associatedEvent=x,y.resolver._originValidation(y.auth).catch(Y=>{y.reject(Y)}),y.resolver._isIframeWebStorageSupported(y.auth,Y=>{Y||y.reject(et(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(et(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const y=()=>{var x,Y;this.pollId=null!==(Y=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==Y&&Y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(et(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Di.get())};y()}}return b.currentPopupAction=null,b})();const H="pendingRedirect",ie=new Map;class ae extends Xo{constructor(p,y,x=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,x),this.eventId=null}execute(){var p=()=>super.execute,y=this;return(0,_.Z)(function*(){let x=ie.get(y.auth._key());if(!x){try{const de=(yield function at(b,p){return Pt.apply(this,arguments)}(y.resolver,y.auth))?yield p().call(y):null;x=()=>Promise.resolve(de)}catch(Y){x=()=>Promise.reject(Y)}ie.set(y.auth._key(),x)}return y.bypassAuthState||ie.set(y.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(p){var y=()=>super.onAuthEvent,x=this;return(0,_.Z)(function*(){if("signInViaRedirect"===p.type)return y().call(x,p);if("unknown"!==p.type){if(p.eventId){const Y=yield x.auth._redirectUserForId(p.eventId);if(Y)return x.user=Y,y().call(x,p);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Pt(){return(Pt=(0,_.Z)(function*(b,p){const y=Ns(p),x=Ir(b);if(!(yield x._isAvailable()))return!1;const Y="true"===(yield x._get(y));return yield x._remove(y),Y})).apply(this,arguments)}function dn(b,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,_.Z)(function*(b,p){return Ir(b)._set(Ns(p),"true")})).apply(this,arguments)}function zr(b,p){ie.set(b._key(),p)}function Ir(b){return nt(b._redirectPersistence)}function Ns(b){return Pe(H,b.config.apiKey,b.name)}function $(b,p,y){return function z(b,p,y){return re.apply(this,arguments)}(b,p,y)}function re(){return(re=(0,_.Z)(function*(b,p,y){const x=Tr(b);X(b,p,ts),yield x._initializationPromise;const Y=Ko(x,y);return yield dn(Y,x),Y._openRedirect(x,p,"signInViaRedirect")})).apply(this,arguments)}function ke(b,p,y){return function dt(b,p,y){return ft.apply(this,arguments)}(b,p,y)}function ft(){return(ft=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b);X(x.auth,p,ts),yield x.auth._initializationPromise;const Y=Ko(x.auth,y);yield dn(Y,x.auth);const de=yield Yi(x);return Y._openRedirect(x.auth,p,"reauthViaRedirect",de)})).apply(this,arguments)}function $t(b,p,y){return function Un(b,p,y){return xn.apply(this,arguments)}(b,p,y)}function xn(){return(xn=(0,_.Z)(function*(b,p,y){const x=(0,J.m9)(b);X(x.auth,p,ts),yield x.auth._initializationPromise;const Y=Ko(x.auth,y);yield Rs(!1,x,p.providerId),yield dn(Y,x.auth);const de=yield Yi(x);return Y._openRedirect(x.auth,p,"linkViaRedirect",de)})).apply(this,arguments)}function Cr(){return(Cr=(0,_.Z)(function*(b,p){return yield Tr(b)._initializationPromise,Yn(b,p,!1)})).apply(this,arguments)}function Yn(b,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,_.Z)(function*(b,p,y=!1){const x=Tr(b),Y=Ko(x,p),pt=yield new ae(x,Y,y).execute();return pt&&!y&&(delete pt.user._redirectEventId,yield x._persistUserIfCurrent(pt.user),yield x._setRedirectUser(null,p)),pt})).apply(this,arguments)}function Yi(b){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,_.Z)(function*(b){const p=yn(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class Ba{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let y=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(p,x)&&(y=!0,this.sendToConsumer(p,x),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function ac(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mo(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=p,y=!0)),y}sendToConsumer(p,y){var x;if(p.error&&!mo(p)){const Y=(null===(x=p.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";y.onError(et(this.auth,Y))}else y.onAuthEvent(p)}isEventForConsumer(p,y){const x=null===y.eventId||!!p.eventId&&p.eventId===y.eventId;return y.filter.includes(p.type)&&x}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mo(p))}saveEventToCache(p){this.cachedEventUids.add(Mo(p)),this.lastProcessedEventTime=Date.now()}}function Mo(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function mo({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function wl(b){return $a.apply(this,arguments)}function $a(){return($a=(0,_.Z)(function*(b,p={}){return Ee(b,"GET","/v1/projects",p)})).apply(this,arguments)}const su=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$l=/^https?/;function Pu(){return(Pu=(0,_.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield wl(b);for(const y of p)try{if(ou(y))return}catch{}Je(b,"unauthorized-domain")})).apply(this,arguments)}function ou(b){const p=_t(),{protocol:y,hostname:x}=new URL(p);if(b.startsWith("chrome-extension://")){const pt=new URL(b);return""===pt.hostname&&""===x?"chrome-extension:"===y&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===y&&pt.hostname===x}if(!$l.test(y))return!1;if(su.test(b))return x===b;const Y=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(x)}const Td=new it(3e4,6e4);function Si(){const b=on().___jsl;if(null!=b&&b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let y=0;y<b.CP.length;y++)b.CP[y]=null}let Ua=null;const lc=new it(5e3,15e3),uc="__/auth/iframe",Ul="emulator/auth/iframe",Ou={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wh(b){const p=b.config;ne(p.authDomain,b,"auth-domain-config-required");const y=p.emulator?ht(p,Ul):`https://${b.config.authDomain}/${uc}`,x={apiKey:p.apiKey,appName:b.name,v:fe.SDK_VERSION},Y=Sr.get(b.config.apiHost);Y&&(x.eid=Y);const de=b._getFrameworks();return de.length&&(x.fw=de.join(",")),`${y}?${(0,J.xO)(x).slice(1)}`}function Sd(){return Sd=(0,_.Z)(function*(b){const p=yield function jc(b){return Ua=Ua||function yf(b){return new Promise((p,y)=>{var x,Y,de;function pt(){Si(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Si(),y(et(b,"network-request-failed"))},timeout:Td.get()})}if(null!==(Y=null===(x=on().gapi)||void 0===x?void 0:x.iframes)&&void 0!==Y&&Y.Iframe)p(gapi.iframes.getContext());else{if(null===(de=on().gapi)||void 0===de||!de.load){const Ut=ps("iframefcb");return on()[Ut]=()=>{gapi.load?pt():y(et(b,"network-request-failed"))},Fl(`https://apis.google.com/js/api.js?onload=${Ut}`).catch(bn=>y(bn))}pt()}}).catch(p=>{throw Ua=null,p})}(b),Ua}(b),y=on().gapi;return ne(y,b,"internal-error"),p.open({where:document.body,url:wh(b),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ou,dontclear:!0},x=>new Promise(function(){var Y=(0,_.Z)(function*(de,pt){yield x.restyle({setHideOnLeave:!1});const Ut=et(b,"network-request-failed"),bn=on().setTimeout(()=>{pt(Ut)},lc.get());function Gn(){on().clearTimeout(bn),de(x)}x.ping(Gn).then(Gn,()=>{pt(Ut)})});return function(de,pt){return Y.apply(this,arguments)}}()))}),Sd.apply(this,arguments)}const as={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hc=500,Ki=600,Ad="_blank",Ji="http://localhost";class ga{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const cc="__/auth/handler",bh="emulator/auth/handler";function lu(b,p,y,x,Y,de){ne(b.config.authDomain,b,"auth-domain-config-required"),ne(b.config.apiKey,b,"invalid-api-key");const pt={apiKey:b.config.apiKey,appName:b.name,authType:y,redirectUrl:x,v:fe.SDK_VERSION,eventId:Y};if(p instanceof ts){p.setDefaultLanguage(b.languageCode),pt.providerId=p.providerId||"",(0,J.xb)(p.getCustomParameters())||(pt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[bn,Gn]of Object.entries(de||{}))pt[bn]=Gn}if(p instanceof $i){const bn=p.getScopes().filter(Gn=>""!==Gn);bn.length>0&&(pt.scopes=bn.join(","))}b.tenantId&&(pt.tid=b.tenantId);const Ut=pt;for(const bn of Object.keys(Ut))void 0===Ut[bn]&&delete Ut[bn];return`${function ii({config:b}){return b.emulator?ht(b,bh):`https://${b.authDomain}/${cc}`}(b)}?${(0,J.xO)(Ut).slice(1)}`}const yi="webStorageSupport",Ro=class dc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zn,this._completeRedirectFn=Yn,this._overrideRedirectResult=zr}_openPopup(p,y,x,Y){var de=this;return(0,_.Z)(function*(){var pt;ye(null===(pt=de.eventManagers[p._key()])||void 0===pt?void 0:pt.manager,"_initialize() not called before _openPopup()");const Ut=lu(p,y,x,_t(),Y);return function Nu(b,p,y,x=Hc,Y=Ki){const de=Math.max((window.screen.availHeight-Y)/2,0).toString(),pt=Math.max((window.screen.availWidth-x)/2,0).toString();let Ut="";const bn=Object.assign(Object.assign({},as),{width:x.toString(),height:Y.toString(),top:de,left:pt}),Gn=(0,J.z$)().toLowerCase();y&&(Ut=We(Gn)?Ad:y),It(Gn)&&(p=p||Ji,bn.scrollbars="yes");const rr=Object.entries(bn).reduce((qs,[Ra,_c])=>`${qs}${Ra}=${_c},`,"");if(function Rn(b=(0,J.z$)()){var p;return qt(b)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Gn)&&"_self"!==Ut)return function au(b,p){const y=document.createElement("a");y.href=b,y.target=p;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(x)}(p||"",Ut),new ga(null);const er=window.open(p||"",Ut,rr);ne(er,b,"popup-blocked");try{er.focus()}catch{}return new ga(er)}(p,Ut,yn())})()}_openRedirect(p,y,x,Y){var de=this;return(0,_.Z)(function*(){return yield de._originValidation(p),function At(b){on().location.href=b}(lu(p,y,x,_t(),Y)),new Promise(()=>{})})()}_initialize(p){const y=p._key();if(this.eventManagers[y]){const{manager:Y,promise:de}=this.eventManagers[y];return Y?Promise.resolve(Y):(ye(de,"If manager is not set, promise should be"),de)}const x=this.initAndGetManager(p);return this.eventManagers[y]={promise:x},x.catch(()=>{delete this.eventManagers[y]}),x}initAndGetManager(p){var y=this;return(0,_.Z)(function*(){const x=yield function ku(b){return Sd.apply(this,arguments)}(p),Y=new Ba(p);return x.register("authEvent",de=>(ne(null==de?void 0:de.authEvent,p,"invalid-auth-event"),{status:Y.onEvent(de.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[p._key()]={manager:Y},y.iframes[p._key()]=x,Y})()}_isIframeWebStorageSupported(p,y){this.iframes[p._key()].send(yi,{type:yi},Y=>{var de;const pt=null===(de=null==Y?void 0:Y[0])||void 0===de?void 0:de[yi];void 0!==pt&&y(!!pt),Je(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function bl(b){return Pu.apply(this,arguments)}(p)),this.originValidationPromises[y]}get _shouldInitProactively(){return Qr()||wn()||qt()}};class zc{constructor(p){this.factorId=p}_process(p,y,x){switch(y.type){case"enroll":return this._finalizeEnroll(p,y.credential,x);case"signin":return this._finalizeSignIn(p,y.credential);default:return Qe("unexpected MultiFactorSessionType")}}}class Fu extends zc{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Fu(p)}_finalizeEnroll(p,y,x){return function Nl(b,p){return Ee(b,"POST","/v2/accounts/mfaEnrollment:finalize",gt(b,p))}(p,{idToken:y,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,y){return function Pi(b,p){return Ee(b,"POST","/v2/accounts/mfaSignIn:finalize",gt(b,p))}(p,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Gc=(()=>{class b{constructor(){}static assertion(y){return Fu._fromCredential(y)}}return b.FACTOR_ID="phone",b})();var Ch="@firebase/auth";class vf{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var y=this;return(0,_.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const y=this.auth.onIdTokenChanged(x=>{p((null==x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,y),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const y=this.internalListeners.get(p);y&&(this.internalListeners.delete(p),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function al(){return window}(0,J.Pz)("authIdTokenMaxAge"),function Bu(b){(0,fe._registerComponent)(new Ie.wA("auth",(p,{options:y})=>{const x=p.getProvider("app").getImmediate(),Y=p.getProvider("heartbeat"),{apiKey:de,authDomain:pt}=x.options;return((Ut,bn)=>{ne(de&&!de.includes(":"),"invalid-api-key",{appName:Ut.name}),ne(!(null!=pt&&pt.includes(":")),"argument-error",{appName:Ut.name});const Gn={apiKey:de,authDomain:pt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xi(b)},rr=new ki(Ut,bn,Gn);return function ze(b,p){const y=(null==p?void 0:p.persistence)||[],x=(Array.isArray(y)?y:[y]).map(nt);null!=p&&p.errorMap&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(x,null==p?void 0:p.popupRedirectResolver)}(rr,y),rr})(x,Y)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,y,x)=>{p.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new Ie.wA("auth-internal",p=>{const y=Tr(p.getProvider("auth").getImmediate());return new vf(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(Ch,"0.22.0",function Wc(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,fe.registerVersion)(Ch,"0.22.0","esm2017")}("Browser");const cu=2e3;function Qo(){return Qo=(0,_.Z)(function*(b,p,y){var x;const{BuildInfo:Y}=al();ye(p.sessionId,"AuthEvent did not contain a session ID");const de=yield function jl(b){return ya.apply(this,arguments)}(p.sessionId),pt={};return qt()?pt.ibi=Y.packageName:De()?pt.apn=Y.packageName:Je(b,"operation-not-supported-in-this-environment"),Y.displayName&&(pt.appDisplayName=Y.displayName),pt.sessionId=de,lu(b,y,p.type,void 0,null!==(x=p.eventId)&&void 0!==x?x:void 0,pt)}),Qo.apply(this,arguments)}function Jo(){return(Jo=(0,_.Z)(function*(b){const{BuildInfo:p}=al(),y={};qt()?y.iosBundleId=p.packageName:De()?y.androidPackageName=p.packageName:Je(b,"operation-not-supported-in-this-environment"),yield wl(b,y)})).apply(this,arguments)}function Cl(){return(Cl=(0,_.Z)(function*(b,p,y){const{cordova:x}=al();let Y=()=>{};try{yield new Promise((de,pt)=>{let Ut=null;function bn(){var er;de();const qs=null===(er=x.plugins.browsertab)||void 0===er?void 0:er.close;"function"==typeof qs&&qs(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Gn(){Ut||(Ut=window.setTimeout(()=>{pt(et(b,"redirect-cancelled-by-user"))},cu))}function rr(){"visible"===(null==document?void 0:document.visibilityState)&&Gn()}p.addPassiveListener(bn),document.addEventListener("resume",Gn,!1),De()&&document.addEventListener("visibilitychange",rr,!1),Y=()=>{p.removePassiveListener(bn),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",rr,!1),Ut&&window.clearTimeout(Ut)}})}finally{Y()}})).apply(this,arguments)}function ya(){return(ya=(0,_.Z)(function*(b){const p=function $u(b){if(ye(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),y=new Uint8Array(p);for(let x=0;x<b.length;x++)y[x]=b.charCodeAt(x);return y}(b),y=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(y)).map(Y=>Y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const ea=20;class Uu extends Ba{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(p)),super.onEvent(p)}initialized(){var p=this;return(0,_.Z)(function*(){yield p.initPromise})()}}function gc(b){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,_.Z)(function*(b){const p=yield Va()._get(Zc(b));return p&&(yield Va()._remove(Zc(b))),p})).apply(this,arguments)}function mc(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<ea;y++){const x=Math.floor(Math.random()*p.length);b.push(p.charAt(x))}return b.join("")}function Va(){return nt(Ft)}function Zc(b){return Pe("authEvent",b.config.apiKey,b.name)}function Hi(b){if(null==b||!b.includes("?"))return{};const[p,...y]=b.split("?");return(0,J.zd)(y.join("?"))}const Pd=class fu{constructor(){this._redirectPersistence=Zn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Yn,this._overrideRedirectResult=zr}_initialize(p){var y=this;return(0,_.Z)(function*(){const x=p._key();let Y=y.eventManagers.get(x);return Y||(Y=new Uu(p),y.eventManagers.set(x,Y),y.attachCallbackListeners(p,Y)),Y})()}_openPopup(p){Je(p,"operation-not-supported-in-this-environment")}_openRedirect(p,y,x,Y){var de=this;return(0,_.Z)(function*(){!function Dl(b){var p,y,x,Y,de,pt,Ut,bn,Gn,rr;const er=al();ne("function"==typeof(null===(p=null==er?void 0:er.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(y=null==er?void 0:er.BuildInfo)||void 0===y?void 0:y.packageName)<"u",b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(de=null===(Y=null===(x=null==er?void 0:er.cordova)||void 0===x?void 0:x.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===de?void 0:de.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(bn=null===(Ut=null===(pt=null==er?void 0:er.cordova)||void 0===pt?void 0:pt.plugins)||void 0===Ut?void 0:Ut.browsertab)||void 0===bn?void 0:bn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(rr=null===(Gn=null==er?void 0:er.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===rr?void 0:rr.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const pt=yield de._initialize(p);yield pt.initialized(),pt.resetRedirect(),function Dn(){ie.clear()}(),yield de._originValidation(p);const Ut=function Rd(b,p,y=null){return{type:p,eventId:y,urlResponse:null,sessionId:mc(),postBody:null,tenantId:b.tenantId,error:et(b,"no-auth-event")}}(p,x,Y);yield function Kc(b,p){return Va()._set(Zc(b),p)}(p,Ut);const bn=yield function Md(b,p,y){return Qo.apply(this,arguments)}(p,Ut,y),Gn=yield function Yc(b){const{cordova:p}=al();return new Promise(y=>{p.plugins.browsertab.isAvailable(x=>{let Y=null;x?p.plugins.browsertab.openUrl(b):Y=p.InAppBrowser.open(b,function Bn(b=(0,J.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),y(Y)})})}(bn);return function ma(b,p,y){return Cl.apply(this,arguments)}(p,pt,Gn)})()}_isIframeWebStorageSupported(p,y){throw new Error("Method not implemented.")}_originValidation(p){const y=p._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function pc(b){return Jo.apply(this,arguments)}(p)),this.originValidationPromises[y]}attachCallbackListeners(p,y){const{universalLinks:x,handleOpenURL:Y,BuildInfo:de}=al(),pt=setTimeout((0,_.Z)(function*(){yield gc(p),y.onEvent(xa())}),500),Ut=function(){var rr=(0,_.Z)(function*(er){clearTimeout(pt);const qs=yield gc(p);let Ra=null;qs&&null!=er&&er.url&&(Ra=function du(b,p){var y,x;const Y=function Zi(b){const p=Hi(b),y=p.link?decodeURIComponent(p.link):void 0,x=Hi(y).link,Y=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return Hi(Y).link||Y||x||y||b}(p);if(Y.includes("/__/auth/callback")){const de=Hi(Y),pt=de.firebaseError?function hu(b){try{return JSON.parse(b)}catch{return null}}(decodeURIComponent(de.firebaseError)):null,Ut=null===(x=null===(y=null==pt?void 0:pt.code)||void 0===y?void 0:y.split("auth/"))||void 0===x?void 0:x[1],bn=Ut?et(Ut):null;return bn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:bn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:Y,postBody:null}}return null}(qs,er.url)),y.onEvent(Ra||xa())});return function(qs){return rr.apply(this,arguments)}}();typeof x<"u"&&"function"==typeof x.subscribe&&x.subscribe(null,Ut);const bn=Y,Gn=`${de.packageName.toLowerCase()}://`;al().handleOpenURL=function(){var rr=(0,_.Z)(function*(er){if(er.toLowerCase().startsWith(Gn)&&Ut({url:er}),"function"==typeof bn)try{bn(er)}catch(qs){console.error(qs)}});return function(er){return rr.apply(this,arguments)}}()}};function xa(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:et("no-auth-event")}}const Od=1e3;function mr(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Sl(b=(0,J.z$)()){return!("file:"!==mr()&&"ionic:"!==mr()&&"capacitor:"!==mr()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function kd(){try{const b=self.localStorage,p=yn();if(b)return b.setItem(p,"1"),b.removeItem(p),!function Jc(b=(0,J.z$)()){return function Xc(){return(0,J.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Qc(b=(0,J.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,J.hl)()}catch{return ed()&&(0,J.hl)()}return!1}function ed(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function yc(){return(function Th(){return"http:"===mr()||"https:"===mr()}()||(0,J.ru)()||Sl())&&!function Sh(){return(0,J.b$)()||(0,J.UG)()}()&&kd()&&!ed()}function Ha(){return Sl()&&typeof document<"u"}function td(){return(td=(0,_.Z)(function*(){return!!Ha()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},Od);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const va={LOCAL:"local",NONE:"none",SESSION:"session"},Al=ne,Nd="persistence";function Ma(b){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,_.Z)(function*(b){yield b._initializationPromise;const p=zi(),y=Pe(Nd,b.config.apiKey,b.name);p&&p.setItem(y,b._getPersistence())})).apply(this,arguments)}function zi(){var b;try{return(null===(b=function ju(){return typeof window<"u"?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch{return null}}const Fd=ne;class za{constructor(){this.browserResolver=nt(Ro),this.cordovaResolver=nt(Pd),this.underlyingResolver=null,this._redirectPersistence=Zn,this._completeRedirectFn=Yn,this._overrideRedirectResult=zr}_initialize(p){var y=this;return(0,_.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,y,x,Y){var de=this;return(0,_.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openPopup(p,y,x,Y)})()}_openRedirect(p,y,x,Y){var de=this;return(0,_.Z)(function*(){return yield de.selectUnderlyingResolver(),de.assertedUnderlyingResolver._openRedirect(p,y,x,Y)})()}_isIframeWebStorageSupported(p,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,y)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Ha()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Fd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,_.Z)(function*(){if(p.underlyingResolver)return;const y=yield function gu(){return td.apply(this,arguments)}();p.underlyingResolver=y?p.cordovaResolver:p.browserResolver})()}}function Ld(b){return b.unwrap()}function nd(b){return Gu(b)}function Gu(b){const{_tokenResponse:p}=b instanceof J.ZR?b.customData:b;if(!p)return null;if(!(b instanceof J.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ys.credentialFromResult(b);const y=p.providerId;if(!y||y===Be.PASSWORD)return null;let x;switch(y){case Be.GOOGLE:x=Vo;break;case Be.FACEBOOK:x=Us;break;case Be.GITHUB:x=Io;break;case Be.TWITTER:x=sa;break;default:const{oauthIdToken:Y,oauthAccessToken:de,oauthTokenSecret:pt,pendingToken:Ut,nonce:bn}=p;return de||pt||Y||Ut?Ut?y.startsWith("saml.")?xs._create(y,Ut):yt._fromParams({providerId:y,signInMethod:y,pendingToken:Ut,idToken:Y,accessToken:de}):new ns(y).credential({idToken:Y,accessToken:de,rawNonce:bn}):null}return b instanceof J.ZR?x.credentialFromError(b):x.credentialFromResult(b)}function Ds(b,p){return p.catch(y=>{throw y instanceof J.ZR&&function Ef(b,p){var y;const x=null===(y=p.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===(null==p?void 0:p.code))p.resolver=new xh(b,function ha(b,p){var y;const x=(0,J.m9)(b),Y=p;return ne(p.customData.operationType,x,"argument-error"),ne(null===(y=Y.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,x,"argument-error"),ni._fromError(x,Y)}(b,p));else if(x){const Y=Gu(p),de=p;Y&&(de.credential=Y,de.tenantId=x.tenantId||void 0,de.email=x.email||void 0,de.phoneNumber=x.phoneNumber||void 0)}}(b,y),y}).then(y=>{const Y=y.user;return{operationType:y.operationType,credential:nd(y),additionalUserInfo:Ta(y),user:ll.getOrCreate(Y)}})}function Ga(b,p){return rd.apply(this,arguments)}function rd(){return(rd=(0,_.Z)(function*(b,p){const y=yield p;return{verificationId:y.verificationId,confirm:x=>Ds(b,y.confirm(x))}})).apply(this,arguments)}class xh{constructor(p,y){this.resolver=y,this.auth=function Bd(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Ds(Ld(this.auth),this.resolver.resolveSignIn(p))}}class ll{constructor(p){this._delegate=p,this.multiFactor=function V(b){const p=(0,J.m9)(b);return Z.has(p)||Z.set(p,F._fromUser(p)),Z.get(p)}(p)}static getOrCreate(p){return ll.USER_MAP.has(p)||ll.USER_MAP.set(p,new ll(p)),ll.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var y=this;return(0,_.Z)(function*(){return Ds(y.auth,No(y._delegate,p))})()}linkWithPhoneNumber(p,y){var x=this;return(0,_.Z)(function*(){return Ga(x.auth,function Dd(b,p,y){return eo.apply(this,arguments)}(x._delegate,p,y))})()}linkWithPopup(p){var y=this;return(0,_.Z)(function*(){return Ds(y.auth,function A(b,p,y){return I.apply(this,arguments)}(y._delegate,p,za))})()}linkWithRedirect(p){var y=this;return(0,_.Z)(function*(){return yield Ma(Tr(y.auth)),$t(y._delegate,p,za)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var y=this;return(0,_.Z)(function*(){return Ds(y.auth,ba(y._delegate,p))})()}reauthenticateWithPhoneNumber(p,y){return Ga(this.auth,function Bl(b,p,y){return Yo.apply(this,arguments)}(this._delegate,p,y))}reauthenticateWithPopup(p){return Ds(this.auth,function lo(b,p,y){return S.apply(this,arguments)}(this._delegate,p,za))}reauthenticateWithRedirect(p){var y=this;return(0,_.Z)(function*(){return yield Ma(Tr(y.auth)),ke(y._delegate,p,za)})()}sendEmailVerification(p){return function Ui(b,p){return Ca.apply(this,arguments)}(this._delegate,p)}unlink(p){var y=this;return(0,_.Z)(function*(){return yield function io(b,p){return Ms.apply(this,arguments)}(y._delegate,p),y})()}updateEmail(p){return function Da(b,p){return Ol((0,J.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function Na(b,p){return Ol((0,J.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ji(b,p){return sl.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ua(b,p){return ks.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,y){return function pl(b,p,y){return Fi.apply(this,arguments)}(this._delegate,p,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ll.USER_MAP=new WeakMap;const ul=ne;let Wu=(()=>{class b{constructor(y,x){if(this.app=y,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Y}=y.options;ul(Y,"invalid-api-key",{appName:y.name}),ul(Y,"invalid-api-key",{appName:y.name});const de=typeof window<"u"?za:void 0;this._delegate=x.initialize({options:{persistence:$d(Y,y.name),popupRedirectResolver:de}}),this._delegate._updateErrorMap(rt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ll.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,x){!function Mi(b,p,y){const x=Tr(b);ne(x._canInitEmulator,x,"emulator-config-failed"),ne(/^https?:\/\//.test(p),x,"invalid-emulator-scheme");const Y=!(null==y||!y.disableWarnings),de=ar(p),{host:pt,port:Ut}=function Or(b){const p=ar(b),y=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!y)return{host:"",port:null};const x=y[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(x);if(Y){const de=Y[1];return{host:de,port:tr(x.substr(de.length+1))}}{const[de,pt]=x.split(":");return{host:de,port:tr(pt)}}}(p);x.config.emulator={url:`${de}//${pt}${null===Ut?"":`:${Ut}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:pt,port:Ut,protocol:de.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function Kn(){function b(){const p=document.createElement("p"),y=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,y,x)}applyActionCode(y){return function Ho(b,p){return so.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return C(this._delegate,y)}confirmPasswordReset(y,x){return function aa(b,p,y){return sr.apply(this,arguments)}(this._delegate,y,x)}createUserWithEmailAndPassword(y,x){var Y=this;return(0,_.Z)(function*(){return Ds(Y._delegate,function ge(b,p,y){return L.apply(this,arguments)}(Y._delegate,y,x))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function hs(b,p){return rs.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function vt(b,p){const y=bi.parseLink(p);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,_.Z)(function*(){ul(yc(),y._delegate,"operation-not-supported-in-this-environment");const x=yield function ur(b,p){return Cr.apply(this,arguments)}(y._delegate,za);return x?Ds(y._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function Vu(b,p){Tr(b)._logFramework(p)}(this._delegate,y)}onAuthStateChanged(y,x,Y){const{next:de,error:pt,complete:Ut}=vc(y,x,Y);return this._delegate.onAuthStateChanged(de,pt,Ut)}onIdTokenChanged(y,x,Y){const{next:de,error:pt,complete:Ut}=vc(y,x,Y);return this._delegate.onIdTokenChanged(de,pt,Ut)}sendSignInLinkToEmail(y,x){return function O(b,p,y){return te.apply(this,arguments)}(this._delegate,y,x)}sendPasswordResetEmail(y,x){return function Hs(b,p,y){return Do.apply(this,arguments)}(this._delegate,y,x||void 0)}setPersistence(y){var x=this;return(0,_.Z)(function*(){let Y;switch(function Ah(b,p){Al(Object.values(va).includes(p),b,"invalid-persistence-type"),(0,J.b$)()?Al(p!==va.SESSION,b,"unsupported-persistence-type"):(0,J.UG)()?Al(p===va.NONE,b,"unsupported-persistence-type"):ed()?Al(p===va.NONE||p===va.LOCAL&&(0,J.hl)(),b,"unsupported-persistence-type"):Al(p===va.NONE||kd(),b,"unsupported-persistence-type")}(x._delegate,y),y){case va.SESSION:Y=Zn;break;case va.LOCAL:Y=(yield nt(ui)._isAvailable())?ui:Ft;break;case va.NONE:Y=$e;break;default:return Je("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(Y)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Ds(this._delegate,function Xs(b){return ro.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Ds(this._delegate,Pr(this._delegate,y))}signInWithCustomToken(y){return Ds(this._delegate,function Cs(b,p){return Ps.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,x){return Ds(this._delegate,function R(b,p,y){return Pr((0,J.m9)(b),co.credential(p,y))}(this._delegate,y,x))}signInWithEmailLink(y,x){return Ds(this._delegate,function sn(b,p,y){return br.apply(this,arguments)}(this._delegate,y,x))}signInWithPhoneNumber(y,x){return Ga(this._delegate,function oc(b,p,y){return xu.apply(this,arguments)}(this._delegate,y,x))}signInWithPopup(y){var x=this;return(0,_.Z)(function*(){return ul(yc(),x._delegate,"operation-not-supported-in-this-environment"),Ds(x._delegate,function Ru(b,p,y){return Vc.apply(this,arguments)}(x._delegate,y,za))})()}signInWithRedirect(y){var x=this;return(0,_.Z)(function*(){return ul(yc(),x._delegate,"operation-not-supported-in-this-environment"),yield Ma(x._delegate),$(x._delegate,y,za)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function T(b,p){return W.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=va,b})();function vc(b,p,y){let x=b;"function"!=typeof b&&({next:x,error:p,complete:y}=b);const Y=x;return{next:pt=>Y(pt&&ll.getOrCreate(pt)),error:p,complete:y}}function $d(b,p){const y=function zu(b,p){const y=zi();if(!y)return[];const x=Pe(Nd,b,p);switch(y.getItem(x)){case va.NONE:return[$e];case va.LOCAL:return[ui,Zn];case va.SESSION:return[Zn];default:return[]}}(b,p);if(typeof self<"u"&&!y.includes(ui)&&y.push(ui),typeof window<"u")for(const x of[Ft,Zn])y.includes(x)||y.push(x);return y.includes($e)||y.push($e),y}class id{constructor(){this.providerId="phone",this._delegate=new ys(Ld(m.Z.auth()))}static credential(p,y){return ys.credential(p,y)}verifyPhoneNumber(p,y){return this._delegate.verifyPhoneNumber(p,y)}unwrap(){return this._delegate}}id.PHONE_SIGN_IN_METHOD=ys.PHONE_SIGN_IN_METHOD,id.PROVIDER_ID=ys.PROVIDER_ID;const zl=ne;class Gl{constructor(p,y,x=m.Z.app()){var Y;zl(null===(Y=x.options)||void 0===Y?void 0:Y.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Oi(p,y,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function bg(b){b.INTERNAL.registerComponent(new Ie.wA("auth-compat",p=>{const y=p.getProvider("app-compat").getImmediate(),x=p.getProvider("auth");return new Wu(y,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ve_EMAIL_SIGNIN,PASSWORD_RESET:ve_PASSWORD_RESET,RECOVER_EMAIL:ve_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ve_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ve_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ve_VERIFY_EMAIL}},EmailAuthProvider:co,FacebookAuthProvider:Us,GithubAuthProvider:Io,GoogleAuthProvider:Vo,OAuthProvider:ns,SAMLAuthProvider:cs,PhoneAuthProvider:id,PhoneMultiFactorGenerator:Gc,RecaptchaVerifier:Gl,TwitterAuthProvider:sa,Auth:Wu,AuthCredential:xr,Error:J.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.3.7")}(m.Z)},8766:(cn,mt,j)=>{"use strict";j.d(mt,{Lj:()=>Je,X3:()=>ut});var _=j(5861);const m=(ne,Qe)=>Qe.some(ye=>ne instanceof ye);let J,fe;const Ie=new WeakMap,Le=new WeakMap,Be=new WeakMap,we=new WeakMap,me=new WeakMap;let je={get(ne,Qe,ye){if(ne instanceof IDBTransaction){if("done"===Qe)return Le.get(ne);if("objectStoreNames"===Qe)return ne.objectStoreNames||Be.get(ne);if("store"===Qe)return ye.objectStoreNames[1]?void 0:ye.objectStore(ye.objectStoreNames[0])}return Ce(ne[Qe])},set:(ne,Qe,ye)=>(ne[Qe]=ye,!0),has:(ne,Qe)=>ne instanceof IDBTransaction&&("done"===Qe||"store"===Qe)||Qe in ne};function Ne(ne){return"function"==typeof ne?function Dt(ne){return ne!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ne)?function(...Qe){return ne.apply(ue(this),Qe),Ce(Ie.get(this))}:function(...Qe){return Ce(ne.apply(ue(this),Qe))}:function(Qe,...ye){const qe=ne.call(ue(this),Qe,...ye);return Be.set(qe,Qe.sort?Qe.sort():[Qe]),Ce(qe)}}(ne):(ne instanceof IDBTransaction&&function Ue(ne){if(Le.has(ne))return;const Qe=new Promise((ye,qe)=>{const nt=()=>{ne.removeEventListener("complete",ct),ne.removeEventListener("error",ze),ne.removeEventListener("abort",ze)},ct=()=>{ye(),nt()},ze=()=>{qe(ne.error||new DOMException("AbortError","AbortError")),nt()};ne.addEventListener("complete",ct),ne.addEventListener("error",ze),ne.addEventListener("abort",ze)});Le.set(ne,Qe)}(ne),m(ne,function Fe(){return J||(J=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ne,je):ne)}function Ce(ne){if(ne instanceof IDBRequest)return function ve(ne){const Qe=new Promise((ye,qe)=>{const nt=()=>{ne.removeEventListener("success",ct),ne.removeEventListener("error",ze)},ct=()=>{ye(Ce(ne.result)),nt()},ze=()=>{qe(ne.error),nt()};ne.addEventListener("success",ct),ne.addEventListener("error",ze)});return Qe.then(ye=>{ye instanceof IDBCursor&&Ie.set(ye,ne)}).catch(()=>{}),me.set(Qe,ne),Qe}(ne);if(we.has(ne))return we.get(ne);const Qe=Ne(ne);return Qe!==ne&&(we.set(ne,Qe),me.set(Qe,ne)),Qe}const ue=ne=>me.get(ne);function ut(ne,Qe,{blocked:ye,upgrade:qe,blocking:nt,terminated:ct}={}){const ze=indexedDB.open(ne,Qe),_t=Ce(ze);return qe&&ze.addEventListener("upgradeneeded",ot=>{qe(Ce(ze.result),ot.oldVersion,ot.newVersion,Ce(ze.transaction))}),ye&&ze.addEventListener("blocked",()=>ye()),_t.then(ot=>{ct&&ot.addEventListener("close",()=>ct()),nt&&ot.addEventListener("versionchange",()=>nt())}).catch(()=>{}),_t}function Je(ne,{blocked:Qe}={}){const ye=indexedDB.deleteDatabase(ne);return Qe&&ye.addEventListener("blocked",()=>Qe()),Ce(ye).then(()=>{})}const et=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],X=new Map;function Re(ne,Qe){if(!(ne instanceof IDBDatabase)||Qe in ne||"string"!=typeof Qe)return;if(X.get(Qe))return X.get(Qe);const ye=Qe.replace(/FromIndex$/,""),qe=Qe!==ye,nt=Xe.includes(ye);if(!(ye in(qe?IDBIndex:IDBObjectStore).prototype)||!nt&&!et.includes(ye))return;const ct=function(){var ze=(0,_.Z)(function*(_t,...ot){const xe=this.transaction(_t,nt?"readwrite":"readonly");let Ae=xe.store;return qe&&(Ae=Ae.index(ot.shift())),(yield Promise.all([Ae[ye](...ot),nt&&xe.done]))[0]});return function(ot){return ze.apply(this,arguments)}}();return X.set(Qe,ct),ct}!function rt(ne){je=ne(je)}(ne=>({...ne,get:(Qe,ye,qe)=>Re(Qe,ye)||ne.get(Qe,ye,qe),has:(Qe,ye)=>!!Re(Qe,ye)||ne.has(Qe,ye)}))},5861:(cn,mt,j)=>{"use strict";function _(J,fe,Fe,Me,Ie,Le,Be){try{var we=J[Le](Be),me=we.value}catch(ve){return void Fe(ve)}we.done?fe(me):Promise.resolve(me).then(Me,Ie)}function m(J){return function(){var fe=this,Fe=arguments;return new Promise(function(Me,Ie){var Le=J.apply(fe,Fe);function Be(me){_(Le,Me,Ie,Be,we,"next",me)}function we(me){_(Le,Me,Ie,Be,we,"throw",me)}Be(void 0)})}}j.d(mt,{Z:()=>m})}},cn=>{cn(cn.s=7447)}]);